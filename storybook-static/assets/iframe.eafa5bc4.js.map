{"version":3,"mappings":"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A;AAAA,MAAsE;AAAA;AAAA;AAAA;AAAA,MAAuE;AAAA;AAAA;AAAA;AAAA,MAA8E;AAAA;AAAA;AAAA;AAAA,MAAsE;AAAA;AAAA;AAAA;AAAA,MAAsE;AAAA;AAAA;AAAA;AAAA,MAAsE;AAAA;AAAA;AAAA;AAAA,MAAsE;AAAA;AAAA;AAAA;AAAA,MAAsE;AAAA;AAAA;AAAA;AAAA,MAAsE;AAAA;AAAA;AAAA;AAAA,MAA0E;AAAA;AAAA;AAAA;AAAA,MAA8E;AAAA;AAAA;AAAA;AAAA,MAAyE;AAAA;AAAA;AAAA;AAAA,MAA2E;AAAA;AAAA;AAAA;AAAA,MAAyE;AAAA;AAAA;AAAA;AAAA,MAAyE;AAAA;AAAA;AAAA;AAAA,MAAyE;AAAA;AAAA;AAAA;AAAA,MAAsE;AAAA;AAAA;AAAA;AAAA,MAAsE;AAAA;AAAA;AAAA;AAAA,MAAsE;AAAA;AAAA;AAAA;AAAA,MAAuE;AAAA;AAAA;AAAA;AAAA,MAA4E;AAAA;AAAA;AAAA;AAAA,MAA0E;AAAA;AAAA;AAAA;AAAA,MAA4E;AAAA;AAAA;AAAA;AAAA,MAA4E;AAAA;AAAA;AAAA;AAAA,MAAwE;AAAA;AAAA;AAAA;AAAA,MAAyE;AAAA;AAAA;AAAA;AAAA,MAA0E;AAAA;AAAA;AAAA;AAAA,MAAyE;AAAA;AAAA;AAAA;AAAA,MAA0E;AAAA;AAAA;AAAA;AAAA,MAAyE;AAAA;AAAA;AAAA;AAAA,MAA4E;AAAA;AAAA;AAAA;AAAA,MAA0E;AAAA;AAAA;AAAA;AAAA,MAA0E;AAAA;AAAA;AAAA;AAAA,MAA4E;AAAA;AAAA;AAAA;AAAA,MAA0E;AAAA;AAAA;AAAA;AAAA,MAA4E;AAAA;AAAA;AAAA;AAAA,MAA2E;AAAA;AAAA;AAAA;AAAA,MAA2E;AAAA;AAAA;AAAA;AAAA,MAA2E;AAAA;AAAA;AAAA;AAAA,MAAwE;AAAA;AAAA;AAAA;AAAA,MAAuE;AAAA;AAAA;AAAA;AAAA,MAAuE;AAAA;AAAA;AAAA;AAAA,MAAuE;AAAA;AAAA;AAAA;AAAA,MAA0E;AAAA;AAAA;AAAA;AAAA,MAAyE;AAAA;AAAA;AAAA;AAAA,MAA0E;AAAA;AAAA;AAAA;AA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","names":["p","global","config","console","arrayReduce","basePropertyOf","require$$0","deburrLetter","freeGlobal","root","Symbol","arrayMap","isArray","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","getRawTag","objectToString","require$$1","require$$2","baseGetTag","isObjectLike","symbolTag","isSymbol","require$$3","INFINITY","symbolProto","baseToString","toString","rsComboMarksRange","reComboHalfMarksRange","rsComboSymbolsRange","rsComboRange","rsCombo","deburr","asciiWords","hasUnicodeWord","rsAstralRange","rsVarRange","rsApos","rsFitz","rsModifier","rsNonAstral","rsRegional","rsSurrPair","rsZWJ","reOptMod","rsOptVar","rsOptJoin","rsSeq","unicodeWords","words","createCompounder","baseSlice","castSlice","hasUnicode","asciiToArray","unicodeToArray","stringToArray","createCaseFirst","upperFirst","listCacheClear","eq","assocIndexOf","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","require$$4","ListCache","stackClear","stackDelete","stackGet","stackHas","isObject","funcTag","isFunction","coreJsData","isMasked","funcProto","funcToString","toSource","baseIsNative","getValue","getNative","Map","nativeCreate","hashClear","hashDelete","HASH_UNDEFINED","hashGet","hashHas","hashSet","Hash","mapCacheClear","isKeyable","getMapData","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","stackSet","require$$5","Stack","setCacheAdd","setCacheHas","SetCache","arraySome","cacheHas","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","equalArrays","Uint8Array","mapToArray","setToArray","boolTag","dateTag","errorTag","mapTag","numberTag","regexpTag","setTag","stringTag","arrayBufferTag","dataViewTag","equalByTag","arrayPush","baseGetAllKeys","arrayFilter","stubArray","propertyIsEnumerable","nativeGetSymbols","getSymbols","baseTimes","argsTag","baseIsArguments","isArguments","MAX_SAFE_INTEGER","isIndex","isLength","arrayTag","objectTag","weakMapTag","baseIsTypedArray","baseUnary","isTypedArray","isBuffer","arrayLikeKeys","isPrototype","overArg","nativeKeys","baseKeys","isArrayLike","keys","getAllKeys","equalObjects","DataView","Promise","Set","WeakMap","require$$6","getTag","require$$7","baseIsEqualDeep","baseIsEqual","includeConditionalArg_1","undefined","require","defineProperty","_defineProperty","baseAssignValue","createBaseFor","baseFor","baseForOwn","baseIsMatch","isStrictComparable","getMatchData","matchesStrictComparable","baseMatches","isKey","memoize","memoizeCapped","rePropName","reEscapeChar","stringToPath","castPath","toKey","baseGet","get","baseHasIn","hasPath","hasIn","baseMatchesProperty","identity","baseProperty","basePropertyDeep","property","baseIteratee","assignValue","baseSet","basePickBy","basePick","isFlattenable","baseFlatten","flatten","apply","overRest","constant","baseSetToString","shortOut","setToString","flatRest","_templateObject","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_arrayLikeToArray","_defineProperties","_classCallCheck","_createClass","_slicedToArray","_taggedTemplateLiteral","getPrototype","isPlainObject","_templateObject2","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","_typeof","map","_toConsumableArray","deepEqual","deprecate","_excluded","_objectWithoutPropertiesLoose","_objectWithoutProperties","mapValues","storyNameFromExport","toId","sanitize","isExportStory","Channel","KEY","globalWindow","asyncGeneratorStep","_asyncToGenerator","includeConditionalArg","getSymbolsIn","nativeKeysIn","baseKeysIn","keysIn","getAllKeysIn","matches","pickBy","pick","SynchronousPromise","_toArray","slash","this","_templateObject3","_templateObject4","addDecorator","addParameters","addLoader","addArgsEnhancer","addArgTypesEnhancer","setGlobalRender","shams","hasSymbols","toStr","implementation","bind","$TypeError","hasOwn","$concat","$replace","$exec","GetIntrinsic","callBound","has","isRegExp","isNumber","replace","formats","decode","encode","utils","split","defaults","stringify","parseObject","parse","lib","document","fetch","qs","history","__importDefault","entities_json_1","xml_json_1","escape","tokenize","AnsiToHtml","base","_getPrototypeOf","_setPrototypeOf","_isNativeReflectConstruct","_possibleConstructorReturn","_assertThisInitialized","_inherits","_createSuper","isSymbolModule","ownKeys","_objectSpread","isObjectAny","t","i","s","e","o","n","l","h","r","d","u","c","v","a","f","_","m","g","$","b","w","T","x","N","A","C","E","M","H","I","S","P","V","L","k","z","Node","isTemplateResult","render","window","parameters","ADDON_ID","q","y","D","F","J","K","Q","O","Y","W","Z","reactModule","React","decorators","PARAM_KEY","HTMLElement","rng","bytesToUuid","uuidv4","Element","clearStyles","clearStyle","BACKGROUNDS_PARAM_KEY","colors","init","globals","j","preact.Component","preact.createElement","preact.render","preact.createRef","preact.Fragment","createContext","preactCompat.createPortal","flushSync","unmountComponentAtNode","preact.options","preact.createContext","Fragment","compareObjs","renderInnerContent$1","renderInnerContent","renderMoreLinkInner","DEFAULT_WEEK_NUM_FORMAT","main","renderAllDayInner","DEFAULT_TIME_FORMAT","OPTION_REFINERS","LitElement","dayGridPlugin","timeGridPlugin","listPlugin","interactionPlugin","__decorateClass","customElement","Mark","joinable","NodeType","doc","deleteRange","lift","setBlockType","selectionToInsertionEnd","nav","agent","ie_edge","ie_upto10","ie_11up","ie","ie_version","gecko","_chrome","chrome","chrome_version","safari","ios","mac","android","webkit","webkit_version","domIndex","isEquivalentPosition","scanFor","atomElements","nodeSize","hasBlockDesc","selectionCollapsed","isOnEdge","selectionBetween","hasSelection","syncNodeSelection","editorOwnsSelection","selectCursorWrapper","brokenSelectBetweenUneditable","temporarilyEditableNear","resetEditable","removeClassOnSelectionChange","setEditable","clearNodeSelection","moveSelectionBlock","nodeLen","isIgnorable","isBlockNode","setSelFocus","selectionToDOM","switchEditable","getMods","stopNativeHorizontalDelete","skipIgnoredNodesLeft","skipIgnoredNodesRight","selectHorizontally","selectVertically","safariDownArrowBug","detachedDoc","wrapMap","readHTML","restoreReplacedSpaces","inlineParents","addContext","closeSlice","normalizeSiblings","addToSibling","closeRight","withWrappers","closeRange","_detachedDoc","handlers","editHandlers","inOrNearComposition","keyEvent","captureKeyDown","setSelectionOrigin","updateSelection","runHandlerOnContext","selectClickedNode","selectClickedLeaf","defaultTripleClick","endComposition","selectNodeModifier","forceDOMFlush","isNear","eventCoords","MouseDown","handleDoubleClick","handleTripleClick","handleSingleClick","timeoutComposition","scheduleComposeEnd","timestampFromCustomEvent","clearComposition","selectionFromDOM","brokenClipboardAPI","serializeForClipboard","captureCopy","doPaste","parseFromClipboard","sliceSingleNode","capturePaste","Dragging","dragCopyModifier","WidgetType","noSpec","Decoration","InlineType","none","DecorationSet","buildTree","empty","mapChildren","byPos","takeSpansForNode","moveSpans","withoutNulls","DecorationGroup","removeOverlap","mapAndGatherRemainingDecorations","insertAhead","normalizeKeyName","deleteSelection","joinBackward","selectNodeBackward","joinForward","selectNodeForward","newlineInCode","exitCode","createParagraphNear","liftEmptyBlock","selectParentNode","selectTextblockStart","selectTextblockEnd","run$1","run","inputRegex","starInputRegex","starPasteRegex","underscoreInputRegex","underscorePasteRegex","pasteRegex","Document","RopeSequence","Text","Link","css","preview.default","clientApi.addArgs","clientApi.addArgTypes"],"sources":["../../vite/modulepreload-polyfill","../../node_modules/global/window.js","../../node_modules/util-deprecate/browser.js","../../node_modules/ts-dedent/esm/index.js","../../node_modules/@storybook/client-logger/dist/esm/index.js","../../node_modules/lodash/_arrayReduce.js","../../node_modules/lodash/_basePropertyOf.js","../../node_modules/lodash/_deburrLetter.js","../../node_modules/lodash/_freeGlobal.js","../../node_modules/lodash/_root.js","../../node_modules/lodash/_Symbol.js","../../node_modules/lodash/_arrayMap.js","../../node_modules/lodash/isArray.js","../../node_modules/lodash/_getRawTag.js","../../node_modules/lodash/_objectToString.js","../../node_modules/lodash/_baseGetTag.js","../../node_modules/lodash/isObjectLike.js","../../node_modules/lodash/isSymbol.js","../../node_modules/lodash/_baseToString.js","../../node_modules/lodash/toString.js","../../node_modules/lodash/deburr.js","../../node_modules/lodash/_asciiWords.js","../../node_modules/lodash/_hasUnicodeWord.js","../../node_modules/lodash/_unicodeWords.js","../../node_modules/lodash/words.js","../../node_modules/lodash/_createCompounder.js","../../node_modules/lodash/_baseSlice.js","../../node_modules/lodash/_castSlice.js","../../node_modules/lodash/_hasUnicode.js","../../node_modules/lodash/_asciiToArray.js","../../node_modules/lodash/_unicodeToArray.js","../../node_modules/lodash/_stringToArray.js","../../node_modules/lodash/_createCaseFirst.js","../../node_modules/lodash/upperFirst.js","../../node_modules/lodash/startCase.js","../../node_modules/lodash/_listCacheClear.js","../../node_modules/lodash/eq.js","../../node_modules/lodash/_assocIndexOf.js","../../node_modules/lodash/_listCacheDelete.js","../../node_modules/lodash/_listCacheGet.js","../../node_modules/lodash/_listCacheHas.js","../../node_modules/lodash/_listCacheSet.js","../../node_modules/lodash/_ListCache.js","../../node_modules/lodash/_stackClear.js","../../node_modules/lodash/_stackDelete.js","../../node_modules/lodash/_stackGet.js","../../node_modules/lodash/_stackHas.js","../../node_modules/lodash/isObject.js","../../node_modules/lodash/isFunction.js","../../node_modules/lodash/_coreJsData.js","../../node_modules/lodash/_isMasked.js","../../node_modules/lodash/_toSource.js","../../node_modules/lodash/_baseIsNative.js","../../node_modules/lodash/_getValue.js","../../node_modules/lodash/_getNative.js","../../node_modules/lodash/_Map.js","../../node_modules/lodash/_nativeCreate.js","../../node_modules/lodash/_hashClear.js","../../node_modules/lodash/_hashDelete.js","../../node_modules/lodash/_hashGet.js","../../node_modules/lodash/_hashHas.js","../../node_modules/lodash/_hashSet.js","../../node_modules/lodash/_Hash.js","../../node_modules/lodash/_mapCacheClear.js","../../node_modules/lodash/_isKeyable.js","../../node_modules/lodash/_getMapData.js","../../node_modules/lodash/_mapCacheDelete.js","../../node_modules/lodash/_mapCacheGet.js","../../node_modules/lodash/_mapCacheHas.js","../../node_modules/lodash/_mapCacheSet.js","../../node_modules/lodash/_MapCache.js","../../node_modules/lodash/_stackSet.js","../../node_modules/lodash/_Stack.js","../../node_modules/lodash/_setCacheAdd.js","../../node_modules/lodash/_setCacheHas.js","../../node_modules/lodash/_SetCache.js","../../node_modules/lodash/_arraySome.js","../../node_modules/lodash/_cacheHas.js","../../node_modules/lodash/_equalArrays.js","../../node_modules/lodash/_Uint8Array.js","../../node_modules/lodash/_mapToArray.js","../../node_modules/lodash/_setToArray.js","../../node_modules/lodash/_equalByTag.js","../../node_modules/lodash/_arrayPush.js","../../node_modules/lodash/_baseGetAllKeys.js","../../node_modules/lodash/_arrayFilter.js","../../node_modules/lodash/stubArray.js","../../node_modules/lodash/_getSymbols.js","../../node_modules/lodash/_baseTimes.js","../../node_modules/lodash/_baseIsArguments.js","../../node_modules/lodash/isArguments.js","../../node_modules/lodash/stubFalse.js","../../node_modules/lodash/isBuffer.js","../../node_modules/lodash/_isIndex.js","../../node_modules/lodash/isLength.js","../../node_modules/lodash/_baseIsTypedArray.js","../../node_modules/lodash/_baseUnary.js","../../node_modules/lodash/_nodeUtil.js","../../node_modules/lodash/isTypedArray.js","../../node_modules/lodash/_arrayLikeKeys.js","../../node_modules/lodash/_isPrototype.js","../../node_modules/lodash/_overArg.js","../../node_modules/lodash/_nativeKeys.js","../../node_modules/lodash/_baseKeys.js","../../node_modules/lodash/isArrayLike.js","../../node_modules/lodash/keys.js","../../node_modules/lodash/_getAllKeys.js","../../node_modules/lodash/_equalObjects.js","../../node_modules/lodash/_DataView.js","../../node_modules/lodash/_Promise.js","../../node_modules/lodash/_Set.js","../../node_modules/lodash/_WeakMap.js","../../node_modules/lodash/_getTag.js","../../node_modules/lodash/_baseIsEqualDeep.js","../../node_modules/lodash/_baseIsEqual.js","../../node_modules/lodash/isEqual.js","../../node_modules/@storybook/csf/dist/includeConditionalArg.js","../../node_modules/@storybook/csf/dist/story.js","../../node_modules/@storybook/csf/dist/index.js","../../node_modules/regenerator-runtime/runtime.js","../../node_modules/memoizerific/memoizerific.js","../../node_modules/lodash/_defineProperty.js","../../node_modules/lodash/_baseAssignValue.js","../../node_modules/lodash/_createBaseFor.js","../../node_modules/lodash/_baseFor.js","../../node_modules/lodash/_baseForOwn.js","../../node_modules/lodash/_baseIsMatch.js","../../node_modules/lodash/_isStrictComparable.js","../../node_modules/lodash/_getMatchData.js","../../node_modules/lodash/_matchesStrictComparable.js","../../node_modules/lodash/_baseMatches.js","../../node_modules/lodash/_isKey.js","../../node_modules/lodash/memoize.js","../../node_modules/lodash/_memoizeCapped.js","../../node_modules/lodash/_stringToPath.js","../../node_modules/lodash/_castPath.js","../../node_modules/lodash/_toKey.js","../../node_modules/lodash/_baseGet.js","../../node_modules/lodash/get.js","../../node_modules/lodash/_baseHasIn.js","../../node_modules/lodash/_hasPath.js","../../node_modules/lodash/hasIn.js","../../node_modules/lodash/_baseMatchesProperty.js","../../node_modules/lodash/identity.js","../../node_modules/lodash/_baseProperty.js","../../node_modules/lodash/_basePropertyDeep.js","../../node_modules/lodash/property.js","../../node_modules/lodash/_baseIteratee.js","../../node_modules/lodash/mapValues.js","../../node_modules/lodash/_assignValue.js","../../node_modules/lodash/_baseSet.js","../../node_modules/lodash/_basePickBy.js","../../node_modules/lodash/_basePick.js","../../node_modules/lodash/_isFlattenable.js","../../node_modules/lodash/_baseFlatten.js","../../node_modules/lodash/flatten.js","../../node_modules/lodash/_apply.js","../../node_modules/lodash/_overRest.js","../../node_modules/lodash/constant.js","../../node_modules/lodash/_baseSetToString.js","../../node_modules/lodash/_shortOut.js","../../node_modules/lodash/_setToString.js","../../node_modules/lodash/_flatRest.js","../../node_modules/lodash/pick.js","../../node_modules/synchronous-promise/index.js","../../node_modules/@storybook/store/dist/esm/StoryIndexStore.js","../../node_modules/fast-deep-equal/index.js","../../node_modules/lodash/_getPrototype.js","../../node_modules/lodash/isPlainObject.js","../../node_modules/@storybook/store/dist/esm/args.js","../../node_modules/@storybook/store/dist/esm/ArgsStore.js","../../node_modules/@storybook/store/dist/esm/csf/getValuesFromArgTypes.js","../../node_modules/@storybook/store/dist/esm/GlobalsStore.js","../../node_modules/@storybook/store/dist/esm/csf/normalizeInputTypes.js","../../node_modules/@storybook/store/dist/esm/csf/normalizeStory.js","../../node_modules/@storybook/store/dist/esm/csf/normalizeComponentAnnotations.js","../../node_modules/@storybook/store/dist/esm/csf/processCSFFile.js","../../node_modules/@storybook/store/dist/esm/parameters.js","../../node_modules/@storybook/core-events/dist/esm/index.js","../../node_modules/@storybook/channels/dist/esm/index.js","../../node_modules/@storybook/addons/dist/esm/storybook-channel-mock.js","../../node_modules/@storybook/addons/dist/esm/types.js","../../node_modules/@storybook/addons/dist/esm/index.js","../../node_modules/@storybook/addons/dist/esm/make-decorator.js","../../node_modules/@storybook/addons/dist/esm/hooks.js","../../node_modules/@storybook/store/dist/esm/hooks.js","../../node_modules/@storybook/store/dist/esm/decorators.js","../../node_modules/@storybook/store/dist/esm/csf/prepareStory.js","../../node_modules/@storybook/store/dist/esm/inferArgTypes.js","../../node_modules/lodash/_getSymbolsIn.js","../../node_modules/lodash/_nativeKeysIn.js","../../node_modules/lodash/_baseKeysIn.js","../../node_modules/lodash/keysIn.js","../../node_modules/lodash/_getAllKeysIn.js","../../node_modules/lodash/pickBy.js","../../node_modules/@storybook/store/dist/esm/filterArgTypes.js","../../node_modules/@storybook/store/dist/esm/inferControls.js","../../node_modules/@storybook/store/dist/esm/csf/normalizeProjectAnnotations.js","../../node_modules/@storybook/store/dist/esm/csf/composeConfigs.js","../../node_modules/@storybook/store/dist/esm/csf/testing-utils/index.js","../../node_modules/@storybook/store/dist/esm/StoryStore.js","../../node_modules/slash/index.js","../../node_modules/@storybook/store/dist/esm/autoTitle.js","../../node_modules/stable/stable.js","../../node_modules/@storybook/store/dist/esm/storySort.js","../../node_modules/@storybook/store/dist/esm/sortStories.js","../../node_modules/@storybook/client-api/dist/esm/StoryStoreFacade.js","../../node_modules/@storybook/client-api/dist/esm/ClientApi.js","../../node_modules/has-symbols/shams.js","../../node_modules/has-symbols/index.js","../../node_modules/function-bind/implementation.js","../../node_modules/function-bind/index.js","../../node_modules/has/src/index.js","../../node_modules/get-intrinsic/index.js","../../node_modules/call-bind/index.js","../../node_modules/call-bind/callBound.js","../../__vite-browser-external","../../node_modules/object-inspect/index.js","../../node_modules/side-channel/index.js","../../node_modules/qs/lib/formats.js","../../node_modules/qs/lib/utils.js","../../node_modules/qs/lib/stringify.js","../../node_modules/qs/lib/parse.js","../../node_modules/qs/lib/index.js","../../node_modules/@storybook/client-api/dist/esm/queryparams.js","../../node_modules/@storybook/preview-web/dist/esm/StoryRender.js","../../node_modules/@storybook/preview-web/dist/esm/Preview.js","../../node_modules/@storybook/preview-web/dist/esm/parseArgsParam.js","../../node_modules/@storybook/preview-web/dist/esm/UrlStore.js","../../node_modules/entities/lib/decode_codepoint.js","../../node_modules/entities/lib/decode.js","../../node_modules/entities/lib/encode.js","../../node_modules/entities/lib/index.js","../../node_modules/ansi-to-html/lib/ansi_to_html.js","../../node_modules/@storybook/preview-web/dist/esm/WebView.js","../../vite/preload-helper","../../node_modules/@storybook/preview-web/dist/esm/DocsRender.js","../../node_modules/@storybook/preview-web/dist/esm/PreviewWeb.js","../../node_modules/@storybook/preview-web/dist/esm/simulate-pageload.js","../../node_modules/has-tostringtag/shams.js","../../node_modules/is-regex/index.js","../../node_modules/is-function/index.js","../../node_modules/is-symbol/index.js","../../node_modules/telejson/node_modules/isobject/index.js","../../node_modules/telejson/dist/esm/dom-event.js","../../node_modules/telejson/dist/esm/index.js","../../node_modules/@storybook/channel-postmessage/dist/esm/index.js","../../node_modules/@storybook/core-client/dist/esm/preview/executeLoadable.js","../../node_modules/@storybook/core-client/dist/esm/preview/start.js","../../node_modules/@storybook/web-components/dist/esm/client/preview/globals.js","../../node_modules/lit-html/lit-html.js","../../node_modules/lit-html/directive-helpers.js","../../node_modules/@storybook/web-components/dist/esm/client/preview/render.js","../../node_modules/@storybook/web-components/dist/esm/client/preview/index.js","../../node_modules/@storybook/web-components/dist/esm/client/customElements.js","../../node_modules/@storybook/web-components/dist/esm/client/index.js","../../node_modules/@storybook/web-components/dist/esm/client/preview/config.js","../../node_modules/object-assign/index.js","../../node_modules/@storybook/docs-tools/dist/esm/argTypes/enhanceArgTypes.js","../../node_modules/@storybook/docs-tools/dist/esm/shared.js","../../node_modules/@storybook/web-components/dist/esm/client/docs/custom-elements.js","../../node_modules/@storybook/web-components/dist/esm/client/docs/sourceDecorator.js","../../node_modules/react/cjs/react.production.min.js","../../node_modules/react/index.js","../../node_modules/@storybook/web-components/dist/esm/client/docs/prepareForInline.js","../../node_modules/@storybook/web-components/dist/esm/client/docs/config.js","../../node_modules/@storybook/addon-links/dist/esm/constants.js","../../node_modules/@storybook/addon-links/dist/esm/utils.js","../../node_modules/@storybook/addon-links/dist/esm/index.js","../../node_modules/@storybook/addon-links/dist/esm/preview.js","../../node_modules/@storybook/addon-docs/dist/esm/preview.js","../../node_modules/@storybook/addon-actions/dist/esm/constants.js","../../node_modules/uuid-browser/lib/rng-browser.js","../../node_modules/uuid-browser/lib/bytesToUuid.js","../../node_modules/uuid-browser/v4.js","../../node_modules/@storybook/addon-actions/dist/esm/preview/configureActions.js","../../node_modules/@storybook/addon-actions/dist/esm/preview/action.js","../../node_modules/@storybook/addon-actions/dist/esm/preview/actions.js","../../node_modules/@storybook/addon-actions/dist/esm/preview/decorateAction.js","../../node_modules/@storybook/addon-actions/dist/esm/preview/withActions.js","../../node_modules/@storybook/addon-actions/dist/esm/index.js","../../node_modules/@storybook/addon-actions/dist/esm/preset/addDecorator.js","../../node_modules/@storybook/addon-actions/dist/esm/preset/addArgsHelpers.js","../../node_modules/@storybook/addon-actions/dist/esm/preset/addArgs.js","../../node_modules/@storybook/addon-backgrounds/dist/esm/constants.js","../../node_modules/@storybook/addon-backgrounds/dist/esm/helpers/index.js","../../node_modules/@storybook/addon-backgrounds/dist/esm/decorators/withBackground.js","../../node_modules/@storybook/addon-backgrounds/dist/esm/decorators/withGrid.js","../../node_modules/@storybook/addon-backgrounds/dist/esm/preview.js","../../node_modules/@storybook/addon-measure/dist/esm/box-model/canvas.js","../../node_modules/@storybook/addon-measure/dist/esm/box-model/labels.js","../../node_modules/@storybook/addon-measure/dist/esm/box-model/visualizer.js","../../node_modules/@storybook/addon-measure/dist/esm/util.js","../../node_modules/@storybook/addon-measure/dist/esm/withMeasure.js","../../node_modules/@storybook/addon-measure/dist/esm/constants.js","../../node_modules/@storybook/addon-measure/dist/esm/preview.js","../../node_modules/@storybook/addon-outline/dist/esm/helpers.js","../../node_modules/@storybook/addon-outline/dist/esm/constants.js","../../node_modules/@storybook/addon-outline/dist/esm/outlineCSS.js","../../node_modules/@storybook/addon-outline/dist/esm/withOutline.js","../../node_modules/@storybook/addon-outline/dist/esm/preset/preview.js","../../.storybook/preview.js","../../node_modules/@lit/reactive-element/css-tag.js","../../node_modules/@lit/reactive-element/reactive-element.js","../../node_modules/lit-element/lit-element.js","../../node_modules/tslib/tslib.es6.js","../../node_modules/preact/dist/preact.module.js","../../node_modules/preact/hooks/dist/hooks.module.js","../../node_modules/preact/compat/dist/compat.module.js","../../node_modules/@fullcalendar/core/vdom.js","../../node_modules/@lit/reactive-element/decorators/custom-element.js","../../node_modules/@lit/reactive-element/decorators/property.js","../../node_modules/@lit/reactive-element/decorators/query-assigned-elements.js","../../node_modules/@fullcalendar/common/vdom.js","../../node_modules/@fullcalendar/common/main.js","../../node_modules/@fullcalendar/core/main.js","../../node_modules/@fullcalendar/daygrid/main.js","../../node_modules/@fullcalendar/timegrid/main.js","../../node_modules/@fullcalendar/list/main.js","../../node_modules/@fullcalendar/interaction/main.js","../../src/helpers.ts","../../src/components/full-calendar.ts","../../node_modules/orderedmap/dist/index.js","../../node_modules/prosemirror-model/dist/index.js","../../node_modules/prosemirror-transform/dist/index.js","../../node_modules/prosemirror-state/dist/index.js","../../node_modules/@tiptap/core/node_modules/prosemirror-view/dist/index.js","../../node_modules/w3c-keyname/index.es.js","../../node_modules/prosemirror-keymap/dist/index.js","../../node_modules/prosemirror-commands/dist/index.js","../../node_modules/prosemirror-schema-list/dist/index.js","../../node_modules/@tiptap/core/dist/tiptap-core.esm.js","../../node_modules/@tiptap/extension-blockquote/dist/tiptap-extension-blockquote.esm.js","../../node_modules/@tiptap/extension-bold/dist/tiptap-extension-bold.esm.js","../../node_modules/@tiptap/extension-bullet-list/dist/tiptap-extension-bullet-list.esm.js","../../node_modules/@tiptap/extension-code/dist/tiptap-extension-code.esm.js","../../node_modules/@tiptap/extension-code-block/dist/tiptap-extension-code-block.esm.js","../../node_modules/@tiptap/extension-document/dist/tiptap-extension-document.esm.js","../../node_modules/prosemirror-dropcursor/dist/index.js","../../node_modules/@tiptap/extension-dropcursor/dist/tiptap-extension-dropcursor.esm.js","../../node_modules/prosemirror-view/dist/index.js","../../node_modules/prosemirror-gapcursor/dist/index.js","../../node_modules/@tiptap/extension-gapcursor/dist/tiptap-extension-gapcursor.esm.js","../../node_modules/@tiptap/extension-hard-break/dist/tiptap-extension-hard-break.esm.js","../../node_modules/@tiptap/extension-heading/dist/tiptap-extension-heading.esm.js","../../node_modules/rope-sequence/dist/index.es.js","../../node_modules/prosemirror-history/dist/index.js","../../node_modules/@tiptap/extension-history/dist/tiptap-extension-history.esm.js","../../node_modules/@tiptap/extension-horizontal-rule/dist/tiptap-extension-horizontal-rule.esm.js","../../node_modules/@tiptap/extension-italic/dist/tiptap-extension-italic.esm.js","../../node_modules/@tiptap/extension-list-item/dist/tiptap-extension-list-item.esm.js","../../node_modules/@tiptap/extension-ordered-list/dist/tiptap-extension-ordered-list.esm.js","../../node_modules/@tiptap/extension-paragraph/dist/tiptap-extension-paragraph.esm.js","../../node_modules/@tiptap/extension-strike/dist/tiptap-extension-strike.esm.js","../../node_modules/@tiptap/extension-text/dist/tiptap-extension-text.esm.js","../../node_modules/@tiptap/starter-kit/dist/tiptap-starter-kit.esm.js","../../node_modules/linkifyjs/dist/linkify.module.js","../../node_modules/@tiptap/extension-link/dist/tiptap-extension-link.esm.js","../../src/components/tiptap-editor.ts","../../../../../../../../virtual:/@storybook/builder-vite/storybook-stories.js","../../../../../../../../virtual:/@storybook/builder-vite/vite-app.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","var win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof global !== \"undefined\") {\n    win = global;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","export function dedent(templ) {\n    var values = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        values[_i - 1] = arguments[_i];\n    }\n    var strings = Array.from(typeof templ === 'string' ? [templ] : templ);\n    strings[strings.length - 1] = strings[strings.length - 1].replace(/\\r?\\n([\\t ]*)$/, '');\n    var indentLengths = strings.reduce(function (arr, str) {\n        var matches = str.match(/\\n([\\t ]+|(?!\\s).)/g);\n        if (matches) {\n            return arr.concat(matches.map(function (match) { var _a, _b; return (_b = (_a = match.match(/[\\t ]/g)) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0; }));\n        }\n        return arr;\n    }, []);\n    if (indentLengths.length) {\n        var pattern_1 = new RegExp(\"\\n[\\t ]{\" + Math.min.apply(Math, indentLengths) + \"}\", 'g');\n        strings = strings.map(function (str) { return str.replace(pattern_1, '\\n'); });\n    }\n    strings[0] = strings[0].replace(/^\\r?\\n/, '');\n    var string = strings[0];\n    values.forEach(function (value, i) {\n        var endentations = string.match(/(?:^|\\n)( *)$/);\n        var endentation = endentations ? endentations[1] : '';\n        var indentedValue = value;\n        if (typeof value === 'string' && value.includes('\\n')) {\n            indentedValue = String(value)\n                .split('\\n')\n                .map(function (str, i) {\n                return i === 0 ? str : \"\" + endentation + str;\n            })\n                .join('\\n');\n        }\n        string += indentedValue + strings[i + 1];\n    });\n    return string;\n}\nexport default dedent;\n//# sourceMappingURL=index.js.map","import \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport global from 'global';\nvar LOGLEVEL = global.LOGLEVEL,\n    console = global.console;\nvar levels = {\n  trace: 1,\n  debug: 2,\n  info: 3,\n  warn: 4,\n  error: 5,\n  silent: 10\n};\nvar currentLogLevelString = LOGLEVEL;\nvar currentLogLevelNumber = levels[currentLogLevelString] || levels.info;\nexport var logger = {\n  trace: function trace(message) {\n    for (var _len = arguments.length, rest = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      rest[_key - 1] = arguments[_key];\n    }\n\n    return currentLogLevelNumber <= levels.trace && console.trace.apply(console, [message].concat(rest));\n  },\n  debug: function debug(message) {\n    for (var _len2 = arguments.length, rest = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      rest[_key2 - 1] = arguments[_key2];\n    }\n\n    return currentLogLevelNumber <= levels.debug && console.debug.apply(console, [message].concat(rest));\n  },\n  info: function info(message) {\n    for (var _len3 = arguments.length, rest = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      rest[_key3 - 1] = arguments[_key3];\n    }\n\n    return currentLogLevelNumber <= levels.info && console.info.apply(console, [message].concat(rest));\n  },\n  warn: function warn(message) {\n    for (var _len4 = arguments.length, rest = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n      rest[_key4 - 1] = arguments[_key4];\n    }\n\n    return currentLogLevelNumber <= levels.warn && console.warn.apply(console, [message].concat(rest));\n  },\n  error: function error(message) {\n    for (var _len5 = arguments.length, rest = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n      rest[_key5 - 1] = arguments[_key5];\n    }\n\n    return currentLogLevelNumber <= levels.error && console.error.apply(console, [message].concat(rest));\n  },\n  log: function log(message) {\n    for (var _len6 = arguments.length, rest = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {\n      rest[_key6 - 1] = arguments[_key6];\n    }\n\n    return currentLogLevelNumber < levels.silent && console.log.apply(console, [message].concat(rest));\n  }\n};\nvar logged = new Set();\nexport var once = function once(type) {\n  return function (message) {\n    if (logged.has(message)) return undefined;\n    logged.add(message);\n\n    for (var _len7 = arguments.length, rest = new Array(_len7 > 1 ? _len7 - 1 : 0), _key7 = 1; _key7 < _len7; _key7++) {\n      rest[_key7 - 1] = arguments[_key7];\n    }\n\n    return logger[type].apply(logger, [message].concat(rest));\n  };\n};\n\nonce.clear = function () {\n  return logged.clear();\n};\n\nonce.trace = once('trace');\nonce.debug = once('debug');\nonce.info = once('info');\nonce.warn = once('warn');\nonce.error = once('error');\nonce.log = once('log');\nexport var pretty = function pretty(type) {\n  return function () {\n    var argArray = [];\n\n    for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n      args[_key8] = arguments[_key8];\n    }\n\n    if (args.length) {\n      var startTagRe = /<span\\s+style=(['\"])([^'\"]*)\\1\\s*>/gi;\n      var endTagRe = /<\\/span>/gi;\n      var reResultArray;\n      argArray.push(args[0].replace(startTagRe, '%c').replace(endTagRe, '%c')); // eslint-disable-next-line no-cond-assign\n\n      while (reResultArray = startTagRe.exec(args[0])) {\n        argArray.push(reResultArray[2]);\n        argArray.push('');\n      } // pass through subsequent args since chrome dev tools does not (yet) support console.log styling of the following form: console.log('%cBlue!', 'color: blue;', '%cRed!', 'color: red;');\n      // eslint-disable-next-line no-plusplus\n\n\n      for (var j = 1; j < args.length; j++) {\n        argArray.push(args[j]);\n      }\n    } // eslint-disable-next-line prefer-spread\n\n\n    logger[type].apply(logger, argArray);\n  };\n};\npretty.trace = pretty('trace');\npretty.debug = pretty('debug');\npretty.info = pretty('info');\npretty.warn = pretty('warn');\npretty.error = pretty('error');","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayReduce;\n","/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = basePropertyOf;\n","var basePropertyOf = require('./_basePropertyOf');\n\n/** Used to map Latin Unicode letters to basic Latin letters. */\nvar deburredLetters = {\n  // Latin-1 Supplement block.\n  '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n  '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n  '\\xc7': 'C',  '\\xe7': 'c',\n  '\\xd0': 'D',  '\\xf0': 'd',\n  '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n  '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n  '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n  '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n  '\\xd1': 'N',  '\\xf1': 'n',\n  '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n  '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n  '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n  '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n  '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n  '\\xc6': 'Ae', '\\xe6': 'ae',\n  '\\xde': 'Th', '\\xfe': 'th',\n  '\\xdf': 'ss',\n  // Latin Extended-A block.\n  '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n  '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n  '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n  '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n  '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n  '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n  '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n  '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n  '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n  '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n  '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n  '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n  '\\u0134': 'J',  '\\u0135': 'j',\n  '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n  '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n  '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n  '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n  '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n  '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n  '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n  '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n  '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n  '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n  '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n  '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n  '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n  '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n  '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n  '\\u0174': 'W',  '\\u0175': 'w',\n  '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n  '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n  '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n  '\\u0132': 'IJ', '\\u0133': 'ij',\n  '\\u0152': 'Oe', '\\u0153': 'oe',\n  '\\u0149': \"'n\", '\\u017f': 's'\n};\n\n/**\n * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n * letters to basic Latin letters.\n *\n * @private\n * @param {string} letter The matched letter to deburr.\n * @returns {string} Returns the deburred letter.\n */\nvar deburrLetter = basePropertyOf(deburredLetters);\n\nmodule.exports = deburrLetter;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var deburrLetter = require('./_deburrLetter'),\n    toString = require('./toString');\n\n/** Used to match Latin Unicode letters (excluding mathematical operators). */\nvar reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n/** Used to compose unicode character classes. */\nvar rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange;\n\n/** Used to compose unicode capture groups. */\nvar rsCombo = '[' + rsComboRange + ']';\n\n/**\n * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n */\nvar reComboMark = RegExp(rsCombo, 'g');\n\n/**\n * Deburrs `string` by converting\n * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n * letters to basic Latin letters and removing\n * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to deburr.\n * @returns {string} Returns the deburred string.\n * @example\n *\n * _.deburr('dj vu');\n * // => 'deja vu'\n */\nfunction deburr(string) {\n  string = toString(string);\n  return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n}\n\nmodule.exports = deburr;\n","/** Used to match words composed of alphanumeric characters. */\nvar reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n/**\n * Splits an ASCII `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction asciiWords(string) {\n  return string.match(reAsciiWord) || [];\n}\n\nmodule.exports = asciiWords;\n","/** Used to detect strings that need a more robust regexp to match words. */\nvar reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n/**\n * Checks if `string` contains a word composed of Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a word is found, else `false`.\n */\nfunction hasUnicodeWord(string) {\n  return reHasUnicodeWord.test(string);\n}\n\nmodule.exports = hasUnicodeWord;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsDingbatRange = '\\\\u2700-\\\\u27bf',\n    rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n    rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n    rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n    rsPunctuationRange = '\\\\u2000-\\\\u206f',\n    rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n    rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n    rsVarRange = '\\\\ufe0e\\\\ufe0f',\n    rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\",\n    rsBreak = '[' + rsBreakRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsDigits = '\\\\d+',\n    rsDingbat = '[' + rsDingbatRange + ']',\n    rsLower = '[' + rsLowerRange + ']',\n    rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsUpper = '[' + rsUpperRange + ']',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n    rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n    rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n    rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n    reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n    rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq;\n\n/** Used to match complex or compound words. */\nvar reUnicodeWord = RegExp([\n  rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n  rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n  rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n  rsUpper + '+' + rsOptContrUpper,\n  rsOrdUpper,\n  rsOrdLower,\n  rsDigits,\n  rsEmoji\n].join('|'), 'g');\n\n/**\n * Splits a Unicode `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction unicodeWords(string) {\n  return string.match(reUnicodeWord) || [];\n}\n\nmodule.exports = unicodeWords;\n","var asciiWords = require('./_asciiWords'),\n    hasUnicodeWord = require('./_hasUnicodeWord'),\n    toString = require('./toString'),\n    unicodeWords = require('./_unicodeWords');\n\n/**\n * Splits `string` into an array of its words.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {RegExp|string} [pattern] The pattern to match words.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the words of `string`.\n * @example\n *\n * _.words('fred, barney, & pebbles');\n * // => ['fred', 'barney', 'pebbles']\n *\n * _.words('fred, barney, & pebbles', /[^, ]+/g);\n * // => ['fred', 'barney', '&', 'pebbles']\n */\nfunction words(string, pattern, guard) {\n  string = toString(string);\n  pattern = guard ? undefined : pattern;\n\n  if (pattern === undefined) {\n    return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n  }\n  return string.match(pattern) || [];\n}\n\nmodule.exports = words;\n","var arrayReduce = require('./_arrayReduce'),\n    deburr = require('./deburr'),\n    words = require('./words');\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\";\n\n/** Used to match apostrophes. */\nvar reApos = RegExp(rsApos, 'g');\n\n/**\n * Creates a function like `_.camelCase`.\n *\n * @private\n * @param {Function} callback The function to combine each word.\n * @returns {Function} Returns the new compounder function.\n */\nfunction createCompounder(callback) {\n  return function(string) {\n    return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n  };\n}\n\nmodule.exports = createCompounder;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","var baseSlice = require('./_baseSlice');\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nmodule.exports = castSlice;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nmodule.exports = hasUnicode;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nmodule.exports = asciiToArray;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nmodule.exports = unicodeToArray;\n","var asciiToArray = require('./_asciiToArray'),\n    hasUnicode = require('./_hasUnicode'),\n    unicodeToArray = require('./_unicodeToArray');\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nmodule.exports = stringToArray;\n","var castSlice = require('./_castSlice'),\n    hasUnicode = require('./_hasUnicode'),\n    stringToArray = require('./_stringToArray'),\n    toString = require('./toString');\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nmodule.exports = createCaseFirst;\n","var createCaseFirst = require('./_createCaseFirst');\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nmodule.exports = upperFirst;\n","var createCompounder = require('./_createCompounder'),\n    upperFirst = require('./upperFirst');\n\n/**\n * Converts `string` to\n * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n *\n * @static\n * @memberOf _\n * @since 3.1.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the start cased string.\n * @example\n *\n * _.startCase('--foo-bar--');\n * // => 'Foo Bar'\n *\n * _.startCase('fooBar');\n * // => 'Foo Bar'\n *\n * _.startCase('__FOO_BAR__');\n * // => 'FOO BAR'\n */\nvar startCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + upperFirst(word);\n});\n\nmodule.exports = startCase;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.includeConditionalArg = exports.testValue = void 0;\n\nvar _isEqual = _interopRequireDefault(require(\"lodash/isEqual\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar count = function count(vals) {\n  return vals.map(function (v) {\n    return typeof v !== 'undefined';\n  }).filter(Boolean).length;\n};\n\nvar testValue = function testValue(cond, value) {\n  var _ref = cond,\n      exists = _ref.exists,\n      eq = _ref.eq,\n      neq = _ref.neq,\n      truthy = _ref.truthy;\n\n  if (count([exists, eq, neq, truthy]) > 1) {\n    throw new Error(\"Invalid conditional test \".concat(JSON.stringify({\n      exists: exists,\n      eq: eq,\n      neq: neq\n    })));\n  }\n\n  if (typeof eq !== 'undefined') {\n    return (0, _isEqual[\"default\"])(value, eq);\n  }\n\n  if (typeof neq !== 'undefined') {\n    return !(0, _isEqual[\"default\"])(value, neq);\n  }\n\n  if (typeof exists !== 'undefined') {\n    var valueExists = typeof value !== 'undefined';\n    return exists ? valueExists : !valueExists;\n  }\n\n  var shouldBeTruthy = typeof truthy === 'undefined' ? true : truthy;\n  return shouldBeTruthy ? !!value : !value;\n};\n/**\n * Helper function to include/exclude an arg based on the value of other other args\n * aka \"conditional args\"\n */\n\n\nexports.testValue = testValue;\n\nvar includeConditionalArg = function includeConditionalArg(argType, args, globals) {\n  if (!argType[\"if\"]) return true;\n  var _ref2 = argType[\"if\"],\n      arg = _ref2.arg,\n      global = _ref2.global;\n\n  if (count([arg, global]) !== 1) {\n    throw new Error(\"Invalid conditional value \".concat(JSON.stringify({\n      arg: arg,\n      global: global\n    })));\n  }\n\n  var value = arg ? args[arg] : globals[global];\n  return testValue(argType[\"if\"], value);\n};\n\nexports.includeConditionalArg = includeConditionalArg;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _SBType = require(\"./SBType\");\n\nObject.keys(_SBType).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _SBType[key];\n    }\n  });\n});","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  sanitize: true,\n  toId: true,\n  storyNameFromExport: true,\n  isExportStory: true,\n  parseKind: true,\n  includeConditionalArg: true\n};\nexports.isExportStory = isExportStory;\nObject.defineProperty(exports, \"includeConditionalArg\", {\n  enumerable: true,\n  get: function get() {\n    return _includeConditionalArg.includeConditionalArg;\n  }\n});\nexports.parseKind = exports.storyNameFromExport = exports.toId = exports.sanitize = void 0;\n\nvar _startCase = _interopRequireDefault(require(\"lodash/startCase\"));\n\nvar _includeConditionalArg = require(\"./includeConditionalArg\");\n\nvar _story = require(\"./story\");\n\nObject.keys(_story).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _story[key];\n    }\n  });\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n/**\n * Remove punctuation and illegal characters from a story ID.\n *\n * See https://gist.github.com/davidjrice/9d2af51100e41c6c4b4a\n */\nvar sanitize = function sanitize(string) {\n  return string.toLowerCase() // eslint-disable-next-line no-useless-escape\n  .replace(/[ '`~!@#$%^&*()_|+\\-=?;:'\",.<>\\{\\}\\[\\]\\\\\\/]/gi, '-').replace(/-+/g, '-').replace(/^-+/, '').replace(/-+$/, '');\n};\n\nexports.sanitize = sanitize;\n\nvar sanitizeSafe = function sanitizeSafe(string, part) {\n  var sanitized = sanitize(string);\n\n  if (sanitized === '') {\n    throw new Error(\"Invalid \".concat(part, \" '\").concat(string, \"', must include alphanumeric characters\"));\n  }\n\n  return sanitized;\n};\n/**\n * Generate a storybook ID from a component/kind and story name.\n */\n\n\nvar toId = function toId(kind, name) {\n  return \"\".concat(sanitizeSafe(kind, 'kind')).concat(name ? \"--\".concat(sanitizeSafe(name, 'name')) : '');\n};\n/**\n * Transform a CSF named export into a readable story name\n */\n\n\nexports.toId = toId;\n\nvar storyNameFromExport = function storyNameFromExport(key) {\n  return (0, _startCase[\"default\"])(key);\n};\n\nexports.storyNameFromExport = storyNameFromExport;\n\nfunction matches(storyKey, arrayOrRegex) {\n  if (Array.isArray(arrayOrRegex)) {\n    return arrayOrRegex.includes(storyKey);\n  }\n\n  return storyKey.match(arrayOrRegex);\n}\n/**\n * Does a named export match CSF inclusion/exclusion options?\n */\n\n\nfunction isExportStory(key, _ref) {\n  var includeStories = _ref.includeStories,\n      excludeStories = _ref.excludeStories;\n  return (// https://babeljs.io/docs/en/babel-plugin-transform-modules-commonjs\n    key !== '__esModule' && (!includeStories || matches(key, includeStories)) && (!excludeStories || !matches(key, excludeStories))\n  );\n}\n\n/**\n * Parse out the component/kind name from a path, using the given separator config.\n */\nvar parseKind = function parseKind(kind, _ref2) {\n  var rootSeparator = _ref2.rootSeparator,\n      groupSeparator = _ref2.groupSeparator;\n\n  var _kind$split = kind.split(rootSeparator, 2),\n      _kind$split2 = _slicedToArray(_kind$split, 2),\n      root = _kind$split2[0],\n      remainder = _kind$split2[1];\n\n  var groups = (remainder || kind).split(groupSeparator).filter(function (i) {\n    return !!i;\n  }); // when there's no remainder, it means the root wasn't found/split\n\n  return {\n    root: remainder ? root : null,\n    groups: groups\n  };\n};\n\nexports.parseKind = parseKind;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.memoizerific = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\nmodule.exports = function(forceSimilar) {\n\tif (typeof Map !== 'function' || forceSimilar) {\n\t\tvar Similar = _dereq_('./similar');\n\t\treturn new Similar();\n\t}\n\telse {\n\t\treturn new Map();\n\t}\n}\n\n},{\"./similar\":2}],2:[function(_dereq_,module,exports){\nfunction Similar() {\n\tthis.list = [];\n\tthis.lastItem = undefined;\n\tthis.size = 0;\n\n\treturn this;\n}\n\nSimilar.prototype.get = function(key) {\n\tvar index;\n\n\tif (this.lastItem && this.isEqual(this.lastItem.key, key)) {\n\t\treturn this.lastItem.val;\n\t}\n\n\tindex = this.indexOf(key);\n\tif (index >= 0) {\n\t\tthis.lastItem = this.list[index];\n\t\treturn this.list[index].val;\n\t}\n\n\treturn undefined;\n};\n\nSimilar.prototype.set = function(key, val) {\n\tvar index;\n\n\tif (this.lastItem && this.isEqual(this.lastItem.key, key)) {\n\t\tthis.lastItem.val = val;\n\t\treturn this;\n\t}\n\n\tindex = this.indexOf(key);\n\tif (index >= 0) {\n\t\tthis.lastItem = this.list[index];\n\t\tthis.list[index].val = val;\n\t\treturn this;\n\t}\n\n\tthis.lastItem = { key: key, val: val };\n\tthis.list.push(this.lastItem);\n\tthis.size++;\n\n\treturn this;\n};\n\nSimilar.prototype.delete = function(key) {\n\tvar index;\n\n\tif (this.lastItem && this.isEqual(this.lastItem.key, key)) {\n\t\tthis.lastItem = undefined;\n\t}\n\n\tindex = this.indexOf(key);\n\tif (index >= 0) {\n\t\tthis.size--;\n\t\treturn this.list.splice(index, 1)[0];\n\t}\n\n\treturn undefined;\n};\n\n\n// important that has() doesn't use get() in case an existing key has a falsy value, in which case has() would return false\nSimilar.prototype.has = function(key) {\n\tvar index;\n\n\tif (this.lastItem && this.isEqual(this.lastItem.key, key)) {\n\t\treturn true;\n\t}\n\n\tindex = this.indexOf(key);\n\tif (index >= 0) {\n\t\tthis.lastItem = this.list[index];\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\nSimilar.prototype.forEach = function(callback, thisArg) {\n\tvar i;\n\tfor (i = 0; i < this.size; i++) {\n\t\tcallback.call(thisArg || this, this.list[i].val, this.list[i].key, this);\n\t}\n};\n\nSimilar.prototype.indexOf = function(key) {\n\tvar i;\n\tfor (i = 0; i < this.size; i++) {\n\t\tif (this.isEqual(this.list[i].key, key)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n// check if the numbers are equal, or whether they are both precisely NaN (isNaN returns true for all non-numbers)\nSimilar.prototype.isEqual = function(val1, val2) {\n\treturn val1 === val2 || (val1 !== val1 && val2 !== val2);\n};\n\nmodule.exports = Similar;\n},{}],3:[function(_dereq_,module,exports){\nvar MapOrSimilar = _dereq_('map-or-similar');\n\nmodule.exports = function (limit) {\n\tvar cache = new MapOrSimilar(undefined === 'true'),\n\t\tlru = [];\n\n\treturn function (fn) {\n\t\tvar memoizerific = function () {\n\t\t\tvar currentCache = cache,\n\t\t\t\tnewMap,\n\t\t\t\tfnResult,\n\t\t\t\targsLengthMinusOne = arguments.length - 1,\n\t\t\t\tlruPath = Array(argsLengthMinusOne + 1),\n\t\t\t\tisMemoized = true,\n\t\t\t\ti;\n\n\t\t\tif ((memoizerific.numArgs || memoizerific.numArgs === 0) && memoizerific.numArgs !== argsLengthMinusOne + 1) {\n\t\t\t\tthrow new Error('Memoizerific functions should always be called with the same number of arguments');\n\t\t\t}\n\n\t\t\t// loop through each argument to traverse the map tree\n\t\t\tfor (i = 0; i < argsLengthMinusOne; i++) {\n\t\t\t\tlruPath[i] = {\n\t\t\t\t\tcacheItem: currentCache,\n\t\t\t\t\targ: arguments[i]\n\t\t\t\t};\n\n\t\t\t\t// climb through the hierarchical map tree until the second-last argument has been found, or an argument is missing.\n\t\t\t\t// if all arguments up to the second-last have been found, this will potentially be a cache hit (determined later)\n\t\t\t\tif (currentCache.has(arguments[i])) {\n\t\t\t\t\tcurrentCache = currentCache.get(arguments[i]);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tisMemoized = false;\n\n\t\t\t\t// make maps until last value\n\t\t\t\tnewMap = new MapOrSimilar(undefined === 'true');\n\t\t\t\tcurrentCache.set(arguments[i], newMap);\n\t\t\t\tcurrentCache = newMap;\n\t\t\t}\n\n\t\t\t// we are at the last arg, check if it is really memoized\n\t\t\tif (isMemoized) {\n\t\t\t\tif (currentCache.has(arguments[argsLengthMinusOne])) {\n\t\t\t\t\tfnResult = currentCache.get(arguments[argsLengthMinusOne]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tisMemoized = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!isMemoized) {\n\t\t\t\tfnResult = fn.apply(null, arguments);\n\t\t\t\tcurrentCache.set(arguments[argsLengthMinusOne], fnResult);\n\t\t\t}\n\n\t\t\tif (limit > 0) {\n\t\t\t\tlruPath[argsLengthMinusOne] = {\n\t\t\t\t\tcacheItem: currentCache,\n\t\t\t\t\targ: arguments[argsLengthMinusOne]\n\t\t\t\t};\n\n\t\t\t\tif (isMemoized) {\n\t\t\t\t\tmoveToMostRecentLru(lru, lruPath);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlru.push(lruPath);\n\t\t\t\t}\n\n\t\t\t\tif (lru.length > limit) {\n\t\t\t\t\tremoveCachedResult(lru.shift());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tmemoizerific.wasMemoized = isMemoized;\n\t\t\tmemoizerific.numArgs = argsLengthMinusOne + 1;\n\n\t\t\treturn fnResult;\n\t\t};\n\n\t\tmemoizerific.limit = limit;\n\t\tmemoizerific.wasMemoized = false;\n\t\tmemoizerific.cache = cache;\n\t\tmemoizerific.lru = lru;\n\n\t\treturn memoizerific;\n\t};\n};\n\n// move current args to most recent position\nfunction moveToMostRecentLru(lru, lruPath) {\n\tvar lruLen = lru.length,\n\t\tlruPathLen = lruPath.length,\n\t\tisMatch,\n\t\ti, ii;\n\n\tfor (i = 0; i < lruLen; i++) {\n\t\tisMatch = true;\n\t\tfor (ii = 0; ii < lruPathLen; ii++) {\n\t\t\tif (!isEqual(lru[i][ii].arg, lruPath[ii].arg)) {\n\t\t\t\tisMatch = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (isMatch) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tlru.push(lru.splice(i, 1)[0]);\n}\n\n// remove least recently used cache item and all dead branches\nfunction removeCachedResult(removedLru) {\n\tvar removedLruLen = removedLru.length,\n\t\tcurrentLru = removedLru[removedLruLen - 1],\n\t\ttmp,\n\t\ti;\n\n\tcurrentLru.cacheItem.delete(currentLru.arg);\n\n\t// walk down the tree removing dead branches (size 0) along the way\n\tfor (i = removedLruLen - 2; i >= 0; i--) {\n\t\tcurrentLru = removedLru[i];\n\t\ttmp = currentLru.cacheItem.get(currentLru.arg);\n\n\t\tif (!tmp || !tmp.size) {\n\t\t\tcurrentLru.cacheItem.delete(currentLru.arg);\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\n// check if the numbers are equal, or whether they are both precisely NaN (isNaN returns true for all non-numbers)\nfunction isEqual(val1, val2) {\n\treturn val1 === val2 || (val1 !== val1 && val2 !== val2);\n}\n},{\"map-or-similar\":1}]},{},[3])(3)\n});","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","var baseAssignValue = require('./_baseAssignValue'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * Creates an object with the same keys as `object` and values generated\n * by running each own enumerable string keyed property of `object` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapKeys\n * @example\n *\n * var users = {\n *   'fred':    { 'user': 'fred',    'age': 40 },\n *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n * };\n *\n * _.mapValues(users, function(o) { return o.age; });\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n *\n * // The `_.property` iteratee shorthand.\n * _.mapValues(users, 'age');\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n */\nfunction mapValues(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n\n  baseForOwn(object, function(value, key, object) {\n    baseAssignValue(result, key, iteratee(value, key, object));\n  });\n  return result;\n}\n\nmodule.exports = mapValues;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","/* jshint node: true */\r\n\"use strict\";\r\n\r\nfunction makeArrayFrom(obj) {\r\n  return Array.prototype.slice.apply(obj);\r\n}\r\n\r\nvar\r\n  PENDING = \"pending\",\r\n  RESOLVED = \"resolved\",\r\n  REJECTED = \"rejected\";\r\n\r\nfunction SynchronousPromise(handler) {\r\n  this.status = PENDING;\r\n  this._continuations = [];\r\n  this._parent = null;\r\n  this._paused = false;\r\n  if (handler) {\r\n    handler.call(\r\n      this,\r\n      this._continueWith.bind(this),\r\n      this._failWith.bind(this)\r\n    );\r\n  }\r\n}\r\n\r\nfunction looksLikeAPromise(obj) {\r\n  return obj && typeof (obj.then) === \"function\";\r\n}\r\n\r\nfunction passThrough(value) {\r\n  return value;\r\n}\r\n\r\nSynchronousPromise.prototype = {\r\n  then: function (nextFn, catchFn) {\r\n    var next = SynchronousPromise.unresolved()._setParent(this);\r\n    if (this._isRejected()) {\r\n      if (this._paused) {\r\n        this._continuations.push({\r\n          promise: next,\r\n          nextFn: nextFn,\r\n          catchFn: catchFn\r\n        });\r\n        return next;\r\n      }\r\n      if (catchFn) {\r\n        try {\r\n          var catchResult = catchFn(this._error);\r\n          if (looksLikeAPromise(catchResult)) {\r\n            this._chainPromiseData(catchResult, next);\r\n            return next;\r\n          } else {\r\n            return SynchronousPromise.resolve(catchResult)._setParent(this);\r\n          }\r\n        } catch (e) {\r\n          return SynchronousPromise.reject(e)._setParent(this);\r\n        }\r\n      }\r\n      return SynchronousPromise.reject(this._error)._setParent(this);\r\n    }\r\n    this._continuations.push({\r\n      promise: next,\r\n      nextFn: nextFn,\r\n      catchFn: catchFn\r\n    });\r\n    this._runResolutions();\r\n    return next;\r\n  },\r\n  catch: function (handler) {\r\n    if (this._isResolved()) {\r\n      return SynchronousPromise.resolve(this._data)._setParent(this);\r\n    }\r\n    var next = SynchronousPromise.unresolved()._setParent(this);\r\n    this._continuations.push({\r\n      promise: next,\r\n      catchFn: handler\r\n    });\r\n    this._runRejections();\r\n    return next;\r\n  },\r\n  finally: function (callback) {\r\n    var ran = false;\r\n\r\n    function runFinally(result, err) {\r\n      if (!ran) {\r\n        ran = true;\r\n        if (!callback) {\r\n          callback = passThrough;\r\n        }\r\n        var callbackResult = callback(result);\r\n        if (looksLikeAPromise(callbackResult)) {\r\n          return callbackResult.then(function () {\r\n            if (err) {\r\n              throw err;\r\n            }\r\n            return result;\r\n          });\r\n        } else {\r\n          return result;\r\n        }\r\n      }\r\n    }\r\n\r\n    return this\r\n      .then(function (result) {\r\n        return runFinally(result);\r\n      })\r\n      .catch(function (err) {\r\n        return runFinally(null, err);\r\n      });\r\n  },\r\n  pause: function () {\r\n    this._paused = true;\r\n    return this;\r\n  },\r\n  resume: function () {\r\n    var firstPaused = this._findFirstPaused();\r\n    if (firstPaused) {\r\n      firstPaused._paused = false;\r\n      firstPaused._runResolutions();\r\n      firstPaused._runRejections();\r\n    }\r\n    return this;\r\n  },\r\n  _findAncestry: function () {\r\n    return this._continuations.reduce(function (acc, cur) {\r\n      if (cur.promise) {\r\n        var node = {\r\n          promise: cur.promise,\r\n          children: cur.promise._findAncestry()\r\n        };\r\n        acc.push(node);\r\n      }\r\n      return acc;\r\n    }, []);\r\n  },\r\n  _setParent: function (parent) {\r\n    if (this._parent) {\r\n      throw new Error(\"parent already set\");\r\n    }\r\n    this._parent = parent;\r\n    return this;\r\n  },\r\n  _continueWith: function (data) {\r\n    var firstPending = this._findFirstPending();\r\n    if (firstPending) {\r\n      firstPending._data = data;\r\n      firstPending._setResolved();\r\n    }\r\n  },\r\n  _findFirstPending: function () {\r\n    return this._findFirstAncestor(function (test) {\r\n      return test._isPending && test._isPending();\r\n    });\r\n  },\r\n  _findFirstPaused: function () {\r\n    return this._findFirstAncestor(function (test) {\r\n      return test._paused;\r\n    });\r\n  },\r\n  _findFirstAncestor: function (matching) {\r\n    var test = this;\r\n    var result;\r\n    while (test) {\r\n      if (matching(test)) {\r\n        result = test;\r\n      }\r\n      test = test._parent;\r\n    }\r\n    return result;\r\n  },\r\n  _failWith: function (error) {\r\n    var firstRejected = this._findFirstPending();\r\n    if (firstRejected) {\r\n      firstRejected._error = error;\r\n      firstRejected._setRejected();\r\n    }\r\n  },\r\n  _takeContinuations: function () {\r\n    return this._continuations.splice(0, this._continuations.length);\r\n  },\r\n  _runRejections: function () {\r\n    if (this._paused || !this._isRejected()) {\r\n      return;\r\n    }\r\n    var\r\n      error = this._error,\r\n      continuations = this._takeContinuations(),\r\n      self = this;\r\n    continuations.forEach(function (cont) {\r\n      if (cont.catchFn) {\r\n        try {\r\n          var catchResult = cont.catchFn(error);\r\n          self._handleUserFunctionResult(catchResult, cont.promise);\r\n        } catch (e) {\r\n          cont.promise.reject(e);\r\n        }\r\n      } else {\r\n        cont.promise.reject(error);\r\n      }\r\n    });\r\n  },\r\n  _runResolutions: function () {\r\n    if (this._paused || !this._isResolved() || this._isPending()) {\r\n      return;\r\n    }\r\n    var continuations = this._takeContinuations();\r\n    if (looksLikeAPromise(this._data)) {\r\n      return this._handleWhenResolvedDataIsPromise(this._data);\r\n    }\r\n    var data = this._data;\r\n    var self = this;\r\n    continuations.forEach(function (cont) {\r\n      if (cont.nextFn) {\r\n        try {\r\n          var result = cont.nextFn(data);\r\n          self._handleUserFunctionResult(result, cont.promise);\r\n        } catch (e) {\r\n          self._handleResolutionError(e, cont);\r\n        }\r\n      } else if (cont.promise) {\r\n        cont.promise.resolve(data);\r\n      }\r\n    });\r\n  },\r\n  _handleResolutionError: function (e, continuation) {\r\n    this._setRejected();\r\n    if (continuation.catchFn) {\r\n      try {\r\n        continuation.catchFn(e);\r\n        return;\r\n      } catch (e2) {\r\n        e = e2;\r\n      }\r\n    }\r\n    if (continuation.promise) {\r\n      continuation.promise.reject(e);\r\n    }\r\n  },\r\n  _handleWhenResolvedDataIsPromise: function (data) {\r\n    var self = this;\r\n    return data.then(function (result) {\r\n      self._data = result;\r\n      self._runResolutions();\r\n    }).catch(function (error) {\r\n      self._error = error;\r\n      self._setRejected();\r\n      self._runRejections();\r\n    });\r\n  },\r\n  _handleUserFunctionResult: function (data, nextSynchronousPromise) {\r\n    if (looksLikeAPromise(data)) {\r\n      this._chainPromiseData(data, nextSynchronousPromise);\r\n    } else {\r\n      nextSynchronousPromise.resolve(data);\r\n    }\r\n  },\r\n  _chainPromiseData: function (promiseData, nextSynchronousPromise) {\r\n    promiseData.then(function (newData) {\r\n      nextSynchronousPromise.resolve(newData);\r\n    }).catch(function (newError) {\r\n      nextSynchronousPromise.reject(newError);\r\n    });\r\n  },\r\n  _setResolved: function () {\r\n    this.status = RESOLVED;\r\n    if (!this._paused) {\r\n      this._runResolutions();\r\n    }\r\n  },\r\n  _setRejected: function () {\r\n    this.status = REJECTED;\r\n    if (!this._paused) {\r\n      this._runRejections();\r\n    }\r\n  },\r\n  _isPending: function () {\r\n    return this.status === PENDING;\r\n  },\r\n  _isResolved: function () {\r\n    return this.status === RESOLVED;\r\n  },\r\n  _isRejected: function () {\r\n    return this.status === REJECTED;\r\n  }\r\n};\r\n\r\nSynchronousPromise.resolve = function (result) {\r\n  return new SynchronousPromise(function (resolve, reject) {\r\n    if (looksLikeAPromise(result)) {\r\n      result.then(function (newResult) {\r\n        resolve(newResult);\r\n      }).catch(function (error) {\r\n        reject(error);\r\n      });\r\n    } else {\r\n      resolve(result);\r\n    }\r\n  });\r\n};\r\n\r\nSynchronousPromise.reject = function (result) {\r\n  return new SynchronousPromise(function (resolve, reject) {\r\n    reject(result);\r\n  });\r\n};\r\n\r\nSynchronousPromise.unresolved = function () {\r\n  return new SynchronousPromise(function (resolve, reject) {\r\n    this.resolve = resolve;\r\n    this.reject = reject;\r\n  });\r\n};\r\n\r\nSynchronousPromise.all = function () {\r\n  var args = makeArrayFrom(arguments);\r\n  if (Array.isArray(args[0])) {\r\n    args = args[0];\r\n  }\r\n  if (!args.length) {\r\n    return SynchronousPromise.resolve([]);\r\n  }\r\n  return new SynchronousPromise(function (resolve, reject) {\r\n    var\r\n      allData = [],\r\n      numResolved = 0,\r\n      doResolve = function () {\r\n        if (numResolved === args.length) {\r\n          resolve(allData);\r\n        }\r\n      },\r\n      rejected = false,\r\n      doReject = function (err) {\r\n        if (rejected) {\r\n          return;\r\n        }\r\n        rejected = true;\r\n        reject(err);\r\n      };\r\n    args.forEach(function (arg, idx) {\r\n      SynchronousPromise.resolve(arg).then(function (thisResult) {\r\n        allData[idx] = thisResult;\r\n        numResolved += 1;\r\n        doResolve();\r\n      }).catch(function (err) {\r\n        doReject(err);\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\nfunction createAggregateErrorFrom(errors) {\r\n  /* jshint ignore:start */\r\n  if (typeof window !== \"undefined\" && \"AggregateError\" in window) {\r\n    return new window.AggregateError(errors);\r\n  }\r\n  /* jshint ignore:end */\r\n\r\n  return { errors: errors };\r\n}\r\n\r\nSynchronousPromise.any = function () {\r\n  var args = makeArrayFrom(arguments);\r\n  if (Array.isArray(args[0])) {\r\n    args = args[0];\r\n  }\r\n  if (!args.length) {\r\n    return SynchronousPromise.reject(createAggregateErrorFrom([]));\r\n  }\r\n  return new SynchronousPromise(function (resolve, reject) {\r\n    var\r\n      allErrors = [],\r\n      numRejected = 0,\r\n      doReject = function () {\r\n        if (numRejected === args.length) {\r\n          reject(createAggregateErrorFrom(allErrors));\r\n        }\r\n      },\r\n      resolved = false,\r\n      doResolve = function (result) {\r\n        if (resolved) {\r\n          return;\r\n        }\r\n        resolved = true;\r\n        resolve(result);\r\n      };\r\n    args.forEach(function (arg, idx) {\r\n      SynchronousPromise.resolve(arg).then(function (thisResult) {\r\n        doResolve(thisResult);\r\n      }).catch(function (err) {\r\n        allErrors[idx] = err;\r\n        numRejected += 1;\r\n        doReject();\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\nSynchronousPromise.allSettled = function () {\r\n  var args = makeArrayFrom(arguments);\r\n  if (Array.isArray(args[0])) {\r\n    args = args[0];\r\n  }\r\n  if (!args.length) {\r\n    return SynchronousPromise.resolve([]);\r\n  }\r\n  return new SynchronousPromise(function (resolve) {\r\n    var\r\n      allData = [],\r\n      numSettled = 0,\r\n      doSettled = function () {\r\n        numSettled += 1;\r\n        if (numSettled === args.length) {\r\n          resolve(allData);\r\n        }\r\n      };\r\n    args.forEach(function (arg, idx) {\r\n      SynchronousPromise.resolve(arg).then(function (thisResult) {\r\n        allData[idx] = {\r\n          status: \"fulfilled\",\r\n          value: thisResult\r\n        };\r\n        doSettled();\r\n      }).catch(function (err) {\r\n        allData[idx] = {\r\n          status: \"rejected\",\r\n          reason: err\r\n        };\r\n        doSettled();\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\n/* jshint ignore:start */\r\nif (Promise === SynchronousPromise) {\r\n  throw new Error(\"Please use SynchronousPromise.installGlobally() to install globally\");\r\n}\r\nvar RealPromise = Promise;\r\nSynchronousPromise.installGlobally = function (__awaiter) {\r\n  if (Promise === SynchronousPromise) {\r\n    return __awaiter;\r\n  }\r\n  var result = patchAwaiterIfRequired(__awaiter);\r\n  Promise = SynchronousPromise;\r\n  return result;\r\n};\r\n\r\nSynchronousPromise.uninstallGlobally = function () {\r\n  if (Promise === SynchronousPromise) {\r\n    Promise = RealPromise;\r\n  }\r\n};\r\n\r\nfunction patchAwaiterIfRequired(__awaiter) {\r\n  if (typeof (__awaiter) === \"undefined\" || __awaiter.__patched) {\r\n    return __awaiter;\r\n  }\r\n  var originalAwaiter = __awaiter;\r\n  __awaiter = function () {\r\n    var Promise = RealPromise;\r\n    originalAwaiter.apply(this, makeArrayFrom(arguments));\r\n  };\r\n  __awaiter.__patched = true;\r\n  return __awaiter;\r\n}\r\n\r\n/* jshint ignore:end */\r\n\r\nmodule.exports = {\r\n  SynchronousPromise: SynchronousPromise\r\n};\r\n","var _templateObject;\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.object.freeze.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport dedent from 'ts-dedent';\nexport var StoryIndexStore = /*#__PURE__*/function () {\n  function StoryIndexStore() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n      v: 3,\n      stories: {}\n    },\n        stories = _ref.stories;\n\n    _classCallCheck(this, StoryIndexStore);\n\n    this.channel = void 0;\n    this.stories = void 0;\n    this.stories = stories;\n  }\n\n  _createClass(StoryIndexStore, [{\n    key: \"storyIdFromSpecifier\",\n    value: function storyIdFromSpecifier(specifier) {\n      var storyIds = Object.keys(this.stories);\n\n      if (specifier === '*') {\n        // '*' means select the first story. If there is none, we have no selection.\n        return storyIds[0];\n      }\n\n      if (typeof specifier === 'string') {\n        // Find the story with the exact id that matches the specifier (see #11571)\n        if (storyIds.indexOf(specifier) >= 0) {\n          return specifier;\n        } // Fallback to the first story that starts with the specifier\n\n\n        return storyIds.find(function (storyId) {\n          return storyId.startsWith(specifier);\n        });\n      } // Try and find a story matching the name/kind, setting no selection if they don't exist.\n\n\n      var name = specifier.name,\n          title = specifier.title;\n      var match = Object.entries(this.stories).find(function (_ref2) {\n        var _ref3 = _slicedToArray(_ref2, 2),\n            id = _ref3[0],\n            story = _ref3[1];\n\n        return story.name === name && story.title === title;\n      });\n      return match && match[0];\n    }\n  }, {\n    key: \"storyIdToEntry\",\n    value: function storyIdToEntry(storyId) {\n      var storyEntry = this.stories[storyId];\n\n      if (!storyEntry) {\n        throw new Error(dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"Couldn't find story matching '\", \"' after HMR.\\n      - Did you remove it from your CSF file?\\n      - Are you sure a story with that id exists?\\n      - Please check your stories field of your main.js config.\\n      - Also check the browser console and terminal for error messages.\"])), storyId));\n      }\n\n      return storyEntry;\n    }\n  }]);\n\n  return StoryIndexStore;\n}();","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","var baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n","import \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.object.freeze.js\";\n\nvar _templateObject, _templateObject2;\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.fill.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport deepEqual from 'fast-deep-equal';\nimport { once } from '@storybook/client-logger';\nimport isPlainObject from 'lodash/isPlainObject';\nimport dedent from 'ts-dedent';\nvar INCOMPATIBLE = Symbol('incompatible');\n\nvar map = function map(arg, argType) {\n  var type = argType.type;\n  if (arg === undefined || arg === null || !type) return arg;\n\n  if (argType.mapping) {\n    return arg;\n  }\n\n  switch (type.name) {\n    case 'string':\n      return String(arg);\n\n    case 'enum':\n      return arg;\n\n    case 'number':\n      return Number(arg);\n\n    case 'boolean':\n      return arg === 'true';\n\n    case 'array':\n      if (!type.value || !Array.isArray(arg)) return INCOMPATIBLE;\n      return arg.reduce(function (acc, item, index) {\n        var mapped = map(item, {\n          type: type.value\n        });\n        if (mapped !== INCOMPATIBLE) acc[index] = mapped;\n        return acc;\n      }, new Array(arg.length));\n\n    case 'object':\n      if (typeof arg === 'string' || typeof arg === 'number') return arg;\n      if (!type.value || _typeof(arg) !== 'object') return INCOMPATIBLE;\n      return Object.entries(arg).reduce(function (acc, _ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            key = _ref2[0],\n            val = _ref2[1];\n\n        var mapped = map(val, {\n          type: type.value[key]\n        });\n        return mapped === INCOMPATIBLE ? acc : Object.assign(acc, _defineProperty({}, key, mapped));\n      }, {});\n\n    default:\n      return INCOMPATIBLE;\n  }\n};\n\nexport var mapArgsToTypes = function mapArgsToTypes(args, argTypes) {\n  return Object.entries(args).reduce(function (acc, _ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        key = _ref4[0],\n        value = _ref4[1];\n\n    if (!argTypes[key]) return acc;\n    var mapped = map(value, argTypes[key]);\n    return mapped === INCOMPATIBLE ? acc : Object.assign(acc, _defineProperty({}, key, mapped));\n  }, {});\n};\nexport var combineArgs = function combineArgs(value, update) {\n  if (Array.isArray(value) && Array.isArray(update)) {\n    return update.reduce(function (acc, upd, index) {\n      acc[index] = combineArgs(value[index], update[index]);\n      return acc;\n    }, _toConsumableArray(value)).filter(function (v) {\n      return v !== undefined;\n    });\n  }\n\n  if (!isPlainObject(value) || !isPlainObject(update)) return update;\n  return Object.keys(Object.assign({}, value, update)).reduce(function (acc, key) {\n    if (key in update) {\n      var combined = combineArgs(value[key], update[key]);\n      if (combined !== undefined) acc[key] = combined;\n    } else {\n      acc[key] = value[key];\n    }\n\n    return acc;\n  }, {});\n};\nexport var validateOptions = function validateOptions(args, argTypes) {\n  return Object.entries(argTypes).reduce(function (acc, _ref5) {\n    var _ref6 = _slicedToArray(_ref5, 2),\n        key = _ref6[0],\n        options = _ref6[1].options;\n\n    // Don't set args that are not defined in `args` (they can be undefined in there)\n    // see https://github.com/storybookjs/storybook/issues/15630 and\n    //   https://github.com/storybookjs/storybook/issues/17063\n    function allowArg() {\n      if (key in args) {\n        acc[key] = args[key];\n      }\n\n      return acc;\n    }\n\n    if (!options) return allowArg();\n\n    if (!Array.isArray(options)) {\n      once.error(dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        Invalid argType: '\", \".options' should be an array.\\n\\n        More info: https://storybook.js.org/docs/react/api/argtypes\\n      \"])), key));\n      return allowArg();\n    }\n\n    if (options.some(function (opt) {\n      return opt && ['object', 'function'].includes(_typeof(opt));\n    })) {\n      once.error(dedent(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n        Invalid argType: '\", \".options' should only contain primitives. Use a 'mapping' for complex values.\\n\\n        More info: https://storybook.js.org/docs/react/writing-stories/args#mapping-to-complex-arg-values\\n      \"])), key));\n      return allowArg();\n    }\n\n    var isArray = Array.isArray(args[key]);\n    var invalidIndex = isArray && args[key].findIndex(function (val) {\n      return !options.includes(val);\n    });\n    var isValidArray = isArray && invalidIndex === -1;\n\n    if (args[key] === undefined || options.includes(args[key]) || isValidArray) {\n      return allowArg();\n    }\n\n    var field = isArray ? \"\".concat(key, \"[\").concat(invalidIndex, \"]\") : key;\n    var supportedOptions = options.map(function (opt) {\n      return typeof opt === 'string' ? \"'\".concat(opt, \"'\") : String(opt);\n    }).join(', ');\n    once.warn(\"Received illegal value for '\".concat(field, \"'. Supported options: \").concat(supportedOptions));\n    return acc;\n  }, {});\n}; // TODO -- copied from router, needs to be in a shared location\n\nexport var DEEPLY_EQUAL = Symbol('Deeply equal');\nexport var deepDiff = function deepDiff(value, update) {\n  if (_typeof(value) !== _typeof(update)) return update;\n  if (deepEqual(value, update)) return DEEPLY_EQUAL;\n\n  if (Array.isArray(value) && Array.isArray(update)) {\n    var res = update.reduce(function (acc, upd, index) {\n      var diff = deepDiff(value[index], upd);\n      if (diff !== DEEPLY_EQUAL) acc[index] = diff;\n      return acc;\n    }, new Array(update.length));\n    if (update.length >= value.length) return res;\n    return res.concat(new Array(value.length - update.length).fill(undefined));\n  }\n\n  if (isPlainObject(value) && isPlainObject(update)) {\n    return Object.keys(Object.assign({}, value, update)).reduce(function (acc, key) {\n      var diff = deepDiff(value === null || value === void 0 ? void 0 : value[key], update === null || update === void 0 ? void 0 : update[key]);\n      return diff === DEEPLY_EQUAL ? acc : Object.assign(acc, _defineProperty({}, key, diff));\n    }, {});\n  }\n\n  return update;\n};\nexport var NO_TARGET_NAME = '';\nexport function groupArgsByTarget(_ref7) {\n  var args = _ref7.args,\n      argTypes = _ref7.argTypes;\n  var groupedArgs = {};\n  Object.entries(args).forEach(function (_ref8) {\n    var _ref9 = _slicedToArray(_ref8, 2),\n        name = _ref9[0],\n        value = _ref9[1];\n\n    var _ref10 = argTypes[name] || {},\n        _ref10$target = _ref10.target,\n        target = _ref10$target === void 0 ? NO_TARGET_NAME : _ref10$target;\n\n    groupedArgs[target] = groupedArgs[target] || {};\n    groupedArgs[target][name] = value;\n  });\n  return groupedArgs;\n}\nexport function noTargetArgs(context) {\n  return groupArgsByTarget(context)[NO_TARGET_NAME];\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport { combineArgs, mapArgsToTypes, validateOptions, deepDiff, DEEPLY_EQUAL } from './args';\n\nfunction deleteUndefined(obj) {\n  // eslint-disable-next-line no-param-reassign\n  Object.keys(obj).forEach(function (key) {\n    return obj[key] === undefined && delete obj[key];\n  });\n  return obj;\n}\n\nexport var ArgsStore = /*#__PURE__*/function () {\n  function ArgsStore() {\n    _classCallCheck(this, ArgsStore);\n\n    this.initialArgsByStoryId = {};\n    this.argsByStoryId = {};\n  }\n\n  _createClass(ArgsStore, [{\n    key: \"get\",\n    value: function get(storyId) {\n      if (!(storyId in this.argsByStoryId)) {\n        throw new Error(\"No args known for \".concat(storyId, \" -- has it been rendered yet?\"));\n      }\n\n      return this.argsByStoryId[storyId];\n    }\n  }, {\n    key: \"setInitial\",\n    value: function setInitial(story) {\n      if (!this.initialArgsByStoryId[story.id]) {\n        this.initialArgsByStoryId[story.id] = story.initialArgs;\n        this.argsByStoryId[story.id] = story.initialArgs;\n      } else if (this.initialArgsByStoryId[story.id] !== story.initialArgs) {\n        // When we get a new version of a story (with new initialArgs), we re-apply the same diff\n        // that we had previously applied to the old version of the story\n        var delta = deepDiff(this.initialArgsByStoryId[story.id], this.argsByStoryId[story.id]);\n        this.initialArgsByStoryId[story.id] = story.initialArgs;\n        this.argsByStoryId[story.id] = story.initialArgs;\n\n        if (delta !== DEEPLY_EQUAL) {\n          this.updateFromDelta(story, delta);\n        }\n      }\n    }\n  }, {\n    key: \"updateFromDelta\",\n    value: function updateFromDelta(story, delta) {\n      // Use the argType to ensure we setting a type with defined options to something outside of that\n      var validatedDelta = validateOptions(delta, story.argTypes); // NOTE: we use `combineArgs` here rather than `combineParameters` because changes to arg\n      // array values are persisted in the URL as sparse arrays, and we have to take that into\n      // account when overriding the initialArgs (e.g. we patch [,'changed'] over ['initial', 'val'])\n\n      this.argsByStoryId[story.id] = combineArgs(this.argsByStoryId[story.id], validatedDelta);\n    }\n  }, {\n    key: \"updateFromPersisted\",\n    value: function updateFromPersisted(story, persisted) {\n      // Use the argType to ensure we aren't persisting the wrong type of value to the type.\n      // For instance you could try and set a string-valued arg to a number by changing the URL\n      var mappedPersisted = mapArgsToTypes(persisted, story.argTypes);\n      return this.updateFromDelta(story, mappedPersisted);\n    }\n  }, {\n    key: \"update\",\n    value: function update(storyId, argsUpdate) {\n      if (!(storyId in this.argsByStoryId)) {\n        throw new Error(\"No args known for \".concat(storyId, \" -- has it been rendered yet?\"));\n      }\n\n      this.argsByStoryId[storyId] = deleteUndefined(Object.assign({}, this.argsByStoryId[storyId], argsUpdate));\n    }\n  }]);\n\n  return ArgsStore;\n}();","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nexport var getValuesFromArgTypes = function getValuesFromArgTypes() {\n  var argTypes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return Object.entries(argTypes).reduce(function (acc, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        arg = _ref2[0],\n        defaultValue = _ref2[1].defaultValue;\n\n    if (typeof defaultValue !== 'undefined') {\n      acc[arg] = defaultValue;\n    }\n\n    return acc;\n  }, {});\n};","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.freeze.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\n\nvar _templateObject;\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport deprecate from 'util-deprecate';\nimport dedent from 'ts-dedent';\nimport { deepDiff, DEEPLY_EQUAL } from './args';\nimport { getValuesFromArgTypes } from './csf/getValuesFromArgTypes';\nvar setUndeclaredWarning = deprecate(function () {}, dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    Setting a global value that is undeclared (i.e. not in the user's initial set of globals\\n    or globalTypes) is deprecated and will have no effect in 7.0.\\n  \"]))));\nexport var GlobalsStore = /*#__PURE__*/function () {\n  function GlobalsStore() {\n    _classCallCheck(this, GlobalsStore);\n\n    this.allowedGlobalNames = void 0;\n    this.initialGlobals = void 0;\n    this.globals = {};\n  }\n\n  _createClass(GlobalsStore, [{\n    key: \"set\",\n    value: function set(_ref) {\n      var _ref$globals = _ref.globals,\n          globals = _ref$globals === void 0 ? {} : _ref$globals,\n          _ref$globalTypes = _ref.globalTypes,\n          globalTypes = _ref$globalTypes === void 0 ? {} : _ref$globalTypes;\n      var delta = this.initialGlobals && deepDiff(this.initialGlobals, this.globals);\n      this.allowedGlobalNames = new Set([].concat(_toConsumableArray(Object.keys(globals)), _toConsumableArray(Object.keys(globalTypes))));\n      var defaultGlobals = getValuesFromArgTypes(globalTypes);\n      this.initialGlobals = Object.assign({}, defaultGlobals, globals);\n      this.globals = this.initialGlobals;\n\n      if (delta && delta !== DEEPLY_EQUAL) {\n        this.updateFromPersisted(delta);\n      }\n    }\n  }, {\n    key: \"filterAllowedGlobals\",\n    value: function filterAllowedGlobals(globals) {\n      var _this = this;\n\n      return Object.entries(globals).reduce(function (acc, _ref2) {\n        var _ref3 = _slicedToArray(_ref2, 2),\n            key = _ref3[0],\n            value = _ref3[1];\n\n        if (_this.allowedGlobalNames.has(key)) acc[key] = value;\n        return acc;\n      }, {});\n    }\n  }, {\n    key: \"updateFromPersisted\",\n    value: function updateFromPersisted(persisted) {\n      var allowedUrlGlobals = this.filterAllowedGlobals(persisted); // Note that unlike args, we do not have the same type information for globals to allow us\n      // to type check them here, so we just set them naively\n\n      this.globals = Object.assign({}, this.globals, allowedUrlGlobals);\n    }\n  }, {\n    key: \"get\",\n    value: function get() {\n      return this.globals;\n    }\n  }, {\n    key: \"update\",\n    value: function update(newGlobals) {\n      var _this2 = this;\n\n      Object.keys(newGlobals).forEach(function (key) {\n        if (!_this2.allowedGlobalNames.has(key)) {\n          setUndeclaredWarning();\n        }\n      });\n      this.globals = Object.assign({}, this.globals, newGlobals);\n    }\n  }]);\n\n  return GlobalsStore;\n}();","import \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nvar _excluded = [\"type\", \"control\"];\nimport \"core-js/modules/es.object.assign.js\";\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport mapValues from 'lodash/mapValues';\n\nvar normalizeType = function normalizeType(type) {\n  return typeof type === 'string' ? {\n    name: type\n  } : type;\n};\n\nvar normalizeControl = function normalizeControl(control) {\n  return typeof control === 'string' ? {\n    type: control\n  } : control;\n};\n\nexport var normalizeInputType = function normalizeInputType(inputType, key) {\n  var type = inputType.type,\n      control = inputType.control,\n      rest = _objectWithoutProperties(inputType, _excluded);\n\n  var normalized = Object.assign({\n    name: key\n  }, rest);\n  if (type) normalized.type = normalizeType(type);\n\n  if (control) {\n    normalized.control = normalizeControl(control);\n  } else if (control === false) {\n    normalized.control = {\n      disable: true\n    };\n  }\n\n  return normalized;\n};\nexport var normalizeInputTypes = function normalizeInputTypes(inputTypes) {\n  return mapValues(inputTypes, normalizeInputType);\n};","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.freeze.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\n\nvar _templateObject;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.assign.js\";\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport { storyNameFromExport, toId } from '@storybook/csf';\nimport dedent from 'ts-dedent';\nimport { logger } from '@storybook/client-logger';\nimport deprecate from 'util-deprecate';\nimport { normalizeInputTypes } from './normalizeInputTypes';\nvar deprecatedStoryAnnotation = dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\nCSF .story annotations deprecated; annotate story functions directly:\\n- StoryFn.story.name => StoryFn.storyName\\n- StoryFn.story.(parameters|decorators) => StoryFn.(parameters|decorators)\\nSee https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#hoisted-csf-annotations for details and codemod.\\n\"])));\nvar deprecatedStoryAnnotationWarning = deprecate(function () {}, deprecatedStoryAnnotation);\nexport function normalizeStory(key, storyAnnotations, meta) {\n  var userStoryFn;\n  var storyObject;\n\n  if (typeof storyAnnotations === 'function') {\n    userStoryFn = storyAnnotations;\n    storyObject = storyAnnotations;\n  } else {\n    storyObject = storyAnnotations;\n  }\n\n  var _storyObject = storyObject,\n      story = _storyObject.story;\n\n  if (story) {\n    logger.debug('deprecated story', story);\n    deprecatedStoryAnnotationWarning();\n  }\n\n  var exportName = storyNameFromExport(key);\n  var name = typeof storyObject !== 'function' && storyObject.name || storyObject.storyName || (story === null || story === void 0 ? void 0 : story.name) || exportName;\n  var decorators = [].concat(_toConsumableArray(storyObject.decorators || []), _toConsumableArray((story === null || story === void 0 ? void 0 : story.decorators) || []));\n  var parameters = Object.assign({}, story === null || story === void 0 ? void 0 : story.parameters, storyObject.parameters);\n  var args = Object.assign({}, story === null || story === void 0 ? void 0 : story.args, storyObject.args);\n  var argTypes = Object.assign({}, story === null || story === void 0 ? void 0 : story.argTypes, storyObject.argTypes);\n  var loaders = [].concat(_toConsumableArray(storyObject.loaders || []), _toConsumableArray((story === null || story === void 0 ? void 0 : story.loaders) || []));\n  var _storyObject2 = storyObject,\n      render = _storyObject2.render,\n      play = _storyObject2.play; // eslint-disable-next-line no-underscore-dangle\n\n  var id = parameters.__id || toId(meta.id || meta.title, exportName);\n  return Object.assign({\n    id: id,\n    name: name,\n    decorators: decorators,\n    parameters: parameters,\n    args: args,\n    argTypes: normalizeInputTypes(argTypes),\n    loaders: loaders\n  }, render && {\n    render: render\n  }, userStoryFn && {\n    userStoryFn: userStoryFn\n  }, play && {\n    play: play\n  });\n}","import \"core-js/modules/es.object.assign.js\";\nimport { sanitize } from '@storybook/csf';\nimport { normalizeInputTypes } from './normalizeInputTypes';\nexport function normalizeComponentAnnotations(defaultExport) {\n  var title = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultExport.title;\n  var importPath = arguments.length > 2 ? arguments[2] : undefined;\n  var id = defaultExport.id,\n      argTypes = defaultExport.argTypes;\n  return Object.assign({\n    id: sanitize(id || title)\n  }, defaultExport, {\n    title: title\n  }, argTypes && {\n    argTypes: normalizeInputTypes(argTypes)\n  }, {\n    parameters: Object.assign({\n      fileName: importPath\n    }, defaultExport.parameters)\n  });\n}","import \"core-js/modules/es.symbol.js\";\nvar _excluded = [\"default\", \"__namedExportsOrder\"];\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.keys.js\";\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { isExportStory } from '@storybook/csf';\nimport { logger } from '@storybook/client-logger';\nimport { normalizeStory } from './normalizeStory';\nimport { normalizeComponentAnnotations } from './normalizeComponentAnnotations';\n\nvar checkGlobals = function checkGlobals(parameters) {\n  var globals = parameters.globals,\n      globalTypes = parameters.globalTypes;\n\n  if (globals || globalTypes) {\n    logger.error('Global args/argTypes can only be set globally', JSON.stringify({\n      globals: globals,\n      globalTypes: globalTypes\n    }));\n  }\n};\n\nvar checkStorySort = function checkStorySort(parameters) {\n  var options = parameters.options;\n  if (options !== null && options !== void 0 && options.storySort) logger.error('The storySort option parameter can only be set globally');\n};\n\nvar checkDisallowedParameters = function checkDisallowedParameters(parameters) {\n  if (!parameters) {\n    return;\n  }\n\n  checkGlobals(parameters);\n  checkStorySort(parameters);\n}; // Given the raw exports of a CSF file, check and normalize it.\n\n\nexport function processCSFFile(moduleExports, importPath, title) {\n  var defaultExport = moduleExports.default,\n      __namedExportsOrder = moduleExports.__namedExportsOrder,\n      namedExports = _objectWithoutProperties(moduleExports, _excluded);\n\n  var meta = normalizeComponentAnnotations(defaultExport, title, importPath);\n  checkDisallowedParameters(meta.parameters);\n  var csfFile = {\n    meta: meta,\n    stories: {}\n  };\n  Object.keys(namedExports).forEach(function (key) {\n    if (isExportStory(key, meta)) {\n      var storyMeta = normalizeStory(key, namedExports[key], meta);\n      checkDisallowedParameters(storyMeta.parameters);\n      csfFile.stories[storyMeta.id] = storyMeta;\n    }\n  });\n  return csfFile;\n}","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\n// Utilities for handling parameters\nimport isPlainObject from 'lodash/isPlainObject';\n/**\n * Safely combine parameters recursively. Only copy objects when needed.\n * Algorithm = always overwrite the existing value UNLESS both values\n * are plain objects. In this case flag the key as \"special\" and handle\n * it with a heuristic.\n */\n\nexport var combineParameters = function combineParameters() {\n  for (var _len = arguments.length, parameterSets = new Array(_len), _key = 0; _key < _len; _key++) {\n    parameterSets[_key] = arguments[_key];\n  }\n\n  var mergeKeys = {};\n  var combined = parameterSets.filter(Boolean).reduce(function (acc, p) {\n    Object.entries(p).forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          key = _ref2[0],\n          value = _ref2[1];\n\n      var existing = acc[key];\n\n      if (Array.isArray(value) || typeof existing === 'undefined') {\n        acc[key] = value;\n      } else if (isPlainObject(value) && isPlainObject(existing)) {\n        // do nothing, we'll handle this later\n        mergeKeys[key] = true;\n      } else if (typeof value !== 'undefined') {\n        acc[key] = value;\n      }\n    });\n    return acc;\n  }, {});\n  Object.keys(mergeKeys).forEach(function (key) {\n    var mergeValues = parameterSets.filter(Boolean).map(function (p) {\n      return p[key];\n    }).filter(function (value) {\n      return typeof value !== 'undefined';\n    });\n\n    if (mergeValues.every(function (value) {\n      return isPlainObject(value);\n    })) {\n      combined[key] = combineParameters.apply(void 0, _toConsumableArray(mergeValues));\n    } else {\n      combined[key] = mergeValues[mergeValues.length - 1];\n    }\n  });\n  return combined;\n};","var events; // Enables: `import Events from ...`\n\n(function (events) {\n  events[\"CHANNEL_CREATED\"] = \"channelCreated\";\n  events[\"CONFIG_ERROR\"] = \"configError\";\n  events[\"STORY_INDEX_INVALIDATED\"] = \"storyIndexInvalidated\";\n  events[\"STORY_SPECIFIED\"] = \"storySpecified\";\n  events[\"SET_STORIES\"] = \"setStories\";\n  events[\"SET_CURRENT_STORY\"] = \"setCurrentStory\";\n  events[\"CURRENT_STORY_WAS_SET\"] = \"currentStoryWasSet\";\n  events[\"FORCE_RE_RENDER\"] = \"forceReRender\";\n  events[\"FORCE_REMOUNT\"] = \"forceRemount\";\n  events[\"PRELOAD_STORIES\"] = \"preloadStories\";\n  events[\"STORY_PREPARED\"] = \"storyPrepared\";\n  events[\"STORY_CHANGED\"] = \"storyChanged\";\n  events[\"STORY_UNCHANGED\"] = \"storyUnchanged\";\n  events[\"STORY_RENDERED\"] = \"storyRendered\";\n  events[\"STORY_MISSING\"] = \"storyMissing\";\n  events[\"STORY_ERRORED\"] = \"storyErrored\";\n  events[\"STORY_THREW_EXCEPTION\"] = \"storyThrewException\";\n  events[\"STORY_RENDER_PHASE_CHANGED\"] = \"storyRenderPhaseChanged\";\n  events[\"UPDATE_STORY_ARGS\"] = \"updateStoryArgs\";\n  events[\"STORY_ARGS_UPDATED\"] = \"storyArgsUpdated\";\n  events[\"RESET_STORY_ARGS\"] = \"resetStoryArgs\";\n  events[\"SET_GLOBALS\"] = \"setGlobals\";\n  events[\"UPDATE_GLOBALS\"] = \"updateGlobals\";\n  events[\"GLOBALS_UPDATED\"] = \"globalsUpdated\";\n  events[\"REGISTER_SUBSCRIPTION\"] = \"registerSubscription\";\n  events[\"PREVIEW_KEYDOWN\"] = \"previewKeydown\";\n  events[\"SELECT_STORY\"] = \"selectStory\";\n  events[\"STORIES_COLLAPSE_ALL\"] = \"storiesCollapseAll\";\n  events[\"STORIES_EXPAND_ALL\"] = \"storiesExpandAll\";\n  events[\"DOCS_RENDERED\"] = \"docsRendered\";\n  events[\"SHARED_STATE_CHANGED\"] = \"sharedStateChanged\";\n  events[\"SHARED_STATE_SET\"] = \"sharedStateSet\";\n  events[\"NAVIGATE_URL\"] = \"navigateUrl\";\n  events[\"UPDATE_QUERY_PARAMS\"] = \"updateQueryParams\";\n})(events || (events = {}));\n\nexport default events; // Enables: `import * as Events from ...` or `import { CHANNEL_CREATED } as Events from ...`\n// This is the preferred method\n\nvar CHANNEL_CREATED = events.CHANNEL_CREATED,\n    CONFIG_ERROR = events.CONFIG_ERROR,\n    STORY_INDEX_INVALIDATED = events.STORY_INDEX_INVALIDATED,\n    STORY_SPECIFIED = events.STORY_SPECIFIED,\n    SET_STORIES = events.SET_STORIES,\n    SET_CURRENT_STORY = events.SET_CURRENT_STORY,\n    CURRENT_STORY_WAS_SET = events.CURRENT_STORY_WAS_SET,\n    FORCE_RE_RENDER = events.FORCE_RE_RENDER,\n    FORCE_REMOUNT = events.FORCE_REMOUNT,\n    STORY_PREPARED = events.STORY_PREPARED,\n    STORY_CHANGED = events.STORY_CHANGED,\n    STORY_UNCHANGED = events.STORY_UNCHANGED,\n    PRELOAD_STORIES = events.PRELOAD_STORIES,\n    STORY_RENDERED = events.STORY_RENDERED,\n    STORY_MISSING = events.STORY_MISSING,\n    STORY_ERRORED = events.STORY_ERRORED,\n    STORY_THREW_EXCEPTION = events.STORY_THREW_EXCEPTION,\n    STORY_RENDER_PHASE_CHANGED = events.STORY_RENDER_PHASE_CHANGED,\n    UPDATE_STORY_ARGS = events.UPDATE_STORY_ARGS,\n    STORY_ARGS_UPDATED = events.STORY_ARGS_UPDATED,\n    RESET_STORY_ARGS = events.RESET_STORY_ARGS,\n    SET_GLOBALS = events.SET_GLOBALS,\n    UPDATE_GLOBALS = events.UPDATE_GLOBALS,\n    GLOBALS_UPDATED = events.GLOBALS_UPDATED,\n    REGISTER_SUBSCRIPTION = events.REGISTER_SUBSCRIPTION,\n    PREVIEW_KEYDOWN = events.PREVIEW_KEYDOWN,\n    SELECT_STORY = events.SELECT_STORY,\n    STORIES_COLLAPSE_ALL = events.STORIES_COLLAPSE_ALL,\n    STORIES_EXPAND_ALL = events.STORIES_EXPAND_ALL,\n    DOCS_RENDERED = events.DOCS_RENDERED,\n    SHARED_STATE_CHANGED = events.SHARED_STATE_CHANGED,\n    SHARED_STATE_SET = events.SHARED_STATE_SET,\n    NAVIGATE_URL = events.NAVIGATE_URL,\n    UPDATE_QUERY_PARAMS = events.UPDATE_QUERY_PARAMS; // Used to break out of the current render without showing a redbox\n\nexport { CHANNEL_CREATED, CONFIG_ERROR, STORY_INDEX_INVALIDATED, STORY_SPECIFIED, SET_STORIES, SET_CURRENT_STORY, CURRENT_STORY_WAS_SET, FORCE_RE_RENDER, FORCE_REMOUNT, STORY_PREPARED, STORY_CHANGED, STORY_UNCHANGED, PRELOAD_STORIES, STORY_RENDERED, STORY_MISSING, STORY_ERRORED, STORY_THREW_EXCEPTION, STORY_RENDER_PHASE_CHANGED, UPDATE_STORY_ARGS, STORY_ARGS_UPDATED, RESET_STORY_ARGS, SET_GLOBALS, UPDATE_GLOBALS, GLOBALS_UPDATED, REGISTER_SUBSCRIPTION, PREVIEW_KEYDOWN, SELECT_STORY, STORIES_COLLAPSE_ALL, STORIES_EXPAND_ALL, DOCS_RENDERED, SHARED_STATE_CHANGED, SHARED_STATE_SET, NAVIGATE_URL, UPDATE_QUERY_PARAMS };\nexport var IGNORED_EXCEPTION = new Error('ignoredException');","import \"core-js/modules/es.object.freeze.js\";\n\nvar _templateObject;\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/web.immediate.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport deprecate from 'util-deprecate';\nimport dedent from 'ts-dedent';\n\nvar generateRandomId = function generateRandomId() {\n  // generates a random 13 character string\n  return Math.random().toString(16).slice(2);\n};\n\nexport var Channel = /*#__PURE__*/function () {\n  function Channel() {\n    var _this = this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        transport = _ref.transport,\n        _ref$async = _ref.async,\n        async = _ref$async === void 0 ? false : _ref$async;\n\n    _classCallCheck(this, Channel);\n\n    this.isAsync = void 0;\n    this.sender = generateRandomId();\n    this.events = {};\n    this.data = {};\n    this.transport = void 0;\n    this.addPeerListener = deprecate(function (eventName, listener) {\n      _this.addListener(eventName, listener);\n    }, dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      channel.addPeerListener is deprecated\\n    \"]))));\n    this.isAsync = async;\n\n    if (transport) {\n      this.transport = transport;\n      this.transport.setHandler(function (event) {\n        return _this.handleEvent(event);\n      });\n    }\n  }\n\n  _createClass(Channel, [{\n    key: \"hasTransport\",\n    get: function get() {\n      return !!this.transport;\n    }\n  }, {\n    key: \"addListener\",\n    value: function addListener(eventName, listener) {\n      this.events[eventName] = this.events[eventName] || [];\n      this.events[eventName].push(listener);\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(eventName) {\n      var _this2 = this;\n\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var event = {\n        type: eventName,\n        args: args,\n        from: this.sender\n      };\n      var options = {};\n\n      if (args.length >= 1 && args[0] && args[0].options) {\n        options = args[0].options;\n      }\n\n      var handler = function handler() {\n        if (_this2.transport) {\n          _this2.transport.send(event, options);\n        }\n\n        _this2.handleEvent(event);\n      };\n\n      if (this.isAsync) {\n        // todo I'm not sure how to test this\n        setImmediate(handler);\n      } else {\n        handler();\n      }\n    }\n  }, {\n    key: \"last\",\n    value: function last(eventName) {\n      return this.data[eventName];\n    }\n  }, {\n    key: \"eventNames\",\n    value: function eventNames() {\n      return Object.keys(this.events);\n    }\n  }, {\n    key: \"listenerCount\",\n    value: function listenerCount(eventName) {\n      var listeners = this.listeners(eventName);\n      return listeners ? listeners.length : 0;\n    }\n  }, {\n    key: \"listeners\",\n    value: function listeners(eventName) {\n      var listeners = this.events[eventName];\n      return listeners || undefined;\n    }\n  }, {\n    key: \"once\",\n    value: function once(eventName, listener) {\n      var onceListener = this.onceListener(eventName, listener);\n      this.addListener(eventName, onceListener);\n    }\n  }, {\n    key: \"removeAllListeners\",\n    value: function removeAllListeners(eventName) {\n      if (!eventName) {\n        this.events = {};\n      } else if (this.events[eventName]) {\n        delete this.events[eventName];\n      }\n    }\n  }, {\n    key: \"removeListener\",\n    value: function removeListener(eventName, listener) {\n      var listeners = this.listeners(eventName);\n\n      if (listeners) {\n        this.events[eventName] = listeners.filter(function (l) {\n          return l !== listener;\n        });\n      }\n    }\n  }, {\n    key: \"on\",\n    value: function on(eventName, listener) {\n      this.addListener(eventName, listener);\n    }\n  }, {\n    key: \"off\",\n    value: function off(eventName, listener) {\n      this.removeListener(eventName, listener);\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(event) {\n      var listeners = this.listeners(event.type);\n\n      if (listeners && listeners.length) {\n        listeners.forEach(function (fn) {\n          fn.apply(event, event.args);\n        });\n      }\n\n      this.data[event.type] = event.args;\n    }\n  }, {\n    key: \"onceListener\",\n    value: function onceListener(eventName, listener) {\n      var _this3 = this;\n\n      var onceListener = function onceListener() {\n        _this3.removeListener(eventName, onceListener);\n\n        return listener.apply(void 0, arguments);\n      };\n\n      return onceListener;\n    }\n  }]);\n\n  return Channel;\n}();\nexport default Channel;","import Channel from '@storybook/channels';\nexport function mockChannel() {\n  var transport = {\n    setHandler: function setHandler() {},\n    send: function send() {}\n  };\n  return new Channel({\n    transport: transport\n  });\n}","import \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.values.js\";\n// NOTE: The types exported from this file are simplified versions of the types exported\n// by @storybook/csf, with the simpler form retained for backwards compatibility.\n// We will likely start exporting the more complex <StoryFnReturnType> based types in 7.0\n// The `any` here is the story store's `StoreItem` record. Ideally we should probably only\n// pass a defined subset of that full data, but we pass it all so far :shrug:\nexport var types;\n\n(function (types) {\n  types[\"TAB\"] = \"tab\";\n  types[\"PANEL\"] = \"panel\";\n  types[\"TOOL\"] = \"tool\";\n  types[\"TOOLEXTRA\"] = \"toolextra\";\n  types[\"PREVIEW\"] = \"preview\";\n  types[\"NOTES_ELEMENT\"] = \"notes-element\";\n})(types || (types = {}));\n\nexport function isSupportedType(type) {\n  return !!Object.values(types).find(function (typeVal) {\n    return typeVal === type;\n  });\n}","import \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport \"core-js/modules/es.promise.js\";\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport global from 'global';\nimport { Channel } from '@storybook/channels';\nimport { logger } from '@storybook/client-logger';\nimport { mockChannel } from './storybook-channel-mock';\nimport { types } from './types';\nexport { Channel };\nexport var AddonStore = /*#__PURE__*/_createClass(function AddonStore() {\n  var _this = this;\n\n  _classCallCheck(this, AddonStore);\n\n  this.loaders = {};\n  this.elements = {};\n  this.config = {};\n  this.channel = void 0;\n  this.serverChannel = void 0;\n  this.promise = void 0;\n  this.resolve = void 0;\n\n  this.getChannel = function () {\n    // this.channel should get overwritten by setChannel. If it wasn't called (e.g. in non-browser environment), set a mock instead.\n    if (!_this.channel) {\n      _this.setChannel(mockChannel());\n    }\n\n    return _this.channel;\n  };\n\n  this.getServerChannel = function () {\n    if (!_this.serverChannel) {\n      throw new Error('Accessing non-existent serverChannel');\n    }\n\n    return _this.serverChannel;\n  };\n\n  this.ready = function () {\n    return _this.promise;\n  };\n\n  this.hasChannel = function () {\n    return !!_this.channel;\n  };\n\n  this.hasServerChannel = function () {\n    return !!_this.serverChannel;\n  };\n\n  this.setChannel = function (channel) {\n    _this.channel = channel;\n\n    _this.resolve();\n  };\n\n  this.setServerChannel = function (channel) {\n    _this.serverChannel = channel;\n  };\n\n  this.getElements = function (type) {\n    if (!_this.elements[type]) {\n      _this.elements[type] = {};\n    }\n\n    return _this.elements[type];\n  };\n\n  this.addPanel = function (name, options) {\n    _this.add(name, Object.assign({\n      type: types.PANEL\n    }, options));\n  };\n\n  this.add = function (name, addon) {\n    var type = addon.type;\n\n    var collection = _this.getElements(type);\n\n    collection[name] = Object.assign({\n      id: name\n    }, addon);\n  };\n\n  this.setConfig = function (value) {\n    Object.assign(_this.config, value);\n  };\n\n  this.getConfig = function () {\n    return _this.config;\n  };\n\n  this.register = function (name, registerCallback) {\n    if (_this.loaders[name]) {\n      logger.warn(\"\".concat(name, \" was loaded twice, this could have bad side-effects\"));\n    }\n\n    _this.loaders[name] = registerCallback;\n  };\n\n  this.loadAddons = function (api) {\n    Object.values(_this.loaders).forEach(function (value) {\n      return value(api);\n    });\n  };\n\n  this.promise = new Promise(function (res) {\n    _this.resolve = function () {\n      return res(_this.getChannel());\n    };\n  });\n}); // Enforce addons store to be a singleton\n\nvar KEY = '__STORYBOOK_ADDONS';\n\nfunction getAddonsStore() {\n  if (!global[KEY]) {\n    global[KEY] = new AddonStore();\n  }\n\n  return global[KEY];\n} // Exporting this twice in order to to be able to import it like { addons } instead of 'addons'\n// prefer import { addons } from '@storybook/addons' over import addons from '@storybook/addons'\n//\n// See public_api.ts\n\n\nexport var addons = getAddonsStore();","import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.concat.js\";\nexport var makeDecorator = function makeDecorator(_ref) {\n  var name = _ref.name,\n      parameterName = _ref.parameterName,\n      wrapper = _ref.wrapper,\n      _ref$skipIfNoParamete = _ref.skipIfNoParametersOrOptions,\n      skipIfNoParametersOrOptions = _ref$skipIfNoParamete === void 0 ? false : _ref$skipIfNoParamete;\n\n  var decorator = function decorator(options) {\n    return function (storyFn, context) {\n      var parameters = context.parameters && context.parameters[parameterName];\n\n      if (parameters && parameters.disable) {\n        return storyFn(context);\n      }\n\n      if (skipIfNoParametersOrOptions && !options && !parameters) {\n        return storyFn(context);\n      }\n\n      return wrapper(storyFn, context, {\n        options: options,\n        parameters: parameters\n      });\n    };\n  };\n\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    // Used without options as .addDecorator(decorator)\n    if (typeof args[0] === 'function') {\n      return decorator().apply(void 0, args);\n    }\n\n    return function () {\n      // Used as [.]addDecorator(decorator(options))\n      if (arguments.length > 1) {\n        // Used as [.]addDecorator(decorator(option1, option2))\n        if (args.length > 1) {\n          return decorator(args).apply(void 0, arguments);\n        }\n\n        return decorator.apply(void 0, args).apply(void 0, arguments);\n      }\n\n      throw new Error(\"Passing stories directly into \".concat(name, \"() is not allowed,\\n        instead use addDecorator(\").concat(name, \") and pass options with the '\").concat(parameterName, \"' parameter\"));\n    };\n  };\n};","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.weak-map.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport global from 'global';\nimport { logger } from '@storybook/client-logger';\nimport { FORCE_RE_RENDER, STORY_RENDERED, UPDATE_STORY_ARGS, RESET_STORY_ARGS, UPDATE_GLOBALS } from '@storybook/core-events';\nimport { addons } from './index';\nvar globalWindow = global.window;\nexport var HooksContext = /*#__PURE__*/function () {\n  function HooksContext() {\n    var _this = this;\n\n    _classCallCheck(this, HooksContext);\n\n    this.hookListsMap = void 0;\n    this.mountedDecorators = void 0;\n    this.prevMountedDecorators = void 0;\n    this.currentHooks = void 0;\n    this.nextHookIndex = void 0;\n    this.currentPhase = void 0;\n    this.currentEffects = void 0;\n    this.prevEffects = void 0;\n    this.currentDecoratorName = void 0;\n    this.hasUpdates = void 0;\n    this.currentContext = void 0;\n\n    this.renderListener = function (storyId) {\n      if (storyId !== _this.currentContext.id) return;\n\n      _this.triggerEffects();\n\n      _this.currentContext = null;\n\n      _this.removeRenderListeners();\n    };\n\n    this.init();\n  }\n\n  _createClass(HooksContext, [{\n    key: \"init\",\n    value: function init() {\n      this.hookListsMap = new WeakMap();\n      this.mountedDecorators = new Set();\n      this.prevMountedDecorators = this.mountedDecorators;\n      this.currentHooks = [];\n      this.nextHookIndex = 0;\n      this.currentPhase = 'NONE';\n      this.currentEffects = [];\n      this.prevEffects = [];\n      this.currentDecoratorName = null;\n      this.hasUpdates = false;\n      this.currentContext = null;\n    }\n  }, {\n    key: \"clean\",\n    value: function clean() {\n      this.prevEffects.forEach(function (effect) {\n        if (effect.destroy) {\n          effect.destroy();\n        }\n      });\n      this.init();\n      this.removeRenderListeners();\n    }\n  }, {\n    key: \"getNextHook\",\n    value: function getNextHook() {\n      var hook = this.currentHooks[this.nextHookIndex];\n      this.nextHookIndex += 1;\n      return hook;\n    }\n  }, {\n    key: \"triggerEffects\",\n    value: function triggerEffects() {\n      var _this2 = this;\n\n      // destroy removed effects\n      this.prevEffects.forEach(function (effect) {\n        if (!_this2.currentEffects.includes(effect) && effect.destroy) {\n          effect.destroy();\n        }\n      }); // trigger added effects\n\n      this.currentEffects.forEach(function (effect) {\n        if (!_this2.prevEffects.includes(effect)) {\n          // eslint-disable-next-line no-param-reassign\n          effect.destroy = effect.create();\n        }\n      });\n      this.prevEffects = this.currentEffects;\n      this.currentEffects = [];\n    }\n  }, {\n    key: \"addRenderListeners\",\n    value: function addRenderListeners() {\n      this.removeRenderListeners();\n      var channel = addons.getChannel();\n      channel.on(STORY_RENDERED, this.renderListener);\n    }\n  }, {\n    key: \"removeRenderListeners\",\n    value: function removeRenderListeners() {\n      var channel = addons.getChannel();\n      channel.removeListener(STORY_RENDERED, this.renderListener);\n    }\n  }]);\n\n  return HooksContext;\n}();\n\nfunction hookify(fn) {\n  return function () {\n    var _ref = typeof (arguments.length <= 0 ? undefined : arguments[0]) === 'function' ? arguments.length <= 1 ? undefined : arguments[1] : arguments.length <= 0 ? undefined : arguments[0],\n        hooks = _ref.hooks;\n\n    var prevPhase = hooks.currentPhase;\n    var prevHooks = hooks.currentHooks;\n    var prevNextHookIndex = hooks.nextHookIndex;\n    var prevDecoratorName = hooks.currentDecoratorName;\n    hooks.currentDecoratorName = fn.name;\n\n    if (hooks.prevMountedDecorators.has(fn)) {\n      hooks.currentPhase = 'UPDATE';\n      hooks.currentHooks = hooks.hookListsMap.get(fn) || [];\n    } else {\n      hooks.currentPhase = 'MOUNT';\n      hooks.currentHooks = [];\n      hooks.hookListsMap.set(fn, hooks.currentHooks);\n      hooks.prevMountedDecorators.add(fn);\n    }\n\n    hooks.nextHookIndex = 0;\n    var prevContext = globalWindow.STORYBOOK_HOOKS_CONTEXT;\n    globalWindow.STORYBOOK_HOOKS_CONTEXT = hooks;\n    var result = fn.apply(void 0, arguments);\n    globalWindow.STORYBOOK_HOOKS_CONTEXT = prevContext;\n\n    if (hooks.currentPhase === 'UPDATE' && hooks.getNextHook() != null) {\n      throw new Error('Rendered fewer hooks than expected. This may be caused by an accidental early return statement.');\n    }\n\n    hooks.currentPhase = prevPhase;\n    hooks.currentHooks = prevHooks;\n    hooks.nextHookIndex = prevNextHookIndex;\n    hooks.currentDecoratorName = prevDecoratorName;\n    return result;\n  };\n} // Counter to prevent infinite loops.\n\n\nvar numberOfRenders = 0;\nvar RENDER_LIMIT = 25;\nexport var applyHooks = function applyHooks(applyDecorators) {\n  return function (storyFn, decorators) {\n    var decorated = applyDecorators(hookify(storyFn), decorators.map(function (decorator) {\n      return hookify(decorator);\n    }));\n    return function (context) {\n      var _ref2 = context,\n          hooks = _ref2.hooks;\n      hooks.prevMountedDecorators = hooks.mountedDecorators;\n      hooks.mountedDecorators = new Set([storyFn].concat(_toConsumableArray(decorators)));\n      hooks.currentContext = context;\n      hooks.hasUpdates = false;\n      var result = decorated(context);\n      numberOfRenders = 1;\n\n      while (hooks.hasUpdates) {\n        hooks.hasUpdates = false;\n        hooks.currentEffects = [];\n        result = decorated(context);\n        numberOfRenders += 1;\n\n        if (numberOfRenders > RENDER_LIMIT) {\n          throw new Error('Too many re-renders. Storybook limits the number of renders to prevent an infinite loop.');\n        }\n      }\n\n      hooks.addRenderListeners();\n      return result;\n    };\n  };\n};\n\nvar areDepsEqual = function areDepsEqual(deps, nextDeps) {\n  return deps.length === nextDeps.length && deps.every(function (dep, i) {\n    return dep === nextDeps[i];\n  });\n};\n\nvar invalidHooksError = function invalidHooksError() {\n  return new Error('Storybook preview hooks can only be called inside decorators and story functions.');\n};\n\nfunction getHooksContextOrNull() {\n  return globalWindow.STORYBOOK_HOOKS_CONTEXT || null;\n}\n\nfunction getHooksContextOrThrow() {\n  var hooks = getHooksContextOrNull();\n\n  if (hooks == null) {\n    throw invalidHooksError();\n  }\n\n  return hooks;\n}\n\nfunction useHook(name, callback, deps) {\n  var hooks = getHooksContextOrThrow();\n\n  if (hooks.currentPhase === 'MOUNT') {\n    if (deps != null && !Array.isArray(deps)) {\n      logger.warn(\"\".concat(name, \" received a final argument that is not an array (instead, received \").concat(deps, \"). When specified, the final argument must be an array.\"));\n    }\n\n    var _hook = {\n      name: name,\n      deps: deps\n    };\n    hooks.currentHooks.push(_hook);\n    callback(_hook);\n    return _hook;\n  }\n\n  if (hooks.currentPhase === 'UPDATE') {\n    var _hook2 = hooks.getNextHook();\n\n    if (_hook2 == null) {\n      throw new Error('Rendered more hooks than during the previous render.');\n    }\n\n    if (_hook2.name !== name) {\n      logger.warn(\"Storybook has detected a change in the order of Hooks\".concat(hooks.currentDecoratorName ? \" called by \".concat(hooks.currentDecoratorName) : '', \". This will lead to bugs and errors if not fixed.\"));\n    }\n\n    if (deps != null && _hook2.deps == null) {\n      logger.warn(\"\".concat(name, \" received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.\"));\n    }\n\n    if (deps != null && _hook2.deps != null && deps.length !== _hook2.deps.length) {\n      logger.warn(\"The final argument passed to \".concat(name, \" changed size between renders. The order and size of this array must remain constant.\\nPrevious: \").concat(_hook2.deps, \"\\nIncoming: \").concat(deps));\n    }\n\n    if (deps == null || _hook2.deps == null || !areDepsEqual(deps, _hook2.deps)) {\n      callback(_hook2);\n      _hook2.deps = deps;\n    }\n\n    return _hook2;\n  }\n\n  throw invalidHooksError();\n}\n\nfunction useMemoLike(name, nextCreate, deps) {\n  var _useHook = useHook(name, function (hook) {\n    // eslint-disable-next-line no-param-reassign\n    hook.memoizedState = nextCreate();\n  }, deps),\n      memoizedState = _useHook.memoizedState;\n\n  return memoizedState;\n}\n/* Returns a memoized value, see https://reactjs.org/docs/hooks-reference.html#usememo */\n\n\nexport function useMemo(nextCreate, deps) {\n  return useMemoLike('useMemo', nextCreate, deps);\n}\n/* Returns a memoized callback, see https://reactjs.org/docs/hooks-reference.html#usecallback */\n\nexport function useCallback(callback, deps) {\n  return useMemoLike('useCallback', function () {\n    return callback;\n  }, deps);\n}\n\nfunction useRefLike(name, initialValue) {\n  return useMemoLike(name, function () {\n    return {\n      current: initialValue\n    };\n  }, []);\n}\n/* Returns a mutable ref object, see https://reactjs.org/docs/hooks-reference.html#useref */\n\n\nexport function useRef(initialValue) {\n  return useRefLike('useRef', initialValue);\n}\n\nfunction triggerUpdate() {\n  var hooks = getHooksContextOrNull(); // Rerun storyFn if updates were triggered synchronously, force rerender otherwise\n\n  if (hooks != null && hooks.currentPhase !== 'NONE') {\n    hooks.hasUpdates = true;\n  } else {\n    try {\n      addons.getChannel().emit(FORCE_RE_RENDER);\n    } catch (e) {\n      logger.warn('State updates of Storybook preview hooks work only in browser');\n    }\n  }\n}\n\nfunction useStateLike(name, initialState) {\n  var stateRef = useRefLike(name, // @ts-ignore S type should never be function, but there's no way to tell that to TypeScript\n  typeof initialState === 'function' ? initialState() : initialState);\n\n  var setState = function setState(update) {\n    // @ts-ignore S type should never be function, but there's no way to tell that to TypeScript\n    stateRef.current = typeof update === 'function' ? update(stateRef.current) : update;\n    triggerUpdate();\n  };\n\n  return [stateRef.current, setState];\n}\n/* Returns a stateful value, and a function to update it, see https://reactjs.org/docs/hooks-reference.html#usestate */\n\n\nexport function useState(initialState) {\n  return useStateLike('useState', initialState);\n}\n/* A redux-like alternative to useState, see https://reactjs.org/docs/hooks-reference.html#usereducer */\n\nexport function useReducer(reducer, initialArg, init) {\n  var initialState = init != null ? function () {\n    return init(initialArg);\n  } : initialArg;\n\n  var _useStateLike = useStateLike('useReducer', initialState),\n      _useStateLike2 = _slicedToArray(_useStateLike, 2),\n      state = _useStateLike2[0],\n      setState = _useStateLike2[1];\n\n  var dispatch = function dispatch(action) {\n    return setState(function (prevState) {\n      return reducer(prevState, action);\n    });\n  };\n\n  return [state, dispatch];\n}\n/*\n  Triggers a side effect, see https://reactjs.org/docs/hooks-reference.html#usestate\n  Effects are triggered synchronously after rendering the story\n*/\n\nexport function useEffect(create, deps) {\n  var hooks = getHooksContextOrThrow();\n  var effect = useMemoLike('useEffect', function () {\n    return {\n      create: create\n    };\n  }, deps);\n\n  if (!hooks.currentEffects.includes(effect)) {\n    hooks.currentEffects.push(effect);\n  }\n}\n\n/* Accepts a map of Storybook channel event listeners, returns an emit function */\nexport function useChannel(eventMap) {\n  var deps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var channel = addons.getChannel();\n  useEffect(function () {\n    Object.entries(eventMap).forEach(function (_ref3) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n          type = _ref4[0],\n          listener = _ref4[1];\n\n      return channel.on(type, listener);\n    });\n    return function () {\n      Object.entries(eventMap).forEach(function (_ref5) {\n        var _ref6 = _slicedToArray(_ref5, 2),\n            type = _ref6[0],\n            listener = _ref6[1];\n\n        return channel.removeListener(type, listener);\n      });\n    };\n  }, [].concat(_toConsumableArray(Object.keys(eventMap)), _toConsumableArray(deps)));\n  return useCallback(channel.emit.bind(channel), [channel]);\n}\n/* Returns current story context */\n\nexport function useStoryContext() {\n  var _getHooksContextOrThr = getHooksContextOrThrow(),\n      currentContext = _getHooksContextOrThr.currentContext;\n\n  if (currentContext == null) {\n    throw invalidHooksError();\n  }\n\n  return currentContext;\n}\n/* Returns current value of a story parameter */\n\nexport function useParameter(parameterKey, defaultValue) {\n  var _useStoryContext = useStoryContext(),\n      parameters = _useStoryContext.parameters;\n\n  if (parameterKey) {\n    var _parameters$parameter;\n\n    return (_parameters$parameter = parameters[parameterKey]) !== null && _parameters$parameter !== void 0 ? _parameters$parameter : defaultValue;\n  }\n\n  return undefined;\n}\n/* Returns current value of story args */\n\nexport function useArgs() {\n  var channel = addons.getChannel();\n\n  var _useStoryContext2 = useStoryContext(),\n      storyId = _useStoryContext2.id,\n      args = _useStoryContext2.args;\n\n  var updateArgs = useCallback(function (updatedArgs) {\n    return channel.emit(UPDATE_STORY_ARGS, {\n      storyId: storyId,\n      updatedArgs: updatedArgs\n    });\n  }, [channel, storyId]);\n  var resetArgs = useCallback(function (argNames) {\n    return channel.emit(RESET_STORY_ARGS, {\n      storyId: storyId,\n      argNames: argNames\n    });\n  }, [channel, storyId]);\n  return [args, updateArgs, resetArgs];\n}\n/* Returns current value of global args */\n\nexport function useGlobals() {\n  var channel = addons.getChannel();\n\n  var _useStoryContext3 = useStoryContext(),\n      globals = _useStoryContext3.globals;\n\n  var updateGlobals = useCallback(function (newGlobals) {\n    return channel.emit(UPDATE_GLOBALS, {\n      globals: newGlobals\n    });\n  }, [channel]);\n  return [globals, updateGlobals];\n}","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { SHARED_STATE_CHANGED, SHARED_STATE_SET } from '@storybook/core-events';\nimport { addons, HooksContext, applyHooks, useMemo, useCallback, useRef, useState, useReducer, useEffect, useChannel, useStoryContext, useParameter, useArgs, useGlobals } from '@storybook/addons';\nexport { HooksContext, applyHooks, useMemo, useCallback, useRef, useState, useReducer, useEffect, useChannel, useStoryContext, useParameter, useArgs, useGlobals };\nexport function useSharedState(sharedId, defaultState) {\n  var channel = addons.getChannel();\n\n  var _ref = channel.last(\"\".concat(SHARED_STATE_CHANGED, \"-manager-\").concat(sharedId)) || channel.last(\"\".concat(SHARED_STATE_SET, \"-manager-\").concat(sharedId)) || [],\n      _ref2 = _slicedToArray(_ref, 1),\n      lastValue = _ref2[0];\n\n  var _useState = useState(lastValue || defaultState),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var allListeners = useMemo(function () {\n    var _ref3;\n\n    return _ref3 = {}, _defineProperty(_ref3, \"\".concat(SHARED_STATE_CHANGED, \"-manager-\").concat(sharedId), function manager(s) {\n      return setState(s);\n    }), _defineProperty(_ref3, \"\".concat(SHARED_STATE_SET, \"-manager-\").concat(sharedId), function manager(s) {\n      return setState(s);\n    }), _ref3;\n  }, [sharedId]);\n  var emit = useChannel(allListeners, [sharedId]);\n  useEffect(function () {\n    // init\n    if (defaultState !== undefined && !lastValue) {\n      emit(\"\".concat(SHARED_STATE_SET, \"-client-\").concat(sharedId), defaultState);\n    }\n  }, [sharedId]);\n  return [state, function (s) {\n    setState(s);\n    emit(\"\".concat(SHARED_STATE_CHANGED, \"-client-\").concat(sharedId), s);\n  }];\n}\nexport function useAddonState(addonId, defaultState) {\n  return useSharedState(addonId, defaultState);\n}","import \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nvar _excluded = [\"componentId\", \"title\", \"kind\", \"id\", \"name\", \"story\", \"parameters\", \"initialArgs\", \"argTypes\"];\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nexport function decorateStory(storyFn, decorator, bindWithContext) {\n  // Bind the partially decorated storyFn so that when it is called it always knows about the story context,\n  // no matter what it is passed directly. This is because we cannot guarantee a decorator will\n  // pass the context down to the next decorated story in the chain.\n  var boundStoryFunction = bindWithContext(storyFn);\n  return function (context) {\n    return decorator(boundStoryFunction, context);\n  };\n}\n\n/**\n * Currently StoryContextUpdates are allowed to have any key in the type.\n * However, you cannot overwrite any of the build-it \"static\" keys.\n *\n * @param inputContextUpdate StoryContextUpdate\n * @returns StoryContextUpdate\n */\nexport function sanitizeStoryContextUpdate() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var componentId = _ref.componentId,\n      title = _ref.title,\n      kind = _ref.kind,\n      id = _ref.id,\n      name = _ref.name,\n      story = _ref.story,\n      parameters = _ref.parameters,\n      initialArgs = _ref.initialArgs,\n      argTypes = _ref.argTypes,\n      update = _objectWithoutProperties(_ref, _excluded);\n\n  return update;\n}\nexport function defaultDecorateStory(storyFn, decorators) {\n  // We use a trick to avoid recreating the bound story function inside `decorateStory`.\n  // Instead we pass it a context \"getter\", which is defined once (at \"decoration time\")\n  // The getter reads a variable which is scoped to this call of `decorateStory`\n  // (ie to this story), so there is no possibility of overlap.\n  // This will break if you call the same story twice interleaved\n  // (React might do it if you rendered the same story twice in the one ReactDom.render call, for instance)\n  var contextStore = {};\n  /**\n   * When you call the story function inside a decorator, e.g.:\n   *\n   * ```jsx\n   * <div>{storyFn({ foo: 'bar' })}</div>\n   * ```\n   *\n   * This will override the `foo` property on the `innerContext`, which gets\n   * merged in with the default context\n   */\n\n  var bindWithContext = function bindWithContext(decoratedStoryFn) {\n    return function (update) {\n      contextStore.value = Object.assign({}, contextStore.value, sanitizeStoryContextUpdate(update));\n      return decoratedStoryFn(contextStore.value);\n    };\n  };\n\n  var decoratedWithContextStore = decorators.reduce(function (story, decorator) {\n    return decorateStory(story, decorator, bindWithContext);\n  }, storyFn);\n  return function (context) {\n    contextStore.value = context;\n    return decoratedWithContextStore(context); // Pass the context directly into the first decorator\n  };\n}","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\n\nvar _templateObject;\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport \"regenerator-runtime/runtime.js\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.freeze.js\";\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport dedent from 'ts-dedent';\nimport deprecate from 'util-deprecate';\nimport global from 'global';\nimport { includeConditionalArg } from '@storybook/csf';\nimport { combineParameters } from '../parameters';\nimport { applyHooks } from '../hooks';\nimport { defaultDecorateStory } from '../decorators';\nimport { groupArgsByTarget, NO_TARGET_NAME } from '../args';\nimport { getValuesFromArgTypes } from './getValuesFromArgTypes';\nvar argTypeDefaultValueWarning = deprecate(function () {}, dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  `argType.defaultValue` is deprecated and will be removed in Storybook 7.0.\\n\\n  https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#no-longer-inferring-default-values-of-args\"], [\"\\n  \\\\`argType.defaultValue\\\\` is deprecated and will be removed in Storybook 7.0.\\n\\n  https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#no-longer-inferring-default-values-of-args\"])))); // Combine all the metadata about a story (both direct and inherited from the component/global scope)\n// into a \"renderable\" story function, with all decorators applied, parameters passed as context etc\n//\n// Note that this story function is *stateless* in the sense that it does not track args or globals\n// Instead, it is expected these are tracked separately (if necessary) and are passed into each invocation.\n\nexport function prepareStory(storyAnnotations, componentAnnotations, projectAnnotations) {\n  var _global$FEATURES;\n\n  // NOTE: in the current implementation we are doing everything once, up front, rather than doing\n  // anything at render time. The assumption is that as we don't load all the stories at once, this\n  // will have a limited cost. If this proves misguided, we can refactor it.\n  var id = storyAnnotations.id,\n      name = storyAnnotations.name;\n  var title = componentAnnotations.title;\n  var parameters = combineParameters(projectAnnotations.parameters, componentAnnotations.parameters, storyAnnotations.parameters);\n  var decorators = [].concat(_toConsumableArray(storyAnnotations.decorators || []), _toConsumableArray(componentAnnotations.decorators || []), _toConsumableArray(projectAnnotations.decorators || [])); // Currently it is only possible to set these globally\n\n  var _projectAnnotations$a = projectAnnotations.applyDecorators,\n      applyDecorators = _projectAnnotations$a === void 0 ? defaultDecorateStory : _projectAnnotations$a,\n      _projectAnnotations$a2 = projectAnnotations.argTypesEnhancers,\n      argTypesEnhancers = _projectAnnotations$a2 === void 0 ? [] : _projectAnnotations$a2,\n      _projectAnnotations$a3 = projectAnnotations.argsEnhancers,\n      argsEnhancers = _projectAnnotations$a3 === void 0 ? [] : _projectAnnotations$a3;\n  var loaders = [].concat(_toConsumableArray(projectAnnotations.loaders || []), _toConsumableArray(componentAnnotations.loaders || []), _toConsumableArray(storyAnnotations.loaders || [])); // The render function on annotations *has* to be an `ArgsStoryFn`, so when we normalize\n  // CSFv1/2, we use a new field called `userStoryFn` so we know that it can be a LegacyStoryFn\n\n  var render = storyAnnotations.userStoryFn || storyAnnotations.render || componentAnnotations.render || projectAnnotations.render;\n  var passedArgTypes = combineParameters(projectAnnotations.argTypes, componentAnnotations.argTypes, storyAnnotations.argTypes);\n  var _parameters$passArgsF = parameters.passArgsFirst,\n      passArgsFirst = _parameters$passArgsF === void 0 ? true : _parameters$passArgsF; // eslint-disable-next-line no-underscore-dangle\n\n  parameters.__isArgsStory = passArgsFirst && render.length > 0; // Pull out args[X] into initialArgs for argTypes enhancers\n\n  var passedArgs = Object.assign({}, projectAnnotations.args, componentAnnotations.args, storyAnnotations.args);\n  var contextForEnhancers = {\n    componentId: componentAnnotations.id,\n    title: title,\n    kind: title,\n    // Back compat\n    id: id,\n    name: name,\n    story: name,\n    // Back compat\n    component: componentAnnotations.component,\n    subcomponents: componentAnnotations.subcomponents,\n    parameters: parameters,\n    initialArgs: passedArgs,\n    argTypes: passedArgTypes\n  };\n  contextForEnhancers.argTypes = argTypesEnhancers.reduce(function (accumulatedArgTypes, enhancer) {\n    return enhancer(Object.assign({}, contextForEnhancers, {\n      argTypes: accumulatedArgTypes\n    }));\n  }, contextForEnhancers.argTypes); // Add argTypes[X].defaultValue to initial args (note this deprecated)\n  // We need to do this *after* the argTypesEnhancers as they may add defaultValues\n\n  var defaultArgs = getValuesFromArgTypes(contextForEnhancers.argTypes);\n\n  if (Object.keys(defaultArgs).length > 0) {\n    argTypeDefaultValueWarning();\n  }\n\n  var initialArgsBeforeEnhancers = Object.assign({}, defaultArgs, passedArgs);\n  contextForEnhancers.initialArgs = argsEnhancers.reduce(function (accumulatedArgs, enhancer) {\n    return Object.assign({}, accumulatedArgs, enhancer(Object.assign({}, contextForEnhancers, {\n      initialArgs: accumulatedArgs\n    })));\n  }, initialArgsBeforeEnhancers); // Add some of our metadata into parameters as we used to do this in 6.x and users may be relying on it\n\n  if (!((_global$FEATURES = global.FEATURES) !== null && _global$FEATURES !== void 0 && _global$FEATURES.breakingChangesV7)) {\n    contextForEnhancers.parameters = Object.assign({}, contextForEnhancers.parameters, {\n      __id: id,\n      globals: projectAnnotations.globals,\n      globalTypes: projectAnnotations.globalTypes,\n      args: contextForEnhancers.initialArgs,\n      argTypes: contextForEnhancers.argTypes\n    });\n  }\n\n  var applyLoaders = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(context) {\n      var loadResults, loaded;\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return Promise.all(loaders.map(function (loader) {\n                return loader(context);\n              }));\n\n            case 2:\n              loadResults = _context.sent;\n              loaded = Object.assign.apply(Object, [{}].concat(_toConsumableArray(loadResults)));\n              return _context.abrupt(\"return\", Object.assign({}, context, {\n                loaded: loaded\n              }));\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function applyLoaders(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var undecoratedStoryFn = function undecoratedStoryFn(context) {\n    var mappedArgs = Object.entries(context.args).reduce(function (acc, _ref2) {\n      var _context$argTypes$key;\n\n      var _ref3 = _slicedToArray(_ref2, 2),\n          key = _ref3[0],\n          val = _ref3[1];\n\n      var mapping = (_context$argTypes$key = context.argTypes[key]) === null || _context$argTypes$key === void 0 ? void 0 : _context$argTypes$key.mapping;\n      acc[key] = mapping && val in mapping ? mapping[val] : val;\n      return acc;\n    }, {});\n    var includedArgs = Object.entries(mappedArgs).reduce(function (acc, _ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n          key = _ref5[0],\n          val = _ref5[1];\n\n      var argType = context.argTypes[key] || {};\n      if (includeConditionalArg(argType, mappedArgs, context.globals)) acc[key] = val;\n      return acc;\n    }, {});\n    var includedContext = Object.assign({}, context, {\n      args: includedArgs\n    });\n    var _context$parameters$p = context.parameters.passArgsFirst,\n        renderTimePassArgsFirst = _context$parameters$p === void 0 ? true : _context$parameters$p;\n    return renderTimePassArgsFirst ? render(includedContext.args, includedContext) : render(includedContext);\n  };\n\n  var decoratedStoryFn = applyHooks(applyDecorators)(undecoratedStoryFn, decorators);\n\n  var unboundStoryFn = function unboundStoryFn(context) {\n    var _global$FEATURES2;\n\n    var finalContext = context;\n\n    if ((_global$FEATURES2 = global.FEATURES) !== null && _global$FEATURES2 !== void 0 && _global$FEATURES2.argTypeTargetsV7) {\n      var argsByTarget = groupArgsByTarget(Object.assign({\n        args: context.args\n      }, context));\n      finalContext = Object.assign({}, context, {\n        allArgs: context.args,\n        argsByTarget: argsByTarget,\n        args: argsByTarget[NO_TARGET_NAME] || {}\n      });\n    }\n\n    return decoratedStoryFn(finalContext);\n  };\n\n  var playFunction = storyAnnotations.play;\n  return Object.freeze(Object.assign({}, contextForEnhancers, {\n    originalStoryFn: render,\n    undecoratedStoryFn: undecoratedStoryFn,\n    unboundStoryFn: unboundStoryFn,\n    applyLoaders: applyLoaders,\n    playFunction: playFunction\n  }));\n}","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.freeze.js\";\n\nvar _templateObject;\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nimport mapValues from 'lodash/mapValues';\nimport dedent from 'ts-dedent';\nimport { logger } from '@storybook/client-logger';\nimport { combineParameters } from './parameters';\n\nvar inferType = function inferType(value, name, visited) {\n  var type = _typeof(value);\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'function':\n    case 'symbol':\n      return {\n        name: type\n      };\n\n    default:\n      break;\n  }\n\n  if (value) {\n    if (visited.has(value)) {\n      logger.warn(dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        We've detected a cycle in arg '\", \"'. Args should be JSON-serializable.\\n\\n        Consider using the mapping feature or fully custom args:\\n        - Mapping: https://storybook.js.org/docs/react/writing-stories/args#mapping-to-complex-arg-values\\n        - Custom args: https://storybook.js.org/docs/react/essentials/controls#fully-custom-args\\n      \"])), name));\n      return {\n        name: 'other',\n        value: 'cyclic object'\n      };\n    }\n\n    visited.add(value);\n\n    if (Array.isArray(value)) {\n      var childType = value.length > 0 ? inferType(value[0], name, new Set(visited)) : {\n        name: 'other',\n        value: 'unknown'\n      };\n      return {\n        name: 'array',\n        value: childType\n      };\n    }\n\n    var fieldTypes = mapValues(value, function (field) {\n      return inferType(field, name, new Set(visited));\n    });\n    return {\n      name: 'object',\n      value: fieldTypes\n    };\n  }\n\n  return {\n    name: 'object',\n    value: {}\n  };\n};\n\nexport var inferArgTypes = function inferArgTypes(context) {\n  var id = context.id,\n      _context$argTypes = context.argTypes,\n      userArgTypes = _context$argTypes === void 0 ? {} : _context$argTypes,\n      _context$initialArgs = context.initialArgs,\n      initialArgs = _context$initialArgs === void 0 ? {} : _context$initialArgs;\n  var argTypes = mapValues(initialArgs, function (arg, key) {\n    return {\n      name: key,\n      type: inferType(arg, \"\".concat(id, \".\").concat(key), new Set())\n    };\n  });\n  var userArgTypesNames = mapValues(userArgTypes, function (argType, key) {\n    return {\n      name: key\n    };\n  });\n  return combineParameters(argTypes, userArgTypesNames, userArgTypes);\n};\ninferArgTypes.secondPass = true;","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    basePickBy = require('./_basePickBy'),\n    getAllKeysIn = require('./_getAllKeysIn');\n\n/**\n * Creates an object composed of the `object` properties `predicate` returns\n * truthy for. The predicate is invoked with two arguments: (value, key).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The source object.\n * @param {Function} [predicate=_.identity] The function invoked per property.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pickBy(object, _.isNumber);\n * // => { 'a': 1, 'c': 3 }\n */\nfunction pickBy(object, predicate) {\n  if (object == null) {\n    return {};\n  }\n  var props = arrayMap(getAllKeysIn(object), function(prop) {\n    return [prop];\n  });\n  predicate = baseIteratee(predicate);\n  return basePickBy(object, props, function(value, path) {\n    return predicate(value, path[0]);\n  });\n}\n\nmodule.exports = pickBy;\n","import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport pickBy from 'lodash/pickBy';\n\nvar matches = function matches(name, descriptor) {\n  return Array.isArray(descriptor) ? descriptor.includes(name) : name.match(descriptor);\n};\n\nexport var filterArgTypes = function filterArgTypes(argTypes, include, exclude) {\n  if (!include && !exclude) {\n    return argTypes;\n  }\n\n  return argTypes && pickBy(argTypes, function (argType, key) {\n    var name = argType.name || key;\n    return (!include || matches(name, include)) && (!exclude || !matches(name, exclude));\n  });\n};","import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport mapValues from 'lodash/mapValues';\nimport { logger } from '@storybook/client-logger';\nimport { filterArgTypes } from './filterArgTypes';\nimport { combineParameters } from './parameters';\n\nvar inferControl = function inferControl(argType, name, matchers) {\n  var type = argType.type,\n      options = argType.options;\n\n  if (!type && !options) {\n    return undefined;\n  } // args that end with background or color e.g. iconColor\n\n\n  if (matchers.color && matchers.color.test(name)) {\n    var controlType = argType.type.name;\n\n    if (controlType === 'string') {\n      return {\n        control: {\n          type: 'color'\n        }\n      };\n    }\n\n    logger.warn(\"Addon controls: Control of type color only supports string, received \\\"\".concat(controlType, \"\\\" instead\"));\n  } // args that end with date e.g. purchaseDate\n\n\n  if (matchers.date && matchers.date.test(name)) {\n    return {\n      control: {\n        type: 'date'\n      }\n    };\n  }\n\n  switch (type.name) {\n    case 'array':\n      return {\n        control: {\n          type: 'object'\n        }\n      };\n\n    case 'boolean':\n      return {\n        control: {\n          type: 'boolean'\n        }\n      };\n\n    case 'string':\n      return {\n        control: {\n          type: 'text'\n        }\n      };\n\n    case 'number':\n      return {\n        control: {\n          type: 'number'\n        }\n      };\n\n    case 'enum':\n      {\n        var _ref = type,\n            value = _ref.value;\n        return {\n          control: {\n            type: (value === null || value === void 0 ? void 0 : value.length) <= 5 ? 'radio' : 'select'\n          },\n          options: value\n        };\n      }\n\n    case 'function':\n    case 'symbol':\n      return null;\n\n    default:\n      return {\n        control: {\n          type: options ? 'select' : 'object'\n        }\n      };\n  }\n};\n\nexport var inferControls = function inferControls(context) {\n  var argTypes = context.argTypes,\n      _context$parameters = context.parameters,\n      __isArgsStory = _context$parameters.__isArgsStory,\n      _context$parameters$c = _context$parameters.controls;\n  _context$parameters$c = _context$parameters$c === void 0 ? {} : _context$parameters$c;\n  var _context$parameters$c2 = _context$parameters$c.include,\n      include = _context$parameters$c2 === void 0 ? null : _context$parameters$c2,\n      _context$parameters$c3 = _context$parameters$c.exclude,\n      exclude = _context$parameters$c3 === void 0 ? null : _context$parameters$c3,\n      _context$parameters$c4 = _context$parameters$c.matchers,\n      matchers = _context$parameters$c4 === void 0 ? {} : _context$parameters$c4;\n  if (!__isArgsStory) return argTypes;\n  var filteredArgTypes = filterArgTypes(argTypes, include, exclude);\n  var withControls = mapValues(filteredArgTypes, function (argType, name) {\n    return (argType === null || argType === void 0 ? void 0 : argType.type) && inferControl(argType, name, matchers);\n  });\n  return combineParameters(withControls, filteredArgTypes);\n};\ninferControls.secondPass = true;\nexport var argTypesEnhancers = [inferControls];","import \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nvar _excluded = [\"argTypes\", \"globalTypes\", \"argTypesEnhancers\"];\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.array.concat.js\";\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { inferArgTypes } from '../inferArgTypes';\nimport { inferControls } from '../inferControls';\nimport { normalizeInputTypes } from './normalizeInputTypes';\nexport function normalizeProjectAnnotations(_ref) {\n  var argTypes = _ref.argTypes,\n      globalTypes = _ref.globalTypes,\n      argTypesEnhancers = _ref.argTypesEnhancers,\n      annotations = _objectWithoutProperties(_ref, _excluded);\n\n  return Object.assign({}, argTypes && {\n    argTypes: normalizeInputTypes(argTypes)\n  }, globalTypes && {\n    globalTypes: normalizeInputTypes(globalTypes)\n  }, {\n    argTypesEnhancers: [].concat(_toConsumableArray(argTypesEnhancers || []), [inferArgTypes, // inferControls technically should only run if the user is using the controls addon,\n    // and so should be added by a preset there. However, as it seems some code relies on controls\n    // annotations (in particular the angular implementation's `cleanArgsDecorator`), for backwards\n    // compatibility reasons, we will leave this in the store until 7.0\n    inferControls])\n  }, annotations);\n}","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport { combineParameters } from '../parameters';\nexport function getField(moduleExportList, field) {\n  return moduleExportList.map(function (xs) {\n    return xs[field];\n  }).filter(Boolean);\n}\nexport function getArrayField(moduleExportList, field) {\n  return getField(moduleExportList, field).reduce(function (a, b) {\n    return [].concat(_toConsumableArray(a), _toConsumableArray(b));\n  }, []);\n}\nexport function getObjectField(moduleExportList, field) {\n  return Object.assign.apply(Object, [{}].concat(_toConsumableArray(getField(moduleExportList, field))));\n}\nexport function getSingletonField(moduleExportList, field) {\n  return getField(moduleExportList, field).pop();\n}\nexport function composeConfigs(moduleExportList) {\n  var allArgTypeEnhancers = getArrayField(moduleExportList, 'argTypesEnhancers');\n  return {\n    parameters: combineParameters.apply(void 0, _toConsumableArray(getField(moduleExportList, 'parameters'))),\n    decorators: getArrayField(moduleExportList, 'decorators'),\n    args: getObjectField(moduleExportList, 'args'),\n    argsEnhancers: getArrayField(moduleExportList, 'argsEnhancers'),\n    argTypes: getObjectField(moduleExportList, 'argTypes'),\n    argTypesEnhancers: [].concat(_toConsumableArray(allArgTypeEnhancers.filter(function (e) {\n      return !e.secondPass;\n    })), _toConsumableArray(allArgTypeEnhancers.filter(function (e) {\n      return e.secondPass;\n    }))),\n    globals: getObjectField(moduleExportList, 'globals'),\n    globalTypes: getObjectField(moduleExportList, 'globalTypes'),\n    loaders: getArrayField(moduleExportList, 'loaders'),\n    render: getSingletonField(moduleExportList, 'render'),\n    renderToDOM: getSingletonField(moduleExportList, 'renderToDOM'),\n    applyDecorators: getSingletonField(moduleExportList, 'applyDecorators')\n  };\n}","import \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nvar _excluded = [\"default\", \"__esModule\", \"__namedExportsOrder\"];\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport { isExportStory } from '@storybook/csf';\nimport { composeConfigs } from '../composeConfigs';\nimport { prepareStory } from '../prepareStory';\nimport { normalizeStory } from '../normalizeStory';\nimport { HooksContext } from '../../hooks';\nimport { normalizeComponentAnnotations } from '../normalizeComponentAnnotations';\nimport { getValuesFromArgTypes } from '../getValuesFromArgTypes';\nimport { normalizeProjectAnnotations } from '../normalizeProjectAnnotations';\nexport * from './types';\nvar GLOBAL_STORYBOOK_PROJECT_ANNOTATIONS = {};\nexport function setProjectAnnotations(projectAnnotations) {\n  GLOBAL_STORYBOOK_PROJECT_ANNOTATIONS = Array.isArray(projectAnnotations) ? composeConfigs(projectAnnotations) : projectAnnotations;\n}\nexport function composeStory(storyAnnotations, componentAnnotations) {\n  var _componentAnnotations, _storyAnnotations$sto;\n\n  var projectAnnotations = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : GLOBAL_STORYBOOK_PROJECT_ANNOTATIONS;\n  var defaultConfig = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var exportsName = arguments.length > 4 ? arguments[4] : undefined;\n\n  if (storyAnnotations === undefined) {\n    throw new Error('Expected a story but received undefined.');\n  } // @TODO: Support auto title\n  // eslint-disable-next-line no-param-reassign\n\n\n  componentAnnotations.title = (_componentAnnotations = componentAnnotations.title) !== null && _componentAnnotations !== void 0 ? _componentAnnotations : 'ComposedStory';\n  var normalizedComponentAnnotations = normalizeComponentAnnotations(componentAnnotations);\n  var storyName = exportsName || storyAnnotations.storyName || ((_storyAnnotations$sto = storyAnnotations.story) === null || _storyAnnotations$sto === void 0 ? void 0 : _storyAnnotations$sto.name) || storyAnnotations.name;\n  var normalizedStory = normalizeStory(storyName, storyAnnotations, normalizedComponentAnnotations);\n  var normalizedProjectAnnotations = normalizeProjectAnnotations(Object.assign({}, projectAnnotations, defaultConfig));\n  var story = prepareStory(normalizedStory, normalizedComponentAnnotations, normalizedProjectAnnotations);\n  var defaultGlobals = getValuesFromArgTypes(projectAnnotations.globalTypes);\n\n  var composedStory = function composedStory(extraArgs) {\n    var context = Object.assign({}, story, {\n      hooks: new HooksContext(),\n      globals: defaultGlobals,\n      args: Object.assign({}, story.initialArgs, extraArgs)\n    });\n    return story.unboundStoryFn(context);\n  };\n\n  composedStory.storyName = storyName;\n  composedStory.args = story.initialArgs;\n  composedStory.play = story.playFunction;\n  composedStory.parameters = story.parameters;\n  return composedStory;\n}\nexport function composeStories(storiesImport, globalConfig, composeStoryFn) {\n  var meta = storiesImport.default,\n      __esModule = storiesImport.__esModule,\n      __namedExportsOrder = storiesImport.__namedExportsOrder,\n      stories = _objectWithoutProperties(storiesImport, _excluded);\n\n  var composedStories = Object.entries(stories).reduce(function (storiesMap, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        exportsName = _ref2[0],\n        story = _ref2[1];\n\n    if (!isExportStory(exportsName, meta)) {\n      return storiesMap;\n    }\n\n    var result = Object.assign(storiesMap, _defineProperty({}, exportsName, composeStoryFn(story, meta, globalConfig, exportsName)));\n    return result;\n  }, {});\n  return composedStories;\n}","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport \"regenerator-runtime/runtime.js\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport memoize from 'memoizerific';\nimport mapValues from 'lodash/mapValues';\nimport pick from 'lodash/pick';\nimport global from 'global';\nimport { SynchronousPromise } from 'synchronous-promise';\nimport { StoryIndexStore } from './StoryIndexStore';\nimport { ArgsStore } from './ArgsStore';\nimport { GlobalsStore } from './GlobalsStore';\nimport { processCSFFile, prepareStory, normalizeProjectAnnotations } from './csf';\nimport { HooksContext } from './hooks'; // TODO -- what are reasonable values for these?\n\nvar CSF_CACHE_SIZE = 1000;\nvar STORY_CACHE_SIZE = 10000;\nexport var StoryStore = /*#__PURE__*/function () {\n  function StoryStore() {\n    var _this = this;\n\n    _classCallCheck(this, StoryStore);\n\n    this.storyIndex = void 0;\n    this.importFn = void 0;\n    this.projectAnnotations = void 0;\n    this.globals = void 0;\n    this.args = void 0;\n    this.hooks = void 0;\n    this.cachedCSFFiles = void 0;\n    this.processCSFFileWithCache = void 0;\n    this.prepareStoryWithCache = void 0;\n    this.initializationPromise = void 0;\n    this.resolveInitializationPromise = void 0;\n\n    this.getStoriesJsonData = function () {\n      var value = _this.getSetStoriesPayload();\n\n      var allowedParameters = ['fileName', 'docsOnly', 'framework', '__id', '__isArgsStory'];\n      var stories = mapValues(value.stories, function (story) {\n        var _global$FEATURES;\n\n        return Object.assign({}, pick(story, ['id', 'name', 'title']), {\n          importPath: _this.storyIndex.stories[story.id].importPath\n        }, !((_global$FEATURES = global.FEATURES) !== null && _global$FEATURES !== void 0 && _global$FEATURES.breakingChangesV7) && {\n          kind: story.title,\n          story: story.name,\n          parameters: Object.assign({}, pick(story.parameters, allowedParameters), {\n            fileName: _this.storyIndex.stories[story.id].importPath\n          })\n        });\n      });\n      return {\n        v: 3,\n        stories: stories\n      };\n    };\n\n    this.globals = new GlobalsStore();\n    this.args = new ArgsStore();\n    this.hooks = {}; // We use a cache for these two functions for two reasons:\n    //  1. For performance\n    //  2. To ensure that when the same story is prepared with the same inputs you get the same output\n\n    this.processCSFFileWithCache = memoize(CSF_CACHE_SIZE)(processCSFFile);\n    this.prepareStoryWithCache = memoize(STORY_CACHE_SIZE)(prepareStory); // We cannot call `loadStory()` until we've been initialized properly. But we can wait for it.\n\n    this.initializationPromise = new SynchronousPromise(function (resolve) {\n      _this.resolveInitializationPromise = resolve;\n    });\n  }\n\n  _createClass(StoryStore, [{\n    key: \"setProjectAnnotations\",\n    value: function setProjectAnnotations(projectAnnotations) {\n      // By changing `this.projectAnnotations, we implicitly invalidate the `prepareStoryWithCache`\n      this.projectAnnotations = normalizeProjectAnnotations(projectAnnotations);\n      var globals = projectAnnotations.globals,\n          globalTypes = projectAnnotations.globalTypes;\n      this.globals.set({\n        globals: globals,\n        globalTypes: globalTypes\n      });\n    }\n  }, {\n    key: \"initialize\",\n    value: function initialize(_ref) {\n      var storyIndex = _ref.storyIndex,\n          importFn = _ref.importFn,\n          _ref$cache = _ref.cache,\n          cache = _ref$cache === void 0 ? false : _ref$cache;\n      this.storyIndex = new StoryIndexStore(storyIndex);\n      this.importFn = importFn; // We don't need the cache to be loaded to call `loadStory`, we just need the index ready\n\n      this.resolveInitializationPromise();\n      return cache ? this.cacheAllCSFFiles() : SynchronousPromise.resolve();\n    } // This means that one of the CSF files has changed.\n    // If the `importFn` has changed, we will invalidate both caches.\n    // If the `storyIndex` data has changed, we may or may not invalidate the caches, depending\n    // on whether we've loaded the relevant files yet.\n\n  }, {\n    key: \"onStoriesChanged\",\n    value: function () {\n      var _onStoriesChanged = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(_ref2) {\n        var importFn, storyIndex;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                importFn = _ref2.importFn, storyIndex = _ref2.storyIndex;\n                if (importFn) this.importFn = importFn;\n                if (storyIndex) this.storyIndex.stories = storyIndex.stories;\n\n                if (!this.cachedCSFFiles) {\n                  _context.next = 6;\n                  break;\n                }\n\n                _context.next = 6;\n                return this.cacheAllCSFFiles();\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function onStoriesChanged(_x) {\n        return _onStoriesChanged.apply(this, arguments);\n      }\n\n      return onStoriesChanged;\n    }() // To load a single CSF file to service a story we need to look up the importPath in the index\n\n  }, {\n    key: \"loadCSFFileByStoryId\",\n    value: function loadCSFFileByStoryId(storyId) {\n      var _this2 = this;\n\n      var _this$storyIndex$stor = this.storyIndex.storyIdToEntry(storyId),\n          importPath = _this$storyIndex$stor.importPath,\n          title = _this$storyIndex$stor.title;\n\n      return this.importFn(importPath).then(function (moduleExports) {\n        return (// We pass the title in here as it may have been generated by autoTitle on the server.\n          _this2.processCSFFileWithCache(moduleExports, importPath, title)\n        );\n      });\n    }\n  }, {\n    key: \"loadAllCSFFiles\",\n    value: function loadAllCSFFiles() {\n      var _this3 = this;\n\n      var importPaths = {};\n      Object.entries(this.storyIndex.stories).forEach(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            storyId = _ref4[0],\n            importPath = _ref4[1].importPath;\n\n        importPaths[importPath] = storyId;\n      });\n      var csfFilePromiseList = Object.entries(importPaths).map(function (_ref5) {\n        var _ref6 = _slicedToArray(_ref5, 2),\n            importPath = _ref6[0],\n            storyId = _ref6[1];\n\n        return _this3.loadCSFFileByStoryId(storyId).then(function (csfFile) {\n          return {\n            importPath: importPath,\n            csfFile: csfFile\n          };\n        });\n      });\n      return SynchronousPromise.all(csfFilePromiseList).then(function (list) {\n        return list.reduce(function (acc, _ref7) {\n          var importPath = _ref7.importPath,\n              csfFile = _ref7.csfFile;\n          acc[importPath] = csfFile;\n          return acc;\n        }, {});\n      });\n    }\n  }, {\n    key: \"cacheAllCSFFiles\",\n    value: function cacheAllCSFFiles() {\n      var _this4 = this;\n\n      return this.initializationPromise.then(function () {\n        return _this4.loadAllCSFFiles().then(function (csfFiles) {\n          _this4.cachedCSFFiles = csfFiles;\n        });\n      });\n    } // Load the CSF file for a story and prepare the story from it and the project annotations.\n\n  }, {\n    key: \"loadStory\",\n    value: function () {\n      var _loadStory = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(_ref8) {\n        var storyId, csfFile;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                storyId = _ref8.storyId;\n                _context2.next = 3;\n                return this.initializationPromise;\n\n              case 3:\n                _context2.next = 5;\n                return this.loadCSFFileByStoryId(storyId);\n\n              case 5:\n                csfFile = _context2.sent;\n                return _context2.abrupt(\"return\", this.storyFromCSFFile({\n                  storyId: storyId,\n                  csfFile: csfFile\n                }));\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function loadStory(_x2) {\n        return _loadStory.apply(this, arguments);\n      }\n\n      return loadStory;\n    }() // This function is synchronous for convenience -- often times if you have a CSF file already\n    // it is easier not to have to await `loadStory`.\n\n  }, {\n    key: \"storyFromCSFFile\",\n    value: function storyFromCSFFile(_ref9) {\n      var storyId = _ref9.storyId,\n          csfFile = _ref9.csfFile;\n      var storyAnnotations = csfFile.stories[storyId];\n\n      if (!storyAnnotations) {\n        throw new Error(\"Didn't find '\".concat(storyId, \"' in CSF file, this is unexpected\"));\n      }\n\n      var componentAnnotations = csfFile.meta;\n      var story = this.prepareStoryWithCache(storyAnnotations, componentAnnotations, this.projectAnnotations);\n      this.args.setInitial(story);\n      this.hooks[story.id] = this.hooks[story.id] || new HooksContext();\n      return story;\n    } // If we have a CSF file we can get all the stories from it synchronously\n\n  }, {\n    key: \"componentStoriesFromCSFFile\",\n    value: function componentStoriesFromCSFFile(_ref10) {\n      var _this5 = this;\n\n      var csfFile = _ref10.csfFile;\n      return Object.keys(this.storyIndex.stories).filter(function (storyId) {\n        return !!csfFile.stories[storyId];\n      }).map(function (storyId) {\n        return _this5.storyFromCSFFile({\n          storyId: storyId,\n          csfFile: csfFile\n        });\n      });\n    } // A prepared story does not include args, globals or hooks. These are stored in the story store\n    // and updated separtely to the (immutable) story.\n\n  }, {\n    key: \"getStoryContext\",\n    value: function getStoryContext(story) {\n      return Object.assign({}, story, {\n        args: this.args.get(story.id),\n        globals: this.globals.get(),\n        hooks: this.hooks[story.id]\n      });\n    }\n  }, {\n    key: \"cleanupStory\",\n    value: function cleanupStory(story) {\n      this.hooks[story.id].clean();\n    }\n  }, {\n    key: \"extract\",\n    value: function extract() {\n      var _this6 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        includeDocsOnly: false\n      };\n\n      if (!this.cachedCSFFiles) {\n        throw new Error('Cannot call extract() unless you call cacheAllCSFFiles() first.');\n      }\n\n      return Object.entries(this.storyIndex.stories).reduce(function (acc, _ref11) {\n        var _ref12 = _slicedToArray(_ref11, 2),\n            storyId = _ref12[0],\n            importPath = _ref12[1].importPath;\n\n        var csfFile = _this6.cachedCSFFiles[importPath];\n\n        var story = _this6.storyFromCSFFile({\n          storyId: storyId,\n          csfFile: csfFile\n        });\n\n        if (!options.includeDocsOnly && story.parameters.docsOnly) {\n          return acc;\n        }\n\n        acc[storyId] = Object.entries(story).reduce(function (storyAcc, _ref13) {\n          var _ref14 = _slicedToArray(_ref13, 2),\n              key = _ref14[0],\n              value = _ref14[1];\n\n          if (typeof value === 'function') {\n            return storyAcc;\n          }\n\n          if (Array.isArray(value)) {\n            return Object.assign(storyAcc, _defineProperty({}, key, value.slice().sort()));\n          }\n\n          return Object.assign(storyAcc, _defineProperty({}, key, value));\n        }, {\n          args: story.initialArgs\n        });\n        return acc;\n      }, {});\n    }\n  }, {\n    key: \"getSetStoriesPayload\",\n    value: function getSetStoriesPayload() {\n      var stories = this.extract({\n        includeDocsOnly: true\n      });\n      var kindParameters = Object.values(stories).reduce(function (acc, _ref15) {\n        var title = _ref15.title;\n        acc[title] = {};\n        return acc;\n      }, {});\n      return {\n        v: 2,\n        globals: this.globals.get(),\n        globalParameters: {},\n        kindParameters: kindParameters,\n        stories: stories\n      };\n    }\n  }, {\n    key: \"raw\",\n    value: function raw() {\n      var _this7 = this;\n\n      return Object.values(this.extract()).map(function (_ref16) {\n        var id = _ref16.id;\n        return _this7.fromId(id);\n      });\n    }\n  }, {\n    key: \"fromId\",\n    value: function fromId(storyId) {\n      var _this8 = this;\n\n      if (!this.cachedCSFFiles) {\n        throw new Error('Cannot call fromId/raw() unless you call cacheAllCSFFiles() first.');\n      }\n\n      var importPath;\n\n      try {\n        var _this$storyIndex$stor2 = this.storyIndex.storyIdToEntry(storyId);\n\n        importPath = _this$storyIndex$stor2.importPath;\n      } catch (err) {\n        return null;\n      }\n\n      var csfFile = this.cachedCSFFiles[importPath];\n      var story = this.storyFromCSFFile({\n        storyId: storyId,\n        csfFile: csfFile\n      });\n      return Object.assign({}, story, {\n        storyFn: function storyFn(update) {\n          var context = Object.assign({}, _this8.getStoryContext(story), {\n            viewMode: 'story'\n          });\n          return story.unboundStoryFn(Object.assign({}, context, update));\n        }\n      });\n    }\n  }]);\n\n  return StoryStore;\n}();","'use strict';\nmodule.exports = path => {\n\tconst isExtendedLengthPath = /^\\\\\\\\\\?\\\\/.test(path);\n\tconst hasNonAscii = /[^\\u0000-\\u0080]+/.test(path); // eslint-disable-line no-control-regex\n\n\tif (isExtendedLengthPath || hasNonAscii) {\n\t\treturn path;\n\t}\n\n\treturn path.replace(/\\\\/g, '/');\n};\n","import \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.freeze.js\";\n\nvar _templateObject;\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.constructor.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.string.split.js\";\n\nfunction _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport slash from 'slash';\nimport dedent from 'ts-dedent';\nimport { once } from '@storybook/client-logger'; // FIXME: types duplicated type from `core-common', to be\n// removed when we remove v6 back-compat.\n\nvar stripExtension = function stripExtension(path) {\n  var parts = _toConsumableArray(path);\n\n  var last = parts[parts.length - 1];\n  var dotIndex = last.indexOf('.');\n  var stripped = dotIndex > 0 ? last.substr(0, dotIndex) : last;\n  parts[parts.length - 1] = stripped;\n\n  var _parts = parts,\n      _parts2 = _toArray(_parts),\n      first = _parts2[0],\n      rest = _parts2.slice(1);\n\n  if (first === '') {\n    parts = rest;\n  }\n\n  return parts;\n};\n\nvar indexRe = /^index$/i; // deal with files like \"atoms/button/{button,index}.stories.js\"\n\nvar removeRedundantFilename = function removeRedundantFilename(paths) {\n  var prevVal;\n  return paths.filter(function (val, index) {\n    if (index === paths.length - 1 && (val === prevVal || indexRe.test(val))) {\n      return false;\n    }\n\n    prevVal = val;\n    return true;\n  });\n};\n/**\n * Combines path parts together, without duplicating separators (slashes).  Used instead of `path.join`\n * because this code runs in the browser.\n *\n * @param paths array of paths to join together.\n * @returns joined path string, with single '/' between parts\n */\n\n\nfunction pathJoin(paths) {\n  var slashes = new RegExp('/{1,}', 'g');\n  return paths.join('/').replace(slashes, '/');\n}\n\nexport var userOrAutoTitleFromSpecifier = function userOrAutoTitleFromSpecifier(fileName, entry, userTitle) {\n  var _ref = entry || {},\n      directory = _ref.directory,\n      importPathMatcher = _ref.importPathMatcher,\n      _ref$titlePrefix = _ref.titlePrefix,\n      titlePrefix = _ref$titlePrefix === void 0 ? '' : _ref$titlePrefix; // On Windows, backslashes are used in paths, which can cause problems here\n  // slash makes sure we always handle paths with unix-style forward slash\n\n\n  if (typeof fileName === 'number') {\n    once.warn(dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      CSF Auto-title received a numeric fileName. This typically happens when\\n      webpack is mis-configured in production mode. To force webpack to produce\\n      filenames, set optimization.moduleIds = \\\"named\\\" in your webpack config.\\n    \"]))));\n  }\n\n  var normalizedFileName = slash(String(fileName));\n\n  if (importPathMatcher.exec(normalizedFileName)) {\n    if (!userTitle) {\n      var suffix = normalizedFileName.replace(directory, '');\n      var titleAndSuffix = slash(pathJoin([titlePrefix, suffix]));\n      var path = titleAndSuffix.split('/');\n      path = stripExtension(path);\n      path = removeRedundantFilename(path);\n      return path.join('/');\n    }\n\n    if (!titlePrefix) {\n      return userTitle;\n    }\n\n    return slash(pathJoin([titlePrefix, userTitle]));\n  }\n\n  return undefined;\n};\nexport var userOrAutoTitle = function userOrAutoTitle(fileName, storiesEntries, userTitle) {\n  for (var i = 0; i < storiesEntries.length; i += 1) {\n    var title = userOrAutoTitleFromSpecifier(fileName, storiesEntries[i], userTitle);\n    if (title) return title;\n  }\n\n  return userTitle || undefined;\n};","//! stable.js 0.1.8, https://github.com/Two-Screen/stable\n//!  2018 Angry Bytes and contributors. MIT licensed.\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.stable = factory());\n}(this, (function () { 'use strict';\n\n  // A stable array sort, because `Array#sort()` is not guaranteed stable.\n  // This is an implementation of merge sort, without recursion.\n\n  var stable = function (arr, comp) {\n    return exec(arr.slice(), comp)\n  };\n\n  stable.inplace = function (arr, comp) {\n    var result = exec(arr, comp);\n\n    // This simply copies back if the result isn't in the original array,\n    // which happens on an odd number of passes.\n    if (result !== arr) {\n      pass(result, null, arr.length, arr);\n    }\n\n    return arr\n  };\n\n  // Execute the sort using the input array and a second buffer as work space.\n  // Returns one of those two, containing the final result.\n  function exec(arr, comp) {\n    if (typeof(comp) !== 'function') {\n      comp = function (a, b) {\n        return String(a).localeCompare(b)\n      };\n    }\n\n    // Short-circuit when there's nothing to sort.\n    var len = arr.length;\n    if (len <= 1) {\n      return arr\n    }\n\n    // Rather than dividing input, simply iterate chunks of 1, 2, 4, 8, etc.\n    // Chunks are the size of the left or right hand in merge sort.\n    // Stop when the left-hand covers all of the array.\n    var buffer = new Array(len);\n    for (var chk = 1; chk < len; chk *= 2) {\n      pass(arr, comp, chk, buffer);\n\n      var tmp = arr;\n      arr = buffer;\n      buffer = tmp;\n    }\n\n    return arr\n  }\n\n  // Run a single pass with the given chunk size.\n  var pass = function (arr, comp, chk, result) {\n    var len = arr.length;\n    var i = 0;\n    // Step size / double chunk size.\n    var dbl = chk * 2;\n    // Bounds of the left and right chunks.\n    var l, r, e;\n    // Iterators over the left and right chunk.\n    var li, ri;\n\n    // Iterate over pairs of chunks.\n    for (l = 0; l < len; l += dbl) {\n      r = l + chk;\n      e = r + chk;\n      if (r > len) r = len;\n      if (e > len) e = len;\n\n      // Iterate both chunks in parallel.\n      li = l;\n      ri = r;\n      while (true) {\n        // Compare the chunks.\n        if (li < r && ri < e) {\n          // This works for a regular `sort()` compatible comparator,\n          // but also for a simple comparator like: `a > b`\n          if (comp(arr[li], arr[ri]) <= 0) {\n            result[i++] = arr[li++];\n          }\n          else {\n            result[i++] = arr[ri++];\n          }\n        }\n        // Nothing to compare, just flush what's left.\n        else if (li < r) {\n          result[i++] = arr[li++];\n        }\n        else if (ri < e) {\n          result[i++] = arr[ri++];\n        }\n        // Both iterators are at the chunk ends.\n        else {\n          break\n        }\n      }\n    }\n  };\n\n  return stable;\n\n})));\n","import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport \"core-js/modules/es.function.name.js\";\nvar STORY_KIND_PATH_SEPARATOR = /\\s*\\/\\s*/;\nexport var storySort = function storySort() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return function (a, b) {\n    // If the two stories have the same story kind, then use the default\n    // ordering, which is the order they are defined in the story file.\n    // only when includeNames is falsy\n    if (a.title === b.title && !options.includeNames) {\n      return 0;\n    } // Get the StorySortParameter options.\n\n\n    var method = options.method || 'configure';\n    var order = options.order || []; // Examine each part of the story title in turn.\n\n    var storyTitleA = a.title.trim().split(STORY_KIND_PATH_SEPARATOR);\n    var storyTitleB = b.title.trim().split(STORY_KIND_PATH_SEPARATOR);\n\n    if (options.includeNames) {\n      storyTitleA.push(a.name);\n      storyTitleB.push(b.name);\n    }\n\n    var depth = 0;\n\n    while (storyTitleA[depth] || storyTitleB[depth]) {\n      // Stories with a shorter depth should go first.\n      if (!storyTitleA[depth]) {\n        return -1;\n      }\n\n      if (!storyTitleB[depth]) {\n        return 1;\n      } // Compare the next part of the story title.\n\n\n      var nameA = storyTitleA[depth];\n      var nameB = storyTitleB[depth];\n\n      if (nameA !== nameB) {\n        // Look for the names in the given `order` array.\n        var indexA = order.indexOf(nameA);\n        var indexB = order.indexOf(nameB);\n        var indexWildcard = order.indexOf('*'); // If at least one of the names is found, sort by the `order` array.\n\n        if (indexA !== -1 || indexB !== -1) {\n          // If one of the names is not found and there is a wildcard, insert it at the wildcard position.\n          // Otherwise, list it last.\n          if (indexA === -1) {\n            if (indexWildcard !== -1) {\n              indexA = indexWildcard;\n            } else {\n              indexA = order.length;\n            }\n          }\n\n          if (indexB === -1) {\n            if (indexWildcard !== -1) {\n              indexB = indexWildcard;\n            } else {\n              indexB = order.length;\n            }\n          }\n\n          return indexA - indexB;\n        } // Use the default configure() order.\n\n\n        if (method === 'configure') {\n          return 0;\n        } // Otherwise, use alphabetical order.\n\n\n        return nameA.localeCompare(nameB, options.locales ? options.locales : undefined, {\n          numeric: true,\n          sensitivity: 'accent'\n        });\n      } // If a nested array is provided for a name, use it for ordering.\n\n\n      var index = order.indexOf(nameA);\n      order = index !== -1 && Array.isArray(order[index + 1]) ? order[index + 1] : []; // We'll need to look at the next part of the name.\n\n      depth += 1;\n    } // Identical story titles. The shortcut at the start of this function prevents\n    // this from ever being used.\n\n    /* istanbul ignore next */\n\n\n    return 0;\n  };\n};","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.freeze.js\";\n\nvar _templateObject;\n\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.map.js\";\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport stable from 'stable';\nimport dedent from 'ts-dedent';\nimport { storySort } from './storySort';\n\nvar sortStoriesCommon = function sortStoriesCommon(stories, storySortParameter, fileNameOrder) {\n  if (storySortParameter) {\n    var sortFn;\n\n    if (typeof storySortParameter === 'function') {\n      sortFn = storySortParameter;\n    } else {\n      sortFn = storySort(storySortParameter);\n    }\n\n    stable.inplace(stories, sortFn);\n  } else {\n    stable.inplace(stories, function (s1, s2) {\n      return fileNameOrder.indexOf(s1.importPath) - fileNameOrder.indexOf(s2.importPath);\n    });\n  }\n\n  return stories;\n};\n\nexport var sortStoriesV7 = function sortStoriesV7(stories, storySortParameter, fileNameOrder) {\n  try {\n    return sortStoriesCommon(stories, storySortParameter, fileNameOrder);\n  } catch (err) {\n    throw new Error(dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    Error sorting stories with sort parameter \", \":\\n\\n    > \", \"\\n    \\n    Are you using a V6-style sort function in V7 mode?\\n\\n    More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#v7-style-story-sort\\n  \"])), storySortParameter, err.message));\n  }\n};\n\nvar toIndexEntry = function toIndexEntry(story) {\n  var id = story.id,\n      title = story.title,\n      name = story.name,\n      parameters = story.parameters;\n  return {\n    id: id,\n    title: title,\n    name: name,\n    importPath: parameters.fileName\n  };\n};\n\nexport var sortStoriesV6 = function sortStoriesV6(stories, storySortParameter, fileNameOrder) {\n  if (storySortParameter && typeof storySortParameter === 'function') {\n    stable.inplace(stories, storySortParameter);\n    return stories.map(function (s) {\n      return toIndexEntry(s[1]);\n    });\n  }\n\n  var storiesV7 = stories.map(function (s) {\n    return toIndexEntry(s[1]);\n  });\n  return sortStoriesCommon(storiesV7, storySortParameter, fileNameOrder);\n};","import \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.object.freeze.js\";\nvar _excluded = [\"default\", \"__namedExportsOrder\"];\n\nvar _templateObject;\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.regexp.constructor.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.function.name.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport global from 'global';\nimport dedent from 'ts-dedent';\nimport { SynchronousPromise } from 'synchronous-promise';\nimport { toId, isExportStory, storyNameFromExport } from '@storybook/csf';\nimport { userOrAutoTitle, sortStoriesV6 } from '@storybook/store';\nimport { logger } from '@storybook/client-logger';\nexport var StoryStoreFacade = /*#__PURE__*/function () {\n  function StoryStoreFacade() {\n    _classCallCheck(this, StoryStoreFacade);\n\n    this.projectAnnotations = void 0;\n    this.stories = void 0;\n    this.csfExports = void 0;\n    this.projectAnnotations = {\n      loaders: [],\n      decorators: [],\n      parameters: {},\n      argsEnhancers: [],\n      argTypesEnhancers: [],\n      args: {},\n      argTypes: {}\n    };\n    this.stories = {};\n    this.csfExports = {};\n  } // This doesn't actually import anything because the client-api loads fully\n  // on startup, but this is a shim after all.\n\n\n  _createClass(StoryStoreFacade, [{\n    key: \"importFn\",\n    value: function importFn(path) {\n      var _this = this;\n\n      return SynchronousPromise.resolve().then(function () {\n        var moduleExports = _this.csfExports[path];\n        if (!moduleExports) throw new Error(\"Unknown path: \".concat(path));\n        return moduleExports;\n      });\n    }\n  }, {\n    key: \"getStoryIndex\",\n    value: function getStoryIndex(store) {\n      var _this$projectAnnotati,\n          _this$projectAnnotati2,\n          _this2 = this;\n\n      var fileNameOrder = Object.keys(this.csfExports);\n      var storySortParameter = (_this$projectAnnotati = this.projectAnnotations.parameters) === null || _this$projectAnnotati === void 0 ? void 0 : (_this$projectAnnotati2 = _this$projectAnnotati.options) === null || _this$projectAnnotati2 === void 0 ? void 0 : _this$projectAnnotati2.storySort;\n      var storyEntries = Object.entries(this.stories); // Add the kind parameters and global parameters to each entry\n\n      var sortableV6 = storyEntries.map(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            storyId = _ref2[0],\n            importPath = _ref2[1].importPath;\n\n        var exports = _this2.csfExports[importPath];\n        var csfFile = store.processCSFFileWithCache(exports, importPath, exports.default.title);\n        return [storyId, store.storyFromCSFFile({\n          storyId: storyId,\n          csfFile: csfFile\n        }), csfFile.meta.parameters, _this2.projectAnnotations.parameters];\n      }); // NOTE: the sortStoriesV6 version returns the v7 data format. confusing but more convenient!\n\n      var sortedV7;\n\n      try {\n        sortedV7 = sortStoriesV6(sortableV6, storySortParameter, fileNameOrder);\n      } catch (err) {\n        if (typeof storySortParameter === 'function') {\n          throw new Error(dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n          Error sorting stories with sort parameter \", \":\\n\\n          > \", \"\\n          \\n          Are you using a V7-style sort function in V6 compatibility mode?\\n          \\n          More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#v7-style-story-sort\\n        \"])), storySortParameter, err.message));\n        }\n\n        throw err;\n      }\n\n      var stories = sortedV7.reduce(function (acc, s) {\n        // We use the original entry we stored in `this.stories` because it is possible that the CSF file itself\n        // exports a `parameters.fileName` which can be different and mess up our `importFn`.\n        // In fact, in Storyshots there is a Jest transformer that does exactly that.\n        // NOTE: this doesn't actually change the story object, just the index.\n        acc[s.id] = _this2.stories[s.id];\n        return acc;\n      }, {});\n      return {\n        v: 3,\n        stories: stories\n      };\n    }\n  }, {\n    key: \"clearFilenameExports\",\n    value: function clearFilenameExports(fileName) {\n      var _this3 = this;\n\n      if (!this.csfExports[fileName]) {\n        return;\n      } // Clear this module's stories from the storyList and existing exports\n\n\n      Object.entries(this.stories).forEach(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            id = _ref4[0],\n            importPath = _ref4[1].importPath;\n\n        if (importPath === fileName) {\n          delete _this3.stories[id];\n        }\n      }); // We keep this as an empty record so we can use it to maintain component order\n\n      this.csfExports[fileName] = {};\n    } // NOTE: we could potentially share some of this code with the stories.json generation\n\n  }, {\n    key: \"addStoriesFromExports\",\n    value: function addStoriesFromExports(fileName, fileExports) {\n      var _this4 = this;\n\n      // if the export haven't changed since last time we added them, this is a no-op\n      if (this.csfExports[fileName] === fileExports) {\n        return;\n      } // OTOH, if they have changed, let's clear them out first\n\n\n      this.clearFilenameExports(fileName);\n\n      var defaultExport = fileExports.default,\n          __namedExportsOrder = fileExports.__namedExportsOrder,\n          namedExports = _objectWithoutProperties(fileExports, _excluded); // eslint-disable-next-line prefer-const\n\n\n      var _ref5 = defaultExport || {},\n          componentId = _ref5.id,\n          title = _ref5.title;\n\n      var specifiers = (global.STORIES || []).map(function (specifier) {\n        return Object.assign({}, specifier, {\n          importPathMatcher: new RegExp(specifier.importPathMatcher)\n        });\n      });\n      title = userOrAutoTitle(fileName, specifiers, title);\n\n      if (!title) {\n        logger.info(\"Unexpected default export without title in '\".concat(fileName, \"': \").concat(JSON.stringify(fileExports.default)));\n        return;\n      }\n\n      this.csfExports[fileName] = Object.assign({}, fileExports, {\n        default: Object.assign({}, defaultExport, {\n          title: title\n        })\n      });\n      var sortedExports = namedExports; // prefer a user/loader provided `__namedExportsOrder` array if supplied\n      // we do this as es module exports are always ordered alphabetically\n      // see https://github.com/storybookjs/storybook/issues/9136\n\n      if (Array.isArray(__namedExportsOrder)) {\n        sortedExports = {};\n\n        __namedExportsOrder.forEach(function (name) {\n          var namedExport = namedExports[name];\n          if (namedExport) sortedExports[name] = namedExport;\n        });\n      }\n\n      Object.entries(sortedExports).filter(function (_ref6) {\n        var _ref7 = _slicedToArray(_ref6, 1),\n            key = _ref7[0];\n\n        return isExportStory(key, defaultExport);\n      }).forEach(function (_ref8) {\n        var _storyExport$paramete, _storyExport$story;\n\n        var _ref9 = _slicedToArray(_ref8, 2),\n            key = _ref9[0],\n            storyExport = _ref9[1];\n\n        var exportName = storyNameFromExport(key);\n        var id = ((_storyExport$paramete = storyExport.parameters) === null || _storyExport$paramete === void 0 ? void 0 : _storyExport$paramete.__id) || toId(componentId || title, exportName);\n        var name = typeof storyExport !== 'function' && storyExport.name || storyExport.storyName || ((_storyExport$story = storyExport.story) === null || _storyExport$story === void 0 ? void 0 : _storyExport$story.name) || exportName;\n        _this4.stories[id] = {\n          id: id,\n          name: name,\n          title: title,\n          importPath: fileName\n        };\n      });\n    }\n  }]);\n\n  return StoryStoreFacade;\n}();","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.freeze.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nvar _excluded = [\"globals\", \"globalTypes\"],\n    _excluded2 = [\"decorators\", \"loaders\", \"component\", \"args\", \"argTypes\"],\n    _excluded3 = [\"component\", \"args\", \"argTypes\"];\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4;\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.get-prototype-of.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.values.js\";\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport deprecate from 'util-deprecate';\nimport dedent from 'ts-dedent';\nimport global from 'global';\nimport { logger } from '@storybook/client-logger';\nimport { toId, sanitize } from '@storybook/csf';\nimport { combineParameters, normalizeInputTypes } from '@storybook/store';\nimport { StoryStoreFacade } from './StoryStoreFacade';\n// ClientApi (and StoreStore) are really singletons. However they are not created until the\n// relevant framework instanciates them via `start.js`. The good news is this happens right away.\nvar singleton;\nvar warningAlternatives = {\n  addDecorator: \"Instead, use `export const decorators = [];` in your `preview.js`.\",\n  addParameters: \"Instead, use `export const parameters = {};` in your `preview.js`.\",\n  addLoaders: \"Instead, use `export const loaders = [];` in your `preview.js`.\"\n};\n\nvar warningMessage = function warningMessage(method) {\n  return deprecate(function () {}, dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  `\", \"` is deprecated, and will be removed in Storybook 7.0.\\n\\n  \", \"\\n\\n  Read more at https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-addparameters-and-adddecorator).\"], [\"\\n  \\\\`\", \"\\\\` is deprecated, and will be removed in Storybook 7.0.\\n\\n  \", \"\\n\\n  Read more at https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-addparameters-and-adddecorator).\"])), method, warningAlternatives[method]));\n};\n\nvar warnings = {\n  addDecorator: warningMessage('addDecorator'),\n  addParameters: warningMessage('addParameters'),\n  addLoaders: warningMessage('addLoaders')\n};\n\nvar checkMethod = function checkMethod(method, deprecationWarning) {\n  var _global$FEATURES;\n\n  if ((_global$FEATURES = global.FEATURES) !== null && _global$FEATURES !== void 0 && _global$FEATURES.storyStoreV7) {\n    throw new Error(dedent(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"You cannot use `\", \"` with the new Story Store.\\n      \\n      \", \"\"], [\"You cannot use \\\\`\", \"\\\\` with the new Story Store.\\n      \\n      \", \"\"])), method, warningAlternatives[method]));\n  }\n\n  if (!singleton) {\n    throw new Error(\"Singleton client API not yet initialized, cannot call `\".concat(method, \"`.\"));\n  }\n\n  if (deprecationWarning) {\n    warnings[method]();\n  }\n};\n\nexport var addDecorator = function addDecorator(decorator) {\n  var deprecationWarning = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  checkMethod('addDecorator', deprecationWarning);\n  singleton.addDecorator(decorator);\n};\nexport var addParameters = function addParameters(parameters) {\n  var deprecationWarning = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  checkMethod('addParameters', deprecationWarning);\n  singleton.addParameters(parameters);\n};\nexport var addLoader = function addLoader(loader) {\n  var deprecationWarning = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  checkMethod('addLoader', deprecationWarning);\n  singleton.addLoader(loader);\n};\nexport var addArgs = function addArgs(args) {\n  checkMethod('addArgs', false);\n  singleton.addArgs(args);\n};\nexport var addArgTypes = function addArgTypes(argTypes) {\n  checkMethod('addArgTypes', false);\n  singleton.addArgTypes(argTypes);\n};\nexport var addArgsEnhancer = function addArgsEnhancer(enhancer) {\n  checkMethod('addArgsEnhancer', false);\n  singleton.addArgsEnhancer(enhancer);\n};\nexport var addArgTypesEnhancer = function addArgTypesEnhancer(enhancer) {\n  checkMethod('addArgTypesEnhancer', false);\n  singleton.addArgTypesEnhancer(enhancer);\n};\nexport var getGlobalRender = function getGlobalRender() {\n  checkMethod('getGlobalRender', false);\n  return singleton.facade.projectAnnotations.render;\n};\nexport var setGlobalRender = function setGlobalRender(render) {\n  checkMethod('setGlobalRender', false);\n  singleton.facade.projectAnnotations.render = render;\n};\nvar invalidStoryTypes = new Set(['string', 'number', 'boolean', 'symbol']);\nexport var ClientApi = /*#__PURE__*/function () {\n  // If we don't get passed modules so don't know filenames, we can\n  // just use numeric indexes\n  function ClientApi() {\n    var _this = this;\n\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        storyStore = _ref.storyStore;\n\n    _classCallCheck(this, ClientApi);\n\n    this.facade = void 0;\n    this.storyStore = void 0;\n    this.addons = void 0;\n    this.onImportFnChanged = void 0;\n    this.lastFileName = 0;\n    this.setAddon = deprecate(function (addon) {\n      _this.addons = Object.assign({}, _this.addons, addon);\n    }, dedent(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n      `setAddon` is deprecated and will be removed in Storybook 7.0.\\n\\n      https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-setaddon\\n    \"], [\"\\n      \\\\`setAddon\\\\` is deprecated and will be removed in Storybook 7.0.\\n\\n      https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-setaddon\\n    \"]))));\n\n    this.addDecorator = function (decorator) {\n      _this.facade.projectAnnotations.decorators.push(decorator);\n    };\n\n    this.clearDecorators = deprecate(function () {\n      _this.facade.projectAnnotations.decorators = [];\n    }, dedent(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n      `clearDecorators` is deprecated and will be removed in Storybook 7.0.\\n\\n      https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-cleardecorators\\n    \"], [\"\\n      \\\\`clearDecorators\\\\` is deprecated and will be removed in Storybook 7.0.\\n\\n      https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-cleardecorators\\n    \"]))));\n\n    this.addParameters = function (_ref2) {\n      var globals = _ref2.globals,\n          globalTypes = _ref2.globalTypes,\n          parameters = _objectWithoutProperties(_ref2, _excluded);\n\n      _this.facade.projectAnnotations.parameters = combineParameters(_this.facade.projectAnnotations.parameters, parameters);\n\n      if (globals) {\n        _this.facade.projectAnnotations.globals = Object.assign({}, _this.facade.projectAnnotations.globals, globals);\n      }\n\n      if (globalTypes) {\n        _this.facade.projectAnnotations.globalTypes = Object.assign({}, _this.facade.projectAnnotations.globalTypes, normalizeInputTypes(globalTypes));\n      }\n    };\n\n    this.addLoader = function (loader) {\n      _this.facade.projectAnnotations.loaders.push(loader);\n    };\n\n    this.addArgs = function (args) {\n      _this.facade.projectAnnotations.args = Object.assign({}, _this.facade.projectAnnotations.args, args);\n    };\n\n    this.addArgTypes = function (argTypes) {\n      _this.facade.projectAnnotations.argTypes = Object.assign({}, _this.facade.projectAnnotations.argTypes, normalizeInputTypes(argTypes));\n    };\n\n    this.addArgsEnhancer = function (enhancer) {\n      _this.facade.projectAnnotations.argsEnhancers.push(enhancer);\n    };\n\n    this.addArgTypesEnhancer = function (enhancer) {\n      _this.facade.projectAnnotations.argTypesEnhancers.push(enhancer);\n    };\n\n    this.storiesOf = function (kind, m) {\n      if (!kind && typeof kind !== 'string') {\n        throw new Error('Invalid or missing kind provided for stories, should be a string');\n      }\n\n      if (!m) {\n        logger.warn(\"Missing 'module' parameter for story with a kind of '\".concat(kind, \"'. It will break your HMR\"));\n      }\n\n      if (m) {\n        var proto = Object.getPrototypeOf(m);\n\n        if (proto.exports && proto.exports.default) {\n          // FIXME: throw an error in SB6.0\n          logger.error(\"Illegal mix of CSF default export and storiesOf calls in a single file: \".concat(proto.i));\n        }\n      } // eslint-disable-next-line no-plusplus\n\n\n      var baseFilename = m && m.id ? \"\".concat(m.id) : (_this.lastFileName++).toString();\n      var fileName = baseFilename;\n      var i = 1; // Deal with `storiesOf()` being called twice in the same file.\n      // On HMR, `this.csfExports[fileName]` will be reset to `{}`, so an empty object is due\n      // to this export, not a second call of `storiesOf()`.\n\n      while (_this.facade.csfExports[fileName] && Object.keys(_this.facade.csfExports[fileName]).length > 0) {\n        i += 1;\n        fileName = \"\".concat(baseFilename, \"-\").concat(i);\n      }\n\n      if (m && m.hot && m.hot.accept) {\n        // This module used storiesOf(), so when it re-runs on HMR, it will reload\n        // itself automatically without us needing to look at our imports\n        m.hot.accept();\n        m.hot.dispose(function () {\n          _this.facade.clearFilenameExports(fileName); // We need to update the importFn as soon as the module re-evaluates\n          // (and calls storiesOf() again, etc). We could call `onImportFnChanged()`\n          // at the end of every setStories call (somehow), but then we'd need to\n          // debounce it somehow for initial startup. Instead, we'll take advantage of\n          // the fact that the evaluation of the module happens immediately in the same tick\n\n\n          setTimeout(function () {\n            var _this$onImportFnChang;\n\n            (_this$onImportFnChang = _this.onImportFnChanged) === null || _this$onImportFnChang === void 0 ? void 0 : _this$onImportFnChang.call(_this, {\n              importFn: _this.importFn.bind(_this)\n            });\n          }, 0);\n        });\n      }\n\n      var hasAdded = false;\n      var api = {\n        kind: kind.toString(),\n        add: function add() {\n          return api;\n        },\n        addDecorator: function addDecorator() {\n          return api;\n        },\n        addLoader: function addLoader() {\n          return api;\n        },\n        addParameters: function addParameters() {\n          return api;\n        }\n      }; // apply addons\n\n      Object.keys(_this.addons).forEach(function (name) {\n        var addon = _this.addons[name];\n\n        api[name] = function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          addon.apply(api, args);\n          return api;\n        };\n      });\n      var meta = {\n        id: sanitize(kind),\n        title: kind,\n        decorators: [],\n        loaders: [],\n        parameters: {}\n      }; // We map these back to a simple default export, even though we have type guarantees at this point\n\n      _this.facade.csfExports[fileName] = {\n        default: meta\n      };\n      var counter = 0;\n\n      api.add = function (storyName, storyFn) {\n        var parameters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        hasAdded = true;\n\n        if (typeof storyName !== 'string') {\n          throw new Error(\"Invalid or missing storyName provided for a \\\"\".concat(kind, \"\\\" story.\"));\n        }\n\n        if (!storyFn || Array.isArray(storyFn) || invalidStoryTypes.has(_typeof(storyFn))) {\n          throw new Error(\"Cannot load story \\\"\".concat(storyName, \"\\\" in \\\"\").concat(kind, \"\\\" due to invalid format. Storybook expected a function/object but received \").concat(_typeof(storyFn), \" instead.\"));\n        }\n\n        var decorators = parameters.decorators,\n            loaders = parameters.loaders,\n            component = parameters.component,\n            args = parameters.args,\n            argTypes = parameters.argTypes,\n            storyParameters = _objectWithoutProperties(parameters, _excluded2); // eslint-disable-next-line no-underscore-dangle\n\n\n        var storyId = parameters.__id || toId(kind, storyName);\n        var csfExports = _this.facade.csfExports[fileName]; // Whack a _ on the front incase it is \"default\"\n\n        csfExports[\"story\".concat(counter)] = {\n          name: storyName,\n          parameters: Object.assign({\n            fileName: fileName,\n            __id: storyId\n          }, storyParameters),\n          decorators: decorators,\n          loaders: loaders,\n          args: args,\n          argTypes: argTypes,\n          component: component,\n          render: storyFn\n        };\n        counter += 1;\n        _this.facade.stories[storyId] = {\n          id: storyId,\n          title: csfExports.default.title,\n          name: storyName,\n          importPath: fileName\n        };\n        return api;\n      };\n\n      api.addDecorator = function (decorator) {\n        if (hasAdded) throw new Error(\"You cannot add a decorator after the first story for a kind.\\nRead more here: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md#can-no-longer-add-decoratorsparameters-after-stories\");\n        meta.decorators.push(decorator);\n        return api;\n      };\n\n      api.addLoader = function (loader) {\n        if (hasAdded) throw new Error(\"You cannot add a loader after the first story for a kind.\");\n        meta.loaders.push(loader);\n        return api;\n      };\n\n      api.addParameters = function (_ref3) {\n        var component = _ref3.component,\n            args = _ref3.args,\n            argTypes = _ref3.argTypes,\n            parameters = _objectWithoutProperties(_ref3, _excluded3);\n\n        if (hasAdded) throw new Error(\"You cannot add parameters after the first story for a kind.\\nRead more here: https://github.com/storybookjs/storybook/blob/master/MIGRATION.md#can-no-longer-add-decoratorsparameters-after-stories\");\n        meta.parameters = combineParameters(meta.parameters, parameters);\n        if (component) meta.component = component;\n        if (args) meta.args = Object.assign({}, meta.args, args);\n        if (argTypes) meta.argTypes = Object.assign({}, meta.argTypes, argTypes);\n        return api;\n      };\n\n      return api;\n    };\n\n    this.getStorybook = function () {\n      var stories = _this.storyStore.storyIndex.stories;\n      var kinds = {};\n      Object.entries(stories).forEach(function (_ref4) {\n        var _ref5 = _slicedToArray(_ref4, 2),\n            storyId = _ref5[0],\n            _ref5$ = _ref5[1],\n            title = _ref5$.title,\n            name = _ref5$.name,\n            importPath = _ref5$.importPath;\n\n        if (!kinds[title]) {\n          kinds[title] = {\n            kind: title,\n            fileName: importPath,\n            stories: []\n          };\n        }\n\n        var _this$storyStore$from = _this.storyStore.fromId(storyId),\n            storyFn = _this$storyStore$from.storyFn;\n\n        kinds[title].stories.push({\n          name: name,\n          render: storyFn\n        });\n      });\n      return Object.values(kinds);\n    };\n\n    this.raw = function () {\n      return _this.storyStore.raw();\n    };\n\n    this.facade = new StoryStoreFacade();\n    this.addons = {};\n    this.storyStore = storyStore;\n    singleton = this;\n  }\n\n  _createClass(ClientApi, [{\n    key: \"importFn\",\n    value: function importFn(path) {\n      return this.facade.importFn(path);\n    }\n  }, {\n    key: \"getStoryIndex\",\n    value: function getStoryIndex() {\n      if (!this.storyStore) {\n        throw new Error('Cannot get story index before setting storyStore');\n      }\n\n      return this.facade.getStoryIndex(this.storyStore);\n    }\n  }, {\n    key: \"_storyStore\",\n    get: // @deprecated\n    function get() {\n      return this.storyStore;\n    }\n  }]);\n\n  return ClientApi;\n}();","'use strict';\n\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (sym in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\tvar descriptor = Object.getOwnPropertyDescriptor(obj, sym);\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = require('./shams');\n\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar slice = Array.prototype.slice;\nvar toStr = Object.prototype.toString;\nvar funcType = '[object Function]';\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.call(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slice.call(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                args.concat(slice.call(arguments))\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        } else {\n            return target.apply(\n                that,\n                args.concat(slice.call(arguments))\n            );\n        }\n    };\n\n    var boundLength = Math.max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs.push('$' + i);\n    }\n\n    bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\nvar bind = require('function-bind');\n\nmodule.exports = bind.call(Function.call, Object.prototype.hasOwnProperty);\n","'use strict';\n\nvar undefined;\n\nvar $SyntaxError = SyntaxError;\nvar $Function = Function;\nvar $TypeError = TypeError;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = Object.getOwnPropertyDescriptor;\nif ($gOPD) {\n\ttry {\n\t\t$gOPD({}, '');\n\t} catch (e) {\n\t\t$gOPD = null; // this is IE 8, which has a broken gOPD\n\t}\n}\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\n\nvar getProto = Object.getPrototypeOf || function (x) { return x.__proto__; }; // eslint-disable-line no-proto\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': EvalError,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': Object,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': RangeError,\n\t'%ReferenceError%': ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet\n};\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('has');\nvar $concat = bind.call(Function.call, Array.prototype.concat);\nvar $spliceApply = bind.call(Function.apply, Array.prototype.splice);\nvar $replace = bind.call(Function.call, String.prototype.replace);\nvar $strSlice = bind.call(Function.call, String.prototype.slice);\nvar $exec = bind.call(Function.call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/g, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\nvar bind = require('function-bind');\nvar GetIntrinsic = require('get-intrinsic');\n\nvar $apply = GetIntrinsic('%Function.prototype.apply%');\nvar $call = GetIntrinsic('%Function.prototype.call%');\nvar $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);\n\nvar $gOPD = GetIntrinsic('%Object.getOwnPropertyDescriptor%', true);\nvar $defineProperty = GetIntrinsic('%Object.defineProperty%', true);\nvar $max = GetIntrinsic('%Math.max%');\n\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = null;\n\t}\n}\n\nmodule.exports = function callBind(originalFunction) {\n\tvar func = $reflectApply(bind, $call, arguments);\n\tif ($gOPD && $defineProperty) {\n\t\tvar desc = $gOPD(func, 'length');\n\t\tif (desc.configurable) {\n\t\t\t// original length, plus the receiver, minus any additional arguments (after the receiver)\n\t\t\t$defineProperty(\n\t\t\t\tfunc,\n\t\t\t\t'length',\n\t\t\t\t{ value: 1 + $max(0, originalFunction.length - (arguments.length - 1)) }\n\t\t\t);\n\t\t}\n\t}\n\treturn func;\n};\n\nvar applyBind = function applyBind() {\n\treturn $reflectApply(bind, $apply, arguments);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBind = require('./');\n\nvar $indexOf = callBind(GetIntrinsic('String.prototype.indexOf'));\n\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\tvar intrinsic = GetIntrinsic(name, !!allowMissing);\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBind(intrinsic);\n\t}\n\treturn intrinsic;\n};\n","export default {}","var hasMap = typeof Map === 'function' && Map.prototype;\nvar mapSizeDescriptor = Object.getOwnPropertyDescriptor && hasMap ? Object.getOwnPropertyDescriptor(Map.prototype, 'size') : null;\nvar mapSize = hasMap && mapSizeDescriptor && typeof mapSizeDescriptor.get === 'function' ? mapSizeDescriptor.get : null;\nvar mapForEach = hasMap && Map.prototype.forEach;\nvar hasSet = typeof Set === 'function' && Set.prototype;\nvar setSizeDescriptor = Object.getOwnPropertyDescriptor && hasSet ? Object.getOwnPropertyDescriptor(Set.prototype, 'size') : null;\nvar setSize = hasSet && setSizeDescriptor && typeof setSizeDescriptor.get === 'function' ? setSizeDescriptor.get : null;\nvar setForEach = hasSet && Set.prototype.forEach;\nvar hasWeakMap = typeof WeakMap === 'function' && WeakMap.prototype;\nvar weakMapHas = hasWeakMap ? WeakMap.prototype.has : null;\nvar hasWeakSet = typeof WeakSet === 'function' && WeakSet.prototype;\nvar weakSetHas = hasWeakSet ? WeakSet.prototype.has : null;\nvar hasWeakRef = typeof WeakRef === 'function' && WeakRef.prototype;\nvar weakRefDeref = hasWeakRef ? WeakRef.prototype.deref : null;\nvar booleanValueOf = Boolean.prototype.valueOf;\nvar objectToString = Object.prototype.toString;\nvar functionToString = Function.prototype.toString;\nvar $match = String.prototype.match;\nvar $slice = String.prototype.slice;\nvar $replace = String.prototype.replace;\nvar $toUpperCase = String.prototype.toUpperCase;\nvar $toLowerCase = String.prototype.toLowerCase;\nvar $test = RegExp.prototype.test;\nvar $concat = Array.prototype.concat;\nvar $join = Array.prototype.join;\nvar $arrSlice = Array.prototype.slice;\nvar $floor = Math.floor;\nvar bigIntValueOf = typeof BigInt === 'function' ? BigInt.prototype.valueOf : null;\nvar gOPS = Object.getOwnPropertySymbols;\nvar symToString = typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol' ? Symbol.prototype.toString : null;\nvar hasShammedSymbols = typeof Symbol === 'function' && typeof Symbol.iterator === 'object';\n// ie, `has-tostringtag/shams\nvar toStringTag = typeof Symbol === 'function' && Symbol.toStringTag && (typeof Symbol.toStringTag === hasShammedSymbols ? 'object' : 'symbol')\n    ? Symbol.toStringTag\n    : null;\nvar isEnumerable = Object.prototype.propertyIsEnumerable;\n\nvar gPO = (typeof Reflect === 'function' ? Reflect.getPrototypeOf : Object.getPrototypeOf) || (\n    [].__proto__ === Array.prototype // eslint-disable-line no-proto\n        ? function (O) {\n            return O.__proto__; // eslint-disable-line no-proto\n        }\n        : null\n);\n\nfunction addNumericSeparator(num, str) {\n    if (\n        num === Infinity\n        || num === -Infinity\n        || num !== num\n        || (num && num > -1000 && num < 1000)\n        || $test.call(/e/, str)\n    ) {\n        return str;\n    }\n    var sepRegex = /[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;\n    if (typeof num === 'number') {\n        var int = num < 0 ? -$floor(-num) : $floor(num); // trunc(num)\n        if (int !== num) {\n            var intStr = String(int);\n            var dec = $slice.call(str, intStr.length + 1);\n            return $replace.call(intStr, sepRegex, '$&_') + '.' + $replace.call($replace.call(dec, /([0-9]{3})/g, '$&_'), /_$/, '');\n        }\n    }\n    return $replace.call(str, sepRegex, '$&_');\n}\n\nvar utilInspect = require('./util.inspect');\nvar inspectCustom = utilInspect.custom;\nvar inspectSymbol = isSymbol(inspectCustom) ? inspectCustom : null;\n\nmodule.exports = function inspect_(obj, options, depth, seen) {\n    var opts = options || {};\n\n    if (has(opts, 'quoteStyle') && (opts.quoteStyle !== 'single' && opts.quoteStyle !== 'double')) {\n        throw new TypeError('option \"quoteStyle\" must be \"single\" or \"double\"');\n    }\n    if (\n        has(opts, 'maxStringLength') && (typeof opts.maxStringLength === 'number'\n            ? opts.maxStringLength < 0 && opts.maxStringLength !== Infinity\n            : opts.maxStringLength !== null\n        )\n    ) {\n        throw new TypeError('option \"maxStringLength\", if provided, must be a positive integer, Infinity, or `null`');\n    }\n    var customInspect = has(opts, 'customInspect') ? opts.customInspect : true;\n    if (typeof customInspect !== 'boolean' && customInspect !== 'symbol') {\n        throw new TypeError('option \"customInspect\", if provided, must be `true`, `false`, or `\\'symbol\\'`');\n    }\n\n    if (\n        has(opts, 'indent')\n        && opts.indent !== null\n        && opts.indent !== '\\t'\n        && !(parseInt(opts.indent, 10) === opts.indent && opts.indent > 0)\n    ) {\n        throw new TypeError('option \"indent\" must be \"\\\\t\", an integer > 0, or `null`');\n    }\n    if (has(opts, 'numericSeparator') && typeof opts.numericSeparator !== 'boolean') {\n        throw new TypeError('option \"numericSeparator\", if provided, must be `true` or `false`');\n    }\n    var numericSeparator = opts.numericSeparator;\n\n    if (typeof obj === 'undefined') {\n        return 'undefined';\n    }\n    if (obj === null) {\n        return 'null';\n    }\n    if (typeof obj === 'boolean') {\n        return obj ? 'true' : 'false';\n    }\n\n    if (typeof obj === 'string') {\n        return inspectString(obj, opts);\n    }\n    if (typeof obj === 'number') {\n        if (obj === 0) {\n            return Infinity / obj > 0 ? '0' : '-0';\n        }\n        var str = String(obj);\n        return numericSeparator ? addNumericSeparator(obj, str) : str;\n    }\n    if (typeof obj === 'bigint') {\n        var bigIntStr = String(obj) + 'n';\n        return numericSeparator ? addNumericSeparator(obj, bigIntStr) : bigIntStr;\n    }\n\n    var maxDepth = typeof opts.depth === 'undefined' ? 5 : opts.depth;\n    if (typeof depth === 'undefined') { depth = 0; }\n    if (depth >= maxDepth && maxDepth > 0 && typeof obj === 'object') {\n        return isArray(obj) ? '[Array]' : '[Object]';\n    }\n\n    var indent = getIndent(opts, depth);\n\n    if (typeof seen === 'undefined') {\n        seen = [];\n    } else if (indexOf(seen, obj) >= 0) {\n        return '[Circular]';\n    }\n\n    function inspect(value, from, noIndent) {\n        if (from) {\n            seen = $arrSlice.call(seen);\n            seen.push(from);\n        }\n        if (noIndent) {\n            var newOpts = {\n                depth: opts.depth\n            };\n            if (has(opts, 'quoteStyle')) {\n                newOpts.quoteStyle = opts.quoteStyle;\n            }\n            return inspect_(value, newOpts, depth + 1, seen);\n        }\n        return inspect_(value, opts, depth + 1, seen);\n    }\n\n    if (typeof obj === 'function' && !isRegExp(obj)) { // in older engines, regexes are callable\n        var name = nameOf(obj);\n        var keys = arrObjKeys(obj, inspect);\n        return '[Function' + (name ? ': ' + name : ' (anonymous)') + ']' + (keys.length > 0 ? ' { ' + $join.call(keys, ', ') + ' }' : '');\n    }\n    if (isSymbol(obj)) {\n        var symString = hasShammedSymbols ? $replace.call(String(obj), /^(Symbol\\(.*\\))_[^)]*$/, '$1') : symToString.call(obj);\n        return typeof obj === 'object' && !hasShammedSymbols ? markBoxed(symString) : symString;\n    }\n    if (isElement(obj)) {\n        var s = '<' + $toLowerCase.call(String(obj.nodeName));\n        var attrs = obj.attributes || [];\n        for (var i = 0; i < attrs.length; i++) {\n            s += ' ' + attrs[i].name + '=' + wrapQuotes(quote(attrs[i].value), 'double', opts);\n        }\n        s += '>';\n        if (obj.childNodes && obj.childNodes.length) { s += '...'; }\n        s += '</' + $toLowerCase.call(String(obj.nodeName)) + '>';\n        return s;\n    }\n    if (isArray(obj)) {\n        if (obj.length === 0) { return '[]'; }\n        var xs = arrObjKeys(obj, inspect);\n        if (indent && !singleLineValues(xs)) {\n            return '[' + indentedJoin(xs, indent) + ']';\n        }\n        return '[ ' + $join.call(xs, ', ') + ' ]';\n    }\n    if (isError(obj)) {\n        var parts = arrObjKeys(obj, inspect);\n        if (!('cause' in Error.prototype) && 'cause' in obj && !isEnumerable.call(obj, 'cause')) {\n            return '{ [' + String(obj) + '] ' + $join.call($concat.call('[cause]: ' + inspect(obj.cause), parts), ', ') + ' }';\n        }\n        if (parts.length === 0) { return '[' + String(obj) + ']'; }\n        return '{ [' + String(obj) + '] ' + $join.call(parts, ', ') + ' }';\n    }\n    if (typeof obj === 'object' && customInspect) {\n        if (inspectSymbol && typeof obj[inspectSymbol] === 'function' && utilInspect) {\n            return utilInspect(obj, { depth: maxDepth - depth });\n        } else if (customInspect !== 'symbol' && typeof obj.inspect === 'function') {\n            return obj.inspect();\n        }\n    }\n    if (isMap(obj)) {\n        var mapParts = [];\n        mapForEach.call(obj, function (value, key) {\n            mapParts.push(inspect(key, obj, true) + ' => ' + inspect(value, obj));\n        });\n        return collectionOf('Map', mapSize.call(obj), mapParts, indent);\n    }\n    if (isSet(obj)) {\n        var setParts = [];\n        setForEach.call(obj, function (value) {\n            setParts.push(inspect(value, obj));\n        });\n        return collectionOf('Set', setSize.call(obj), setParts, indent);\n    }\n    if (isWeakMap(obj)) {\n        return weakCollectionOf('WeakMap');\n    }\n    if (isWeakSet(obj)) {\n        return weakCollectionOf('WeakSet');\n    }\n    if (isWeakRef(obj)) {\n        return weakCollectionOf('WeakRef');\n    }\n    if (isNumber(obj)) {\n        return markBoxed(inspect(Number(obj)));\n    }\n    if (isBigInt(obj)) {\n        return markBoxed(inspect(bigIntValueOf.call(obj)));\n    }\n    if (isBoolean(obj)) {\n        return markBoxed(booleanValueOf.call(obj));\n    }\n    if (isString(obj)) {\n        return markBoxed(inspect(String(obj)));\n    }\n    if (!isDate(obj) && !isRegExp(obj)) {\n        var ys = arrObjKeys(obj, inspect);\n        var isPlainObject = gPO ? gPO(obj) === Object.prototype : obj instanceof Object || obj.constructor === Object;\n        var protoTag = obj instanceof Object ? '' : 'null prototype';\n        var stringTag = !isPlainObject && toStringTag && Object(obj) === obj && toStringTag in obj ? $slice.call(toStr(obj), 8, -1) : protoTag ? 'Object' : '';\n        var constructorTag = isPlainObject || typeof obj.constructor !== 'function' ? '' : obj.constructor.name ? obj.constructor.name + ' ' : '';\n        var tag = constructorTag + (stringTag || protoTag ? '[' + $join.call($concat.call([], stringTag || [], protoTag || []), ': ') + '] ' : '');\n        if (ys.length === 0) { return tag + '{}'; }\n        if (indent) {\n            return tag + '{' + indentedJoin(ys, indent) + '}';\n        }\n        return tag + '{ ' + $join.call(ys, ', ') + ' }';\n    }\n    return String(obj);\n};\n\nfunction wrapQuotes(s, defaultStyle, opts) {\n    var quoteChar = (opts.quoteStyle || defaultStyle) === 'double' ? '\"' : \"'\";\n    return quoteChar + s + quoteChar;\n}\n\nfunction quote(s) {\n    return $replace.call(String(s), /\"/g, '&quot;');\n}\n\nfunction isArray(obj) { return toStr(obj) === '[object Array]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isDate(obj) { return toStr(obj) === '[object Date]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isRegExp(obj) { return toStr(obj) === '[object RegExp]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isError(obj) { return toStr(obj) === '[object Error]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isString(obj) { return toStr(obj) === '[object String]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isNumber(obj) { return toStr(obj) === '[object Number]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\nfunction isBoolean(obj) { return toStr(obj) === '[object Boolean]' && (!toStringTag || !(typeof obj === 'object' && toStringTag in obj)); }\n\n// Symbol and BigInt do have Symbol.toStringTag by spec, so that can't be used to eliminate false positives\nfunction isSymbol(obj) {\n    if (hasShammedSymbols) {\n        return obj && typeof obj === 'object' && obj instanceof Symbol;\n    }\n    if (typeof obj === 'symbol') {\n        return true;\n    }\n    if (!obj || typeof obj !== 'object' || !symToString) {\n        return false;\n    }\n    try {\n        symToString.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isBigInt(obj) {\n    if (!obj || typeof obj !== 'object' || !bigIntValueOf) {\n        return false;\n    }\n    try {\n        bigIntValueOf.call(obj);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty || function (key) { return key in this; };\nfunction has(obj, key) {\n    return hasOwn.call(obj, key);\n}\n\nfunction toStr(obj) {\n    return objectToString.call(obj);\n}\n\nfunction nameOf(f) {\n    if (f.name) { return f.name; }\n    var m = $match.call(functionToString.call(f), /^function\\s*([\\w$]+)/);\n    if (m) { return m[1]; }\n    return null;\n}\n\nfunction indexOf(xs, x) {\n    if (xs.indexOf) { return xs.indexOf(x); }\n    for (var i = 0, l = xs.length; i < l; i++) {\n        if (xs[i] === x) { return i; }\n    }\n    return -1;\n}\n\nfunction isMap(x) {\n    if (!mapSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        mapSize.call(x);\n        try {\n            setSize.call(x);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof Map; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakMap(x) {\n    if (!weakMapHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakMapHas.call(x, weakMapHas);\n        try {\n            weakSetHas.call(x, weakSetHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakMap; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakRef(x) {\n    if (!weakRefDeref || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakRefDeref.call(x);\n        return true;\n    } catch (e) {}\n    return false;\n}\n\nfunction isSet(x) {\n    if (!setSize || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        setSize.call(x);\n        try {\n            mapSize.call(x);\n        } catch (m) {\n            return true;\n        }\n        return x instanceof Set; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isWeakSet(x) {\n    if (!weakSetHas || !x || typeof x !== 'object') {\n        return false;\n    }\n    try {\n        weakSetHas.call(x, weakSetHas);\n        try {\n            weakMapHas.call(x, weakMapHas);\n        } catch (s) {\n            return true;\n        }\n        return x instanceof WeakSet; // core-js workaround, pre-v2.5.0\n    } catch (e) {}\n    return false;\n}\n\nfunction isElement(x) {\n    if (!x || typeof x !== 'object') { return false; }\n    if (typeof HTMLElement !== 'undefined' && x instanceof HTMLElement) {\n        return true;\n    }\n    return typeof x.nodeName === 'string' && typeof x.getAttribute === 'function';\n}\n\nfunction inspectString(str, opts) {\n    if (str.length > opts.maxStringLength) {\n        var remaining = str.length - opts.maxStringLength;\n        var trailer = '... ' + remaining + ' more character' + (remaining > 1 ? 's' : '');\n        return inspectString($slice.call(str, 0, opts.maxStringLength), opts) + trailer;\n    }\n    // eslint-disable-next-line no-control-regex\n    var s = $replace.call($replace.call(str, /(['\\\\])/g, '\\\\$1'), /[\\x00-\\x1f]/g, lowbyte);\n    return wrapQuotes(s, 'single', opts);\n}\n\nfunction lowbyte(c) {\n    var n = c.charCodeAt(0);\n    var x = {\n        8: 'b',\n        9: 't',\n        10: 'n',\n        12: 'f',\n        13: 'r'\n    }[n];\n    if (x) { return '\\\\' + x; }\n    return '\\\\x' + (n < 0x10 ? '0' : '') + $toUpperCase.call(n.toString(16));\n}\n\nfunction markBoxed(str) {\n    return 'Object(' + str + ')';\n}\n\nfunction weakCollectionOf(type) {\n    return type + ' { ? }';\n}\n\nfunction collectionOf(type, size, entries, indent) {\n    var joinedEntries = indent ? indentedJoin(entries, indent) : $join.call(entries, ', ');\n    return type + ' (' + size + ') {' + joinedEntries + '}';\n}\n\nfunction singleLineValues(xs) {\n    for (var i = 0; i < xs.length; i++) {\n        if (indexOf(xs[i], '\\n') >= 0) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction getIndent(opts, depth) {\n    var baseIndent;\n    if (opts.indent === '\\t') {\n        baseIndent = '\\t';\n    } else if (typeof opts.indent === 'number' && opts.indent > 0) {\n        baseIndent = $join.call(Array(opts.indent + 1), ' ');\n    } else {\n        return null;\n    }\n    return {\n        base: baseIndent,\n        prev: $join.call(Array(depth + 1), baseIndent)\n    };\n}\n\nfunction indentedJoin(xs, indent) {\n    if (xs.length === 0) { return ''; }\n    var lineJoiner = '\\n' + indent.prev + indent.base;\n    return lineJoiner + $join.call(xs, ',' + lineJoiner) + '\\n' + indent.prev;\n}\n\nfunction arrObjKeys(obj, inspect) {\n    var isArr = isArray(obj);\n    var xs = [];\n    if (isArr) {\n        xs.length = obj.length;\n        for (var i = 0; i < obj.length; i++) {\n            xs[i] = has(obj, i) ? inspect(obj[i], obj) : '';\n        }\n    }\n    var syms = typeof gOPS === 'function' ? gOPS(obj) : [];\n    var symMap;\n    if (hasShammedSymbols) {\n        symMap = {};\n        for (var k = 0; k < syms.length; k++) {\n            symMap['$' + syms[k]] = syms[k];\n        }\n    }\n\n    for (var key in obj) { // eslint-disable-line no-restricted-syntax\n        if (!has(obj, key)) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (isArr && String(Number(key)) === key && key < obj.length) { continue; } // eslint-disable-line no-restricted-syntax, no-continue\n        if (hasShammedSymbols && symMap['$' + key] instanceof Symbol) {\n            // this is to prevent shammed Symbols, which are stored as strings, from being included in the string key section\n            continue; // eslint-disable-line no-restricted-syntax, no-continue\n        } else if ($test.call(/[^\\w$]/, key)) {\n            xs.push(inspect(key, obj) + ': ' + inspect(obj[key], obj));\n        } else {\n            xs.push(key + ': ' + inspect(obj[key], obj));\n        }\n    }\n    if (typeof gOPS === 'function') {\n        for (var j = 0; j < syms.length; j++) {\n            if (isEnumerable.call(obj, syms[j])) {\n                xs.push('[' + inspect(syms[j]) + ']: ' + inspect(obj[syms[j]], obj));\n            }\n        }\n    }\n    return xs;\n}\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar callBound = require('call-bind/callBound');\nvar inspect = require('object-inspect');\n\nvar $TypeError = GetIntrinsic('%TypeError%');\nvar $WeakMap = GetIntrinsic('%WeakMap%', true);\nvar $Map = GetIntrinsic('%Map%', true);\n\nvar $weakMapGet = callBound('WeakMap.prototype.get', true);\nvar $weakMapSet = callBound('WeakMap.prototype.set', true);\nvar $weakMapHas = callBound('WeakMap.prototype.has', true);\nvar $mapGet = callBound('Map.prototype.get', true);\nvar $mapSet = callBound('Map.prototype.set', true);\nvar $mapHas = callBound('Map.prototype.has', true);\n\n/*\n * This function traverses the list returning the node corresponding to the\n * given key.\n *\n * That node is also moved to the head of the list, so that if it's accessed\n * again we don't need to traverse the whole list. By doing so, all the recently\n * used nodes can be accessed relatively quickly.\n */\nvar listGetNode = function (list, key) { // eslint-disable-line consistent-return\n\tfor (var prev = list, curr; (curr = prev.next) !== null; prev = curr) {\n\t\tif (curr.key === key) {\n\t\t\tprev.next = curr.next;\n\t\t\tcurr.next = list.next;\n\t\t\tlist.next = curr; // eslint-disable-line no-param-reassign\n\t\t\treturn curr;\n\t\t}\n\t}\n};\n\nvar listGet = function (objects, key) {\n\tvar node = listGetNode(objects, key);\n\treturn node && node.value;\n};\nvar listSet = function (objects, key, value) {\n\tvar node = listGetNode(objects, key);\n\tif (node) {\n\t\tnode.value = value;\n\t} else {\n\t\t// Prepend the new node to the beginning of the list\n\t\tobjects.next = { // eslint-disable-line no-param-reassign\n\t\t\tkey: key,\n\t\t\tnext: objects.next,\n\t\t\tvalue: value\n\t\t};\n\t}\n};\nvar listHas = function (objects, key) {\n\treturn !!listGetNode(objects, key);\n};\n\nmodule.exports = function getSideChannel() {\n\tvar $wm;\n\tvar $m;\n\tvar $o;\n\tvar channel = {\n\t\tassert: function (key) {\n\t\t\tif (!channel.has(key)) {\n\t\t\t\tthrow new $TypeError('Side channel does not contain ' + inspect(key));\n\t\t\t}\n\t\t},\n\t\tget: function (key) { // eslint-disable-line consistent-return\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif ($wm) {\n\t\t\t\t\treturn $weakMapGet($wm, key);\n\t\t\t\t}\n\t\t\t} else if ($Map) {\n\t\t\t\tif ($m) {\n\t\t\t\t\treturn $mapGet($m, key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($o) { // eslint-disable-line no-lonely-if\n\t\t\t\t\treturn listGet($o, key);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thas: function (key) {\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif ($wm) {\n\t\t\t\t\treturn $weakMapHas($wm, key);\n\t\t\t\t}\n\t\t\t} else if ($Map) {\n\t\t\t\tif ($m) {\n\t\t\t\t\treturn $mapHas($m, key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ($o) { // eslint-disable-line no-lonely-if\n\t\t\t\t\treturn listHas($o, key);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\tset: function (key, value) {\n\t\t\tif ($WeakMap && key && (typeof key === 'object' || typeof key === 'function')) {\n\t\t\t\tif (!$wm) {\n\t\t\t\t\t$wm = new $WeakMap();\n\t\t\t\t}\n\t\t\t\t$weakMapSet($wm, key, value);\n\t\t\t} else if ($Map) {\n\t\t\t\tif (!$m) {\n\t\t\t\t\t$m = new $Map();\n\t\t\t\t}\n\t\t\t\t$mapSet($m, key, value);\n\t\t\t} else {\n\t\t\t\tif (!$o) {\n\t\t\t\t\t/*\n\t\t\t\t\t * Initialize the linked list as an empty node, so that we don't have\n\t\t\t\t\t * to special-case handling of the first node: we can always refer to\n\t\t\t\t\t * it as (previous node).next, instead of something like (list).head\n\t\t\t\t\t */\n\t\t\t\t\t$o = { key: {}, next: null };\n\t\t\t\t}\n\t\t\t\tlistSet($o, key, value);\n\t\t\t}\n\t\t}\n\t};\n\treturn channel;\n};\n","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nvar Format = {\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n\nmodule.exports = {\n    'default': Format.RFC3986,\n    formatters: {\n        RFC1738: function (value) {\n            return replace.call(value, percentTwenties, '+');\n        },\n        RFC3986: function (value) {\n            return String(value);\n        }\n    },\n    RFC1738: Format.RFC1738,\n    RFC3986: Format.RFC3986\n};\n","'use strict';\n\nvar formats = require('./formats');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    while (queue.length > 1) {\n        var item = queue.pop();\n        var obj = item.obj[item.prop];\n\n        if (isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    /* eslint no-param-reassign: 0 */\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (isArray(target)) {\n            target.push(source);\n        } else if (target && typeof target === 'object') {\n            if ((options && (options.plainObjects || options.allowPrototypes)) || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (!target || typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (isArray(target) && !isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (isArray(target) && isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                var targetItem = target[i];\n                if (targetItem && typeof targetItem === 'object' && item && typeof item === 'object') {\n                    target[i] = merge(targetItem, item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str, decoder, charset) {\n    var strWithoutPlus = str.replace(/\\+/g, ' ');\n    if (charset === 'iso-8859-1') {\n        // unescape never throws, no try...catch needed:\n        return strWithoutPlus.replace(/%[0-9a-f]{2}/gi, unescape);\n    }\n    // utf-8\n    try {\n        return decodeURIComponent(strWithoutPlus);\n    } catch (e) {\n        return strWithoutPlus;\n    }\n};\n\nvar encode = function encode(str, defaultEncoder, charset, kind, format) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = str;\n    if (typeof str === 'symbol') {\n        string = Symbol.prototype.toString.call(str);\n    } else if (typeof str !== 'string') {\n        string = String(str);\n    }\n\n    if (charset === 'iso-8859-1') {\n        return escape(string).replace(/%u[0-9a-f]{4}/gi, function ($0) {\n            return '%26%23' + parseInt($0.slice(2), 16) + '%3B';\n        });\n    }\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n            || (format === formats.RFC1738 && (c === 0x28 || c === 0x29)) // ( )\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        /* eslint operator-linebreak: [2, \"before\"] */\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    compactQueue(queue);\n\n    return value;\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (!obj || typeof obj !== 'object') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nvar combine = function combine(a, b) {\n    return [].concat(a, b);\n};\n\nvar maybeMap = function maybeMap(val, fn) {\n    if (isArray(val)) {\n        var mapped = [];\n        for (var i = 0; i < val.length; i += 1) {\n            mapped.push(fn(val[i]));\n        }\n        return mapped;\n    }\n    return fn(val);\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    combine: combine,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    maybeMap: maybeMap,\n    merge: merge\n};\n","'use strict';\n\nvar getSideChannel = require('side-channel');\nvar utils = require('./utils');\nvar formats = require('./formats');\nvar has = Object.prototype.hasOwnProperty;\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) {\n        return prefix + '[]';\n    },\n    comma: 'comma',\n    indices: function indices(prefix, key) {\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) {\n        return prefix;\n    }\n};\n\nvar isArray = Array.isArray;\nvar split = String.prototype.split;\nvar push = Array.prototype.push;\nvar pushToArray = function (arr, valueOrArray) {\n    push.apply(arr, isArray(valueOrArray) ? valueOrArray : [valueOrArray]);\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaultFormat = formats['default'];\nvar defaults = {\n    addQueryPrefix: false,\n    allowDots: false,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    format: defaultFormat,\n    formatter: formats.formatters[defaultFormat],\n    // deprecated\n    indices: false,\n    serializeDate: function serializeDate(date) {\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar isNonNullishPrimitive = function isNonNullishPrimitive(v) {\n    return typeof v === 'string'\n        || typeof v === 'number'\n        || typeof v === 'boolean'\n        || typeof v === 'symbol'\n        || typeof v === 'bigint';\n};\n\nvar sentinel = {};\n\nvar stringify = function stringify(\n    object,\n    prefix,\n    generateArrayPrefix,\n    commaRoundTrip,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    format,\n    formatter,\n    encodeValuesOnly,\n    charset,\n    sideChannel\n) {\n    var obj = object;\n\n    var tmpSc = sideChannel;\n    var step = 0;\n    var findFlag = false;\n    while ((tmpSc = tmpSc.get(sentinel)) !== void undefined && !findFlag) {\n        // Where object last appeared in the ref tree\n        var pos = tmpSc.get(object);\n        step += 1;\n        if (typeof pos !== 'undefined') {\n            if (pos === step) {\n                throw new RangeError('Cyclic object value');\n            } else {\n                findFlag = true; // Break while\n            }\n        }\n        if (typeof tmpSc.get(sentinel) === 'undefined') {\n            step = 0;\n        }\n    }\n\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        obj = utils.maybeMap(obj, function (value) {\n            if (value instanceof Date) {\n                return serializeDate(value);\n            }\n            return value;\n        });\n    }\n\n    if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder, charset, 'key', format) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (isNonNullishPrimitive(obj) || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder, charset, 'key', format);\n            if (generateArrayPrefix === 'comma' && encodeValuesOnly) {\n                var valuesArray = split.call(String(obj), ',');\n                var valuesJoined = '';\n                for (var i = 0; i < valuesArray.length; ++i) {\n                    valuesJoined += (i === 0 ? '' : ',') + formatter(encoder(valuesArray[i], defaults.encoder, charset, 'value', format));\n                }\n                return [formatter(keyValue) + (commaRoundTrip && isArray(obj) && valuesArray.length === 1 ? '[]' : '') + '=' + valuesJoined];\n            }\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder, charset, 'value', format))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (generateArrayPrefix === 'comma' && isArray(obj)) {\n        // we need to join elements in\n        objKeys = [{ value: obj.length > 0 ? obj.join(',') || null : void undefined }];\n    } else if (isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    var adjustedPrefix = commaRoundTrip && isArray(obj) && obj.length === 1 ? prefix + '[]' : prefix;\n\n    for (var j = 0; j < objKeys.length; ++j) {\n        var key = objKeys[j];\n        var value = typeof key === 'object' && typeof key.value !== 'undefined' ? key.value : obj[key];\n\n        if (skipNulls && value === null) {\n            continue;\n        }\n\n        var keyPrefix = isArray(obj)\n            ? typeof generateArrayPrefix === 'function' ? generateArrayPrefix(adjustedPrefix, key) : adjustedPrefix\n            : adjustedPrefix + (allowDots ? '.' + key : '[' + key + ']');\n\n        sideChannel.set(object, step);\n        var valueSideChannel = getSideChannel();\n        valueSideChannel.set(sentinel, sideChannel);\n        pushToArray(values, stringify(\n            value,\n            keyPrefix,\n            generateArrayPrefix,\n            commaRoundTrip,\n            strictNullHandling,\n            skipNulls,\n            encoder,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            format,\n            formatter,\n            encodeValuesOnly,\n            charset,\n            valueSideChannel\n        ));\n    }\n\n    return values;\n};\n\nvar normalizeStringifyOptions = function normalizeStringifyOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.encoder !== null && typeof opts.encoder !== 'undefined' && typeof opts.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var charset = opts.charset || defaults.charset;\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n\n    var format = formats['default'];\n    if (typeof opts.format !== 'undefined') {\n        if (!has.call(formats.formatters, opts.format)) {\n            throw new TypeError('Unknown format option provided.');\n        }\n        format = opts.format;\n    }\n    var formatter = formats.formatters[format];\n\n    var filter = defaults.filter;\n    if (typeof opts.filter === 'function' || isArray(opts.filter)) {\n        filter = opts.filter;\n    }\n\n    return {\n        addQueryPrefix: typeof opts.addQueryPrefix === 'boolean' ? opts.addQueryPrefix : defaults.addQueryPrefix,\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        delimiter: typeof opts.delimiter === 'undefined' ? defaults.delimiter : opts.delimiter,\n        encode: typeof opts.encode === 'boolean' ? opts.encode : defaults.encode,\n        encoder: typeof opts.encoder === 'function' ? opts.encoder : defaults.encoder,\n        encodeValuesOnly: typeof opts.encodeValuesOnly === 'boolean' ? opts.encodeValuesOnly : defaults.encodeValuesOnly,\n        filter: filter,\n        format: format,\n        formatter: formatter,\n        serializeDate: typeof opts.serializeDate === 'function' ? opts.serializeDate : defaults.serializeDate,\n        skipNulls: typeof opts.skipNulls === 'boolean' ? opts.skipNulls : defaults.skipNulls,\n        sort: typeof opts.sort === 'function' ? opts.sort : null,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = normalizeStringifyOptions(opts);\n\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (opts && opts.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = opts.arrayFormat;\n    } else if (opts && 'indices' in opts) {\n        arrayFormat = opts.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n    if (opts && 'commaRoundTrip' in opts && typeof opts.commaRoundTrip !== 'boolean') {\n        throw new TypeError('`commaRoundTrip` must be a boolean, or absent');\n    }\n    var commaRoundTrip = generateArrayPrefix === 'comma' && opts && opts.commaRoundTrip;\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (options.sort) {\n        objKeys.sort(options.sort);\n    }\n\n    var sideChannel = getSideChannel();\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (options.skipNulls && obj[key] === null) {\n            continue;\n        }\n        pushToArray(keys, stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            commaRoundTrip,\n            options.strictNullHandling,\n            options.skipNulls,\n            options.encode ? options.encoder : null,\n            options.filter,\n            options.sort,\n            options.allowDots,\n            options.serializeDate,\n            options.format,\n            options.formatter,\n            options.encodeValuesOnly,\n            options.charset,\n            sideChannel\n        ));\n    }\n\n    var joined = keys.join(options.delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    if (options.charsetSentinel) {\n        if (options.charset === 'iso-8859-1') {\n            // encodeURIComponent('&#10003;'), the \"numeric entity\" representation of a checkmark\n            prefix += 'utf8=%26%2310003%3B&';\n        } else {\n            // encodeURIComponent('')\n            prefix += 'utf8=%E2%9C%93&';\n        }\n    }\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\nvar isArray = Array.isArray;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    allowSparse: false,\n    arrayLimit: 20,\n    charset: 'utf-8',\n    charsetSentinel: false,\n    comma: false,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    ignoreQueryPrefix: false,\n    interpretNumericEntities: false,\n    parameterLimit: 1000,\n    parseArrays: true,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar interpretNumericEntities = function (str) {\n    return str.replace(/&#(\\d+);/g, function ($0, numberStr) {\n        return String.fromCharCode(parseInt(numberStr, 10));\n    });\n};\n\nvar parseArrayValue = function (val, options) {\n    if (val && typeof val === 'string' && options.comma && val.indexOf(',') > -1) {\n        return val.split(',');\n    }\n\n    return val;\n};\n\n// This is what browsers will submit when the  character occurs in an\n// application/x-www-form-urlencoded body and the encoding of the page containing\n// the form is iso-8859-1, or when the submitted form has an accept-charset\n// attribute of iso-8859-1. Presumably also with other charsets that do not contain\n// the  character, such as us-ascii.\nvar isoSentinel = 'utf8=%26%2310003%3B'; // encodeURIComponent('&#10003;')\n\n// These are the percent-encoded utf-8 octets representing a checkmark, indicating that the request actually is utf-8 encoded.\nvar charsetSentinel = 'utf8=%E2%9C%93'; // encodeURIComponent('')\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n    var skipIndex = -1; // Keep track of where the utf8 sentinel was found\n    var i;\n\n    var charset = options.charset;\n    if (options.charsetSentinel) {\n        for (i = 0; i < parts.length; ++i) {\n            if (parts[i].indexOf('utf8=') === 0) {\n                if (parts[i] === charsetSentinel) {\n                    charset = 'utf-8';\n                } else if (parts[i] === isoSentinel) {\n                    charset = 'iso-8859-1';\n                }\n                skipIndex = i;\n                i = parts.length; // The eslint settings do not allow break;\n            }\n        }\n    }\n\n    for (i = 0; i < parts.length; ++i) {\n        if (i === skipIndex) {\n            continue;\n        }\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder, charset, 'key');\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder, charset, 'key');\n            val = utils.maybeMap(\n                parseArrayValue(part.slice(pos + 1), options),\n                function (encodedVal) {\n                    return options.decoder(encodedVal, defaults.decoder, charset, 'value');\n                }\n            );\n        }\n\n        if (val && options.interpretNumericEntities && charset === 'iso-8859-1') {\n            val = interpretNumericEntities(val);\n        }\n\n        if (part.indexOf('[]=') > -1) {\n            val = isArray(val) ? [val] : val;\n        }\n\n        if (has.call(obj, key)) {\n            obj[key] = utils.combine(obj[key], val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options, valuesParsed) {\n    var leaf = valuesParsed ? val : parseArrayValue(val, options);\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]' && options.parseArrays) {\n            obj = [].concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (!options.parseArrays && cleanRoot === '') {\n                obj = { 0: leaf };\n            } else if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else if (cleanRoot !== '__proto__') {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj;\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options, valuesParsed) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = options.depth > 0 && brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while (options.depth > 0 && (segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options, valuesParsed);\n};\n\nvar normalizeParseOptions = function normalizeParseOptions(opts) {\n    if (!opts) {\n        return defaults;\n    }\n\n    if (opts.decoder !== null && opts.decoder !== undefined && typeof opts.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    if (typeof opts.charset !== 'undefined' && opts.charset !== 'utf-8' && opts.charset !== 'iso-8859-1') {\n        throw new TypeError('The charset option must be either utf-8, iso-8859-1, or undefined');\n    }\n    var charset = typeof opts.charset === 'undefined' ? defaults.charset : opts.charset;\n\n    return {\n        allowDots: typeof opts.allowDots === 'undefined' ? defaults.allowDots : !!opts.allowDots,\n        allowPrototypes: typeof opts.allowPrototypes === 'boolean' ? opts.allowPrototypes : defaults.allowPrototypes,\n        allowSparse: typeof opts.allowSparse === 'boolean' ? opts.allowSparse : defaults.allowSparse,\n        arrayLimit: typeof opts.arrayLimit === 'number' ? opts.arrayLimit : defaults.arrayLimit,\n        charset: charset,\n        charsetSentinel: typeof opts.charsetSentinel === 'boolean' ? opts.charsetSentinel : defaults.charsetSentinel,\n        comma: typeof opts.comma === 'boolean' ? opts.comma : defaults.comma,\n        decoder: typeof opts.decoder === 'function' ? opts.decoder : defaults.decoder,\n        delimiter: typeof opts.delimiter === 'string' || utils.isRegExp(opts.delimiter) ? opts.delimiter : defaults.delimiter,\n        // eslint-disable-next-line no-implicit-coercion, no-extra-parens\n        depth: (typeof opts.depth === 'number' || opts.depth === false) ? +opts.depth : defaults.depth,\n        ignoreQueryPrefix: opts.ignoreQueryPrefix === true,\n        interpretNumericEntities: typeof opts.interpretNumericEntities === 'boolean' ? opts.interpretNumericEntities : defaults.interpretNumericEntities,\n        parameterLimit: typeof opts.parameterLimit === 'number' ? opts.parameterLimit : defaults.parameterLimit,\n        parseArrays: opts.parseArrays !== false,\n        plainObjects: typeof opts.plainObjects === 'boolean' ? opts.plainObjects : defaults.plainObjects,\n        strictNullHandling: typeof opts.strictNullHandling === 'boolean' ? opts.strictNullHandling : defaults.strictNullHandling\n    };\n};\n\nmodule.exports = function (str, opts) {\n    var options = normalizeParseOptions(opts);\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options, typeof str === 'string');\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    if (options.allowSparse === true) {\n        return obj;\n    }\n\n    return utils.compact(obj);\n};\n","'use strict';\n\nvar stringify = require('./stringify');\nvar parse = require('./parse');\nvar formats = require('./formats');\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n","import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport global from 'global';\nimport { parse } from 'qs';\nvar document = global.document;\nexport var getQueryParams = function getQueryParams() {\n  // document.location is not defined in react-native\n  if (document && document.location && document.location.search) {\n    return parse(document.location.search, {\n      ignoreQueryPrefix: true\n    });\n  }\n\n  return {};\n};\nexport var getQueryParam = function getQueryParam(key) {\n  var params = getQueryParams();\n  return params[key];\n};","import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"regenerator-runtime/runtime.js\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport global from 'global';\nimport { STORY_RENDER_PHASE_CHANGED, STORY_RENDERED } from '@storybook/core-events';\nvar AbortController = global.AbortController;\n\nfunction createController() {\n  if (AbortController) return new AbortController(); // Polyfill for IE11\n\n  return {\n    signal: {\n      aborted: false\n    },\n    abort: function abort() {\n      this.signal.aborted = true;\n    }\n  };\n}\n\nexport var PREPARE_ABORTED = new Error('prepareAborted');\nexport var StoryRender = /*#__PURE__*/function () {\n  function StoryRender(channel, store, renderToScreen, callbacks, id, viewMode, story) {\n    _classCallCheck(this, StoryRender);\n\n    this.channel = channel;\n    this.store = store;\n    this.renderToScreen = renderToScreen;\n    this.callbacks = callbacks;\n    this.id = id;\n    this.viewMode = viewMode;\n    this.story = void 0;\n    this.phase = void 0;\n    this.abortController = void 0;\n    this.canvasElement = void 0;\n    this.notYetRendered = true;\n    this.disableKeyListeners = false;\n    this.abortController = createController(); // Allow short-circuiting preparing if we happen to already\n    // have the story (this is used by docs mode)\n\n    if (story) {\n      this.story = story; // TODO -- what should the phase be now?\n      // TODO -- should we emit the render phase changed event?\n\n      this.phase = 'preparing';\n    }\n  }\n\n  _createClass(StoryRender, [{\n    key: \"runPhase\",\n    value: function () {\n      var _runPhase = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(signal, phase, phaseFn) {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.phase = phase;\n                this.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n                  newPhase: this.phase,\n                  storyId: this.id\n                });\n\n                if (!phaseFn) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.next = 5;\n                return phaseFn();\n\n              case 5:\n                if (signal.aborted) {\n                  this.phase = 'aborted';\n                  this.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n                    newPhase: this.phase,\n                    storyId: this.id\n                  });\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function runPhase(_x, _x2, _x3) {\n        return _runPhase.apply(this, arguments);\n      }\n\n      return runPhase;\n    }()\n  }, {\n    key: \"prepare\",\n    value: function () {\n      var _prepare = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.runPhase(this.abortController.signal, 'preparing', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n                  return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.next = 2;\n                          return _this.store.loadStory({\n                            storyId: _this.id\n                          });\n\n                        case 2:\n                          _this.story = _context2.sent;\n\n                        case 3:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                })));\n\n              case 2:\n                if (!this.abortController.signal.aborted) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                this.store.cleanupStory(this.story);\n                throw PREPARE_ABORTED;\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function prepare() {\n        return _prepare.apply(this, arguments);\n      }\n\n      return prepare;\n    }() // The two story \"renders\" are equal and have both loaded the same story\n\n  }, {\n    key: \"isEqual\",\n    value: function isEqual(other) {\n      return other && this.id === other.id && this.story && this.story === other.story;\n    }\n  }, {\n    key: \"isPreparing\",\n    value: function isPreparing() {\n      return ['preparing'].includes(this.phase);\n    }\n  }, {\n    key: \"isPending\",\n    value: function isPending() {\n      return ['rendering', 'playing'].includes(this.phase);\n    }\n  }, {\n    key: \"context\",\n    value: function context() {\n      return this.store.getStoryContext(this.story);\n    }\n  }, {\n    key: \"renderToElement\",\n    value: function () {\n      var _renderToElement = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(canvasElement) {\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                this.canvasElement = canvasElement; // FIXME: this comment\n                // Start the first (initial) render. We don't await here because we need to return the \"cleanup\"\n                // function below right away, so if the user changes story during the first render we can cancel\n                // it without having to first wait for it to finish.\n                // Whenever the selection changes we want to force the component to be remounted.\n\n                return _context4.abrupt(\"return\", this.render({\n                  initial: true,\n                  forceRemount: true\n                }));\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function renderToElement(_x4) {\n        return _renderToElement.apply(this, arguments);\n      }\n\n      return renderToElement;\n    }()\n  }, {\n    key: \"render\",\n    value: function () {\n      var _render = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9() {\n        var _this2 = this;\n\n        var _ref2,\n            _ref2$initial,\n            initial,\n            _ref2$forceRemount,\n            forceRemount,\n            _this$story,\n            id,\n            componentId,\n            title,\n            name,\n            applyLoaders,\n            unboundStoryFn,\n            playFunction,\n            abortSignal,\n            loadedContext,\n            renderStoryContext,\n            _renderContext,\n            _args9 = arguments;\n\n        return regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _ref2 = _args9.length > 0 && _args9[0] !== undefined ? _args9[0] : {}, _ref2$initial = _ref2.initial, initial = _ref2$initial === void 0 ? false : _ref2$initial, _ref2$forceRemount = _ref2.forceRemount, forceRemount = _ref2$forceRemount === void 0 ? false : _ref2$forceRemount;\n\n                if (this.story) {\n                  _context9.next = 3;\n                  break;\n                }\n\n                throw new Error('cannot render when not prepared');\n\n              case 3:\n                _this$story = this.story, id = _this$story.id, componentId = _this$story.componentId, title = _this$story.title, name = _this$story.name, applyLoaders = _this$story.applyLoaders, unboundStoryFn = _this$story.unboundStoryFn, playFunction = _this$story.playFunction;\n\n                if (forceRemount && !initial) {\n                  // NOTE: we don't check the cancel actually worked here, so the previous\n                  // render could conceivably still be running after this call.\n                  // We might want to change that in the future.\n                  this.cancelRender();\n                  this.abortController = createController();\n                } // We need a stable reference to the signal -- if a re-mount happens the\n                // abort controller may be torn down (above) before we actually check the signal.\n\n\n                abortSignal = this.abortController.signal;\n                _context9.prev = 6;\n                _context9.next = 9;\n                return this.runPhase(abortSignal, 'loading', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {\n                  return regeneratorRuntime.wrap(function _callee5$(_context5) {\n                    while (1) {\n                      switch (_context5.prev = _context5.next) {\n                        case 0:\n                          _context5.next = 2;\n                          return applyLoaders(Object.assign({}, _this2.context(), {\n                            viewMode: _this2.viewMode\n                          }));\n\n                        case 2:\n                          loadedContext = _context5.sent;\n\n                        case 3:\n                        case \"end\":\n                          return _context5.stop();\n                      }\n                    }\n                  }, _callee5);\n                })));\n\n              case 9:\n                if (!abortSignal.aborted) {\n                  _context9.next = 11;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\");\n\n              case 11:\n                renderStoryContext = Object.assign({}, loadedContext, this.context(), {\n                  abortSignal: abortSignal,\n                  canvasElement: this.canvasElement\n                });\n                _renderContext = Object.assign({\n                  componentId: componentId,\n                  title: title,\n                  kind: title,\n                  id: id,\n                  name: name,\n                  story: name\n                }, this.callbacks, {\n                  forceRemount: forceRemount || this.notYetRendered,\n                  storyContext: renderStoryContext,\n                  storyFn: function storyFn() {\n                    return unboundStoryFn(renderStoryContext);\n                  },\n                  unboundStoryFn: unboundStoryFn\n                });\n                _context9.next = 15;\n                return this.runPhase(abortSignal, 'rendering', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6() {\n                  return regeneratorRuntime.wrap(function _callee6$(_context6) {\n                    while (1) {\n                      switch (_context6.prev = _context6.next) {\n                        case 0:\n                          return _context6.abrupt(\"return\", _this2.renderToScreen(_renderContext, _this2.canvasElement));\n\n                        case 1:\n                        case \"end\":\n                          return _context6.stop();\n                      }\n                    }\n                  }, _callee6);\n                })));\n\n              case 15:\n                this.notYetRendered = false;\n\n                if (!abortSignal.aborted) {\n                  _context9.next = 18;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\");\n\n              case 18:\n                if (!(forceRemount && playFunction)) {\n                  _context9.next = 27;\n                  break;\n                }\n\n                this.disableKeyListeners = true;\n                _context9.next = 22;\n                return this.runPhase(abortSignal, 'playing', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7() {\n                  return regeneratorRuntime.wrap(function _callee7$(_context7) {\n                    while (1) {\n                      switch (_context7.prev = _context7.next) {\n                        case 0:\n                          return _context7.abrupt(\"return\", playFunction(_renderContext.storyContext));\n\n                        case 1:\n                        case \"end\":\n                          return _context7.stop();\n                      }\n                    }\n                  }, _callee7);\n                })));\n\n              case 22:\n                _context9.next = 24;\n                return this.runPhase(abortSignal, 'played');\n\n              case 24:\n                this.disableKeyListeners = false;\n\n                if (!abortSignal.aborted) {\n                  _context9.next = 27;\n                  break;\n                }\n\n                return _context9.abrupt(\"return\");\n\n              case 27:\n                _context9.next = 29;\n                return this.runPhase(abortSignal, 'completed', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8() {\n                  return regeneratorRuntime.wrap(function _callee8$(_context8) {\n                    while (1) {\n                      switch (_context8.prev = _context8.next) {\n                        case 0:\n                          return _context8.abrupt(\"return\", _this2.channel.emit(STORY_RENDERED, id));\n\n                        case 1:\n                        case \"end\":\n                          return _context8.stop();\n                      }\n                    }\n                  }, _callee8);\n                })));\n\n              case 29:\n                _context9.next = 34;\n                break;\n\n              case 31:\n                _context9.prev = 31;\n                _context9.t0 = _context9[\"catch\"](6);\n                this.callbacks.showException(_context9.t0);\n\n              case 34:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[6, 31]]);\n      }));\n\n      function render() {\n        return _render.apply(this, arguments);\n      }\n\n      return render;\n    }()\n  }, {\n    key: \"rerender\",\n    value: function () {\n      var _rerender = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10() {\n        return regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                return _context10.abrupt(\"return\", this.render());\n\n              case 1:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function rerender() {\n        return _rerender.apply(this, arguments);\n      }\n\n      return rerender;\n    }()\n  }, {\n    key: \"remount\",\n    value: function () {\n      var _remount = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee11() {\n        return regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                return _context11.abrupt(\"return\", this.render({\n                  forceRemount: true\n                }));\n\n              case 1:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function remount() {\n        return _remount.apply(this, arguments);\n      }\n\n      return remount;\n    }() // If the story is torn down (either a new story is rendered or the docs page removes it)\n    // we need to consider the fact that the initial render may not be finished\n    // (possibly the loaders or the play function are still running). We use the controller\n    // as a method to abort them, ASAP, but this is not foolproof as we cannot control what\n    // happens inside the user's code.\n\n  }, {\n    key: \"cancelRender\",\n    value: function cancelRender() {\n      this.abortController.abort();\n    }\n  }, {\n    key: \"teardown\",\n    value: function () {\n      var _teardown = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee12() {\n        var options,\n            i,\n            _args12 = arguments;\n        return regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                options = _args12.length > 0 && _args12[0] !== undefined ? _args12[0] : {};\n                this.cancelRender(); // If the story has loaded, we need to cleanup\n\n                if (this.story) this.store.cleanupStory(this.story); // Check if we're done rendering/playing. If not, we may have to reload the page.\n                // Wait several ticks that may be needed to handle the abort, then try again.\n                // Note that there's a max of 5 nested timeouts before they're no longer \"instant\".\n\n                i = 0;\n\n              case 4:\n                if (!(i < 3)) {\n                  _context12.next = 12;\n                  break;\n                }\n\n                if (this.isPending()) {\n                  _context12.next = 7;\n                  break;\n                }\n\n                return _context12.abrupt(\"return\");\n\n              case 7:\n                _context12.next = 9;\n                return new Promise(function (resolve) {\n                  return setTimeout(resolve, 0);\n                });\n\n              case 9:\n                i += 1;\n                _context12.next = 4;\n                break;\n\n              case 12:\n                // If we still haven't completed, reload the page (iframe) to ensure we have a clean slate\n                // for the next render. Since the reload can take a brief moment to happen, we want to stop\n                // further rendering by awaiting a never-resolving promise (which is destroyed on reload).\n                global.window.location.reload();\n                _context12.next = 15;\n                return new Promise(function () {});\n\n              case 15:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function teardown() {\n        return _teardown.apply(this, arguments);\n      }\n\n      return teardown;\n    }()\n  }]);\n\n  return StoryRender;\n}();\nStoryRender.displayName = \"StoryRender\";","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.freeze.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\n\nvar _templateObject, _templateObject2;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport \"regenerator-runtime/runtime.js\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport dedent from 'ts-dedent';\nimport global from 'global';\nimport { SynchronousPromise } from 'synchronous-promise';\nimport { CONFIG_ERROR, FORCE_REMOUNT, FORCE_RE_RENDER, GLOBALS_UPDATED, RESET_STORY_ARGS, SET_GLOBALS, STORY_ARGS_UPDATED, STORY_INDEX_INVALIDATED, UPDATE_GLOBALS, UPDATE_STORY_ARGS } from '@storybook/core-events';\nimport { logger } from '@storybook/client-logger';\nimport { addons } from '@storybook/addons';\nimport { StoryStore } from '@storybook/store';\nimport { StoryRender } from './StoryRender';\nvar fetch = global.fetch;\nvar STORY_INDEX_PATH = './stories.json';\nexport var Preview = /*#__PURE__*/function () {\n  function Preview() {\n    var _global$FEATURES;\n\n    _classCallCheck(this, Preview);\n\n    this.channel = void 0;\n    this.serverChannel = void 0;\n    this.storyStore = void 0;\n    this.getStoryIndex = void 0;\n    this.importFn = void 0;\n    this.renderToDOM = void 0;\n    this.storyRenders = [];\n    this.previewEntryError = void 0;\n    this.channel = addons.getChannel();\n\n    if ((_global$FEATURES = global.FEATURES) !== null && _global$FEATURES !== void 0 && _global$FEATURES.storyStoreV7 && addons.hasServerChannel()) {\n      this.serverChannel = addons.getServerChannel();\n    }\n\n    this.storyStore = new StoryStore();\n  } // INITIALIZATION\n  // NOTE: the reason that the preview and store's initialization code is written in a promise\n  // style and not `async-await`, and the use of `SynchronousPromise`s is in order to allow\n  // storyshots to immediately call `raw()` on the store without waiting for a later tick.\n  // (Even simple things like `Promise.resolve()` and `await` involve the callback happening\n  // in the next promise \"tick\").\n  // See the comment in `storyshots-core/src/api/index.ts` for more detail.\n\n\n  _createClass(Preview, [{\n    key: \"initialize\",\n    value: function initialize(_ref) {\n      var _this = this;\n\n      var getStoryIndex = _ref.getStoryIndex,\n          importFn = _ref.importFn,\n          getProjectAnnotations = _ref.getProjectAnnotations;\n      // We save these two on initialization in case `getProjectAnnotations` errors,\n      // in which case we may need them later when we recover.\n      this.getStoryIndex = getStoryIndex;\n      this.importFn = importFn;\n      this.setupListeners();\n      return this.getProjectAnnotationsOrRenderError(getProjectAnnotations).then(function (projectAnnotations) {\n        return _this.initializeWithProjectAnnotations(projectAnnotations);\n      });\n    }\n  }, {\n    key: \"setupListeners\",\n    value: function setupListeners() {\n      var _this$serverChannel;\n\n      (_this$serverChannel = this.serverChannel) === null || _this$serverChannel === void 0 ? void 0 : _this$serverChannel.on(STORY_INDEX_INVALIDATED, this.onStoryIndexChanged.bind(this));\n      this.channel.on(UPDATE_GLOBALS, this.onUpdateGlobals.bind(this));\n      this.channel.on(UPDATE_STORY_ARGS, this.onUpdateArgs.bind(this));\n      this.channel.on(RESET_STORY_ARGS, this.onResetArgs.bind(this));\n      this.channel.on(FORCE_RE_RENDER, this.onForceReRender.bind(this));\n      this.channel.on(FORCE_REMOUNT, this.onForceRemount.bind(this));\n    }\n  }, {\n    key: \"getProjectAnnotationsOrRenderError\",\n    value: function getProjectAnnotationsOrRenderError(getProjectAnnotations) {\n      var _this2 = this;\n\n      return SynchronousPromise.resolve().then(getProjectAnnotations).then(function (projectAnnotations) {\n        _this2.renderToDOM = projectAnnotations.renderToDOM;\n\n        if (!_this2.renderToDOM) {\n          throw new Error(dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n            Expected your framework's preset to export a `renderToDOM` field.\\n\\n            Perhaps it needs to be upgraded for Storybook 6.4?\\n\\n            More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#mainjs-framework-field          \\n          \"], [\"\\n            Expected your framework's preset to export a \\\\`renderToDOM\\\\` field.\\n\\n            Perhaps it needs to be upgraded for Storybook 6.4?\\n\\n            More info: https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#mainjs-framework-field          \\n          \"]))));\n        }\n\n        return projectAnnotations;\n      }).catch(function (err) {\n        // This is an error extracting the projectAnnotations (i.e. evaluating the previewEntries) and\n        // needs to be show to the user as a simple error\n        _this2.renderPreviewEntryError('Error reading preview.js:', err);\n\n        throw err;\n      });\n    } // If initialization gets as far as project annotations, this function runs.\n\n  }, {\n    key: \"initializeWithProjectAnnotations\",\n    value: function initializeWithProjectAnnotations(projectAnnotations) {\n      var _global$FEATURES2,\n          _this3 = this;\n\n      this.storyStore.setProjectAnnotations(projectAnnotations);\n      this.setInitialGlobals();\n      var storyIndexPromise;\n\n      if ((_global$FEATURES2 = global.FEATURES) !== null && _global$FEATURES2 !== void 0 && _global$FEATURES2.storyStoreV7) {\n        storyIndexPromise = this.getStoryIndexFromServer();\n      } else {\n        if (!this.getStoryIndex) {\n          throw new Error('No `getStoryIndex` passed defined in v6 mode');\n        }\n\n        storyIndexPromise = SynchronousPromise.resolve().then(this.getStoryIndex);\n      }\n\n      return storyIndexPromise.then(function (storyIndex) {\n        return _this3.initializeWithStoryIndex(storyIndex);\n      }).catch(function (err) {\n        _this3.renderPreviewEntryError('Error loading story index:', err);\n\n        throw err;\n      });\n    }\n  }, {\n    key: \"setInitialGlobals\",\n    value: function () {\n      var _setInitialGlobals = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.emitGlobals();\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function setInitialGlobals() {\n        return _setInitialGlobals.apply(this, arguments);\n      }\n\n      return setInitialGlobals;\n    }()\n  }, {\n    key: \"emitGlobals\",\n    value: function emitGlobals() {\n      this.channel.emit(SET_GLOBALS, {\n        globals: this.storyStore.globals.get() || {},\n        globalTypes: this.storyStore.projectAnnotations.globalTypes || {}\n      });\n    }\n  }, {\n    key: \"getStoryIndexFromServer\",\n    value: function () {\n      var _getStoryIndexFromServer = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var result;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return fetch(STORY_INDEX_PATH);\n\n              case 2:\n                result = _context2.sent;\n\n                if (!(result.status === 200)) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", result.json());\n\n              case 5:\n                _context2.t0 = Error;\n                _context2.next = 8;\n                return result.text();\n\n              case 8:\n                _context2.t1 = _context2.sent;\n                throw new _context2.t0(_context2.t1);\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getStoryIndexFromServer() {\n        return _getStoryIndexFromServer.apply(this, arguments);\n      }\n\n      return getStoryIndexFromServer;\n    }() // If initialization gets as far as the story index, this function runs.\n\n  }, {\n    key: \"initializeWithStoryIndex\",\n    value: function initializeWithStoryIndex(storyIndex) {\n      var _global$FEATURES3;\n\n      return this.storyStore.initialize({\n        storyIndex: storyIndex,\n        importFn: this.importFn,\n        cache: !((_global$FEATURES3 = global.FEATURES) !== null && _global$FEATURES3 !== void 0 && _global$FEATURES3.storyStoreV7)\n      });\n    } // EVENT HANDLERS\n    // This happens when a config file gets reloaded\n\n  }, {\n    key: \"onGetProjectAnnotationsChanged\",\n    value: function () {\n      var _onGetProjectAnnotationsChanged = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(_ref2) {\n        var getProjectAnnotations, projectAnnotations;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                getProjectAnnotations = _ref2.getProjectAnnotations;\n                delete this.previewEntryError;\n                _context3.next = 4;\n                return this.getProjectAnnotationsOrRenderError(getProjectAnnotations);\n\n              case 4:\n                projectAnnotations = _context3.sent;\n\n                if (this.storyStore.projectAnnotations) {\n                  _context3.next = 9;\n                  break;\n                }\n\n                _context3.next = 8;\n                return this.initializeWithProjectAnnotations(projectAnnotations);\n\n              case 8:\n                return _context3.abrupt(\"return\");\n\n              case 9:\n                _context3.next = 11;\n                return this.storyStore.setProjectAnnotations(projectAnnotations);\n\n              case 11:\n                this.emitGlobals();\n\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function onGetProjectAnnotationsChanged(_x) {\n        return _onGetProjectAnnotationsChanged.apply(this, arguments);\n      }\n\n      return onGetProjectAnnotationsChanged;\n    }()\n  }, {\n    key: \"onStoryIndexChanged\",\n    value: function () {\n      var _onStoryIndexChanged = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var storyIndex;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                delete this.previewEntryError;\n\n                if (this.storyStore.projectAnnotations) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 3:\n                _context4.prev = 3;\n                _context4.next = 6;\n                return this.getStoryIndexFromServer();\n\n              case 6:\n                storyIndex = _context4.sent;\n\n                if (this.storyStore.storyIndex) {\n                  _context4.next = 10;\n                  break;\n                }\n\n                _context4.next = 10;\n                return this.initializeWithStoryIndex(storyIndex);\n\n              case 10:\n                _context4.next = 12;\n                return this.onStoriesChanged({\n                  storyIndex: storyIndex\n                });\n\n              case 12:\n                _context4.next = 18;\n                break;\n\n              case 14:\n                _context4.prev = 14;\n                _context4.t0 = _context4[\"catch\"](3);\n                this.renderPreviewEntryError('Error loading story index:', _context4.t0);\n                throw _context4.t0;\n\n              case 18:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[3, 14]]);\n      }));\n\n      function onStoryIndexChanged() {\n        return _onStoryIndexChanged.apply(this, arguments);\n      }\n\n      return onStoryIndexChanged;\n    }() // This happens when a glob gets HMR-ed\n\n  }, {\n    key: \"onStoriesChanged\",\n    value: function () {\n      var _onStoriesChanged = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(_ref3) {\n        var importFn, storyIndex;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                importFn = _ref3.importFn, storyIndex = _ref3.storyIndex;\n                _context5.next = 3;\n                return this.storyStore.onStoriesChanged({\n                  importFn: importFn,\n                  storyIndex: storyIndex\n                });\n\n              case 3:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function onStoriesChanged(_x2) {\n        return _onStoriesChanged.apply(this, arguments);\n      }\n\n      return onStoriesChanged;\n    }()\n  }, {\n    key: \"onUpdateGlobals\",\n    value: function () {\n      var _onUpdateGlobals = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(_ref4) {\n        var globals;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                globals = _ref4.globals;\n                this.storyStore.globals.update(globals);\n                _context6.next = 4;\n                return Promise.all(this.storyRenders.map(function (r) {\n                  return r.rerender();\n                }));\n\n              case 4:\n                this.channel.emit(GLOBALS_UPDATED, {\n                  globals: this.storyStore.globals.get(),\n                  initialGlobals: this.storyStore.globals.initialGlobals\n                });\n\n              case 5:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function onUpdateGlobals(_x3) {\n        return _onUpdateGlobals.apply(this, arguments);\n      }\n\n      return onUpdateGlobals;\n    }()\n  }, {\n    key: \"onUpdateArgs\",\n    value: function () {\n      var _onUpdateArgs = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(_ref5) {\n        var storyId, updatedArgs;\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                storyId = _ref5.storyId, updatedArgs = _ref5.updatedArgs;\n                this.storyStore.args.update(storyId, updatedArgs);\n                _context7.next = 4;\n                return Promise.all(this.storyRenders.filter(function (r) {\n                  return r.id === storyId;\n                }).map(function (r) {\n                  return r.rerender();\n                }));\n\n              case 4:\n                this.channel.emit(STORY_ARGS_UPDATED, {\n                  storyId: storyId,\n                  args: this.storyStore.args.get(storyId)\n                });\n\n              case 5:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function onUpdateArgs(_x4) {\n        return _onUpdateArgs.apply(this, arguments);\n      }\n\n      return onUpdateArgs;\n    }()\n  }, {\n    key: \"onResetArgs\",\n    value: function () {\n      var _onResetArgs = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(_ref6) {\n        var storyId, argNames, render, story, argNamesToReset, updatedArgs;\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                storyId = _ref6.storyId, argNames = _ref6.argNames;\n                // NOTE: we have to be careful here and avoid await-ing when updating a rendered's args.\n                // That's because below in `renderStoryToElement` we have also bound to this event and will\n                // render the story in the same tick.\n                // However, we can do that safely as the current story is available in `this.storyRenders`\n                render = this.storyRenders.find(function (r) {\n                  return r.id === storyId;\n                });\n                _context8.t0 = render === null || render === void 0 ? void 0 : render.story;\n\n                if (_context8.t0) {\n                  _context8.next = 7;\n                  break;\n                }\n\n                _context8.next = 6;\n                return this.storyStore.loadStory({\n                  storyId: storyId\n                });\n\n              case 6:\n                _context8.t0 = _context8.sent;\n\n              case 7:\n                story = _context8.t0;\n                argNamesToReset = argNames || _toConsumableArray(new Set([].concat(_toConsumableArray(Object.keys(story.initialArgs)), _toConsumableArray(Object.keys(this.storyStore.args.get(storyId))))));\n                updatedArgs = argNamesToReset.reduce(function (acc, argName) {\n                  acc[argName] = story.initialArgs[argName];\n                  return acc;\n                }, {});\n                _context8.next = 12;\n                return this.onUpdateArgs({\n                  storyId: storyId,\n                  updatedArgs: updatedArgs\n                });\n\n              case 12:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function onResetArgs(_x5) {\n        return _onResetArgs.apply(this, arguments);\n      }\n\n      return onResetArgs;\n    }() // ForceReRender does not include a story id, so we simply must\n    // re-render all stories in case they are relevant\n\n  }, {\n    key: \"onForceReRender\",\n    value: function () {\n      var _onForceReRender = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9() {\n        return regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return Promise.all(this.storyRenders.map(function (r) {\n                  return r.rerender();\n                }));\n\n              case 2:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function onForceReRender() {\n        return _onForceReRender.apply(this, arguments);\n      }\n\n      return onForceReRender;\n    }()\n  }, {\n    key: \"onForceRemount\",\n    value: function () {\n      var _onForceRemount = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10(_ref7) {\n        var storyId;\n        return regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                storyId = _ref7.storyId;\n                _context10.next = 3;\n                return Promise.all(this.storyRenders.filter(function (r) {\n                  return r.id === storyId;\n                }).map(function (r) {\n                  return r.remount();\n                }));\n\n              case 3:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function onForceRemount(_x6) {\n        return _onForceRemount.apply(this, arguments);\n      }\n\n      return onForceRemount;\n    }() // Used by docs' modernInlineRender to render a story to a given element\n    // Note this short-circuits the `prepare()` phase of the StoryRender,\n    // main to be consistent with the previous behaviour. In the future,\n    // we will change it to go ahead and load the story, which will end up being\n    // \"instant\", although async.\n\n  }, {\n    key: \"renderStoryToElement\",\n    value: function renderStoryToElement(story, element) {\n      var _this4 = this;\n\n      var render = new StoryRender(this.channel, this.storyStore, this.renderToDOM, this.inlineStoryCallbacks(story.id), story.id, 'docs', story);\n      render.renderToElement(element);\n      this.storyRenders.push(render);\n      return /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee11() {\n        return regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.next = 2;\n                return _this4.teardownRender(render);\n\n              case 2:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11);\n      }));\n    }\n  }, {\n    key: \"teardownRender\",\n    value: function () {\n      var _teardownRender = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee12(render) {\n        var _ref9,\n            viewModeChanged,\n            _args12 = arguments;\n\n        return regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _ref9 = _args12.length > 1 && _args12[1] !== undefined ? _args12[1] : {}, viewModeChanged = _ref9.viewModeChanged;\n                this.storyRenders = this.storyRenders.filter(function (r) {\n                  return r !== render;\n                });\n                _context12.next = 4;\n                return render === null || render === void 0 ? void 0 : render.teardown({\n                  viewModeChanged: viewModeChanged\n                });\n\n              case 4:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function teardownRender(_x7) {\n        return _teardownRender.apply(this, arguments);\n      }\n\n      return teardownRender;\n    }() // API\n\n  }, {\n    key: \"extract\",\n    value: function () {\n      var _extract = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee13(options) {\n        var _global$FEATURES4;\n\n        return regeneratorRuntime.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                if (!this.previewEntryError) {\n                  _context13.next = 2;\n                  break;\n                }\n\n                throw this.previewEntryError;\n\n              case 2:\n                if (this.storyStore.projectAnnotations) {\n                  _context13.next = 4;\n                  break;\n                }\n\n                throw new Error(dedent(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"Failed to initialize Storybook.\\n      \\n      Do you have an error in your `preview.js`? Check your Storybook's browser console for errors.\"], [\"Failed to initialize Storybook.\\n      \\n      Do you have an error in your \\\\`preview.js\\\\`? Check your Storybook's browser console for errors.\"]))));\n\n              case 4:\n                if (!((_global$FEATURES4 = global.FEATURES) !== null && _global$FEATURES4 !== void 0 && _global$FEATURES4.storyStoreV7)) {\n                  _context13.next = 7;\n                  break;\n                }\n\n                _context13.next = 7;\n                return this.storyStore.cacheAllCSFFiles();\n\n              case 7:\n                return _context13.abrupt(\"return\", this.storyStore.extract(options));\n\n              case 8:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      function extract(_x8) {\n        return _extract.apply(this, arguments);\n      }\n\n      return extract;\n    }() // UTILITIES\n\n  }, {\n    key: \"inlineStoryCallbacks\",\n    value: function inlineStoryCallbacks(storyId) {\n      return {\n        showMain: function showMain() {},\n        showError: function showError(err) {\n          return logger.error(\"Error rendering docs story (\".concat(storyId, \")\"), err);\n        },\n        showException: function showException(err) {\n          return logger.error(\"Error rendering docs story (\".concat(storyId, \")\"), err);\n        }\n      };\n    }\n  }, {\n    key: \"renderPreviewEntryError\",\n    value: function renderPreviewEntryError(reason, err) {\n      this.previewEntryError = err;\n      logger.error(reason);\n      logger.error(err);\n      this.channel.emit(CONFIG_ERROR, err);\n    }\n  }]);\n\n  return Preview;\n}();","import \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.object.freeze.js\";\n\nvar _templateObject;\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/es.string.ends-with.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport qs from 'qs';\nimport dedent from 'ts-dedent';\nimport { once } from '@storybook/client-logger';\nimport isPlainObject from 'lodash/isPlainObject'; // Keep this in sync with validateArgs in router/src/utils.ts\n\nvar VALIDATION_REGEXP = /^[a-zA-Z0-9 _-]*$/;\nvar NUMBER_REGEXP = /^-?[0-9]+(\\.[0-9]+)?$/;\nvar HEX_REGEXP = /^#([a-f0-9]{3,4}|[a-f0-9]{6}|[a-f0-9]{8})$/i;\nvar COLOR_REGEXP = /^(rgba?|hsla?)\\(([0-9]{1,3}),\\s?([0-9]{1,3})%?,\\s?([0-9]{1,3})%?,?\\s?([0-9](\\.[0-9]{1,2})?)?\\)$/i;\n\nvar validateArgs = function validateArgs() {\n  var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var value = arguments.length > 1 ? arguments[1] : undefined;\n  if (key === null) return false;\n  if (key === '' || !VALIDATION_REGEXP.test(key)) return false;\n  if (value === null || value === undefined) return true; // encoded as `!null` or `!undefined`\n\n  if (value instanceof Date) return true; // encoded as modified ISO string\n\n  if (typeof value === 'number' || typeof value === 'boolean') return true;\n\n  if (typeof value === 'string') {\n    return VALIDATION_REGEXP.test(value) || NUMBER_REGEXP.test(value) || HEX_REGEXP.test(value) || COLOR_REGEXP.test(value);\n  }\n\n  if (Array.isArray(value)) return value.every(function (v) {\n    return validateArgs(key, v);\n  });\n  if (isPlainObject(value)) return Object.entries(value).every(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        k = _ref2[0],\n        v = _ref2[1];\n\n    return validateArgs(k, v);\n  });\n  return false;\n};\n\nvar QS_OPTIONS = {\n  delimiter: ';',\n  // we're parsing a single query param\n  allowDots: true,\n  // objects are encoded using dot notation\n  allowSparse: true,\n  // arrays will be merged on top of their initial value\n  decoder: function (_decoder) {\n    function decoder(_x, _x2, _x3, _x4) {\n      return _decoder.apply(this, arguments);\n    }\n\n    decoder.toString = function () {\n      return _decoder.toString();\n    };\n\n    return decoder;\n  }(function (str, defaultDecoder, charset, type) {\n    if (type === 'value' && str.startsWith('!')) {\n      if (str === '!undefined') return undefined;\n      if (str === '!null') return null;\n      if (str.startsWith('!date(') && str.endsWith(')')) return new Date(str.slice(6, -1));\n      if (str.startsWith('!hex(') && str.endsWith(')')) return \"#\".concat(str.slice(5, -1));\n      var color = str.slice(1).match(COLOR_REGEXP);\n\n      if (color) {\n        if (str.startsWith('!rgba')) return \"\".concat(color[1], \"(\").concat(color[2], \", \").concat(color[3], \", \").concat(color[4], \", \").concat(color[5], \")\");\n        if (str.startsWith('!hsla')) return \"\".concat(color[1], \"(\").concat(color[2], \", \").concat(color[3], \"%, \").concat(color[4], \"%, \").concat(color[5], \")\");\n        return str.startsWith('!rgb') ? \"\".concat(color[1], \"(\").concat(color[2], \", \").concat(color[3], \", \").concat(color[4], \")\") : \"\".concat(color[1], \"(\").concat(color[2], \", \").concat(color[3], \"%, \").concat(color[4], \"%)\");\n      }\n    }\n\n    if (type === 'value' && NUMBER_REGEXP.test(str)) return Number(str);\n    return defaultDecoder(str, defaultDecoder, charset);\n  })\n};\nexport var parseArgsParam = function parseArgsParam(argsString) {\n  var parts = argsString.split(';').map(function (part) {\n    return part.replace('=', '~').replace(':', '=');\n  });\n  return Object.entries(qs.parse(parts.join(';'), QS_OPTIONS)).reduce(function (acc, _ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        key = _ref4[0],\n        value = _ref4[1];\n\n    if (validateArgs(key, value)) return Object.assign(acc, _defineProperty({}, key, value));\n    once.warn(dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      Omitted potentially unsafe URL args.\\n\\n      More info: https://storybook.js.org/docs/react/writing-stories/args#setting-args-through-the-url\\n    \"]))));\n    return acc;\n  }, {});\n};","import \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nvar _excluded = [\"path\", \"selectedKind\", \"selectedStory\"];\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport global from 'global';\nimport qs from 'qs';\nimport deprecate from 'util-deprecate';\nimport { parseArgsParam } from './parseArgsParam';\nvar history = global.history,\n    document = global.document;\nexport function pathToId(path) {\n  var match = (path || '').match(/^\\/story\\/(.+)/);\n\n  if (!match) {\n    throw new Error(\"Invalid path '\".concat(path, \"',  must start with '/story/'\"));\n  }\n\n  return match[1];\n}\n\nvar getQueryString = function getQueryString(_ref) {\n  var selection = _ref.selection,\n      extraParams = _ref.extraParams;\n  var _document$location$se = document.location.search,\n      search = _document$location$se === void 0 ? '' : _document$location$se;\n\n  var _qs$parse = qs.parse(search, {\n    ignoreQueryPrefix: true\n  }),\n      path = _qs$parse.path,\n      selectedKind = _qs$parse.selectedKind,\n      selectedStory = _qs$parse.selectedStory,\n      rest = _objectWithoutProperties(_qs$parse, _excluded);\n\n  return qs.stringify(Object.assign({}, rest, extraParams, selection && {\n    id: selection.storyId,\n    viewMode: selection.viewMode\n  }), {\n    encode: false,\n    addQueryPrefix: true\n  });\n};\n\nexport var setPath = function setPath(selection) {\n  if (!selection) return;\n  var query = getQueryString({\n    selection: selection\n  });\n  var _document$location$ha = document.location.hash,\n      hash = _document$location$ha === void 0 ? '' : _document$location$ha;\n  document.title = selection.storyId;\n  history.replaceState({}, '', \"\".concat(document.location.pathname).concat(query).concat(hash));\n};\n\nvar isObject = function isObject(val) {\n  return val != null && _typeof(val) === 'object' && Array.isArray(val) === false;\n};\n\nvar getFirstString = function getFirstString(v) {\n  if (typeof v === 'string') {\n    return v;\n  }\n\n  if (Array.isArray(v)) {\n    return getFirstString(v[0]);\n  }\n\n  if (isObject(v)) {\n    // @ts-ignore\n    return getFirstString(Object.values(v));\n  }\n\n  return undefined;\n};\n\nvar deprecatedLegacyQuery = deprecate(function () {\n  return 0;\n}, \"URL formats with `selectedKind` and `selectedName` query parameters are deprecated.\\nUse `id=$storyId` instead.\\nSee https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#new-url-structure\");\nexport var getSelectionSpecifierFromPath = function getSelectionSpecifierFromPath() {\n  var query = qs.parse(document.location.search, {\n    ignoreQueryPrefix: true\n  });\n  var args = typeof query.args === 'string' ? parseArgsParam(query.args) : undefined;\n  var globals = typeof query.globals === 'string' ? parseArgsParam(query.globals) : undefined;\n  var viewMode = getFirstString(query.viewMode);\n\n  if (typeof viewMode !== 'string' || !viewMode.match(/docs|story/)) {\n    viewMode = 'story';\n  }\n\n  var path = getFirstString(query.path);\n  var storyId = path ? pathToId(path) : getFirstString(query.id);\n\n  if (storyId) {\n    return {\n      storySpecifier: storyId,\n      args: args,\n      globals: globals,\n      viewMode: viewMode\n    };\n  } // Legacy URL format\n\n\n  var title = getFirstString(query.selectedKind);\n  var name = getFirstString(query.selectedStory);\n\n  if (title && name) {\n    deprecatedLegacyQuery();\n    return {\n      storySpecifier: {\n        title: title,\n        name: name\n      },\n      args: args,\n      globals: globals,\n      viewMode: viewMode\n    };\n  }\n\n  return null;\n};\nexport var UrlStore = /*#__PURE__*/function () {\n  function UrlStore() {\n    _classCallCheck(this, UrlStore);\n\n    this.selectionSpecifier = void 0;\n    this.selection = void 0;\n    this.selectionSpecifier = getSelectionSpecifierFromPath();\n  }\n\n  _createClass(UrlStore, [{\n    key: \"setSelection\",\n    value: function setSelection(selection) {\n      this.selection = selection;\n      setPath(this.selection);\n    }\n  }, {\n    key: \"setQueryParams\",\n    value: function setQueryParams(queryParams) {\n      var query = getQueryString({\n        extraParams: queryParams\n      });\n      var _document$location$ha2 = document.location.hash,\n          hash = _document$location$ha2 === void 0 ? '' : _document$location$ha2;\n      history.replaceState({}, '', \"\".concat(document.location.pathname).concat(query).concat(hash));\n    }\n  }]);\n\n  return UrlStore;\n}();","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar decode_json_1 = __importDefault(require(\"./maps/decode.json\"));\n// Adapted from https://github.com/mathiasbynens/he/blob/master/src/he.js#L94-L119\nvar fromCodePoint = \n// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\nString.fromCodePoint ||\n    function (codePoint) {\n        var output = \"\";\n        if (codePoint > 0xffff) {\n            codePoint -= 0x10000;\n            output += String.fromCharCode(((codePoint >>> 10) & 0x3ff) | 0xd800);\n            codePoint = 0xdc00 | (codePoint & 0x3ff);\n        }\n        output += String.fromCharCode(codePoint);\n        return output;\n    };\nfunction decodeCodePoint(codePoint) {\n    if ((codePoint >= 0xd800 && codePoint <= 0xdfff) || codePoint > 0x10ffff) {\n        return \"\\uFFFD\";\n    }\n    if (codePoint in decode_json_1.default) {\n        codePoint = decode_json_1.default[codePoint];\n    }\n    return fromCodePoint(codePoint);\n}\nexports.default = decodeCodePoint;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeHTML = exports.decodeHTMLStrict = exports.decodeXML = void 0;\nvar entities_json_1 = __importDefault(require(\"./maps/entities.json\"));\nvar legacy_json_1 = __importDefault(require(\"./maps/legacy.json\"));\nvar xml_json_1 = __importDefault(require(\"./maps/xml.json\"));\nvar decode_codepoint_1 = __importDefault(require(\"./decode_codepoint\"));\nvar strictEntityRe = /&(?:[a-zA-Z0-9]+|#[xX][\\da-fA-F]+|#\\d+);/g;\nexports.decodeXML = getStrictDecoder(xml_json_1.default);\nexports.decodeHTMLStrict = getStrictDecoder(entities_json_1.default);\nfunction getStrictDecoder(map) {\n    var replace = getReplacer(map);\n    return function (str) { return String(str).replace(strictEntityRe, replace); };\n}\nvar sorter = function (a, b) { return (a < b ? 1 : -1); };\nexports.decodeHTML = (function () {\n    var legacy = Object.keys(legacy_json_1.default).sort(sorter);\n    var keys = Object.keys(entities_json_1.default).sort(sorter);\n    for (var i = 0, j = 0; i < keys.length; i++) {\n        if (legacy[j] === keys[i]) {\n            keys[i] += \";?\";\n            j++;\n        }\n        else {\n            keys[i] += \";\";\n        }\n    }\n    var re = new RegExp(\"&(?:\" + keys.join(\"|\") + \"|#[xX][\\\\da-fA-F]+;?|#\\\\d+;?)\", \"g\");\n    var replace = getReplacer(entities_json_1.default);\n    function replacer(str) {\n        if (str.substr(-1) !== \";\")\n            str += \";\";\n        return replace(str);\n    }\n    // TODO consider creating a merged map\n    return function (str) { return String(str).replace(re, replacer); };\n})();\nfunction getReplacer(map) {\n    return function replace(str) {\n        if (str.charAt(1) === \"#\") {\n            var secondChar = str.charAt(2);\n            if (secondChar === \"X\" || secondChar === \"x\") {\n                return decode_codepoint_1.default(parseInt(str.substr(3), 16));\n            }\n            return decode_codepoint_1.default(parseInt(str.substr(2), 10));\n        }\n        // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n        return map[str.slice(1, -1)] || str;\n    };\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.escapeUTF8 = exports.escape = exports.encodeNonAsciiHTML = exports.encodeHTML = exports.encodeXML = void 0;\nvar xml_json_1 = __importDefault(require(\"./maps/xml.json\"));\nvar inverseXML = getInverseObj(xml_json_1.default);\nvar xmlReplacer = getInverseReplacer(inverseXML);\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in XML\n * documents using XML entities.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexports.encodeXML = getASCIIEncoder(inverseXML);\nvar entities_json_1 = __importDefault(require(\"./maps/entities.json\"));\nvar inverseHTML = getInverseObj(entities_json_1.default);\nvar htmlReplacer = getInverseReplacer(inverseHTML);\n/**\n * Encodes all entities and non-ASCII characters in the input.\n *\n * This includes characters that are valid ASCII characters in HTML documents.\n * For example `#` will be encoded as `&num;`. To get a more compact output,\n * consider using the `encodeNonAsciiHTML` function.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexports.encodeHTML = getInverse(inverseHTML, htmlReplacer);\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in HTML\n * documents using HTML entities.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexports.encodeNonAsciiHTML = getASCIIEncoder(inverseHTML);\nfunction getInverseObj(obj) {\n    return Object.keys(obj)\n        .sort()\n        .reduce(function (inverse, name) {\n        inverse[obj[name]] = \"&\" + name + \";\";\n        return inverse;\n    }, {});\n}\nfunction getInverseReplacer(inverse) {\n    var single = [];\n    var multiple = [];\n    for (var _i = 0, _a = Object.keys(inverse); _i < _a.length; _i++) {\n        var k = _a[_i];\n        if (k.length === 1) {\n            // Add value to single array\n            single.push(\"\\\\\" + k);\n        }\n        else {\n            // Add value to multiple array\n            multiple.push(k);\n        }\n    }\n    // Add ranges to single characters.\n    single.sort();\n    for (var start = 0; start < single.length - 1; start++) {\n        // Find the end of a run of characters\n        var end = start;\n        while (end < single.length - 1 &&\n            single[end].charCodeAt(1) + 1 === single[end + 1].charCodeAt(1)) {\n            end += 1;\n        }\n        var count = 1 + end - start;\n        // We want to replace at least three characters\n        if (count < 3)\n            continue;\n        single.splice(start, count, single[start] + \"-\" + single[end]);\n    }\n    multiple.unshift(\"[\" + single.join(\"\") + \"]\");\n    return new RegExp(multiple.join(\"|\"), \"g\");\n}\n// /[^\\0-\\x7F]/gu\nvar reNonASCII = /(?:[\\x80-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])/g;\nvar getCodePoint = \n// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\nString.prototype.codePointAt != null\n    ? // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        function (str) { return str.codePointAt(0); }\n    : // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n        function (c) {\n            return (c.charCodeAt(0) - 0xd800) * 0x400 +\n                c.charCodeAt(1) -\n                0xdc00 +\n                0x10000;\n        };\nfunction singleCharReplacer(c) {\n    return \"&#x\" + (c.length > 1 ? getCodePoint(c) : c.charCodeAt(0))\n        .toString(16)\n        .toUpperCase() + \";\";\n}\nfunction getInverse(inverse, re) {\n    return function (data) {\n        return data\n            .replace(re, function (name) { return inverse[name]; })\n            .replace(reNonASCII, singleCharReplacer);\n    };\n}\nvar reEscapeChars = new RegExp(xmlReplacer.source + \"|\" + reNonASCII.source, \"g\");\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in XML\n * documents using numeric hexadecimal reference (eg. `&#xfc;`).\n *\n * Have a look at `escapeUTF8` if you want a more concise output at the expense\n * of reduced transportability.\n *\n * @param data String to escape.\n */\nfunction escape(data) {\n    return data.replace(reEscapeChars, singleCharReplacer);\n}\nexports.escape = escape;\n/**\n * Encodes all characters not valid in XML documents using numeric hexadecimal\n * reference (eg. `&#xfc;`).\n *\n * Note that the output will be character-set dependent.\n *\n * @param data String to escape.\n */\nfunction escapeUTF8(data) {\n    return data.replace(xmlReplacer, singleCharReplacer);\n}\nexports.escapeUTF8 = escapeUTF8;\nfunction getASCIIEncoder(obj) {\n    return function (data) {\n        return data.replace(reEscapeChars, function (c) { return obj[c] || singleCharReplacer(c); });\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decodeXMLStrict = exports.decodeHTML5Strict = exports.decodeHTML4Strict = exports.decodeHTML5 = exports.decodeHTML4 = exports.decodeHTMLStrict = exports.decodeHTML = exports.decodeXML = exports.encodeHTML5 = exports.encodeHTML4 = exports.escapeUTF8 = exports.escape = exports.encodeNonAsciiHTML = exports.encodeHTML = exports.encodeXML = exports.encode = exports.decodeStrict = exports.decode = void 0;\nvar decode_1 = require(\"./decode\");\nvar encode_1 = require(\"./encode\");\n/**\n * Decodes a string with entities.\n *\n * @param data String to decode.\n * @param level Optional level to decode at. 0 = XML, 1 = HTML. Default is 0.\n * @deprecated Use `decodeXML` or `decodeHTML` directly.\n */\nfunction decode(data, level) {\n    return (!level || level <= 0 ? decode_1.decodeXML : decode_1.decodeHTML)(data);\n}\nexports.decode = decode;\n/**\n * Decodes a string with entities. Does not allow missing trailing semicolons for entities.\n *\n * @param data String to decode.\n * @param level Optional level to decode at. 0 = XML, 1 = HTML. Default is 0.\n * @deprecated Use `decodeHTMLStrict` or `decodeXML` directly.\n */\nfunction decodeStrict(data, level) {\n    return (!level || level <= 0 ? decode_1.decodeXML : decode_1.decodeHTMLStrict)(data);\n}\nexports.decodeStrict = decodeStrict;\n/**\n * Encodes a string with entities.\n *\n * @param data String to encode.\n * @param level Optional level to encode at. 0 = XML, 1 = HTML. Default is 0.\n * @deprecated Use `encodeHTML`, `encodeXML` or `encodeNonAsciiHTML` directly.\n */\nfunction encode(data, level) {\n    return (!level || level <= 0 ? encode_1.encodeXML : encode_1.encodeHTML)(data);\n}\nexports.encode = encode;\nvar encode_2 = require(\"./encode\");\nObject.defineProperty(exports, \"encodeXML\", { enumerable: true, get: function () { return encode_2.encodeXML; } });\nObject.defineProperty(exports, \"encodeHTML\", { enumerable: true, get: function () { return encode_2.encodeHTML; } });\nObject.defineProperty(exports, \"encodeNonAsciiHTML\", { enumerable: true, get: function () { return encode_2.encodeNonAsciiHTML; } });\nObject.defineProperty(exports, \"escape\", { enumerable: true, get: function () { return encode_2.escape; } });\nObject.defineProperty(exports, \"escapeUTF8\", { enumerable: true, get: function () { return encode_2.escapeUTF8; } });\n// Legacy aliases (deprecated)\nObject.defineProperty(exports, \"encodeHTML4\", { enumerable: true, get: function () { return encode_2.encodeHTML; } });\nObject.defineProperty(exports, \"encodeHTML5\", { enumerable: true, get: function () { return encode_2.encodeHTML; } });\nvar decode_2 = require(\"./decode\");\nObject.defineProperty(exports, \"decodeXML\", { enumerable: true, get: function () { return decode_2.decodeXML; } });\nObject.defineProperty(exports, \"decodeHTML\", { enumerable: true, get: function () { return decode_2.decodeHTML; } });\nObject.defineProperty(exports, \"decodeHTMLStrict\", { enumerable: true, get: function () { return decode_2.decodeHTMLStrict; } });\n// Legacy aliases (deprecated)\nObject.defineProperty(exports, \"decodeHTML4\", { enumerable: true, get: function () { return decode_2.decodeHTML; } });\nObject.defineProperty(exports, \"decodeHTML5\", { enumerable: true, get: function () { return decode_2.decodeHTML; } });\nObject.defineProperty(exports, \"decodeHTML4Strict\", { enumerable: true, get: function () { return decode_2.decodeHTMLStrict; } });\nObject.defineProperty(exports, \"decodeHTML5Strict\", { enumerable: true, get: function () { return decode_2.decodeHTMLStrict; } });\nObject.defineProperty(exports, \"decodeXMLStrict\", { enumerable: true, get: function () { return decode_2.decodeXML; } });\n","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar entities = require('entities');\n\nvar defaults = {\n  fg: '#FFF',\n  bg: '#000',\n  newline: false,\n  escapeXML: false,\n  stream: false,\n  colors: getDefaultColors()\n};\n\nfunction getDefaultColors() {\n  var colors = {\n    0: '#000',\n    1: '#A00',\n    2: '#0A0',\n    3: '#A50',\n    4: '#00A',\n    5: '#A0A',\n    6: '#0AA',\n    7: '#AAA',\n    8: '#555',\n    9: '#F55',\n    10: '#5F5',\n    11: '#FF5',\n    12: '#55F',\n    13: '#F5F',\n    14: '#5FF',\n    15: '#FFF'\n  };\n  range(0, 5).forEach(function (red) {\n    range(0, 5).forEach(function (green) {\n      range(0, 5).forEach(function (blue) {\n        return setStyleColor(red, green, blue, colors);\n      });\n    });\n  });\n  range(0, 23).forEach(function (gray) {\n    var c = gray + 232;\n    var l = toHexString(gray * 10 + 8);\n    colors[c] = '#' + l + l + l;\n  });\n  return colors;\n}\n/**\n * @param {number} red\n * @param {number} green\n * @param {number} blue\n * @param {object} colors\n */\n\n\nfunction setStyleColor(red, green, blue, colors) {\n  var c = 16 + red * 36 + green * 6 + blue;\n  var r = red > 0 ? red * 40 + 55 : 0;\n  var g = green > 0 ? green * 40 + 55 : 0;\n  var b = blue > 0 ? blue * 40 + 55 : 0;\n  colors[c] = toColorHexString([r, g, b]);\n}\n/**\n * Converts from a number like 15 to a hex string like 'F'\n * @param {number} num\n * @returns {string}\n */\n\n\nfunction toHexString(num) {\n  var str = num.toString(16);\n\n  while (str.length < 2) {\n    str = '0' + str;\n  }\n\n  return str;\n}\n/**\n * Converts from an array of numbers like [15, 15, 15] to a hex string like 'FFF'\n * @param {[red, green, blue]} ref\n * @returns {string}\n */\n\n\nfunction toColorHexString(ref) {\n  var results = [];\n\n  var _iterator = _createForOfIteratorHelper(ref),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var r = _step.value;\n      results.push(toHexString(r));\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return '#' + results.join('');\n}\n/**\n * @param {Array} stack\n * @param {string} token\n * @param {*} data\n * @param {object} options\n */\n\n\nfunction generateOutput(stack, token, data, options) {\n  var result;\n\n  if (token === 'text') {\n    result = pushText(data, options);\n  } else if (token === 'display') {\n    result = handleDisplay(stack, data, options);\n  } else if (token === 'xterm256') {\n    result = pushForegroundColor(stack, options.colors[data]);\n  } else if (token === 'rgb') {\n    result = handleRgb(stack, data);\n  }\n\n  return result;\n}\n/**\n * @param {Array} stack\n * @param {string} data\n * @returns {*}\n */\n\n\nfunction handleRgb(stack, data) {\n  data = data.substring(2).slice(0, -1);\n  var operation = +data.substr(0, 2);\n  var color = data.substring(5).split(';');\n  var rgb = color.map(function (value) {\n    return ('0' + Number(value).toString(16)).substr(-2);\n  }).join('');\n  return pushStyle(stack, (operation === 38 ? 'color:#' : 'background-color:#') + rgb);\n}\n/**\n * @param {Array} stack\n * @param {number} code\n * @param {object} options\n * @returns {*}\n */\n\n\nfunction handleDisplay(stack, code, options) {\n  code = parseInt(code, 10);\n  var codeMap = {\n    '-1': function _() {\n      return '<br/>';\n    },\n    0: function _() {\n      return stack.length && resetStyles(stack);\n    },\n    1: function _() {\n      return pushTag(stack, 'b');\n    },\n    3: function _() {\n      return pushTag(stack, 'i');\n    },\n    4: function _() {\n      return pushTag(stack, 'u');\n    },\n    8: function _() {\n      return pushStyle(stack, 'display:none');\n    },\n    9: function _() {\n      return pushTag(stack, 'strike');\n    },\n    22: function _() {\n      return pushStyle(stack, 'font-weight:normal;text-decoration:none;font-style:normal');\n    },\n    23: function _() {\n      return closeTag(stack, 'i');\n    },\n    24: function _() {\n      return closeTag(stack, 'u');\n    },\n    39: function _() {\n      return pushForegroundColor(stack, options.fg);\n    },\n    49: function _() {\n      return pushBackgroundColor(stack, options.bg);\n    },\n    53: function _() {\n      return pushStyle(stack, 'text-decoration:overline');\n    }\n  };\n  var result;\n\n  if (codeMap[code]) {\n    result = codeMap[code]();\n  } else if (4 < code && code < 7) {\n    result = pushTag(stack, 'blink');\n  } else if (29 < code && code < 38) {\n    result = pushForegroundColor(stack, options.colors[code - 30]);\n  } else if (39 < code && code < 48) {\n    result = pushBackgroundColor(stack, options.colors[code - 40]);\n  } else if (89 < code && code < 98) {\n    result = pushForegroundColor(stack, options.colors[8 + (code - 90)]);\n  } else if (99 < code && code < 108) {\n    result = pushBackgroundColor(stack, options.colors[8 + (code - 100)]);\n  }\n\n  return result;\n}\n/**\n * Clear all the styles\n * @returns {string}\n */\n\n\nfunction resetStyles(stack) {\n  var stackClone = stack.slice(0);\n  stack.length = 0;\n  return stackClone.reverse().map(function (tag) {\n    return '</' + tag + '>';\n  }).join('');\n}\n/**\n * Creates an array of numbers ranging from low to high\n * @param {number} low\n * @param {number} high\n * @returns {Array}\n * @example range(3, 7); // creates [3, 4, 5, 6, 7]\n */\n\n\nfunction range(low, high) {\n  var results = [];\n\n  for (var j = low; j <= high; j++) {\n    results.push(j);\n  }\n\n  return results;\n}\n/**\n * Returns a new function that is true if value is NOT the same category\n * @param {string} category\n * @returns {function}\n */\n\n\nfunction notCategory(category) {\n  return function (e) {\n    return (category === null || e.category !== category) && category !== 'all';\n  };\n}\n/**\n * Converts a code into an ansi token type\n * @param {number} code\n * @returns {string}\n */\n\n\nfunction categoryForCode(code) {\n  code = parseInt(code, 10);\n  var result = null;\n\n  if (code === 0) {\n    result = 'all';\n  } else if (code === 1) {\n    result = 'bold';\n  } else if (2 < code && code < 5) {\n    result = 'underline';\n  } else if (4 < code && code < 7) {\n    result = 'blink';\n  } else if (code === 8) {\n    result = 'hide';\n  } else if (code === 9) {\n    result = 'strike';\n  } else if (29 < code && code < 38 || code === 39 || 89 < code && code < 98) {\n    result = 'foreground-color';\n  } else if (39 < code && code < 48 || code === 49 || 99 < code && code < 108) {\n    result = 'background-color';\n  }\n\n  return result;\n}\n/**\n * @param {string} text\n * @param {object} options\n * @returns {string}\n */\n\n\nfunction pushText(text, options) {\n  if (options.escapeXML) {\n    return entities.encodeXML(text);\n  }\n\n  return text;\n}\n/**\n * @param {Array} stack\n * @param {string} tag\n * @param {string} [style='']\n * @returns {string}\n */\n\n\nfunction pushTag(stack, tag, style) {\n  if (!style) {\n    style = '';\n  }\n\n  stack.push(tag);\n  return \"<\".concat(tag).concat(style ? \" style=\\\"\".concat(style, \"\\\"\") : '', \">\");\n}\n/**\n * @param {Array} stack\n * @param {string} style\n * @returns {string}\n */\n\n\nfunction pushStyle(stack, style) {\n  return pushTag(stack, 'span', style);\n}\n\nfunction pushForegroundColor(stack, color) {\n  return pushTag(stack, 'span', 'color:' + color);\n}\n\nfunction pushBackgroundColor(stack, color) {\n  return pushTag(stack, 'span', 'background-color:' + color);\n}\n/**\n * @param {Array} stack\n * @param {string} style\n * @returns {string}\n */\n\n\nfunction closeTag(stack, style) {\n  var last;\n\n  if (stack.slice(-1)[0] === style) {\n    last = stack.pop();\n  }\n\n  if (last) {\n    return '</' + style + '>';\n  }\n}\n/**\n * @param {string} text\n * @param {object} options\n * @param {function} callback\n * @returns {Array}\n */\n\n\nfunction tokenize(text, options, callback) {\n  var ansiMatch = false;\n  var ansiHandler = 3;\n\n  function remove() {\n    return '';\n  }\n\n  function removeXterm256(m, g1) {\n    callback('xterm256', g1);\n    return '';\n  }\n\n  function newline(m) {\n    if (options.newline) {\n      callback('display', -1);\n    } else {\n      callback('text', m);\n    }\n\n    return '';\n  }\n\n  function ansiMess(m, g1) {\n    ansiMatch = true;\n\n    if (g1.trim().length === 0) {\n      g1 = '0';\n    }\n\n    g1 = g1.trimRight(';').split(';');\n\n    var _iterator2 = _createForOfIteratorHelper(g1),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var g = _step2.value;\n        callback('display', g);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    return '';\n  }\n\n  function realText(m) {\n    callback('text', m);\n    return '';\n  }\n\n  function rgb(m) {\n    callback('rgb', m);\n    return '';\n  }\n  /* eslint no-control-regex:0 */\n\n\n  var tokens = [{\n    pattern: /^\\x08+/,\n    sub: remove\n  }, {\n    pattern: /^\\x1b\\[[012]?K/,\n    sub: remove\n  }, {\n    pattern: /^\\x1b\\[\\(B/,\n    sub: remove\n  }, {\n    pattern: /^\\x1b\\[[34]8;2;\\d+;\\d+;\\d+m/,\n    sub: rgb\n  }, {\n    pattern: /^\\x1b\\[38;5;(\\d+)m/,\n    sub: removeXterm256\n  }, {\n    pattern: /^\\n/,\n    sub: newline\n  }, {\n    pattern: /^\\r+\\n/,\n    sub: newline\n  }, {\n    pattern: /^\\x1b\\[((?:\\d{1,3};?)+|)m/,\n    sub: ansiMess\n  }, {\n    // CSI n J\n    // ED - Erase in Display Clears part of the screen.\n    // If n is 0 (or missing), clear from cursor to end of screen.\n    // If n is 1, clear from cursor to beginning of the screen.\n    // If n is 2, clear entire screen (and moves cursor to upper left on DOS ANSI.SYS).\n    // If n is 3, clear entire screen and delete all lines saved in the scrollback buffer\n    //   (this feature was added for xterm and is supported by other terminal applications).\n    pattern: /^\\x1b\\[\\d?J/,\n    sub: remove\n  }, {\n    // CSI n ; m f\n    // HVP - Horizontal Vertical Position Same as CUP\n    pattern: /^\\x1b\\[\\d{0,3};\\d{0,3}f/,\n    sub: remove\n  }, {\n    // catch-all for CSI sequences?\n    pattern: /^\\x1b\\[?[\\d;]{0,3}/,\n    sub: remove\n  }, {\n    /**\n     * extracts real text - not containing:\n     * - `\\x1b' - ESC - escape (Ascii 27)\n     * - '\\x08' - BS - backspace (Ascii 8)\n     * - `\\n` - Newline - linefeed (LF) (ascii 10)\n     * - `\\r` - Windows Carriage Return (CR)\n     */\n    pattern: /^(([^\\x1b\\x08\\r\\n])+)/,\n    sub: realText\n  }];\n\n  function process(handler, i) {\n    if (i > ansiHandler && ansiMatch) {\n      return;\n    }\n\n    ansiMatch = false;\n    text = text.replace(handler.pattern, handler.sub);\n  }\n\n  var results1 = [];\n  var _text = text,\n      length = _text.length;\n\n  outer: while (length > 0) {\n    for (var i = 0, o = 0, len = tokens.length; o < len; i = ++o) {\n      var handler = tokens[i];\n      process(handler, i);\n\n      if (text.length !== length) {\n        // We matched a token and removed it from the text. We need to\n        // start matching *all* tokens against the new text.\n        length = text.length;\n        continue outer;\n      }\n    }\n\n    if (text.length === length) {\n      break;\n    }\n\n    results1.push(0);\n    length = text.length;\n  }\n\n  return results1;\n}\n/**\n * If streaming, then the stack is \"sticky\"\n *\n * @param {Array} stickyStack\n * @param {string} token\n * @param {*} data\n * @returns {Array}\n */\n\n\nfunction updateStickyStack(stickyStack, token, data) {\n  if (token !== 'text') {\n    stickyStack = stickyStack.filter(notCategory(categoryForCode(data)));\n    stickyStack.push({\n      token: token,\n      data: data,\n      category: categoryForCode(data)\n    });\n  }\n\n  return stickyStack;\n}\n\nvar Filter = /*#__PURE__*/function () {\n  /**\n   * @param {object} options\n   * @param {string=} options.fg The default foreground color used when reset color codes are encountered.\n   * @param {string=} options.bg The default background color used when reset color codes are encountered.\n   * @param {boolean=} options.newline Convert newline characters to `<br/>`.\n   * @param {boolean=} options.escapeXML Generate HTML/XML entities.\n   * @param {boolean=} options.stream Save style state across invocations of `toHtml()`.\n   * @param {(string[] | {[code: number]: string})=} options.colors Can override specific colors or the entire ANSI palette.\n   */\n  function Filter(options) {\n    _classCallCheck(this, Filter);\n\n    options = options || {};\n\n    if (options.colors) {\n      options.colors = Object.assign({}, defaults.colors, options.colors);\n    }\n\n    this.options = Object.assign({}, defaults, options);\n    this.stack = [];\n    this.stickyStack = [];\n  }\n  /**\n   * @param {string | string[]} input\n   * @returns {string}\n   */\n\n\n  _createClass(Filter, [{\n    key: \"toHtml\",\n    value: function toHtml(input) {\n      var _this = this;\n\n      input = typeof input === 'string' ? [input] : input;\n      var stack = this.stack,\n          options = this.options;\n      var buf = [];\n      this.stickyStack.forEach(function (element) {\n        var output = generateOutput(stack, element.token, element.data, options);\n\n        if (output) {\n          buf.push(output);\n        }\n      });\n      tokenize(input.join(''), options, function (token, data) {\n        var output = generateOutput(stack, token, data, options);\n\n        if (output) {\n          buf.push(output);\n        }\n\n        if (options.stream) {\n          _this.stickyStack = updateStickyStack(_this.stickyStack, token, data);\n        }\n      });\n\n      if (stack.length) {\n        buf.push(resetStyles(stack));\n      }\n\n      return buf.join('');\n    }\n  }]);\n\n  return Filter;\n}();\n\nmodule.exports = Filter;\n//# sourceMappingURL=ansi_to_html.js.map","import \"core-js/modules/es.object.freeze.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\n\nvar _templateObject;\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.array.slice.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport global from 'global';\nimport { logger } from '@storybook/client-logger';\nimport AnsiToHtml from 'ansi-to-html';\nimport dedent from 'ts-dedent';\nimport qs from 'qs';\nvar document = global.document;\nvar PREPARING_DELAY = 100;\nvar layoutClassMap = {\n  centered: 'sb-main-centered',\n  fullscreen: 'sb-main-fullscreen',\n  padded: 'sb-main-padded'\n};\nvar Mode;\n\n(function (Mode) {\n  Mode[\"MAIN\"] = \"MAIN\";\n  Mode[\"NOPREVIEW\"] = \"NOPREVIEW\";\n  Mode[\"PREPARING_STORY\"] = \"PREPARING_STORY\";\n  Mode[\"PREPARING_DOCS\"] = \"PREPARING_DOCS\";\n  Mode[\"ERROR\"] = \"ERROR\";\n})(Mode || (Mode = {}));\n\nvar classes = {\n  PREPARING_STORY: 'sb-show-preparing-story',\n  PREPARING_DOCS: 'sb-show-preparing-docs',\n  MAIN: 'sb-show-main',\n  NOPREVIEW: 'sb-show-nopreview',\n  ERROR: 'sb-show-errordisplay'\n};\nvar ansiConverter = new AnsiToHtml({\n  escapeXML: true\n});\nexport var WebView = /*#__PURE__*/function () {\n  function WebView() {\n    _classCallCheck(this, WebView);\n\n    this.currentLayoutClass = void 0;\n    this.testing = false;\n    this.preparingTimeout = null;\n\n    // Special code for testing situations\n    var _qs$parse = qs.parse(document.location.search, {\n      ignoreQueryPrefix: true\n    }),\n        __SPECIAL_TEST_PARAMETER__ = _qs$parse.__SPECIAL_TEST_PARAMETER__;\n\n    switch (__SPECIAL_TEST_PARAMETER__) {\n      case 'preparing-story':\n        {\n          this.showPreparingStory();\n          this.testing = true;\n          break;\n        }\n\n      case 'preparing-docs':\n        {\n          this.showPreparingDocs();\n          this.testing = true;\n          break;\n        }\n\n      default: // pass;\n\n    }\n  } // Get ready to render a story, returning the element to render to\n\n\n  _createClass(WebView, [{\n    key: \"prepareForStory\",\n    value: function prepareForStory(story) {\n      this.showStory();\n      this.applyLayout(story.parameters.layout);\n      document.documentElement.scrollTop = 0;\n      document.documentElement.scrollLeft = 0;\n      return this.storyRoot();\n    }\n  }, {\n    key: \"storyRoot\",\n    value: function storyRoot() {\n      return document.getElementById('root');\n    }\n  }, {\n    key: \"prepareForDocs\",\n    value: function prepareForDocs() {\n      this.showMain();\n      this.showDocs();\n      this.applyLayout('fullscreen');\n      return this.docsRoot();\n    }\n  }, {\n    key: \"docsRoot\",\n    value: function docsRoot() {\n      return document.getElementById('docs-root');\n    }\n  }, {\n    key: \"applyLayout\",\n    value: function applyLayout() {\n      var layout = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'padded';\n\n      if (layout === 'none') {\n        document.body.classList.remove(this.currentLayoutClass);\n        this.currentLayoutClass = null;\n        return;\n      }\n\n      this.checkIfLayoutExists(layout);\n      var layoutClass = layoutClassMap[layout];\n      document.body.classList.remove(this.currentLayoutClass);\n      document.body.classList.add(layoutClass);\n      this.currentLayoutClass = layoutClass;\n    }\n  }, {\n    key: \"checkIfLayoutExists\",\n    value: function checkIfLayoutExists(layout) {\n      if (!layoutClassMap[layout]) {\n        logger.warn(dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"The desired layout: \", \" is not a valid option.\\n         The possible options are: \", \", none.\"])), layout, Object.keys(layoutClassMap).join(', ')));\n      }\n    }\n  }, {\n    key: \"showMode\",\n    value: function showMode(mode) {\n      clearTimeout(this.preparingTimeout);\n      Object.keys(Mode).forEach(function (otherMode) {\n        if (otherMode === mode) {\n          document.body.classList.add(classes[otherMode]);\n        } else {\n          document.body.classList.remove(classes[otherMode]);\n        }\n      });\n    }\n  }, {\n    key: \"showErrorDisplay\",\n    value: function showErrorDisplay(_ref) {\n      var _ref$message = _ref.message,\n          message = _ref$message === void 0 ? '' : _ref$message,\n          _ref$stack = _ref.stack,\n          stack = _ref$stack === void 0 ? '' : _ref$stack;\n      var header = message;\n      var detail = stack;\n      var parts = message.split('\\n');\n\n      if (parts.length > 1) {\n        var _parts = _slicedToArray(parts, 1);\n\n        header = _parts[0];\n        detail = parts.slice(1).join('\\n');\n      }\n\n      document.getElementById('error-message').innerHTML = ansiConverter.toHtml(header);\n      document.getElementById('error-stack').innerHTML = ansiConverter.toHtml(detail);\n      this.showMode(Mode.ERROR);\n    }\n  }, {\n    key: \"showNoPreview\",\n    value: function showNoPreview() {\n      var _this$storyRoot, _this$docsRoot;\n\n      if (this.testing) return;\n      this.showMode(Mode.NOPREVIEW); // In storyshots this can get called and these two can be null\n\n      (_this$storyRoot = this.storyRoot()) === null || _this$storyRoot === void 0 ? void 0 : _this$storyRoot.setAttribute('hidden', 'true');\n      (_this$docsRoot = this.docsRoot()) === null || _this$docsRoot === void 0 ? void 0 : _this$docsRoot.setAttribute('hidden', 'true');\n    }\n  }, {\n    key: \"showPreparingStory\",\n    value: function showPreparingStory() {\n      var _this = this;\n\n      var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref2$immediate = _ref2.immediate,\n          immediate = _ref2$immediate === void 0 ? false : _ref2$immediate;\n\n      clearTimeout(this.preparingTimeout);\n\n      if (immediate) {\n        this.showMode(Mode.PREPARING_STORY);\n      } else {\n        this.preparingTimeout = setTimeout(function () {\n          return _this.showMode(Mode.PREPARING_STORY);\n        }, PREPARING_DELAY);\n      }\n    }\n  }, {\n    key: \"showPreparingDocs\",\n    value: function showPreparingDocs() {\n      var _this2 = this;\n\n      clearTimeout(this.preparingTimeout);\n      this.preparingTimeout = setTimeout(function () {\n        return _this2.showMode(Mode.PREPARING_DOCS);\n      }, PREPARING_DELAY);\n    }\n  }, {\n    key: \"showMain\",\n    value: function showMain() {\n      this.showMode(Mode.MAIN);\n    }\n  }, {\n    key: \"showDocs\",\n    value: function showDocs() {\n      this.storyRoot().setAttribute('hidden', 'true');\n      this.docsRoot().removeAttribute('hidden');\n    }\n  }, {\n    key: \"showStory\",\n    value: function showStory() {\n      this.docsRoot().setAttribute('hidden', 'true');\n      this.storyRoot().removeAttribute('hidden');\n    }\n  }, {\n    key: \"showStoryDuringRender\",\n    value: function showStoryDuringRender() {\n      // When 'showStory' is called (at the start of rendering) we get rid of our display:none\n      // from all children of the root (but keep the preparing spinner visible). This may mean\n      // that very weird and high z-index stories are briefly visible.\n      // See https://github.com/storybookjs/storybook/issues/16847 and\n      //   http://localhost:9011/?path=/story/core-rendering--auto-focus (official SB)\n      document.body.classList.add(classes.MAIN);\n    }\n  }]);\n\n  return WebView;\n}();","const scriptRel = 'modulepreload';const seen = {};const base = '/';export const __vitePreload = function preload(baseModule, deps) {\n    // @ts-ignore\n    if (!__VITE_IS_MODERN__ || !deps || deps.length === 0) {\n        return baseModule();\n    }\n    return Promise.all(deps.map((dep) => {\n        // @ts-ignore\n        dep = `${base}${dep}`;\n        // @ts-ignore\n        if (dep in seen)\n            return;\n        // @ts-ignore\n        seen[dep] = true;\n        const isCss = dep.endsWith('.css');\n        const cssSelector = isCss ? '[rel=\"stylesheet\"]' : '';\n        // @ts-ignore check if the file is already preloaded by SSR markup\n        if (document.querySelector(`link[href=\"${dep}\"]${cssSelector}`)) {\n            return;\n        }\n        // @ts-ignore\n        const link = document.createElement('link');\n        // @ts-ignore\n        link.rel = isCss ? 'stylesheet' : scriptRel;\n        if (!isCss) {\n            link.as = 'script';\n            link.crossOrigin = '';\n        }\n        link.href = dep;\n        // @ts-ignore\n        document.head.appendChild(link);\n        if (isCss) {\n            return new Promise((res, rej) => {\n                link.addEventListener('load', res);\n                link.addEventListener('error', () => rej(new Error(`Unable to preload CSS for ${dep}`)));\n            });\n        }\n    })).then(() => baseModule());\n}","import \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport global from 'global';\nimport { DOCS_RENDERED } from '@storybook/core-events';\nexport var DocsRender = /*#__PURE__*/function () {\n  // eslint-disable-next-line no-useless-constructor\n  function DocsRender(channel, store, id, story) {\n    _classCallCheck(this, DocsRender);\n\n    this.channel = channel;\n    this.store = store;\n    this.id = id;\n    this.story = story;\n    this.canvasElement = void 0;\n    this.context = void 0;\n    this.disableKeyListeners = false;\n  } // DocsRender doesn't prepare, it is created *from* a prepared StoryRender\n\n\n  _createClass(DocsRender, [{\n    key: \"isPreparing\",\n    value: function isPreparing() {\n      return false;\n    }\n  }, {\n    key: \"renderToElement\",\n    value: function () {\n      var _renderToElement = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(canvasElement, renderStoryToElement) {\n        var _this = this,\n            _global$FEATURES;\n\n        var _this$story, id, title, name, csfFile;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.canvasElement = canvasElement;\n                _this$story = this.story, id = _this$story.id, title = _this$story.title, name = _this$story.name;\n                _context.next = 4;\n                return this.store.loadCSFFileByStoryId(this.id);\n\n              case 4:\n                csfFile = _context.sent;\n                this.context = Object.assign({\n                  id: id,\n                  title: title,\n                  name: name,\n                  // NOTE: these two functions are *sync* so cannot access stories from other CSF files\n                  storyById: function storyById(storyId) {\n                    return _this.store.storyFromCSFFile({\n                      storyId: storyId,\n                      csfFile: csfFile\n                    });\n                  },\n                  componentStories: function componentStories() {\n                    return _this.store.componentStoriesFromCSFFile({\n                      csfFile: csfFile\n                    });\n                  },\n                  loadStory: function loadStory(storyId) {\n                    return _this.store.loadStory({\n                      storyId: storyId\n                    });\n                  },\n                  renderStoryToElement: renderStoryToElement,\n                  getStoryContext: function getStoryContext(renderedStory) {\n                    return Object.assign({}, _this.store.getStoryContext(renderedStory), {\n                      viewMode: 'docs'\n                    });\n                  }\n                }, !((_global$FEATURES = global.FEATURES) !== null && _global$FEATURES !== void 0 && _global$FEATURES.breakingChangesV7) && this.store.getStoryContext(this.story));\n                return _context.abrupt(\"return\", this.render());\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function renderToElement(_x, _x2) {\n        return _renderToElement.apply(this, arguments);\n      }\n\n      return renderToElement;\n    }()\n  }, {\n    key: \"render\",\n    value: function () {\n      var _render = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this2 = this;\n\n        var renderer;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(!this.story || !this.context || !this.canvasElement)) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                throw new Error('DocsRender not ready to render');\n\n              case 2:\n                _context2.next = 4;\n                return import('./renderDocs');\n\n              case 4:\n                renderer = _context2.sent;\n                renderer.renderDocs(this.story, this.context, this.canvasElement, function () {\n                  return _this2.channel.emit(DOCS_RENDERED, _this2.id);\n                });\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function render() {\n        return _render.apply(this, arguments);\n      }\n\n      return render;\n    }()\n  }, {\n    key: \"rerender\",\n    value: function () {\n      var _rerender = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        var _global$FEATURES2;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if ((_global$FEATURES2 = global.FEATURES) !== null && _global$FEATURES2 !== void 0 && _global$FEATURES2.modernInlineRender) {\n                  _context3.next = 3;\n                  break;\n                }\n\n                _context3.next = 3;\n                return this.render();\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function rerender() {\n        return _rerender.apply(this, arguments);\n      }\n\n      return rerender;\n    }()\n  }, {\n    key: \"teardown\",\n    value: function () {\n      var _teardown = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var _ref,\n            viewModeChanged,\n            renderer,\n            _args4 = arguments;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _ref = _args4.length > 0 && _args4[0] !== undefined ? _args4[0] : {}, viewModeChanged = _ref.viewModeChanged;\n\n                if (!(!viewModeChanged || !this.canvasElement)) {\n                  _context4.next = 3;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\");\n\n              case 3:\n                _context4.next = 5;\n                return import('./renderDocs');\n\n              case 5:\n                renderer = _context4.sent;\n                renderer.unmountDocs(this.canvasElement);\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function teardown() {\n        return _teardown.apply(this, arguments);\n      }\n\n      return teardown;\n    }()\n  }], [{\n    key: \"fromStoryRender\",\n    value: function fromStoryRender(storyRender) {\n      var channel = storyRender.channel,\n          store = storyRender.store,\n          id = storyRender.id,\n          story = storyRender.story;\n      return new DocsRender(channel, store, id, story);\n    }\n  }]);\n\n  return DocsRender;\n}();\nDocsRender.displayName = \"DocsRender\";","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nimport \"core-js/modules/es.object.get-prototype-of.js\";\nimport \"core-js/modules/es.reflect.construct.js\";\nimport \"core-js/modules/es.reflect.get.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.freeze.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4;\n\nimport \"regenerator-runtime/runtime.js\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _get() { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport deprecate from 'util-deprecate';\nimport dedent from 'ts-dedent';\nimport global from 'global';\nimport { CURRENT_STORY_WAS_SET, IGNORED_EXCEPTION, PRELOAD_STORIES, PREVIEW_KEYDOWN, SET_CURRENT_STORY, SET_STORIES, STORY_ARGS_UPDATED, STORY_CHANGED, STORY_ERRORED, STORY_MISSING, STORY_PREPARED, STORY_RENDER_PHASE_CHANGED, STORY_SPECIFIED, STORY_THREW_EXCEPTION, STORY_UNCHANGED, UPDATE_QUERY_PARAMS } from '@storybook/core-events';\nimport { logger } from '@storybook/client-logger';\nimport { Preview } from './Preview';\nimport { UrlStore } from './UrlStore';\nimport { WebView } from './WebView';\nimport { PREPARE_ABORTED, StoryRender } from './StoryRender';\nimport { DocsRender } from './DocsRender';\nvar globalWindow = global.window;\n\nfunction focusInInput(event) {\n  var target = event.target;\n  return /input|textarea/i.test(target.tagName) || target.getAttribute('contenteditable') !== null;\n}\n\nexport var PreviewWeb = /*#__PURE__*/function (_Preview) {\n  _inherits(PreviewWeb, _Preview);\n\n  var _super = _createSuper(PreviewWeb);\n\n  function PreviewWeb() {\n    var _this;\n\n    _classCallCheck(this, PreviewWeb);\n\n    _this = _super.call(this);\n    _this.urlStore = void 0;\n    _this.view = void 0;\n    _this.previewEntryError = void 0;\n    _this.currentSelection = void 0;\n    _this.currentRender = void 0;\n    _this.view = new WebView();\n    _this.urlStore = new UrlStore(); // Add deprecated APIs for back-compat\n    // @ts-ignore\n\n    _this.storyStore.getSelection = deprecate(function () {\n      return _this.urlStore.selection;\n    }, dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        `__STORYBOOK_STORY_STORE__.getSelection()` is deprecated and will be removed in 7.0.\\n  \\n        To get the current selection, use the `useStoryContext()` hook from `@storybook/addons`.\\n      \"], [\"\\n        \\\\`__STORYBOOK_STORY_STORE__.getSelection()\\\\` is deprecated and will be removed in 7.0.\\n  \\n        To get the current selection, use the \\\\`useStoryContext()\\\\` hook from \\\\`@storybook/addons\\\\`.\\n      \"]))));\n    return _this;\n  }\n\n  _createClass(PreviewWeb, [{\n    key: \"setupListeners\",\n    value: function setupListeners() {\n      _get(_getPrototypeOf(PreviewWeb.prototype), \"setupListeners\", this).call(this);\n\n      globalWindow.onkeydown = this.onKeydown.bind(this);\n      this.channel.on(SET_CURRENT_STORY, this.onSetCurrentStory.bind(this));\n      this.channel.on(UPDATE_QUERY_PARAMS, this.onUpdateQueryParams.bind(this));\n      this.channel.on(PRELOAD_STORIES, this.onPreloadStories.bind(this));\n    }\n  }, {\n    key: \"initializeWithProjectAnnotations\",\n    value: function initializeWithProjectAnnotations(projectAnnotations) {\n      var _this2 = this;\n\n      return _get(_getPrototypeOf(PreviewWeb.prototype), \"initializeWithProjectAnnotations\", this).call(this, projectAnnotations).then(function () {\n        return _this2.setInitialGlobals();\n      });\n    }\n  }, {\n    key: \"setInitialGlobals\",\n    value: function () {\n      var _setInitialGlobals = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _ref, globals;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _ref = this.urlStore.selectionSpecifier || {}, globals = _ref.globals;\n\n                if (globals) {\n                  this.storyStore.globals.updateFromPersisted(globals);\n                }\n\n                this.emitGlobals();\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function setInitialGlobals() {\n        return _setInitialGlobals.apply(this, arguments);\n      }\n\n      return setInitialGlobals;\n    }() // If initialization gets as far as the story index, this function runs.\n\n  }, {\n    key: \"initializeWithStoryIndex\",\n    value: function initializeWithStoryIndex(storyIndex) {\n      var _this3 = this;\n\n      return _get(_getPrototypeOf(PreviewWeb.prototype), \"initializeWithStoryIndex\", this).call(this, storyIndex).then(function () {\n        var _global$FEATURES;\n\n        if (!((_global$FEATURES = global.FEATURES) !== null && _global$FEATURES !== void 0 && _global$FEATURES.storyStoreV7)) {\n          _this3.channel.emit(SET_STORIES, _this3.storyStore.getSetStoriesPayload());\n        }\n\n        return _this3.selectSpecifiedStory();\n      });\n    } // Use the selection specifier to choose a story, then render it\n\n  }, {\n    key: \"selectSpecifiedStory\",\n    value: function () {\n      var _selectSpecifiedStory = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this$urlStore$select, storySpecifier, viewMode, args, storyId;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this.urlStore.selectionSpecifier) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                this.renderMissingStory();\n                return _context2.abrupt(\"return\");\n\n              case 3:\n                _this$urlStore$select = this.urlStore.selectionSpecifier, storySpecifier = _this$urlStore$select.storySpecifier, viewMode = _this$urlStore$select.viewMode, args = _this$urlStore$select.args;\n                storyId = this.storyStore.storyIndex.storyIdFromSpecifier(storySpecifier);\n\n                if (storyId) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                if (storySpecifier === '*') {\n                  this.renderStoryLoadingException(storySpecifier, new Error(dedent(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n            Couldn't find any stories in your Storybook.\\n            - Please check your stories field of your main.js config.\\n            - Also check the browser console and terminal for error messages.\\n          \"])))));\n                } else {\n                  this.renderStoryLoadingException(storySpecifier, new Error(dedent(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n            Couldn't find story matching '\", \"'.\\n            - Are you sure a story with that id exists?\\n            - Please check your stories field of your main.js config.\\n            - Also check the browser console and terminal for error messages.\\n          \"])), storySpecifier)));\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 8:\n                this.urlStore.setSelection({\n                  storyId: storyId,\n                  viewMode: viewMode\n                });\n                this.channel.emit(STORY_SPECIFIED, this.urlStore.selection);\n                this.channel.emit(CURRENT_STORY_WAS_SET, this.urlStore.selection);\n                _context2.next = 13;\n                return this.renderSelection({\n                  persistedArgs: args\n                });\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function selectSpecifiedStory() {\n        return _selectSpecifiedStory.apply(this, arguments);\n      }\n\n      return selectSpecifiedStory;\n    }() // EVENT HANDLERS\n    // This happens when a config file gets reloaded\n\n  }, {\n    key: \"onGetProjectAnnotationsChanged\",\n    value: function () {\n      var _onGetProjectAnnotationsChanged = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(_ref2) {\n        var getProjectAnnotations;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                getProjectAnnotations = _ref2.getProjectAnnotations;\n                _context3.next = 3;\n                return _get(_getPrototypeOf(PreviewWeb.prototype), \"onGetProjectAnnotationsChanged\", this).call(this, {\n                  getProjectAnnotations: getProjectAnnotations\n                });\n\n              case 3:\n                this.renderSelection();\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function onGetProjectAnnotationsChanged(_x) {\n        return _onGetProjectAnnotationsChanged.apply(this, arguments);\n      }\n\n      return onGetProjectAnnotationsChanged;\n    }() // This happens when a glob gets HMR-ed\n\n  }, {\n    key: \"onStoriesChanged\",\n    value: function () {\n      var _onStoriesChanged = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(_ref3) {\n        var _global$FEATURES2;\n\n        var importFn, storyIndex;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                importFn = _ref3.importFn, storyIndex = _ref3.storyIndex;\n\n                _get(_getPrototypeOf(PreviewWeb.prototype), \"onStoriesChanged\", this).call(this, {\n                  importFn: importFn,\n                  storyIndex: storyIndex\n                });\n\n                if ((_global$FEATURES2 = global.FEATURES) !== null && _global$FEATURES2 !== void 0 && _global$FEATURES2.storyStoreV7) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                _context4.t0 = this.channel;\n                _context4.t1 = SET_STORIES;\n                _context4.next = 7;\n                return this.storyStore.getSetStoriesPayload();\n\n              case 7:\n                _context4.t2 = _context4.sent;\n\n                _context4.t0.emit.call(_context4.t0, _context4.t1, _context4.t2);\n\n              case 9:\n                if (!this.urlStore.selection) {\n                  _context4.next = 14;\n                  break;\n                }\n\n                _context4.next = 12;\n                return this.renderSelection();\n\n              case 12:\n                _context4.next = 16;\n                break;\n\n              case 14:\n                _context4.next = 16;\n                return this.selectSpecifiedStory();\n\n              case 16:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function onStoriesChanged(_x2) {\n        return _onStoriesChanged.apply(this, arguments);\n      }\n\n      return onStoriesChanged;\n    }()\n  }, {\n    key: \"onKeydown\",\n    value: function onKeydown(event) {\n      var _this$currentRender;\n\n      if (!((_this$currentRender = this.currentRender) !== null && _this$currentRender !== void 0 && _this$currentRender.disableKeyListeners) && !focusInInput(event)) {\n        // We have to pick off the keys of the event that we need on the other side\n        var altKey = event.altKey,\n            ctrlKey = event.ctrlKey,\n            metaKey = event.metaKey,\n            shiftKey = event.shiftKey,\n            key = event.key,\n            code = event.code,\n            keyCode = event.keyCode;\n        this.channel.emit(PREVIEW_KEYDOWN, {\n          event: {\n            altKey: altKey,\n            ctrlKey: ctrlKey,\n            metaKey: metaKey,\n            shiftKey: shiftKey,\n            key: key,\n            code: code,\n            keyCode: keyCode\n          }\n        });\n      }\n    }\n  }, {\n    key: \"onSetCurrentStory\",\n    value: function onSetCurrentStory(selection) {\n      this.urlStore.setSelection(Object.assign({\n        viewMode: 'story'\n      }, selection));\n      this.channel.emit(CURRENT_STORY_WAS_SET, this.urlStore.selection);\n      this.renderSelection();\n    }\n  }, {\n    key: \"onUpdateQueryParams\",\n    value: function onUpdateQueryParams(queryParams) {\n      this.urlStore.setQueryParams(queryParams);\n    }\n  }, {\n    key: \"onUpdateGlobals\",\n    value: function () {\n      var _onUpdateGlobals = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(_ref4) {\n        var globals;\n        return regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                globals = _ref4.globals;\n\n                _get(_getPrototypeOf(PreviewWeb.prototype), \"onUpdateGlobals\", this).call(this, {\n                  globals: globals\n                });\n\n                if (!(this.currentRender instanceof DocsRender)) {\n                  _context5.next = 5;\n                  break;\n                }\n\n                _context5.next = 5;\n                return this.currentRender.rerender();\n\n              case 5:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function onUpdateGlobals(_x3) {\n        return _onUpdateGlobals.apply(this, arguments);\n      }\n\n      return onUpdateGlobals;\n    }()\n  }, {\n    key: \"onUpdateArgs\",\n    value: function () {\n      var _onUpdateArgs = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(_ref5) {\n        var storyId, updatedArgs;\n        return regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                storyId = _ref5.storyId, updatedArgs = _ref5.updatedArgs;\n\n                _get(_getPrototypeOf(PreviewWeb.prototype), \"onUpdateArgs\", this).call(this, {\n                  storyId: storyId,\n                  updatedArgs: updatedArgs\n                }); // NOTE: we aren't checking to see the story args are targetted at the \"right\" story.\n                // This is because we may render >1 story on the page and there is no easy way to keep track\n                // of which ones were rendered by the docs page.\n                // However, in `modernInlineRender`, the individual stories track their own events as they\n                // each call `renderStoryToElement` below.\n\n\n                if (!(this.currentRender instanceof DocsRender)) {\n                  _context6.next = 5;\n                  break;\n                }\n\n                _context6.next = 5;\n                return this.currentRender.rerender();\n\n              case 5:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function onUpdateArgs(_x4) {\n        return _onUpdateArgs.apply(this, arguments);\n      }\n\n      return onUpdateArgs;\n    }()\n  }, {\n    key: \"onPreloadStories\",\n    value: function () {\n      var _onPreloadStories = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(ids) {\n        var _this4 = this;\n\n        return regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.next = 2;\n                return Promise.all(ids.map(function (id) {\n                  return _this4.storyStore.loadStory({\n                    storyId: id\n                  });\n                }));\n\n              case 2:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7);\n      }));\n\n      function onPreloadStories(_x5) {\n        return _onPreloadStories.apply(this, arguments);\n      }\n\n      return onPreloadStories;\n    }() // RENDERING\n    // We can either have:\n    // - a story selected in \"story\" viewMode,\n    //     in which case we render it to the root element, OR\n    // - a story selected in \"docs\" viewMode,\n    //     in which case we render the docsPage for that story\n\n  }, {\n    key: \"renderSelection\",\n    value: function () {\n      var _renderSelection = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8() {\n        var _this$currentSelectio,\n            _this$currentSelectio2,\n            _lastRender,\n            _this5 = this,\n            _global$FEATURES3;\n\n        var _ref6,\n            persistedArgs,\n            selection,\n            storyId,\n            storyIdChanged,\n            viewModeChanged,\n            lastSelection,\n            lastRender,\n            storyRender,\n            implementationChanged,\n            _storyRender$context,\n            parameters,\n            initialArgs,\n            argTypes,\n            args,\n            _args8 = arguments;\n\n        return regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _ref6 = _args8.length > 0 && _args8[0] !== undefined ? _args8[0] : {}, persistedArgs = _ref6.persistedArgs;\n                selection = this.urlStore.selection;\n\n                if (selection) {\n                  _context8.next = 4;\n                  break;\n                }\n\n                throw new Error('Cannot render story as no selection was made');\n\n              case 4:\n                storyId = selection.storyId;\n                storyIdChanged = ((_this$currentSelectio = this.currentSelection) === null || _this$currentSelectio === void 0 ? void 0 : _this$currentSelectio.storyId) !== storyId;\n                viewModeChanged = ((_this$currentSelectio2 = this.currentSelection) === null || _this$currentSelectio2 === void 0 ? void 0 : _this$currentSelectio2.viewMode) !== selection.viewMode; // Show a spinner while we load the next story\n\n                if (selection.viewMode === 'story') {\n                  this.view.showPreparingStory({\n                    immediate: viewModeChanged\n                  });\n                } else {\n                  this.view.showPreparingDocs();\n                }\n\n                lastSelection = this.currentSelection;\n                lastRender = this.currentRender; // If the last render is still preparing, let's drop it right now. Either\n                //   (a) it is a different story, which means we would drop it later, OR\n                //   (b) it is the *same* story, in which case we will resolve our own .prepare() at the\n                //       same moment anyway, and we should just \"take over\" the rendering.\n                // (We can't tell which it is yet, because it is possible that an HMR is going on and\n                //  even though the storyId is the same, the story itself is not).\n\n                if (!((_lastRender = lastRender) !== null && _lastRender !== void 0 && _lastRender.isPreparing())) {\n                  _context8.next = 14;\n                  break;\n                }\n\n                _context8.next = 13;\n                return this.teardownRender(lastRender);\n\n              case 13:\n                lastRender = null;\n\n              case 14:\n                storyRender = new StoryRender(this.channel, this.storyStore, function () {\n                  // At the start of renderToDOM we make the story visible (see note in WebView)\n                  _this5.view.showStoryDuringRender();\n\n                  return _this5.renderToDOM.apply(_this5, arguments);\n                }, this.mainStoryCallbacks(storyId), storyId, 'story'); // We need to store this right away, so if the story changes during\n                // the async `.prepare()` below, we can (potentially) cancel it\n\n                this.currentSelection = selection; // Note this may be replaced by a docsRender after preparing\n\n                this.currentRender = storyRender;\n                _context8.prev = 17;\n                _context8.next = 20;\n                return storyRender.prepare();\n\n              case 20:\n                _context8.next = 29;\n                break;\n\n              case 22:\n                _context8.prev = 22;\n                _context8.t0 = _context8[\"catch\"](17);\n\n                if (!(_context8.t0 !== PREPARE_ABORTED)) {\n                  _context8.next = 28;\n                  break;\n                }\n\n                _context8.next = 27;\n                return this.teardownRender(lastRender);\n\n              case 27:\n                this.renderStoryLoadingException(storyId, _context8.t0);\n\n              case 28:\n                return _context8.abrupt(\"return\");\n\n              case 29:\n                implementationChanged = !storyIdChanged && !storyRender.isEqual(lastRender);\n                if (persistedArgs) this.storyStore.args.updateFromPersisted(storyRender.story, persistedArgs);\n                _storyRender$context = storyRender.context(), parameters = _storyRender$context.parameters, initialArgs = _storyRender$context.initialArgs, argTypes = _storyRender$context.argTypes, args = _storyRender$context.args; // Don't re-render the story if nothing has changed to justify it\n\n                if (!(lastRender && !storyIdChanged && !implementationChanged && !viewModeChanged)) {\n                  _context8.next = 37;\n                  break;\n                }\n\n                this.currentRender = lastRender;\n                this.channel.emit(STORY_UNCHANGED, storyId);\n                this.view.showMain();\n                return _context8.abrupt(\"return\");\n\n              case 37:\n                _context8.next = 39;\n                return this.teardownRender(lastRender, {\n                  viewModeChanged: viewModeChanged\n                });\n\n              case 39:\n                // If we are rendering something new (as opposed to re-rendering the same or first story), emit\n                if (lastSelection && (storyIdChanged || viewModeChanged)) {\n                  this.channel.emit(STORY_CHANGED, storyId);\n                }\n\n                if ((_global$FEATURES3 = global.FEATURES) !== null && _global$FEATURES3 !== void 0 && _global$FEATURES3.storyStoreV7) {\n                  this.channel.emit(STORY_PREPARED, {\n                    id: storyId,\n                    parameters: parameters,\n                    initialArgs: initialArgs,\n                    argTypes: argTypes,\n                    args: args\n                  });\n                } // For v6 mode / compatibility\n                // If the implementation changed, or args were persisted, the args may have changed,\n                // and the STORY_PREPARED event above may not be respected.\n\n\n                if (implementationChanged || persistedArgs) {\n                  this.channel.emit(STORY_ARGS_UPDATED, {\n                    storyId: storyId,\n                    args: args\n                  });\n                }\n\n                if (selection.viewMode === 'docs' || parameters.docsOnly) {\n                  this.currentRender = DocsRender.fromStoryRender(storyRender);\n                  this.currentRender.renderToElement(this.view.prepareForDocs(), this.renderStoryToElement.bind(this));\n                } else {\n                  this.storyRenders.push(storyRender);\n                  this.currentRender.renderToElement(this.view.prepareForStory(storyRender.story));\n                }\n\n              case 43:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[17, 22]]);\n      }));\n\n      function renderSelection() {\n        return _renderSelection.apply(this, arguments);\n      }\n\n      return renderSelection;\n    }() // Used by docs' modernInlineRender to render a story to a given element\n    // Note this short-circuits the `prepare()` phase of the StoryRender,\n    // main to be consistent with the previous behaviour. In the future,\n    // we will change it to go ahead and load the story, which will end up being\n    // \"instant\", although async.\n\n  }, {\n    key: \"renderStoryToElement\",\n    value: function renderStoryToElement(story, element) {\n      var _this6 = this;\n\n      var render = new StoryRender(this.channel, this.storyStore, this.renderToDOM, this.inlineStoryCallbacks(story.id), story.id, 'docs', story);\n      render.renderToElement(element);\n      this.storyRenders.push(render);\n      return /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9() {\n        return regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.next = 2;\n                return _this6.teardownRender(render);\n\n              case 2:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9);\n      }));\n    }\n  }, {\n    key: \"teardownRender\",\n    value: function () {\n      var _teardownRender = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10(render) {\n        var _ref8,\n            viewModeChanged,\n            _args10 = arguments;\n\n        return regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _ref8 = _args10.length > 1 && _args10[1] !== undefined ? _args10[1] : {}, viewModeChanged = _ref8.viewModeChanged;\n                this.storyRenders = this.storyRenders.filter(function (r) {\n                  return r !== render;\n                });\n                _context10.next = 4;\n                return render === null || render === void 0 ? void 0 : render.teardown({\n                  viewModeChanged: viewModeChanged\n                });\n\n              case 4:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function teardownRender(_x6) {\n        return _teardownRender.apply(this, arguments);\n      }\n\n      return teardownRender;\n    }() // API\n\n  }, {\n    key: \"extract\",\n    value: function () {\n      var _extract = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee11(options) {\n        var _global$FEATURES4;\n\n        return regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                if (!this.previewEntryError) {\n                  _context11.next = 2;\n                  break;\n                }\n\n                throw this.previewEntryError;\n\n              case 2:\n                if (this.storyStore.projectAnnotations) {\n                  _context11.next = 4;\n                  break;\n                }\n\n                throw new Error(dedent(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"Failed to initialize Storybook.\\n      \\n      Do you have an error in your `preview.js`? Check your Storybook's browser console for errors.\"], [\"Failed to initialize Storybook.\\n      \\n      Do you have an error in your \\\\`preview.js\\\\`? Check your Storybook's browser console for errors.\"]))));\n\n              case 4:\n                if (!((_global$FEATURES4 = global.FEATURES) !== null && _global$FEATURES4 !== void 0 && _global$FEATURES4.storyStoreV7)) {\n                  _context11.next = 7;\n                  break;\n                }\n\n                _context11.next = 7;\n                return this.storyStore.cacheAllCSFFiles();\n\n              case 7:\n                return _context11.abrupt(\"return\", this.storyStore.extract(options));\n\n              case 8:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function extract(_x7) {\n        return _extract.apply(this, arguments);\n      }\n\n      return extract;\n    }() // UTILITIES\n\n  }, {\n    key: \"mainStoryCallbacks\",\n    value: function mainStoryCallbacks(storyId) {\n      var _this7 = this;\n\n      return {\n        showMain: function showMain() {\n          return _this7.view.showMain();\n        },\n        showError: function showError(err) {\n          return _this7.renderError(storyId, err);\n        },\n        showException: function showException(err) {\n          return _this7.renderException(storyId, err);\n        }\n      };\n    }\n  }, {\n    key: \"inlineStoryCallbacks\",\n    value: function inlineStoryCallbacks(storyId) {\n      return {\n        showMain: function showMain() {},\n        showError: function showError(err) {\n          return logger.error(\"Error rendering docs story (\".concat(storyId, \")\"), err);\n        },\n        showException: function showException(err) {\n          return logger.error(\"Error rendering docs story (\".concat(storyId, \")\"), err);\n        }\n      };\n    }\n  }, {\n    key: \"renderPreviewEntryError\",\n    value: function renderPreviewEntryError(reason, err) {\n      _get(_getPrototypeOf(PreviewWeb.prototype), \"renderPreviewEntryError\", this).call(this, reason, err);\n\n      this.view.showErrorDisplay(err);\n    }\n  }, {\n    key: \"renderMissingStory\",\n    value: function renderMissingStory() {\n      this.view.showNoPreview();\n      this.channel.emit(STORY_MISSING);\n    }\n  }, {\n    key: \"renderStoryLoadingException\",\n    value: function renderStoryLoadingException(storySpecifier, err) {\n      logger.error(\"Unable to load story '\".concat(storySpecifier, \"':\"));\n      logger.error(err);\n      this.view.showErrorDisplay(err);\n      this.channel.emit(STORY_MISSING, storySpecifier);\n    } // renderException is used if we fail to render the story and it is uncaught by the app layer\n\n  }, {\n    key: \"renderException\",\n    value: function renderException(storyId, err) {\n      this.channel.emit(STORY_THREW_EXCEPTION, err);\n      this.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n        newPhase: 'errored',\n        storyId: storyId\n      }); // Ignored exceptions exist for control flow purposes, and are typically handled elsewhere.\n\n      if (err !== IGNORED_EXCEPTION) {\n        this.view.showErrorDisplay(err);\n        logger.error(\"Error rendering story '\".concat(storyId, \"':\"));\n        logger.error(err);\n      }\n    } // renderError is used by the various app layers to inform the user they have done something\n    // wrong -- for instance returned the wrong thing from a story\n\n  }, {\n    key: \"renderError\",\n    value: function renderError(storyId, _ref9) {\n      var title = _ref9.title,\n          description = _ref9.description;\n      logger.error(\"Error rendering story \".concat(title, \": \").concat(description));\n      this.channel.emit(STORY_ERRORED, {\n        title: title,\n        description: description\n      });\n      this.channel.emit(STORY_RENDER_PHASE_CHANGED, {\n        newPhase: 'errored',\n        storyId: storyId\n      });\n      this.view.showErrorDisplay({\n        message: title,\n        stack: description\n      });\n    }\n  }]);\n\n  return PreviewWeb;\n}(Preview);","import \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport global from 'global';\nvar document = global.document; // https://html.spec.whatwg.org/multipage/scripting.html\n\nvar runScriptTypes = ['application/javascript', 'application/ecmascript', 'application/x-ecmascript', 'application/x-javascript', 'text/ecmascript', 'text/javascript', 'text/javascript1.0', 'text/javascript1.1', 'text/javascript1.2', 'text/javascript1.3', 'text/javascript1.4', 'text/javascript1.5', 'text/jscript', 'text/livescript', 'text/x-ecmascript', 'text/x-javascript', // Support modern javascript\n'module'];\nvar SCRIPT = 'script';\nvar SCRIPTS_ROOT_ID = 'scripts-root'; // trigger DOMContentLoaded\n\nexport function simulateDOMContentLoaded() {\n  var DOMContentLoadedEvent = document.createEvent('Event');\n  DOMContentLoadedEvent.initEvent('DOMContentLoaded', true, true);\n  document.dispatchEvent(DOMContentLoadedEvent);\n}\n\nfunction insertScript($script, callback, $scriptRoot) {\n  var scriptEl = document.createElement('script');\n  scriptEl.type = $script.type === 'module' ? 'module' : 'text/javascript';\n\n  if ($script.src) {\n    scriptEl.onload = callback;\n    scriptEl.onerror = callback;\n    scriptEl.src = $script.src;\n  } else {\n    scriptEl.textContent = $script.innerText;\n  } // re-insert the script tag so it executes.\n\n\n  if ($scriptRoot) $scriptRoot.appendChild(scriptEl);else document.head.appendChild(scriptEl); // clean-up\n\n  $script.parentNode.removeChild($script); // run the callback immediately for inline scripts\n\n  if (!$script.src) callback();\n} // runs an array of async functions in sequential order\n\n/* eslint-disable no-param-reassign, no-plusplus */\n\n\nfunction insertScriptsSequentially(scriptsToExecute, callback) {\n  var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n  scriptsToExecute[index](function () {\n    index++;\n\n    if (index === scriptsToExecute.length) {\n      callback();\n    } else {\n      insertScriptsSequentially(scriptsToExecute, callback, index);\n    }\n  });\n}\n\nexport function simulatePageLoad($container) {\n  var $scriptsRoot = document.getElementById(SCRIPTS_ROOT_ID);\n\n  if (!$scriptsRoot) {\n    $scriptsRoot = document.createElement('div');\n    $scriptsRoot.id = SCRIPTS_ROOT_ID;\n    document.body.appendChild($scriptsRoot);\n  } else {\n    $scriptsRoot.innerHTML = '';\n  }\n\n  var $scripts = Array.from($container.querySelectorAll(SCRIPT));\n\n  if ($scripts.length) {\n    var scriptsToExecute = [];\n    $scripts.forEach(function ($script) {\n      var typeAttr = $script.getAttribute('type'); // only run script tags without the type attribute\n      // or with a javascript mime attribute value from the list\n\n      if (!typeAttr || runScriptTypes.includes(typeAttr)) {\n        scriptsToExecute.push(function (callback) {\n          return insertScript($script, callback, $scriptsRoot);\n        });\n      }\n    }); // insert the script tags sequentially\n    // to preserve execution order\n\n    if (scriptsToExecute.length) {\n      insertScriptsSequentially(scriptsToExecute, simulateDOMContentLoaded, undefined);\n    }\n  } else {\n    simulateDOMContentLoaded();\n  }\n}","'use strict';\n\nvar hasSymbols = require('has-symbols/shams');\n\nmodule.exports = function hasToStringTagShams() {\n\treturn hasSymbols() && !!Symbol.toStringTag;\n};\n","'use strict';\n\nvar callBound = require('call-bind/callBound');\nvar hasToStringTag = require('has-tostringtag/shams')();\nvar has;\nvar $exec;\nvar isRegexMarker;\nvar badStringifier;\n\nif (hasToStringTag) {\n\thas = callBound('Object.prototype.hasOwnProperty');\n\t$exec = callBound('RegExp.prototype.exec');\n\tisRegexMarker = {};\n\n\tvar throwRegexMarker = function () {\n\t\tthrow isRegexMarker;\n\t};\n\tbadStringifier = {\n\t\ttoString: throwRegexMarker,\n\t\tvalueOf: throwRegexMarker\n\t};\n\n\tif (typeof Symbol.toPrimitive === 'symbol') {\n\t\tbadStringifier[Symbol.toPrimitive] = throwRegexMarker;\n\t}\n}\n\nvar $toString = callBound('Object.prototype.toString');\nvar gOPD = Object.getOwnPropertyDescriptor;\nvar regexClass = '[object RegExp]';\n\nmodule.exports = hasToStringTag\n\t// eslint-disable-next-line consistent-return\n\t? function isRegex(value) {\n\t\tif (!value || typeof value !== 'object') {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar descriptor = gOPD(value, 'lastIndex');\n\t\tvar hasLastIndexDataProperty = descriptor && has(descriptor, 'value');\n\t\tif (!hasLastIndexDataProperty) {\n\t\t\treturn false;\n\t\t}\n\n\t\ttry {\n\t\t\t$exec(value, badStringifier);\n\t\t} catch (e) {\n\t\t\treturn e === isRegexMarker;\n\t\t}\n\t}\n\t: function isRegex(value) {\n\t\t// In older browsers, typeof regex incorrectly returns 'function'\n\t\tif (!value || (typeof value !== 'object' && typeof value !== 'function')) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn $toString(value) === regexClass;\n\t};\n","module.exports = isFunction\n\nvar toString = Object.prototype.toString\n\nfunction isFunction (fn) {\n  if (!fn) {\n    return false\n  }\n  var string = toString.call(fn)\n  return string === '[object Function]' ||\n    (typeof fn === 'function' && string !== '[object RegExp]') ||\n    (typeof window !== 'undefined' &&\n     // IE8 and below\n     (fn === window.setTimeout ||\n      fn === window.alert ||\n      fn === window.confirm ||\n      fn === window.prompt))\n};\n","'use strict';\n\nvar toStr = Object.prototype.toString;\nvar hasSymbols = require('has-symbols')();\n\nif (hasSymbols) {\n\tvar symToStr = Symbol.prototype.toString;\n\tvar symStringRegex = /^Symbol\\(.*\\)$/;\n\tvar isSymbolObject = function isRealSymbolObject(value) {\n\t\tif (typeof value.valueOf() !== 'symbol') {\n\t\t\treturn false;\n\t\t}\n\t\treturn symStringRegex.test(symToStr.call(value));\n\t};\n\n\tmodule.exports = function isSymbol(value) {\n\t\tif (typeof value === 'symbol') {\n\t\t\treturn true;\n\t\t}\n\t\tif (toStr.call(value) !== '[object Symbol]') {\n\t\t\treturn false;\n\t\t}\n\t\ttry {\n\t\t\treturn isSymbolObject(value);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t};\n} else {\n\n\tmodule.exports = function isSymbol(value) {\n\t\t// this environment does not support Symbols.\n\t\treturn false && value;\n\t};\n}\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nexport default function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar eventProperties = ['bubbles', 'cancelBubble', 'cancelable', 'composed', 'currentTarget', 'defaultPrevented', 'eventPhase', 'isTrusted', 'returnValue', 'srcElement', 'target', 'timeStamp', 'type'];\nvar customEventSpecificProperties = ['detail'];\n/**\n * Dom Event (and all its subclasses) is built in a way its internal properties\n * are accessible when querying them directly but \"hidden\" when iterating its\n * keys.\n *\n * With a code example it means: `Object.keys(new Event('click')) = [\"isTrusted\"]`\n *\n * So to be able to stringify/parse more than just `isTrusted` info we need to\n * create a new object and set the properties by hand. As there is no way to\n * iterate the properties we rely on a list of hardcoded properties.\n *\n * @param event The event we want to extract properties\n */\n\nexport function extractEventHiddenProperties(event) {\n  var rebuildEvent = eventProperties.filter(function (value) {\n    return event[value] !== undefined;\n  }).reduce(function (acc, value) {\n    return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, value, event[value]));\n  }, {});\n\n  if (event instanceof CustomEvent) {\n    customEventSpecificProperties.filter(function (value) {\n      return event[value] !== undefined;\n    }).forEach(function (value) {\n      rebuildEvent[value] = event[value];\n    });\n  }\n\n  return rebuildEvent;\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport isRegExp from 'is-regex';\nimport isFunction from 'is-function';\nimport isSymbol from 'is-symbol';\nimport isObjectAny from 'isobject';\nimport get from 'lodash/get';\nimport memoize from 'memoizerific';\nimport { extractEventHiddenProperties } from './dom-event';\nvar isRunningInBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined'; // eslint-disable-next-line @typescript-eslint/ban-types, no-use-before-define\n\nvar isObject = isObjectAny;\n\nvar removeCodeComments = function removeCodeComments(code) {\n  var inQuoteChar = null;\n  var inBlockComment = false;\n  var inLineComment = false;\n  var inRegexLiteral = false;\n  var newCode = '';\n\n  if (code.indexOf('//') >= 0 || code.indexOf('/*') >= 0) {\n    for (var i = 0; i < code.length; i += 1) {\n      if (!inQuoteChar && !inBlockComment && !inLineComment && !inRegexLiteral) {\n        if (code[i] === '\"' || code[i] === \"'\" || code[i] === '`') {\n          inQuoteChar = code[i];\n        } else if (code[i] === '/' && code[i + 1] === '*') {\n          inBlockComment = true;\n        } else if (code[i] === '/' && code[i + 1] === '/') {\n          inLineComment = true;\n        } else if (code[i] === '/' && code[i + 1] !== '/') {\n          inRegexLiteral = true;\n        }\n      } else {\n        if (inQuoteChar && (code[i] === inQuoteChar && code[i - 1] !== '\\\\' || code[i] === '\\n' && inQuoteChar !== '`')) {\n          inQuoteChar = null;\n        }\n\n        if (inRegexLiteral && (code[i] === '/' && code[i - 1] !== '\\\\' || code[i] === '\\n')) {\n          inRegexLiteral = false;\n        }\n\n        if (inBlockComment && code[i - 1] === '/' && code[i - 2] === '*') {\n          inBlockComment = false;\n        }\n\n        if (inLineComment && code[i] === '\\n') {\n          inLineComment = false;\n        }\n      }\n\n      if (!inBlockComment && !inLineComment) {\n        newCode += code[i];\n      }\n    }\n  } else {\n    newCode = code;\n  }\n\n  return newCode;\n};\n\nvar cleanCode = memoize(10000)(function (code) {\n  return removeCodeComments(code).replace(/\\n\\s*/g, '') // remove indents & newlines\n  .trim();\n});\n\nvar convertShorthandMethods = function convertShorthandMethods(key, stringified) {\n  var fnHead = stringified.slice(0, stringified.indexOf('{'));\n  var fnBody = stringified.slice(stringified.indexOf('{'));\n\n  if (fnHead.includes('=>')) {\n    // This is an arrow function\n    return stringified;\n  }\n\n  if (fnHead.includes('function')) {\n    // This is an anonymous function\n    return stringified;\n  }\n\n  var modifiedHead = fnHead;\n  modifiedHead = modifiedHead.replace(key, 'function');\n  return modifiedHead + fnBody;\n};\n\nvar dateFormat = /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d{3})?Z$/;\n// eslint-disable-next-line no-useless-escape\nexport var isJSON = function isJSON(input) {\n  return input.match(/^[\\[\\{\\\"\\}].*[\\]\\}\\\"]$/);\n};\n\nfunction convertUnconventionalData(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  var result = data;\n  var wasMutated = false; // `Event` has a weird structure, for details see `extractEventHiddenProperties` doc\n  // Plus we need to check if running in a browser to ensure `Event` exist and\n  // is really the dom Event class.\n\n  if (isRunningInBrowser && data instanceof Event) {\n    result = extractEventHiddenProperties(result);\n    wasMutated = true;\n  }\n\n  result = Object.keys(result).reduce(function (acc, key) {\n    try {\n      var _result$key;\n\n      // Try accessing a property to test if we are allowed to do so\n      // eslint-disable-next-line no-unused-expressions\n      (_result$key = result[key]) === null || _result$key === void 0 ? void 0 : _result$key.toJSON;\n      acc[key] = result[key];\n    } catch (err) {\n      wasMutated = true;\n    }\n\n    return acc;\n  }, {});\n  return wasMutated ? result : data;\n}\n\nexport var replacer = function replacer(options) {\n  var objects;\n  var map;\n  var stack;\n  var keys;\n  return function replace(key, value) {\n    try {\n      //  very first iteration\n      if (key === '') {\n        keys = [];\n        objects = new Map([[value, '[]']]);\n        map = new Map();\n        stack = [];\n        return value;\n      } // From the JSON.stringify's doc:\n      // \"The object in which the key was found is provided as the replacer's this parameter.\" thus one can control the depth\n\n\n      var origin = map.get(this) || this;\n\n      while (stack.length && origin !== stack[0]) {\n        stack.shift();\n        keys.pop();\n      }\n\n      if (typeof value === 'boolean') {\n        return value;\n      }\n\n      if (value === undefined) {\n        if (!options.allowUndefined) {\n          return undefined;\n        }\n\n        return '_undefined_';\n      }\n\n      if (value === null) {\n        return null;\n      }\n\n      if (typeof value === 'number') {\n        if (value === -Infinity) {\n          return '_-Infinity_';\n        }\n\n        if (value === Infinity) {\n          return '_Infinity_';\n        }\n\n        if (Number.isNaN(value)) {\n          return '_NaN_';\n        }\n\n        return value;\n      }\n\n      if (typeof value === 'bigint') {\n        return \"_bigint_\".concat(value.toString());\n      }\n\n      if (typeof value === 'string') {\n        if (dateFormat.test(value)) {\n          if (!options.allowDate) {\n            return undefined;\n          }\n\n          return \"_date_\".concat(value);\n        }\n\n        return value;\n      }\n\n      if (isRegExp(value)) {\n        if (!options.allowRegExp) {\n          return undefined;\n        }\n\n        return \"_regexp_\".concat(value.flags, \"|\").concat(value.source);\n      }\n\n      if (isFunction(value)) {\n        if (!options.allowFunction) {\n          return undefined;\n        }\n\n        var name = value.name;\n        var stringified = value.toString();\n\n        if (!stringified.match(/(\\[native code\\]|WEBPACK_IMPORTED_MODULE|__webpack_exports__|__webpack_require__)/)) {\n          return \"_function_\".concat(name, \"|\").concat(cleanCode(convertShorthandMethods(key, stringified)));\n        }\n\n        return \"_function_\".concat(name, \"|\").concat(function () {}.toString());\n      }\n\n      if (isSymbol(value)) {\n        if (!options.allowSymbol) {\n          return undefined;\n        }\n\n        var globalRegistryKey = Symbol.keyFor(value);\n\n        if (globalRegistryKey !== undefined) {\n          return \"_gsymbol_\".concat(globalRegistryKey);\n        }\n\n        return \"_symbol_\".concat(value.toString().slice(7, -1));\n      }\n\n      if (stack.length >= options.maxDepth) {\n        if (Array.isArray(value)) {\n          return \"[Array(\".concat(value.length, \")]\");\n        }\n\n        return '[Object]';\n      }\n\n      if (value === this) {\n        return \"_duplicate_\".concat(JSON.stringify(keys));\n      } // when it's a class and we don't want to support classes, skip\n\n\n      if (value.constructor && value.constructor.name && value.constructor.name !== 'Object' && !Array.isArray(value) && !options.allowClass) {\n        return undefined;\n      }\n\n      var found = objects.get(value);\n\n      if (!found) {\n        var converted = Array.isArray(value) ? value : convertUnconventionalData(value);\n\n        if (value.constructor && value.constructor.name && value.constructor.name !== 'Object' && !Array.isArray(value) && options.allowClass) {\n          try {\n            Object.assign(converted, {\n              '_constructor-name_': value.constructor.name\n            });\n          } catch (e) {// immutable objects can't be written to and throw\n            // we could make a deep copy but if the user values the correct instance name,\n            // the user should make the deep copy themselves.\n          }\n        }\n\n        keys.push(key);\n        stack.unshift(converted);\n        objects.set(value, JSON.stringify(keys));\n\n        if (value !== converted) {\n          map.set(value, converted);\n        }\n\n        return converted;\n      } //  actually, here's the only place where the keys keeping is useful\n\n\n      return \"_duplicate_\".concat(found);\n    } catch (e) {\n      return undefined;\n    }\n  };\n};\nexport var reviver = function reviver(options) {\n  var refs = [];\n  var root;\n  return function revive(key, value) {\n    // last iteration = root\n    if (key === '') {\n      root = value; // restore cyclic refs\n\n      refs.forEach(function (_ref) {\n        var target = _ref.target,\n            container = _ref.container,\n            replacement = _ref.replacement;\n        var replacementArr = isJSON(replacement) ? JSON.parse(replacement) : replacement.split('.');\n\n        if (replacementArr.length === 0) {\n          // eslint-disable-next-line no-param-reassign\n          container[target] = root;\n        } else {\n          // eslint-disable-next-line no-param-reassign\n          container[target] = get(root, replacementArr);\n        }\n      });\n    }\n\n    if (key === '_constructor-name_') {\n      return value;\n    } // deal with instance names\n\n\n    if (isObject(value) && value['_constructor-name_'] && options.allowFunction) {\n      var name = value['_constructor-name_'];\n\n      if (name !== 'Object') {\n        // eslint-disable-next-line no-new-func\n        var Fn = new Function(\"return function \".concat(name.replace(/[\\W_]+/g, ''), \"(){}\"))();\n        Object.setPrototypeOf(value, new Fn());\n      } // eslint-disable-next-line no-param-reassign\n\n\n      delete value['_constructor-name_'];\n      return value;\n    }\n\n    if (typeof value === 'string' && value.startsWith('_function_') && options.allowFunction) {\n      var _ref2 = value.match(/_function_([^|]*)\\|(.*)/) || [],\n          _ref3 = _slicedToArray(_ref2, 3),\n          _name = _ref3[1],\n          source = _ref3[2]; // eslint-disable-next-line no-useless-escape\n\n\n      var sourceSanitized = source.replace(/[(\\(\\))|\\\\| |\\]|`]*$/, '');\n\n      if (!options.lazyEval) {\n        // eslint-disable-next-line no-eval\n        return eval(\"(\".concat(sourceSanitized, \")\"));\n      } // lazy eval of the function\n\n\n      var result = function result() {\n        // eslint-disable-next-line no-eval\n        var f = eval(\"(\".concat(sourceSanitized, \")\"));\n        return f.apply(void 0, arguments);\n      };\n\n      Object.defineProperty(result, 'toString', {\n        value: function value() {\n          return sourceSanitized;\n        }\n      });\n      Object.defineProperty(result, 'name', {\n        value: _name\n      });\n      return result;\n    }\n\n    if (typeof value === 'string' && value.startsWith('_regexp_') && options.allowRegExp) {\n      // this split isn't working correctly\n      var _ref4 = value.match(/_regexp_([^|]*)\\|(.*)/) || [],\n          _ref5 = _slicedToArray(_ref4, 3),\n          flags = _ref5[1],\n          _source = _ref5[2];\n\n      return new RegExp(_source, flags);\n    }\n\n    if (typeof value === 'string' && value.startsWith('_date_') && options.allowDate) {\n      return new Date(value.replace('_date_', ''));\n    }\n\n    if (typeof value === 'string' && value.startsWith('_duplicate_')) {\n      refs.push({\n        target: key,\n        container: this,\n        replacement: value.replace(/^_duplicate_/, '')\n      });\n      return null;\n    }\n\n    if (typeof value === 'string' && value.startsWith('_symbol_') && options.allowSymbol) {\n      return Symbol(value.replace('_symbol_', ''));\n    }\n\n    if (typeof value === 'string' && value.startsWith('_gsymbol_') && options.allowSymbol) {\n      return Symbol[\"for\"](value.replace('_gsymbol_', ''));\n    }\n\n    if (typeof value === 'string' && value === '_-Infinity_') {\n      return -Infinity;\n    }\n\n    if (typeof value === 'string' && value === '_Infinity_') {\n      return Infinity;\n    }\n\n    if (typeof value === 'string' && value === '_NaN_') {\n      return NaN;\n    }\n\n    if (typeof value === 'string' && value.startsWith('_bigint_') && typeof BigInt === 'function') {\n      return BigInt(value.replace('_bigint_', ''));\n    }\n\n    return value;\n  };\n};\nvar defaultOptions = {\n  maxDepth: 10,\n  space: undefined,\n  allowFunction: true,\n  allowRegExp: true,\n  allowDate: true,\n  allowClass: true,\n  allowUndefined: true,\n  allowSymbol: true,\n  lazyEval: true\n};\nexport var stringify = function stringify(data) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var mergedOptions = _objectSpread(_objectSpread({}, defaultOptions), options);\n\n  return JSON.stringify(convertUnconventionalData(data), replacer(mergedOptions), options.space);\n};\n\nvar mutator = function mutator() {\n  var mutated = new Map();\n  return function mutateUndefined(value) {\n    // JSON.parse will not output keys with value of undefined\n    // we map over a deeply nester object, if we find any value with `_undefined_`, we mutate it to be undefined\n    if (isObject(value)) {\n      Object.entries(value).forEach(function (_ref6) {\n        var _ref7 = _slicedToArray(_ref6, 2),\n            k = _ref7[0],\n            v = _ref7[1];\n\n        if (v === '_undefined_') {\n          // eslint-disable-next-line no-param-reassign\n          value[k] = undefined;\n        } else if (!mutated.get(v)) {\n          mutated.set(v, true);\n          mutateUndefined(v);\n        }\n      });\n    }\n\n    if (Array.isArray(value)) {\n      value.forEach(function (v, index) {\n        if (v === '_undefined_') {\n          mutated.set(v, true); // eslint-disable-next-line no-param-reassign\n\n          value[index] = undefined;\n        } else if (!mutated.get(v)) {\n          mutated.set(v, true);\n          mutateUndefined(v);\n        }\n      });\n    }\n  };\n};\n\nexport var parse = function parse(data) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var mergedOptions = _objectSpread(_objectSpread({}, defaultOptions), options);\n\n  var result = JSON.parse(data, reviver(mergedOptions));\n  mutator()(result);\n  return result;\n};","function _toArray(arr) { return _arrayWithHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableRest(); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.from-entries.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.number.is-integer.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.object.values.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport global from 'global';\nimport * as EVENTS from '@storybook/core-events';\nimport Channel from '@storybook/channels';\nimport { logger, pretty } from '@storybook/client-logger';\nimport { isJSON, parse, stringify } from 'telejson';\nimport qs from 'qs';\nvar globalWindow = global.window,\n    document = global.document,\n    location = global.location;\nexport var KEY = 'storybook-channel';\nvar defaultEventOptions = {\n  allowFunction: true,\n  maxDepth: 25\n}; // TODO: we should export a method for opening child windows here and keep track of em.\n// that way we can send postMessage to child windows as well, not just iframe\n// https://stackoverflow.com/questions/6340160/how-to-get-the-references-of-all-already-opened-child-windows\n\nexport var PostmsgTransport = /*#__PURE__*/function () {\n  function PostmsgTransport(config) {\n    _classCallCheck(this, PostmsgTransport);\n\n    this.config = config;\n    this.buffer = void 0;\n    this.handler = void 0;\n    this.connected = void 0;\n    this.buffer = [];\n    this.handler = null;\n    globalWindow.addEventListener('message', this.handleEvent.bind(this), false); // Check whether the config.page parameter has a valid value\n\n    if (config.page !== 'manager' && config.page !== 'preview') {\n      throw new Error(\"postmsg-channel: \\\"config.page\\\" cannot be \\\"\".concat(config.page, \"\\\"\"));\n    }\n  }\n\n  _createClass(PostmsgTransport, [{\n    key: \"setHandler\",\n    value: function setHandler(handler) {\n      var _this = this;\n\n      this.handler = function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        handler.apply(_this, args);\n\n        if (!_this.connected && _this.getLocalFrame().length) {\n          _this.flush();\n\n          _this.connected = true;\n        }\n      };\n    }\n    /**\n     * Sends `event` to the associated window. If the window does not yet exist\n     * the event will be stored in a buffer and sent when the window exists.\n     * @param event\n     */\n\n  }, {\n    key: \"send\",\n    value: function send(event, options) {\n      var _this2 = this;\n\n      var _ref = options || {},\n          target = _ref.target,\n          allowRegExp = _ref.allowRegExp,\n          allowFunction = _ref.allowFunction,\n          allowSymbol = _ref.allowSymbol,\n          allowDate = _ref.allowDate,\n          allowUndefined = _ref.allowUndefined,\n          allowClass = _ref.allowClass,\n          maxDepth = _ref.maxDepth,\n          space = _ref.space,\n          lazyEval = _ref.lazyEval;\n\n      var eventOptions = Object.fromEntries(Object.entries({\n        allowRegExp: allowRegExp,\n        allowFunction: allowFunction,\n        allowSymbol: allowSymbol,\n        allowDate: allowDate,\n        allowUndefined: allowUndefined,\n        allowClass: allowClass,\n        maxDepth: maxDepth,\n        space: space,\n        lazyEval: lazyEval\n      }).filter(function (_ref2) {\n        var _ref3 = _slicedToArray(_ref2, 2),\n            k = _ref3[0],\n            v = _ref3[1];\n\n        return typeof v !== 'undefined';\n      }));\n      var stringifyOptions = Object.assign({}, defaultEventOptions, global.CHANNEL_OPTIONS || {}, eventOptions); // backwards compat: convert depth to maxDepth\n\n      if (options && Number.isInteger(options.depth)) {\n        stringifyOptions.maxDepth = options.depth;\n      }\n\n      var frames = this.getFrames(target);\n      var query = qs.parse(location.search, {\n        ignoreQueryPrefix: true\n      });\n      var data = stringify({\n        key: KEY,\n        event: event,\n        refId: query.refId\n      }, stringifyOptions);\n\n      if (!frames.length) {\n        return new Promise(function (resolve, reject) {\n          _this2.buffer.push({\n            event: event,\n            resolve: resolve,\n            reject: reject\n          });\n        });\n      }\n\n      if (this.buffer.length) {\n        this.flush();\n      }\n\n      frames.forEach(function (f) {\n        try {\n          f.postMessage(data, '*');\n        } catch (e) {\n          console.error('sending over postmessage fail');\n        }\n      });\n      return Promise.resolve(null);\n    }\n  }, {\n    key: \"flush\",\n    value: function flush() {\n      var _this3 = this;\n\n      var buffer = this.buffer;\n      this.buffer = [];\n      buffer.forEach(function (item) {\n        _this3.send(item.event).then(item.resolve).catch(item.reject);\n      });\n    }\n  }, {\n    key: \"getFrames\",\n    value: function getFrames(target) {\n      if (this.config.page === 'manager') {\n        var nodes = _toConsumableArray(document.querySelectorAll('iframe[data-is-storybook][data-is-loaded]'));\n\n        var list = nodes.filter(function (e) {\n          try {\n            return !!e.contentWindow && e.dataset.isStorybook !== undefined && e.id === target;\n          } catch (er) {\n            return false;\n          }\n        }).map(function (e) {\n          return e.contentWindow;\n        });\n        return list.length ? list : this.getCurrentFrames();\n      }\n\n      if (globalWindow && globalWindow.parent && globalWindow.parent !== globalWindow) {\n        return [globalWindow.parent];\n      }\n\n      return [];\n    }\n  }, {\n    key: \"getCurrentFrames\",\n    value: function getCurrentFrames() {\n      if (this.config.page === 'manager') {\n        var list = _toConsumableArray(document.querySelectorAll('[data-is-storybook=\"true\"]'));\n\n        return list.map(function (e) {\n          return e.contentWindow;\n        });\n      }\n\n      if (globalWindow && globalWindow.parent) {\n        return [globalWindow.parent];\n      }\n\n      return [];\n    }\n  }, {\n    key: \"getLocalFrame\",\n    value: function getLocalFrame() {\n      if (this.config.page === 'manager') {\n        var list = _toConsumableArray(document.querySelectorAll('#storybook-preview-iframe'));\n\n        return list.map(function (e) {\n          return e.contentWindow;\n        });\n      }\n\n      if (globalWindow && globalWindow.parent) {\n        return [globalWindow.parent];\n      }\n\n      return [];\n    }\n  }, {\n    key: \"handleEvent\",\n    value: function handleEvent(rawEvent) {\n      try {\n        var data = rawEvent.data;\n\n        var _ref4 = typeof data === 'string' && isJSON(data) ? parse(data, global.CHANNEL_OPTIONS || {}) : data,\n            key = _ref4.key,\n            event = _ref4.event,\n            refId = _ref4.refId;\n\n        if (key === KEY) {\n          var pageString = this.config.page === 'manager' ? \"<span style=\\\"color: #37D5D3; background: black\\\"> manager </span>\" : \"<span style=\\\"color: #1EA7FD; background: black\\\"> preview </span>\";\n          var eventString = Object.values(EVENTS).includes(event.type) ? \"<span style=\\\"color: #FF4785\\\">\".concat(event.type, \"</span>\") : \"<span style=\\\"color: #FFAE00\\\">\".concat(event.type, \"</span>\");\n\n          if (refId) {\n            event.refId = refId;\n          }\n\n          event.source = this.config.page === 'preview' ? rawEvent.origin : getEventSourceUrl(rawEvent);\n\n          if (!event.source) {\n            pretty.error(\"\".concat(pageString, \" received \").concat(eventString, \" but was unable to determine the source of the event\"));\n            return;\n          }\n\n          var message = \"\".concat(pageString, \" received \").concat(eventString, \" (\").concat(data.length, \")\");\n          pretty.debug.apply(pretty, [location.origin !== event.source ? message : \"\".concat(message, \" <span style=\\\"color: gray\\\">(on \").concat(location.origin, \" from \").concat(event.source, \")</span>\")].concat(_toConsumableArray(event.args)));\n          this.handler(event);\n        }\n      } catch (error) {\n        logger.error(error);\n      }\n    }\n  }]);\n\n  return PostmsgTransport;\n}();\n\nvar getEventSourceUrl = function getEventSourceUrl(event) {\n  var frames = _toConsumableArray(document.querySelectorAll('iframe[data-is-storybook]')); // try to find the originating iframe by matching it's contentWindow\n  // This might not be cross-origin safe\n\n\n  var _frames$filter = frames.filter(function (element) {\n    try {\n      return element.contentWindow === event.source;\n    } catch (err) {// continue\n    }\n\n    var src = element.getAttribute('src');\n    var origin;\n\n    try {\n      var _URL = new URL(src, document.location);\n\n      origin = _URL.origin;\n    } catch (err) {\n      return false;\n    }\n\n    return origin === event.origin;\n  }),\n      _frames$filter2 = _toArray(_frames$filter),\n      frame = _frames$filter2[0],\n      remainder = _frames$filter2.slice(1);\n\n  if (frame && remainder.length === 0) {\n    var src = frame.getAttribute('src');\n\n    var _URL2 = new URL(src, document.location),\n        protocol = _URL2.protocol,\n        host = _URL2.host,\n        pathname = _URL2.pathname;\n\n    return \"\".concat(protocol, \"//\").concat(host).concat(pathname);\n  }\n\n  if (remainder.length > 0) {\n    // If we found multiple matches, there's going to be trouble\n    logger.error('found multiple candidates for event source');\n  } // If we found no frames of matches\n\n\n  return null;\n};\n/**\n * Creates a channel which communicates with an iframe or child window.\n */\n\n\nexport default function createChannel(_ref5) {\n  var page = _ref5.page;\n  var transport = new PostmsgTransport({\n    page: page\n  });\n  return new Channel({\n    transport: transport\n  });\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport { logger } from '@storybook/client-logger';\n\n/**\n * Executes a Loadable (function that returns exports or require context(s))\n * and returns a map of filename => module exports\n *\n * @param loadable Loadable\n * @returns Map<Path, ModuleExports>\n */\nexport function executeLoadable(loadable) {\n  var reqs = null; // todo discuss / improve type check\n\n  if (Array.isArray(loadable)) {\n    reqs = loadable;\n  } else if (loadable.keys) {\n    reqs = [loadable];\n  }\n\n  var exportsMap = new Map();\n\n  if (reqs) {\n    reqs.forEach(function (req) {\n      req.keys().forEach(function (filename) {\n        try {\n          var fileExports = req(filename);\n          exportsMap.set(typeof req.resolve === 'function' ? req.resolve(filename) : filename, fileExports);\n        } catch (error) {\n          var errorString = error.message && error.stack ? \"\".concat(error.message, \"\\n \").concat(error.stack) : error.toString();\n          logger.error(\"Unexpected error while loading \".concat(filename, \": \").concat(errorString));\n        }\n      });\n    });\n  } else {\n    var exported = loadable();\n\n    if (Array.isArray(exported) && exported.every(function (obj) {\n      return obj.default != null;\n    })) {\n      exportsMap = new Map(exported.map(function (fileExports, index) {\n        return [\"exports-map-\".concat(index), fileExports];\n      }));\n    } else if (exported) {\n      logger.warn(\"Loader function passed to 'configure' should return void or an array of module exports that all contain a 'default' export. Received: \".concat(JSON.stringify(exported)));\n    }\n  }\n\n  return exportsMap;\n}\n/**\n * Executes a Loadable (function that returns exports or require context(s))\n * and compares it's output to the last time it was run (as stored on a node module)\n *\n * @param loadable Loadable\n * @param m NodeModule\n * @returns { added: Map<Path, ModuleExports>, removed: Map<Path, ModuleExports> }\n */\n\nexport function executeLoadableForChanges(loadable, m) {\n  var _m$hot, _m$hot$data, _m$hot2;\n\n  var lastExportsMap = (m === null || m === void 0 ? void 0 : (_m$hot = m.hot) === null || _m$hot === void 0 ? void 0 : (_m$hot$data = _m$hot.data) === null || _m$hot$data === void 0 ? void 0 : _m$hot$data.lastExportsMap) || new Map();\n\n  if (m !== null && m !== void 0 && (_m$hot2 = m.hot) !== null && _m$hot2 !== void 0 && _m$hot2.dispose) {\n    m.hot.accept();\n    m.hot.dispose(function (data) {\n      // eslint-disable-next-line no-param-reassign\n      data.lastExportsMap = lastExportsMap;\n    });\n  }\n\n  var exportsMap = executeLoadable(loadable);\n  var added = new Map();\n  Array.from(exportsMap.entries()) // Ignore files that do not have a default export\n  .filter(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        fileExports = _ref2[1];\n\n    return !!fileExports.default;\n  }) // Ignore exports that are equal (by reference) to last time, this means the file hasn't changed\n  .filter(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        fileName = _ref4[0],\n        fileExports = _ref4[1];\n\n    return lastExportsMap.get(fileName) !== fileExports;\n  }).forEach(function (_ref5) {\n    var _ref6 = _slicedToArray(_ref5, 2),\n        fileName = _ref6[0],\n        fileExports = _ref6[1];\n\n    return added.set(fileName, fileExports);\n  });\n  var removed = new Map();\n  Array.from(lastExportsMap.keys()).filter(function (fileName) {\n    return !exportsMap.has(fileName);\n  }).forEach(function (fileName) {\n    return removed.set(fileName, lastExportsMap.get(fileName));\n  }); // Save the value for the dispose() call above\n\n  lastExportsMap = exportsMap;\n  return {\n    added: added,\n    removed: removed\n  };\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport global from 'global';\nimport deprecate from 'util-deprecate';\nimport { ClientApi } from '@storybook/client-api';\nimport { PreviewWeb } from '@storybook/preview-web';\nimport createChannel from '@storybook/channel-postmessage';\nimport { addons } from '@storybook/addons';\nimport Events from '@storybook/core-events';\nimport { executeLoadableForChanges } from './executeLoadable';\nvar globalWindow = global.window,\n    FEATURES = global.FEATURES;\nvar configureDeprecationWarning = deprecate(function () {}, \"`configure()` is deprecated and will be removed in Storybook 7.0. \\nPlease use the `stories` field of `main.js` to load stories.\\nRead more at https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-configure\");\n\nvar removedApi = function removedApi(name) {\n  return function () {\n    throw new Error(\"@storybook/client-api:\".concat(name, \" was removed in storyStoreV7.\"));\n  };\n};\n\nexport function start(renderToDOM) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      decorateStory = _ref.decorateStory,\n      render = _ref.render;\n\n  if (globalWindow) {\n    // To enable user code to detect if it is running in Storybook\n    globalWindow.IS_STORYBOOK = true;\n  }\n\n  if (FEATURES !== null && FEATURES !== void 0 && FEATURES.storyStoreV7) {\n    return {\n      forceReRender: removedApi('forceReRender'),\n      getStorybook: removedApi('getStorybook'),\n      configure: removedApi('configure'),\n      clientApi: {\n        addDecorator: removedApi('clientApi.addDecorator'),\n        addParameters: removedApi('clientApi.addParameters'),\n        clearDecorators: removedApi('clientApi.clearDecorators'),\n        addLoader: removedApi('clientApi.addLoader'),\n        setAddon: removedApi('clientApi.setAddon'),\n        getStorybook: removedApi('clientApi.getStorybook'),\n        storiesOf: removedApi('clientApi.storiesOf'),\n        raw: removedApi('raw')\n      }\n    };\n  }\n\n  var channel = createChannel({\n    page: 'preview'\n  });\n  addons.setChannel(channel);\n  var clientApi = new ClientApi();\n  var preview = new PreviewWeb();\n  var initialized = false;\n\n  var importFn = function importFn(path) {\n    return clientApi.importFn(path);\n  };\n\n  function onStoriesChanged() {\n    var storyIndex = clientApi.getStoryIndex();\n    preview.onStoriesChanged({\n      storyIndex: storyIndex,\n      importFn: importFn\n    });\n  } // These two bits are a bit ugly, but due to dependencies, `ClientApi` cannot have\n  // direct reference to `PreviewWeb`, so we need to patch in bits\n\n\n  clientApi.onImportFnChanged = onStoriesChanged;\n  clientApi.storyStore = preview.storyStore;\n\n  if (globalWindow) {\n    globalWindow.__STORYBOOK_CLIENT_API__ = clientApi;\n    globalWindow.__STORYBOOK_ADDONS_CHANNEL__ = channel; // eslint-disable-next-line no-underscore-dangle\n\n    globalWindow.__STORYBOOK_PREVIEW__ = preview;\n    globalWindow.__STORYBOOK_STORY_STORE__ = preview.storyStore;\n  }\n\n  return {\n    forceReRender: function forceReRender() {\n      return channel.emit(Events.FORCE_RE_RENDER);\n    },\n    getStorybook: function getStorybook() {\n      return [];\n    },\n    raw: function raw() {},\n    clientApi: clientApi,\n    // This gets called each time the user calls configure (i.e. once per HMR)\n    // The first time, it constructs the preview, subsequently it updates it\n    configure: function configure(framework, loadable, m) {\n      var showDeprecationWarning = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\n      if (showDeprecationWarning) {\n        configureDeprecationWarning();\n      }\n\n      clientApi.addParameters({\n        framework: framework\n      }); // We need to run the `executeLoadableForChanges` function *inside* the `getProjectAnnotations\n      // function in case it throws. So we also need to process its output there also\n\n      var getProjectAnnotations = function getProjectAnnotations() {\n        var _executeLoadableForCh = executeLoadableForChanges(loadable, m),\n            added = _executeLoadableForCh.added,\n            removed = _executeLoadableForCh.removed;\n\n        Array.from(added.entries()).forEach(function (_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n              fileName = _ref3[0],\n              fileExports = _ref3[1];\n\n          return clientApi.facade.addStoriesFromExports(fileName, fileExports);\n        });\n        Array.from(removed.entries()).forEach(function (_ref4) {\n          var _ref5 = _slicedToArray(_ref4, 1),\n              fileName = _ref5[0];\n\n          return clientApi.facade.clearFilenameExports(fileName);\n        });\n        return Object.assign({\n          render: render\n        }, clientApi.facade.projectAnnotations, {\n          renderToDOM: renderToDOM,\n          applyDecorators: decorateStory\n        });\n      };\n\n      if (!initialized) {\n        preview.initialize({\n          getStoryIndex: function getStoryIndex() {\n            return clientApi.getStoryIndex();\n          },\n          importFn: importFn,\n          getProjectAnnotations: getProjectAnnotations\n        });\n        initialized = true;\n      } else {\n        // TODO -- why don't we care about the new annotations?\n        getProjectAnnotations();\n        onStoriesChanged();\n      }\n    }\n  };\n}","import global from 'global';\nvar globalWindow = global.window;\nglobalWindow.STORYBOOK_ENV = 'web-components';","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nvar t;const i=globalThis.trustedTypes,s=i?i.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,e=`lit$${(Math.random()+\"\").slice(9)}$`,o=\"?\"+e,n=`<${o}>`,l=document,h=(t=\"\")=>l.createComment(t),r=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,d=Array.isArray,u=t=>{var i;return d(t)||\"function\"==typeof(null===(i=t)||void 0===i?void 0:i[Symbol.iterator])},c=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,v=/-->/g,a=/>/g,f=/>|[ \t\\n\f\\r](?:([^\\s\"'>=/]+)([ \t\\n\f\\r]*=[ \t\\n\f\\r]*(?:[^ \t\\n\f\\r\"'`<>=]|(\"|')|))|$)/g,_=/'/g,m=/\"/g,g=/^(?:script|style|textarea|title)$/i,p=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),$=p(1),y=p(2),b=Symbol.for(\"lit-noChange\"),w=Symbol.for(\"lit-nothing\"),T=new WeakMap,x=(t,i,s)=>{var e,o;const n=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i;let l=n._$litPart$;if(void 0===l){const t=null!==(o=null==s?void 0:s.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new N(i.insertBefore(h(),t),t,void 0,null!=s?s:{})}return l._$AI(t),l},A=l.createTreeWalker(l,129,null,!1),C=(t,i)=>{const o=t.length-1,l=[];let h,r=2===i?\"<svg>\":\"\",d=c;for(let i=0;i<o;i++){const s=t[i];let o,u,p=-1,$=0;for(;$<s.length&&(d.lastIndex=$,u=d.exec(s),null!==u);)$=d.lastIndex,d===c?\"!--\"===u[1]?d=v:void 0!==u[1]?d=a:void 0!==u[2]?(g.test(u[2])&&(h=RegExp(\"</\"+u[2],\"g\")),d=f):void 0!==u[3]&&(d=f):d===f?\">\"===u[0]?(d=null!=h?h:c,p=-1):void 0===u[1]?p=-2:(p=d.lastIndex-u[2].length,o=u[1],d=void 0===u[3]?f:'\"'===u[3]?m:_):d===m||d===_?d=f:d===v||d===a?d=c:(d=f,h=void 0);const y=d===f&&t[i+1].startsWith(\"/>\")?\" \":\"\";r+=d===c?s+n:p>=0?(l.push(o),s.slice(0,p)+\"$lit$\"+s.slice(p)+e+y):s+e+(-2===p?(l.push(void 0),i):y)}const u=r+(t[o]||\"<?>\")+(2===i?\"</svg>\":\"\");if(!Array.isArray(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return[void 0!==s?s.createHTML(u):u,l]};class E{constructor({strings:t,_$litType$:s},n){let l;this.parts=[];let r=0,d=0;const u=t.length-1,c=this.parts,[v,a]=C(t,s);if(this.el=E.createElement(v,n),A.currentNode=this.el.content,2===s){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(l=A.nextNode())&&c.length<u;){if(1===l.nodeType){if(l.hasAttributes()){const t=[];for(const i of l.getAttributeNames())if(i.endsWith(\"$lit$\")||i.startsWith(e)){const s=a[d++];if(t.push(i),void 0!==s){const t=l.getAttribute(s.toLowerCase()+\"$lit$\").split(e),i=/([.?@])?(.*)/.exec(s);c.push({type:1,index:r,name:i[2],strings:t,ctor:\".\"===i[1]?M:\"?\"===i[1]?H:\"@\"===i[1]?I:S})}else c.push({type:6,index:r})}for(const i of t)l.removeAttribute(i)}if(g.test(l.tagName)){const t=l.textContent.split(e),s=t.length-1;if(s>0){l.textContent=i?i.emptyScript:\"\";for(let i=0;i<s;i++)l.append(t[i],h()),A.nextNode(),c.push({type:2,index:++r});l.append(t[s],h())}}}else if(8===l.nodeType)if(l.data===o)c.push({type:2,index:r});else{let t=-1;for(;-1!==(t=l.data.indexOf(e,t+1));)c.push({type:7,index:r}),t+=e.length-1}r++}}static createElement(t,i){const s=l.createElement(\"template\");return s.innerHTML=t,s}}function P(t,i,s=t,e){var o,n,l,h;if(i===b)return i;let d=void 0!==e?null===(o=s._$Cl)||void 0===o?void 0:o[e]:s._$Cu;const u=r(i)?void 0:i._$litDirective$;return(null==d?void 0:d.constructor)!==u&&(null===(n=null==d?void 0:d._$AO)||void 0===n||n.call(d,!1),void 0===u?d=void 0:(d=new u(t),d._$AT(t,s,e)),void 0!==e?(null!==(l=(h=s)._$Cl)&&void 0!==l?l:h._$Cl=[])[e]=d:s._$Cu=d),void 0!==d&&(i=P(t,d._$AS(t,i.values),d,e)),i}class V{constructor(t,i){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var i;const{el:{content:s},parts:e}=this._$AD,o=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:l).importNode(s,!0);A.currentNode=o;let n=A.nextNode(),h=0,r=0,d=e[0];for(;void 0!==d;){if(h===d.index){let i;2===d.type?i=new N(n,n.nextSibling,this,t):1===d.type?i=new d.ctor(n,d.name,d.strings,this,t):6===d.type&&(i=new L(n,this,t)),this.v.push(i),d=e[++r]}h!==(null==d?void 0:d.index)&&(n=A.nextNode(),h++)}return o}m(t){let i=0;for(const s of this.v)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class N{constructor(t,i,s,e){var o;this.type=2,this._$AH=w,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cg=null===(o=null==e?void 0:e.isConnected)||void 0===o||o}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=P(this,t,i),r(t)?t===w||null==t||\"\"===t?(this._$AH!==w&&this._$AR(),this._$AH=w):t!==this._$AH&&t!==b&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):u(t)?this.S(t):this.$(t)}M(t,i=this._$AB){return this._$AA.parentNode.insertBefore(t,i)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.M(t))}$(t){this._$AH!==w&&r(this._$AH)?this._$AA.nextSibling.data=t:this.k(l.createTextNode(t)),this._$AH=t}T(t){var i;const{values:s,_$litType$:e}=t,o=\"number\"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=E.createElement(e.h,this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===o)this._$AH.m(s);else{const t=new V(o,this),i=t.p(this.options);t.m(s),this.k(i),this._$AH=t}}_$AC(t){let i=T.get(t.strings);return void 0===i&&T.set(t.strings,i=new E(t)),i}S(t){d(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const o of t)e===i.length?i.push(s=new N(this.M(h()),this.M(h()),this,this.options)):s=i[e],s._$AI(o),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$Cg=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class S{constructor(t,i,s,e,o){this.type=1,this._$AH=w,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=o,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=w}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,s,e){const o=this.strings;let n=!1;if(void 0===o)t=P(this,t,i,0),n=!r(t)||t!==this._$AH&&t!==b,n&&(this._$AH=t);else{const e=t;let l,h;for(t=o[0],l=0;l<o.length-1;l++)h=P(this,e[s+l],i,l),h===b&&(h=this._$AH[l]),n||(n=!r(h)||h!==this._$AH[l]),h===w?t=w:t!==w&&(t+=(null!=h?h:\"\")+o[l+1]),this._$AH[l]=h}n&&!e&&this.C(t)}C(t){t===w?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:\"\")}}class M extends S{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===w?void 0:t}}const k=i?i.emptyScript:\"\";class H extends S{constructor(){super(...arguments),this.type=4}C(t){t&&t!==w?this.element.setAttribute(this.name,k):this.element.removeAttribute(this.name)}}class I extends S{constructor(t,i,s,e,o){super(t,i,s,e,o),this.type=5}_$AI(t,i=this){var s;if((t=null!==(s=P(this,t,i,0))&&void 0!==s?s:w)===b)return;const e=this._$AH,o=t===w&&e!==w||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==w&&(e===w||o);o&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,s;\"function\"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}class L{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){P(this,t)}}const R={L:\"$lit$\",P:e,V:o,I:1,N:C,R:V,j:u,D:P,H:N,F:S,O:H,W:I,B:M,Z:L},z=window.litHtmlPolyfillSupport;null==z||z(E,N),(null!==(t=globalThis.litHtmlVersions)&&void 0!==t?t:globalThis.litHtmlVersions=[]).push(\"2.2.6\");export{R as _$LH,$ as html,b as noChange,w as nothing,x as render,y as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{_$LH as o}from\"./lit-html.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{H:i}=o,t=o=>null===o||\"object\"!=typeof o&&\"function\"!=typeof o,n={HTML:1,SVG:2},v=(o,i)=>{var t,n;return void 0===i?void 0!==(null===(t=o)||void 0===t?void 0:t._$litType$):(null===(n=o)||void 0===n?void 0:n._$litType$)===i},l=o=>{var i;return void 0!==(null===(i=o)||void 0===i?void 0:i._$litDirective$)},d=o=>{var i;return null===(i=o)||void 0===i?void 0:i._$litDirective$},r=o=>void 0===o.strings,e=()=>document.createComment(\"\"),u=(o,t,n)=>{var v;const l=o._$AA.parentNode,d=void 0===t?o._$AB:t._$AA;if(void 0===n){const t=l.insertBefore(e(),d),v=l.insertBefore(e(),d);n=new i(t,v,o,o.options)}else{const i=n._$AB.nextSibling,t=n._$AM,r=t!==o;if(r){let i;null===(v=n._$AQ)||void 0===v||v.call(n,o),n._$AM=o,void 0!==n._$AP&&(i=o._$AU)!==t._$AU&&n._$AP(i)}if(i!==d||r){let o=n._$AA;for(;o!==i;){const i=o.nextSibling;l.insertBefore(o,d),o=i}}}return n},c=(o,i,t=o)=>(o._$AI(i,t),o),f={},s=(o,i=f)=>o._$AH=i,a=o=>o._$AH,m=o=>{var i;null===(i=o._$AP)||void 0===i||i.call(o,!1,!0);let t=o._$AA;const n=o._$AB.nextSibling;for(;t!==n;){const o=t.nextSibling;t.remove(),t=o}},p=o=>{o._$AR()};export{n as TemplateResultType,p as clearPart,a as getCommittedValue,d as getDirectiveClass,u as insertPart,l as isDirectiveResult,t as isPrimitive,r as isSingleExpression,v as isTemplateResult,m as removePart,c as setChildPartValue,s as setCommittedValue};\n//# sourceMappingURL=directive-helpers.js.map\n","var _templateObject;\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.freeze.js\";\n\n/* eslint-disable no-param-reassign */\nimport global from 'global';\nimport dedent from 'ts-dedent';\nimport { render } from 'lit-html'; // Keep `.js` extension to avoid issue with Webpack (related to export map?)\n// eslint-disable-next-line import/extensions\n\nimport { isTemplateResult } from 'lit-html/directive-helpers.js';\nimport { simulatePageLoad, simulateDOMContentLoaded } from '@storybook/preview-web';\nvar Node = global.Node;\nexport function renderToDOM(_ref, domElement) {\n  var storyFn = _ref.storyFn,\n      kind = _ref.kind,\n      name = _ref.name,\n      showMain = _ref.showMain,\n      showError = _ref.showError,\n      forceRemount = _ref.forceRemount;\n  var element = storyFn();\n  showMain();\n\n  if (isTemplateResult(element)) {\n    // `render` stores the TemplateInstance in the Node and tries to update based on that.\n    // Since we reuse `domElement` for all stories, remove the stored instance first.\n    // But forceRemount means that it's the same story, so we want too keep the state in that case.\n    if (forceRemount || !domElement.querySelector('[id=\"root-inner\"]')) {\n      domElement.innerHTML = '<div id=\"root-inner\"></div>';\n    }\n\n    var renderTo = domElement.querySelector('[id=\"root-inner\"]');\n    render(element, renderTo);\n    simulatePageLoad(domElement);\n  } else if (typeof element === 'string') {\n    domElement.innerHTML = element;\n    simulatePageLoad(domElement);\n  } else if (element instanceof Node) {\n    // Don't re-mount the element if it didn't change and neither did the story\n    if (domElement.firstChild === element && !forceRemount) {\n      return;\n    }\n\n    domElement.innerHTML = '';\n    domElement.appendChild(element);\n    simulateDOMContentLoaded();\n  } else {\n    showError({\n      title: \"Expecting an HTML snippet or DOM node from the story: \\\"\".concat(name, \"\\\" of \\\"\").concat(kind, \"\\\".\"),\n      description: dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        Did you forget to return the HTML snippet from the story?\\n        Use \\\"() => <your snippet or node>\\\" or when defining the story.\\n      \"])))\n    });\n  }\n}","import \"core-js/modules/es.array.concat.js\";\n\n/* eslint-disable prefer-destructuring */\nimport { start } from '@storybook/core';\nimport './globals';\nimport { renderToDOM } from './render';\nvar framework = 'web-components';\nvar api = start(renderToDOM);\nexport var storiesOf = function storiesOf(kind, m) {\n  return api.clientApi.storiesOf(kind, m).addParameters({\n    framework: framework\n  });\n};\nexport var configure = function configure() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return api.configure.apply(api, [framework].concat(args));\n};\nexport var addDecorator = api.clientApi.addDecorator;\nexport var addParameters = api.clientApi.addParameters;\nexport var clearDecorators = api.clientApi.clearDecorators;\nexport var setAddon = api.clientApi.setAddon;\nexport var forceReRender = api.forceReRender;\nexport var getStorybook = api.clientApi.getStorybook;\nexport var raw = api.clientApi.raw;","/* eslint-disable no-underscore-dangle */\n\n/* global window */\nexport function isValidComponent(tagName) {\n  if (!tagName) {\n    return false;\n  }\n\n  if (typeof tagName === 'string') {\n    return true;\n  }\n\n  throw new Error('Provided component needs to be a string. e.g. component: \"my-element\"');\n}\nexport function isValidMetaData(customElements) {\n  if (!customElements) {\n    return false;\n  }\n\n  if (customElements.tags && Array.isArray(customElements.tags) || customElements.modules && Array.isArray(customElements.modules)) {\n    return true;\n  }\n\n  throw new Error(\"You need to setup valid meta data in your config.js via setCustomElements().\\n    See the readme of addon-docs for web components for more details.\");\n}\n/**\n * @param customElements any for now as spec is not super stable yet\n */\n\nexport function setCustomElements(customElements) {\n  // @ts-ignore\n  window.__STORYBOOK_CUSTOM_ELEMENTS__ = customElements;\n}\nexport function setCustomElementsManifest(customElements) {\n  // @ts-ignore\n  window.__STORYBOOK_CUSTOM_ELEMENTS_MANIFEST__ = customElements;\n}\nexport function getCustomElements() {\n  // @ts-ignore\n  return window.__STORYBOOK_CUSTOM_ELEMENTS__ || window.__STORYBOOK_CUSTOM_ELEMENTS_MANIFEST__;\n}","import global from 'global';\nvar window = global.window,\n    EventSource = global.EventSource;\nexport { storiesOf, setAddon, addDecorator, addParameters, configure, getStorybook, forceReRender, raw } from './preview';\nexport { getCustomElements, setCustomElements, setCustomElementsManifest, isValidComponent, isValidMetaData } from './customElements';\nexport * from './preview/types-6-0'; // TODO: disable HMR and do full page loads because of customElements.define\n\nif (module && module.hot && module.hot.decline) {\n  module.hot.decline(); // forcing full reloads for customElements as elements can only be defined once per page\n\n  var hmr = new EventSource('__webpack_hmr');\n  hmr.addEventListener('message', function fullPageReload(event) {\n    try {\n      // Only care for built events.  Heartbeats are not parsable so we ignore those\n      var _JSON$parse = JSON.parse(event.data),\n          action = _JSON$parse.action;\n\n      if (action === 'built') {\n        window.location.reload();\n      }\n    } catch (error) {// Most part we only get here from the data in the server-sent event not being parsable which is ok\n    }\n  });\n}","export { renderToDOM } from './render';\nexport var parameters = {\n  framework: 'web-components'\n};","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","import { combineParameters } from '@storybook/store';\nexport var enhanceArgTypes = function enhanceArgTypes(context) {\n  var component = context.component,\n      userArgTypes = context.argTypes,\n      _context$parameters$d = context.parameters.docs,\n      docs = _context$parameters$d === void 0 ? {} : _context$parameters$d;\n  var extractArgTypes = docs.extractArgTypes;\n  var extractedArgTypes = extractArgTypes && component ? extractArgTypes(component) : {};\n  var withExtractedTypes = extractedArgTypes ? combineParameters(extractedArgTypes, userArgTypes) : userArgTypes;\n  return withExtractedTypes;\n};","export var ADDON_ID = 'storybook/docs';\nexport var PANEL_ID = \"\".concat(ADDON_ID, \"/panel\");\nexport var PARAM_KEY = \"docs\";\nexport var SNIPPET_RENDERED = \"\".concat(ADDON_ID, \"/snippet-rendered\");\nexport var SourceType;\n\n(function (SourceType) {\n  SourceType[\"AUTO\"] = \"auto\";\n  SourceType[\"CODE\"] = \"code\";\n  SourceType[\"DYNAMIC\"] = \"dynamic\";\n})(SourceType || (SourceType = {}));","import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport { logger } from '@storybook/client-logger';\nimport { getCustomElements, isValidComponent, isValidMetaData } from '..';\n\nfunction mapData(data, category) {\n  return data && data.filter(function (item) {\n    return item && item.name;\n  }).reduce(function (acc, item) {\n    if (item.kind === 'method') return acc;\n\n    switch (category) {\n      case 'events':\n        mapEvent(item).forEach(function (argType) {\n          acc[argType.name] = argType;\n        });\n        break;\n\n      default:\n        acc[item.name] = mapItem(item, category);\n        break;\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction mapItem(item, category) {\n  var _item$type, _item$type2;\n\n  var type = category === 'properties' ? {\n    name: ((_item$type = item.type) === null || _item$type === void 0 ? void 0 : _item$type.text) || item.type\n  } : {\n    name: 'void'\n  };\n  return {\n    name: item.name,\n    required: false,\n    description: item.description,\n    type: type,\n    table: {\n      category: category,\n      type: {\n        summary: ((_item$type2 = item.type) === null || _item$type2 === void 0 ? void 0 : _item$type2.text) || item.type\n      },\n      defaultValue: {\n        summary: item.default !== undefined ? item.default : item.defaultValue\n      }\n    }\n  };\n}\n\nfunction mapEvent(item) {\n  var name = item.name.replace(/(-|_|:|\\.|\\s)+(.)?/g, function (_match, _separator, chr) {\n    return chr ? chr.toUpperCase() : '';\n  }).replace(/^([A-Z])/, function (match) {\n    return match.toLowerCase();\n  });\n  name = \"on\".concat(name.charAt(0).toUpperCase() + name.substr(1));\n  return [{\n    name: name,\n    action: {\n      name: item.name\n    },\n    table: {\n      disable: true\n    }\n  }, mapItem(item, 'events')];\n}\n\nvar getMetaDataExperimental = function getMetaDataExperimental(tagName, customElements) {\n  if (!isValidComponent(tagName) || !isValidMetaData(customElements)) {\n    return null;\n  }\n\n  var metaData = customElements.tags.find(function (tag) {\n    return tag.name.toUpperCase() === tagName.toUpperCase();\n  });\n\n  if (!metaData) {\n    logger.warn(\"Component not found in custom-elements.json: \".concat(tagName));\n  }\n\n  return metaData;\n};\n\nvar getMetaDataV1 = function getMetaDataV1(tagName, customElements) {\n  var _customElements$modul;\n\n  if (!isValidComponent(tagName) || !isValidMetaData(customElements)) {\n    return null;\n  }\n\n  var metadata;\n  customElements === null || customElements === void 0 ? void 0 : (_customElements$modul = customElements.modules) === null || _customElements$modul === void 0 ? void 0 : _customElements$modul.forEach(function (_module) {\n    var _module$declarations;\n\n    _module === null || _module === void 0 ? void 0 : (_module$declarations = _module.declarations) === null || _module$declarations === void 0 ? void 0 : _module$declarations.forEach(function (declaration) {\n      if (declaration.tagName === tagName) {\n        metadata = declaration;\n      }\n    });\n  });\n\n  if (!metadata) {\n    logger.warn(\"Component not found in custom-elements.json: \".concat(tagName));\n  }\n\n  return metadata;\n};\n\nexport var extractArgTypesFromElements = function extractArgTypesFromElements(tagName, customElements) {\n  var metaData = getMetaData(tagName, customElements);\n  return metaData && Object.assign({}, mapData(metaData.attributes, 'attributes'), mapData(metaData.members, 'properties'), mapData(metaData.properties, 'properties'), mapData(metaData.events, 'events'), mapData(metaData.slots, 'slots'), mapData(metaData.cssProperties, 'css custom properties'), mapData(metaData.cssParts, 'css shadow parts'));\n};\n\nvar getMetaData = function getMetaData(tagName, manifest) {\n  if ((manifest === null || manifest === void 0 ? void 0 : manifest.version) === 'experimental') {\n    return getMetaDataExperimental(tagName, manifest);\n  }\n\n  return getMetaDataV1(tagName, manifest);\n};\n\nexport var extractArgTypes = function extractArgTypes(tagName) {\n  var cem = getCustomElements();\n  return extractArgTypesFromElements(tagName, cem);\n};\nexport var extractComponentDescription = function extractComponentDescription(tagName) {\n  var metaData = getMetaData(tagName, getCustomElements());\n  return metaData && metaData.description;\n};","import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\n\n/* global window */\nimport { render } from 'lit-html';\nimport { addons, useEffect } from '@storybook/addons';\nimport { SNIPPET_RENDERED, SourceType } from '@storybook/docs-tools';\n// Taken from https://github.com/lit/lit/blob/main/packages/lit-html/src/test/test-utils/strip-markers.ts\nvar LIT_EXPRESSION_COMMENTS = /<!--\\?lit\\$[0-9]+\\$-->|<!--\\??-->/g;\n\nfunction skipSourceRender(context) {\n  var _context$parameters$d;\n\n  var sourceParams = context === null || context === void 0 ? void 0 : (_context$parameters$d = context.parameters.docs) === null || _context$parameters$d === void 0 ? void 0 : _context$parameters$d.source;\n  var isArgsStory = context === null || context === void 0 ? void 0 : context.parameters.__isArgsStory; // always render if the user forces it\n\n  if ((sourceParams === null || sourceParams === void 0 ? void 0 : sourceParams.type) === SourceType.DYNAMIC) {\n    return false;\n  } // never render if the user is forcing the block to render code, or\n  // if the user provides code, or if it's not an args story.\n\n\n  return !isArgsStory || (sourceParams === null || sourceParams === void 0 ? void 0 : sourceParams.code) || (sourceParams === null || sourceParams === void 0 ? void 0 : sourceParams.type) === SourceType.CODE;\n}\n\nfunction applyTransformSource(source, context) {\n  var _context$parameters$d2;\n\n  var _ref = (_context$parameters$d2 = context.parameters.docs) !== null && _context$parameters$d2 !== void 0 ? _context$parameters$d2 : {},\n      transformSource = _ref.transformSource;\n\n  if (typeof transformSource !== 'function') return source;\n  return transformSource(source, context);\n}\n\nexport function sourceDecorator(storyFn, context) {\n  var _context$parameters$d3, _context$parameters$d4;\n\n  var story = context !== null && context !== void 0 && (_context$parameters$d3 = context.parameters.docs) !== null && _context$parameters$d3 !== void 0 && (_context$parameters$d4 = _context$parameters$d3.source) !== null && _context$parameters$d4 !== void 0 && _context$parameters$d4.excludeDecorators ? context.originalStoryFn(context.args, context) : storyFn();\n  var source;\n  useEffect(function () {\n    if (source) addons.getChannel().emit(SNIPPET_RENDERED, context.id, source);\n  });\n\n  if (!skipSourceRender(context)) {\n    var container = window.document.createElement('div');\n    render(story, container);\n    source = applyTransformSource(container.innerHTML.replace(LIT_EXPRESSION_COMMENTS, ''), context);\n  }\n\n  return story;\n}","/** @license React v16.14.0\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var l=require(\"object-assign\"),n=\"function\"===typeof Symbol&&Symbol.for,p=n?Symbol.for(\"react.element\"):60103,q=n?Symbol.for(\"react.portal\"):60106,r=n?Symbol.for(\"react.fragment\"):60107,t=n?Symbol.for(\"react.strict_mode\"):60108,u=n?Symbol.for(\"react.profiler\"):60114,v=n?Symbol.for(\"react.provider\"):60109,w=n?Symbol.for(\"react.context\"):60110,x=n?Symbol.for(\"react.forward_ref\"):60112,y=n?Symbol.for(\"react.suspense\"):60113,z=n?Symbol.for(\"react.memo\"):60115,A=n?Symbol.for(\"react.lazy\"):\n60116,B=\"function\"===typeof Symbol&&Symbol.iterator;function C(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}\nvar D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E={};function F(a,b,c){this.props=a;this.context=b;this.refs=E;this.updater=c||D}F.prototype.isReactComponent={};F.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(C(85));this.updater.enqueueSetState(this,a,b,\"setState\")};F.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction G(){}G.prototype=F.prototype;function H(a,b,c){this.props=a;this.context=b;this.refs=E;this.updater=c||D}var I=H.prototype=new G;I.constructor=H;l(I,F.prototype);I.isPureReactComponent=!0;var J={current:null},K=Object.prototype.hasOwnProperty,L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,c){var e,d={},g=null,k=null;if(null!=b)for(e in void 0!==b.ref&&(k=b.ref),void 0!==b.key&&(g=\"\"+b.key),b)K.call(b,e)&&!L.hasOwnProperty(e)&&(d[e]=b[e]);var f=arguments.length-2;if(1===f)d.children=c;else if(1<f){for(var h=Array(f),m=0;m<f;m++)h[m]=arguments[m+2];d.children=h}if(a&&a.defaultProps)for(e in f=a.defaultProps,f)void 0===d[e]&&(d[e]=f[e]);return{$$typeof:p,type:a,key:g,ref:k,props:d,_owner:J.current}}\nfunction N(a,b){return{$$typeof:p,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===p}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+(\"\"+a).replace(/[=:]/g,function(a){return b[a]})}var P=/\\/+/g,Q=[];function R(a,b,c,e){if(Q.length){var d=Q.pop();d.result=a;d.keyPrefix=b;d.func=c;d.context=e;d.count=0;return d}return{result:a,keyPrefix:b,func:c,context:e,count:0}}\nfunction S(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>Q.length&&Q.push(a)}\nfunction T(a,b,c,e){var d=typeof a;if(\"undefined\"===d||\"boolean\"===d)a=null;var g=!1;if(null===a)g=!0;else switch(d){case \"string\":case \"number\":g=!0;break;case \"object\":switch(a.$$typeof){case p:case q:g=!0}}if(g)return c(e,a,\"\"===b?\".\"+U(a,0):b),1;g=0;b=\"\"===b?\".\":b+\":\";if(Array.isArray(a))for(var k=0;k<a.length;k++){d=a[k];var f=b+U(d,k);g+=T(d,f,c,e)}else if(null===a||\"object\"!==typeof a?f=null:(f=B&&a[B]||a[\"@@iterator\"],f=\"function\"===typeof f?f:null),\"function\"===typeof f)for(a=f.call(a),k=\n0;!(d=a.next()).done;)d=d.value,f=b+U(d,k++),g+=T(d,f,c,e);else if(\"object\"===d)throw c=\"\"+a,Error(C(31,\"[object Object]\"===c?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":c,\"\"));return g}function V(a,b,c){return null==a?0:T(a,\"\",b,c)}function U(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(a.key):b.toString(36)}function W(a,b){a.func.call(a.context,b,a.count++)}\nfunction aa(a,b,c){var e=a.result,d=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?X(a,e,c,function(a){return a}):null!=a&&(O(a)&&(a=N(a,d+(!a.key||b&&b.key===a.key?\"\":(\"\"+a.key).replace(P,\"$&/\")+\"/\")+c)),e.push(a))}function X(a,b,c,e,d){var g=\"\";null!=c&&(g=(\"\"+c).replace(P,\"$&/\")+\"/\");b=R(b,g,e,d);V(a,aa,b);S(b)}var Y={current:null};function Z(){var a=Y.current;if(null===a)throw Error(C(321));return a}\nvar ba={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:J,IsSomeRendererActing:{current:!1},assign:l};exports.Children={map:function(a,b,c){if(null==a)return a;var e=[];X(a,e,null,b,c);return e},forEach:function(a,b,c){if(null==a)return a;b=R(null,null,b,c);V(a,W,b);S(b)},count:function(a){return V(a,function(){return null},null)},toArray:function(a){var b=[];X(a,b,null,function(a){return a});return b},only:function(a){if(!O(a))throw Error(C(143));return a}};\nexports.Component=F;exports.Fragment=r;exports.Profiler=u;exports.PureComponent=H;exports.StrictMode=t;exports.Suspense=y;exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ba;\nexports.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(C(267,a));var e=l({},a.props),d=a.key,g=a.ref,k=a._owner;if(null!=b){void 0!==b.ref&&(g=b.ref,k=J.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var f=a.type.defaultProps;for(h in b)K.call(b,h)&&!L.hasOwnProperty(h)&&(e[h]=void 0===b[h]&&void 0!==f?f[h]:b[h])}var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){f=Array(h);for(var m=0;m<h;m++)f[m]=arguments[m+2];e.children=f}return{$$typeof:p,type:a.type,\nkey:d,ref:g,props:e,_owner:k}};exports.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:w,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:v,_context:a};return a.Consumer=a};exports.createElement=M;exports.createFactory=function(a){var b=M.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};exports.forwardRef=function(a){return{$$typeof:x,render:a}};exports.isValidElement=O;\nexports.lazy=function(a){return{$$typeof:A,_ctor:a,_status:-1,_result:null}};exports.memo=function(a,b){return{$$typeof:z,type:a,compare:void 0===b?null:b}};exports.useCallback=function(a,b){return Z().useCallback(a,b)};exports.useContext=function(a,b){return Z().useContext(a,b)};exports.useDebugValue=function(){};exports.useEffect=function(a,b){return Z().useEffect(a,b)};exports.useImperativeHandle=function(a,b,c){return Z().useImperativeHandle(a,b,c)};\nexports.useLayoutEffect=function(a,b){return Z().useLayoutEffect(a,b)};exports.useMemo=function(a,b){return Z().useMemo(a,b)};exports.useReducer=function(a,b,c){return Z().useReducer(a,b,c)};exports.useRef=function(a){return Z().useRef(a)};exports.useState=function(a){return Z().useState(a)};exports.version=\"16.14.0\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.get-prototype-of.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.reflect.construct.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React from 'react';\nimport { render } from 'lit-html';\nexport var prepareForInline = function prepareForInline(storyFn) {\n  var Story = /*#__PURE__*/function (_React$Component) {\n    _inherits(Story, _React$Component);\n\n    var _super = _createSuper(Story);\n\n    function Story() {\n      var _this;\n\n      _classCallCheck(this, Story);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this = _super.call.apply(_super, [this].concat(args));\n      _this.wrapperRef = /*#__PURE__*/React.createRef();\n      return _this;\n    }\n\n    _createClass(Story, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        render(storyFn(), this.wrapperRef.current);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return /*#__PURE__*/React.createElement('div', {\n          ref: this.wrapperRef\n        });\n      }\n    }]);\n\n    return Story;\n  }(React.Component);\n\n  return /*#__PURE__*/React.createElement(Story);\n};","import { SourceType, enhanceArgTypes } from '@storybook/docs-tools';\nimport { extractArgTypes, extractComponentDescription } from './custom-elements';\nimport { sourceDecorator } from './sourceDecorator';\nimport { prepareForInline } from './prepareForInline';\nexport var decorators = [sourceDecorator];\nexport var parameters = {\n  docs: {\n    extractArgTypes: extractArgTypes,\n    extractComponentDescription: extractComponentDescription,\n    inlineStories: true,\n    prepareForInline: prepareForInline,\n    source: {\n      type: SourceType.DYNAMIC,\n      language: 'html'\n    }\n  }\n};\nexport var argTypesEnhancers = [enhanceArgTypes];","export var ADDON_ID = 'storybook/links';\nexport var PARAM_KEY = \"links\";\nexport default {\n  NAVIGATE: \"\".concat(ADDON_ID, \"/navigate\"),\n  REQUEST: \"\".concat(ADDON_ID, \"/request\"),\n  RECEIVE: \"\".concat(ADDON_ID, \"/receive\")\n};","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport global from 'global';\nimport qs from 'qs';\nimport { addons, makeDecorator } from '@storybook/addons';\nimport { STORY_CHANGED, SELECT_STORY } from '@storybook/core-events';\nimport { toId } from '@storybook/csf';\nimport { PARAM_KEY } from './constants';\nvar document = global.document,\n    HTMLElement = global.HTMLElement;\nexport var navigate = function navigate(params) {\n  return addons.getChannel().emit(SELECT_STORY, params);\n};\nexport var hrefTo = function hrefTo(title, name) {\n  return new Promise(function (resolve) {\n    var location = document.location;\n    var query = qs.parse(location.search, {\n      ignoreQueryPrefix: true\n    });\n    var existingId = [].concat(query.id)[0];\n    var titleToLink = title || existingId.split('--', 2)[0];\n    var id = toId(titleToLink, name);\n    var url = \"\".concat(location.origin + location.pathname, \"?\").concat(qs.stringify(Object.assign({}, query, {\n      id: id\n    }), {\n      encode: false\n    }));\n    resolve(url);\n  });\n};\n\nvar valueOrCall = function valueOrCall(args) {\n  return function (value) {\n    return typeof value === 'function' ? value.apply(void 0, _toConsumableArray(args)) : value;\n  };\n};\n\nexport var linkTo = function linkTo(idOrTitle, nameInput) {\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var resolver = valueOrCall(args);\n    var title = resolver(idOrTitle);\n    var name = resolver(nameInput);\n\n    if (title !== null && title !== void 0 && title.match(/--/) && !name) {\n      navigate({\n        storyId: title\n      });\n    } else {\n      navigate({\n        kind: title,\n        story: name\n      });\n    }\n  };\n};\n\nvar linksListener = function linksListener(e) {\n  var target = e.target;\n\n  if (!(target instanceof HTMLElement)) {\n    return;\n  }\n\n  var element = target;\n  var _element$dataset = element.dataset,\n      kind = _element$dataset.sbKind,\n      story = _element$dataset.sbStory;\n\n  if (kind || story) {\n    e.preventDefault();\n    navigate({\n      kind: kind,\n      story: story\n    });\n  }\n};\n\nvar hasListener = false;\n\nvar on = function on() {\n  if (!hasListener) {\n    hasListener = true;\n    document.addEventListener('click', linksListener);\n  }\n};\n\nvar off = function off() {\n  if (hasListener) {\n    hasListener = false;\n    document.removeEventListener('click', linksListener);\n  }\n};\n\nexport var withLinks = makeDecorator({\n  name: 'withLinks',\n  parameterName: PARAM_KEY,\n  wrapper: function wrapper(getStory, context) {\n    on();\n    addons.getChannel().once(STORY_CHANGED, off);\n    return getStory(context);\n  }\n});","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.freeze.js\";\n\nvar _templateObject;\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport dedent from 'ts-dedent';\nvar hasWarned = false;\nexport function LinkTo() {\n  if (!hasWarned) {\n    // eslint-disable-next-line no-console\n    console.error(dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n      LinkTo has moved to addon-links/react:\\n      import LinkTo from '@storybook/addon-links/react';\\n    \"]))));\n    hasWarned = true;\n  }\n\n  return null;\n}\nexport { linkTo, hrefTo, withLinks, navigate } from './utils';\n\nif (module && module.hot && module.hot.decline) {\n  module.hot.decline();\n}","import { withLinks } from './index';\nexport var decorators = [withLinks];","import \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nexport var parameters = {\n  docs: {\n    getContainer: function () {\n      var _getContainer = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return import('./blocks');\n\n              case 2:\n                return _context.abrupt(\"return\", _context.sent.DocsContainer);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getContainer() {\n        return _getContainer.apply(this, arguments);\n      }\n\n      return getContainer;\n    }(),\n    getPage: function () {\n      var _getPage = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return import('./blocks');\n\n              case 2:\n                return _context2.abrupt(\"return\", _context2.sent.DocsPage);\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getPage() {\n        return _getPage.apply(this, arguments);\n      }\n\n      return getPage;\n    }()\n  }\n};","export var PARAM_KEY = 'actions';\nexport var ADDON_ID = 'storybook/actions';\nexport var PANEL_ID = \"\".concat(ADDON_ID, \"/panel\");\nexport var EVENT_ID = \"\".concat(ADDON_ID, \"/action-event\");\nexport var CYCLIC_KEY = '$___storybook.isCyclic';","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = typeof global !== 'undefined' && (global.crypto || global.msCrypto); // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n","var rng = require('./lib/rng-browser');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","import \"core-js/modules/es.object.assign.js\";\nexport var config = {\n  depth: 10,\n  clearOnStoryChange: true,\n  limit: 50\n};\nexport var configureActions = function configureActions() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  Object.assign(config, options);\n};","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nimport \"core-js/modules/es.object.get-prototype-of.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport uuidv4 from 'uuid-browser/v4';\nimport { addons } from '@storybook/addons';\nimport { EVENT_ID } from '../constants';\nimport { config } from './configureActions';\n\n// import('react').SyntheticEvent;\nvar findProto = function findProto(obj, callback) {\n  var proto = Object.getPrototypeOf(obj);\n  if (!proto || callback(proto)) return proto;\n  return findProto(proto, callback);\n};\n\nvar isReactSyntheticEvent = function isReactSyntheticEvent(e) {\n  return Boolean(_typeof(e) === 'object' && e && findProto(e, function (proto) {\n    return /^Synthetic(?:Base)?Event$/.test(proto.constructor.name);\n  }) && typeof e.persist === 'function');\n};\n\nvar serializeArg = function serializeArg(a) {\n  if (isReactSyntheticEvent(a)) {\n    var e = Object.create(a.constructor.prototype, Object.getOwnPropertyDescriptors(a));\n    e.persist();\n    var viewDescriptor = Object.getOwnPropertyDescriptor(e, 'view'); // don't send the entire window object over.\n\n    var view = viewDescriptor === null || viewDescriptor === void 0 ? void 0 : viewDescriptor.value;\n\n    if (_typeof(view) === 'object' && (view === null || view === void 0 ? void 0 : view.constructor.name) === 'Window') {\n      Object.defineProperty(e, 'view', Object.assign({}, viewDescriptor, {\n        value: Object.create(view.constructor.prototype)\n      }));\n    }\n\n    return e;\n  }\n\n  return a;\n};\n\nexport function action(name) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var actionOptions = Object.assign({}, config, options);\n\n  var handler = function actionHandler() {\n    var channel = addons.getChannel();\n    var id = uuidv4();\n    var minDepth = 5; // anything less is really just storybook internals\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var serializedArgs = args.map(serializeArg);\n    var normalizedArgs = args.length > 1 ? serializedArgs : serializedArgs[0];\n    var actionDisplayToEmit = {\n      id: id,\n      count: 0,\n      data: {\n        name: name,\n        args: normalizedArgs\n      },\n      options: Object.assign({}, actionOptions, {\n        maxDepth: minDepth + (actionOptions.depth || 3),\n        allowFunction: actionOptions.allowFunction || false\n      })\n    };\n    channel.emit(EVENT_ID, actionDisplayToEmit);\n  };\n\n  return handler;\n}","import \"core-js/modules/es.object.assign.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { action } from './action';\nimport { config } from './configureActions';\nexport var actions = function actions() {\n  var options = config;\n\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  var names = args; // args argument can be a single argument as an array\n\n  if (names.length === 1 && Array.isArray(names[0])) {\n    var _names = names;\n\n    var _names2 = _slicedToArray(_names, 1);\n\n    names = _names2[0];\n  } // last argument can be options\n\n\n  if (names.length !== 1 && typeof names[names.length - 1] !== 'string') {\n    options = Object.assign({}, config, names.pop());\n  }\n\n  var namesObject = names[0];\n\n  if (names.length !== 1 || typeof namesObject === 'string') {\n    namesObject = {};\n    names.forEach(function (name) {\n      namesObject[name] = name;\n    });\n  }\n\n  var actionsObject = {};\n  Object.keys(namesObject).forEach(function (name) {\n    actionsObject[name] = action(namesObject[name], options);\n  });\n  return actionsObject;\n};","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.freeze.js\";\n\nvar _templateObject, _templateObject2;\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport deprecate from 'util-deprecate';\nimport dedent from 'ts-dedent';\nexport var decorateAction = function decorateAction(_decorators) {\n  return deprecate(function () {}, dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    decorateAction is no longer supported as of Storybook 6.0.\\n  \"]))));\n};\nvar deprecatedCallback = deprecate(function () {}, 'decorate.* is no longer supported as of Storybook 6.0.');\nexport var decorate = function decorate(_decorators) {\n  return deprecate(function () {\n    return {\n      action: deprecatedCallback,\n      actions: deprecatedCallback,\n      withActions: deprecatedCallback\n    };\n  }, dedent(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n    decorate is deprecated, please configure addon-actions using the addParameter api:\\n      \\n      addParameters({\\n        actions: {\\n          handles: options\\n        },\\n      });\\n    \"]))));\n};","import \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.object.freeze.js\";\n\nvar _templateObject;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n// Based on http://backbonejs.org/docs/backbone.html#section-164\nimport global from 'global';\nimport { useEffect, makeDecorator } from '@storybook/addons';\nimport deprecate from 'util-deprecate';\nimport dedent from 'ts-dedent';\nimport { actions } from './actions';\nimport { PARAM_KEY } from '../constants';\nvar document = global.document,\n    Element = global.Element;\nvar delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\nvar isIE = Element != null && !Element.prototype.matches;\nvar matchesMethod = isIE ? 'msMatchesSelector' : 'matches';\nvar root = document && document.getElementById('root');\n\nvar hasMatchInAncestry = function hasMatchInAncestry(element, selector) {\n  if (element[matchesMethod](selector)) {\n    return true;\n  }\n\n  var parent = element.parentElement;\n\n  if (!parent) {\n    return false;\n  }\n\n  return hasMatchInAncestry(parent, selector);\n};\n\nvar createHandlers = function createHandlers(actionsFn) {\n  for (var _len = arguments.length, handles = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    handles[_key - 1] = arguments[_key];\n  }\n\n  var actionsObject = actionsFn.apply(void 0, handles);\n  return Object.entries(actionsObject).map(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        action = _ref2[1];\n\n    var _key$match = key.match(delegateEventSplitter),\n        _key$match2 = _slicedToArray(_key$match, 3),\n        _ = _key$match2[0],\n        eventName = _key$match2[1],\n        selector = _key$match2[2];\n\n    return {\n      eventName: eventName,\n      handler: function handler(e) {\n        if (!selector || hasMatchInAncestry(e.target, selector)) {\n          action(e);\n        }\n      }\n    };\n  });\n};\n\nvar applyEventHandlers = deprecate(function (actionsFn) {\n  for (var _len2 = arguments.length, handles = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    handles[_key2 - 1] = arguments[_key2];\n  }\n\n  useEffect(function () {\n    if (root != null) {\n      var handlers = createHandlers.apply(void 0, [actionsFn].concat(handles));\n      handlers.forEach(function (_ref3) {\n        var eventName = _ref3.eventName,\n            handler = _ref3.handler;\n        return root.addEventListener(eventName, handler);\n      });\n      return function () {\n        return handlers.forEach(function (_ref4) {\n          var eventName = _ref4.eventName,\n              handler = _ref4.handler;\n          return root.removeEventListener(eventName, handler);\n        });\n      };\n    }\n\n    return undefined;\n  }, [root, actionsFn, handles]);\n}, dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    withActions(options) is deprecated, please configure addon-actions using the addParameter api:\\n\\n    addParameters({\\n      actions: {\\n        handles: options\\n      },\\n    });\\n  \"]))));\n\nvar applyDeprecatedOptions = function applyDeprecatedOptions(actionsFn, options) {\n  if (options) {\n    applyEventHandlers(actionsFn, options);\n  }\n};\n\nexport var withActions = makeDecorator({\n  name: 'withActions',\n  parameterName: PARAM_KEY,\n  skipIfNoParametersOrOptions: true,\n  wrapper: function wrapper(getStory, context, _ref5) {\n    var parameters = _ref5.parameters,\n        options = _ref5.options;\n    applyDeprecatedOptions(actions, options);\n    if (parameters && parameters.handles) applyEventHandlers.apply(void 0, [actions].concat(_toConsumableArray(parameters.handles)));\n    return getStory(context);\n  }\n});","export * from './constants';\nexport * from './models';\nexport * from './preview';\n\nif (module && module.hot && module.hot.decline) {\n  module.hot.decline();\n}","import { withActions } from '../index';\nexport var decorators = [withActions];","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport \"core-js/modules/es.regexp.constructor.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport { action } from '../index'; // interface ActionsParameter {\n//   disable?: boolean;\n//   argTypesRegex?: RegExp;\n// }\n\nvar isInInitialArgs = function isInInitialArgs(name, initialArgs) {\n  return typeof initialArgs[name] === 'undefined' && !(name in initialArgs);\n};\n/**\n * Automatically add action args for argTypes whose name\n * matches a regex, such as `^on.*` for react-style `onClick` etc.\n */\n\n\nexport var inferActionsFromArgTypesRegex = function inferActionsFromArgTypesRegex(context) {\n  var initialArgs = context.initialArgs,\n      argTypes = context.argTypes,\n      actions = context.parameters.actions;\n\n  if (!actions || actions.disable || !actions.argTypesRegex || !argTypes) {\n    return {};\n  }\n\n  var argTypesRegex = new RegExp(actions.argTypesRegex);\n  var argTypesMatchingRegex = Object.entries(argTypes).filter(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 1),\n        name = _ref2[0];\n\n    return !!argTypesRegex.test(name);\n  });\n  return argTypesMatchingRegex.reduce(function (acc, _ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        name = _ref4[0],\n        argType = _ref4[1];\n\n    if (isInInitialArgs(name, initialArgs)) {\n      acc[name] = action(name);\n    }\n\n    return acc;\n  }, {});\n};\n/**\n * Add action args for list of strings.\n */\n\nexport var addActionsFromArgTypes = function addActionsFromArgTypes(context) {\n  var initialArgs = context.initialArgs,\n      argTypes = context.argTypes,\n      actions = context.parameters.actions;\n\n  if (actions !== null && actions !== void 0 && actions.disable || !argTypes) {\n    return {};\n  }\n\n  var argTypesWithAction = Object.entries(argTypes).filter(function (_ref5) {\n    var _ref6 = _slicedToArray(_ref5, 2),\n        name = _ref6[0],\n        argType = _ref6[1];\n\n    return !!argType.action;\n  });\n  return argTypesWithAction.reduce(function (acc, _ref7) {\n    var _ref8 = _slicedToArray(_ref7, 2),\n        name = _ref8[0],\n        argType = _ref8[1];\n\n    if (isInInitialArgs(name, initialArgs)) {\n      acc[name] = action(typeof argType.action === 'string' ? argType.action : name);\n    }\n\n    return acc;\n  }, {});\n};","import { addActionsFromArgTypes, inferActionsFromArgTypesRegex } from './addArgsHelpers';\nexport var argsEnhancers = [addActionsFromArgTypes, inferActionsFromArgTypesRegex];","export var ADDON_ID = 'storybook/background';\nexport var PARAM_KEY = 'backgrounds';\nexport var GRID_PARAM_KEY = 'grid';\nexport var EVENTS = {\n  UPDATE: \"\".concat(ADDON_ID, \"/update\")\n};","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.freeze.js\";\n\nvar _templateObject;\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport global from 'global';\nimport dedent from 'ts-dedent';\nimport { logger } from '@storybook/client-logger';\nvar document = global.document,\n    window = global.window;\nexport var isReduceMotionEnabled = function isReduceMotionEnabled() {\n  var prefersReduceMotion = window.matchMedia('(prefers-reduced-motion: reduce)');\n  return prefersReduceMotion.matches;\n};\nexport var getBackgroundColorByName = function getBackgroundColorByName(currentSelectedValue) {\n  var backgrounds = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var defaultName = arguments.length > 2 ? arguments[2] : undefined;\n\n  if (currentSelectedValue === 'transparent') {\n    return 'transparent';\n  }\n\n  if (backgrounds.find(function (background) {\n    return background.value === currentSelectedValue;\n  })) {\n    return currentSelectedValue;\n  }\n\n  var defaultBackground = backgrounds.find(function (background) {\n    return background.name === defaultName;\n  });\n\n  if (defaultBackground) {\n    return defaultBackground.value;\n  }\n\n  if (defaultName) {\n    var availableColors = backgrounds.map(function (background) {\n      return background.name;\n    }).join(', ');\n    logger.warn(dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n        Backgrounds Addon: could not find the default color \\\"\", \"\\\".\\n        These are the available colors for your story based on your configuration:\\n        \", \".\\n      \"])), defaultName, availableColors));\n  }\n\n  return 'transparent';\n};\nexport var clearStyles = function clearStyles(selector) {\n  var selectors = Array.isArray(selector) ? selector : [selector];\n  selectors.forEach(clearStyle);\n};\n\nvar clearStyle = function clearStyle(selector) {\n  var element = document.getElementById(selector);\n\n  if (element) {\n    element.parentElement.removeChild(element);\n  }\n};\n\nexport var addGridStyle = function addGridStyle(selector, css) {\n  var existingStyle = document.getElementById(selector);\n\n  if (existingStyle) {\n    if (existingStyle.innerHTML !== css) {\n      existingStyle.innerHTML = css;\n    }\n  } else {\n    var style = document.createElement('style');\n    style.setAttribute('id', selector);\n    style.innerHTML = css;\n    document.head.appendChild(style);\n  }\n};\nexport var addBackgroundStyle = function addBackgroundStyle(selector, css, storyId) {\n  var existingStyle = document.getElementById(selector);\n\n  if (existingStyle) {\n    if (existingStyle.innerHTML !== css) {\n      existingStyle.innerHTML = css;\n    }\n  } else {\n    var style = document.createElement('style');\n    style.setAttribute('id', selector);\n    style.innerHTML = css;\n    var gridStyleSelector = \"addon-backgrounds-grid\".concat(storyId ? \"-docs-\".concat(storyId) : ''); // If grids already exist, we want to add the style tag BEFORE it so the background doesn't override grid\n\n    var existingGridStyle = document.getElementById(gridStyleSelector);\n\n    if (existingGridStyle) {\n      existingGridStyle.parentElement.insertBefore(style, existingGridStyle);\n    } else {\n      document.head.appendChild(style);\n    }\n  }\n};","import \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport { useMemo, useEffect } from '@storybook/addons';\nimport { PARAM_KEY as BACKGROUNDS_PARAM_KEY } from '../constants';\nimport { clearStyles, addBackgroundStyle, getBackgroundColorByName, isReduceMotionEnabled } from '../helpers';\nexport var withBackground = function withBackground(StoryFn, context) {\n  var _globals$BACKGROUNDS_;\n\n  var globals = context.globals,\n      parameters = context.parameters;\n  var globalsBackgroundColor = (_globals$BACKGROUNDS_ = globals[BACKGROUNDS_PARAM_KEY]) === null || _globals$BACKGROUNDS_ === void 0 ? void 0 : _globals$BACKGROUNDS_.value;\n  var backgroundsConfig = parameters[BACKGROUNDS_PARAM_KEY];\n  var selectedBackgroundColor = useMemo(function () {\n    if (backgroundsConfig.disable) {\n      return 'transparent';\n    }\n\n    return getBackgroundColorByName(globalsBackgroundColor, backgroundsConfig.values, backgroundsConfig.default);\n  }, [backgroundsConfig, globalsBackgroundColor]);\n  var isActive = useMemo(function () {\n    return selectedBackgroundColor && selectedBackgroundColor !== 'transparent';\n  }, [selectedBackgroundColor]);\n  var selector = context.viewMode === 'docs' ? \"#anchor--\".concat(context.id, \" .docs-story\") : '.sb-show-main';\n  var backgroundStyles = useMemo(function () {\n    var transitionStyle = 'transition: background-color 0.3s;';\n    return \"\\n      \".concat(selector, \" {\\n        background: \").concat(selectedBackgroundColor, \" !important;\\n        \").concat(isReduceMotionEnabled() ? '' : transitionStyle, \"\\n      }\\n    \");\n  }, [selectedBackgroundColor, selector]);\n  useEffect(function () {\n    var selectorId = context.viewMode === 'docs' ? \"addon-backgrounds-docs-\".concat(context.id) : \"addon-backgrounds-color\";\n\n    if (!isActive) {\n      clearStyles(selectorId);\n      return;\n    }\n\n    addBackgroundStyle(selectorId, backgroundStyles, context.viewMode === 'docs' ? context.id : null);\n  }, [isActive, backgroundStyles, context]);\n  return StoryFn();\n};","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.freeze.js\";\n\nvar _templateObject;\n\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.array.concat.js\";\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport dedent from 'ts-dedent';\nimport deprecate from 'util-deprecate';\nimport { useMemo, useEffect } from '@storybook/addons';\nimport { clearStyles, addGridStyle } from '../helpers';\nimport { PARAM_KEY as BACKGROUNDS_PARAM_KEY } from '../constants';\nvar deprecatedCellSizeWarning = deprecate(function () {}, dedent(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    Backgrounds Addon: The cell size parameter has been changed.\\n\\n    - parameters.grid.cellSize should now be parameters.backgrounds.grid.cellSize\\n    See https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-grid-parameter\\n  \"]))));\nexport var withGrid = function withGrid(StoryFn, context) {\n  var _globals$BACKGROUNDS_, _parameters$grid, _gridParameters$offse, _gridParameters$offse2;\n\n  var globals = context.globals,\n      parameters = context.parameters;\n  var gridParameters = parameters[BACKGROUNDS_PARAM_KEY].grid;\n  var isActive = ((_globals$BACKGROUNDS_ = globals[BACKGROUNDS_PARAM_KEY]) === null || _globals$BACKGROUNDS_ === void 0 ? void 0 : _globals$BACKGROUNDS_.grid) === true && gridParameters.disable !== true;\n  var cellAmount = gridParameters.cellAmount,\n      cellSize = gridParameters.cellSize,\n      opacity = gridParameters.opacity;\n  var isInDocs = context.viewMode === 'docs';\n  var gridSize;\n\n  if ((_parameters$grid = parameters.grid) !== null && _parameters$grid !== void 0 && _parameters$grid.cellSize) {\n    gridSize = parameters.grid.cellSize;\n    deprecatedCellSizeWarning();\n  } else {\n    gridSize = cellSize;\n  }\n\n  var isLayoutPadded = parameters.layout === undefined || parameters.layout === 'padded'; // 16px offset in the grid to account for padded layout\n\n  var defaultOffset = isLayoutPadded ? 16 : 0;\n  var offsetX = (_gridParameters$offse = gridParameters.offsetX) !== null && _gridParameters$offse !== void 0 ? _gridParameters$offse : isInDocs ? 20 : defaultOffset;\n  var offsetY = (_gridParameters$offse2 = gridParameters.offsetY) !== null && _gridParameters$offse2 !== void 0 ? _gridParameters$offse2 : isInDocs ? 20 : defaultOffset;\n  var gridStyles = useMemo(function () {\n    var selector = context.viewMode === 'docs' ? \"#anchor--\".concat(context.id, \" .docs-story\") : '.sb-show-main';\n    var backgroundSize = [\"\".concat(gridSize * cellAmount, \"px \").concat(gridSize * cellAmount, \"px\"), \"\".concat(gridSize * cellAmount, \"px \").concat(gridSize * cellAmount, \"px\"), \"\".concat(gridSize, \"px \").concat(gridSize, \"px\"), \"\".concat(gridSize, \"px \").concat(gridSize, \"px\")].join(', ');\n    return \"\\n      \".concat(selector, \" {\\n        background-size: \").concat(backgroundSize, \" !important;\\n        background-position: \").concat(offsetX, \"px \").concat(offsetY, \"px, \").concat(offsetX, \"px \").concat(offsetY, \"px, \").concat(offsetX, \"px \").concat(offsetY, \"px, \").concat(offsetX, \"px \").concat(offsetY, \"px !important;\\n        background-blend-mode: difference !important;\\n        background-image: linear-gradient(rgba(130, 130, 130, \").concat(opacity, \") 1px, transparent 1px),\\n         linear-gradient(90deg, rgba(130, 130, 130, \").concat(opacity, \") 1px, transparent 1px),\\n         linear-gradient(rgba(130, 130, 130, \").concat(opacity / 2, \") 1px, transparent 1px),\\n         linear-gradient(90deg, rgba(130, 130, 130, \").concat(opacity / 2, \") 1px, transparent 1px) !important;\\n      }\\n    \");\n  }, [gridSize]);\n  useEffect(function () {\n    var selectorId = context.viewMode === 'docs' ? \"addon-backgrounds-grid-docs-\".concat(context.id) : \"addon-backgrounds-grid\";\n\n    if (!isActive) {\n      clearStyles(selectorId);\n      return;\n    }\n\n    addGridStyle(selectorId, gridStyles);\n  }, [isActive, gridStyles, context]);\n  return StoryFn();\n};","import { withBackground } from './decorators/withBackground';\nimport { withGrid } from './decorators/withGrid';\nexport var decorators = [withGrid, withBackground];\nexport var parameters = {\n  backgrounds: {\n    grid: {\n      cellSize: 20,\n      opacity: 0.5,\n      cellAmount: 5\n    },\n    values: [{\n      name: 'light',\n      value: '#F8F8F8'\n    }, {\n      name: 'dark',\n      value: '#333333'\n    }]\n  }\n};","/* eslint-disable no-param-reassign */\nimport global from 'global';\n\nfunction getDocumentWidthAndHeight() {\n  var container = global.document.documentElement;\n  var height = Math.max(container.scrollHeight, container.offsetHeight);\n  var width = Math.max(container.scrollWidth, container.offsetWidth);\n  return {\n    width: width,\n    height: height\n  };\n}\n\nfunction createCanvas() {\n  var canvas = global.document.createElement('canvas');\n  canvas.id = 'storybook-addon-measure';\n  var context = canvas.getContext('2d'); // Set canvas width & height\n\n  var _getDocumentWidthAndH = getDocumentWidthAndHeight(),\n      width = _getDocumentWidthAndH.width,\n      height = _getDocumentWidthAndH.height;\n\n  setCanvasWidthAndHeight(canvas, context, {\n    width: width,\n    height: height\n  }); // Position canvas\n\n  canvas.style.position = 'absolute';\n  canvas.style.left = '0';\n  canvas.style.top = '0';\n  canvas.style.zIndex = '2147483647'; // Disable any user interactions\n\n  canvas.style.pointerEvents = 'none';\n  global.document.body.appendChild(canvas);\n  return {\n    canvas: canvas,\n    context: context,\n    width: width,\n    height: height\n  };\n}\n\nfunction setCanvasWidthAndHeight(canvas, context, _ref) {\n  var width = _ref.width,\n      height = _ref.height;\n  canvas.style.width = \"\".concat(width, \"px\");\n  canvas.style.height = \"\".concat(height, \"px\"); // Scale\n\n  var scale = global.window.devicePixelRatio;\n  canvas.width = Math.floor(width * scale);\n  canvas.height = Math.floor(height * scale); // Normalize coordinate system to use css pixels.\n\n  context.scale(scale, scale);\n}\n\nvar state = {};\nexport function init() {\n  if (!state.canvas) {\n    state = createCanvas();\n  }\n}\nexport function clear() {\n  if (state.context) {\n    state.context.clearRect(0, 0, state.width, state.height);\n  }\n}\nexport function draw(callback) {\n  clear();\n  callback(state.context);\n}\nexport function rescale() {\n  // First reset so that the canvas size doesn't impact the container size\n  setCanvasWidthAndHeight(state.canvas, state.context, {\n    width: 0,\n    height: 0\n  });\n\n  var _getDocumentWidthAndH2 = getDocumentWidthAndHeight(),\n      width = _getDocumentWidthAndH2.width,\n      height = _getDocumentWidthAndH2.height;\n\n  setCanvasWidthAndHeight(state.canvas, state.context, {\n    width: width,\n    height: height\n  }); // update state\n\n  state.width = width;\n  state.height = height;\n}\nexport function destroy() {\n  if (state.canvas) {\n    clear();\n    state.canvas.parentNode.removeChild(state.canvas);\n    state = {};\n  }\n}","import \"core-js/modules/es.array.fill.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n\n/* eslint-disable operator-assignment */\n\n/* eslint-disable no-param-reassign */\nvar colors = {\n  margin: '#f6b26b',\n  border: '#ffe599',\n  padding: '#93c47d',\n  content: '#6fa8dc',\n  text: '#232020'\n};\nvar labelPadding = 6;\n\nfunction roundedRect(context, _ref) {\n  var x = _ref.x,\n      y = _ref.y,\n      w = _ref.w,\n      h = _ref.h,\n      r = _ref.r;\n  x = x - w / 2;\n  y = y - h / 2;\n  if (w < 2 * r) r = w / 2;\n  if (h < 2 * r) r = h / 2;\n  context.beginPath();\n  context.moveTo(x + r, y);\n  context.arcTo(x + w, y, x + w, y + h, r);\n  context.arcTo(x + w, y + h, x, y + h, r);\n  context.arcTo(x, y + h, x, y, r);\n  context.arcTo(x, y, x + w, y, r);\n  context.closePath();\n}\n\nfunction positionCoordinate(position, _ref2) {\n  var padding = _ref2.padding,\n      border = _ref2.border,\n      width = _ref2.width,\n      height = _ref2.height,\n      top = _ref2.top,\n      left = _ref2.left;\n  var contentWidth = width - border.left - border.right - padding.left - padding.right;\n  var contentHeight = height - padding.top - padding.bottom - border.top - border.bottom;\n  var x = left + border.left + padding.left;\n  var y = top + border.top + padding.top;\n\n  if (position === 'top') {\n    x += contentWidth / 2;\n  } else if (position === 'right') {\n    x += contentWidth;\n    y += contentHeight / 2;\n  } else if (position === 'bottom') {\n    x += contentWidth / 2;\n    y += contentHeight;\n  } else if (position === 'left') {\n    y += contentHeight / 2;\n  } else if (position === 'center') {\n    x += contentWidth / 2;\n    y += contentHeight / 2;\n  }\n\n  return {\n    x: x,\n    y: y\n  };\n}\n/**\n * Offset the label based on how many layers appear before it\n * For example:\n * margin labels will shift further outwards if there are\n * padding labels\n */\n\n\nfunction offset(type, position, _ref3, labelPaddingSize, external) {\n  var margin = _ref3.margin,\n      border = _ref3.border,\n      padding = _ref3.padding;\n\n  var shift = function shift(dir) {\n    return 0;\n  };\n\n  var offsetX = 0;\n  var offsetY = 0; // If external labels then push them to the edge of the band\n  // else keep them centred\n\n  var locationMultiplier = external ? 1 : 0.5; // Account for padding within the label\n\n  var labelPaddingShift = external ? labelPaddingSize * 2 : 0;\n\n  if (type === 'padding') {\n    shift = function shift(dir) {\n      return padding[dir] * locationMultiplier + labelPaddingShift;\n    };\n  } else if (type === 'border') {\n    shift = function shift(dir) {\n      return padding[dir] + border[dir] * locationMultiplier + labelPaddingShift;\n    };\n  } else if (type === 'margin') {\n    shift = function shift(dir) {\n      return padding[dir] + border[dir] + margin[dir] * locationMultiplier + labelPaddingShift;\n    };\n  }\n\n  if (position === 'top') {\n    offsetY = -shift('top');\n  } else if (position === 'right') {\n    offsetX = shift('right');\n  } else if (position === 'bottom') {\n    offsetY = shift('bottom');\n  } else if (position === 'left') {\n    offsetX = -shift('left');\n  }\n\n  return {\n    offsetX: offsetX,\n    offsetY: offsetY\n  };\n}\n\nfunction collide(a, b) {\n  return Math.abs(a.x - b.x) < Math.abs(a.w + b.w) / 2 && Math.abs(a.y - b.y) < Math.abs(a.h + b.h) / 2;\n}\n\nfunction overlapAdjustment(position, currentRect, prevRect) {\n  if (position === 'top') {\n    currentRect.y = prevRect.y - prevRect.h - labelPadding;\n  } else if (position === 'right') {\n    currentRect.x = prevRect.x + prevRect.w / 2 + labelPadding + currentRect.w / 2;\n  } else if (position === 'bottom') {\n    currentRect.y = prevRect.y + prevRect.h + labelPadding;\n  } else if (position === 'left') {\n    currentRect.x = prevRect.x - prevRect.w / 2 - labelPadding - currentRect.w / 2;\n  }\n\n  return {\n    x: currentRect.x,\n    y: currentRect.y\n  };\n}\n\nfunction textWithRect(context, type, _ref4, text) {\n  var x = _ref4.x,\n      y = _ref4.y,\n      w = _ref4.w,\n      h = _ref4.h;\n  roundedRect(context, {\n    x: x,\n    y: y,\n    w: w,\n    h: h,\n    r: 3\n  });\n  context.fillStyle = \"\".concat(colors[type], \"dd\");\n  context.fill();\n  context.strokeStyle = colors[type];\n  context.stroke();\n  context.fillStyle = colors.text;\n  context.fillText(text, x, y);\n  roundedRect(context, {\n    x: x,\n    y: y,\n    w: w,\n    h: h,\n    r: 3\n  });\n  context.fillStyle = \"\".concat(colors[type], \"dd\");\n  context.fill();\n  context.strokeStyle = colors[type];\n  context.stroke();\n  context.fillStyle = colors.text;\n  context.fillText(text, x, y);\n  return {\n    x: x,\n    y: y,\n    w: w,\n    h: h\n  };\n}\n\nfunction configureText(context, text) {\n  context.font = '600 12px monospace';\n  context.textBaseline = 'middle';\n  context.textAlign = 'center';\n  var metrics = context.measureText(text);\n  var actualHeight = metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n  var w = metrics.width + labelPadding * 2;\n  var h = actualHeight + labelPadding * 2;\n  return {\n    w: w,\n    h: h\n  };\n}\n\nfunction drawLabel(context, measurements, _ref5, prevRect) {\n  var type = _ref5.type,\n      _ref5$position = _ref5.position,\n      position = _ref5$position === void 0 ? 'center' : _ref5$position,\n      text = _ref5.text;\n  var external = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n  var _positionCoordinate = positionCoordinate(position, measurements),\n      x = _positionCoordinate.x,\n      y = _positionCoordinate.y;\n\n  var _offset = offset(type, position, measurements, labelPadding + 1, external),\n      offsetX = _offset.offsetX,\n      offsetY = _offset.offsetY; // Shift coordinate to center within\n  // the band of measurement\n\n\n  x += offsetX;\n  y += offsetY;\n\n  var _configureText = configureText(context, text),\n      w = _configureText.w,\n      h = _configureText.h; // Adjust for overlap\n\n\n  if (prevRect && collide({\n    x: x,\n    y: y,\n    w: w,\n    h: h\n  }, prevRect)) {\n    var adjusted = overlapAdjustment(position, {\n      x: x,\n      y: y,\n      w: w,\n      h: h\n    }, prevRect);\n    x = adjusted.x;\n    y = adjusted.y;\n  }\n\n  return textWithRect(context, type, {\n    x: x,\n    y: y,\n    w: w,\n    h: h\n  }, text);\n}\n\nfunction floatingOffset(alignment, _ref6) {\n  var w = _ref6.w,\n      h = _ref6.h;\n  var deltaW = w * 0.5 + labelPadding;\n  var deltaH = h * 0.5 + labelPadding;\n  return {\n    offsetX: (alignment.x === 'left' ? -1 : 1) * deltaW,\n    offsetY: (alignment.y === 'top' ? -1 : 1) * deltaH\n  };\n}\n\nexport function drawFloatingLabel(context, measurements, _ref7) {\n  var type = _ref7.type,\n      text = _ref7.text;\n  var floatingAlignment = measurements.floatingAlignment,\n      extremities = measurements.extremities;\n  var x = extremities[floatingAlignment.x];\n  var y = extremities[floatingAlignment.y];\n\n  var _configureText2 = configureText(context, text),\n      w = _configureText2.w,\n      h = _configureText2.h;\n\n  var _floatingOffset = floatingOffset(floatingAlignment, {\n    w: w,\n    h: h\n  }),\n      offsetX = _floatingOffset.offsetX,\n      offsetY = _floatingOffset.offsetY;\n\n  x += offsetX;\n  y += offsetY;\n  return textWithRect(context, type, {\n    x: x,\n    y: y,\n    w: w,\n    h: h\n  }, text);\n}\n\nfunction drawStack(context, measurements, stack, external) {\n  var rects = [];\n  stack.forEach(function (l, idx) {\n    // Move the centred label to floating in external mode\n    var rect = external && l.position === 'center' ? drawFloatingLabel(context, measurements, l) : drawLabel(context, measurements, l, rects[idx - 1], external);\n    rects[idx] = rect;\n  });\n}\n\nexport function labelStacks(context, measurements, labels, externalLabels) {\n  var stacks = labels.reduce(function (acc, l) {\n    if (!Object.prototype.hasOwnProperty.call(acc, l.position)) {\n      acc[l.position] = [];\n    }\n\n    acc[l.position].push(l);\n    return acc;\n  }, {});\n\n  if (stacks.top) {\n    drawStack(context, measurements, stacks.top, externalLabels);\n  }\n\n  if (stacks.right) {\n    drawStack(context, measurements, stacks.right, externalLabels);\n  }\n\n  if (stacks.bottom) {\n    drawStack(context, measurements, stacks.bottom, externalLabels);\n  }\n\n  if (stacks.left) {\n    drawStack(context, measurements, stacks.left, externalLabels);\n  }\n\n  if (stacks.center) {\n    drawStack(context, measurements, stacks.center, externalLabels);\n  }\n}","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.number.is-integer.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.function.name.js\";\n\n/* eslint-disable operator-assignment */\n\n/**\n * Based on https://gist.github.com/awestbro/e668c12662ad354f02a413205b65fce7\n */\nimport global from 'global';\nimport { draw } from './canvas';\nimport { labelStacks } from './labels';\nvar colors = {\n  margin: '#f6b26ba8',\n  border: '#ffe599a8',\n  padding: '#93c47d8c',\n  content: '#6fa8dca8'\n};\nvar SMALL_NODE_SIZE = 30;\n\nfunction pxToNumber(px) {\n  return parseInt(px.replace('px', ''), 10);\n}\n\nfunction round(value) {\n  return Number.isInteger(value) ? value : value.toFixed(2);\n}\n\nfunction filterZeroValues(labels) {\n  return labels.filter(function (l) {\n    return l.text !== 0 && l.text !== '0';\n  });\n}\n\nfunction floatingAlignment(extremities) {\n  var windowExtremities = {\n    top: global.window.scrollY,\n    bottom: global.window.scrollY + global.window.innerHeight,\n    left: global.window.scrollX,\n    right: global.window.scrollX + global.window.innerWidth\n  };\n  var distances = {\n    top: Math.abs(windowExtremities.top - extremities.top),\n    bottom: Math.abs(windowExtremities.bottom - extremities.bottom),\n    left: Math.abs(windowExtremities.left - extremities.left),\n    right: Math.abs(windowExtremities.right - extremities.right)\n  };\n  return {\n    x: distances.left > distances.right ? 'left' : 'right',\n    y: distances.top > distances.bottom ? 'top' : 'bottom'\n  };\n}\n\nfunction measureElement(element) {\n  var style = global.getComputedStyle(element); // eslint-disable-next-line prefer-const\n\n  var _element$getBoundingC = element.getBoundingClientRect(),\n      top = _element$getBoundingC.top,\n      left = _element$getBoundingC.left,\n      right = _element$getBoundingC.right,\n      bottom = _element$getBoundingC.bottom,\n      width = _element$getBoundingC.width,\n      height = _element$getBoundingC.height;\n\n  var marginTop = style.marginTop,\n      marginBottom = style.marginBottom,\n      marginLeft = style.marginLeft,\n      marginRight = style.marginRight,\n      paddingTop = style.paddingTop,\n      paddingBottom = style.paddingBottom,\n      paddingLeft = style.paddingLeft,\n      paddingRight = style.paddingRight,\n      borderBottomWidth = style.borderBottomWidth,\n      borderTopWidth = style.borderTopWidth,\n      borderLeftWidth = style.borderLeftWidth,\n      borderRightWidth = style.borderRightWidth;\n  top = top + global.window.scrollY;\n  left = left + global.window.scrollX;\n  bottom = bottom + global.window.scrollY;\n  right = right + global.window.scrollX;\n  var margin = {\n    top: pxToNumber(marginTop),\n    bottom: pxToNumber(marginBottom),\n    left: pxToNumber(marginLeft),\n    right: pxToNumber(marginRight)\n  };\n  var padding = {\n    top: pxToNumber(paddingTop),\n    bottom: pxToNumber(paddingBottom),\n    left: pxToNumber(paddingLeft),\n    right: pxToNumber(paddingRight)\n  };\n  var border = {\n    top: pxToNumber(borderTopWidth),\n    bottom: pxToNumber(borderBottomWidth),\n    left: pxToNumber(borderLeftWidth),\n    right: pxToNumber(borderRightWidth)\n  };\n  var extremities = {\n    top: top - margin.top,\n    bottom: bottom + margin.bottom,\n    left: left - margin.left,\n    right: right + margin.right\n  };\n  return {\n    margin: margin,\n    padding: padding,\n    border: border,\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height,\n    extremities: extremities,\n    floatingAlignment: floatingAlignment(extremities)\n  };\n}\n\nfunction drawMargin(context, _ref) {\n  var margin = _ref.margin,\n      width = _ref.width,\n      height = _ref.height,\n      top = _ref.top,\n      left = _ref.left,\n      bottom = _ref.bottom,\n      right = _ref.right;\n  // Draw Margin\n  var marginHeight = height + margin.bottom + margin.top;\n  context.fillStyle = colors.margin; // Top margin rect\n\n  context.fillRect(left, top - margin.top, width, margin.top); // Right margin rect\n\n  context.fillRect(right, top - margin.top, margin.right, marginHeight); // Bottom margin rect\n\n  context.fillRect(left, bottom, width, margin.bottom); // Left margin rect\n\n  context.fillRect(left - margin.left, top - margin.top, margin.left, marginHeight);\n  var marginLabels = [{\n    type: 'margin',\n    text: round(margin.top),\n    position: 'top'\n  }, {\n    type: 'margin',\n    text: round(margin.right),\n    position: 'right'\n  }, {\n    type: 'margin',\n    text: round(margin.bottom),\n    position: 'bottom'\n  }, {\n    type: 'margin',\n    text: round(margin.left),\n    position: 'left'\n  }];\n  return filterZeroValues(marginLabels);\n}\n\nfunction drawPadding(context, _ref2) {\n  var padding = _ref2.padding,\n      border = _ref2.border,\n      width = _ref2.width,\n      height = _ref2.height,\n      top = _ref2.top,\n      left = _ref2.left,\n      bottom = _ref2.bottom,\n      right = _ref2.right;\n  var paddingWidth = width - border.left - border.right;\n  var paddingHeight = height - padding.top - padding.bottom - border.top - border.bottom;\n  context.fillStyle = colors.padding; // Top padding rect\n\n  context.fillRect(left + border.left, top + border.top, paddingWidth, padding.top); // Right padding rect\n\n  context.fillRect(right - padding.right - border.right, top + padding.top + border.top, padding.right, paddingHeight); // Bottom padding rect\n\n  context.fillRect(left + border.left, bottom - padding.bottom - border.bottom, paddingWidth, padding.bottom); // Left padding rect\n\n  context.fillRect(left + border.left, top + padding.top + border.top, padding.left, paddingHeight);\n  var paddingLabels = [{\n    type: 'padding',\n    text: padding.top,\n    position: 'top'\n  }, {\n    type: 'padding',\n    text: padding.right,\n    position: 'right'\n  }, {\n    type: 'padding',\n    text: padding.bottom,\n    position: 'bottom'\n  }, {\n    type: 'padding',\n    text: padding.left,\n    position: 'left'\n  }];\n  return filterZeroValues(paddingLabels);\n}\n\nfunction drawBorder(context, _ref3) {\n  var border = _ref3.border,\n      width = _ref3.width,\n      height = _ref3.height,\n      top = _ref3.top,\n      left = _ref3.left,\n      bottom = _ref3.bottom,\n      right = _ref3.right;\n  var borderHeight = height - border.top - border.bottom;\n  context.fillStyle = colors.border; // Top border rect\n\n  context.fillRect(left, top, width, border.top); // Bottom border rect\n\n  context.fillRect(left, bottom - border.bottom, width, border.bottom); // Left border rect\n\n  context.fillRect(left, top + border.top, border.left, borderHeight); // Right border rect\n\n  context.fillRect(right - border.right, top + border.top, border.right, borderHeight);\n  var borderLabels = [{\n    type: 'border',\n    text: border.top,\n    position: 'top'\n  }, {\n    type: 'border',\n    text: border.right,\n    position: 'right'\n  }, {\n    type: 'border',\n    text: border.bottom,\n    position: 'bottom'\n  }, {\n    type: 'border',\n    text: border.left,\n    position: 'left'\n  }];\n  return filterZeroValues(borderLabels);\n}\n\nfunction drawContent(context, _ref4) {\n  var padding = _ref4.padding,\n      border = _ref4.border,\n      width = _ref4.width,\n      height = _ref4.height,\n      top = _ref4.top,\n      left = _ref4.left;\n  var contentWidth = width - border.left - border.right - padding.left - padding.right;\n  var contentHeight = height - padding.top - padding.bottom - border.top - border.bottom;\n  context.fillStyle = colors.content; // content rect\n\n  context.fillRect(left + border.left + padding.left, top + border.top + padding.top, contentWidth, contentHeight); // Dimension label\n\n  return [{\n    type: 'content',\n    position: 'center',\n    text: \"\".concat(round(contentWidth), \" x \").concat(round(contentHeight))\n  }];\n}\n\nfunction drawBoxModel(element) {\n  return function (context) {\n    if (element && context) {\n      var measurements = measureElement(element);\n      var marginLabels = drawMargin(context, measurements);\n      var paddingLabels = drawPadding(context, measurements);\n      var borderLabels = drawBorder(context, measurements);\n      var contentLabels = drawContent(context, measurements);\n      var externalLabels = measurements.width <= SMALL_NODE_SIZE * 3 || measurements.height <= SMALL_NODE_SIZE;\n      labelStacks(context, measurements, [].concat(_toConsumableArray(contentLabels), _toConsumableArray(paddingLabels), _toConsumableArray(borderLabels), _toConsumableArray(marginLabels)), externalLabels);\n    }\n  };\n}\n\nexport function drawSelectedElement(element) {\n  draw(drawBoxModel(element));\n}","import global from 'global';\nexport var deepElementFromPoint = function deepElementFromPoint(x, y) {\n  var element = global.document.elementFromPoint(x, y);\n\n  var crawlShadows = function crawlShadows(node) {\n    if (node && node.shadowRoot) {\n      var nestedElement = node.shadowRoot.elementFromPoint(x, y); // Nested node is same as the root one\n\n      if (node.isEqualNode(nestedElement)) {\n        return node;\n      } // The nested node has shadow DOM too so continue crawling\n\n\n      if (nestedElement.shadowRoot) {\n        return crawlShadows(nestedElement);\n      } // No more shadow DOM\n\n\n      return nestedElement;\n    }\n\n    return node;\n  };\n\n  var shadowElement = crawlShadows(element);\n  return shadowElement || element;\n};","/* eslint-env browser */\nimport { useEffect } from '@storybook/addons';\nimport { drawSelectedElement } from './box-model/visualizer';\nimport { init, rescale, destroy } from './box-model/canvas';\nimport { deepElementFromPoint } from './util';\nvar nodeAtPointerRef;\nvar pointer = {\n  x: 0,\n  y: 0\n};\n\nfunction findAndDrawElement(x, y) {\n  nodeAtPointerRef = deepElementFromPoint(x, y);\n  drawSelectedElement(nodeAtPointerRef);\n}\n\nexport var withMeasure = function withMeasure(StoryFn, context) {\n  var measureEnabled = context.globals.measureEnabled;\n  useEffect(function () {\n    var onMouseMove = function onMouseMove(event) {\n      window.requestAnimationFrame(function () {\n        event.stopPropagation();\n        pointer.x = event.clientX;\n        pointer.y = event.clientY;\n      });\n    };\n\n    document.addEventListener('mousemove', onMouseMove);\n    return function () {\n      document.removeEventListener('mousemove', onMouseMove);\n    };\n  }, []);\n  useEffect(function () {\n    var onMouseOver = function onMouseOver(event) {\n      window.requestAnimationFrame(function () {\n        event.stopPropagation();\n        findAndDrawElement(event.clientX, event.clientY);\n      });\n    };\n\n    var onResize = function onResize() {\n      window.requestAnimationFrame(function () {\n        rescale();\n      });\n    };\n\n    if (measureEnabled) {\n      document.addEventListener('mouseover', onMouseOver);\n      init();\n      window.addEventListener('resize', onResize); // Draw the element below the pointer when first enabled\n\n      findAndDrawElement(pointer.x, pointer.y);\n    }\n\n    return function () {\n      window.removeEventListener('resize', onResize);\n      destroy();\n    };\n  }, [measureEnabled]);\n  return StoryFn();\n};","export var ADDON_ID = 'storybook/measure-addon';\nexport var TOOL_ID = \"\".concat(ADDON_ID, \"/tool\");\nexport var PARAM_KEY = 'measureEnabled';\nexport var EVENTS = {\n  RESULT: \"\".concat(ADDON_ID, \"/result\"),\n  REQUEST: \"\".concat(ADDON_ID, \"/request\"),\n  CLEAR: \"\".concat(ADDON_ID, \"/clear\")\n};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { withMeasure } from './withMeasure';\nimport { PARAM_KEY } from './constants';\nexport var decorators = [withMeasure];\nexport var globals = _defineProperty({}, PARAM_KEY, false);","import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport global from 'global';\nexport var clearStyles = function clearStyles(selector) {\n  var selectors = Array.isArray(selector) ? selector : [selector];\n  selectors.forEach(clearStyle);\n};\n\nvar clearStyle = function clearStyle(selector) {\n  var element = global.document.getElementById(selector);\n\n  if (element && element.parentElement) {\n    element.parentElement.removeChild(element);\n  }\n};\n\nexport var addOutlineStyles = function addOutlineStyles(selector, css) {\n  var existingStyle = global.document.getElementById(selector);\n\n  if (existingStyle) {\n    if (existingStyle.innerHTML !== css) {\n      existingStyle.innerHTML = css;\n    }\n  } else {\n    var style = global.document.createElement('style');\n    style.setAttribute('id', selector);\n    style.innerHTML = css;\n    global.document.head.appendChild(style);\n  }\n};","export var ADDON_ID = 'storybook/outline';\nexport var PARAM_KEY = 'outline';","import \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.freeze.js\";\n\nvar _templateObject;\n\nfunction _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nimport dedent from 'ts-dedent';\n/*\n  From pesticide v1.3.0 . @mrmrs . MIT\n*/\n\nexport default function outlineCSS(selector) {\n  return dedent\n  /* css */\n  (_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n    \", \" body {\\n      outline: 1px solid #2980b9 !important;\\n    }\\n\\n    \", \" article {\\n      outline: 1px solid #3498db !important;\\n    }\\n\\n    \", \" nav {\\n      outline: 1px solid #0088c3 !important;\\n    }\\n\\n    \", \" aside {\\n      outline: 1px solid #33a0ce !important;\\n    }\\n\\n    \", \" section {\\n      outline: 1px solid #66b8da !important;\\n    }\\n\\n    \", \" header {\\n      outline: 1px solid #99cfe7 !important;\\n    }\\n\\n    \", \" footer {\\n      outline: 1px solid #cce7f3 !important;\\n    }\\n\\n    \", \" h1 {\\n      outline: 1px solid #162544 !important;\\n    }\\n\\n    \", \" h2 {\\n      outline: 1px solid #314e6e !important;\\n    }\\n\\n    \", \" h3 {\\n      outline: 1px solid #3e5e85 !important;\\n    }\\n\\n    \", \" h4 {\\n      outline: 1px solid #449baf !important;\\n    }\\n\\n    \", \" h5 {\\n      outline: 1px solid #c7d1cb !important;\\n    }\\n\\n    \", \" h6 {\\n      outline: 1px solid #4371d0 !important;\\n    }\\n\\n    \", \" main {\\n      outline: 1px solid #2f4f90 !important;\\n    }\\n\\n    \", \" address {\\n      outline: 1px solid #1a2c51 !important;\\n    }\\n\\n    \", \" div {\\n      outline: 1px solid #036cdb !important;\\n    }\\n\\n    \", \" p {\\n      outline: 1px solid #ac050b !important;\\n    }\\n\\n    \", \" hr {\\n      outline: 1px solid #ff063f !important;\\n    }\\n\\n    \", \" pre {\\n      outline: 1px solid #850440 !important;\\n    }\\n\\n    \", \" blockquote {\\n      outline: 1px solid #f1b8e7 !important;\\n    }\\n\\n    \", \" ol {\\n      outline: 1px solid #ff050c !important;\\n    }\\n\\n    \", \" ul {\\n      outline: 1px solid #d90416 !important;\\n    }\\n\\n    \", \" li {\\n      outline: 1px solid #d90416 !important;\\n    }\\n\\n    \", \" dl {\\n      outline: 1px solid #fd3427 !important;\\n    }\\n\\n    \", \" dt {\\n      outline: 1px solid #ff0043 !important;\\n    }\\n\\n    \", \" dd {\\n      outline: 1px solid #e80174 !important;\\n    }\\n\\n    \", \" figure {\\n      outline: 1px solid #ff00bb !important;\\n    }\\n\\n    \", \" figcaption {\\n      outline: 1px solid #bf0032 !important;\\n    }\\n\\n    \", \" table {\\n      outline: 1px solid #00cc99 !important;\\n    }\\n\\n    \", \" caption {\\n      outline: 1px solid #37ffc4 !important;\\n    }\\n\\n    \", \" thead {\\n      outline: 1px solid #98daca !important;\\n    }\\n\\n    \", \" tbody {\\n      outline: 1px solid #64a7a0 !important;\\n    }\\n\\n    \", \" tfoot {\\n      outline: 1px solid #22746b !important;\\n    }\\n\\n    \", \" tr {\\n      outline: 1px solid #86c0b2 !important;\\n    }\\n\\n    \", \" th {\\n      outline: 1px solid #a1e7d6 !important;\\n    }\\n\\n    \", \" td {\\n      outline: 1px solid #3f5a54 !important;\\n    }\\n\\n    \", \" col {\\n      outline: 1px solid #6c9a8f !important;\\n    }\\n\\n    \", \" colgroup {\\n      outline: 1px solid #6c9a9d !important;\\n    }\\n\\n    \", \" button {\\n      outline: 1px solid #da8301 !important;\\n    }\\n\\n    \", \" datalist {\\n      outline: 1px solid #c06000 !important;\\n    }\\n\\n    \", \" fieldset {\\n      outline: 1px solid #d95100 !important;\\n    }\\n\\n    \", \" form {\\n      outline: 1px solid #d23600 !important;\\n    }\\n\\n    \", \" input {\\n      outline: 1px solid #fca600 !important;\\n    }\\n\\n    \", \" keygen {\\n      outline: 1px solid #b31e00 !important;\\n    }\\n\\n    \", \" label {\\n      outline: 1px solid #ee8900 !important;\\n    }\\n\\n    \", \" legend {\\n      outline: 1px solid #de6d00 !important;\\n    }\\n\\n    \", \" meter {\\n      outline: 1px solid #e8630c !important;\\n    }\\n\\n    \", \" optgroup {\\n      outline: 1px solid #b33600 !important;\\n    }\\n\\n    \", \" option {\\n      outline: 1px solid #ff8a00 !important;\\n    }\\n\\n    \", \" output {\\n      outline: 1px solid #ff9619 !important;\\n    }\\n\\n    \", \" progress {\\n      outline: 1px solid #e57c00 !important;\\n    }\\n\\n    \", \" select {\\n      outline: 1px solid #e26e0f !important;\\n    }\\n\\n    \", \" textarea {\\n      outline: 1px solid #cc5400 !important;\\n    }\\n\\n    \", \" details {\\n      outline: 1px solid #33848f !important;\\n    }\\n\\n    \", \" summary {\\n      outline: 1px solid #60a1a6 !important;\\n    }\\n\\n    \", \" command {\\n      outline: 1px solid #438da1 !important;\\n    }\\n\\n    \", \" menu {\\n      outline: 1px solid #449da6 !important;\\n    }\\n\\n    \", \" del {\\n      outline: 1px solid #bf0000 !important;\\n    }\\n\\n    \", \" ins {\\n      outline: 1px solid #400000 !important;\\n    }\\n\\n    \", \" img {\\n      outline: 1px solid #22746b !important;\\n    }\\n\\n    \", \" iframe {\\n      outline: 1px solid #64a7a0 !important;\\n    }\\n\\n    \", \" embed {\\n      outline: 1px solid #98daca !important;\\n    }\\n\\n    \", \" object {\\n      outline: 1px solid #00cc99 !important;\\n    }\\n\\n    \", \" param {\\n      outline: 1px solid #37ffc4 !important;\\n    }\\n\\n    \", \" video {\\n      outline: 1px solid #6ee866 !important;\\n    }\\n\\n    \", \" audio {\\n      outline: 1px solid #027353 !important;\\n    }\\n\\n    \", \" source {\\n      outline: 1px solid #012426 !important;\\n    }\\n\\n    \", \" canvas {\\n      outline: 1px solid #a2f570 !important;\\n    }\\n\\n    \", \" track {\\n      outline: 1px solid #59a600 !important;\\n    }\\n\\n    \", \" map {\\n      outline: 1px solid #7be500 !important;\\n    }\\n\\n    \", \" area {\\n      outline: 1px solid #305900 !important;\\n    }\\n\\n    \", \" a {\\n      outline: 1px solid #ff62ab !important;\\n    }\\n\\n    \", \" em {\\n      outline: 1px solid #800b41 !important;\\n    }\\n\\n    \", \" strong {\\n      outline: 1px solid #ff1583 !important;\\n    }\\n\\n    \", \" i {\\n      outline: 1px solid #803156 !important;\\n    }\\n\\n    \", \" b {\\n      outline: 1px solid #cc1169 !important;\\n    }\\n\\n    \", \" u {\\n      outline: 1px solid #ff0430 !important;\\n    }\\n\\n    \", \" s {\\n      outline: 1px solid #f805e3 !important;\\n    }\\n\\n    \", \" small {\\n      outline: 1px solid #d107b2 !important;\\n    }\\n\\n    \", \" abbr {\\n      outline: 1px solid #4a0263 !important;\\n    }\\n\\n    \", \" q {\\n      outline: 1px solid #240018 !important;\\n    }\\n\\n    \", \" cite {\\n      outline: 1px solid #64003c !important;\\n    }\\n\\n    \", \" dfn {\\n      outline: 1px solid #b4005a !important;\\n    }\\n\\n    \", \" sub {\\n      outline: 1px solid #dba0c8 !important;\\n    }\\n\\n    \", \" sup {\\n      outline: 1px solid #cc0256 !important;\\n    }\\n\\n    \", \" time {\\n      outline: 1px solid #d6606d !important;\\n    }\\n\\n    \", \" code {\\n      outline: 1px solid #e04251 !important;\\n    }\\n\\n    \", \" kbd {\\n      outline: 1px solid #5e001f !important;\\n    }\\n\\n    \", \" samp {\\n      outline: 1px solid #9c0033 !important;\\n    }\\n\\n    \", \" var {\\n      outline: 1px solid #d90047 !important;\\n    }\\n\\n    \", \" mark {\\n      outline: 1px solid #ff0053 !important;\\n    }\\n\\n    \", \" bdi {\\n      outline: 1px solid #bf3668 !important;\\n    }\\n\\n    \", \" bdo {\\n      outline: 1px solid #6f1400 !important;\\n    }\\n\\n    \", \" ruby {\\n      outline: 1px solid #ff7b93 !important;\\n    }\\n\\n    \", \" rt {\\n      outline: 1px solid #ff2f54 !important;\\n    }\\n\\n    \", \" rp {\\n      outline: 1px solid #803e49 !important;\\n    }\\n\\n    \", \" span {\\n      outline: 1px solid #cc2643 !important;\\n    }\\n\\n    \", \" br {\\n      outline: 1px solid #db687d !important;\\n    }\\n\\n    \", \" wbr {\\n      outline: 1px solid #db175b !important;\\n    }\"])), selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector, selector);\n}","import { useMemo, useEffect } from '@storybook/addons';\nimport { clearStyles, addOutlineStyles } from './helpers';\nimport { PARAM_KEY } from './constants';\nimport outlineCSS from './outlineCSS';\nexport var withOutline = function withOutline(StoryFn, context) {\n  var globals = context.globals;\n  var isActive = globals[PARAM_KEY] === true;\n  var isInDocs = context.viewMode === 'docs';\n  var outlineStyles = useMemo(function () {\n    var selector = isInDocs ? \"#anchor--\".concat(context.id, \" .docs-story\") : '.sb-show-main';\n    return outlineCSS(selector);\n  }, [context]);\n  useEffect(function () {\n    var selectorId = isInDocs ? \"addon-outline-docs-\".concat(context.id) : \"addon-outline\";\n\n    if (!isActive) {\n      clearStyles(selectorId);\n    } else {\n      addOutlineStyles(selectorId, outlineStyles);\n    }\n\n    return function () {\n      clearStyles(selectorId);\n    };\n  }, [isActive, outlineStyles, context]);\n  return StoryFn();\n};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { withOutline } from '../withOutline';\nimport { PARAM_KEY } from '../constants';\nexport var decorators = [withOutline];\nexport var globals = _defineProperty({}, PARAM_KEY, false);","export const parameters = {\n  actions: { argTypesRegex: \"^on[A-Z].*\" },\n  controls: {\n    matchers: {\n      color: /(background|color)$/i,\n      date: /Date$/,\n    },\n  },\n}","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,e=Symbol(),n=new WeakMap;class s{constructor(t,n,s){if(this._$cssResult$=!0,s!==e)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=n}get styleSheet(){let e=this.o;const s=this.t;if(t&&void 0===e){const t=void 0!==s&&1===s.length;t&&(e=n.get(s)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),t&&n.set(s,e))}return e}toString(){return this.cssText}}const o=t=>new s(\"string\"==typeof t?t:t+\"\",void 0,e),r=(t,...n)=>{const o=1===t.length?t[0]:n.reduce(((e,n,s)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(n)+t[s+1]),t[0]);return new s(o,t,e)},i=(e,n)=>{t?e.adoptedStyleSheets=n.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):n.forEach((t=>{const n=document.createElement(\"style\"),s=window.litNonce;void 0!==s&&n.setAttribute(\"nonce\",s),n.textContent=t.cssText,e.appendChild(n)}))},S=t?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const n of t.cssRules)e+=n.cssText;return o(e)})(t):t;export{s as CSSResult,i as adoptStyles,r as css,S as getCompatibleStyle,t as supportsAdoptingStyleSheets,o as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as i}from\"./css-tag.js\";export{CSSResult,adoptStyles,css,getCompatibleStyle,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var s;const e=window.trustedTypes,r=e?e.emptyScript:\"\",h=window.reactiveElementPolyfillSupport,o={toAttribute(t,i){switch(i){case Boolean:t=t?r:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,i){let s=t;switch(i){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t)}catch(t){s=null}}return s}},n=(t,i)=>i!==t&&(i==i||t==t),l={attribute:!0,type:String,converter:o,reflect:!1,hasChanged:n};class a extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var i;null!==(i=this.h)&&void 0!==i||(this.h=[]),this.h.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((i,s)=>{const e=this._$Ep(s,i);void 0!==e&&(this._$Ev.set(e,s),t.push(e))})),t}static createProperty(t,i=l){if(i.state&&(i.attribute=!1),this.finalize(),this.elementProperties.set(t,i),!i.noAccessor&&!this.prototype.hasOwnProperty(t)){const s=\"symbol\"==typeof t?Symbol():\"__\"+t,e=this.getPropertyDescriptor(t,s,i);void 0!==e&&Object.defineProperty(this.prototype,t,e)}}static getPropertyDescriptor(t,i,s){return{get(){return this[i]},set(e){const r=this[t];this[i]=e,this.requestUpdate(t,r,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||l}static finalize(){if(this.hasOwnProperty(\"finalized\"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty(\"properties\")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of i)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(i){const s=[];if(Array.isArray(i)){const e=new Set(i.flat(1/0).reverse());for(const i of e)s.unshift(t(i))}else void 0!==i&&s.push(t(i));return s}static _$Ep(t,i){const s=i.attribute;return!1===s?void 0:\"string\"==typeof s?s:\"string\"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var i,s;(null!==(i=this._$ES)&&void 0!==i?i:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(s=t.hostConnected)||void 0===s||s.call(t))}removeController(t){var i;null===(i=this._$ES)||void 0===i||i.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,i)=>{this.hasOwnProperty(i)&&(this._$Ei.set(i,this[i]),delete this[i])}))}createRenderRoot(){var t;const s=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return i(s,this.constructor.elementStyles),s}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostConnected)||void 0===i?void 0:i.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostDisconnected)||void 0===i?void 0:i.call(t)}))}attributeChangedCallback(t,i,s){this._$AK(t,s)}_$EO(t,i,s=l){var e,r;const h=this.constructor._$Ep(t,s);if(void 0!==h&&!0===s.reflect){const n=(null!==(r=null===(e=s.converter)||void 0===e?void 0:e.toAttribute)&&void 0!==r?r:o.toAttribute)(i,s.type);this._$El=t,null==n?this.removeAttribute(h):this.setAttribute(h,n),this._$El=null}}_$AK(t,i){var s,e;const r=this.constructor,h=r._$Ev.get(t);if(void 0!==h&&this._$El!==h){const t=r.getPropertyOptions(h),n=t.converter,l=null!==(e=null!==(s=null==n?void 0:n.fromAttribute)&&void 0!==s?s:\"function\"==typeof n?n:null)&&void 0!==e?e:o.fromAttribute;this._$El=h,this[h]=l(i,t.type),this._$El=null}}requestUpdate(t,i,s){let e=!0;void 0!==t&&(((s=s||this.constructor.getPropertyOptions(t)).hasChanged||n)(this[t],i)?(this._$AL.has(t)||this._$AL.set(t,i),!0===s.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,s))):e=!1),!this.isUpdatePending&&e&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,i)=>this[i]=t)),this._$Ei=void 0);let i=!1;const s=this._$AL;try{i=this.shouldUpdate(s),i?(this.willUpdate(s),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostUpdate)||void 0===i?void 0:i.call(t)})),this.update(s)):this._$Ek()}catch(t){throw i=!1,this._$Ek(),t}i&&this._$AE(s)}willUpdate(t){}_$AE(t){var i;null===(i=this._$ES)||void 0===i||i.forEach((t=>{var i;return null===(i=t.hostUpdated)||void 0===i?void 0:i.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,i)=>this._$EO(i,this[i],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}a.finalized=!0,a.elementProperties=new Map,a.elementStyles=[],a.shadowRootOptions={mode:\"open\"},null==h||h({ReactiveElement:a}),(null!==(s=globalThis.reactiveElementVersions)&&void 0!==s?s:globalThis.reactiveElementVersions=[]).push(\"1.3.3\");export{a as ReactiveElement,o as defaultConverter,n as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as i}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var l,o;const r=t;class s extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(i,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return i}}s.finalized=!0,s._$litElement$=!0,null===(l=globalThis.litElementHydrateSupport)||void 0===l||l.call(globalThis,{LitElement:s});const n=globalThis.litElementPolyfillSupport;null==n||n({LitElement:s});const h={_$AK:(t,e,i)=>{t._$AK(e,i)},_$AL:t=>t._$AL};(null!==(o=globalThis.litElementVersions)&&void 0!==o?o:globalThis.litElementVersions=[]).push(\"3.2.1\");export{s as LitElement,r as UpdatingElement,h as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","var n,l,u,i,t,o,r,f,e={},c=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function a(n,l){for(var u in l)n[u]=l[u];return n}function h(n){var l=n.parentNode;l&&l.removeChild(n)}function v(l,u,i){var t,o,r,f={};for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];if(arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),\"function\"==typeof l&&null!=l.defaultProps)for(r in l.defaultProps)void 0===f[r]&&(f[r]=l.defaultProps[r]);return y(l,f,t,o,null)}function y(n,i,t,o,r){var f={type:n,props:i,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++u:r};return null==r&&null!=l.vnode&&l.vnode(f),f}function p(){return{current:null}}function d(n){return n.children}function _(n,l){this.props=n,this.context=l}function k(n,l){if(null==l)return n.__?k(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?k(n):null}function b(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return b(n)}}function m(n){(!n.__d&&(n.__d=!0)&&t.push(n)&&!g.__r++||r!==l.debounceRendering)&&((r=l.debounceRendering)||o)(g)}function g(){for(var n;g.__r=t.length;)n=t.sort(function(n,l){return n.__v.__b-l.__v.__b}),t=[],n.some(function(n){var l,u,i,t,o,r;n.__d&&(o=(t=(l=n).__v).__e,(r=l.__P)&&(u=[],(i=a({},t)).__v=t.__v+1,j(r,t,i,l.__n,void 0!==r.ownerSVGElement,null!=t.__h?[o]:null,u,null==o?k(t):o,t.__h),z(u,t),t.__e!=o&&b(t)))})}function w(n,l,u,i,t,o,r,f,s,a){var h,v,p,_,b,m,g,w=i&&i.__k||c,A=w.length;for(u.__k=[],h=0;h<l.length;h++)if(null!=(_=u.__k[h]=null==(_=l[h])||\"boolean\"==typeof _?null:\"string\"==typeof _||\"number\"==typeof _||\"bigint\"==typeof _?y(null,_,null,null,_):Array.isArray(_)?y(d,{children:_},null,null,null):_.__b>0?y(_.type,_.props,_.key,null,_.__v):_)){if(_.__=u,_.__b=u.__b+1,null===(p=w[h])||p&&_.key==p.key&&_.type===p.type)w[h]=void 0;else for(v=0;v<A;v++){if((p=w[v])&&_.key==p.key&&_.type===p.type){w[v]=void 0;break}p=null}j(n,_,p=p||e,t,o,r,f,s,a),b=_.__e,(v=_.ref)&&p.ref!=v&&(g||(g=[]),p.ref&&g.push(p.ref,null,_),g.push(v,_.__c||b,_)),null!=b?(null==m&&(m=b),\"function\"==typeof _.type&&_.__k===p.__k?_.__d=s=x(_,s,n):s=P(n,_,p,w,b,s),\"function\"==typeof u.type&&(u.__d=s)):s&&p.__e==s&&s.parentNode!=n&&(s=k(p))}for(u.__e=m,h=A;h--;)null!=w[h]&&(\"function\"==typeof u.type&&null!=w[h].__e&&w[h].__e==u.__d&&(u.__d=k(i,h+1)),N(w[h],w[h]));if(g)for(h=0;h<g.length;h++)M(g[h],g[++h],g[++h])}function x(n,l,u){for(var i,t=n.__k,o=0;t&&o<t.length;o++)(i=t[o])&&(i.__=n,l=\"function\"==typeof i.type?x(i,l,u):P(u,i,i,t,i.__e,l));return l}function A(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(Array.isArray(n)?n.some(function(n){A(n,l)}):l.push(n)),l}function P(n,l,u,i,t,o){var r,f,e;if(void 0!==l.__d)r=l.__d,l.__d=void 0;else if(null==u||t!=o||null==t.parentNode)n:if(null==o||o.parentNode!==n)n.appendChild(t),r=null;else{for(f=o,e=0;(f=f.nextSibling)&&e<i.length;e+=2)if(f==t)break n;n.insertBefore(t,o),r=o}return void 0!==r?r:t.nextSibling}function C(n,l,u,i,t){var o;for(o in u)\"children\"===o||\"key\"===o||o in l||H(n,o,null,u[o],i);for(o in l)t&&\"function\"!=typeof l[o]||\"children\"===o||\"key\"===o||\"value\"===o||\"checked\"===o||u[o]===l[o]||H(n,o,l[o],u[o],i)}function $(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=null==u?\"\":\"number\"!=typeof u||s.test(l)?u:u+\"px\"}function H(n,l,u,i,t){var o;n:if(\"style\"===l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof i&&(n.style.cssText=i=\"\"),i)for(l in i)u&&l in u||$(n.style,l,\"\");if(u)for(l in u)i&&u[l]===i[l]||$(n.style,l,u[l])}else if(\"o\"===l[0]&&\"n\"===l[1])o=l!==(l=l.replace(/Capture$/,\"\")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+o]=u,u?i||n.addEventListener(l,o?T:I,o):n.removeEventListener(l,o?T:I,o);else if(\"dangerouslySetInnerHTML\"!==l){if(t)l=l.replace(/xlink(H|:h)/,\"h\").replace(/sName$/,\"s\");else if(\"href\"!==l&&\"list\"!==l&&\"form\"!==l&&\"tabIndex\"!==l&&\"download\"!==l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null!=u&&(!1!==u||\"a\"===l[0]&&\"r\"===l[1])?n.setAttribute(l,u):n.removeAttribute(l))}}function I(n){this.l[n.type+!1](l.event?l.event(n):n)}function T(n){this.l[n.type+!0](l.event?l.event(n):n)}function j(n,u,i,t,o,r,f,e,c){var s,h,v,y,p,k,b,m,g,x,A,P,C,$=u.type;if(void 0!==u.constructor)return null;null!=i.__h&&(c=i.__h,e=u.__e=i.__e,u.__h=null,r=[e]),(s=l.__b)&&s(u);try{n:if(\"function\"==typeof $){if(m=u.props,g=(s=$.contextType)&&t[s.__c],x=s?g?g.props.value:s.__:t,i.__c?b=(h=u.__c=i.__c).__=h.__E:(\"prototype\"in $&&$.prototype.render?u.__c=h=new $(m,x):(u.__c=h=new _(m,x),h.constructor=$,h.render=O),g&&g.sub(h),h.props=m,h.state||(h.state={}),h.context=x,h.__n=t,v=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=$.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=a({},h.__s)),a(h.__s,$.getDerivedStateFromProps(m,h.__s))),y=h.props,p=h.state,v)null==$.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==$.getDerivedStateFromProps&&m!==y&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(m,x),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(m,h.__s,x)||u.__v===i.__v){h.props=m,h.state=h.__s,u.__v!==i.__v&&(h.__d=!1),h.__v=u,u.__e=i.__e,u.__k=i.__k,u.__k.forEach(function(n){n&&(n.__=u)}),h.__h.length&&f.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(m,h.__s,x),null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(y,p,k)})}if(h.context=x,h.props=m,h.__v=u,h.__P=n,A=l.__r,P=0,\"prototype\"in $&&$.prototype.render)h.state=h.__s,h.__d=!1,A&&A(u),s=h.render(h.props,h.state,h.context);else do{h.__d=!1,A&&A(u),s=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++P<25);h.state=h.__s,null!=h.getChildContext&&(t=a(a({},t),h.getChildContext())),v||null==h.getSnapshotBeforeUpdate||(k=h.getSnapshotBeforeUpdate(y,p)),C=null!=s&&s.type===d&&null==s.key?s.props.children:s,w(n,Array.isArray(C)?C:[C],u,i,t,o,r,f,e,c),h.base=u.__e,u.__h=null,h.__h.length&&f.push(h),b&&(h.__E=h.__=null),h.__e=!1}else null==r&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=L(i.__e,u,i,t,o,r,f,c);(s=l.diffed)&&s(u)}catch(n){u.__v=null,(c||null!=r)&&(u.__e=e,u.__h=!!c,r[r.indexOf(e)]=null),l.__e(n,u,i)}}function z(n,u){l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function L(l,u,i,t,o,r,f,c){var s,a,v,y=i.props,p=u.props,d=u.type,_=0;if(\"svg\"===d&&(o=!0),null!=r)for(;_<r.length;_++)if((s=r[_])&&\"setAttribute\"in s==!!d&&(d?s.localName===d:3===s.nodeType)){l=s,r[_]=null;break}if(null==l){if(null===d)return document.createTextNode(p);l=o?document.createElementNS(\"http://www.w3.org/2000/svg\",d):document.createElement(d,p.is&&p),r=null,c=!1}if(null===d)y===p||c&&l.data===p||(l.data=p);else{if(r=r&&n.call(l.childNodes),a=(y=i.props||e).dangerouslySetInnerHTML,v=p.dangerouslySetInnerHTML,!c){if(null!=r)for(y={},_=0;_<l.attributes.length;_++)y[l.attributes[_].name]=l.attributes[_].value;(v||a)&&(v&&(a&&v.__html==a.__html||v.__html===l.innerHTML)||(l.innerHTML=v&&v.__html||\"\"))}if(C(l,p,y,o,c),v)u.__k=[];else if(_=u.props.children,w(l,Array.isArray(_)?_:[_],u,i,t,o&&\"foreignObject\"!==d,r,f,r?r[0]:i.__k&&k(i,0),c),null!=r)for(_=r.length;_--;)null!=r[_]&&h(r[_]);c||(\"value\"in p&&void 0!==(_=p.value)&&(_!==l.value||\"progress\"===d&&!_||\"option\"===d&&_!==y.value)&&H(l,\"value\",_,y.value,!1),\"checked\"in p&&void 0!==(_=p.checked)&&_!==l.checked&&H(l,\"checked\",_,y.checked,!1))}return l}function M(n,u,i){try{\"function\"==typeof n?n(u):n.current=u}catch(n){l.__e(n,i)}}function N(n,u,i){var t,o;if(l.unmount&&l.unmount(n),(t=n.ref)&&(t.current&&t.current!==n.__e||M(t,null,u)),null!=(t=n.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(n){l.__e(n,u)}t.base=t.__P=null}if(t=n.__k)for(o=0;o<t.length;o++)t[o]&&N(t[o],u,\"function\"!=typeof n.type);i||null==n.__e||h(n.__e),n.__e=n.__d=void 0}function O(n,l,u){return this.constructor(n,u)}function S(u,i,t){var o,r,f;l.__&&l.__(u,i),r=(o=\"function\"==typeof t)?null:t&&t.__k||i.__k,f=[],j(i,u=(!o&&t||i).__k=v(d,null,[u]),r||e,e,void 0!==i.ownerSVGElement,!o&&t?[t]:r?null:i.firstChild?n.call(i.childNodes):null,f,!o&&t?t:r?r.__e:i.firstChild,o),z(f,u)}function q(n,l){S(n,l,q)}function B(l,u,i){var t,o,r,f=a({},l.props);for(r in u)\"key\"==r?t=u[r]:\"ref\"==r?o=u[r]:f[r]=u[r];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),y(l.type,f,t||l.key,o||l.ref,null)}function D(n,l){var u={__c:l=\"__cC\"+f++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,i;return this.getChildContext||(u=[],(i={})[l]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(m)},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n=c.slice,l={__e:function(n,l,u,i){for(var t,o,r;l=l.__;)if((t=l.__c)&&!t.__)try{if((o=t.constructor)&&null!=o.getDerivedStateFromError&&(t.setState(o.getDerivedStateFromError(n)),r=t.__d),null!=t.componentDidCatch&&(t.componentDidCatch(n,i||{}),r=t.__d),r)return t.__E=t}catch(l){n=l}throw n}},u=0,i=function(n){return null!=n&&void 0===n.constructor},_.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=a({},this.state),\"function\"==typeof n&&(n=n(a({},u),this.props)),n&&a(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),m(this))},_.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),m(this))},_.prototype.render=d,t=[],o=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g.__r=0,f=0;export{S as render,q as hydrate,v as createElement,v as h,d as Fragment,p as createRef,i as isValidElement,_ as Component,B as cloneElement,D as createContext,A as toChildArray,l as options};\n//# sourceMappingURL=preact.module.js.map\n","import{options as n}from\"preact\";var t,u,r,o,i=0,c=[],f=[],e=n.__b,a=n.__r,v=n.diffed,l=n.__c,m=n.unmount;function p(t,r){n.__h&&n.__h(u,t,i||r),i=0;var o=u.__H||(u.__H={__:[],__h:[]});return t>=o.__.length&&o.__.push({__V:f}),o.__[t]}function y(n){return i=1,d(z,n)}function d(n,r,o){var i=p(t++,2);return i.t=n,i.__c||(i.__=[o?o(r):z(void 0,r),function(n){var t=i.t(i.__[0],n);i.__[0]!==t&&(i.__=[t,i.__[1]],i.__c.setState({}))}],i.__c=u),i.__}function _(r,o){var i=p(t++,3);!n.__s&&w(i.__H,o)&&(i.__=r,i.u=o,u.__H.__h.push(i))}function h(r,o){var i=p(t++,4);!n.__s&&w(i.__H,o)&&(i.__=r,i.u=o,u.__h.push(i))}function s(n){return i=5,F(function(){return{current:n}},[])}function A(n,t,u){i=6,h(function(){return\"function\"==typeof n?(n(t()),function(){return n(null)}):n?(n.current=t(),function(){return n.current=null}):void 0},null==u?u:u.concat(n))}function F(n,u){var r=p(t++,7);return w(r.__H,u)?(r.__V=n(),r.u=u,r.__h=n,r.__V):r.__}function T(n,t){return i=8,F(function(){return n},t)}function q(n){var r=u.context[n.__c],o=p(t++,9);return o.c=n,r?(null==o.__&&(o.__=!0,r.sub(u)),r.props.value):n.__}function x(t,u){n.useDebugValue&&n.useDebugValue(u?u(t):t)}function V(n){var r=p(t++,10),o=y();return r.__=n,u.componentDidCatch||(u.componentDidCatch=function(n){r.__&&r.__(n),o[1](n)}),[o[0],function(){o[1](void 0)}]}function b(){for(var t;t=c.shift();)if(t.__P)try{t.__H.__h.forEach(j),t.__H.__h.forEach(k),t.__H.__h=[]}catch(u){t.__H.__h=[],n.__e(u,t.__v)}}n.__b=function(n){u=null,e&&e(n)},n.__r=function(n){a&&a(n),t=0;var o=(u=n.__c).__H;o&&(r===u?(o.__h=[],u.__h=[],o.__.forEach(function(n){n.__V=f,n.u=void 0})):(o.__h.forEach(j),o.__h.forEach(k),o.__h=[])),r=u},n.diffed=function(t){v&&v(t);var i=t.__c;i&&i.__H&&(i.__H.__h.length&&(1!==c.push(i)&&o===n.requestAnimationFrame||((o=n.requestAnimationFrame)||function(n){var t,u=function(){clearTimeout(r),g&&cancelAnimationFrame(t),setTimeout(n)},r=setTimeout(u,100);g&&(t=requestAnimationFrame(u))})(b)),i.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.__V!==f&&(n.__=n.__V),n.u=void 0,n.__V=f})),r=u=null},n.__c=function(t,u){u.some(function(t){try{t.__h.forEach(j),t.__h=t.__h.filter(function(n){return!n.__||k(n)})}catch(r){u.some(function(n){n.__h&&(n.__h=[])}),u=[],n.__e(r,t.__v)}}),l&&l(t,u)},n.unmount=function(t){m&&m(t);var u,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{j(n)}catch(n){u=n}}),u&&n.__e(u,r.__v))};var g=\"function\"==typeof requestAnimationFrame;function j(n){var t=u,r=n.__c;\"function\"==typeof r&&(n.__c=void 0,r()),u=t}function k(n){var t=u;n.__c=n.__(),u=t}function w(n,t){return!n||n.length!==t.length||t.some(function(t,u){return t!==n[u]})}function z(n,t){return\"function\"==typeof t?t(n):t}export{y as useState,d as useReducer,_ as useEffect,h as useLayoutEffect,s as useRef,A as useImperativeHandle,F as useMemo,T as useCallback,q as useContext,x as useDebugValue,V as useErrorBoundary};\n//# sourceMappingURL=hooks.module.js.map\n","import{useState as n,useReducer as t,useEffect as e,useLayoutEffect as r,useRef as u,useImperativeHandle as o,useMemo as i,useCallback as l,useContext as f,useDebugValue as c}from\"preact/hooks\";export*from\"preact/hooks\";import{Component as a,createElement as s,options as h,toChildArray as v,Fragment as d,render as p,hydrate as m,cloneElement as y,createRef as b,createContext as _}from\"preact\";export{createElement,createContext,createRef,Fragment,Component}from\"preact\";function S(n,t){for(var e in t)n[e]=t[e];return n}function C(n,t){for(var e in n)if(\"__source\"!==e&&!(e in t))return!0;for(var r in t)if(\"__source\"!==r&&n[r]!==t[r])return!0;return!1}function E(n){this.props=n}function g(n,t){function e(n){var e=this.props.ref,r=e==n.ref;return!r&&e&&(e.call?e(null):e.current=null),t?!t(this.props,n)||!r:C(this.props,n)}function r(t){return this.shouldComponentUpdate=e,s(n,t)}return r.displayName=\"Memo(\"+(n.displayName||n.name)+\")\",r.prototype.isReactComponent=!0,r.__f=!0,r}(E.prototype=new a).isPureReactComponent=!0,E.prototype.shouldComponentUpdate=function(n,t){return C(this.props,n)||C(this.state,t)};var w=h.__b;h.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),w&&w(n)};var x=\"undefined\"!=typeof Symbol&&Symbol.for&&Symbol.for(\"react.forward_ref\")||3911;function R(n){function t(t){var e=S({},t);return delete e.ref,n(e,t.ref||null)}return t.$$typeof=x,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName=\"ForwardRef(\"+(n.displayName||n.name)+\")\",t}var N=function(n,t){return null==n?null:v(v(n).map(t))},k={map:N,forEach:N,count:function(n){return n?v(n).length:0},only:function(n){var t=v(n);if(1!==t.length)throw\"Children.only\";return t[0]},toArray:v},A=h.__e;h.__e=function(n,t,e,r){if(n.then)for(var u,o=t;o=o.__;)if((u=o.__c)&&u.__c)return null==t.__e&&(t.__e=e.__e,t.__k=e.__k),u.__c(n,t);A(n,t,e,r)};var O=h.unmount;function T(){this.__u=0,this.t=null,this.__b=null}function L(n){var t=n.__.__c;return t&&t.__a&&t.__a(n)}function U(n){var t,e,r;function u(u){if(t||(t=n()).then(function(n){e=n.default||n},function(n){r=n}),r)throw r;if(!e)throw t;return s(e,u)}return u.displayName=\"Lazy\",u.__f=!0,u}function D(){this.u=null,this.o=null}h.unmount=function(n){var t=n.__c;t&&t.__R&&t.__R(),t&&!0===n.__h&&(n.type=null),O&&O(n)},(T.prototype=new a).__c=function(n,t){var e=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(e);var u=L(r.__v),o=!1,i=function(){o||(o=!0,e.__R=null,u?u(l):l())};e.__R=i;var l=function(){if(!--r.__u){if(r.state.__a){var n=r.state.__a;r.__v.__k[0]=function n(t,e,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(t){return n(t,e,r)}),t.__c&&t.__c.__P===e&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(n,n.__c.__P,n.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.t.pop();)t.forceUpdate()}},f=!0===t.__h;r.__u++||f||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(i,i)},T.prototype.componentWillUnmount=function(){this.t=[]},T.prototype.render=function(n,t){if(this.__b){if(this.__v.__k){var e=document.createElement(\"div\"),r=this.__v.__k[0].__c;this.__v.__k[0]=function n(t,e,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(n){\"function\"==typeof n.__c&&n.__c()}),t.__c.__H=null),null!=(t=S({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(t){return n(t,e,r)})),t}(this.__b,e,r.__O=r.__P)}this.__b=null}var u=t.__a&&s(d,null,n.fallback);return u&&(u.__h=null),[s(d,null,t.__a?null:n.children),u]};var F=function(n,t,e){if(++e[1]===e[0]&&n.o.delete(t),n.props.revealOrder&&(\"t\"!==n.props.revealOrder[0]||!n.o.size))for(e=n.u;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;n.u=e=e[2]}};function I(n){return this.getChildContext=function(){return n.context},n.children}function M(n){var t=this,e=n.i;t.componentWillUnmount=function(){p(null,t.l),t.l=null,t.i=null},t.i&&t.i!==e&&t.componentWillUnmount(),n.__v?(t.l||(t.i=e,t.l={nodeType:1,parentNode:e,childNodes:[],appendChild:function(n){this.childNodes.push(n),t.i.appendChild(n)},insertBefore:function(n,e){this.childNodes.push(n),t.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),t.i.removeChild(n)}}),p(s(I,{context:t.context},n.__v),t.l)):t.l&&t.componentWillUnmount()}function V(n,t){var e=s(M,{__v:n,i:t});return e.containerInfo=t,e}(D.prototype=new a).__a=function(n){var t=this,e=L(t.__v),r=t.o.get(n);return r[0]++,function(u){var o=function(){t.props.revealOrder?(r.push(u),F(t,n,r)):u()};e?e(o):o()}},D.prototype.render=function(n){this.u=null,this.o=new Map;var t=v(n.children);n.revealOrder&&\"b\"===n.revealOrder[0]&&t.reverse();for(var e=t.length;e--;)this.o.set(t[e],this.u=[1,0,this.u]);return n.children},D.prototype.componentDidUpdate=D.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(t,e){F(n,e,t)})};var W=\"undefined\"!=typeof Symbol&&Symbol.for&&Symbol.for(\"react.element\")||60103,P=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|shape|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,$=\"undefined\"!=typeof document,j=function(n){return(\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(n)};function z(n,t,e){return null==t.__k&&(t.textContent=\"\"),p(n,t),\"function\"==typeof e&&e(),n?n.__c:null}function B(n,t,e){return m(n,t),\"function\"==typeof e&&e(),n?n.__c:null}a.prototype.isReactComponent={},[\"componentWillMount\",\"componentWillReceiveProps\",\"componentWillUpdate\"].forEach(function(n){Object.defineProperty(a.prototype,n,{configurable:!0,get:function(){return this[\"UNSAFE_\"+n]},set:function(t){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:t})}})});var H=h.event;function Z(){}function Y(){return this.cancelBubble}function q(){return this.defaultPrevented}h.event=function(n){return H&&(n=H(n)),n.persist=Z,n.isPropagationStopped=Y,n.isDefaultPrevented=q,n.nativeEvent=n};var G,J={configurable:!0,get:function(){return this.class}},K=h.vnode;h.vnode=function(n){var t=n.type,e=n.props,r=e;if(\"string\"==typeof t){var u=-1===t.indexOf(\"-\");for(var o in r={},e){var i=e[o];$&&\"children\"===o&&\"noscript\"===t||\"value\"===o&&\"defaultValue\"in e&&null==i||(\"defaultValue\"===o&&\"value\"in e&&null==e.value?o=\"value\":\"download\"===o&&!0===i?i=\"\":/ondoubleclick/i.test(o)?o=\"ondblclick\":/^onchange(textarea|input)/i.test(o+t)&&!j(e.type)?o=\"oninput\":/^onfocus$/i.test(o)?o=\"onfocusin\":/^onblur$/i.test(o)?o=\"onfocusout\":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():u&&P.test(o)?o=o.replace(/[A-Z0-9]/,\"-$&\").toLowerCase():null===i&&(i=void 0),/^oninput$/i.test(o)&&(o=o.toLowerCase(),r[o]&&(o=\"oninputCapture\")),r[o]=i)}\"select\"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=v(e.children).forEach(function(n){n.props.selected=-1!=r.value.indexOf(n.props.value)})),\"select\"==t&&null!=r.defaultValue&&(r.value=v(e.children).forEach(function(n){n.props.selected=r.multiple?-1!=r.defaultValue.indexOf(n.props.value):r.defaultValue==n.props.value})),n.props=r,e.class!=e.className&&(J.enumerable=\"className\"in e,null!=e.className&&(r.class=e.className),Object.defineProperty(r,\"className\",J))}n.$$typeof=W,K&&K(n)};var Q=h.__r;h.__r=function(n){Q&&Q(n),G=n.__c};var X={ReactCurrentDispatcher:{current:{readContext:function(n){return G.__n[n.__c].props.value}}}},nn=\"17.0.2\";function tn(n){return s.bind(null,n)}function en(n){return!!n&&n.$$typeof===W}function rn(n){return en(n)?y.apply(null,arguments):n}function un(n){return!!n.__k&&(p(null,n),!0)}function on(n){return n&&(n.base||1===n.nodeType&&n)||null}var ln=function(n,t){return n(t)},fn=function(n,t){return n(t)},cn=d;function an(n){n()}function sn(n){return n}function hn(){return[!1,an]}var vn=r;function dn(t,r){var u=n(r),o=u[0],i=u[1];return e(function(){return t(function(){i(r())})},[t,r]),o}export default{useState:n,useReducer:t,useEffect:e,useLayoutEffect:r,useInsertionEffect:r,useTransition:hn,useDeferredValue:sn,useSyncExternalStore:dn,startTransition:an,useRef:u,useImperativeHandle:o,useMemo:i,useCallback:l,useContext:f,useDebugValue:c,version:\"17.0.2\",Children:k,render:z,hydrate:B,unmountComponentAtNode:un,createPortal:V,createElement:s,createContext:_,createFactory:tn,cloneElement:rn,createRef:b,Fragment:d,isValidElement:en,findDOMNode:on,Component:a,PureComponent:E,memo:g,forwardRef:R,flushSync:fn,unstable_batchedUpdates:ln,StrictMode:d,Suspense:T,SuspenseList:D,lazy:U,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:X};export{an as startTransition,sn as useDeferredValue,hn as useTransition,vn as useInsertionEffect,dn as useSyncExternalStore,nn as version,k as Children,z as render,B as hydrate,un as unmountComponentAtNode,V as createPortal,tn as createFactory,rn as cloneElement,en as isValidElement,on as findDOMNode,E as PureComponent,g as memo,R as forwardRef,fn as flushSync,ln as unstable_batchedUpdates,cn as StrictMode,T as Suspense,D as SuspenseList,U as lazy,X as __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED};\n//# sourceMappingURL=compat.module.js.map\n","import { __extends } from 'tslib';\nimport * as preact from 'preact';\nimport * as preactCompat from 'preact/compat';\n\nvar globalObj = typeof globalThis !== 'undefined' ? globalThis : window; // // TODO: streamline when killing IE11 support\nif (globalObj.FullCalendarVDom) {\n    console.warn('FullCalendar VDOM already loaded');\n}\nelse {\n    globalObj.FullCalendarVDom = {\n        Component: preact.Component,\n        createElement: preact.createElement,\n        render: preact.render,\n        createRef: preact.createRef,\n        Fragment: preact.Fragment,\n        createContext: createContext,\n        createPortal: preactCompat.createPortal,\n        flushSync: flushSync,\n        unmountComponentAtNode: unmountComponentAtNode,\n    };\n}\n// HACKS...\n// TODO: lock version\n// TODO: link gh issues\nfunction flushSync(runBeforeFlush) {\n    runBeforeFlush();\n    var oldDebounceRendering = preact.options.debounceRendering; // orig\n    var callbackQ = [];\n    function execCallbackSync(callback) {\n        callbackQ.push(callback);\n    }\n    preact.options.debounceRendering = execCallbackSync;\n    preact.render(preact.createElement(FakeComponent, {}), document.createElement('div'));\n    while (callbackQ.length) {\n        callbackQ.shift()();\n    }\n    preact.options.debounceRendering = oldDebounceRendering;\n}\nvar FakeComponent = /** @class */ (function (_super) {\n    __extends(FakeComponent, _super);\n    function FakeComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FakeComponent.prototype.render = function () { return preact.createElement('div', {}); };\n    FakeComponent.prototype.componentDidMount = function () { this.setState({}); };\n    return FakeComponent;\n}(preact.Component));\nfunction createContext(defaultValue) {\n    var ContextType = preact.createContext(defaultValue);\n    var origProvider = ContextType.Provider;\n    ContextType.Provider = function () {\n        var _this = this;\n        var isNew = !this.getChildContext;\n        var children = origProvider.apply(this, arguments); // eslint-disable-line prefer-rest-params\n        if (isNew) {\n            var subs_1 = [];\n            this.shouldComponentUpdate = function (_props) {\n                if (_this.props.value !== _props.value) {\n                    subs_1.forEach(function (c) {\n                        c.context = _props.value;\n                        c.forceUpdate();\n                    });\n                }\n            };\n            this.sub = function (c) {\n                subs_1.push(c);\n                var old = c.componentWillUnmount;\n                c.componentWillUnmount = function () {\n                    subs_1.splice(subs_1.indexOf(c), 1);\n                    old && old.call(c);\n                };\n            };\n        }\n        return children;\n    };\n    return ContextType;\n}\nfunction unmountComponentAtNode(node) {\n    preact.render(null, node);\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst n=n=>e=>\"function\"==typeof e?((n,e)=>(window.customElements.define(n,e),e))(n,e):((n,e)=>{const{kind:t,elements:i}=e;return{kind:t,elements:i,finisher(e){window.customElements.define(n,e)}}})(n,e);export{n as customElement};\n//# sourceMappingURL=custom-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst i=(i,e)=>\"method\"===e.kind&&e.descriptor&&!(\"value\"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,i)}}:{kind:\"field\",key:Symbol(),placement:\"own\",descriptor:{},originalKey:e.key,initializer(){\"function\"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,i)}};function e(e){return(n,t)=>void 0!==t?((i,e,n)=>{e.constructor.createProperty(n,i)})(e,n,t):i(e,n)}export{e as property};\n//# sourceMappingURL=property.js.map\n","import{decorateProperty as o}from\"./base.js\";\n/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var n;const e=null!=(null===(n=window.HTMLSlotElement)||void 0===n?void 0:n.prototype.assignedElements)?(o,n)=>o.assignedElements(n):(o,n)=>o.assignedNodes(n).filter((o=>o.nodeType===Node.ELEMENT_NODE));function l(n){const{slot:l,selector:t}=null!=n?n:{};return o({descriptor:o=>({get(){var o;const r=\"slot\"+(l?`[name=${l}]`:\":not([name])\"),i=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(r),s=null!=i?e(i,n):[];return t?s.filter((o=>o.matches(t))):s},enumerable:!0,configurable:!0})})}export{l as queryAssignedElements};\n//# sourceMappingURL=query-assigned-elements.js.map\n","/// <reference types=\"@fullcalendar/core-preact\" />\nif (typeof FullCalendarVDom === 'undefined') {\n    throw new Error('Please import the top-level fullcalendar lib before attempting to import a plugin.');\n}\nvar Component = FullCalendarVDom.Component;\nvar createElement = FullCalendarVDom.createElement;\nvar render = FullCalendarVDom.render;\nvar createRef = FullCalendarVDom.createRef;\nvar Fragment = FullCalendarVDom.Fragment;\nvar createContext = FullCalendarVDom.createContext;\nvar createPortal = FullCalendarVDom.createPortal;\nvar flushSync = FullCalendarVDom.flushSync;\nvar unmountComponentAtNode = FullCalendarVDom.unmountComponentAtNode;\n/* eslint-enable */\n\nexport { Component, Fragment, createContext, createElement, createPortal, createRef, flushSync, render, unmountComponentAtNode };\n","/*!\nFullCalendar v5.10.2\nDocs & License: https://fullcalendar.io/\n(c) 2021 Adam Shaw\n*/\nimport './main.css';\n\nimport { __assign, __spreadArray, __extends } from 'tslib';\nimport { createContext, Component, createRef, createElement, Fragment, createPortal } from './vdom.js';\nexport * from './vdom.js';\n\n// no public types yet. when there are, export from:\n// import {} from './api-type-deps'\nvar EventSourceApi = /** @class */ (function () {\n    function EventSourceApi(context, internalEventSource) {\n        this.context = context;\n        this.internalEventSource = internalEventSource;\n    }\n    EventSourceApi.prototype.remove = function () {\n        this.context.dispatch({\n            type: 'REMOVE_EVENT_SOURCE',\n            sourceId: this.internalEventSource.sourceId,\n        });\n    };\n    EventSourceApi.prototype.refetch = function () {\n        this.context.dispatch({\n            type: 'FETCH_EVENT_SOURCES',\n            sourceIds: [this.internalEventSource.sourceId],\n            isRefetch: true,\n        });\n    };\n    Object.defineProperty(EventSourceApi.prototype, \"id\", {\n        get: function () {\n            return this.internalEventSource.publicId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventSourceApi.prototype, \"url\", {\n        get: function () {\n            return this.internalEventSource.meta.url;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventSourceApi.prototype, \"format\", {\n        get: function () {\n            return this.internalEventSource.meta.format; // TODO: bad. not guaranteed\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return EventSourceApi;\n}());\n\nfunction removeElement(el) {\n    if (el.parentNode) {\n        el.parentNode.removeChild(el);\n    }\n}\n// Querying\n// ----------------------------------------------------------------------------------------------------------------\nfunction elementClosest(el, selector) {\n    if (el.closest) {\n        return el.closest(selector);\n        // really bad fallback for IE\n        // from https://developer.mozilla.org/en-US/docs/Web/API/Element/closest\n    }\n    if (!document.documentElement.contains(el)) {\n        return null;\n    }\n    do {\n        if (elementMatches(el, selector)) {\n            return el;\n        }\n        el = (el.parentElement || el.parentNode);\n    } while (el !== null && el.nodeType === 1);\n    return null;\n}\nfunction elementMatches(el, selector) {\n    var method = el.matches || el.matchesSelector || el.msMatchesSelector;\n    return method.call(el, selector);\n}\n// accepts multiple subject els\n// returns a real array. good for methods like forEach\n// TODO: accept the document\nfunction findElements(container, selector) {\n    var containers = container instanceof HTMLElement ? [container] : container;\n    var allMatches = [];\n    for (var i = 0; i < containers.length; i += 1) {\n        var matches = containers[i].querySelectorAll(selector);\n        for (var j = 0; j < matches.length; j += 1) {\n            allMatches.push(matches[j]);\n        }\n    }\n    return allMatches;\n}\n// accepts multiple subject els\n// only queries direct child elements // TODO: rename to findDirectChildren!\nfunction findDirectChildren(parent, selector) {\n    var parents = parent instanceof HTMLElement ? [parent] : parent;\n    var allMatches = [];\n    for (var i = 0; i < parents.length; i += 1) {\n        var childNodes = parents[i].children; // only ever elements\n        for (var j = 0; j < childNodes.length; j += 1) {\n            var childNode = childNodes[j];\n            if (!selector || elementMatches(childNode, selector)) {\n                allMatches.push(childNode);\n            }\n        }\n    }\n    return allMatches;\n}\n// Style\n// ----------------------------------------------------------------------------------------------------------------\nvar PIXEL_PROP_RE = /(top|left|right|bottom|width|height)$/i;\nfunction applyStyle(el, props) {\n    for (var propName in props) {\n        applyStyleProp(el, propName, props[propName]);\n    }\n}\nfunction applyStyleProp(el, name, val) {\n    if (val == null) {\n        el.style[name] = '';\n    }\n    else if (typeof val === 'number' && PIXEL_PROP_RE.test(name)) {\n        el.style[name] = val + \"px\";\n    }\n    else {\n        el.style[name] = val;\n    }\n}\n// Event Handling\n// ----------------------------------------------------------------------------------------------------------------\n// if intercepting bubbled events at the document/window/body level,\n// and want to see originating element (the 'target'), use this util instead\n// of `ev.target` because it goes within web-component boundaries.\nfunction getEventTargetViaRoot(ev) {\n    var _a, _b;\n    return (_b = (_a = ev.composedPath) === null || _a === void 0 ? void 0 : _a.call(ev)[0]) !== null && _b !== void 0 ? _b : ev.target;\n}\n// Shadow DOM consuderations\n// ----------------------------------------------------------------------------------------------------------------\nfunction getElRoot(el) {\n    return el.getRootNode ? el.getRootNode() : document;\n}\n// Unique ID for DOM attribute\nvar guid$1 = 0;\nfunction getUniqueDomId() {\n    guid$1 += 1;\n    return 'fc-dom-' + guid$1;\n}\n\n// Stops a mouse/touch event from doing it's native browser action\nfunction preventDefault(ev) {\n    ev.preventDefault();\n}\n// Event Delegation\n// ----------------------------------------------------------------------------------------------------------------\nfunction buildDelegationHandler(selector, handler) {\n    return function (ev) {\n        var matchedChild = elementClosest(ev.target, selector);\n        if (matchedChild) {\n            handler.call(matchedChild, ev, matchedChild);\n        }\n    };\n}\nfunction listenBySelector(container, eventType, selector, handler) {\n    var attachedHandler = buildDelegationHandler(selector, handler);\n    container.addEventListener(eventType, attachedHandler);\n    return function () {\n        container.removeEventListener(eventType, attachedHandler);\n    };\n}\nfunction listenToHoverBySelector(container, selector, onMouseEnter, onMouseLeave) {\n    var currentMatchedChild;\n    return listenBySelector(container, 'mouseover', selector, function (mouseOverEv, matchedChild) {\n        if (matchedChild !== currentMatchedChild) {\n            currentMatchedChild = matchedChild;\n            onMouseEnter(mouseOverEv, matchedChild);\n            var realOnMouseLeave_1 = function (mouseLeaveEv) {\n                currentMatchedChild = null;\n                onMouseLeave(mouseLeaveEv, matchedChild);\n                matchedChild.removeEventListener('mouseleave', realOnMouseLeave_1);\n            };\n            // listen to the next mouseleave, and then unattach\n            matchedChild.addEventListener('mouseleave', realOnMouseLeave_1);\n        }\n    });\n}\n// Animation\n// ----------------------------------------------------------------------------------------------------------------\nvar transitionEventNames = [\n    'webkitTransitionEnd',\n    'otransitionend',\n    'oTransitionEnd',\n    'msTransitionEnd',\n    'transitionend',\n];\n// triggered only when the next single subsequent transition finishes\nfunction whenTransitionDone(el, callback) {\n    var realCallback = function (ev) {\n        callback(ev);\n        transitionEventNames.forEach(function (eventName) {\n            el.removeEventListener(eventName, realCallback);\n        });\n    };\n    transitionEventNames.forEach(function (eventName) {\n        el.addEventListener(eventName, realCallback); // cross-browser way to determine when the transition finishes\n    });\n}\n// ARIA workarounds\n// ----------------------------------------------------------------------------------------------------------------\nfunction createAriaClickAttrs(handler) {\n    return __assign({ onClick: handler }, createAriaKeyboardAttrs(handler));\n}\nfunction createAriaKeyboardAttrs(handler) {\n    return {\n        tabIndex: 0,\n        onKeyDown: function (ev) {\n            if (ev.key === 'Enter' || ev.key === ' ') {\n                handler(ev);\n                ev.preventDefault(); // if space, don't scroll down page\n            }\n        },\n    };\n}\n\nvar guidNumber = 0;\nfunction guid() {\n    guidNumber += 1;\n    return String(guidNumber);\n}\n/* FullCalendar-specific DOM Utilities\n----------------------------------------------------------------------------------------------------------------------*/\n// Make the mouse cursor express that an event is not allowed in the current area\nfunction disableCursor() {\n    document.body.classList.add('fc-not-allowed');\n}\n// Returns the mouse cursor to its original look\nfunction enableCursor() {\n    document.body.classList.remove('fc-not-allowed');\n}\n/* Selection\n----------------------------------------------------------------------------------------------------------------------*/\nfunction preventSelection(el) {\n    el.classList.add('fc-unselectable');\n    el.addEventListener('selectstart', preventDefault);\n}\nfunction allowSelection(el) {\n    el.classList.remove('fc-unselectable');\n    el.removeEventListener('selectstart', preventDefault);\n}\n/* Context Menu\n----------------------------------------------------------------------------------------------------------------------*/\nfunction preventContextMenu(el) {\n    el.addEventListener('contextmenu', preventDefault);\n}\nfunction allowContextMenu(el) {\n    el.removeEventListener('contextmenu', preventDefault);\n}\nfunction parseFieldSpecs(input) {\n    var specs = [];\n    var tokens = [];\n    var i;\n    var token;\n    if (typeof input === 'string') {\n        tokens = input.split(/\\s*,\\s*/);\n    }\n    else if (typeof input === 'function') {\n        tokens = [input];\n    }\n    else if (Array.isArray(input)) {\n        tokens = input;\n    }\n    for (i = 0; i < tokens.length; i += 1) {\n        token = tokens[i];\n        if (typeof token === 'string') {\n            specs.push(token.charAt(0) === '-' ?\n                { field: token.substring(1), order: -1 } :\n                { field: token, order: 1 });\n        }\n        else if (typeof token === 'function') {\n            specs.push({ func: token });\n        }\n    }\n    return specs;\n}\nfunction compareByFieldSpecs(obj0, obj1, fieldSpecs) {\n    var i;\n    var cmp;\n    for (i = 0; i < fieldSpecs.length; i += 1) {\n        cmp = compareByFieldSpec(obj0, obj1, fieldSpecs[i]);\n        if (cmp) {\n            return cmp;\n        }\n    }\n    return 0;\n}\nfunction compareByFieldSpec(obj0, obj1, fieldSpec) {\n    if (fieldSpec.func) {\n        return fieldSpec.func(obj0, obj1);\n    }\n    return flexibleCompare(obj0[fieldSpec.field], obj1[fieldSpec.field])\n        * (fieldSpec.order || 1);\n}\nfunction flexibleCompare(a, b) {\n    if (!a && !b) {\n        return 0;\n    }\n    if (b == null) {\n        return -1;\n    }\n    if (a == null) {\n        return 1;\n    }\n    if (typeof a === 'string' || typeof b === 'string') {\n        return String(a).localeCompare(String(b));\n    }\n    return a - b;\n}\n/* String Utilities\n----------------------------------------------------------------------------------------------------------------------*/\nfunction padStart(val, len) {\n    var s = String(val);\n    return '000'.substr(0, len - s.length) + s;\n}\nfunction formatWithOrdinals(formatter, args, fallbackText) {\n    if (typeof formatter === 'function') {\n        return formatter.apply(void 0, args);\n    }\n    if (typeof formatter === 'string') { // non-blank string\n        return args.reduce(function (str, arg, index) { return (str.replace('$' + index, arg || '')); }, formatter);\n    }\n    return fallbackText;\n}\n/* Number Utilities\n----------------------------------------------------------------------------------------------------------------------*/\nfunction compareNumbers(a, b) {\n    return a - b;\n}\nfunction isInt(n) {\n    return n % 1 === 0;\n}\n/* FC-specific DOM dimension stuff\n----------------------------------------------------------------------------------------------------------------------*/\nfunction computeSmallestCellWidth(cellEl) {\n    var allWidthEl = cellEl.querySelector('.fc-scrollgrid-shrink-frame');\n    var contentWidthEl = cellEl.querySelector('.fc-scrollgrid-shrink-cushion');\n    if (!allWidthEl) {\n        throw new Error('needs fc-scrollgrid-shrink-frame className'); // TODO: use const\n    }\n    if (!contentWidthEl) {\n        throw new Error('needs fc-scrollgrid-shrink-cushion className');\n    }\n    return cellEl.getBoundingClientRect().width - allWidthEl.getBoundingClientRect().width + // the cell padding+border\n        contentWidthEl.getBoundingClientRect().width;\n}\n\nvar DAY_IDS = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\n// Adding\nfunction addWeeks(m, n) {\n    var a = dateToUtcArray(m);\n    a[2] += n * 7;\n    return arrayToUtcDate(a);\n}\nfunction addDays(m, n) {\n    var a = dateToUtcArray(m);\n    a[2] += n;\n    return arrayToUtcDate(a);\n}\nfunction addMs(m, n) {\n    var a = dateToUtcArray(m);\n    a[6] += n;\n    return arrayToUtcDate(a);\n}\n// Diffing (all return floats)\n// TODO: why not use ranges?\nfunction diffWeeks(m0, m1) {\n    return diffDays(m0, m1) / 7;\n}\nfunction diffDays(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / (1000 * 60 * 60 * 24);\n}\nfunction diffHours(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / (1000 * 60 * 60);\n}\nfunction diffMinutes(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / (1000 * 60);\n}\nfunction diffSeconds(m0, m1) {\n    return (m1.valueOf() - m0.valueOf()) / 1000;\n}\nfunction diffDayAndTime(m0, m1) {\n    var m0day = startOfDay(m0);\n    var m1day = startOfDay(m1);\n    return {\n        years: 0,\n        months: 0,\n        days: Math.round(diffDays(m0day, m1day)),\n        milliseconds: (m1.valueOf() - m1day.valueOf()) - (m0.valueOf() - m0day.valueOf()),\n    };\n}\n// Diffing Whole Units\nfunction diffWholeWeeks(m0, m1) {\n    var d = diffWholeDays(m0, m1);\n    if (d !== null && d % 7 === 0) {\n        return d / 7;\n    }\n    return null;\n}\nfunction diffWholeDays(m0, m1) {\n    if (timeAsMs(m0) === timeAsMs(m1)) {\n        return Math.round(diffDays(m0, m1));\n    }\n    return null;\n}\n// Start-Of\nfunction startOfDay(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n    ]);\n}\nfunction startOfHour(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n        m.getUTCHours(),\n    ]);\n}\nfunction startOfMinute(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n        m.getUTCHours(),\n        m.getUTCMinutes(),\n    ]);\n}\nfunction startOfSecond(m) {\n    return arrayToUtcDate([\n        m.getUTCFullYear(),\n        m.getUTCMonth(),\n        m.getUTCDate(),\n        m.getUTCHours(),\n        m.getUTCMinutes(),\n        m.getUTCSeconds(),\n    ]);\n}\n// Week Computation\nfunction weekOfYear(marker, dow, doy) {\n    var y = marker.getUTCFullYear();\n    var w = weekOfGivenYear(marker, y, dow, doy);\n    if (w < 1) {\n        return weekOfGivenYear(marker, y - 1, dow, doy);\n    }\n    var nextW = weekOfGivenYear(marker, y + 1, dow, doy);\n    if (nextW >= 1) {\n        return Math.min(w, nextW);\n    }\n    return w;\n}\nfunction weekOfGivenYear(marker, year, dow, doy) {\n    var firstWeekStart = arrayToUtcDate([year, 0, 1 + firstWeekOffset(year, dow, doy)]);\n    var dayStart = startOfDay(marker);\n    var days = Math.round(diffDays(firstWeekStart, dayStart));\n    return Math.floor(days / 7) + 1; // zero-indexed\n}\n// start-of-first-week - start-of-year\nfunction firstWeekOffset(year, dow, doy) {\n    // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n    var fwd = 7 + dow - doy;\n    // first-week day local weekday -- which local weekday is fwd\n    var fwdlw = (7 + arrayToUtcDate([year, 0, fwd]).getUTCDay() - dow) % 7;\n    return -fwdlw + fwd - 1;\n}\n// Array Conversion\nfunction dateToLocalArray(date) {\n    return [\n        date.getFullYear(),\n        date.getMonth(),\n        date.getDate(),\n        date.getHours(),\n        date.getMinutes(),\n        date.getSeconds(),\n        date.getMilliseconds(),\n    ];\n}\nfunction arrayToLocalDate(a) {\n    return new Date(a[0], a[1] || 0, a[2] == null ? 1 : a[2], // day of month\n    a[3] || 0, a[4] || 0, a[5] || 0);\n}\nfunction dateToUtcArray(date) {\n    return [\n        date.getUTCFullYear(),\n        date.getUTCMonth(),\n        date.getUTCDate(),\n        date.getUTCHours(),\n        date.getUTCMinutes(),\n        date.getUTCSeconds(),\n        date.getUTCMilliseconds(),\n    ];\n}\nfunction arrayToUtcDate(a) {\n    // according to web standards (and Safari), a month index is required.\n    // massage if only given a year.\n    if (a.length === 1) {\n        a = a.concat([0]);\n    }\n    return new Date(Date.UTC.apply(Date, a));\n}\n// Other Utils\nfunction isValidDate(m) {\n    return !isNaN(m.valueOf());\n}\nfunction timeAsMs(m) {\n    return m.getUTCHours() * 1000 * 60 * 60 +\n        m.getUTCMinutes() * 1000 * 60 +\n        m.getUTCSeconds() * 1000 +\n        m.getUTCMilliseconds();\n}\n\nfunction createEventInstance(defId, range, forcedStartTzo, forcedEndTzo) {\n    return {\n        instanceId: guid(),\n        defId: defId,\n        range: range,\n        forcedStartTzo: forcedStartTzo == null ? null : forcedStartTzo,\n        forcedEndTzo: forcedEndTzo == null ? null : forcedEndTzo,\n    };\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n// Merges an array of objects into a single object.\n// The second argument allows for an array of property names who's object values will be merged together.\nfunction mergeProps(propObjs, complexPropsMap) {\n    var dest = {};\n    if (complexPropsMap) {\n        for (var name_1 in complexPropsMap) {\n            var complexObjs = [];\n            // collect the trailing object values, stopping when a non-object is discovered\n            for (var i = propObjs.length - 1; i >= 0; i -= 1) {\n                var val = propObjs[i][name_1];\n                if (typeof val === 'object' && val) { // non-null object\n                    complexObjs.unshift(val);\n                }\n                else if (val !== undefined) {\n                    dest[name_1] = val; // if there were no objects, this value will be used\n                    break;\n                }\n            }\n            // if the trailing values were objects, use the merged value\n            if (complexObjs.length) {\n                dest[name_1] = mergeProps(complexObjs);\n            }\n        }\n    }\n    // copy values into the destination, going from last to first\n    for (var i = propObjs.length - 1; i >= 0; i -= 1) {\n        var props = propObjs[i];\n        for (var name_2 in props) {\n            if (!(name_2 in dest)) { // if already assigned by previous props or complex props, don't reassign\n                dest[name_2] = props[name_2];\n            }\n        }\n    }\n    return dest;\n}\nfunction filterHash(hash, func) {\n    var filtered = {};\n    for (var key in hash) {\n        if (func(hash[key], key)) {\n            filtered[key] = hash[key];\n        }\n    }\n    return filtered;\n}\nfunction mapHash(hash, func) {\n    var newHash = {};\n    for (var key in hash) {\n        newHash[key] = func(hash[key], key);\n    }\n    return newHash;\n}\nfunction arrayToHash(a) {\n    var hash = {};\n    for (var _i = 0, a_1 = a; _i < a_1.length; _i++) {\n        var item = a_1[_i];\n        hash[item] = true;\n    }\n    return hash;\n}\nfunction buildHashFromArray(a, func) {\n    var hash = {};\n    for (var i = 0; i < a.length; i += 1) {\n        var tuple = func(a[i], i);\n        hash[tuple[0]] = tuple[1];\n    }\n    return hash;\n}\nfunction hashValuesToArray(obj) {\n    var a = [];\n    for (var key in obj) {\n        a.push(obj[key]);\n    }\n    return a;\n}\nfunction isPropsEqual(obj0, obj1) {\n    if (obj0 === obj1) {\n        return true;\n    }\n    for (var key in obj0) {\n        if (hasOwnProperty.call(obj0, key)) {\n            if (!(key in obj1)) {\n                return false;\n            }\n        }\n    }\n    for (var key in obj1) {\n        if (hasOwnProperty.call(obj1, key)) {\n            if (obj0[key] !== obj1[key]) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\nfunction getUnequalProps(obj0, obj1) {\n    var keys = [];\n    for (var key in obj0) {\n        if (hasOwnProperty.call(obj0, key)) {\n            if (!(key in obj1)) {\n                keys.push(key);\n            }\n        }\n    }\n    for (var key in obj1) {\n        if (hasOwnProperty.call(obj1, key)) {\n            if (obj0[key] !== obj1[key]) {\n                keys.push(key);\n            }\n        }\n    }\n    return keys;\n}\nfunction compareObjs(oldProps, newProps, equalityFuncs) {\n    if (equalityFuncs === void 0) { equalityFuncs = {}; }\n    if (oldProps === newProps) {\n        return true;\n    }\n    for (var key in newProps) {\n        if (key in oldProps && isObjValsEqual(oldProps[key], newProps[key], equalityFuncs[key])) ;\n        else {\n            return false;\n        }\n    }\n    // check for props that were omitted in the new\n    for (var key in oldProps) {\n        if (!(key in newProps)) {\n            return false;\n        }\n    }\n    return true;\n}\n/*\nassumed \"true\" equality for handler names like \"onReceiveSomething\"\n*/\nfunction isObjValsEqual(val0, val1, comparator) {\n    if (val0 === val1 || comparator === true) {\n        return true;\n    }\n    if (comparator) {\n        return comparator(val0, val1);\n    }\n    return false;\n}\nfunction collectFromHash(hash, startIndex, endIndex, step) {\n    if (startIndex === void 0) { startIndex = 0; }\n    if (step === void 0) { step = 1; }\n    var res = [];\n    if (endIndex == null) {\n        endIndex = Object.keys(hash).length;\n    }\n    for (var i = startIndex; i < endIndex; i += step) {\n        var val = hash[i];\n        if (val !== undefined) { // will disregard undefined for sparse arrays\n            res.push(val);\n        }\n    }\n    return res;\n}\n\nfunction parseRecurring(refined, defaultAllDay, dateEnv, recurringTypes) {\n    for (var i = 0; i < recurringTypes.length; i += 1) {\n        var parsed = recurringTypes[i].parse(refined, dateEnv);\n        if (parsed) {\n            var allDay = refined.allDay;\n            if (allDay == null) {\n                allDay = defaultAllDay;\n                if (allDay == null) {\n                    allDay = parsed.allDayGuess;\n                    if (allDay == null) {\n                        allDay = false;\n                    }\n                }\n            }\n            return {\n                allDay: allDay,\n                duration: parsed.duration,\n                typeData: parsed.typeData,\n                typeId: i,\n            };\n        }\n    }\n    return null;\n}\nfunction expandRecurring(eventStore, framingRange, context) {\n    var dateEnv = context.dateEnv, pluginHooks = context.pluginHooks, options = context.options;\n    var defs = eventStore.defs, instances = eventStore.instances;\n    // remove existing recurring instances\n    // TODO: bad. always expand events as a second step\n    instances = filterHash(instances, function (instance) { return !defs[instance.defId].recurringDef; });\n    for (var defId in defs) {\n        var def = defs[defId];\n        if (def.recurringDef) {\n            var duration = def.recurringDef.duration;\n            if (!duration) {\n                duration = def.allDay ?\n                    options.defaultAllDayEventDuration :\n                    options.defaultTimedEventDuration;\n            }\n            var starts = expandRecurringRanges(def, duration, framingRange, dateEnv, pluginHooks.recurringTypes);\n            for (var _i = 0, starts_1 = starts; _i < starts_1.length; _i++) {\n                var start = starts_1[_i];\n                var instance = createEventInstance(defId, {\n                    start: start,\n                    end: dateEnv.add(start, duration),\n                });\n                instances[instance.instanceId] = instance;\n            }\n        }\n    }\n    return { defs: defs, instances: instances };\n}\n/*\nEvent MUST have a recurringDef\n*/\nfunction expandRecurringRanges(eventDef, duration, framingRange, dateEnv, recurringTypes) {\n    var typeDef = recurringTypes[eventDef.recurringDef.typeId];\n    var markers = typeDef.expand(eventDef.recurringDef.typeData, {\n        start: dateEnv.subtract(framingRange.start, duration),\n        end: framingRange.end,\n    }, dateEnv);\n    // the recurrence plugins don't guarantee that all-day events are start-of-day, so we have to\n    if (eventDef.allDay) {\n        markers = markers.map(startOfDay);\n    }\n    return markers;\n}\n\nvar INTERNAL_UNITS = ['years', 'months', 'days', 'milliseconds'];\nvar PARSE_RE = /^(-?)(?:(\\d+)\\.)?(\\d+):(\\d\\d)(?::(\\d\\d)(?:\\.(\\d\\d\\d))?)?/;\n// Parsing and Creation\nfunction createDuration(input, unit) {\n    var _a;\n    if (typeof input === 'string') {\n        return parseString(input);\n    }\n    if (typeof input === 'object' && input) { // non-null object\n        return parseObject(input);\n    }\n    if (typeof input === 'number') {\n        return parseObject((_a = {}, _a[unit || 'milliseconds'] = input, _a));\n    }\n    return null;\n}\nfunction parseString(s) {\n    var m = PARSE_RE.exec(s);\n    if (m) {\n        var sign = m[1] ? -1 : 1;\n        return {\n            years: 0,\n            months: 0,\n            days: sign * (m[2] ? parseInt(m[2], 10) : 0),\n            milliseconds: sign * ((m[3] ? parseInt(m[3], 10) : 0) * 60 * 60 * 1000 + // hours\n                (m[4] ? parseInt(m[4], 10) : 0) * 60 * 1000 + // minutes\n                (m[5] ? parseInt(m[5], 10) : 0) * 1000 + // seconds\n                (m[6] ? parseInt(m[6], 10) : 0) // ms\n            ),\n        };\n    }\n    return null;\n}\nfunction parseObject(obj) {\n    var duration = {\n        years: obj.years || obj.year || 0,\n        months: obj.months || obj.month || 0,\n        days: obj.days || obj.day || 0,\n        milliseconds: (obj.hours || obj.hour || 0) * 60 * 60 * 1000 + // hours\n            (obj.minutes || obj.minute || 0) * 60 * 1000 + // minutes\n            (obj.seconds || obj.second || 0) * 1000 + // seconds\n            (obj.milliseconds || obj.millisecond || obj.ms || 0), // ms\n    };\n    var weeks = obj.weeks || obj.week;\n    if (weeks) {\n        duration.days += weeks * 7;\n        duration.specifiedWeeks = true;\n    }\n    return duration;\n}\n// Equality\nfunction durationsEqual(d0, d1) {\n    return d0.years === d1.years &&\n        d0.months === d1.months &&\n        d0.days === d1.days &&\n        d0.milliseconds === d1.milliseconds;\n}\nfunction asCleanDays(dur) {\n    if (!dur.years && !dur.months && !dur.milliseconds) {\n        return dur.days;\n    }\n    return 0;\n}\n// Simple Math\nfunction addDurations(d0, d1) {\n    return {\n        years: d0.years + d1.years,\n        months: d0.months + d1.months,\n        days: d0.days + d1.days,\n        milliseconds: d0.milliseconds + d1.milliseconds,\n    };\n}\nfunction subtractDurations(d1, d0) {\n    return {\n        years: d1.years - d0.years,\n        months: d1.months - d0.months,\n        days: d1.days - d0.days,\n        milliseconds: d1.milliseconds - d0.milliseconds,\n    };\n}\nfunction multiplyDuration(d, n) {\n    return {\n        years: d.years * n,\n        months: d.months * n,\n        days: d.days * n,\n        milliseconds: d.milliseconds * n,\n    };\n}\n// Conversions\n// \"Rough\" because they are based on average-case Gregorian months/years\nfunction asRoughYears(dur) {\n    return asRoughDays(dur) / 365;\n}\nfunction asRoughMonths(dur) {\n    return asRoughDays(dur) / 30;\n}\nfunction asRoughDays(dur) {\n    return asRoughMs(dur) / 864e5;\n}\nfunction asRoughMinutes(dur) {\n    return asRoughMs(dur) / (1000 * 60);\n}\nfunction asRoughSeconds(dur) {\n    return asRoughMs(dur) / 1000;\n}\nfunction asRoughMs(dur) {\n    return dur.years * (365 * 864e5) +\n        dur.months * (30 * 864e5) +\n        dur.days * 864e5 +\n        dur.milliseconds;\n}\n// Advanced Math\nfunction wholeDivideDurations(numerator, denominator) {\n    var res = null;\n    for (var i = 0; i < INTERNAL_UNITS.length; i += 1) {\n        var unit = INTERNAL_UNITS[i];\n        if (denominator[unit]) {\n            var localRes = numerator[unit] / denominator[unit];\n            if (!isInt(localRes) || (res !== null && res !== localRes)) {\n                return null;\n            }\n            res = localRes;\n        }\n        else if (numerator[unit]) {\n            // needs to divide by something but can't!\n            return null;\n        }\n    }\n    return res;\n}\nfunction greatestDurationDenominator(dur) {\n    var ms = dur.milliseconds;\n    if (ms) {\n        if (ms % 1000 !== 0) {\n            return { unit: 'millisecond', value: ms };\n        }\n        if (ms % (1000 * 60) !== 0) {\n            return { unit: 'second', value: ms / 1000 };\n        }\n        if (ms % (1000 * 60 * 60) !== 0) {\n            return { unit: 'minute', value: ms / (1000 * 60) };\n        }\n        if (ms) {\n            return { unit: 'hour', value: ms / (1000 * 60 * 60) };\n        }\n    }\n    if (dur.days) {\n        if (dur.specifiedWeeks && dur.days % 7 === 0) {\n            return { unit: 'week', value: dur.days / 7 };\n        }\n        return { unit: 'day', value: dur.days };\n    }\n    if (dur.months) {\n        return { unit: 'month', value: dur.months };\n    }\n    if (dur.years) {\n        return { unit: 'year', value: dur.years };\n    }\n    return { unit: 'millisecond', value: 0 };\n}\n\n// timeZoneOffset is in minutes\nfunction buildIsoString(marker, timeZoneOffset, stripZeroTime) {\n    if (stripZeroTime === void 0) { stripZeroTime = false; }\n    var s = marker.toISOString();\n    s = s.replace('.000', '');\n    if (stripZeroTime) {\n        s = s.replace('T00:00:00Z', '');\n    }\n    if (s.length > 10) { // time part wasn't stripped, can add timezone info\n        if (timeZoneOffset == null) {\n            s = s.replace('Z', '');\n        }\n        else if (timeZoneOffset !== 0) {\n            s = s.replace('Z', formatTimeZoneOffset(timeZoneOffset, true));\n        }\n        // otherwise, its UTC-0 and we want to keep the Z\n    }\n    return s;\n}\n// formats the date, but with no time part\n// TODO: somehow merge with buildIsoString and stripZeroTime\n// TODO: rename. omit \"string\"\nfunction formatDayString(marker) {\n    return marker.toISOString().replace(/T.*$/, '');\n}\n// TODO: use Date::toISOString and use everything after the T?\nfunction formatIsoTimeString(marker) {\n    return padStart(marker.getUTCHours(), 2) + ':' +\n        padStart(marker.getUTCMinutes(), 2) + ':' +\n        padStart(marker.getUTCSeconds(), 2);\n}\nfunction formatTimeZoneOffset(minutes, doIso) {\n    if (doIso === void 0) { doIso = false; }\n    var sign = minutes < 0 ? '-' : '+';\n    var abs = Math.abs(minutes);\n    var hours = Math.floor(abs / 60);\n    var mins = Math.round(abs % 60);\n    if (doIso) {\n        return sign + padStart(hours, 2) + \":\" + padStart(mins, 2);\n    }\n    return \"GMT\" + sign + hours + (mins ? \":\" + padStart(mins, 2) : '');\n}\n\n// TODO: new util arrayify?\nfunction removeExact(array, exactVal) {\n    var removeCnt = 0;\n    var i = 0;\n    while (i < array.length) {\n        if (array[i] === exactVal) {\n            array.splice(i, 1);\n            removeCnt += 1;\n        }\n        else {\n            i += 1;\n        }\n    }\n    return removeCnt;\n}\nfunction isArraysEqual(a0, a1, equalityFunc) {\n    if (a0 === a1) {\n        return true;\n    }\n    var len = a0.length;\n    var i;\n    if (len !== a1.length) { // not array? or not same length?\n        return false;\n    }\n    for (i = 0; i < len; i += 1) {\n        if (!(equalityFunc ? equalityFunc(a0[i], a1[i]) : a0[i] === a1[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoize(workerFunc, resEquality, teardownFunc) {\n    var currentArgs;\n    var currentRes;\n    return function () {\n        var newArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            newArgs[_i] = arguments[_i];\n        }\n        if (!currentArgs) {\n            currentRes = workerFunc.apply(this, newArgs);\n        }\n        else if (!isArraysEqual(currentArgs, newArgs)) {\n            if (teardownFunc) {\n                teardownFunc(currentRes);\n            }\n            var res = workerFunc.apply(this, newArgs);\n            if (!resEquality || !resEquality(res, currentRes)) {\n                currentRes = res;\n            }\n        }\n        currentArgs = newArgs;\n        return currentRes;\n    };\n}\nfunction memoizeObjArg(workerFunc, resEquality, teardownFunc) {\n    var _this = this;\n    var currentArg;\n    var currentRes;\n    return function (newArg) {\n        if (!currentArg) {\n            currentRes = workerFunc.call(_this, newArg);\n        }\n        else if (!isPropsEqual(currentArg, newArg)) {\n            if (teardownFunc) {\n                teardownFunc(currentRes);\n            }\n            var res = workerFunc.call(_this, newArg);\n            if (!resEquality || !resEquality(res, currentRes)) {\n                currentRes = res;\n            }\n        }\n        currentArg = newArg;\n        return currentRes;\n    };\n}\nfunction memoizeArraylike(// used at all?\nworkerFunc, resEquality, teardownFunc) {\n    var _this = this;\n    var currentArgSets = [];\n    var currentResults = [];\n    return function (newArgSets) {\n        var currentLen = currentArgSets.length;\n        var newLen = newArgSets.length;\n        var i = 0;\n        for (; i < currentLen; i += 1) {\n            if (!newArgSets[i]) { // one of the old sets no longer exists\n                if (teardownFunc) {\n                    teardownFunc(currentResults[i]);\n                }\n            }\n            else if (!isArraysEqual(currentArgSets[i], newArgSets[i])) {\n                if (teardownFunc) {\n                    teardownFunc(currentResults[i]);\n                }\n                var res = workerFunc.apply(_this, newArgSets[i]);\n                if (!resEquality || !resEquality(res, currentResults[i])) {\n                    currentResults[i] = res;\n                }\n            }\n        }\n        for (; i < newLen; i += 1) {\n            currentResults[i] = workerFunc.apply(_this, newArgSets[i]);\n        }\n        currentArgSets = newArgSets;\n        currentResults.splice(newLen); // remove excess\n        return currentResults;\n    };\n}\nfunction memoizeHashlike(// used?\nworkerFunc, resEquality, teardownFunc) {\n    var _this = this;\n    var currentArgHash = {};\n    var currentResHash = {};\n    return function (newArgHash) {\n        var newResHash = {};\n        for (var key in newArgHash) {\n            if (!currentResHash[key]) {\n                newResHash[key] = workerFunc.apply(_this, newArgHash[key]);\n            }\n            else if (!isArraysEqual(currentArgHash[key], newArgHash[key])) {\n                if (teardownFunc) {\n                    teardownFunc(currentResHash[key]);\n                }\n                var res = workerFunc.apply(_this, newArgHash[key]);\n                newResHash[key] = (resEquality && resEquality(res, currentResHash[key]))\n                    ? currentResHash[key]\n                    : res;\n            }\n            else {\n                newResHash[key] = currentResHash[key];\n            }\n        }\n        currentArgHash = newArgHash;\n        currentResHash = newResHash;\n        return newResHash;\n    };\n}\n\nvar EXTENDED_SETTINGS_AND_SEVERITIES = {\n    week: 3,\n    separator: 0,\n    omitZeroMinute: 0,\n    meridiem: 0,\n    omitCommas: 0,\n};\nvar STANDARD_DATE_PROP_SEVERITIES = {\n    timeZoneName: 7,\n    era: 6,\n    year: 5,\n    month: 4,\n    day: 2,\n    weekday: 2,\n    hour: 1,\n    minute: 1,\n    second: 1,\n};\nvar MERIDIEM_RE = /\\s*([ap])\\.?m\\.?/i; // eats up leading spaces too\nvar COMMA_RE = /,/g; // we need re for globalness\nvar MULTI_SPACE_RE = /\\s+/g;\nvar LTR_RE = /\\u200e/g; // control character\nvar UTC_RE = /UTC|GMT/;\nvar NativeFormatter = /** @class */ (function () {\n    function NativeFormatter(formatSettings) {\n        var standardDateProps = {};\n        var extendedSettings = {};\n        var severity = 0;\n        for (var name_1 in formatSettings) {\n            if (name_1 in EXTENDED_SETTINGS_AND_SEVERITIES) {\n                extendedSettings[name_1] = formatSettings[name_1];\n                severity = Math.max(EXTENDED_SETTINGS_AND_SEVERITIES[name_1], severity);\n            }\n            else {\n                standardDateProps[name_1] = formatSettings[name_1];\n                if (name_1 in STANDARD_DATE_PROP_SEVERITIES) { // TODO: what about hour12? no severity\n                    severity = Math.max(STANDARD_DATE_PROP_SEVERITIES[name_1], severity);\n                }\n            }\n        }\n        this.standardDateProps = standardDateProps;\n        this.extendedSettings = extendedSettings;\n        this.severity = severity;\n        this.buildFormattingFunc = memoize(buildFormattingFunc);\n    }\n    NativeFormatter.prototype.format = function (date, context) {\n        return this.buildFormattingFunc(this.standardDateProps, this.extendedSettings, context)(date);\n    };\n    NativeFormatter.prototype.formatRange = function (start, end, context, betterDefaultSeparator) {\n        var _a = this, standardDateProps = _a.standardDateProps, extendedSettings = _a.extendedSettings;\n        var diffSeverity = computeMarkerDiffSeverity(start.marker, end.marker, context.calendarSystem);\n        if (!diffSeverity) {\n            return this.format(start, context);\n        }\n        var biggestUnitForPartial = diffSeverity;\n        if (biggestUnitForPartial > 1 && // the two dates are different in a way that's larger scale than time\n            (standardDateProps.year === 'numeric' || standardDateProps.year === '2-digit') &&\n            (standardDateProps.month === 'numeric' || standardDateProps.month === '2-digit') &&\n            (standardDateProps.day === 'numeric' || standardDateProps.day === '2-digit')) {\n            biggestUnitForPartial = 1; // make it look like the dates are only different in terms of time\n        }\n        var full0 = this.format(start, context);\n        var full1 = this.format(end, context);\n        if (full0 === full1) {\n            return full0;\n        }\n        var partialDateProps = computePartialFormattingOptions(standardDateProps, biggestUnitForPartial);\n        var partialFormattingFunc = buildFormattingFunc(partialDateProps, extendedSettings, context);\n        var partial0 = partialFormattingFunc(start);\n        var partial1 = partialFormattingFunc(end);\n        var insertion = findCommonInsertion(full0, partial0, full1, partial1);\n        var separator = extendedSettings.separator || betterDefaultSeparator || context.defaultSeparator || '';\n        if (insertion) {\n            return insertion.before + partial0 + separator + partial1 + insertion.after;\n        }\n        return full0 + separator + full1;\n    };\n    NativeFormatter.prototype.getLargestUnit = function () {\n        switch (this.severity) {\n            case 7:\n            case 6:\n            case 5:\n                return 'year';\n            case 4:\n                return 'month';\n            case 3:\n                return 'week';\n            case 2:\n                return 'day';\n            default:\n                return 'time'; // really?\n        }\n    };\n    return NativeFormatter;\n}());\nfunction buildFormattingFunc(standardDateProps, extendedSettings, context) {\n    var standardDatePropCnt = Object.keys(standardDateProps).length;\n    if (standardDatePropCnt === 1 && standardDateProps.timeZoneName === 'short') {\n        return function (date) { return (formatTimeZoneOffset(date.timeZoneOffset)); };\n    }\n    if (standardDatePropCnt === 0 && extendedSettings.week) {\n        return function (date) { return (formatWeekNumber(context.computeWeekNumber(date.marker), context.weekText, context.weekTextLong, context.locale, extendedSettings.week)); };\n    }\n    return buildNativeFormattingFunc(standardDateProps, extendedSettings, context);\n}\nfunction buildNativeFormattingFunc(standardDateProps, extendedSettings, context) {\n    standardDateProps = __assign({}, standardDateProps); // copy\n    extendedSettings = __assign({}, extendedSettings); // copy\n    sanitizeSettings(standardDateProps, extendedSettings);\n    standardDateProps.timeZone = 'UTC'; // we leverage the only guaranteed timeZone for our UTC markers\n    var normalFormat = new Intl.DateTimeFormat(context.locale.codes, standardDateProps);\n    var zeroFormat; // needed?\n    if (extendedSettings.omitZeroMinute) {\n        var zeroProps = __assign({}, standardDateProps);\n        delete zeroProps.minute; // seconds and ms were already considered in sanitizeSettings\n        zeroFormat = new Intl.DateTimeFormat(context.locale.codes, zeroProps);\n    }\n    return function (date) {\n        var marker = date.marker;\n        var format;\n        if (zeroFormat && !marker.getUTCMinutes()) {\n            format = zeroFormat;\n        }\n        else {\n            format = normalFormat;\n        }\n        var s = format.format(marker);\n        return postProcess(s, date, standardDateProps, extendedSettings, context);\n    };\n}\nfunction sanitizeSettings(standardDateProps, extendedSettings) {\n    // deal with a browser inconsistency where formatting the timezone\n    // requires that the hour/minute be present.\n    if (standardDateProps.timeZoneName) {\n        if (!standardDateProps.hour) {\n            standardDateProps.hour = '2-digit';\n        }\n        if (!standardDateProps.minute) {\n            standardDateProps.minute = '2-digit';\n        }\n    }\n    // only support short timezone names\n    if (standardDateProps.timeZoneName === 'long') {\n        standardDateProps.timeZoneName = 'short';\n    }\n    // if requesting to display seconds, MUST display minutes\n    if (extendedSettings.omitZeroMinute && (standardDateProps.second || standardDateProps.millisecond)) {\n        delete extendedSettings.omitZeroMinute;\n    }\n}\nfunction postProcess(s, date, standardDateProps, extendedSettings, context) {\n    s = s.replace(LTR_RE, ''); // remove left-to-right control chars. do first. good for other regexes\n    if (standardDateProps.timeZoneName === 'short') {\n        s = injectTzoStr(s, (context.timeZone === 'UTC' || date.timeZoneOffset == null) ?\n            'UTC' : // important to normalize for IE, which does \"GMT\"\n            formatTimeZoneOffset(date.timeZoneOffset));\n    }\n    if (extendedSettings.omitCommas) {\n        s = s.replace(COMMA_RE, '').trim();\n    }\n    if (extendedSettings.omitZeroMinute) {\n        s = s.replace(':00', ''); // zeroFormat doesn't always achieve this\n    }\n    // ^ do anything that might create adjacent spaces before this point,\n    // because MERIDIEM_RE likes to eat up loading spaces\n    if (extendedSettings.meridiem === false) {\n        s = s.replace(MERIDIEM_RE, '').trim();\n    }\n    else if (extendedSettings.meridiem === 'narrow') { // a/p\n        s = s.replace(MERIDIEM_RE, function (m0, m1) { return m1.toLocaleLowerCase(); });\n    }\n    else if (extendedSettings.meridiem === 'short') { // am/pm\n        s = s.replace(MERIDIEM_RE, function (m0, m1) { return m1.toLocaleLowerCase() + \"m\"; });\n    }\n    else if (extendedSettings.meridiem === 'lowercase') { // other meridiem transformers already converted to lowercase\n        s = s.replace(MERIDIEM_RE, function (m0) { return m0.toLocaleLowerCase(); });\n    }\n    s = s.replace(MULTI_SPACE_RE, ' ');\n    s = s.trim();\n    return s;\n}\nfunction injectTzoStr(s, tzoStr) {\n    var replaced = false;\n    s = s.replace(UTC_RE, function () {\n        replaced = true;\n        return tzoStr;\n    });\n    // IE11 doesn't include UTC/GMT in the original string, so append to end\n    if (!replaced) {\n        s += \" \" + tzoStr;\n    }\n    return s;\n}\nfunction formatWeekNumber(num, weekText, weekTextLong, locale, display) {\n    var parts = [];\n    if (display === 'long') {\n        parts.push(weekTextLong);\n    }\n    else if (display === 'short' || display === 'narrow') {\n        parts.push(weekText);\n    }\n    if (display === 'long' || display === 'short') {\n        parts.push(' ');\n    }\n    parts.push(locale.simpleNumberFormat.format(num));\n    if (locale.options.direction === 'rtl') { // TODO: use control characters instead?\n        parts.reverse();\n    }\n    return parts.join('');\n}\n// Range Formatting Utils\n// 0 = exactly the same\n// 1 = different by time\n// and bigger\nfunction computeMarkerDiffSeverity(d0, d1, ca) {\n    if (ca.getMarkerYear(d0) !== ca.getMarkerYear(d1)) {\n        return 5;\n    }\n    if (ca.getMarkerMonth(d0) !== ca.getMarkerMonth(d1)) {\n        return 4;\n    }\n    if (ca.getMarkerDay(d0) !== ca.getMarkerDay(d1)) {\n        return 2;\n    }\n    if (timeAsMs(d0) !== timeAsMs(d1)) {\n        return 1;\n    }\n    return 0;\n}\nfunction computePartialFormattingOptions(options, biggestUnit) {\n    var partialOptions = {};\n    for (var name_2 in options) {\n        if (!(name_2 in STANDARD_DATE_PROP_SEVERITIES) || // not a date part prop (like timeZone)\n            STANDARD_DATE_PROP_SEVERITIES[name_2] <= biggestUnit) {\n            partialOptions[name_2] = options[name_2];\n        }\n    }\n    return partialOptions;\n}\nfunction findCommonInsertion(full0, partial0, full1, partial1) {\n    var i0 = 0;\n    while (i0 < full0.length) {\n        var found0 = full0.indexOf(partial0, i0);\n        if (found0 === -1) {\n            break;\n        }\n        var before0 = full0.substr(0, found0);\n        i0 = found0 + partial0.length;\n        var after0 = full0.substr(i0);\n        var i1 = 0;\n        while (i1 < full1.length) {\n            var found1 = full1.indexOf(partial1, i1);\n            if (found1 === -1) {\n                break;\n            }\n            var before1 = full1.substr(0, found1);\n            i1 = found1 + partial1.length;\n            var after1 = full1.substr(i1);\n            if (before0 === before1 && after0 === after1) {\n                return {\n                    before: before0,\n                    after: after0,\n                };\n            }\n        }\n    }\n    return null;\n}\n\nfunction expandZonedMarker(dateInfo, calendarSystem) {\n    var a = calendarSystem.markerToArray(dateInfo.marker);\n    return {\n        marker: dateInfo.marker,\n        timeZoneOffset: dateInfo.timeZoneOffset,\n        array: a,\n        year: a[0],\n        month: a[1],\n        day: a[2],\n        hour: a[3],\n        minute: a[4],\n        second: a[5],\n        millisecond: a[6],\n    };\n}\n\nfunction createVerboseFormattingArg(start, end, context, betterDefaultSeparator) {\n    var startInfo = expandZonedMarker(start, context.calendarSystem);\n    var endInfo = end ? expandZonedMarker(end, context.calendarSystem) : null;\n    return {\n        date: startInfo,\n        start: startInfo,\n        end: endInfo,\n        timeZone: context.timeZone,\n        localeCodes: context.locale.codes,\n        defaultSeparator: betterDefaultSeparator || context.defaultSeparator,\n    };\n}\n\n/*\nTODO: fix the terminology of \"formatter\" vs \"formatting func\"\n*/\n/*\nAt the time of instantiation, this object does not know which cmd-formatting system it will use.\nIt receives this at the time of formatting, as a setting.\n*/\nvar CmdFormatter = /** @class */ (function () {\n    function CmdFormatter(cmdStr) {\n        this.cmdStr = cmdStr;\n    }\n    CmdFormatter.prototype.format = function (date, context, betterDefaultSeparator) {\n        return context.cmdFormatter(this.cmdStr, createVerboseFormattingArg(date, null, context, betterDefaultSeparator));\n    };\n    CmdFormatter.prototype.formatRange = function (start, end, context, betterDefaultSeparator) {\n        return context.cmdFormatter(this.cmdStr, createVerboseFormattingArg(start, end, context, betterDefaultSeparator));\n    };\n    return CmdFormatter;\n}());\n\nvar FuncFormatter = /** @class */ (function () {\n    function FuncFormatter(func) {\n        this.func = func;\n    }\n    FuncFormatter.prototype.format = function (date, context, betterDefaultSeparator) {\n        return this.func(createVerboseFormattingArg(date, null, context, betterDefaultSeparator));\n    };\n    FuncFormatter.prototype.formatRange = function (start, end, context, betterDefaultSeparator) {\n        return this.func(createVerboseFormattingArg(start, end, context, betterDefaultSeparator));\n    };\n    return FuncFormatter;\n}());\n\nfunction createFormatter(input) {\n    if (typeof input === 'object' && input) { // non-null object\n        return new NativeFormatter(input);\n    }\n    if (typeof input === 'string') {\n        return new CmdFormatter(input);\n    }\n    if (typeof input === 'function') {\n        return new FuncFormatter(input);\n    }\n    return null;\n}\n\n// base options\n// ------------\nvar BASE_OPTION_REFINERS = {\n    navLinkDayClick: identity,\n    navLinkWeekClick: identity,\n    duration: createDuration,\n    bootstrapFontAwesome: identity,\n    buttonIcons: identity,\n    customButtons: identity,\n    defaultAllDayEventDuration: createDuration,\n    defaultTimedEventDuration: createDuration,\n    nextDayThreshold: createDuration,\n    scrollTime: createDuration,\n    scrollTimeReset: Boolean,\n    slotMinTime: createDuration,\n    slotMaxTime: createDuration,\n    dayPopoverFormat: createFormatter,\n    slotDuration: createDuration,\n    snapDuration: createDuration,\n    headerToolbar: identity,\n    footerToolbar: identity,\n    defaultRangeSeparator: String,\n    titleRangeSeparator: String,\n    forceEventDuration: Boolean,\n    dayHeaders: Boolean,\n    dayHeaderFormat: createFormatter,\n    dayHeaderClassNames: identity,\n    dayHeaderContent: identity,\n    dayHeaderDidMount: identity,\n    dayHeaderWillUnmount: identity,\n    dayCellClassNames: identity,\n    dayCellContent: identity,\n    dayCellDidMount: identity,\n    dayCellWillUnmount: identity,\n    initialView: String,\n    aspectRatio: Number,\n    weekends: Boolean,\n    weekNumberCalculation: identity,\n    weekNumbers: Boolean,\n    weekNumberClassNames: identity,\n    weekNumberContent: identity,\n    weekNumberDidMount: identity,\n    weekNumberWillUnmount: identity,\n    editable: Boolean,\n    viewClassNames: identity,\n    viewDidMount: identity,\n    viewWillUnmount: identity,\n    nowIndicator: Boolean,\n    nowIndicatorClassNames: identity,\n    nowIndicatorContent: identity,\n    nowIndicatorDidMount: identity,\n    nowIndicatorWillUnmount: identity,\n    showNonCurrentDates: Boolean,\n    lazyFetching: Boolean,\n    startParam: String,\n    endParam: String,\n    timeZoneParam: String,\n    timeZone: String,\n    locales: identity,\n    locale: identity,\n    themeSystem: String,\n    dragRevertDuration: Number,\n    dragScroll: Boolean,\n    allDayMaintainDuration: Boolean,\n    unselectAuto: Boolean,\n    dropAccept: identity,\n    eventOrder: parseFieldSpecs,\n    eventOrderStrict: Boolean,\n    handleWindowResize: Boolean,\n    windowResizeDelay: Number,\n    longPressDelay: Number,\n    eventDragMinDistance: Number,\n    expandRows: Boolean,\n    height: identity,\n    contentHeight: identity,\n    direction: String,\n    weekNumberFormat: createFormatter,\n    eventResizableFromStart: Boolean,\n    displayEventTime: Boolean,\n    displayEventEnd: Boolean,\n    weekText: String,\n    weekTextLong: String,\n    progressiveEventRendering: Boolean,\n    businessHours: identity,\n    initialDate: identity,\n    now: identity,\n    eventDataTransform: identity,\n    stickyHeaderDates: identity,\n    stickyFooterScrollbar: identity,\n    viewHeight: identity,\n    defaultAllDay: Boolean,\n    eventSourceFailure: identity,\n    eventSourceSuccess: identity,\n    eventDisplay: String,\n    eventStartEditable: Boolean,\n    eventDurationEditable: Boolean,\n    eventOverlap: identity,\n    eventConstraint: identity,\n    eventAllow: identity,\n    eventBackgroundColor: String,\n    eventBorderColor: String,\n    eventTextColor: String,\n    eventColor: String,\n    eventClassNames: identity,\n    eventContent: identity,\n    eventDidMount: identity,\n    eventWillUnmount: identity,\n    selectConstraint: identity,\n    selectOverlap: identity,\n    selectAllow: identity,\n    droppable: Boolean,\n    unselectCancel: String,\n    slotLabelFormat: identity,\n    slotLaneClassNames: identity,\n    slotLaneContent: identity,\n    slotLaneDidMount: identity,\n    slotLaneWillUnmount: identity,\n    slotLabelClassNames: identity,\n    slotLabelContent: identity,\n    slotLabelDidMount: identity,\n    slotLabelWillUnmount: identity,\n    dayMaxEvents: identity,\n    dayMaxEventRows: identity,\n    dayMinWidth: Number,\n    slotLabelInterval: createDuration,\n    allDayText: String,\n    allDayClassNames: identity,\n    allDayContent: identity,\n    allDayDidMount: identity,\n    allDayWillUnmount: identity,\n    slotMinWidth: Number,\n    navLinks: Boolean,\n    eventTimeFormat: createFormatter,\n    rerenderDelay: Number,\n    moreLinkText: identity,\n    moreLinkHint: identity,\n    selectMinDistance: Number,\n    selectable: Boolean,\n    selectLongPressDelay: Number,\n    eventLongPressDelay: Number,\n    selectMirror: Boolean,\n    eventMaxStack: Number,\n    eventMinHeight: Number,\n    eventMinWidth: Number,\n    eventShortHeight: Number,\n    slotEventOverlap: Boolean,\n    plugins: identity,\n    firstDay: Number,\n    dayCount: Number,\n    dateAlignment: String,\n    dateIncrement: createDuration,\n    hiddenDays: identity,\n    monthMode: Boolean,\n    fixedWeekCount: Boolean,\n    validRange: identity,\n    visibleRange: identity,\n    titleFormat: identity,\n    eventInteractive: Boolean,\n    // only used by list-view, but languages define the value, so we need it in base options\n    noEventsText: String,\n    viewHint: identity,\n    navLinkHint: identity,\n    closeHint: String,\n    timeHint: String,\n    eventHint: String,\n    moreLinkClick: identity,\n    moreLinkClassNames: identity,\n    moreLinkContent: identity,\n    moreLinkDidMount: identity,\n    moreLinkWillUnmount: identity,\n};\n// do NOT give a type here. need `typeof BASE_OPTION_DEFAULTS` to give real results.\n// raw values.\nvar BASE_OPTION_DEFAULTS = {\n    eventDisplay: 'auto',\n    defaultRangeSeparator: ' - ',\n    titleRangeSeparator: ' \\u2013 ',\n    defaultTimedEventDuration: '01:00:00',\n    defaultAllDayEventDuration: { day: 1 },\n    forceEventDuration: false,\n    nextDayThreshold: '00:00:00',\n    dayHeaders: true,\n    initialView: '',\n    aspectRatio: 1.35,\n    headerToolbar: {\n        start: 'title',\n        center: '',\n        end: 'today prev,next',\n    },\n    weekends: true,\n    weekNumbers: false,\n    weekNumberCalculation: 'local',\n    editable: false,\n    nowIndicator: false,\n    scrollTime: '06:00:00',\n    scrollTimeReset: true,\n    slotMinTime: '00:00:00',\n    slotMaxTime: '24:00:00',\n    showNonCurrentDates: true,\n    lazyFetching: true,\n    startParam: 'start',\n    endParam: 'end',\n    timeZoneParam: 'timeZone',\n    timeZone: 'local',\n    locales: [],\n    locale: '',\n    themeSystem: 'standard',\n    dragRevertDuration: 500,\n    dragScroll: true,\n    allDayMaintainDuration: false,\n    unselectAuto: true,\n    dropAccept: '*',\n    eventOrder: 'start,-duration,allDay,title',\n    dayPopoverFormat: { month: 'long', day: 'numeric', year: 'numeric' },\n    handleWindowResize: true,\n    windowResizeDelay: 100,\n    longPressDelay: 1000,\n    eventDragMinDistance: 5,\n    expandRows: false,\n    navLinks: false,\n    selectable: false,\n    eventMinHeight: 15,\n    eventMinWidth: 30,\n    eventShortHeight: 30,\n};\n// calendar listeners\n// ------------------\nvar CALENDAR_LISTENER_REFINERS = {\n    datesSet: identity,\n    eventsSet: identity,\n    eventAdd: identity,\n    eventChange: identity,\n    eventRemove: identity,\n    windowResize: identity,\n    eventClick: identity,\n    eventMouseEnter: identity,\n    eventMouseLeave: identity,\n    select: identity,\n    unselect: identity,\n    loading: identity,\n    // internal\n    _unmount: identity,\n    _beforeprint: identity,\n    _afterprint: identity,\n    _noEventDrop: identity,\n    _noEventResize: identity,\n    _resize: identity,\n    _scrollRequest: identity,\n};\n// calendar-specific options\n// -------------------------\nvar CALENDAR_OPTION_REFINERS = {\n    buttonText: identity,\n    buttonHints: identity,\n    views: identity,\n    plugins: identity,\n    initialEvents: identity,\n    events: identity,\n    eventSources: identity,\n};\nvar COMPLEX_OPTION_COMPARATORS = {\n    headerToolbar: isBoolComplexEqual,\n    footerToolbar: isBoolComplexEqual,\n    buttonText: isBoolComplexEqual,\n    buttonHints: isBoolComplexEqual,\n    buttonIcons: isBoolComplexEqual,\n};\nfunction isBoolComplexEqual(a, b) {\n    if (typeof a === 'object' && typeof b === 'object' && a && b) { // both non-null objects\n        return isPropsEqual(a, b);\n    }\n    return a === b;\n}\n// view-specific options\n// ---------------------\nvar VIEW_OPTION_REFINERS = {\n    type: String,\n    component: identity,\n    buttonText: String,\n    buttonTextKey: String,\n    dateProfileGeneratorClass: identity,\n    usesMinMaxTime: Boolean,\n    classNames: identity,\n    content: identity,\n    didMount: identity,\n    willUnmount: identity,\n};\n// util funcs\n// ----------------------------------------------------------------------------------------------------\nfunction mergeRawOptions(optionSets) {\n    return mergeProps(optionSets, COMPLEX_OPTION_COMPARATORS);\n}\nfunction refineProps(input, refiners) {\n    var refined = {};\n    var extra = {};\n    for (var propName in refiners) {\n        if (propName in input) {\n            refined[propName] = refiners[propName](input[propName]);\n        }\n    }\n    for (var propName in input) {\n        if (!(propName in refiners)) {\n            extra[propName] = input[propName];\n        }\n    }\n    return { refined: refined, extra: extra };\n}\nfunction identity(raw) {\n    return raw;\n}\n\nfunction parseEvents(rawEvents, eventSource, context, allowOpenRange) {\n    var eventStore = createEmptyEventStore();\n    var eventRefiners = buildEventRefiners(context);\n    for (var _i = 0, rawEvents_1 = rawEvents; _i < rawEvents_1.length; _i++) {\n        var rawEvent = rawEvents_1[_i];\n        var tuple = parseEvent(rawEvent, eventSource, context, allowOpenRange, eventRefiners);\n        if (tuple) {\n            eventTupleToStore(tuple, eventStore);\n        }\n    }\n    return eventStore;\n}\nfunction eventTupleToStore(tuple, eventStore) {\n    if (eventStore === void 0) { eventStore = createEmptyEventStore(); }\n    eventStore.defs[tuple.def.defId] = tuple.def;\n    if (tuple.instance) {\n        eventStore.instances[tuple.instance.instanceId] = tuple.instance;\n    }\n    return eventStore;\n}\n// retrieves events that have the same groupId as the instance specified by `instanceId`\n// or they are the same as the instance.\n// why might instanceId not be in the store? an event from another calendar?\nfunction getRelevantEvents(eventStore, instanceId) {\n    var instance = eventStore.instances[instanceId];\n    if (instance) {\n        var def_1 = eventStore.defs[instance.defId];\n        // get events/instances with same group\n        var newStore = filterEventStoreDefs(eventStore, function (lookDef) { return isEventDefsGrouped(def_1, lookDef); });\n        // add the original\n        // TODO: wish we could use eventTupleToStore or something like it\n        newStore.defs[def_1.defId] = def_1;\n        newStore.instances[instance.instanceId] = instance;\n        return newStore;\n    }\n    return createEmptyEventStore();\n}\nfunction isEventDefsGrouped(def0, def1) {\n    return Boolean(def0.groupId && def0.groupId === def1.groupId);\n}\nfunction createEmptyEventStore() {\n    return { defs: {}, instances: {} };\n}\nfunction mergeEventStores(store0, store1) {\n    return {\n        defs: __assign(__assign({}, store0.defs), store1.defs),\n        instances: __assign(__assign({}, store0.instances), store1.instances),\n    };\n}\nfunction filterEventStoreDefs(eventStore, filterFunc) {\n    var defs = filterHash(eventStore.defs, filterFunc);\n    var instances = filterHash(eventStore.instances, function (instance) { return (defs[instance.defId] // still exists?\n    ); });\n    return { defs: defs, instances: instances };\n}\nfunction excludeSubEventStore(master, sub) {\n    var defs = master.defs, instances = master.instances;\n    var filteredDefs = {};\n    var filteredInstances = {};\n    for (var defId in defs) {\n        if (!sub.defs[defId]) { // not explicitly excluded\n            filteredDefs[defId] = defs[defId];\n        }\n    }\n    for (var instanceId in instances) {\n        if (!sub.instances[instanceId] && // not explicitly excluded\n            filteredDefs[instances[instanceId].defId] // def wasn't filtered away\n        ) {\n            filteredInstances[instanceId] = instances[instanceId];\n        }\n    }\n    return {\n        defs: filteredDefs,\n        instances: filteredInstances,\n    };\n}\n\nfunction normalizeConstraint(input, context) {\n    if (Array.isArray(input)) {\n        return parseEvents(input, null, context, true); // allowOpenRange=true\n    }\n    if (typeof input === 'object' && input) { // non-null object\n        return parseEvents([input], null, context, true); // allowOpenRange=true\n    }\n    if (input != null) {\n        return String(input);\n    }\n    return null;\n}\n\nfunction parseClassNames(raw) {\n    if (Array.isArray(raw)) {\n        return raw;\n    }\n    if (typeof raw === 'string') {\n        return raw.split(/\\s+/);\n    }\n    return [];\n}\n\n// TODO: better called \"EventSettings\" or \"EventConfig\"\n// TODO: move this file into structs\n// TODO: separate constraint/overlap/allow, because selection uses only that, not other props\nvar EVENT_UI_REFINERS = {\n    display: String,\n    editable: Boolean,\n    startEditable: Boolean,\n    durationEditable: Boolean,\n    constraint: identity,\n    overlap: identity,\n    allow: identity,\n    className: parseClassNames,\n    classNames: parseClassNames,\n    color: String,\n    backgroundColor: String,\n    borderColor: String,\n    textColor: String,\n};\nvar EMPTY_EVENT_UI = {\n    display: null,\n    startEditable: null,\n    durationEditable: null,\n    constraints: [],\n    overlap: null,\n    allows: [],\n    backgroundColor: '',\n    borderColor: '',\n    textColor: '',\n    classNames: [],\n};\nfunction createEventUi(refined, context) {\n    var constraint = normalizeConstraint(refined.constraint, context);\n    return {\n        display: refined.display || null,\n        startEditable: refined.startEditable != null ? refined.startEditable : refined.editable,\n        durationEditable: refined.durationEditable != null ? refined.durationEditable : refined.editable,\n        constraints: constraint != null ? [constraint] : [],\n        overlap: refined.overlap != null ? refined.overlap : null,\n        allows: refined.allow != null ? [refined.allow] : [],\n        backgroundColor: refined.backgroundColor || refined.color || '',\n        borderColor: refined.borderColor || refined.color || '',\n        textColor: refined.textColor || '',\n        classNames: (refined.className || []).concat(refined.classNames || []), // join singular and plural\n    };\n}\n// TODO: prevent against problems with <2 args!\nfunction combineEventUis(uis) {\n    return uis.reduce(combineTwoEventUis, EMPTY_EVENT_UI);\n}\nfunction combineTwoEventUis(item0, item1) {\n    return {\n        display: item1.display != null ? item1.display : item0.display,\n        startEditable: item1.startEditable != null ? item1.startEditable : item0.startEditable,\n        durationEditable: item1.durationEditable != null ? item1.durationEditable : item0.durationEditable,\n        constraints: item0.constraints.concat(item1.constraints),\n        overlap: typeof item1.overlap === 'boolean' ? item1.overlap : item0.overlap,\n        allows: item0.allows.concat(item1.allows),\n        backgroundColor: item1.backgroundColor || item0.backgroundColor,\n        borderColor: item1.borderColor || item0.borderColor,\n        textColor: item1.textColor || item0.textColor,\n        classNames: item0.classNames.concat(item1.classNames),\n    };\n}\n\nvar EVENT_NON_DATE_REFINERS = {\n    id: String,\n    groupId: String,\n    title: String,\n    url: String,\n    interactive: Boolean,\n};\nvar EVENT_DATE_REFINERS = {\n    start: identity,\n    end: identity,\n    date: identity,\n    allDay: Boolean,\n};\nvar EVENT_REFINERS = __assign(__assign(__assign({}, EVENT_NON_DATE_REFINERS), EVENT_DATE_REFINERS), { extendedProps: identity });\nfunction parseEvent(raw, eventSource, context, allowOpenRange, refiners) {\n    if (refiners === void 0) { refiners = buildEventRefiners(context); }\n    var _a = refineEventDef(raw, context, refiners), refined = _a.refined, extra = _a.extra;\n    var defaultAllDay = computeIsDefaultAllDay(eventSource, context);\n    var recurringRes = parseRecurring(refined, defaultAllDay, context.dateEnv, context.pluginHooks.recurringTypes);\n    if (recurringRes) {\n        var def = parseEventDef(refined, extra, eventSource ? eventSource.sourceId : '', recurringRes.allDay, Boolean(recurringRes.duration), context);\n        def.recurringDef = {\n            typeId: recurringRes.typeId,\n            typeData: recurringRes.typeData,\n            duration: recurringRes.duration,\n        };\n        return { def: def, instance: null };\n    }\n    var singleRes = parseSingle(refined, defaultAllDay, context, allowOpenRange);\n    if (singleRes) {\n        var def = parseEventDef(refined, extra, eventSource ? eventSource.sourceId : '', singleRes.allDay, singleRes.hasEnd, context);\n        var instance = createEventInstance(def.defId, singleRes.range, singleRes.forcedStartTzo, singleRes.forcedEndTzo);\n        return { def: def, instance: instance };\n    }\n    return null;\n}\nfunction refineEventDef(raw, context, refiners) {\n    if (refiners === void 0) { refiners = buildEventRefiners(context); }\n    return refineProps(raw, refiners);\n}\nfunction buildEventRefiners(context) {\n    return __assign(__assign(__assign({}, EVENT_UI_REFINERS), EVENT_REFINERS), context.pluginHooks.eventRefiners);\n}\n/*\nWill NOT populate extendedProps with the leftover properties.\nWill NOT populate date-related props.\n*/\nfunction parseEventDef(refined, extra, sourceId, allDay, hasEnd, context) {\n    var def = {\n        title: refined.title || '',\n        groupId: refined.groupId || '',\n        publicId: refined.id || '',\n        url: refined.url || '',\n        recurringDef: null,\n        defId: guid(),\n        sourceId: sourceId,\n        allDay: allDay,\n        hasEnd: hasEnd,\n        interactive: refined.interactive,\n        ui: createEventUi(refined, context),\n        extendedProps: __assign(__assign({}, (refined.extendedProps || {})), extra),\n    };\n    for (var _i = 0, _a = context.pluginHooks.eventDefMemberAdders; _i < _a.length; _i++) {\n        var memberAdder = _a[_i];\n        __assign(def, memberAdder(refined));\n    }\n    // help out EventApi from having user modify props\n    Object.freeze(def.ui.classNames);\n    Object.freeze(def.extendedProps);\n    return def;\n}\nfunction parseSingle(refined, defaultAllDay, context, allowOpenRange) {\n    var allDay = refined.allDay;\n    var startMeta;\n    var startMarker = null;\n    var hasEnd = false;\n    var endMeta;\n    var endMarker = null;\n    var startInput = refined.start != null ? refined.start : refined.date;\n    startMeta = context.dateEnv.createMarkerMeta(startInput);\n    if (startMeta) {\n        startMarker = startMeta.marker;\n    }\n    else if (!allowOpenRange) {\n        return null;\n    }\n    if (refined.end != null) {\n        endMeta = context.dateEnv.createMarkerMeta(refined.end);\n    }\n    if (allDay == null) {\n        if (defaultAllDay != null) {\n            allDay = defaultAllDay;\n        }\n        else {\n            // fall back to the date props LAST\n            allDay = (!startMeta || startMeta.isTimeUnspecified) &&\n                (!endMeta || endMeta.isTimeUnspecified);\n        }\n    }\n    if (allDay && startMarker) {\n        startMarker = startOfDay(startMarker);\n    }\n    if (endMeta) {\n        endMarker = endMeta.marker;\n        if (allDay) {\n            endMarker = startOfDay(endMarker);\n        }\n        if (startMarker && endMarker <= startMarker) {\n            endMarker = null;\n        }\n    }\n    if (endMarker) {\n        hasEnd = true;\n    }\n    else if (!allowOpenRange) {\n        hasEnd = context.options.forceEventDuration || false;\n        endMarker = context.dateEnv.add(startMarker, allDay ?\n            context.options.defaultAllDayEventDuration :\n            context.options.defaultTimedEventDuration);\n    }\n    return {\n        allDay: allDay,\n        hasEnd: hasEnd,\n        range: { start: startMarker, end: endMarker },\n        forcedStartTzo: startMeta ? startMeta.forcedTzo : null,\n        forcedEndTzo: endMeta ? endMeta.forcedTzo : null,\n    };\n}\nfunction computeIsDefaultAllDay(eventSource, context) {\n    var res = null;\n    if (eventSource) {\n        res = eventSource.defaultAllDay;\n    }\n    if (res == null) {\n        res = context.options.defaultAllDay;\n    }\n    return res;\n}\n\n/* Date stuff that doesn't belong in datelib core\n----------------------------------------------------------------------------------------------------------------------*/\n// given a timed range, computes an all-day range that has the same exact duration,\n// but whose start time is aligned with the start of the day.\nfunction computeAlignedDayRange(timedRange) {\n    var dayCnt = Math.floor(diffDays(timedRange.start, timedRange.end)) || 1;\n    var start = startOfDay(timedRange.start);\n    var end = addDays(start, dayCnt);\n    return { start: start, end: end };\n}\n// given a timed range, computes an all-day range based on how for the end date bleeds into the next day\n// TODO: give nextDayThreshold a default arg\nfunction computeVisibleDayRange(timedRange, nextDayThreshold) {\n    if (nextDayThreshold === void 0) { nextDayThreshold = createDuration(0); }\n    var startDay = null;\n    var endDay = null;\n    if (timedRange.end) {\n        endDay = startOfDay(timedRange.end);\n        var endTimeMS = timedRange.end.valueOf() - endDay.valueOf(); // # of milliseconds into `endDay`\n        // If the end time is actually inclusively part of the next day and is equal to or\n        // beyond the next day threshold, adjust the end to be the exclusive end of `endDay`.\n        // Otherwise, leaving it as inclusive will cause it to exclude `endDay`.\n        if (endTimeMS && endTimeMS >= asRoughMs(nextDayThreshold)) {\n            endDay = addDays(endDay, 1);\n        }\n    }\n    if (timedRange.start) {\n        startDay = startOfDay(timedRange.start); // the beginning of the day the range starts\n        // If end is within `startDay` but not past nextDayThreshold, assign the default duration of one day.\n        if (endDay && endDay <= startDay) {\n            endDay = addDays(startDay, 1);\n        }\n    }\n    return { start: startDay, end: endDay };\n}\n// spans from one day into another?\nfunction isMultiDayRange(range) {\n    var visibleRange = computeVisibleDayRange(range);\n    return diffDays(visibleRange.start, visibleRange.end) > 1;\n}\nfunction diffDates(date0, date1, dateEnv, largeUnit) {\n    if (largeUnit === 'year') {\n        return createDuration(dateEnv.diffWholeYears(date0, date1), 'year');\n    }\n    if (largeUnit === 'month') {\n        return createDuration(dateEnv.diffWholeMonths(date0, date1), 'month');\n    }\n    return diffDayAndTime(date0, date1); // returns a duration\n}\n\nfunction parseRange(input, dateEnv) {\n    var start = null;\n    var end = null;\n    if (input.start) {\n        start = dateEnv.createMarker(input.start);\n    }\n    if (input.end) {\n        end = dateEnv.createMarker(input.end);\n    }\n    if (!start && !end) {\n        return null;\n    }\n    if (start && end && end < start) {\n        return null;\n    }\n    return { start: start, end: end };\n}\n// SIDE-EFFECT: will mutate ranges.\n// Will return a new array result.\nfunction invertRanges(ranges, constraintRange) {\n    var invertedRanges = [];\n    var start = constraintRange.start; // the end of the previous range. the start of the new range\n    var i;\n    var dateRange;\n    // ranges need to be in order. required for our date-walking algorithm\n    ranges.sort(compareRanges);\n    for (i = 0; i < ranges.length; i += 1) {\n        dateRange = ranges[i];\n        // add the span of time before the event (if there is any)\n        if (dateRange.start > start) { // compare millisecond time (skip any ambig logic)\n            invertedRanges.push({ start: start, end: dateRange.start });\n        }\n        if (dateRange.end > start) {\n            start = dateRange.end;\n        }\n    }\n    // add the span of time after the last event (if there is any)\n    if (start < constraintRange.end) { // compare millisecond time (skip any ambig logic)\n        invertedRanges.push({ start: start, end: constraintRange.end });\n    }\n    return invertedRanges;\n}\nfunction compareRanges(range0, range1) {\n    return range0.start.valueOf() - range1.start.valueOf(); // earlier ranges go first\n}\nfunction intersectRanges(range0, range1) {\n    var start = range0.start, end = range0.end;\n    var newRange = null;\n    if (range1.start !== null) {\n        if (start === null) {\n            start = range1.start;\n        }\n        else {\n            start = new Date(Math.max(start.valueOf(), range1.start.valueOf()));\n        }\n    }\n    if (range1.end != null) {\n        if (end === null) {\n            end = range1.end;\n        }\n        else {\n            end = new Date(Math.min(end.valueOf(), range1.end.valueOf()));\n        }\n    }\n    if (start === null || end === null || start < end) {\n        newRange = { start: start, end: end };\n    }\n    return newRange;\n}\nfunction rangesEqual(range0, range1) {\n    return (range0.start === null ? null : range0.start.valueOf()) === (range1.start === null ? null : range1.start.valueOf()) &&\n        (range0.end === null ? null : range0.end.valueOf()) === (range1.end === null ? null : range1.end.valueOf());\n}\nfunction rangesIntersect(range0, range1) {\n    return (range0.end === null || range1.start === null || range0.end > range1.start) &&\n        (range0.start === null || range1.end === null || range0.start < range1.end);\n}\nfunction rangeContainsRange(outerRange, innerRange) {\n    return (outerRange.start === null || (innerRange.start !== null && innerRange.start >= outerRange.start)) &&\n        (outerRange.end === null || (innerRange.end !== null && innerRange.end <= outerRange.end));\n}\nfunction rangeContainsMarker(range, date) {\n    return (range.start === null || date >= range.start) &&\n        (range.end === null || date < range.end);\n}\n// If the given date is not within the given range, move it inside.\n// (If it's past the end, make it one millisecond before the end).\nfunction constrainMarkerToRange(date, range) {\n    if (range.start != null && date < range.start) {\n        return range.start;\n    }\n    if (range.end != null && date >= range.end) {\n        return new Date(range.end.valueOf() - 1);\n    }\n    return date;\n}\n\n/*\nSpecifying nextDayThreshold signals that all-day ranges should be sliced.\n*/\nfunction sliceEventStore(eventStore, eventUiBases, framingRange, nextDayThreshold) {\n    var inverseBgByGroupId = {};\n    var inverseBgByDefId = {};\n    var defByGroupId = {};\n    var bgRanges = [];\n    var fgRanges = [];\n    var eventUis = compileEventUis(eventStore.defs, eventUiBases);\n    for (var defId in eventStore.defs) {\n        var def = eventStore.defs[defId];\n        var ui = eventUis[def.defId];\n        if (ui.display === 'inverse-background') {\n            if (def.groupId) {\n                inverseBgByGroupId[def.groupId] = [];\n                if (!defByGroupId[def.groupId]) {\n                    defByGroupId[def.groupId] = def;\n                }\n            }\n            else {\n                inverseBgByDefId[defId] = [];\n            }\n        }\n    }\n    for (var instanceId in eventStore.instances) {\n        var instance = eventStore.instances[instanceId];\n        var def = eventStore.defs[instance.defId];\n        var ui = eventUis[def.defId];\n        var origRange = instance.range;\n        var normalRange = (!def.allDay && nextDayThreshold) ?\n            computeVisibleDayRange(origRange, nextDayThreshold) :\n            origRange;\n        var slicedRange = intersectRanges(normalRange, framingRange);\n        if (slicedRange) {\n            if (ui.display === 'inverse-background') {\n                if (def.groupId) {\n                    inverseBgByGroupId[def.groupId].push(slicedRange);\n                }\n                else {\n                    inverseBgByDefId[instance.defId].push(slicedRange);\n                }\n            }\n            else if (ui.display !== 'none') {\n                (ui.display === 'background' ? bgRanges : fgRanges).push({\n                    def: def,\n                    ui: ui,\n                    instance: instance,\n                    range: slicedRange,\n                    isStart: normalRange.start && normalRange.start.valueOf() === slicedRange.start.valueOf(),\n                    isEnd: normalRange.end && normalRange.end.valueOf() === slicedRange.end.valueOf(),\n                });\n            }\n        }\n    }\n    for (var groupId in inverseBgByGroupId) { // BY GROUP\n        var ranges = inverseBgByGroupId[groupId];\n        var invertedRanges = invertRanges(ranges, framingRange);\n        for (var _i = 0, invertedRanges_1 = invertedRanges; _i < invertedRanges_1.length; _i++) {\n            var invertedRange = invertedRanges_1[_i];\n            var def = defByGroupId[groupId];\n            var ui = eventUis[def.defId];\n            bgRanges.push({\n                def: def,\n                ui: ui,\n                instance: null,\n                range: invertedRange,\n                isStart: false,\n                isEnd: false,\n            });\n        }\n    }\n    for (var defId in inverseBgByDefId) {\n        var ranges = inverseBgByDefId[defId];\n        var invertedRanges = invertRanges(ranges, framingRange);\n        for (var _a = 0, invertedRanges_2 = invertedRanges; _a < invertedRanges_2.length; _a++) {\n            var invertedRange = invertedRanges_2[_a];\n            bgRanges.push({\n                def: eventStore.defs[defId],\n                ui: eventUis[defId],\n                instance: null,\n                range: invertedRange,\n                isStart: false,\n                isEnd: false,\n            });\n        }\n    }\n    return { bg: bgRanges, fg: fgRanges };\n}\nfunction hasBgRendering(def) {\n    return def.ui.display === 'background' || def.ui.display === 'inverse-background';\n}\nfunction setElSeg(el, seg) {\n    el.fcSeg = seg;\n}\nfunction getElSeg(el) {\n    return el.fcSeg ||\n        el.parentNode.fcSeg || // for the harness\n        null;\n}\n// event ui computation\nfunction compileEventUis(eventDefs, eventUiBases) {\n    return mapHash(eventDefs, function (eventDef) { return compileEventUi(eventDef, eventUiBases); });\n}\nfunction compileEventUi(eventDef, eventUiBases) {\n    var uis = [];\n    if (eventUiBases['']) {\n        uis.push(eventUiBases['']);\n    }\n    if (eventUiBases[eventDef.defId]) {\n        uis.push(eventUiBases[eventDef.defId]);\n    }\n    uis.push(eventDef.ui);\n    return combineEventUis(uis);\n}\nfunction sortEventSegs(segs, eventOrderSpecs) {\n    var objs = segs.map(buildSegCompareObj);\n    objs.sort(function (obj0, obj1) { return compareByFieldSpecs(obj0, obj1, eventOrderSpecs); });\n    return objs.map(function (c) { return c._seg; });\n}\n// returns a object with all primitive props that can be compared\nfunction buildSegCompareObj(seg) {\n    var eventRange = seg.eventRange;\n    var eventDef = eventRange.def;\n    var range = eventRange.instance ? eventRange.instance.range : eventRange.range;\n    var start = range.start ? range.start.valueOf() : 0; // TODO: better support for open-range events\n    var end = range.end ? range.end.valueOf() : 0; // \"\n    return __assign(__assign(__assign({}, eventDef.extendedProps), eventDef), { id: eventDef.publicId, start: start,\n        end: end, duration: end - start, allDay: Number(eventDef.allDay), _seg: seg });\n}\nfunction computeSegDraggable(seg, context) {\n    var pluginHooks = context.pluginHooks;\n    var transformers = pluginHooks.isDraggableTransformers;\n    var _a = seg.eventRange, def = _a.def, ui = _a.ui;\n    var val = ui.startEditable;\n    for (var _i = 0, transformers_1 = transformers; _i < transformers_1.length; _i++) {\n        var transformer = transformers_1[_i];\n        val = transformer(val, def, ui, context);\n    }\n    return val;\n}\nfunction computeSegStartResizable(seg, context) {\n    return seg.isStart && seg.eventRange.ui.durationEditable && context.options.eventResizableFromStart;\n}\nfunction computeSegEndResizable(seg, context) {\n    return seg.isEnd && seg.eventRange.ui.durationEditable;\n}\nfunction buildSegTimeText(seg, timeFormat, context, defaultDisplayEventTime, // defaults to true\ndefaultDisplayEventEnd, // defaults to true\nstartOverride, endOverride) {\n    var dateEnv = context.dateEnv, options = context.options;\n    var displayEventTime = options.displayEventTime, displayEventEnd = options.displayEventEnd;\n    var eventDef = seg.eventRange.def;\n    var eventInstance = seg.eventRange.instance;\n    if (displayEventTime == null) {\n        displayEventTime = defaultDisplayEventTime !== false;\n    }\n    if (displayEventEnd == null) {\n        displayEventEnd = defaultDisplayEventEnd !== false;\n    }\n    var wholeEventStart = eventInstance.range.start;\n    var wholeEventEnd = eventInstance.range.end;\n    var segStart = startOverride || seg.start || seg.eventRange.range.start;\n    var segEnd = endOverride || seg.end || seg.eventRange.range.end;\n    var isStartDay = startOfDay(wholeEventStart).valueOf() === startOfDay(segStart).valueOf();\n    var isEndDay = startOfDay(addMs(wholeEventEnd, -1)).valueOf() === startOfDay(addMs(segEnd, -1)).valueOf();\n    if (displayEventTime && !eventDef.allDay && (isStartDay || isEndDay)) {\n        segStart = isStartDay ? wholeEventStart : segStart;\n        segEnd = isEndDay ? wholeEventEnd : segEnd;\n        if (displayEventEnd && eventDef.hasEnd) {\n            return dateEnv.formatRange(segStart, segEnd, timeFormat, {\n                forcedStartTzo: startOverride ? null : eventInstance.forcedStartTzo,\n                forcedEndTzo: endOverride ? null : eventInstance.forcedEndTzo,\n            });\n        }\n        return dateEnv.format(segStart, timeFormat, {\n            forcedTzo: startOverride ? null : eventInstance.forcedStartTzo, // nooooo, same\n        });\n    }\n    return '';\n}\nfunction getSegMeta(seg, todayRange, nowDate) {\n    var segRange = seg.eventRange.range;\n    return {\n        isPast: segRange.end < (nowDate || todayRange.start),\n        isFuture: segRange.start >= (nowDate || todayRange.end),\n        isToday: todayRange && rangeContainsMarker(todayRange, segRange.start),\n    };\n}\nfunction getEventClassNames(props) {\n    var classNames = ['fc-event'];\n    if (props.isMirror) {\n        classNames.push('fc-event-mirror');\n    }\n    if (props.isDraggable) {\n        classNames.push('fc-event-draggable');\n    }\n    if (props.isStartResizable || props.isEndResizable) {\n        classNames.push('fc-event-resizable');\n    }\n    if (props.isDragging) {\n        classNames.push('fc-event-dragging');\n    }\n    if (props.isResizing) {\n        classNames.push('fc-event-resizing');\n    }\n    if (props.isSelected) {\n        classNames.push('fc-event-selected');\n    }\n    if (props.isStart) {\n        classNames.push('fc-event-start');\n    }\n    if (props.isEnd) {\n        classNames.push('fc-event-end');\n    }\n    if (props.isPast) {\n        classNames.push('fc-event-past');\n    }\n    if (props.isToday) {\n        classNames.push('fc-event-today');\n    }\n    if (props.isFuture) {\n        classNames.push('fc-event-future');\n    }\n    return classNames;\n}\nfunction buildEventRangeKey(eventRange) {\n    return eventRange.instance\n        ? eventRange.instance.instanceId\n        : eventRange.def.defId + \":\" + eventRange.range.start.toISOString();\n    // inverse-background events don't have specific instances. TODO: better solution\n}\nfunction getSegAnchorAttrs(seg, context) {\n    var _a = seg.eventRange, def = _a.def, instance = _a.instance;\n    var url = def.url;\n    if (url) {\n        return { href: url };\n    }\n    var emitter = context.emitter, options = context.options;\n    var eventInteractive = options.eventInteractive;\n    if (eventInteractive == null) {\n        eventInteractive = def.interactive;\n        if (eventInteractive == null) {\n            eventInteractive = Boolean(emitter.hasHandlers('eventClick'));\n        }\n    }\n    // mock what happens in EventClicking\n    if (eventInteractive) {\n        // only attach keyboard-related handlers because click handler is already done in EventClicking\n        return createAriaKeyboardAttrs(function (ev) {\n            emitter.trigger('eventClick', {\n                el: ev.target,\n                event: new EventApi(context, def, instance),\n                jsEvent: ev,\n                view: context.viewApi,\n            });\n        });\n    }\n    return {};\n}\n\nvar STANDARD_PROPS = {\n    start: identity,\n    end: identity,\n    allDay: Boolean,\n};\nfunction parseDateSpan(raw, dateEnv, defaultDuration) {\n    var span = parseOpenDateSpan(raw, dateEnv);\n    var range = span.range;\n    if (!range.start) {\n        return null;\n    }\n    if (!range.end) {\n        if (defaultDuration == null) {\n            return null;\n        }\n        range.end = dateEnv.add(range.start, defaultDuration);\n    }\n    return span;\n}\n/*\nTODO: somehow combine with parseRange?\nWill return null if the start/end props were present but parsed invalidly.\n*/\nfunction parseOpenDateSpan(raw, dateEnv) {\n    var _a = refineProps(raw, STANDARD_PROPS), standardProps = _a.refined, extra = _a.extra;\n    var startMeta = standardProps.start ? dateEnv.createMarkerMeta(standardProps.start) : null;\n    var endMeta = standardProps.end ? dateEnv.createMarkerMeta(standardProps.end) : null;\n    var allDay = standardProps.allDay;\n    if (allDay == null) {\n        allDay = (startMeta && startMeta.isTimeUnspecified) &&\n            (!endMeta || endMeta.isTimeUnspecified);\n    }\n    return __assign({ range: {\n            start: startMeta ? startMeta.marker : null,\n            end: endMeta ? endMeta.marker : null,\n        }, allDay: allDay }, extra);\n}\nfunction isDateSpansEqual(span0, span1) {\n    return rangesEqual(span0.range, span1.range) &&\n        span0.allDay === span1.allDay &&\n        isSpanPropsEqual(span0, span1);\n}\n// the NON-DATE-RELATED props\nfunction isSpanPropsEqual(span0, span1) {\n    for (var propName in span1) {\n        if (propName !== 'range' && propName !== 'allDay') {\n            if (span0[propName] !== span1[propName]) {\n                return false;\n            }\n        }\n    }\n    // are there any props that span0 has that span1 DOESN'T have?\n    // both have range/allDay, so no need to special-case.\n    for (var propName in span0) {\n        if (!(propName in span1)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction buildDateSpanApi(span, dateEnv) {\n    return __assign(__assign({}, buildRangeApi(span.range, dateEnv, span.allDay)), { allDay: span.allDay });\n}\nfunction buildRangeApiWithTimeZone(range, dateEnv, omitTime) {\n    return __assign(__assign({}, buildRangeApi(range, dateEnv, omitTime)), { timeZone: dateEnv.timeZone });\n}\nfunction buildRangeApi(range, dateEnv, omitTime) {\n    return {\n        start: dateEnv.toDate(range.start),\n        end: dateEnv.toDate(range.end),\n        startStr: dateEnv.formatIso(range.start, { omitTime: omitTime }),\n        endStr: dateEnv.formatIso(range.end, { omitTime: omitTime }),\n    };\n}\nfunction fabricateEventRange(dateSpan, eventUiBases, context) {\n    var res = refineEventDef({ editable: false }, context);\n    var def = parseEventDef(res.refined, res.extra, '', // sourceId\n    dateSpan.allDay, true, // hasEnd\n    context);\n    return {\n        def: def,\n        ui: compileEventUi(def, eventUiBases),\n        instance: createEventInstance(def.defId, dateSpan.range),\n        range: dateSpan.range,\n        isStart: true,\n        isEnd: true,\n    };\n}\n\nfunction triggerDateSelect(selection, pev, context) {\n    context.emitter.trigger('select', __assign(__assign({}, buildDateSpanApiWithContext(selection, context)), { jsEvent: pev ? pev.origEvent : null, view: context.viewApi || context.calendarApi.view }));\n}\nfunction triggerDateUnselect(pev, context) {\n    context.emitter.trigger('unselect', {\n        jsEvent: pev ? pev.origEvent : null,\n        view: context.viewApi || context.calendarApi.view,\n    });\n}\nfunction buildDateSpanApiWithContext(dateSpan, context) {\n    var props = {};\n    for (var _i = 0, _a = context.pluginHooks.dateSpanTransforms; _i < _a.length; _i++) {\n        var transform = _a[_i];\n        __assign(props, transform(dateSpan, context));\n    }\n    __assign(props, buildDateSpanApi(dateSpan, context.dateEnv));\n    return props;\n}\n// Given an event's allDay status and start date, return what its fallback end date should be.\n// TODO: rename to computeDefaultEventEnd\nfunction getDefaultEventEnd(allDay, marker, context) {\n    var dateEnv = context.dateEnv, options = context.options;\n    var end = marker;\n    if (allDay) {\n        end = startOfDay(end);\n        end = dateEnv.add(end, options.defaultAllDayEventDuration);\n    }\n    else {\n        end = dateEnv.add(end, options.defaultTimedEventDuration);\n    }\n    return end;\n}\n\n// applies the mutation to ALL defs/instances within the event store\nfunction applyMutationToEventStore(eventStore, eventConfigBase, mutation, context) {\n    var eventConfigs = compileEventUis(eventStore.defs, eventConfigBase);\n    var dest = createEmptyEventStore();\n    for (var defId in eventStore.defs) {\n        var def = eventStore.defs[defId];\n        dest.defs[defId] = applyMutationToEventDef(def, eventConfigs[defId], mutation, context);\n    }\n    for (var instanceId in eventStore.instances) {\n        var instance = eventStore.instances[instanceId];\n        var def = dest.defs[instance.defId]; // important to grab the newly modified def\n        dest.instances[instanceId] = applyMutationToEventInstance(instance, def, eventConfigs[instance.defId], mutation, context);\n    }\n    return dest;\n}\nfunction applyMutationToEventDef(eventDef, eventConfig, mutation, context) {\n    var standardProps = mutation.standardProps || {};\n    // if hasEnd has not been specified, guess a good value based on deltas.\n    // if duration will change, there's no way the default duration will persist,\n    // and thus, we need to mark the event as having a real end\n    if (standardProps.hasEnd == null &&\n        eventConfig.durationEditable &&\n        (mutation.startDelta || mutation.endDelta)) {\n        standardProps.hasEnd = true; // TODO: is this mutation okay?\n    }\n    var copy = __assign(__assign(__assign({}, eventDef), standardProps), { ui: __assign(__assign({}, eventDef.ui), standardProps.ui) });\n    if (mutation.extendedProps) {\n        copy.extendedProps = __assign(__assign({}, copy.extendedProps), mutation.extendedProps);\n    }\n    for (var _i = 0, _a = context.pluginHooks.eventDefMutationAppliers; _i < _a.length; _i++) {\n        var applier = _a[_i];\n        applier(copy, mutation, context);\n    }\n    if (!copy.hasEnd && context.options.forceEventDuration) {\n        copy.hasEnd = true;\n    }\n    return copy;\n}\nfunction applyMutationToEventInstance(eventInstance, eventDef, // must first be modified by applyMutationToEventDef\neventConfig, mutation, context) {\n    var dateEnv = context.dateEnv;\n    var forceAllDay = mutation.standardProps && mutation.standardProps.allDay === true;\n    var clearEnd = mutation.standardProps && mutation.standardProps.hasEnd === false;\n    var copy = __assign({}, eventInstance);\n    if (forceAllDay) {\n        copy.range = computeAlignedDayRange(copy.range);\n    }\n    if (mutation.datesDelta && eventConfig.startEditable) {\n        copy.range = {\n            start: dateEnv.add(copy.range.start, mutation.datesDelta),\n            end: dateEnv.add(copy.range.end, mutation.datesDelta),\n        };\n    }\n    if (mutation.startDelta && eventConfig.durationEditable) {\n        copy.range = {\n            start: dateEnv.add(copy.range.start, mutation.startDelta),\n            end: copy.range.end,\n        };\n    }\n    if (mutation.endDelta && eventConfig.durationEditable) {\n        copy.range = {\n            start: copy.range.start,\n            end: dateEnv.add(copy.range.end, mutation.endDelta),\n        };\n    }\n    if (clearEnd) {\n        copy.range = {\n            start: copy.range.start,\n            end: getDefaultEventEnd(eventDef.allDay, copy.range.start, context),\n        };\n    }\n    // in case event was all-day but the supplied deltas were not\n    // better util for this?\n    if (eventDef.allDay) {\n        copy.range = {\n            start: startOfDay(copy.range.start),\n            end: startOfDay(copy.range.end),\n        };\n    }\n    // handle invalid durations\n    if (copy.range.end < copy.range.start) {\n        copy.range.end = getDefaultEventEnd(eventDef.allDay, copy.range.start, context);\n    }\n    return copy;\n}\n\n// no public types yet. when there are, export from:\n// import {} from './api-type-deps'\nvar ViewApi = /** @class */ (function () {\n    function ViewApi(type, getCurrentData, dateEnv) {\n        this.type = type;\n        this.getCurrentData = getCurrentData;\n        this.dateEnv = dateEnv;\n    }\n    Object.defineProperty(ViewApi.prototype, \"calendar\", {\n        get: function () {\n            return this.getCurrentData().calendarApi;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ViewApi.prototype, \"title\", {\n        get: function () {\n            return this.getCurrentData().viewTitle;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ViewApi.prototype, \"activeStart\", {\n        get: function () {\n            return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ViewApi.prototype, \"activeEnd\", {\n        get: function () {\n            return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ViewApi.prototype, \"currentStart\", {\n        get: function () {\n            return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ViewApi.prototype, \"currentEnd\", {\n        get: function () {\n            return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ViewApi.prototype.getOption = function (name) {\n        return this.getCurrentData().options[name]; // are the view-specific options\n    };\n    return ViewApi;\n}());\n\nvar EVENT_SOURCE_REFINERS = {\n    id: String,\n    defaultAllDay: Boolean,\n    url: String,\n    format: String,\n    events: identity,\n    eventDataTransform: identity,\n    // for any network-related sources\n    success: identity,\n    failure: identity,\n};\nfunction parseEventSource(raw, context, refiners) {\n    if (refiners === void 0) { refiners = buildEventSourceRefiners(context); }\n    var rawObj;\n    if (typeof raw === 'string') {\n        rawObj = { url: raw };\n    }\n    else if (typeof raw === 'function' || Array.isArray(raw)) {\n        rawObj = { events: raw };\n    }\n    else if (typeof raw === 'object' && raw) { // not null\n        rawObj = raw;\n    }\n    if (rawObj) {\n        var _a = refineProps(rawObj, refiners), refined = _a.refined, extra = _a.extra;\n        var metaRes = buildEventSourceMeta(refined, context);\n        if (metaRes) {\n            return {\n                _raw: raw,\n                isFetching: false,\n                latestFetchId: '',\n                fetchRange: null,\n                defaultAllDay: refined.defaultAllDay,\n                eventDataTransform: refined.eventDataTransform,\n                success: refined.success,\n                failure: refined.failure,\n                publicId: refined.id || '',\n                sourceId: guid(),\n                sourceDefId: metaRes.sourceDefId,\n                meta: metaRes.meta,\n                ui: createEventUi(refined, context),\n                extendedProps: extra,\n            };\n        }\n    }\n    return null;\n}\nfunction buildEventSourceRefiners(context) {\n    return __assign(__assign(__assign({}, EVENT_UI_REFINERS), EVENT_SOURCE_REFINERS), context.pluginHooks.eventSourceRefiners);\n}\nfunction buildEventSourceMeta(raw, context) {\n    var defs = context.pluginHooks.eventSourceDefs;\n    for (var i = defs.length - 1; i >= 0; i -= 1) { // later-added plugins take precedence\n        var def = defs[i];\n        var meta = def.parseMeta(raw);\n        if (meta) {\n            return { sourceDefId: i, meta: meta };\n        }\n    }\n    return null;\n}\n\nfunction reduceCurrentDate(currentDate, action) {\n    switch (action.type) {\n        case 'CHANGE_DATE':\n            return action.dateMarker;\n        default:\n            return currentDate;\n    }\n}\nfunction getInitialDate(options, dateEnv) {\n    var initialDateInput = options.initialDate;\n    // compute the initial ambig-timezone date\n    if (initialDateInput != null) {\n        return dateEnv.createMarker(initialDateInput);\n    }\n    return getNow(options.now, dateEnv); // getNow already returns unzoned\n}\nfunction getNow(nowInput, dateEnv) {\n    if (typeof nowInput === 'function') {\n        nowInput = nowInput();\n    }\n    if (nowInput == null) {\n        return dateEnv.createNowMarker();\n    }\n    return dateEnv.createMarker(nowInput);\n}\n\nvar CalendarApi = /** @class */ (function () {\n    function CalendarApi() {\n    }\n    CalendarApi.prototype.getCurrentData = function () {\n        return this.currentDataManager.getCurrentData();\n    };\n    CalendarApi.prototype.dispatch = function (action) {\n        return this.currentDataManager.dispatch(action);\n    };\n    Object.defineProperty(CalendarApi.prototype, \"view\", {\n        get: function () { return this.getCurrentData().viewApi; } // for public API\n        ,\n        enumerable: false,\n        configurable: true\n    });\n    CalendarApi.prototype.batchRendering = function (callback) {\n        callback();\n    };\n    CalendarApi.prototype.updateSize = function () {\n        this.trigger('_resize', true);\n    };\n    // Options\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarApi.prototype.setOption = function (name, val) {\n        this.dispatch({\n            type: 'SET_OPTION',\n            optionName: name,\n            rawOptionValue: val,\n        });\n    };\n    CalendarApi.prototype.getOption = function (name) {\n        return this.currentDataManager.currentCalendarOptionsInput[name];\n    };\n    CalendarApi.prototype.getAvailableLocaleCodes = function () {\n        return Object.keys(this.getCurrentData().availableRawLocales);\n    };\n    // Trigger\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarApi.prototype.on = function (handlerName, handler) {\n        var currentDataManager = this.currentDataManager;\n        if (currentDataManager.currentCalendarOptionsRefiners[handlerName]) {\n            currentDataManager.emitter.on(handlerName, handler);\n        }\n        else {\n            console.warn(\"Unknown listener name '\" + handlerName + \"'\");\n        }\n    };\n    CalendarApi.prototype.off = function (handlerName, handler) {\n        this.currentDataManager.emitter.off(handlerName, handler);\n    };\n    // not meant for public use\n    CalendarApi.prototype.trigger = function (handlerName) {\n        var _a;\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        (_a = this.currentDataManager.emitter).trigger.apply(_a, __spreadArray([handlerName], args));\n    };\n    // View\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarApi.prototype.changeView = function (viewType, dateOrRange) {\n        var _this = this;\n        this.batchRendering(function () {\n            _this.unselect();\n            if (dateOrRange) {\n                if (dateOrRange.start && dateOrRange.end) { // a range\n                    _this.dispatch({\n                        type: 'CHANGE_VIEW_TYPE',\n                        viewType: viewType,\n                    });\n                    _this.dispatch({\n                        type: 'SET_OPTION',\n                        optionName: 'visibleRange',\n                        rawOptionValue: dateOrRange,\n                    });\n                }\n                else {\n                    var dateEnv = _this.getCurrentData().dateEnv;\n                    _this.dispatch({\n                        type: 'CHANGE_VIEW_TYPE',\n                        viewType: viewType,\n                        dateMarker: dateEnv.createMarker(dateOrRange),\n                    });\n                }\n            }\n            else {\n                _this.dispatch({\n                    type: 'CHANGE_VIEW_TYPE',\n                    viewType: viewType,\n                });\n            }\n        });\n    };\n    // Forces navigation to a view for the given date.\n    // `viewType` can be a specific view name or a generic one like \"week\" or \"day\".\n    // needs to change\n    CalendarApi.prototype.zoomTo = function (dateMarker, viewType) {\n        var state = this.getCurrentData();\n        var spec;\n        viewType = viewType || 'day'; // day is default zoom\n        spec = state.viewSpecs[viewType] || this.getUnitViewSpec(viewType);\n        this.unselect();\n        if (spec) {\n            this.dispatch({\n                type: 'CHANGE_VIEW_TYPE',\n                viewType: spec.type,\n                dateMarker: dateMarker,\n            });\n        }\n        else {\n            this.dispatch({\n                type: 'CHANGE_DATE',\n                dateMarker: dateMarker,\n            });\n        }\n    };\n    // Given a duration singular unit, like \"week\" or \"day\", finds a matching view spec.\n    // Preference is given to views that have corresponding buttons.\n    CalendarApi.prototype.getUnitViewSpec = function (unit) {\n        var _a = this.getCurrentData(), viewSpecs = _a.viewSpecs, toolbarConfig = _a.toolbarConfig;\n        var viewTypes = [].concat(toolbarConfig.header ? toolbarConfig.header.viewsWithButtons : [], toolbarConfig.footer ? toolbarConfig.footer.viewsWithButtons : []);\n        var i;\n        var spec;\n        for (var viewType in viewSpecs) {\n            viewTypes.push(viewType);\n        }\n        for (i = 0; i < viewTypes.length; i += 1) {\n            spec = viewSpecs[viewTypes[i]];\n            if (spec) {\n                if (spec.singleUnit === unit) {\n                    return spec;\n                }\n            }\n        }\n        return null;\n    };\n    // Current Date\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarApi.prototype.prev = function () {\n        this.unselect();\n        this.dispatch({ type: 'PREV' });\n    };\n    CalendarApi.prototype.next = function () {\n        this.unselect();\n        this.dispatch({ type: 'NEXT' });\n    };\n    CalendarApi.prototype.prevYear = function () {\n        var state = this.getCurrentData();\n        this.unselect();\n        this.dispatch({\n            type: 'CHANGE_DATE',\n            dateMarker: state.dateEnv.addYears(state.currentDate, -1),\n        });\n    };\n    CalendarApi.prototype.nextYear = function () {\n        var state = this.getCurrentData();\n        this.unselect();\n        this.dispatch({\n            type: 'CHANGE_DATE',\n            dateMarker: state.dateEnv.addYears(state.currentDate, 1),\n        });\n    };\n    CalendarApi.prototype.today = function () {\n        var state = this.getCurrentData();\n        this.unselect();\n        this.dispatch({\n            type: 'CHANGE_DATE',\n            dateMarker: getNow(state.calendarOptions.now, state.dateEnv),\n        });\n    };\n    CalendarApi.prototype.gotoDate = function (zonedDateInput) {\n        var state = this.getCurrentData();\n        this.unselect();\n        this.dispatch({\n            type: 'CHANGE_DATE',\n            dateMarker: state.dateEnv.createMarker(zonedDateInput),\n        });\n    };\n    CalendarApi.prototype.incrementDate = function (deltaInput) {\n        var state = this.getCurrentData();\n        var delta = createDuration(deltaInput);\n        if (delta) { // else, warn about invalid input?\n            this.unselect();\n            this.dispatch({\n                type: 'CHANGE_DATE',\n                dateMarker: state.dateEnv.add(state.currentDate, delta),\n            });\n        }\n    };\n    // for external API\n    CalendarApi.prototype.getDate = function () {\n        var state = this.getCurrentData();\n        return state.dateEnv.toDate(state.currentDate);\n    };\n    // Date Formatting Utils\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarApi.prototype.formatDate = function (d, formatter) {\n        var dateEnv = this.getCurrentData().dateEnv;\n        return dateEnv.format(dateEnv.createMarker(d), createFormatter(formatter));\n    };\n    // `settings` is for formatter AND isEndExclusive\n    CalendarApi.prototype.formatRange = function (d0, d1, settings) {\n        var dateEnv = this.getCurrentData().dateEnv;\n        return dateEnv.formatRange(dateEnv.createMarker(d0), dateEnv.createMarker(d1), createFormatter(settings), settings);\n    };\n    CalendarApi.prototype.formatIso = function (d, omitTime) {\n        var dateEnv = this.getCurrentData().dateEnv;\n        return dateEnv.formatIso(dateEnv.createMarker(d), { omitTime: omitTime });\n    };\n    // Date Selection / Event Selection / DayClick\n    // -----------------------------------------------------------------------------------------------------------------\n    // this public method receives start/end dates in any format, with any timezone\n    // NOTE: args were changed from v3\n    CalendarApi.prototype.select = function (dateOrObj, endDate) {\n        var selectionInput;\n        if (endDate == null) {\n            if (dateOrObj.start != null) {\n                selectionInput = dateOrObj;\n            }\n            else {\n                selectionInput = {\n                    start: dateOrObj,\n                    end: null,\n                };\n            }\n        }\n        else {\n            selectionInput = {\n                start: dateOrObj,\n                end: endDate,\n            };\n        }\n        var state = this.getCurrentData();\n        var selection = parseDateSpan(selectionInput, state.dateEnv, createDuration({ days: 1 }));\n        if (selection) { // throw parse error otherwise?\n            this.dispatch({ type: 'SELECT_DATES', selection: selection });\n            triggerDateSelect(selection, null, state);\n        }\n    };\n    // public method\n    CalendarApi.prototype.unselect = function (pev) {\n        var state = this.getCurrentData();\n        if (state.dateSelection) {\n            this.dispatch({ type: 'UNSELECT_DATES' });\n            triggerDateUnselect(pev, state);\n        }\n    };\n    // Public Events API\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarApi.prototype.addEvent = function (eventInput, sourceInput) {\n        if (eventInput instanceof EventApi) {\n            var def = eventInput._def;\n            var instance = eventInput._instance;\n            var currentData = this.getCurrentData();\n            // not already present? don't want to add an old snapshot\n            if (!currentData.eventStore.defs[def.defId]) {\n                this.dispatch({\n                    type: 'ADD_EVENTS',\n                    eventStore: eventTupleToStore({ def: def, instance: instance }), // TODO: better util for two args?\n                });\n                this.triggerEventAdd(eventInput);\n            }\n            return eventInput;\n        }\n        var state = this.getCurrentData();\n        var eventSource;\n        if (sourceInput instanceof EventSourceApi) {\n            eventSource = sourceInput.internalEventSource;\n        }\n        else if (typeof sourceInput === 'boolean') {\n            if (sourceInput) { // true. part of the first event source\n                eventSource = hashValuesToArray(state.eventSources)[0];\n            }\n        }\n        else if (sourceInput != null) { // an ID. accepts a number too\n            var sourceApi = this.getEventSourceById(sourceInput); // TODO: use an internal function\n            if (!sourceApi) {\n                console.warn(\"Could not find an event source with ID \\\"\" + sourceInput + \"\\\"\"); // TODO: test\n                return null;\n            }\n            eventSource = sourceApi.internalEventSource;\n        }\n        var tuple = parseEvent(eventInput, eventSource, state, false);\n        if (tuple) {\n            var newEventApi = new EventApi(state, tuple.def, tuple.def.recurringDef ? null : tuple.instance);\n            this.dispatch({\n                type: 'ADD_EVENTS',\n                eventStore: eventTupleToStore(tuple),\n            });\n            this.triggerEventAdd(newEventApi);\n            return newEventApi;\n        }\n        return null;\n    };\n    CalendarApi.prototype.triggerEventAdd = function (eventApi) {\n        var _this = this;\n        var emitter = this.getCurrentData().emitter;\n        emitter.trigger('eventAdd', {\n            event: eventApi,\n            relatedEvents: [],\n            revert: function () {\n                _this.dispatch({\n                    type: 'REMOVE_EVENTS',\n                    eventStore: eventApiToStore(eventApi),\n                });\n            },\n        });\n    };\n    // TODO: optimize\n    CalendarApi.prototype.getEventById = function (id) {\n        var state = this.getCurrentData();\n        var _a = state.eventStore, defs = _a.defs, instances = _a.instances;\n        id = String(id);\n        for (var defId in defs) {\n            var def = defs[defId];\n            if (def.publicId === id) {\n                if (def.recurringDef) {\n                    return new EventApi(state, def, null);\n                }\n                for (var instanceId in instances) {\n                    var instance = instances[instanceId];\n                    if (instance.defId === def.defId) {\n                        return new EventApi(state, def, instance);\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    CalendarApi.prototype.getEvents = function () {\n        var currentData = this.getCurrentData();\n        return buildEventApis(currentData.eventStore, currentData);\n    };\n    CalendarApi.prototype.removeAllEvents = function () {\n        this.dispatch({ type: 'REMOVE_ALL_EVENTS' });\n    };\n    // Public Event Sources API\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarApi.prototype.getEventSources = function () {\n        var state = this.getCurrentData();\n        var sourceHash = state.eventSources;\n        var sourceApis = [];\n        for (var internalId in sourceHash) {\n            sourceApis.push(new EventSourceApi(state, sourceHash[internalId]));\n        }\n        return sourceApis;\n    };\n    CalendarApi.prototype.getEventSourceById = function (id) {\n        var state = this.getCurrentData();\n        var sourceHash = state.eventSources;\n        id = String(id);\n        for (var sourceId in sourceHash) {\n            if (sourceHash[sourceId].publicId === id) {\n                return new EventSourceApi(state, sourceHash[sourceId]);\n            }\n        }\n        return null;\n    };\n    CalendarApi.prototype.addEventSource = function (sourceInput) {\n        var state = this.getCurrentData();\n        if (sourceInput instanceof EventSourceApi) {\n            // not already present? don't want to add an old snapshot\n            if (!state.eventSources[sourceInput.internalEventSource.sourceId]) {\n                this.dispatch({\n                    type: 'ADD_EVENT_SOURCES',\n                    sources: [sourceInput.internalEventSource],\n                });\n            }\n            return sourceInput;\n        }\n        var eventSource = parseEventSource(sourceInput, state);\n        if (eventSource) { // TODO: error otherwise?\n            this.dispatch({ type: 'ADD_EVENT_SOURCES', sources: [eventSource] });\n            return new EventSourceApi(state, eventSource);\n        }\n        return null;\n    };\n    CalendarApi.prototype.removeAllEventSources = function () {\n        this.dispatch({ type: 'REMOVE_ALL_EVENT_SOURCES' });\n    };\n    CalendarApi.prototype.refetchEvents = function () {\n        this.dispatch({ type: 'FETCH_EVENT_SOURCES', isRefetch: true });\n    };\n    // Scroll\n    // -----------------------------------------------------------------------------------------------------------------\n    CalendarApi.prototype.scrollToTime = function (timeInput) {\n        var time = createDuration(timeInput);\n        if (time) {\n            this.trigger('_scrollRequest', { time: time });\n        }\n    };\n    return CalendarApi;\n}());\n\nvar EventApi = /** @class */ (function () {\n    // instance will be null if expressing a recurring event that has no current instances,\n    // OR if trying to validate an incoming external event that has no dates assigned\n    function EventApi(context, def, instance) {\n        this._context = context;\n        this._def = def;\n        this._instance = instance || null;\n    }\n    /*\n    TODO: make event struct more responsible for this\n    */\n    EventApi.prototype.setProp = function (name, val) {\n        var _a, _b;\n        if (name in EVENT_DATE_REFINERS) {\n            console.warn('Could not set date-related prop \\'name\\'. Use one of the date-related methods instead.');\n            // TODO: make proper aliasing system?\n        }\n        else if (name === 'id') {\n            val = EVENT_NON_DATE_REFINERS[name](val);\n            this.mutate({\n                standardProps: { publicId: val }, // hardcoded internal name\n            });\n        }\n        else if (name in EVENT_NON_DATE_REFINERS) {\n            val = EVENT_NON_DATE_REFINERS[name](val);\n            this.mutate({\n                standardProps: (_a = {}, _a[name] = val, _a),\n            });\n        }\n        else if (name in EVENT_UI_REFINERS) {\n            var ui = EVENT_UI_REFINERS[name](val);\n            if (name === 'color') {\n                ui = { backgroundColor: val, borderColor: val };\n            }\n            else if (name === 'editable') {\n                ui = { startEditable: val, durationEditable: val };\n            }\n            else {\n                ui = (_b = {}, _b[name] = val, _b);\n            }\n            this.mutate({\n                standardProps: { ui: ui },\n            });\n        }\n        else {\n            console.warn(\"Could not set prop '\" + name + \"'. Use setExtendedProp instead.\");\n        }\n    };\n    EventApi.prototype.setExtendedProp = function (name, val) {\n        var _a;\n        this.mutate({\n            extendedProps: (_a = {}, _a[name] = val, _a),\n        });\n    };\n    EventApi.prototype.setStart = function (startInput, options) {\n        if (options === void 0) { options = {}; }\n        var dateEnv = this._context.dateEnv;\n        var start = dateEnv.createMarker(startInput);\n        if (start && this._instance) { // TODO: warning if parsed bad\n            var instanceRange = this._instance.range;\n            var startDelta = diffDates(instanceRange.start, start, dateEnv, options.granularity); // what if parsed bad!?\n            if (options.maintainDuration) {\n                this.mutate({ datesDelta: startDelta });\n            }\n            else {\n                this.mutate({ startDelta: startDelta });\n            }\n        }\n    };\n    EventApi.prototype.setEnd = function (endInput, options) {\n        if (options === void 0) { options = {}; }\n        var dateEnv = this._context.dateEnv;\n        var end;\n        if (endInput != null) {\n            end = dateEnv.createMarker(endInput);\n            if (!end) {\n                return; // TODO: warning if parsed bad\n            }\n        }\n        if (this._instance) {\n            if (end) {\n                var endDelta = diffDates(this._instance.range.end, end, dateEnv, options.granularity);\n                this.mutate({ endDelta: endDelta });\n            }\n            else {\n                this.mutate({ standardProps: { hasEnd: false } });\n            }\n        }\n    };\n    EventApi.prototype.setDates = function (startInput, endInput, options) {\n        if (options === void 0) { options = {}; }\n        var dateEnv = this._context.dateEnv;\n        var standardProps = { allDay: options.allDay };\n        var start = dateEnv.createMarker(startInput);\n        var end;\n        if (!start) {\n            return; // TODO: warning if parsed bad\n        }\n        if (endInput != null) {\n            end = dateEnv.createMarker(endInput);\n            if (!end) { // TODO: warning if parsed bad\n                return;\n            }\n        }\n        if (this._instance) {\n            var instanceRange = this._instance.range;\n            // when computing the diff for an event being converted to all-day,\n            // compute diff off of the all-day values the way event-mutation does.\n            if (options.allDay === true) {\n                instanceRange = computeAlignedDayRange(instanceRange);\n            }\n            var startDelta = diffDates(instanceRange.start, start, dateEnv, options.granularity);\n            if (end) {\n                var endDelta = diffDates(instanceRange.end, end, dateEnv, options.granularity);\n                if (durationsEqual(startDelta, endDelta)) {\n                    this.mutate({ datesDelta: startDelta, standardProps: standardProps });\n                }\n                else {\n                    this.mutate({ startDelta: startDelta, endDelta: endDelta, standardProps: standardProps });\n                }\n            }\n            else { // means \"clear the end\"\n                standardProps.hasEnd = false;\n                this.mutate({ datesDelta: startDelta, standardProps: standardProps });\n            }\n        }\n    };\n    EventApi.prototype.moveStart = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // TODO: warning if parsed bad\n            this.mutate({ startDelta: delta });\n        }\n    };\n    EventApi.prototype.moveEnd = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // TODO: warning if parsed bad\n            this.mutate({ endDelta: delta });\n        }\n    };\n    EventApi.prototype.moveDates = function (deltaInput) {\n        var delta = createDuration(deltaInput);\n        if (delta) { // TODO: warning if parsed bad\n            this.mutate({ datesDelta: delta });\n        }\n    };\n    EventApi.prototype.setAllDay = function (allDay, options) {\n        if (options === void 0) { options = {}; }\n        var standardProps = { allDay: allDay };\n        var maintainDuration = options.maintainDuration;\n        if (maintainDuration == null) {\n            maintainDuration = this._context.options.allDayMaintainDuration;\n        }\n        if (this._def.allDay !== allDay) {\n            standardProps.hasEnd = maintainDuration;\n        }\n        this.mutate({ standardProps: standardProps });\n    };\n    EventApi.prototype.formatRange = function (formatInput) {\n        var dateEnv = this._context.dateEnv;\n        var instance = this._instance;\n        var formatter = createFormatter(formatInput);\n        if (this._def.hasEnd) {\n            return dateEnv.formatRange(instance.range.start, instance.range.end, formatter, {\n                forcedStartTzo: instance.forcedStartTzo,\n                forcedEndTzo: instance.forcedEndTzo,\n            });\n        }\n        return dateEnv.format(instance.range.start, formatter, {\n            forcedTzo: instance.forcedStartTzo,\n        });\n    };\n    EventApi.prototype.mutate = function (mutation) {\n        var instance = this._instance;\n        if (instance) {\n            var def = this._def;\n            var context_1 = this._context;\n            var eventStore_1 = context_1.getCurrentData().eventStore;\n            var relevantEvents = getRelevantEvents(eventStore_1, instance.instanceId);\n            var eventConfigBase = {\n                '': {\n                    display: '',\n                    startEditable: true,\n                    durationEditable: true,\n                    constraints: [],\n                    overlap: null,\n                    allows: [],\n                    backgroundColor: '',\n                    borderColor: '',\n                    textColor: '',\n                    classNames: [],\n                },\n            };\n            relevantEvents = applyMutationToEventStore(relevantEvents, eventConfigBase, mutation, context_1);\n            var oldEvent = new EventApi(context_1, def, instance); // snapshot\n            this._def = relevantEvents.defs[def.defId];\n            this._instance = relevantEvents.instances[instance.instanceId];\n            context_1.dispatch({\n                type: 'MERGE_EVENTS',\n                eventStore: relevantEvents,\n            });\n            context_1.emitter.trigger('eventChange', {\n                oldEvent: oldEvent,\n                event: this,\n                relatedEvents: buildEventApis(relevantEvents, context_1, instance),\n                revert: function () {\n                    context_1.dispatch({\n                        type: 'RESET_EVENTS',\n                        eventStore: eventStore_1,\n                    });\n                },\n            });\n        }\n    };\n    EventApi.prototype.remove = function () {\n        var context = this._context;\n        var asStore = eventApiToStore(this);\n        context.dispatch({\n            type: 'REMOVE_EVENTS',\n            eventStore: asStore,\n        });\n        context.emitter.trigger('eventRemove', {\n            event: this,\n            relatedEvents: [],\n            revert: function () {\n                context.dispatch({\n                    type: 'MERGE_EVENTS',\n                    eventStore: asStore,\n                });\n            },\n        });\n    };\n    Object.defineProperty(EventApi.prototype, \"source\", {\n        get: function () {\n            var sourceId = this._def.sourceId;\n            if (sourceId) {\n                return new EventSourceApi(this._context, this._context.getCurrentData().eventSources[sourceId]);\n            }\n            return null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"start\", {\n        get: function () {\n            return this._instance ?\n                this._context.dateEnv.toDate(this._instance.range.start) :\n                null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"end\", {\n        get: function () {\n            return (this._instance && this._def.hasEnd) ?\n                this._context.dateEnv.toDate(this._instance.range.end) :\n                null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"startStr\", {\n        get: function () {\n            var instance = this._instance;\n            if (instance) {\n                return this._context.dateEnv.formatIso(instance.range.start, {\n                    omitTime: this._def.allDay,\n                    forcedTzo: instance.forcedStartTzo,\n                });\n            }\n            return '';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"endStr\", {\n        get: function () {\n            var instance = this._instance;\n            if (instance && this._def.hasEnd) {\n                return this._context.dateEnv.formatIso(instance.range.end, {\n                    omitTime: this._def.allDay,\n                    forcedTzo: instance.forcedEndTzo,\n                });\n            }\n            return '';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"id\", {\n        // computable props that all access the def\n        // TODO: find a TypeScript-compatible way to do this at scale\n        get: function () { return this._def.publicId; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"groupId\", {\n        get: function () { return this._def.groupId; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"allDay\", {\n        get: function () { return this._def.allDay; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"title\", {\n        get: function () { return this._def.title; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"url\", {\n        get: function () { return this._def.url; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"display\", {\n        get: function () { return this._def.ui.display || 'auto'; } // bad. just normalize the type earlier\n        ,\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"startEditable\", {\n        get: function () { return this._def.ui.startEditable; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"durationEditable\", {\n        get: function () { return this._def.ui.durationEditable; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"constraint\", {\n        get: function () { return this._def.ui.constraints[0] || null; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"overlap\", {\n        get: function () { return this._def.ui.overlap; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"allow\", {\n        get: function () { return this._def.ui.allows[0] || null; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"backgroundColor\", {\n        get: function () { return this._def.ui.backgroundColor; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"borderColor\", {\n        get: function () { return this._def.ui.borderColor; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"textColor\", {\n        get: function () { return this._def.ui.textColor; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"classNames\", {\n        // NOTE: user can't modify these because Object.freeze was called in event-def parsing\n        get: function () { return this._def.ui.classNames; },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(EventApi.prototype, \"extendedProps\", {\n        get: function () { return this._def.extendedProps; },\n        enumerable: false,\n        configurable: true\n    });\n    EventApi.prototype.toPlainObject = function (settings) {\n        if (settings === void 0) { settings = {}; }\n        var def = this._def;\n        var ui = def.ui;\n        var _a = this, startStr = _a.startStr, endStr = _a.endStr;\n        var res = {};\n        if (def.title) {\n            res.title = def.title;\n        }\n        if (startStr) {\n            res.start = startStr;\n        }\n        if (endStr) {\n            res.end = endStr;\n        }\n        if (def.publicId) {\n            res.id = def.publicId;\n        }\n        if (def.groupId) {\n            res.groupId = def.groupId;\n        }\n        if (def.url) {\n            res.url = def.url;\n        }\n        if (ui.display && ui.display !== 'auto') {\n            res.display = ui.display;\n        }\n        // TODO: what about recurring-event properties???\n        // TODO: include startEditable/durationEditable/constraint/overlap/allow\n        if (settings.collapseColor && ui.backgroundColor && ui.backgroundColor === ui.borderColor) {\n            res.color = ui.backgroundColor;\n        }\n        else {\n            if (ui.backgroundColor) {\n                res.backgroundColor = ui.backgroundColor;\n            }\n            if (ui.borderColor) {\n                res.borderColor = ui.borderColor;\n            }\n        }\n        if (ui.textColor) {\n            res.textColor = ui.textColor;\n        }\n        if (ui.classNames.length) {\n            res.classNames = ui.classNames;\n        }\n        if (Object.keys(def.extendedProps).length) {\n            if (settings.collapseExtendedProps) {\n                __assign(res, def.extendedProps);\n            }\n            else {\n                res.extendedProps = def.extendedProps;\n            }\n        }\n        return res;\n    };\n    EventApi.prototype.toJSON = function () {\n        return this.toPlainObject();\n    };\n    return EventApi;\n}());\nfunction eventApiToStore(eventApi) {\n    var _a, _b;\n    var def = eventApi._def;\n    var instance = eventApi._instance;\n    return {\n        defs: (_a = {}, _a[def.defId] = def, _a),\n        instances: instance\n            ? (_b = {}, _b[instance.instanceId] = instance, _b) : {},\n    };\n}\nfunction buildEventApis(eventStore, context, excludeInstance) {\n    var defs = eventStore.defs, instances = eventStore.instances;\n    var eventApis = [];\n    var excludeInstanceId = excludeInstance ? excludeInstance.instanceId : '';\n    for (var id in instances) {\n        var instance = instances[id];\n        var def = defs[instance.defId];\n        if (instance.instanceId !== excludeInstanceId) {\n            eventApis.push(new EventApi(context, def, instance));\n        }\n    }\n    return eventApis;\n}\n\nvar calendarSystemClassMap = {};\nfunction registerCalendarSystem(name, theClass) {\n    calendarSystemClassMap[name] = theClass;\n}\nfunction createCalendarSystem(name) {\n    return new calendarSystemClassMap[name]();\n}\nvar GregorianCalendarSystem = /** @class */ (function () {\n    function GregorianCalendarSystem() {\n    }\n    GregorianCalendarSystem.prototype.getMarkerYear = function (d) {\n        return d.getUTCFullYear();\n    };\n    GregorianCalendarSystem.prototype.getMarkerMonth = function (d) {\n        return d.getUTCMonth();\n    };\n    GregorianCalendarSystem.prototype.getMarkerDay = function (d) {\n        return d.getUTCDate();\n    };\n    GregorianCalendarSystem.prototype.arrayToMarker = function (arr) {\n        return arrayToUtcDate(arr);\n    };\n    GregorianCalendarSystem.prototype.markerToArray = function (marker) {\n        return dateToUtcArray(marker);\n    };\n    return GregorianCalendarSystem;\n}());\nregisterCalendarSystem('gregory', GregorianCalendarSystem);\n\nvar ISO_RE = /^\\s*(\\d{4})(-?(\\d{2})(-?(\\d{2})([T ](\\d{2}):?(\\d{2})(:?(\\d{2})(\\.(\\d+))?)?(Z|(([-+])(\\d{2})(:?(\\d{2}))?))?)?)?)?$/;\nfunction parse(str) {\n    var m = ISO_RE.exec(str);\n    if (m) {\n        var marker = new Date(Date.UTC(Number(m[1]), m[3] ? Number(m[3]) - 1 : 0, Number(m[5] || 1), Number(m[7] || 0), Number(m[8] || 0), Number(m[10] || 0), m[12] ? Number(\"0.\" + m[12]) * 1000 : 0));\n        if (isValidDate(marker)) {\n            var timeZoneOffset = null;\n            if (m[13]) {\n                timeZoneOffset = (m[15] === '-' ? -1 : 1) * (Number(m[16] || 0) * 60 +\n                    Number(m[18] || 0));\n            }\n            return {\n                marker: marker,\n                isTimeUnspecified: !m[6],\n                timeZoneOffset: timeZoneOffset,\n            };\n        }\n    }\n    return null;\n}\n\nvar DateEnv = /** @class */ (function () {\n    function DateEnv(settings) {\n        var timeZone = this.timeZone = settings.timeZone;\n        var isNamedTimeZone = timeZone !== 'local' && timeZone !== 'UTC';\n        if (settings.namedTimeZoneImpl && isNamedTimeZone) {\n            this.namedTimeZoneImpl = new settings.namedTimeZoneImpl(timeZone);\n        }\n        this.canComputeOffset = Boolean(!isNamedTimeZone || this.namedTimeZoneImpl);\n        this.calendarSystem = createCalendarSystem(settings.calendarSystem);\n        this.locale = settings.locale;\n        this.weekDow = settings.locale.week.dow;\n        this.weekDoy = settings.locale.week.doy;\n        if (settings.weekNumberCalculation === 'ISO') {\n            this.weekDow = 1;\n            this.weekDoy = 4;\n        }\n        if (typeof settings.firstDay === 'number') {\n            this.weekDow = settings.firstDay;\n        }\n        if (typeof settings.weekNumberCalculation === 'function') {\n            this.weekNumberFunc = settings.weekNumberCalculation;\n        }\n        this.weekText = settings.weekText != null ? settings.weekText : settings.locale.options.weekText;\n        this.weekTextLong = (settings.weekTextLong != null ? settings.weekTextLong : settings.locale.options.weekTextLong) || this.weekText;\n        this.cmdFormatter = settings.cmdFormatter;\n        this.defaultSeparator = settings.defaultSeparator;\n    }\n    // Creating / Parsing\n    DateEnv.prototype.createMarker = function (input) {\n        var meta = this.createMarkerMeta(input);\n        if (meta === null) {\n            return null;\n        }\n        return meta.marker;\n    };\n    DateEnv.prototype.createNowMarker = function () {\n        if (this.canComputeOffset) {\n            return this.timestampToMarker(new Date().valueOf());\n        }\n        // if we can't compute the current date val for a timezone,\n        // better to give the current local date vals than UTC\n        return arrayToUtcDate(dateToLocalArray(new Date()));\n    };\n    DateEnv.prototype.createMarkerMeta = function (input) {\n        if (typeof input === 'string') {\n            return this.parse(input);\n        }\n        var marker = null;\n        if (typeof input === 'number') {\n            marker = this.timestampToMarker(input);\n        }\n        else if (input instanceof Date) {\n            input = input.valueOf();\n            if (!isNaN(input)) {\n                marker = this.timestampToMarker(input);\n            }\n        }\n        else if (Array.isArray(input)) {\n            marker = arrayToUtcDate(input);\n        }\n        if (marker === null || !isValidDate(marker)) {\n            return null;\n        }\n        return { marker: marker, isTimeUnspecified: false, forcedTzo: null };\n    };\n    DateEnv.prototype.parse = function (s) {\n        var parts = parse(s);\n        if (parts === null) {\n            return null;\n        }\n        var marker = parts.marker;\n        var forcedTzo = null;\n        if (parts.timeZoneOffset !== null) {\n            if (this.canComputeOffset) {\n                marker = this.timestampToMarker(marker.valueOf() - parts.timeZoneOffset * 60 * 1000);\n            }\n            else {\n                forcedTzo = parts.timeZoneOffset;\n            }\n        }\n        return { marker: marker, isTimeUnspecified: parts.isTimeUnspecified, forcedTzo: forcedTzo };\n    };\n    // Accessors\n    DateEnv.prototype.getYear = function (marker) {\n        return this.calendarSystem.getMarkerYear(marker);\n    };\n    DateEnv.prototype.getMonth = function (marker) {\n        return this.calendarSystem.getMarkerMonth(marker);\n    };\n    // Adding / Subtracting\n    DateEnv.prototype.add = function (marker, dur) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[0] += dur.years;\n        a[1] += dur.months;\n        a[2] += dur.days;\n        a[6] += dur.milliseconds;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    DateEnv.prototype.subtract = function (marker, dur) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[0] -= dur.years;\n        a[1] -= dur.months;\n        a[2] -= dur.days;\n        a[6] -= dur.milliseconds;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    DateEnv.prototype.addYears = function (marker, n) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[0] += n;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    DateEnv.prototype.addMonths = function (marker, n) {\n        var a = this.calendarSystem.markerToArray(marker);\n        a[1] += n;\n        return this.calendarSystem.arrayToMarker(a);\n    };\n    // Diffing Whole Units\n    DateEnv.prototype.diffWholeYears = function (m0, m1) {\n        var calendarSystem = this.calendarSystem;\n        if (timeAsMs(m0) === timeAsMs(m1) &&\n            calendarSystem.getMarkerDay(m0) === calendarSystem.getMarkerDay(m1) &&\n            calendarSystem.getMarkerMonth(m0) === calendarSystem.getMarkerMonth(m1)) {\n            return calendarSystem.getMarkerYear(m1) - calendarSystem.getMarkerYear(m0);\n        }\n        return null;\n    };\n    DateEnv.prototype.diffWholeMonths = function (m0, m1) {\n        var calendarSystem = this.calendarSystem;\n        if (timeAsMs(m0) === timeAsMs(m1) &&\n            calendarSystem.getMarkerDay(m0) === calendarSystem.getMarkerDay(m1)) {\n            return (calendarSystem.getMarkerMonth(m1) - calendarSystem.getMarkerMonth(m0)) +\n                (calendarSystem.getMarkerYear(m1) - calendarSystem.getMarkerYear(m0)) * 12;\n        }\n        return null;\n    };\n    // Range / Duration\n    DateEnv.prototype.greatestWholeUnit = function (m0, m1) {\n        var n = this.diffWholeYears(m0, m1);\n        if (n !== null) {\n            return { unit: 'year', value: n };\n        }\n        n = this.diffWholeMonths(m0, m1);\n        if (n !== null) {\n            return { unit: 'month', value: n };\n        }\n        n = diffWholeWeeks(m0, m1);\n        if (n !== null) {\n            return { unit: 'week', value: n };\n        }\n        n = diffWholeDays(m0, m1);\n        if (n !== null) {\n            return { unit: 'day', value: n };\n        }\n        n = diffHours(m0, m1);\n        if (isInt(n)) {\n            return { unit: 'hour', value: n };\n        }\n        n = diffMinutes(m0, m1);\n        if (isInt(n)) {\n            return { unit: 'minute', value: n };\n        }\n        n = diffSeconds(m0, m1);\n        if (isInt(n)) {\n            return { unit: 'second', value: n };\n        }\n        return { unit: 'millisecond', value: m1.valueOf() - m0.valueOf() };\n    };\n    DateEnv.prototype.countDurationsBetween = function (m0, m1, d) {\n        // TODO: can use greatestWholeUnit\n        var diff;\n        if (d.years) {\n            diff = this.diffWholeYears(m0, m1);\n            if (diff !== null) {\n                return diff / asRoughYears(d);\n            }\n        }\n        if (d.months) {\n            diff = this.diffWholeMonths(m0, m1);\n            if (diff !== null) {\n                return diff / asRoughMonths(d);\n            }\n        }\n        if (d.days) {\n            diff = diffWholeDays(m0, m1);\n            if (diff !== null) {\n                return diff / asRoughDays(d);\n            }\n        }\n        return (m1.valueOf() - m0.valueOf()) / asRoughMs(d);\n    };\n    // Start-Of\n    // these DON'T return zoned-dates. only UTC start-of dates\n    DateEnv.prototype.startOf = function (m, unit) {\n        if (unit === 'year') {\n            return this.startOfYear(m);\n        }\n        if (unit === 'month') {\n            return this.startOfMonth(m);\n        }\n        if (unit === 'week') {\n            return this.startOfWeek(m);\n        }\n        if (unit === 'day') {\n            return startOfDay(m);\n        }\n        if (unit === 'hour') {\n            return startOfHour(m);\n        }\n        if (unit === 'minute') {\n            return startOfMinute(m);\n        }\n        if (unit === 'second') {\n            return startOfSecond(m);\n        }\n        return null;\n    };\n    DateEnv.prototype.startOfYear = function (m) {\n        return this.calendarSystem.arrayToMarker([\n            this.calendarSystem.getMarkerYear(m),\n        ]);\n    };\n    DateEnv.prototype.startOfMonth = function (m) {\n        return this.calendarSystem.arrayToMarker([\n            this.calendarSystem.getMarkerYear(m),\n            this.calendarSystem.getMarkerMonth(m),\n        ]);\n    };\n    DateEnv.prototype.startOfWeek = function (m) {\n        return this.calendarSystem.arrayToMarker([\n            this.calendarSystem.getMarkerYear(m),\n            this.calendarSystem.getMarkerMonth(m),\n            m.getUTCDate() - ((m.getUTCDay() - this.weekDow + 7) % 7),\n        ]);\n    };\n    // Week Number\n    DateEnv.prototype.computeWeekNumber = function (marker) {\n        if (this.weekNumberFunc) {\n            return this.weekNumberFunc(this.toDate(marker));\n        }\n        return weekOfYear(marker, this.weekDow, this.weekDoy);\n    };\n    // TODO: choke on timeZoneName: long\n    DateEnv.prototype.format = function (marker, formatter, dateOptions) {\n        if (dateOptions === void 0) { dateOptions = {}; }\n        return formatter.format({\n            marker: marker,\n            timeZoneOffset: dateOptions.forcedTzo != null ?\n                dateOptions.forcedTzo :\n                this.offsetForMarker(marker),\n        }, this);\n    };\n    DateEnv.prototype.formatRange = function (start, end, formatter, dateOptions) {\n        if (dateOptions === void 0) { dateOptions = {}; }\n        if (dateOptions.isEndExclusive) {\n            end = addMs(end, -1);\n        }\n        return formatter.formatRange({\n            marker: start,\n            timeZoneOffset: dateOptions.forcedStartTzo != null ?\n                dateOptions.forcedStartTzo :\n                this.offsetForMarker(start),\n        }, {\n            marker: end,\n            timeZoneOffset: dateOptions.forcedEndTzo != null ?\n                dateOptions.forcedEndTzo :\n                this.offsetForMarker(end),\n        }, this, dateOptions.defaultSeparator);\n    };\n    /*\n    DUMB: the omitTime arg is dumb. if we omit the time, we want to omit the timezone offset. and if we do that,\n    might as well use buildIsoString or some other util directly\n    */\n    DateEnv.prototype.formatIso = function (marker, extraOptions) {\n        if (extraOptions === void 0) { extraOptions = {}; }\n        var timeZoneOffset = null;\n        if (!extraOptions.omitTimeZoneOffset) {\n            if (extraOptions.forcedTzo != null) {\n                timeZoneOffset = extraOptions.forcedTzo;\n            }\n            else {\n                timeZoneOffset = this.offsetForMarker(marker);\n            }\n        }\n        return buildIsoString(marker, timeZoneOffset, extraOptions.omitTime);\n    };\n    // TimeZone\n    DateEnv.prototype.timestampToMarker = function (ms) {\n        if (this.timeZone === 'local') {\n            return arrayToUtcDate(dateToLocalArray(new Date(ms)));\n        }\n        if (this.timeZone === 'UTC' || !this.namedTimeZoneImpl) {\n            return new Date(ms);\n        }\n        return arrayToUtcDate(this.namedTimeZoneImpl.timestampToArray(ms));\n    };\n    DateEnv.prototype.offsetForMarker = function (m) {\n        if (this.timeZone === 'local') {\n            return -arrayToLocalDate(dateToUtcArray(m)).getTimezoneOffset(); // convert \"inverse\" offset to \"normal\" offset\n        }\n        if (this.timeZone === 'UTC') {\n            return 0;\n        }\n        if (this.namedTimeZoneImpl) {\n            return this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m));\n        }\n        return null;\n    };\n    // Conversion\n    DateEnv.prototype.toDate = function (m, forcedTzo) {\n        if (this.timeZone === 'local') {\n            return arrayToLocalDate(dateToUtcArray(m));\n        }\n        if (this.timeZone === 'UTC') {\n            return new Date(m.valueOf()); // make sure it's a copy\n        }\n        if (!this.namedTimeZoneImpl) {\n            return new Date(m.valueOf() - (forcedTzo || 0));\n        }\n        return new Date(m.valueOf() -\n            this.namedTimeZoneImpl.offsetForArray(dateToUtcArray(m)) * 1000 * 60);\n    };\n    return DateEnv;\n}());\n\nvar globalLocales = [];\n\nvar MINIMAL_RAW_EN_LOCALE = {\n    code: 'en',\n    week: {\n        dow: 0,\n        doy: 4, // 4 days need to be within the year to be considered the first week\n    },\n    direction: 'ltr',\n    buttonText: {\n        prev: 'prev',\n        next: 'next',\n        prevYear: 'prev year',\n        nextYear: 'next year',\n        year: 'year',\n        today: 'today',\n        month: 'month',\n        week: 'week',\n        day: 'day',\n        list: 'list',\n    },\n    weekText: 'W',\n    weekTextLong: 'Week',\n    closeHint: 'Close',\n    timeHint: 'Time',\n    eventHint: 'Event',\n    allDayText: 'all-day',\n    moreLinkText: 'more',\n    noEventsText: 'No events to display',\n};\nvar RAW_EN_LOCALE = __assign(__assign({}, MINIMAL_RAW_EN_LOCALE), { \n    // Includes things we don't want other locales to inherit,\n    // things that derive from other translatable strings.\n    buttonHints: {\n        prev: 'Previous $0',\n        next: 'Next $0',\n        today: function (buttonText, unit) {\n            return (unit === 'day')\n                ? 'Today'\n                : \"This \" + buttonText;\n        },\n    }, viewHint: '$0 view', navLinkHint: 'Go to $0', moreLinkHint: function (eventCnt) {\n        return \"Show \" + eventCnt + \" more event\" + (eventCnt === 1 ? '' : 's');\n    } });\nfunction organizeRawLocales(explicitRawLocales) {\n    var defaultCode = explicitRawLocales.length > 0 ? explicitRawLocales[0].code : 'en';\n    var allRawLocales = globalLocales.concat(explicitRawLocales);\n    var rawLocaleMap = {\n        en: RAW_EN_LOCALE,\n    };\n    for (var _i = 0, allRawLocales_1 = allRawLocales; _i < allRawLocales_1.length; _i++) {\n        var rawLocale = allRawLocales_1[_i];\n        rawLocaleMap[rawLocale.code] = rawLocale;\n    }\n    return {\n        map: rawLocaleMap,\n        defaultCode: defaultCode,\n    };\n}\nfunction buildLocale(inputSingular, available) {\n    if (typeof inputSingular === 'object' && !Array.isArray(inputSingular)) {\n        return parseLocale(inputSingular.code, [inputSingular.code], inputSingular);\n    }\n    return queryLocale(inputSingular, available);\n}\nfunction queryLocale(codeArg, available) {\n    var codes = [].concat(codeArg || []); // will convert to array\n    var raw = queryRawLocale(codes, available) || RAW_EN_LOCALE;\n    return parseLocale(codeArg, codes, raw);\n}\nfunction queryRawLocale(codes, available) {\n    for (var i = 0; i < codes.length; i += 1) {\n        var parts = codes[i].toLocaleLowerCase().split('-');\n        for (var j = parts.length; j > 0; j -= 1) {\n            var simpleId = parts.slice(0, j).join('-');\n            if (available[simpleId]) {\n                return available[simpleId];\n            }\n        }\n    }\n    return null;\n}\nfunction parseLocale(codeArg, codes, raw) {\n    var merged = mergeProps([MINIMAL_RAW_EN_LOCALE, raw], ['buttonText']);\n    delete merged.code; // don't want this part of the options\n    var week = merged.week;\n    delete merged.week;\n    return {\n        codeArg: codeArg,\n        codes: codes,\n        week: week,\n        simpleNumberFormat: new Intl.NumberFormat(codeArg),\n        options: merged,\n    };\n}\n\nfunction formatDate(dateInput, options) {\n    if (options === void 0) { options = {}; }\n    var dateEnv = buildDateEnv$1(options);\n    var formatter = createFormatter(options);\n    var dateMeta = dateEnv.createMarkerMeta(dateInput);\n    if (!dateMeta) { // TODO: warning?\n        return '';\n    }\n    return dateEnv.format(dateMeta.marker, formatter, {\n        forcedTzo: dateMeta.forcedTzo,\n    });\n}\nfunction formatRange(startInput, endInput, options) {\n    var dateEnv = buildDateEnv$1(typeof options === 'object' && options ? options : {}); // pass in if non-null object\n    var formatter = createFormatter(options);\n    var startMeta = dateEnv.createMarkerMeta(startInput);\n    var endMeta = dateEnv.createMarkerMeta(endInput);\n    if (!startMeta || !endMeta) { // TODO: warning?\n        return '';\n    }\n    return dateEnv.formatRange(startMeta.marker, endMeta.marker, formatter, {\n        forcedStartTzo: startMeta.forcedTzo,\n        forcedEndTzo: endMeta.forcedTzo,\n        isEndExclusive: options.isEndExclusive,\n        defaultSeparator: BASE_OPTION_DEFAULTS.defaultRangeSeparator,\n    });\n}\n// TODO: more DRY and optimized\nfunction buildDateEnv$1(settings) {\n    var locale = buildLocale(settings.locale || 'en', organizeRawLocales([]).map); // TODO: don't hardcode 'en' everywhere\n    return new DateEnv(__assign(__assign({ timeZone: BASE_OPTION_DEFAULTS.timeZone, calendarSystem: 'gregory' }, settings), { locale: locale }));\n}\n\nvar DEF_DEFAULTS = {\n    startTime: '09:00',\n    endTime: '17:00',\n    daysOfWeek: [1, 2, 3, 4, 5],\n    display: 'inverse-background',\n    classNames: 'fc-non-business',\n    groupId: '_businessHours', // so multiple defs get grouped\n};\n/*\nTODO: pass around as EventDefHash!!!\n*/\nfunction parseBusinessHours(input, context) {\n    return parseEvents(refineInputs(input), null, context);\n}\nfunction refineInputs(input) {\n    var rawDefs;\n    if (input === true) {\n        rawDefs = [{}]; // will get DEF_DEFAULTS verbatim\n    }\n    else if (Array.isArray(input)) {\n        // if specifying an array, every sub-definition NEEDS a day-of-week\n        rawDefs = input.filter(function (rawDef) { return rawDef.daysOfWeek; });\n    }\n    else if (typeof input === 'object' && input) { // non-null object\n        rawDefs = [input];\n    }\n    else { // is probably false\n        rawDefs = [];\n    }\n    rawDefs = rawDefs.map(function (rawDef) { return (__assign(__assign({}, DEF_DEFAULTS), rawDef)); });\n    return rawDefs;\n}\n\nfunction pointInsideRect(point, rect) {\n    return point.left >= rect.left &&\n        point.left < rect.right &&\n        point.top >= rect.top &&\n        point.top < rect.bottom;\n}\n// Returns a new rectangle that is the intersection of the two rectangles. If they don't intersect, returns false\nfunction intersectRects(rect1, rect2) {\n    var res = {\n        left: Math.max(rect1.left, rect2.left),\n        right: Math.min(rect1.right, rect2.right),\n        top: Math.max(rect1.top, rect2.top),\n        bottom: Math.min(rect1.bottom, rect2.bottom),\n    };\n    if (res.left < res.right && res.top < res.bottom) {\n        return res;\n    }\n    return false;\n}\nfunction translateRect(rect, deltaX, deltaY) {\n    return {\n        left: rect.left + deltaX,\n        right: rect.right + deltaX,\n        top: rect.top + deltaY,\n        bottom: rect.bottom + deltaY,\n    };\n}\n// Returns a new point that will have been moved to reside within the given rectangle\nfunction constrainPoint(point, rect) {\n    return {\n        left: Math.min(Math.max(point.left, rect.left), rect.right),\n        top: Math.min(Math.max(point.top, rect.top), rect.bottom),\n    };\n}\n// Returns a point that is the center of the given rectangle\nfunction getRectCenter(rect) {\n    return {\n        left: (rect.left + rect.right) / 2,\n        top: (rect.top + rect.bottom) / 2,\n    };\n}\n// Subtracts point2's coordinates from point1's coordinates, returning a delta\nfunction diffPoints(point1, point2) {\n    return {\n        left: point1.left - point2.left,\n        top: point1.top - point2.top,\n    };\n}\n\nvar canVGrowWithinCell;\nfunction getCanVGrowWithinCell() {\n    if (canVGrowWithinCell == null) {\n        canVGrowWithinCell = computeCanVGrowWithinCell();\n    }\n    return canVGrowWithinCell;\n}\nfunction computeCanVGrowWithinCell() {\n    // for SSR, because this function is call immediately at top-level\n    // TODO: just make this logic execute top-level, immediately, instead of doing lazily\n    if (typeof document === 'undefined') {\n        return true;\n    }\n    var el = document.createElement('div');\n    el.style.position = 'absolute';\n    el.style.top = '0px';\n    el.style.left = '0px';\n    el.innerHTML = '<table><tr><td><div></div></td></tr></table>';\n    el.querySelector('table').style.height = '100px';\n    el.querySelector('div').style.height = '100%';\n    document.body.appendChild(el);\n    var div = el.querySelector('div');\n    var possible = div.offsetHeight > 0;\n    document.body.removeChild(el);\n    return possible;\n}\n\nvar EMPTY_EVENT_STORE = createEmptyEventStore(); // for purecomponents. TODO: keep elsewhere\nvar Splitter = /** @class */ (function () {\n    function Splitter() {\n        this.getKeysForEventDefs = memoize(this._getKeysForEventDefs);\n        this.splitDateSelection = memoize(this._splitDateSpan);\n        this.splitEventStore = memoize(this._splitEventStore);\n        this.splitIndividualUi = memoize(this._splitIndividualUi);\n        this.splitEventDrag = memoize(this._splitInteraction);\n        this.splitEventResize = memoize(this._splitInteraction);\n        this.eventUiBuilders = {}; // TODO: typescript protection\n    }\n    Splitter.prototype.splitProps = function (props) {\n        var _this = this;\n        var keyInfos = this.getKeyInfo(props);\n        var defKeys = this.getKeysForEventDefs(props.eventStore);\n        var dateSelections = this.splitDateSelection(props.dateSelection);\n        var individualUi = this.splitIndividualUi(props.eventUiBases, defKeys); // the individual *bases*\n        var eventStores = this.splitEventStore(props.eventStore, defKeys);\n        var eventDrags = this.splitEventDrag(props.eventDrag);\n        var eventResizes = this.splitEventResize(props.eventResize);\n        var splitProps = {};\n        this.eventUiBuilders = mapHash(keyInfos, function (info, key) { return _this.eventUiBuilders[key] || memoize(buildEventUiForKey); });\n        for (var key in keyInfos) {\n            var keyInfo = keyInfos[key];\n            var eventStore = eventStores[key] || EMPTY_EVENT_STORE;\n            var buildEventUi = this.eventUiBuilders[key];\n            splitProps[key] = {\n                businessHours: keyInfo.businessHours || props.businessHours,\n                dateSelection: dateSelections[key] || null,\n                eventStore: eventStore,\n                eventUiBases: buildEventUi(props.eventUiBases[''], keyInfo.ui, individualUi[key]),\n                eventSelection: eventStore.instances[props.eventSelection] ? props.eventSelection : '',\n                eventDrag: eventDrags[key] || null,\n                eventResize: eventResizes[key] || null,\n            };\n        }\n        return splitProps;\n    };\n    Splitter.prototype._splitDateSpan = function (dateSpan) {\n        var dateSpans = {};\n        if (dateSpan) {\n            var keys = this.getKeysForDateSpan(dateSpan);\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                dateSpans[key] = dateSpan;\n            }\n        }\n        return dateSpans;\n    };\n    Splitter.prototype._getKeysForEventDefs = function (eventStore) {\n        var _this = this;\n        return mapHash(eventStore.defs, function (eventDef) { return _this.getKeysForEventDef(eventDef); });\n    };\n    Splitter.prototype._splitEventStore = function (eventStore, defKeys) {\n        var defs = eventStore.defs, instances = eventStore.instances;\n        var splitStores = {};\n        for (var defId in defs) {\n            for (var _i = 0, _a = defKeys[defId]; _i < _a.length; _i++) {\n                var key = _a[_i];\n                if (!splitStores[key]) {\n                    splitStores[key] = createEmptyEventStore();\n                }\n                splitStores[key].defs[defId] = defs[defId];\n            }\n        }\n        for (var instanceId in instances) {\n            var instance = instances[instanceId];\n            for (var _b = 0, _c = defKeys[instance.defId]; _b < _c.length; _b++) {\n                var key = _c[_b];\n                if (splitStores[key]) { // must have already been created\n                    splitStores[key].instances[instanceId] = instance;\n                }\n            }\n        }\n        return splitStores;\n    };\n    Splitter.prototype._splitIndividualUi = function (eventUiBases, defKeys) {\n        var splitHashes = {};\n        for (var defId in eventUiBases) {\n            if (defId) { // not the '' key\n                for (var _i = 0, _a = defKeys[defId]; _i < _a.length; _i++) {\n                    var key = _a[_i];\n                    if (!splitHashes[key]) {\n                        splitHashes[key] = {};\n                    }\n                    splitHashes[key][defId] = eventUiBases[defId];\n                }\n            }\n        }\n        return splitHashes;\n    };\n    Splitter.prototype._splitInteraction = function (interaction) {\n        var splitStates = {};\n        if (interaction) {\n            var affectedStores_1 = this._splitEventStore(interaction.affectedEvents, this._getKeysForEventDefs(interaction.affectedEvents));\n            // can't rely on defKeys because event data is mutated\n            var mutatedKeysByDefId = this._getKeysForEventDefs(interaction.mutatedEvents);\n            var mutatedStores_1 = this._splitEventStore(interaction.mutatedEvents, mutatedKeysByDefId);\n            var populate = function (key) {\n                if (!splitStates[key]) {\n                    splitStates[key] = {\n                        affectedEvents: affectedStores_1[key] || EMPTY_EVENT_STORE,\n                        mutatedEvents: mutatedStores_1[key] || EMPTY_EVENT_STORE,\n                        isEvent: interaction.isEvent,\n                    };\n                }\n            };\n            for (var key in affectedStores_1) {\n                populate(key);\n            }\n            for (var key in mutatedStores_1) {\n                populate(key);\n            }\n        }\n        return splitStates;\n    };\n    return Splitter;\n}());\nfunction buildEventUiForKey(allUi, eventUiForKey, individualUi) {\n    var baseParts = [];\n    if (allUi) {\n        baseParts.push(allUi);\n    }\n    if (eventUiForKey) {\n        baseParts.push(eventUiForKey);\n    }\n    var stuff = {\n        '': combineEventUis(baseParts),\n    };\n    if (individualUi) {\n        __assign(stuff, individualUi);\n    }\n    return stuff;\n}\n\nfunction getDateMeta(date, todayRange, nowDate, dateProfile) {\n    return {\n        dow: date.getUTCDay(),\n        isDisabled: Boolean(dateProfile && !rangeContainsMarker(dateProfile.activeRange, date)),\n        isOther: Boolean(dateProfile && !rangeContainsMarker(dateProfile.currentRange, date)),\n        isToday: Boolean(todayRange && rangeContainsMarker(todayRange, date)),\n        isPast: Boolean(nowDate ? (date < nowDate) : todayRange ? (date < todayRange.start) : false),\n        isFuture: Boolean(nowDate ? (date > nowDate) : todayRange ? (date >= todayRange.end) : false),\n    };\n}\nfunction getDayClassNames(meta, theme) {\n    var classNames = [\n        'fc-day',\n        \"fc-day-\" + DAY_IDS[meta.dow],\n    ];\n    if (meta.isDisabled) {\n        classNames.push('fc-day-disabled');\n    }\n    else {\n        if (meta.isToday) {\n            classNames.push('fc-day-today');\n            classNames.push(theme.getClass('today'));\n        }\n        if (meta.isPast) {\n            classNames.push('fc-day-past');\n        }\n        if (meta.isFuture) {\n            classNames.push('fc-day-future');\n        }\n        if (meta.isOther) {\n            classNames.push('fc-day-other');\n        }\n    }\n    return classNames;\n}\nfunction getSlotClassNames(meta, theme) {\n    var classNames = [\n        'fc-slot',\n        \"fc-slot-\" + DAY_IDS[meta.dow],\n    ];\n    if (meta.isDisabled) {\n        classNames.push('fc-slot-disabled');\n    }\n    else {\n        if (meta.isToday) {\n            classNames.push('fc-slot-today');\n            classNames.push(theme.getClass('today'));\n        }\n        if (meta.isPast) {\n            classNames.push('fc-slot-past');\n        }\n        if (meta.isFuture) {\n            classNames.push('fc-slot-future');\n        }\n    }\n    return classNames;\n}\n\nvar DAY_FORMAT = createFormatter({ year: 'numeric', month: 'long', day: 'numeric' });\nvar WEEK_FORMAT = createFormatter({ week: 'long' });\nfunction buildNavLinkAttrs(context, dateMarker, viewType, isTabbable) {\n    if (viewType === void 0) { viewType = 'day'; }\n    if (isTabbable === void 0) { isTabbable = true; }\n    var dateEnv = context.dateEnv, options = context.options, calendarApi = context.calendarApi;\n    var dateStr = dateEnv.format(dateMarker, viewType === 'week' ? WEEK_FORMAT : DAY_FORMAT);\n    if (options.navLinks) {\n        var zonedDate = dateEnv.toDate(dateMarker);\n        var handleInteraction = function (ev) {\n            var customAction = viewType === 'day' ? options.navLinkDayClick :\n                viewType === 'week' ? options.navLinkWeekClick : null;\n            if (typeof customAction === 'function') {\n                customAction.call(calendarApi, dateEnv.toDate(dateMarker), ev);\n            }\n            else {\n                if (typeof customAction === 'string') {\n                    viewType = customAction;\n                }\n                calendarApi.zoomTo(dateMarker, viewType);\n            }\n        };\n        return __assign({ title: formatWithOrdinals(options.navLinkHint, [dateStr, zonedDate], dateStr), 'data-navlink': '' }, (isTabbable\n            ? createAriaClickAttrs(handleInteraction)\n            : { onClick: handleInteraction }));\n    }\n    return { 'aria-label': dateStr };\n}\n\nvar _isRtlScrollbarOnLeft = null;\nfunction getIsRtlScrollbarOnLeft() {\n    if (_isRtlScrollbarOnLeft === null) {\n        _isRtlScrollbarOnLeft = computeIsRtlScrollbarOnLeft();\n    }\n    return _isRtlScrollbarOnLeft;\n}\nfunction computeIsRtlScrollbarOnLeft() {\n    var outerEl = document.createElement('div');\n    applyStyle(outerEl, {\n        position: 'absolute',\n        top: -1000,\n        left: 0,\n        border: 0,\n        padding: 0,\n        overflow: 'scroll',\n        direction: 'rtl',\n    });\n    outerEl.innerHTML = '<div></div>';\n    document.body.appendChild(outerEl);\n    var innerEl = outerEl.firstChild;\n    var res = innerEl.getBoundingClientRect().left > outerEl.getBoundingClientRect().left;\n    removeElement(outerEl);\n    return res;\n}\n\nvar _scrollbarWidths;\nfunction getScrollbarWidths() {\n    if (!_scrollbarWidths) {\n        _scrollbarWidths = computeScrollbarWidths();\n    }\n    return _scrollbarWidths;\n}\nfunction computeScrollbarWidths() {\n    var el = document.createElement('div');\n    el.style.overflow = 'scroll';\n    el.style.position = 'absolute';\n    el.style.top = '-9999px';\n    el.style.left = '-9999px';\n    document.body.appendChild(el);\n    var res = computeScrollbarWidthsForEl(el);\n    document.body.removeChild(el);\n    return res;\n}\n// WARNING: will include border\nfunction computeScrollbarWidthsForEl(el) {\n    return {\n        x: el.offsetHeight - el.clientHeight,\n        y: el.offsetWidth - el.clientWidth,\n    };\n}\n\nfunction computeEdges(el, getPadding) {\n    if (getPadding === void 0) { getPadding = false; }\n    var computedStyle = window.getComputedStyle(el);\n    var borderLeft = parseInt(computedStyle.borderLeftWidth, 10) || 0;\n    var borderRight = parseInt(computedStyle.borderRightWidth, 10) || 0;\n    var borderTop = parseInt(computedStyle.borderTopWidth, 10) || 0;\n    var borderBottom = parseInt(computedStyle.borderBottomWidth, 10) || 0;\n    var badScrollbarWidths = computeScrollbarWidthsForEl(el); // includes border!\n    var scrollbarLeftRight = badScrollbarWidths.y - borderLeft - borderRight;\n    var scrollbarBottom = badScrollbarWidths.x - borderTop - borderBottom;\n    var res = {\n        borderLeft: borderLeft,\n        borderRight: borderRight,\n        borderTop: borderTop,\n        borderBottom: borderBottom,\n        scrollbarBottom: scrollbarBottom,\n        scrollbarLeft: 0,\n        scrollbarRight: 0,\n    };\n    if (getIsRtlScrollbarOnLeft() && computedStyle.direction === 'rtl') { // is the scrollbar on the left side?\n        res.scrollbarLeft = scrollbarLeftRight;\n    }\n    else {\n        res.scrollbarRight = scrollbarLeftRight;\n    }\n    if (getPadding) {\n        res.paddingLeft = parseInt(computedStyle.paddingLeft, 10) || 0;\n        res.paddingRight = parseInt(computedStyle.paddingRight, 10) || 0;\n        res.paddingTop = parseInt(computedStyle.paddingTop, 10) || 0;\n        res.paddingBottom = parseInt(computedStyle.paddingBottom, 10) || 0;\n    }\n    return res;\n}\nfunction computeInnerRect(el, goWithinPadding, doFromWindowViewport) {\n    if (goWithinPadding === void 0) { goWithinPadding = false; }\n    var outerRect = doFromWindowViewport ? el.getBoundingClientRect() : computeRect(el);\n    var edges = computeEdges(el, goWithinPadding);\n    var res = {\n        left: outerRect.left + edges.borderLeft + edges.scrollbarLeft,\n        right: outerRect.right - edges.borderRight - edges.scrollbarRight,\n        top: outerRect.top + edges.borderTop,\n        bottom: outerRect.bottom - edges.borderBottom - edges.scrollbarBottom,\n    };\n    if (goWithinPadding) {\n        res.left += edges.paddingLeft;\n        res.right -= edges.paddingRight;\n        res.top += edges.paddingTop;\n        res.bottom -= edges.paddingBottom;\n    }\n    return res;\n}\nfunction computeRect(el) {\n    var rect = el.getBoundingClientRect();\n    return {\n        left: rect.left + window.pageXOffset,\n        top: rect.top + window.pageYOffset,\n        right: rect.right + window.pageXOffset,\n        bottom: rect.bottom + window.pageYOffset,\n    };\n}\nfunction computeClippedClientRect(el) {\n    var clippingParents = getClippingParents(el);\n    var rect = el.getBoundingClientRect();\n    for (var _i = 0, clippingParents_1 = clippingParents; _i < clippingParents_1.length; _i++) {\n        var clippingParent = clippingParents_1[_i];\n        var intersection = intersectRects(rect, clippingParent.getBoundingClientRect());\n        if (intersection) {\n            rect = intersection;\n        }\n        else {\n            return null;\n        }\n    }\n    return rect;\n}\nfunction computeHeightAndMargins(el) {\n    return el.getBoundingClientRect().height + computeVMargins(el);\n}\nfunction computeVMargins(el) {\n    var computed = window.getComputedStyle(el);\n    return parseInt(computed.marginTop, 10) +\n        parseInt(computed.marginBottom, 10);\n}\n// does not return window\nfunction getClippingParents(el) {\n    var parents = [];\n    while (el instanceof HTMLElement) { // will stop when gets to document or null\n        var computedStyle = window.getComputedStyle(el);\n        if (computedStyle.position === 'fixed') {\n            break;\n        }\n        if ((/(auto|scroll)/).test(computedStyle.overflow + computedStyle.overflowY + computedStyle.overflowX)) {\n            parents.push(el);\n        }\n        el = el.parentNode;\n    }\n    return parents;\n}\n\n// given a function that resolves a result asynchronously.\n// the function can either call passed-in success and failure callbacks,\n// or it can return a promise.\n// if you need to pass additional params to func, bind them first.\nfunction unpromisify(func, success, failure) {\n    // guard against success/failure callbacks being called more than once\n    // and guard against a promise AND callback being used together.\n    var isResolved = false;\n    var wrappedSuccess = function () {\n        if (!isResolved) {\n            isResolved = true;\n            success.apply(this, arguments); // eslint-disable-line prefer-rest-params\n        }\n    };\n    var wrappedFailure = function () {\n        if (!isResolved) {\n            isResolved = true;\n            if (failure) {\n                failure.apply(this, arguments); // eslint-disable-line prefer-rest-params\n            }\n        }\n    };\n    var res = func(wrappedSuccess, wrappedFailure);\n    if (res && typeof res.then === 'function') {\n        res.then(wrappedSuccess, wrappedFailure);\n    }\n}\n\nvar Emitter = /** @class */ (function () {\n    function Emitter() {\n        this.handlers = {};\n        this.thisContext = null;\n    }\n    Emitter.prototype.setThisContext = function (thisContext) {\n        this.thisContext = thisContext;\n    };\n    Emitter.prototype.setOptions = function (options) {\n        this.options = options;\n    };\n    Emitter.prototype.on = function (type, handler) {\n        addToHash(this.handlers, type, handler);\n    };\n    Emitter.prototype.off = function (type, handler) {\n        removeFromHash(this.handlers, type, handler);\n    };\n    Emitter.prototype.trigger = function (type) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var attachedHandlers = this.handlers[type] || [];\n        var optionHandler = this.options && this.options[type];\n        var handlers = [].concat(optionHandler || [], attachedHandlers);\n        for (var _a = 0, handlers_1 = handlers; _a < handlers_1.length; _a++) {\n            var handler = handlers_1[_a];\n            handler.apply(this.thisContext, args);\n        }\n    };\n    Emitter.prototype.hasHandlers = function (type) {\n        return Boolean((this.handlers[type] && this.handlers[type].length) ||\n            (this.options && this.options[type]));\n    };\n    return Emitter;\n}());\nfunction addToHash(hash, type, handler) {\n    (hash[type] || (hash[type] = []))\n        .push(handler);\n}\nfunction removeFromHash(hash, type, handler) {\n    if (handler) {\n        if (hash[type]) {\n            hash[type] = hash[type].filter(function (func) { return func !== handler; });\n        }\n    }\n    else {\n        delete hash[type]; // remove all handler funcs for this type\n    }\n}\n\n/*\nRecords offset information for a set of elements, relative to an origin element.\nCan record the left/right OR the top/bottom OR both.\nProvides methods for querying the cache by position.\n*/\nvar PositionCache = /** @class */ (function () {\n    function PositionCache(originEl, els, isHorizontal, isVertical) {\n        this.els = els;\n        var originClientRect = this.originClientRect = originEl.getBoundingClientRect(); // relative to viewport top-left\n        if (isHorizontal) {\n            this.buildElHorizontals(originClientRect.left);\n        }\n        if (isVertical) {\n            this.buildElVerticals(originClientRect.top);\n        }\n    }\n    // Populates the left/right internal coordinate arrays\n    PositionCache.prototype.buildElHorizontals = function (originClientLeft) {\n        var lefts = [];\n        var rights = [];\n        for (var _i = 0, _a = this.els; _i < _a.length; _i++) {\n            var el = _a[_i];\n            var rect = el.getBoundingClientRect();\n            lefts.push(rect.left - originClientLeft);\n            rights.push(rect.right - originClientLeft);\n        }\n        this.lefts = lefts;\n        this.rights = rights;\n    };\n    // Populates the top/bottom internal coordinate arrays\n    PositionCache.prototype.buildElVerticals = function (originClientTop) {\n        var tops = [];\n        var bottoms = [];\n        for (var _i = 0, _a = this.els; _i < _a.length; _i++) {\n            var el = _a[_i];\n            var rect = el.getBoundingClientRect();\n            tops.push(rect.top - originClientTop);\n            bottoms.push(rect.bottom - originClientTop);\n        }\n        this.tops = tops;\n        this.bottoms = bottoms;\n    };\n    // Given a left offset (from document left), returns the index of the el that it horizontally intersects.\n    // If no intersection is made, returns undefined.\n    PositionCache.prototype.leftToIndex = function (leftPosition) {\n        var _a = this, lefts = _a.lefts, rights = _a.rights;\n        var len = lefts.length;\n        var i;\n        for (i = 0; i < len; i += 1) {\n            if (leftPosition >= lefts[i] && leftPosition < rights[i]) {\n                return i;\n            }\n        }\n        return undefined; // TODO: better\n    };\n    // Given a top offset (from document top), returns the index of the el that it vertically intersects.\n    // If no intersection is made, returns undefined.\n    PositionCache.prototype.topToIndex = function (topPosition) {\n        var _a = this, tops = _a.tops, bottoms = _a.bottoms;\n        var len = tops.length;\n        var i;\n        for (i = 0; i < len; i += 1) {\n            if (topPosition >= tops[i] && topPosition < bottoms[i]) {\n                return i;\n            }\n        }\n        return undefined; // TODO: better\n    };\n    // Gets the width of the element at the given index\n    PositionCache.prototype.getWidth = function (leftIndex) {\n        return this.rights[leftIndex] - this.lefts[leftIndex];\n    };\n    // Gets the height of the element at the given index\n    PositionCache.prototype.getHeight = function (topIndex) {\n        return this.bottoms[topIndex] - this.tops[topIndex];\n    };\n    return PositionCache;\n}());\n\n/* eslint max-classes-per-file: \"off\" */\n/*\nAn object for getting/setting scroll-related information for an element.\nInternally, this is done very differently for window versus DOM element,\nso this object serves as a common interface.\n*/\nvar ScrollController = /** @class */ (function () {\n    function ScrollController() {\n    }\n    ScrollController.prototype.getMaxScrollTop = function () {\n        return this.getScrollHeight() - this.getClientHeight();\n    };\n    ScrollController.prototype.getMaxScrollLeft = function () {\n        return this.getScrollWidth() - this.getClientWidth();\n    };\n    ScrollController.prototype.canScrollVertically = function () {\n        return this.getMaxScrollTop() > 0;\n    };\n    ScrollController.prototype.canScrollHorizontally = function () {\n        return this.getMaxScrollLeft() > 0;\n    };\n    ScrollController.prototype.canScrollUp = function () {\n        return this.getScrollTop() > 0;\n    };\n    ScrollController.prototype.canScrollDown = function () {\n        return this.getScrollTop() < this.getMaxScrollTop();\n    };\n    ScrollController.prototype.canScrollLeft = function () {\n        return this.getScrollLeft() > 0;\n    };\n    ScrollController.prototype.canScrollRight = function () {\n        return this.getScrollLeft() < this.getMaxScrollLeft();\n    };\n    return ScrollController;\n}());\nvar ElementScrollController = /** @class */ (function (_super) {\n    __extends(ElementScrollController, _super);\n    function ElementScrollController(el) {\n        var _this = _super.call(this) || this;\n        _this.el = el;\n        return _this;\n    }\n    ElementScrollController.prototype.getScrollTop = function () {\n        return this.el.scrollTop;\n    };\n    ElementScrollController.prototype.getScrollLeft = function () {\n        return this.el.scrollLeft;\n    };\n    ElementScrollController.prototype.setScrollTop = function (top) {\n        this.el.scrollTop = top;\n    };\n    ElementScrollController.prototype.setScrollLeft = function (left) {\n        this.el.scrollLeft = left;\n    };\n    ElementScrollController.prototype.getScrollWidth = function () {\n        return this.el.scrollWidth;\n    };\n    ElementScrollController.prototype.getScrollHeight = function () {\n        return this.el.scrollHeight;\n    };\n    ElementScrollController.prototype.getClientHeight = function () {\n        return this.el.clientHeight;\n    };\n    ElementScrollController.prototype.getClientWidth = function () {\n        return this.el.clientWidth;\n    };\n    return ElementScrollController;\n}(ScrollController));\nvar WindowScrollController = /** @class */ (function (_super) {\n    __extends(WindowScrollController, _super);\n    function WindowScrollController() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    WindowScrollController.prototype.getScrollTop = function () {\n        return window.pageYOffset;\n    };\n    WindowScrollController.prototype.getScrollLeft = function () {\n        return window.pageXOffset;\n    };\n    WindowScrollController.prototype.setScrollTop = function (n) {\n        window.scroll(window.pageXOffset, n);\n    };\n    WindowScrollController.prototype.setScrollLeft = function (n) {\n        window.scroll(n, window.pageYOffset);\n    };\n    WindowScrollController.prototype.getScrollWidth = function () {\n        return document.documentElement.scrollWidth;\n    };\n    WindowScrollController.prototype.getScrollHeight = function () {\n        return document.documentElement.scrollHeight;\n    };\n    WindowScrollController.prototype.getClientHeight = function () {\n        return document.documentElement.clientHeight;\n    };\n    WindowScrollController.prototype.getClientWidth = function () {\n        return document.documentElement.clientWidth;\n    };\n    return WindowScrollController;\n}(ScrollController));\n\nvar Theme = /** @class */ (function () {\n    function Theme(calendarOptions) {\n        if (this.iconOverrideOption) {\n            this.setIconOverride(calendarOptions[this.iconOverrideOption]);\n        }\n    }\n    Theme.prototype.setIconOverride = function (iconOverrideHash) {\n        var iconClassesCopy;\n        var buttonName;\n        if (typeof iconOverrideHash === 'object' && iconOverrideHash) { // non-null object\n            iconClassesCopy = __assign({}, this.iconClasses);\n            for (buttonName in iconOverrideHash) {\n                iconClassesCopy[buttonName] = this.applyIconOverridePrefix(iconOverrideHash[buttonName]);\n            }\n            this.iconClasses = iconClassesCopy;\n        }\n        else if (iconOverrideHash === false) {\n            this.iconClasses = {};\n        }\n    };\n    Theme.prototype.applyIconOverridePrefix = function (className) {\n        var prefix = this.iconOverridePrefix;\n        if (prefix && className.indexOf(prefix) !== 0) { // if not already present\n            className = prefix + className;\n        }\n        return className;\n    };\n    Theme.prototype.getClass = function (key) {\n        return this.classes[key] || '';\n    };\n    Theme.prototype.getIconClass = function (buttonName, isRtl) {\n        var className;\n        if (isRtl && this.rtlIconClasses) {\n            className = this.rtlIconClasses[buttonName] || this.iconClasses[buttonName];\n        }\n        else {\n            className = this.iconClasses[buttonName];\n        }\n        if (className) {\n            return this.baseIconClass + \" \" + className;\n        }\n        return '';\n    };\n    Theme.prototype.getCustomButtonIconClass = function (customButtonProps) {\n        var className;\n        if (this.iconOverrideCustomButtonOption) {\n            className = customButtonProps[this.iconOverrideCustomButtonOption];\n            if (className) {\n                return this.baseIconClass + \" \" + this.applyIconOverridePrefix(className);\n            }\n        }\n        return '';\n    };\n    return Theme;\n}());\nTheme.prototype.classes = {};\nTheme.prototype.iconClasses = {};\nTheme.prototype.baseIconClass = '';\nTheme.prototype.iconOverridePrefix = '';\n\nvar ScrollResponder = /** @class */ (function () {\n    function ScrollResponder(execFunc, emitter, scrollTime, scrollTimeReset) {\n        var _this = this;\n        this.execFunc = execFunc;\n        this.emitter = emitter;\n        this.scrollTime = scrollTime;\n        this.scrollTimeReset = scrollTimeReset;\n        this.handleScrollRequest = function (request) {\n            _this.queuedRequest = __assign({}, _this.queuedRequest || {}, request);\n            _this.drain();\n        };\n        emitter.on('_scrollRequest', this.handleScrollRequest);\n        this.fireInitialScroll();\n    }\n    ScrollResponder.prototype.detach = function () {\n        this.emitter.off('_scrollRequest', this.handleScrollRequest);\n    };\n    ScrollResponder.prototype.update = function (isDatesNew) {\n        if (isDatesNew && this.scrollTimeReset) {\n            this.fireInitialScroll(); // will drain\n        }\n        else {\n            this.drain();\n        }\n    };\n    ScrollResponder.prototype.fireInitialScroll = function () {\n        this.handleScrollRequest({\n            time: this.scrollTime,\n        });\n    };\n    ScrollResponder.prototype.drain = function () {\n        if (this.queuedRequest && this.execFunc(this.queuedRequest)) {\n            this.queuedRequest = null;\n        }\n    };\n    return ScrollResponder;\n}());\n\nvar ViewContextType = createContext({}); // for Components\nfunction buildViewContext(viewSpec, viewApi, viewOptions, dateProfileGenerator, dateEnv, theme, pluginHooks, dispatch, getCurrentData, emitter, calendarApi, registerInteractiveComponent, unregisterInteractiveComponent) {\n    return {\n        dateEnv: dateEnv,\n        options: viewOptions,\n        pluginHooks: pluginHooks,\n        emitter: emitter,\n        dispatch: dispatch,\n        getCurrentData: getCurrentData,\n        calendarApi: calendarApi,\n        viewSpec: viewSpec,\n        viewApi: viewApi,\n        dateProfileGenerator: dateProfileGenerator,\n        theme: theme,\n        isRtl: viewOptions.direction === 'rtl',\n        addResizeHandler: function (handler) {\n            emitter.on('_resize', handler);\n        },\n        removeResizeHandler: function (handler) {\n            emitter.off('_resize', handler);\n        },\n        createScrollResponder: function (execFunc) {\n            return new ScrollResponder(execFunc, emitter, createDuration(viewOptions.scrollTime), viewOptions.scrollTimeReset);\n        },\n        registerInteractiveComponent: registerInteractiveComponent,\n        unregisterInteractiveComponent: unregisterInteractiveComponent,\n    };\n}\n\n/* eslint max-classes-per-file: off */\nvar PureComponent = /** @class */ (function (_super) {\n    __extends(PureComponent, _super);\n    function PureComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PureComponent.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n        if (this.debug) {\n            // eslint-disable-next-line no-console\n            console.log(getUnequalProps(nextProps, this.props), getUnequalProps(nextState, this.state));\n        }\n        return !compareObjs(this.props, nextProps, this.propEquality) ||\n            !compareObjs(this.state, nextState, this.stateEquality);\n    };\n    PureComponent.addPropsEquality = addPropsEquality;\n    PureComponent.addStateEquality = addStateEquality;\n    PureComponent.contextType = ViewContextType;\n    return PureComponent;\n}(Component));\nPureComponent.prototype.propEquality = {};\nPureComponent.prototype.stateEquality = {};\nvar BaseComponent = /** @class */ (function (_super) {\n    __extends(BaseComponent, _super);\n    function BaseComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BaseComponent.contextType = ViewContextType;\n    return BaseComponent;\n}(PureComponent));\nfunction addPropsEquality(propEquality) {\n    var hash = Object.create(this.prototype.propEquality);\n    __assign(hash, propEquality);\n    this.prototype.propEquality = hash;\n}\nfunction addStateEquality(stateEquality) {\n    var hash = Object.create(this.prototype.stateEquality);\n    __assign(hash, stateEquality);\n    this.prototype.stateEquality = hash;\n}\n// use other one\nfunction setRef(ref, current) {\n    if (typeof ref === 'function') {\n        ref(current);\n    }\n    else if (ref) {\n        // see https://github.com/facebook/react/issues/13029\n        ref.current = current;\n    }\n}\n\n/*\nan INTERACTABLE date component\n\nPURPOSES:\n- hook up to fg, fill, and mirror renderers\n- interface for dragging and hits\n*/\nvar DateComponent = /** @class */ (function (_super) {\n    __extends(DateComponent, _super);\n    function DateComponent() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.uid = guid();\n        return _this;\n    }\n    // Hit System\n    // -----------------------------------------------------------------------------------------------------------------\n    DateComponent.prototype.prepareHits = function () {\n    };\n    DateComponent.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n        return null; // this should be abstract\n    };\n    // Pointer Interaction Utils\n    // -----------------------------------------------------------------------------------------------------------------\n    DateComponent.prototype.isValidSegDownEl = function (el) {\n        return !this.props.eventDrag && // HACK\n            !this.props.eventResize && // HACK\n            !elementClosest(el, '.fc-event-mirror');\n    };\n    DateComponent.prototype.isValidDateDownEl = function (el) {\n        return !elementClosest(el, '.fc-event:not(.fc-bg-event)') &&\n            !elementClosest(el, '.fc-more-link') && // a \"more..\" link\n            !elementClosest(el, 'a[data-navlink]') && // a clickable nav link\n            !elementClosest(el, '.fc-popover'); // hack\n    };\n    return DateComponent;\n}(BaseComponent));\n\n// TODO: easier way to add new hooks? need to update a million things\nfunction createPlugin(input) {\n    return {\n        id: guid(),\n        deps: input.deps || [],\n        reducers: input.reducers || [],\n        isLoadingFuncs: input.isLoadingFuncs || [],\n        contextInit: [].concat(input.contextInit || []),\n        eventRefiners: input.eventRefiners || {},\n        eventDefMemberAdders: input.eventDefMemberAdders || [],\n        eventSourceRefiners: input.eventSourceRefiners || {},\n        isDraggableTransformers: input.isDraggableTransformers || [],\n        eventDragMutationMassagers: input.eventDragMutationMassagers || [],\n        eventDefMutationAppliers: input.eventDefMutationAppliers || [],\n        dateSelectionTransformers: input.dateSelectionTransformers || [],\n        datePointTransforms: input.datePointTransforms || [],\n        dateSpanTransforms: input.dateSpanTransforms || [],\n        views: input.views || {},\n        viewPropsTransformers: input.viewPropsTransformers || [],\n        isPropsValid: input.isPropsValid || null,\n        externalDefTransforms: input.externalDefTransforms || [],\n        viewContainerAppends: input.viewContainerAppends || [],\n        eventDropTransformers: input.eventDropTransformers || [],\n        componentInteractions: input.componentInteractions || [],\n        calendarInteractions: input.calendarInteractions || [],\n        themeClasses: input.themeClasses || {},\n        eventSourceDefs: input.eventSourceDefs || [],\n        cmdFormatter: input.cmdFormatter,\n        recurringTypes: input.recurringTypes || [],\n        namedTimeZonedImpl: input.namedTimeZonedImpl,\n        initialView: input.initialView || '',\n        elementDraggingImpl: input.elementDraggingImpl,\n        optionChangeHandlers: input.optionChangeHandlers || {},\n        scrollGridImpl: input.scrollGridImpl || null,\n        contentTypeHandlers: input.contentTypeHandlers || {},\n        listenerRefiners: input.listenerRefiners || {},\n        optionRefiners: input.optionRefiners || {},\n        propSetHandlers: input.propSetHandlers || {},\n    };\n}\nfunction buildPluginHooks(pluginDefs, globalDefs) {\n    var isAdded = {};\n    var hooks = {\n        reducers: [],\n        isLoadingFuncs: [],\n        contextInit: [],\n        eventRefiners: {},\n        eventDefMemberAdders: [],\n        eventSourceRefiners: {},\n        isDraggableTransformers: [],\n        eventDragMutationMassagers: [],\n        eventDefMutationAppliers: [],\n        dateSelectionTransformers: [],\n        datePointTransforms: [],\n        dateSpanTransforms: [],\n        views: {},\n        viewPropsTransformers: [],\n        isPropsValid: null,\n        externalDefTransforms: [],\n        viewContainerAppends: [],\n        eventDropTransformers: [],\n        componentInteractions: [],\n        calendarInteractions: [],\n        themeClasses: {},\n        eventSourceDefs: [],\n        cmdFormatter: null,\n        recurringTypes: [],\n        namedTimeZonedImpl: null,\n        initialView: '',\n        elementDraggingImpl: null,\n        optionChangeHandlers: {},\n        scrollGridImpl: null,\n        contentTypeHandlers: {},\n        listenerRefiners: {},\n        optionRefiners: {},\n        propSetHandlers: {},\n    };\n    function addDefs(defs) {\n        for (var _i = 0, defs_1 = defs; _i < defs_1.length; _i++) {\n            var def = defs_1[_i];\n            if (!isAdded[def.id]) {\n                isAdded[def.id] = true;\n                addDefs(def.deps);\n                hooks = combineHooks(hooks, def);\n            }\n        }\n    }\n    if (pluginDefs) {\n        addDefs(pluginDefs);\n    }\n    addDefs(globalDefs);\n    return hooks;\n}\nfunction buildBuildPluginHooks() {\n    var currentOverrideDefs = [];\n    var currentGlobalDefs = [];\n    var currentHooks;\n    return function (overrideDefs, globalDefs) {\n        if (!currentHooks || !isArraysEqual(overrideDefs, currentOverrideDefs) || !isArraysEqual(globalDefs, currentGlobalDefs)) {\n            currentHooks = buildPluginHooks(overrideDefs, globalDefs);\n        }\n        currentOverrideDefs = overrideDefs;\n        currentGlobalDefs = globalDefs;\n        return currentHooks;\n    };\n}\nfunction combineHooks(hooks0, hooks1) {\n    return {\n        reducers: hooks0.reducers.concat(hooks1.reducers),\n        isLoadingFuncs: hooks0.isLoadingFuncs.concat(hooks1.isLoadingFuncs),\n        contextInit: hooks0.contextInit.concat(hooks1.contextInit),\n        eventRefiners: __assign(__assign({}, hooks0.eventRefiners), hooks1.eventRefiners),\n        eventDefMemberAdders: hooks0.eventDefMemberAdders.concat(hooks1.eventDefMemberAdders),\n        eventSourceRefiners: __assign(__assign({}, hooks0.eventSourceRefiners), hooks1.eventSourceRefiners),\n        isDraggableTransformers: hooks0.isDraggableTransformers.concat(hooks1.isDraggableTransformers),\n        eventDragMutationMassagers: hooks0.eventDragMutationMassagers.concat(hooks1.eventDragMutationMassagers),\n        eventDefMutationAppliers: hooks0.eventDefMutationAppliers.concat(hooks1.eventDefMutationAppliers),\n        dateSelectionTransformers: hooks0.dateSelectionTransformers.concat(hooks1.dateSelectionTransformers),\n        datePointTransforms: hooks0.datePointTransforms.concat(hooks1.datePointTransforms),\n        dateSpanTransforms: hooks0.dateSpanTransforms.concat(hooks1.dateSpanTransforms),\n        views: __assign(__assign({}, hooks0.views), hooks1.views),\n        viewPropsTransformers: hooks0.viewPropsTransformers.concat(hooks1.viewPropsTransformers),\n        isPropsValid: hooks1.isPropsValid || hooks0.isPropsValid,\n        externalDefTransforms: hooks0.externalDefTransforms.concat(hooks1.externalDefTransforms),\n        viewContainerAppends: hooks0.viewContainerAppends.concat(hooks1.viewContainerAppends),\n        eventDropTransformers: hooks0.eventDropTransformers.concat(hooks1.eventDropTransformers),\n        calendarInteractions: hooks0.calendarInteractions.concat(hooks1.calendarInteractions),\n        componentInteractions: hooks0.componentInteractions.concat(hooks1.componentInteractions),\n        themeClasses: __assign(__assign({}, hooks0.themeClasses), hooks1.themeClasses),\n        eventSourceDefs: hooks0.eventSourceDefs.concat(hooks1.eventSourceDefs),\n        cmdFormatter: hooks1.cmdFormatter || hooks0.cmdFormatter,\n        recurringTypes: hooks0.recurringTypes.concat(hooks1.recurringTypes),\n        namedTimeZonedImpl: hooks1.namedTimeZonedImpl || hooks0.namedTimeZonedImpl,\n        initialView: hooks0.initialView || hooks1.initialView,\n        elementDraggingImpl: hooks0.elementDraggingImpl || hooks1.elementDraggingImpl,\n        optionChangeHandlers: __assign(__assign({}, hooks0.optionChangeHandlers), hooks1.optionChangeHandlers),\n        scrollGridImpl: hooks1.scrollGridImpl || hooks0.scrollGridImpl,\n        contentTypeHandlers: __assign(__assign({}, hooks0.contentTypeHandlers), hooks1.contentTypeHandlers),\n        listenerRefiners: __assign(__assign({}, hooks0.listenerRefiners), hooks1.listenerRefiners),\n        optionRefiners: __assign(__assign({}, hooks0.optionRefiners), hooks1.optionRefiners),\n        propSetHandlers: __assign(__assign({}, hooks0.propSetHandlers), hooks1.propSetHandlers),\n    };\n}\n\nvar StandardTheme = /** @class */ (function (_super) {\n    __extends(StandardTheme, _super);\n    function StandardTheme() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return StandardTheme;\n}(Theme));\nStandardTheme.prototype.classes = {\n    root: 'fc-theme-standard',\n    tableCellShaded: 'fc-cell-shaded',\n    buttonGroup: 'fc-button-group',\n    button: 'fc-button fc-button-primary',\n    buttonActive: 'fc-button-active',\n};\nStandardTheme.prototype.baseIconClass = 'fc-icon';\nStandardTheme.prototype.iconClasses = {\n    close: 'fc-icon-x',\n    prev: 'fc-icon-chevron-left',\n    next: 'fc-icon-chevron-right',\n    prevYear: 'fc-icon-chevrons-left',\n    nextYear: 'fc-icon-chevrons-right',\n};\nStandardTheme.prototype.rtlIconClasses = {\n    prev: 'fc-icon-chevron-right',\n    next: 'fc-icon-chevron-left',\n    prevYear: 'fc-icon-chevrons-right',\n    nextYear: 'fc-icon-chevrons-left',\n};\nStandardTheme.prototype.iconOverrideOption = 'buttonIcons'; // TODO: make TS-friendly\nStandardTheme.prototype.iconOverrideCustomButtonOption = 'icon';\nStandardTheme.prototype.iconOverridePrefix = 'fc-icon-';\n\nfunction compileViewDefs(defaultConfigs, overrideConfigs) {\n    var hash = {};\n    var viewType;\n    for (viewType in defaultConfigs) {\n        ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    }\n    for (viewType in overrideConfigs) {\n        ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    }\n    return hash;\n}\nfunction ensureViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n    if (hash[viewType]) {\n        return hash[viewType];\n    }\n    var viewDef = buildViewDef(viewType, hash, defaultConfigs, overrideConfigs);\n    if (viewDef) {\n        hash[viewType] = viewDef;\n    }\n    return viewDef;\n}\nfunction buildViewDef(viewType, hash, defaultConfigs, overrideConfigs) {\n    var defaultConfig = defaultConfigs[viewType];\n    var overrideConfig = overrideConfigs[viewType];\n    var queryProp = function (name) { return ((defaultConfig && defaultConfig[name] !== null) ? defaultConfig[name] :\n        ((overrideConfig && overrideConfig[name] !== null) ? overrideConfig[name] : null)); };\n    var theComponent = queryProp('component');\n    var superType = queryProp('superType');\n    var superDef = null;\n    if (superType) {\n        if (superType === viewType) {\n            throw new Error('Can\\'t have a custom view type that references itself');\n        }\n        superDef = ensureViewDef(superType, hash, defaultConfigs, overrideConfigs);\n    }\n    if (!theComponent && superDef) {\n        theComponent = superDef.component;\n    }\n    if (!theComponent) {\n        return null; // don't throw a warning, might be settings for a single-unit view\n    }\n    return {\n        type: viewType,\n        component: theComponent,\n        defaults: __assign(__assign({}, (superDef ? superDef.defaults : {})), (defaultConfig ? defaultConfig.rawOptions : {})),\n        overrides: __assign(__assign({}, (superDef ? superDef.overrides : {})), (overrideConfig ? overrideConfig.rawOptions : {})),\n    };\n}\n\n/* eslint max-classes-per-file: off */\n// NOTE: in JSX, you should always use this class with <HookProps> arg. otherwise, will default to any???\nvar RenderHook = /** @class */ (function (_super) {\n    __extends(RenderHook, _super);\n    function RenderHook() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.rootElRef = createRef();\n        _this.handleRootEl = function (el) {\n            setRef(_this.rootElRef, el);\n            if (_this.props.elRef) {\n                setRef(_this.props.elRef, el);\n            }\n        };\n        return _this;\n    }\n    RenderHook.prototype.render = function () {\n        var _this = this;\n        var props = this.props;\n        var hookProps = props.hookProps;\n        return (createElement(MountHook, { hookProps: hookProps, didMount: props.didMount, willUnmount: props.willUnmount, elRef: this.handleRootEl }, function (rootElRef) { return (createElement(ContentHook, { hookProps: hookProps, content: props.content, defaultContent: props.defaultContent, backupElRef: _this.rootElRef }, function (innerElRef, innerContent) { return props.children(rootElRef, normalizeClassNames(props.classNames, hookProps), innerElRef, innerContent); })); }));\n    };\n    return RenderHook;\n}(BaseComponent));\n// TODO: rename to be about function, not default. use in above type\n// for forcing rerender of components that use the ContentHook\nvar CustomContentRenderContext = createContext(0);\nfunction ContentHook(props) {\n    return (createElement(CustomContentRenderContext.Consumer, null, function (renderId) { return (createElement(ContentHookInner, __assign({ renderId: renderId }, props))); }));\n}\nvar ContentHookInner = /** @class */ (function (_super) {\n    __extends(ContentHookInner, _super);\n    function ContentHookInner() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.innerElRef = createRef();\n        return _this;\n    }\n    ContentHookInner.prototype.render = function () {\n        return this.props.children(this.innerElRef, this.renderInnerContent());\n    };\n    ContentHookInner.prototype.componentDidMount = function () {\n        this.updateCustomContent();\n    };\n    ContentHookInner.prototype.componentDidUpdate = function () {\n        this.updateCustomContent();\n    };\n    ContentHookInner.prototype.componentWillUnmount = function () {\n        if (this.customContentInfo && this.customContentInfo.destroy) {\n            this.customContentInfo.destroy();\n        }\n    };\n    ContentHookInner.prototype.renderInnerContent = function () {\n        var customContentInfo = this.customContentInfo; // only populated if using non-[p]react node(s)\n        var innerContent = this.getInnerContent();\n        var meta = this.getContentMeta(innerContent);\n        // initial run, or content-type changing? (from vue -> react for example)\n        if (!customContentInfo || customContentInfo.contentKey !== meta.contentKey) {\n            // clearing old value\n            if (customContentInfo) {\n                if (customContentInfo.destroy) {\n                    customContentInfo.destroy();\n                }\n                customContentInfo = this.customContentInfo = null;\n            }\n            // assigning new value\n            if (meta.contentKey) {\n                customContentInfo = this.customContentInfo = __assign({ contentKey: meta.contentKey, contentVal: innerContent[meta.contentKey] }, meta.buildLifecycleFuncs());\n            }\n            // updating\n        }\n        else if (customContentInfo) {\n            customContentInfo.contentVal = innerContent[meta.contentKey];\n        }\n        return customContentInfo\n            ? [] // signal that something was specified\n            : innerContent; // assume a [p]react vdom node. use it\n    };\n    ContentHookInner.prototype.getInnerContent = function () {\n        var props = this.props;\n        var innerContent = normalizeContent(props.content, props.hookProps);\n        if (innerContent === undefined) { // use the default\n            innerContent = normalizeContent(props.defaultContent, props.hookProps);\n        }\n        return innerContent == null ? null : innerContent; // convert undefined to null (better for React)\n    };\n    ContentHookInner.prototype.getContentMeta = function (innerContent) {\n        var contentTypeHandlers = this.context.pluginHooks.contentTypeHandlers;\n        var contentKey = '';\n        var buildLifecycleFuncs = null;\n        if (innerContent) { // allowed to be null, for convenience to caller\n            for (var searchKey in contentTypeHandlers) {\n                if (innerContent[searchKey] !== undefined) {\n                    contentKey = searchKey;\n                    buildLifecycleFuncs = contentTypeHandlers[searchKey];\n                    break;\n                }\n            }\n        }\n        return { contentKey: contentKey, buildLifecycleFuncs: buildLifecycleFuncs };\n    };\n    ContentHookInner.prototype.updateCustomContent = function () {\n        if (this.customContentInfo) { // for non-[p]react\n            this.customContentInfo.render(this.innerElRef.current || this.props.backupElRef.current, // the element to render into\n            this.customContentInfo.contentVal);\n        }\n    };\n    return ContentHookInner;\n}(BaseComponent));\nvar MountHook = /** @class */ (function (_super) {\n    __extends(MountHook, _super);\n    function MountHook() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleRootEl = function (rootEl) {\n            _this.rootEl = rootEl;\n            if (_this.props.elRef) {\n                setRef(_this.props.elRef, rootEl);\n            }\n        };\n        return _this;\n    }\n    MountHook.prototype.render = function () {\n        return this.props.children(this.handleRootEl);\n    };\n    MountHook.prototype.componentDidMount = function () {\n        var callback = this.props.didMount;\n        if (callback) {\n            callback(__assign(__assign({}, this.props.hookProps), { el: this.rootEl }));\n        }\n    };\n    MountHook.prototype.componentWillUnmount = function () {\n        var callback = this.props.willUnmount;\n        if (callback) {\n            callback(__assign(__assign({}, this.props.hookProps), { el: this.rootEl }));\n        }\n    };\n    return MountHook;\n}(BaseComponent));\nfunction buildClassNameNormalizer() {\n    var currentGenerator;\n    var currentHookProps;\n    var currentClassNames = [];\n    return function (generator, hookProps) {\n        if (!currentHookProps || !isPropsEqual(currentHookProps, hookProps) || generator !== currentGenerator) {\n            currentGenerator = generator;\n            currentHookProps = hookProps;\n            currentClassNames = normalizeClassNames(generator, hookProps);\n        }\n        return currentClassNames;\n    };\n}\nfunction normalizeClassNames(classNames, hookProps) {\n    if (typeof classNames === 'function') {\n        classNames = classNames(hookProps);\n    }\n    return parseClassNames(classNames);\n}\nfunction normalizeContent(input, hookProps) {\n    if (typeof input === 'function') {\n        return input(hookProps, createElement); // give the function the vdom-creation func\n    }\n    return input;\n}\n\nvar ViewRoot = /** @class */ (function (_super) {\n    __extends(ViewRoot, _super);\n    function ViewRoot() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.normalizeClassNames = buildClassNameNormalizer();\n        return _this;\n    }\n    ViewRoot.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        var options = context.options;\n        var hookProps = { view: context.viewApi };\n        var customClassNames = this.normalizeClassNames(options.viewClassNames, hookProps);\n        return (createElement(MountHook, { hookProps: hookProps, didMount: options.viewDidMount, willUnmount: options.viewWillUnmount, elRef: props.elRef }, function (rootElRef) { return props.children(rootElRef, [\"fc-\" + props.viewSpec.type + \"-view\", 'fc-view'].concat(customClassNames)); }));\n    };\n    return ViewRoot;\n}(BaseComponent));\n\nfunction parseViewConfigs(inputs) {\n    return mapHash(inputs, parseViewConfig);\n}\nfunction parseViewConfig(input) {\n    var rawOptions = typeof input === 'function' ?\n        { component: input } :\n        input;\n    var component = rawOptions.component;\n    if (rawOptions.content) {\n        component = createViewHookComponent(rawOptions);\n        // TODO: remove content/classNames/didMount/etc from options?\n    }\n    return {\n        superType: rawOptions.type,\n        component: component,\n        rawOptions: rawOptions,\n    };\n}\nfunction createViewHookComponent(options) {\n    return function (viewProps) { return (createElement(ViewContextType.Consumer, null, function (context) { return (createElement(ViewRoot, { viewSpec: context.viewSpec }, function (viewElRef, viewClassNames) {\n        var hookProps = __assign(__assign({}, viewProps), { nextDayThreshold: context.options.nextDayThreshold });\n        return (createElement(RenderHook, { hookProps: hookProps, classNames: options.classNames, content: options.content, didMount: options.didMount, willUnmount: options.willUnmount, elRef: viewElRef }, function (rootElRef, customClassNames, innerElRef, innerContent) { return (createElement(\"div\", { className: viewClassNames.concat(customClassNames).join(' '), ref: rootElRef }, innerContent)); }));\n    })); })); };\n}\n\nfunction buildViewSpecs(defaultInputs, optionOverrides, dynamicOptionOverrides, localeDefaults) {\n    var defaultConfigs = parseViewConfigs(defaultInputs);\n    var overrideConfigs = parseViewConfigs(optionOverrides.views);\n    var viewDefs = compileViewDefs(defaultConfigs, overrideConfigs);\n    return mapHash(viewDefs, function (viewDef) { return buildViewSpec(viewDef, overrideConfigs, optionOverrides, dynamicOptionOverrides, localeDefaults); });\n}\nfunction buildViewSpec(viewDef, overrideConfigs, optionOverrides, dynamicOptionOverrides, localeDefaults) {\n    var durationInput = viewDef.overrides.duration ||\n        viewDef.defaults.duration ||\n        dynamicOptionOverrides.duration ||\n        optionOverrides.duration;\n    var duration = null;\n    var durationUnit = '';\n    var singleUnit = '';\n    var singleUnitOverrides = {};\n    if (durationInput) {\n        duration = createDurationCached(durationInput);\n        if (duration) { // valid?\n            var denom = greatestDurationDenominator(duration);\n            durationUnit = denom.unit;\n            if (denom.value === 1) {\n                singleUnit = durationUnit;\n                singleUnitOverrides = overrideConfigs[durationUnit] ? overrideConfigs[durationUnit].rawOptions : {};\n            }\n        }\n    }\n    var queryButtonText = function (optionsSubset) {\n        var buttonTextMap = optionsSubset.buttonText || {};\n        var buttonTextKey = viewDef.defaults.buttonTextKey;\n        if (buttonTextKey != null && buttonTextMap[buttonTextKey] != null) {\n            return buttonTextMap[buttonTextKey];\n        }\n        if (buttonTextMap[viewDef.type] != null) {\n            return buttonTextMap[viewDef.type];\n        }\n        if (buttonTextMap[singleUnit] != null) {\n            return buttonTextMap[singleUnit];\n        }\n        return null;\n    };\n    var queryButtonTitle = function (optionsSubset) {\n        var buttonHints = optionsSubset.buttonHints || {};\n        var buttonKey = viewDef.defaults.buttonTextKey; // use same key as text\n        if (buttonKey != null && buttonHints[buttonKey] != null) {\n            return buttonHints[buttonKey];\n        }\n        if (buttonHints[viewDef.type] != null) {\n            return buttonHints[viewDef.type];\n        }\n        if (buttonHints[singleUnit] != null) {\n            return buttonHints[singleUnit];\n        }\n        return null;\n    };\n    return {\n        type: viewDef.type,\n        component: viewDef.component,\n        duration: duration,\n        durationUnit: durationUnit,\n        singleUnit: singleUnit,\n        optionDefaults: viewDef.defaults,\n        optionOverrides: __assign(__assign({}, singleUnitOverrides), viewDef.overrides),\n        buttonTextOverride: queryButtonText(dynamicOptionOverrides) ||\n            queryButtonText(optionOverrides) || // constructor-specified buttonText lookup hash takes precedence\n            viewDef.overrides.buttonText,\n        buttonTextDefault: queryButtonText(localeDefaults) ||\n            viewDef.defaults.buttonText ||\n            queryButtonText(BASE_OPTION_DEFAULTS) ||\n            viewDef.type,\n        // not DRY\n        buttonTitleOverride: queryButtonTitle(dynamicOptionOverrides) ||\n            queryButtonTitle(optionOverrides) ||\n            viewDef.overrides.buttonHint,\n        buttonTitleDefault: queryButtonTitle(localeDefaults) ||\n            viewDef.defaults.buttonHint ||\n            queryButtonTitle(BASE_OPTION_DEFAULTS),\n        // will eventually fall back to buttonText\n    };\n}\n// hack to get memoization working\nvar durationInputMap = {};\nfunction createDurationCached(durationInput) {\n    var json = JSON.stringify(durationInput);\n    var res = durationInputMap[json];\n    if (res === undefined) {\n        res = createDuration(durationInput);\n        durationInputMap[json] = res;\n    }\n    return res;\n}\n\nvar DateProfileGenerator = /** @class */ (function () {\n    function DateProfileGenerator(props) {\n        this.props = props;\n        this.nowDate = getNow(props.nowInput, props.dateEnv);\n        this.initHiddenDays();\n    }\n    /* Date Range Computation\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Builds a structure with info about what the dates/ranges will be for the \"prev\" view.\n    DateProfileGenerator.prototype.buildPrev = function (currentDateProfile, currentDate, forceToValid) {\n        var dateEnv = this.props.dateEnv;\n        var prevDate = dateEnv.subtract(dateEnv.startOf(currentDate, currentDateProfile.currentRangeUnit), // important for start-of-month\n        currentDateProfile.dateIncrement);\n        return this.build(prevDate, -1, forceToValid);\n    };\n    // Builds a structure with info about what the dates/ranges will be for the \"next\" view.\n    DateProfileGenerator.prototype.buildNext = function (currentDateProfile, currentDate, forceToValid) {\n        var dateEnv = this.props.dateEnv;\n        var nextDate = dateEnv.add(dateEnv.startOf(currentDate, currentDateProfile.currentRangeUnit), // important for start-of-month\n        currentDateProfile.dateIncrement);\n        return this.build(nextDate, 1, forceToValid);\n    };\n    // Builds a structure holding dates/ranges for rendering around the given date.\n    // Optional direction param indicates whether the date is being incremented/decremented\n    // from its previous value. decremented = -1, incremented = 1 (default).\n    DateProfileGenerator.prototype.build = function (currentDate, direction, forceToValid) {\n        if (forceToValid === void 0) { forceToValid = true; }\n        var props = this.props;\n        var validRange;\n        var currentInfo;\n        var isRangeAllDay;\n        var renderRange;\n        var activeRange;\n        var isValid;\n        validRange = this.buildValidRange();\n        validRange = this.trimHiddenDays(validRange);\n        if (forceToValid) {\n            currentDate = constrainMarkerToRange(currentDate, validRange);\n        }\n        currentInfo = this.buildCurrentRangeInfo(currentDate, direction);\n        isRangeAllDay = /^(year|month|week|day)$/.test(currentInfo.unit);\n        renderRange = this.buildRenderRange(this.trimHiddenDays(currentInfo.range), currentInfo.unit, isRangeAllDay);\n        renderRange = this.trimHiddenDays(renderRange);\n        activeRange = renderRange;\n        if (!props.showNonCurrentDates) {\n            activeRange = intersectRanges(activeRange, currentInfo.range);\n        }\n        activeRange = this.adjustActiveRange(activeRange);\n        activeRange = intersectRanges(activeRange, validRange); // might return null\n        // it's invalid if the originally requested date is not contained,\n        // or if the range is completely outside of the valid range.\n        isValid = rangesIntersect(currentInfo.range, validRange);\n        return {\n            // constraint for where prev/next operations can go and where events can be dragged/resized to.\n            // an object with optional start and end properties.\n            validRange: validRange,\n            // range the view is formally responsible for.\n            // for example, a month view might have 1st-31st, excluding padded dates\n            currentRange: currentInfo.range,\n            // name of largest unit being displayed, like \"month\" or \"week\"\n            currentRangeUnit: currentInfo.unit,\n            isRangeAllDay: isRangeAllDay,\n            // dates that display events and accept drag-n-drop\n            // will be `null` if no dates accept events\n            activeRange: activeRange,\n            // date range with a rendered skeleton\n            // includes not-active days that need some sort of DOM\n            renderRange: renderRange,\n            // Duration object that denotes the first visible time of any given day\n            slotMinTime: props.slotMinTime,\n            // Duration object that denotes the exclusive visible end time of any given day\n            slotMaxTime: props.slotMaxTime,\n            isValid: isValid,\n            // how far the current date will move for a prev/next operation\n            dateIncrement: this.buildDateIncrement(currentInfo.duration),\n            // pass a fallback (might be null) ^\n        };\n    };\n    // Builds an object with optional start/end properties.\n    // Indicates the minimum/maximum dates to display.\n    // not responsible for trimming hidden days.\n    DateProfileGenerator.prototype.buildValidRange = function () {\n        var input = this.props.validRangeInput;\n        var simpleInput = typeof input === 'function'\n            ? input.call(this.props.calendarApi, this.nowDate)\n            : input;\n        return this.refineRange(simpleInput) ||\n            { start: null, end: null }; // completely open-ended\n    };\n    // Builds a structure with info about the \"current\" range, the range that is\n    // highlighted as being the current month for example.\n    // See build() for a description of `direction`.\n    // Guaranteed to have `range` and `unit` properties. `duration` is optional.\n    DateProfileGenerator.prototype.buildCurrentRangeInfo = function (date, direction) {\n        var props = this.props;\n        var duration = null;\n        var unit = null;\n        var range = null;\n        var dayCount;\n        if (props.duration) {\n            duration = props.duration;\n            unit = props.durationUnit;\n            range = this.buildRangeFromDuration(date, direction, duration, unit);\n        }\n        else if ((dayCount = this.props.dayCount)) {\n            unit = 'day';\n            range = this.buildRangeFromDayCount(date, direction, dayCount);\n        }\n        else if ((range = this.buildCustomVisibleRange(date))) {\n            unit = props.dateEnv.greatestWholeUnit(range.start, range.end).unit;\n        }\n        else {\n            duration = this.getFallbackDuration();\n            unit = greatestDurationDenominator(duration).unit;\n            range = this.buildRangeFromDuration(date, direction, duration, unit);\n        }\n        return { duration: duration, unit: unit, range: range };\n    };\n    DateProfileGenerator.prototype.getFallbackDuration = function () {\n        return createDuration({ day: 1 });\n    };\n    // Returns a new activeRange to have time values (un-ambiguate)\n    // slotMinTime or slotMaxTime causes the range to expand.\n    DateProfileGenerator.prototype.adjustActiveRange = function (range) {\n        var _a = this.props, dateEnv = _a.dateEnv, usesMinMaxTime = _a.usesMinMaxTime, slotMinTime = _a.slotMinTime, slotMaxTime = _a.slotMaxTime;\n        var start = range.start, end = range.end;\n        if (usesMinMaxTime) {\n            // expand active range if slotMinTime is negative (why not when positive?)\n            if (asRoughDays(slotMinTime) < 0) {\n                start = startOfDay(start); // necessary?\n                start = dateEnv.add(start, slotMinTime);\n            }\n            // expand active range if slotMaxTime is beyond one day (why not when negative?)\n            if (asRoughDays(slotMaxTime) > 1) {\n                end = startOfDay(end); // necessary?\n                end = addDays(end, -1);\n                end = dateEnv.add(end, slotMaxTime);\n            }\n        }\n        return { start: start, end: end };\n    };\n    // Builds the \"current\" range when it is specified as an explicit duration.\n    // `unit` is the already-computed greatestDurationDenominator unit of duration.\n    DateProfileGenerator.prototype.buildRangeFromDuration = function (date, direction, duration, unit) {\n        var _a = this.props, dateEnv = _a.dateEnv, dateAlignment = _a.dateAlignment;\n        var start;\n        var end;\n        var res;\n        // compute what the alignment should be\n        if (!dateAlignment) {\n            var dateIncrement = this.props.dateIncrement;\n            if (dateIncrement) {\n                // use the smaller of the two units\n                if (asRoughMs(dateIncrement) < asRoughMs(duration)) {\n                    dateAlignment = greatestDurationDenominator(dateIncrement).unit;\n                }\n                else {\n                    dateAlignment = unit;\n                }\n            }\n            else {\n                dateAlignment = unit;\n            }\n        }\n        // if the view displays a single day or smaller\n        if (asRoughDays(duration) <= 1) {\n            if (this.isHiddenDay(start)) {\n                start = this.skipHiddenDays(start, direction);\n                start = startOfDay(start);\n            }\n        }\n        function computeRes() {\n            start = dateEnv.startOf(date, dateAlignment);\n            end = dateEnv.add(start, duration);\n            res = { start: start, end: end };\n        }\n        computeRes();\n        // if range is completely enveloped by hidden days, go past the hidden days\n        if (!this.trimHiddenDays(res)) {\n            date = this.skipHiddenDays(date, direction);\n            computeRes();\n        }\n        return res;\n    };\n    // Builds the \"current\" range when a dayCount is specified.\n    DateProfileGenerator.prototype.buildRangeFromDayCount = function (date, direction, dayCount) {\n        var _a = this.props, dateEnv = _a.dateEnv, dateAlignment = _a.dateAlignment;\n        var runningCount = 0;\n        var start = date;\n        var end;\n        if (dateAlignment) {\n            start = dateEnv.startOf(start, dateAlignment);\n        }\n        start = startOfDay(start);\n        start = this.skipHiddenDays(start, direction);\n        end = start;\n        do {\n            end = addDays(end, 1);\n            if (!this.isHiddenDay(end)) {\n                runningCount += 1;\n            }\n        } while (runningCount < dayCount);\n        return { start: start, end: end };\n    };\n    // Builds a normalized range object for the \"visible\" range,\n    // which is a way to define the currentRange and activeRange at the same time.\n    DateProfileGenerator.prototype.buildCustomVisibleRange = function (date) {\n        var props = this.props;\n        var input = props.visibleRangeInput;\n        var simpleInput = typeof input === 'function'\n            ? input.call(props.calendarApi, props.dateEnv.toDate(date))\n            : input;\n        var range = this.refineRange(simpleInput);\n        if (range && (range.start == null || range.end == null)) {\n            return null;\n        }\n        return range;\n    };\n    // Computes the range that will represent the element/cells for *rendering*,\n    // but which may have voided days/times.\n    // not responsible for trimming hidden days.\n    DateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n        return currentRange;\n    };\n    // Compute the duration value that should be added/substracted to the current date\n    // when a prev/next operation happens.\n    DateProfileGenerator.prototype.buildDateIncrement = function (fallback) {\n        var dateIncrement = this.props.dateIncrement;\n        var customAlignment;\n        if (dateIncrement) {\n            return dateIncrement;\n        }\n        if ((customAlignment = this.props.dateAlignment)) {\n            return createDuration(1, customAlignment);\n        }\n        if (fallback) {\n            return fallback;\n        }\n        return createDuration({ days: 1 });\n    };\n    DateProfileGenerator.prototype.refineRange = function (rangeInput) {\n        if (rangeInput) {\n            var range = parseRange(rangeInput, this.props.dateEnv);\n            if (range) {\n                range = computeVisibleDayRange(range);\n            }\n            return range;\n        }\n        return null;\n    };\n    /* Hidden Days\n    ------------------------------------------------------------------------------------------------------------------*/\n    // Initializes internal variables related to calculating hidden days-of-week\n    DateProfileGenerator.prototype.initHiddenDays = function () {\n        var hiddenDays = this.props.hiddenDays || []; // array of day-of-week indices that are hidden\n        var isHiddenDayHash = []; // is the day-of-week hidden? (hash with day-of-week-index -> bool)\n        var dayCnt = 0;\n        var i;\n        if (this.props.weekends === false) {\n            hiddenDays.push(0, 6); // 0=sunday, 6=saturday\n        }\n        for (i = 0; i < 7; i += 1) {\n            if (!(isHiddenDayHash[i] = hiddenDays.indexOf(i) !== -1)) {\n                dayCnt += 1;\n            }\n        }\n        if (!dayCnt) {\n            throw new Error('invalid hiddenDays'); // all days were hidden? bad.\n        }\n        this.isHiddenDayHash = isHiddenDayHash;\n    };\n    // Remove days from the beginning and end of the range that are computed as hidden.\n    // If the whole range is trimmed off, returns null\n    DateProfileGenerator.prototype.trimHiddenDays = function (range) {\n        var start = range.start, end = range.end;\n        if (start) {\n            start = this.skipHiddenDays(start);\n        }\n        if (end) {\n            end = this.skipHiddenDays(end, -1, true);\n        }\n        if (start == null || end == null || start < end) {\n            return { start: start, end: end };\n        }\n        return null;\n    };\n    // Is the current day hidden?\n    // `day` is a day-of-week index (0-6), or a Date (used for UTC)\n    DateProfileGenerator.prototype.isHiddenDay = function (day) {\n        if (day instanceof Date) {\n            day = day.getUTCDay();\n        }\n        return this.isHiddenDayHash[day];\n    };\n    // Incrementing the current day until it is no longer a hidden day, returning a copy.\n    // DOES NOT CONSIDER validRange!\n    // If the initial value of `date` is not a hidden day, don't do anything.\n    // Pass `isExclusive` as `true` if you are dealing with an end date.\n    // `inc` defaults to `1` (increment one day forward each time)\n    DateProfileGenerator.prototype.skipHiddenDays = function (date, inc, isExclusive) {\n        if (inc === void 0) { inc = 1; }\n        if (isExclusive === void 0) { isExclusive = false; }\n        while (this.isHiddenDayHash[(date.getUTCDay() + (isExclusive ? inc : 0) + 7) % 7]) {\n            date = addDays(date, inc);\n        }\n        return date;\n    };\n    return DateProfileGenerator;\n}());\n\nfunction reduceViewType(viewType, action) {\n    switch (action.type) {\n        case 'CHANGE_VIEW_TYPE':\n            viewType = action.viewType;\n    }\n    return viewType;\n}\n\nfunction reduceDynamicOptionOverrides(dynamicOptionOverrides, action) {\n    var _a;\n    switch (action.type) {\n        case 'SET_OPTION':\n            return __assign(__assign({}, dynamicOptionOverrides), (_a = {}, _a[action.optionName] = action.rawOptionValue, _a));\n        default:\n            return dynamicOptionOverrides;\n    }\n}\n\nfunction reduceDateProfile(currentDateProfile, action, currentDate, dateProfileGenerator) {\n    var dp;\n    switch (action.type) {\n        case 'CHANGE_VIEW_TYPE':\n            return dateProfileGenerator.build(action.dateMarker || currentDate);\n        case 'CHANGE_DATE':\n            return dateProfileGenerator.build(action.dateMarker);\n        case 'PREV':\n            dp = dateProfileGenerator.buildPrev(currentDateProfile, currentDate);\n            if (dp.isValid) {\n                return dp;\n            }\n            break;\n        case 'NEXT':\n            dp = dateProfileGenerator.buildNext(currentDateProfile, currentDate);\n            if (dp.isValid) {\n                return dp;\n            }\n            break;\n    }\n    return currentDateProfile;\n}\n\nfunction initEventSources(calendarOptions, dateProfile, context) {\n    var activeRange = dateProfile ? dateProfile.activeRange : null;\n    return addSources({}, parseInitialSources(calendarOptions, context), activeRange, context);\n}\nfunction reduceEventSources(eventSources, action, dateProfile, context) {\n    var activeRange = dateProfile ? dateProfile.activeRange : null; // need this check?\n    switch (action.type) {\n        case 'ADD_EVENT_SOURCES': // already parsed\n            return addSources(eventSources, action.sources, activeRange, context);\n        case 'REMOVE_EVENT_SOURCE':\n            return removeSource(eventSources, action.sourceId);\n        case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n        case 'NEXT':\n        case 'CHANGE_DATE':\n        case 'CHANGE_VIEW_TYPE':\n            if (dateProfile) {\n                return fetchDirtySources(eventSources, activeRange, context);\n            }\n            return eventSources;\n        case 'FETCH_EVENT_SOURCES':\n            return fetchSourcesByIds(eventSources, action.sourceIds ? // why no type?\n                arrayToHash(action.sourceIds) :\n                excludeStaticSources(eventSources, context), activeRange, action.isRefetch || false, context);\n        case 'RECEIVE_EVENTS':\n        case 'RECEIVE_EVENT_ERROR':\n            return receiveResponse(eventSources, action.sourceId, action.fetchId, action.fetchRange);\n        case 'REMOVE_ALL_EVENT_SOURCES':\n            return {};\n        default:\n            return eventSources;\n    }\n}\nfunction reduceEventSourcesNewTimeZone(eventSources, dateProfile, context) {\n    var activeRange = dateProfile ? dateProfile.activeRange : null; // need this check?\n    return fetchSourcesByIds(eventSources, excludeStaticSources(eventSources, context), activeRange, true, context);\n}\nfunction computeEventSourcesLoading(eventSources) {\n    for (var sourceId in eventSources) {\n        if (eventSources[sourceId].isFetching) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction addSources(eventSourceHash, sources, fetchRange, context) {\n    var hash = {};\n    for (var _i = 0, sources_1 = sources; _i < sources_1.length; _i++) {\n        var source = sources_1[_i];\n        hash[source.sourceId] = source;\n    }\n    if (fetchRange) {\n        hash = fetchDirtySources(hash, fetchRange, context);\n    }\n    return __assign(__assign({}, eventSourceHash), hash);\n}\nfunction removeSource(eventSourceHash, sourceId) {\n    return filterHash(eventSourceHash, function (eventSource) { return eventSource.sourceId !== sourceId; });\n}\nfunction fetchDirtySources(sourceHash, fetchRange, context) {\n    return fetchSourcesByIds(sourceHash, filterHash(sourceHash, function (eventSource) { return isSourceDirty(eventSource, fetchRange, context); }), fetchRange, false, context);\n}\nfunction isSourceDirty(eventSource, fetchRange, context) {\n    if (!doesSourceNeedRange(eventSource, context)) {\n        return !eventSource.latestFetchId;\n    }\n    return !context.options.lazyFetching ||\n        !eventSource.fetchRange ||\n        eventSource.isFetching || // always cancel outdated in-progress fetches\n        fetchRange.start < eventSource.fetchRange.start ||\n        fetchRange.end > eventSource.fetchRange.end;\n}\nfunction fetchSourcesByIds(prevSources, sourceIdHash, fetchRange, isRefetch, context) {\n    var nextSources = {};\n    for (var sourceId in prevSources) {\n        var source = prevSources[sourceId];\n        if (sourceIdHash[sourceId]) {\n            nextSources[sourceId] = fetchSource(source, fetchRange, isRefetch, context);\n        }\n        else {\n            nextSources[sourceId] = source;\n        }\n    }\n    return nextSources;\n}\nfunction fetchSource(eventSource, fetchRange, isRefetch, context) {\n    var options = context.options, calendarApi = context.calendarApi;\n    var sourceDef = context.pluginHooks.eventSourceDefs[eventSource.sourceDefId];\n    var fetchId = guid();\n    sourceDef.fetch({\n        eventSource: eventSource,\n        range: fetchRange,\n        isRefetch: isRefetch,\n        context: context,\n    }, function (res) {\n        var rawEvents = res.rawEvents;\n        if (options.eventSourceSuccess) {\n            rawEvents = options.eventSourceSuccess.call(calendarApi, rawEvents, res.xhr) || rawEvents;\n        }\n        if (eventSource.success) {\n            rawEvents = eventSource.success.call(calendarApi, rawEvents, res.xhr) || rawEvents;\n        }\n        context.dispatch({\n            type: 'RECEIVE_EVENTS',\n            sourceId: eventSource.sourceId,\n            fetchId: fetchId,\n            fetchRange: fetchRange,\n            rawEvents: rawEvents,\n        });\n    }, function (error) {\n        console.warn(error.message, error);\n        if (options.eventSourceFailure) {\n            options.eventSourceFailure.call(calendarApi, error);\n        }\n        if (eventSource.failure) {\n            eventSource.failure(error);\n        }\n        context.dispatch({\n            type: 'RECEIVE_EVENT_ERROR',\n            sourceId: eventSource.sourceId,\n            fetchId: fetchId,\n            fetchRange: fetchRange,\n            error: error,\n        });\n    });\n    return __assign(__assign({}, eventSource), { isFetching: true, latestFetchId: fetchId });\n}\nfunction receiveResponse(sourceHash, sourceId, fetchId, fetchRange) {\n    var _a;\n    var eventSource = sourceHash[sourceId];\n    if (eventSource && // not already removed\n        fetchId === eventSource.latestFetchId) {\n        return __assign(__assign({}, sourceHash), (_a = {}, _a[sourceId] = __assign(__assign({}, eventSource), { isFetching: false, fetchRange: fetchRange }), _a));\n    }\n    return sourceHash;\n}\nfunction excludeStaticSources(eventSources, context) {\n    return filterHash(eventSources, function (eventSource) { return doesSourceNeedRange(eventSource, context); });\n}\nfunction parseInitialSources(rawOptions, context) {\n    var refiners = buildEventSourceRefiners(context);\n    var rawSources = [].concat(rawOptions.eventSources || []);\n    var sources = []; // parsed\n    if (rawOptions.initialEvents) {\n        rawSources.unshift(rawOptions.initialEvents);\n    }\n    if (rawOptions.events) {\n        rawSources.unshift(rawOptions.events);\n    }\n    for (var _i = 0, rawSources_1 = rawSources; _i < rawSources_1.length; _i++) {\n        var rawSource = rawSources_1[_i];\n        var source = parseEventSource(rawSource, context, refiners);\n        if (source) {\n            sources.push(source);\n        }\n    }\n    return sources;\n}\nfunction doesSourceNeedRange(eventSource, context) {\n    var defs = context.pluginHooks.eventSourceDefs;\n    return !defs[eventSource.sourceDefId].ignoreRange;\n}\n\nfunction reduceEventStore(eventStore, action, eventSources, dateProfile, context) {\n    switch (action.type) {\n        case 'RECEIVE_EVENTS': // raw\n            return receiveRawEvents(eventStore, eventSources[action.sourceId], action.fetchId, action.fetchRange, action.rawEvents, context);\n        case 'ADD_EVENTS': // already parsed, but not expanded\n            return addEvent(eventStore, action.eventStore, // new ones\n            dateProfile ? dateProfile.activeRange : null, context);\n        case 'RESET_EVENTS':\n            return action.eventStore;\n        case 'MERGE_EVENTS': // already parsed and expanded\n            return mergeEventStores(eventStore, action.eventStore);\n        case 'PREV': // TODO: how do we track all actions that affect dateProfile :(\n        case 'NEXT':\n        case 'CHANGE_DATE':\n        case 'CHANGE_VIEW_TYPE':\n            if (dateProfile) {\n                return expandRecurring(eventStore, dateProfile.activeRange, context);\n            }\n            return eventStore;\n        case 'REMOVE_EVENTS':\n            return excludeSubEventStore(eventStore, action.eventStore);\n        case 'REMOVE_EVENT_SOURCE':\n            return excludeEventsBySourceId(eventStore, action.sourceId);\n        case 'REMOVE_ALL_EVENT_SOURCES':\n            return filterEventStoreDefs(eventStore, function (eventDef) { return (!eventDef.sourceId // only keep events with no source id\n            ); });\n        case 'REMOVE_ALL_EVENTS':\n            return createEmptyEventStore();\n        default:\n            return eventStore;\n    }\n}\nfunction receiveRawEvents(eventStore, eventSource, fetchId, fetchRange, rawEvents, context) {\n    if (eventSource && // not already removed\n        fetchId === eventSource.latestFetchId // TODO: wish this logic was always in event-sources\n    ) {\n        var subset = parseEvents(transformRawEvents(rawEvents, eventSource, context), eventSource, context);\n        if (fetchRange) {\n            subset = expandRecurring(subset, fetchRange, context);\n        }\n        return mergeEventStores(excludeEventsBySourceId(eventStore, eventSource.sourceId), subset);\n    }\n    return eventStore;\n}\nfunction transformRawEvents(rawEvents, eventSource, context) {\n    var calEachTransform = context.options.eventDataTransform;\n    var sourceEachTransform = eventSource ? eventSource.eventDataTransform : null;\n    if (sourceEachTransform) {\n        rawEvents = transformEachRawEvent(rawEvents, sourceEachTransform);\n    }\n    if (calEachTransform) {\n        rawEvents = transformEachRawEvent(rawEvents, calEachTransform);\n    }\n    return rawEvents;\n}\nfunction transformEachRawEvent(rawEvents, func) {\n    var refinedEvents;\n    if (!func) {\n        refinedEvents = rawEvents;\n    }\n    else {\n        refinedEvents = [];\n        for (var _i = 0, rawEvents_1 = rawEvents; _i < rawEvents_1.length; _i++) {\n            var rawEvent = rawEvents_1[_i];\n            var refinedEvent = func(rawEvent);\n            if (refinedEvent) {\n                refinedEvents.push(refinedEvent);\n            }\n            else if (refinedEvent == null) {\n                refinedEvents.push(rawEvent);\n            } // if a different falsy value, do nothing\n        }\n    }\n    return refinedEvents;\n}\nfunction addEvent(eventStore, subset, expandRange, context) {\n    if (expandRange) {\n        subset = expandRecurring(subset, expandRange, context);\n    }\n    return mergeEventStores(eventStore, subset);\n}\nfunction rezoneEventStoreDates(eventStore, oldDateEnv, newDateEnv) {\n    var defs = eventStore.defs;\n    var instances = mapHash(eventStore.instances, function (instance) {\n        var def = defs[instance.defId];\n        if (def.allDay || def.recurringDef) {\n            return instance; // isn't dependent on timezone\n        }\n        return __assign(__assign({}, instance), { range: {\n                start: newDateEnv.createMarker(oldDateEnv.toDate(instance.range.start, instance.forcedStartTzo)),\n                end: newDateEnv.createMarker(oldDateEnv.toDate(instance.range.end, instance.forcedEndTzo)),\n            }, forcedStartTzo: newDateEnv.canComputeOffset ? null : instance.forcedStartTzo, forcedEndTzo: newDateEnv.canComputeOffset ? null : instance.forcedEndTzo });\n    });\n    return { defs: defs, instances: instances };\n}\nfunction excludeEventsBySourceId(eventStore, sourceId) {\n    return filterEventStoreDefs(eventStore, function (eventDef) { return eventDef.sourceId !== sourceId; });\n}\n// QUESTION: why not just return instances? do a general object-property-exclusion util\nfunction excludeInstances(eventStore, removals) {\n    return {\n        defs: eventStore.defs,\n        instances: filterHash(eventStore.instances, function (instance) { return !removals[instance.instanceId]; }),\n    };\n}\n\nfunction reduceDateSelection(currentSelection, action) {\n    switch (action.type) {\n        case 'UNSELECT_DATES':\n            return null;\n        case 'SELECT_DATES':\n            return action.selection;\n        default:\n            return currentSelection;\n    }\n}\n\nfunction reduceSelectedEvent(currentInstanceId, action) {\n    switch (action.type) {\n        case 'UNSELECT_EVENT':\n            return '';\n        case 'SELECT_EVENT':\n            return action.eventInstanceId;\n        default:\n            return currentInstanceId;\n    }\n}\n\nfunction reduceEventDrag(currentDrag, action) {\n    var newDrag;\n    switch (action.type) {\n        case 'UNSET_EVENT_DRAG':\n            return null;\n        case 'SET_EVENT_DRAG':\n            newDrag = action.state;\n            return {\n                affectedEvents: newDrag.affectedEvents,\n                mutatedEvents: newDrag.mutatedEvents,\n                isEvent: newDrag.isEvent,\n            };\n        default:\n            return currentDrag;\n    }\n}\n\nfunction reduceEventResize(currentResize, action) {\n    var newResize;\n    switch (action.type) {\n        case 'UNSET_EVENT_RESIZE':\n            return null;\n        case 'SET_EVENT_RESIZE':\n            newResize = action.state;\n            return {\n                affectedEvents: newResize.affectedEvents,\n                mutatedEvents: newResize.mutatedEvents,\n                isEvent: newResize.isEvent,\n            };\n        default:\n            return currentResize;\n    }\n}\n\nfunction parseToolbars(calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) {\n    var header = calendarOptions.headerToolbar ? parseToolbar(calendarOptions.headerToolbar, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) : null;\n    var footer = calendarOptions.footerToolbar ? parseToolbar(calendarOptions.footerToolbar, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) : null;\n    return { header: header, footer: footer };\n}\nfunction parseToolbar(sectionStrHash, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi) {\n    var sectionWidgets = {};\n    var viewsWithButtons = [];\n    var hasTitle = false;\n    for (var sectionName in sectionStrHash) {\n        var sectionStr = sectionStrHash[sectionName];\n        var sectionRes = parseSection(sectionStr, calendarOptions, calendarOptionOverrides, theme, viewSpecs, calendarApi);\n        sectionWidgets[sectionName] = sectionRes.widgets;\n        viewsWithButtons.push.apply(viewsWithButtons, sectionRes.viewsWithButtons);\n        hasTitle = hasTitle || sectionRes.hasTitle;\n    }\n    return { sectionWidgets: sectionWidgets, viewsWithButtons: viewsWithButtons, hasTitle: hasTitle };\n}\n/*\nBAD: querying icons and text here. should be done at render time\n*/\nfunction parseSection(sectionStr, calendarOptions, // defaults+overrides, then refined\ncalendarOptionOverrides, // overrides only!, unrefined :(\ntheme, viewSpecs, calendarApi) {\n    var isRtl = calendarOptions.direction === 'rtl';\n    var calendarCustomButtons = calendarOptions.customButtons || {};\n    var calendarButtonTextOverrides = calendarOptionOverrides.buttonText || {};\n    var calendarButtonText = calendarOptions.buttonText || {};\n    var calendarButtonHintOverrides = calendarOptionOverrides.buttonHints || {};\n    var calendarButtonHints = calendarOptions.buttonHints || {};\n    var sectionSubstrs = sectionStr ? sectionStr.split(' ') : [];\n    var viewsWithButtons = [];\n    var hasTitle = false;\n    var widgets = sectionSubstrs.map(function (buttonGroupStr) { return (buttonGroupStr.split(',').map(function (buttonName) {\n        if (buttonName === 'title') {\n            hasTitle = true;\n            return { buttonName: buttonName };\n        }\n        var customButtonProps;\n        var viewSpec;\n        var buttonClick;\n        var buttonIcon; // only one of these will be set\n        var buttonText; // \"\n        var buttonHint;\n        // ^ for the title=\"\" attribute, for accessibility\n        if ((customButtonProps = calendarCustomButtons[buttonName])) {\n            buttonClick = function (ev) {\n                if (customButtonProps.click) {\n                    customButtonProps.click.call(ev.target, ev, ev.target); // TODO: use Calendar this context?\n                }\n            };\n            (buttonIcon = theme.getCustomButtonIconClass(customButtonProps)) ||\n                (buttonIcon = theme.getIconClass(buttonName, isRtl)) ||\n                (buttonText = customButtonProps.text);\n            buttonHint = customButtonProps.hint || customButtonProps.text;\n        }\n        else if ((viewSpec = viewSpecs[buttonName])) {\n            viewsWithButtons.push(buttonName);\n            buttonClick = function () {\n                calendarApi.changeView(buttonName);\n            };\n            (buttonText = viewSpec.buttonTextOverride) ||\n                (buttonIcon = theme.getIconClass(buttonName, isRtl)) ||\n                (buttonText = viewSpec.buttonTextDefault);\n            var textFallback = viewSpec.buttonTextOverride ||\n                viewSpec.buttonTextDefault;\n            buttonHint = formatWithOrdinals(viewSpec.buttonTitleOverride ||\n                viewSpec.buttonTitleDefault ||\n                calendarOptions.viewHint, [textFallback, buttonName], // view-name = buttonName\n            textFallback);\n        }\n        else if (calendarApi[buttonName]) { // a calendarApi method\n            buttonClick = function () {\n                calendarApi[buttonName]();\n            };\n            (buttonText = calendarButtonTextOverrides[buttonName]) ||\n                (buttonIcon = theme.getIconClass(buttonName, isRtl)) ||\n                (buttonText = calendarButtonText[buttonName]); // everything else is considered default\n            if (buttonName === 'prevYear' || buttonName === 'nextYear') {\n                var prevOrNext = buttonName === 'prevYear' ? 'prev' : 'next';\n                buttonHint = formatWithOrdinals(calendarButtonHintOverrides[prevOrNext] ||\n                    calendarButtonHints[prevOrNext], [\n                    calendarButtonText.year || 'year',\n                    'year',\n                ], calendarButtonText[buttonName]);\n            }\n            else {\n                buttonHint = function (navUnit) { return formatWithOrdinals(calendarButtonHintOverrides[buttonName] ||\n                    calendarButtonHints[buttonName], [\n                    calendarButtonText[navUnit] || navUnit,\n                    navUnit,\n                ], calendarButtonText[buttonName]); };\n            }\n        }\n        return { buttonName: buttonName, buttonClick: buttonClick, buttonIcon: buttonIcon, buttonText: buttonText, buttonHint: buttonHint };\n    })); });\n    return { widgets: widgets, viewsWithButtons: viewsWithButtons, hasTitle: hasTitle };\n}\n\nvar eventSourceDef$2 = {\n    ignoreRange: true,\n    parseMeta: function (refined) {\n        if (Array.isArray(refined.events)) {\n            return refined.events;\n        }\n        return null;\n    },\n    fetch: function (arg, success) {\n        success({\n            rawEvents: arg.eventSource.meta,\n        });\n    },\n};\nvar arrayEventSourcePlugin = createPlugin({\n    eventSourceDefs: [eventSourceDef$2],\n});\n\nvar eventSourceDef$1 = {\n    parseMeta: function (refined) {\n        if (typeof refined.events === 'function') {\n            return refined.events;\n        }\n        return null;\n    },\n    fetch: function (arg, success, failure) {\n        var dateEnv = arg.context.dateEnv;\n        var func = arg.eventSource.meta;\n        unpromisify(func.bind(null, buildRangeApiWithTimeZone(arg.range, dateEnv)), function (rawEvents) {\n            success({ rawEvents: rawEvents }); // needs an object response\n        }, failure);\n    },\n};\nvar funcEventSourcePlugin = createPlugin({\n    eventSourceDefs: [eventSourceDef$1],\n});\n\nfunction requestJson(method, url, params, successCallback, failureCallback) {\n    method = method.toUpperCase();\n    var body = null;\n    if (method === 'GET') {\n        url = injectQueryStringParams(url, params);\n    }\n    else {\n        body = encodeParams(params);\n    }\n    var xhr = new XMLHttpRequest();\n    xhr.open(method, url, true);\n    if (method !== 'GET') {\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    }\n    xhr.onload = function () {\n        if (xhr.status >= 200 && xhr.status < 400) {\n            var parsed = false;\n            var res = void 0;\n            try {\n                res = JSON.parse(xhr.responseText);\n                parsed = true;\n            }\n            catch (err) {\n                // will handle parsed=false\n            }\n            if (parsed) {\n                successCallback(res, xhr);\n            }\n            else {\n                failureCallback('Failure parsing JSON', xhr);\n            }\n        }\n        else {\n            failureCallback('Request failed', xhr);\n        }\n    };\n    xhr.onerror = function () {\n        failureCallback('Request failed', xhr);\n    };\n    xhr.send(body);\n}\nfunction injectQueryStringParams(url, params) {\n    return url +\n        (url.indexOf('?') === -1 ? '?' : '&') +\n        encodeParams(params);\n}\nfunction encodeParams(params) {\n    var parts = [];\n    for (var key in params) {\n        parts.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key]));\n    }\n    return parts.join('&');\n}\n\nvar JSON_FEED_EVENT_SOURCE_REFINERS = {\n    method: String,\n    extraParams: identity,\n    startParam: String,\n    endParam: String,\n    timeZoneParam: String,\n};\n\nvar eventSourceDef = {\n    parseMeta: function (refined) {\n        if (refined.url && (refined.format === 'json' || !refined.format)) {\n            return {\n                url: refined.url,\n                format: 'json',\n                method: (refined.method || 'GET').toUpperCase(),\n                extraParams: refined.extraParams,\n                startParam: refined.startParam,\n                endParam: refined.endParam,\n                timeZoneParam: refined.timeZoneParam,\n            };\n        }\n        return null;\n    },\n    fetch: function (arg, success, failure) {\n        var meta = arg.eventSource.meta;\n        var requestParams = buildRequestParams(meta, arg.range, arg.context);\n        requestJson(meta.method, meta.url, requestParams, function (rawEvents, xhr) {\n            success({ rawEvents: rawEvents, xhr: xhr });\n        }, function (errorMessage, xhr) {\n            failure({ message: errorMessage, xhr: xhr });\n        });\n    },\n};\nvar jsonFeedEventSourcePlugin = createPlugin({\n    eventSourceRefiners: JSON_FEED_EVENT_SOURCE_REFINERS,\n    eventSourceDefs: [eventSourceDef],\n});\nfunction buildRequestParams(meta, range, context) {\n    var dateEnv = context.dateEnv, options = context.options;\n    var startParam;\n    var endParam;\n    var timeZoneParam;\n    var customRequestParams;\n    var params = {};\n    startParam = meta.startParam;\n    if (startParam == null) {\n        startParam = options.startParam;\n    }\n    endParam = meta.endParam;\n    if (endParam == null) {\n        endParam = options.endParam;\n    }\n    timeZoneParam = meta.timeZoneParam;\n    if (timeZoneParam == null) {\n        timeZoneParam = options.timeZoneParam;\n    }\n    // retrieve any outbound GET/POST data from the options\n    if (typeof meta.extraParams === 'function') {\n        // supplied as a function that returns a key/value object\n        customRequestParams = meta.extraParams();\n    }\n    else {\n        // probably supplied as a straight key/value object\n        customRequestParams = meta.extraParams || {};\n    }\n    __assign(params, customRequestParams);\n    params[startParam] = dateEnv.formatIso(range.start);\n    params[endParam] = dateEnv.formatIso(range.end);\n    if (dateEnv.timeZone !== 'local') {\n        params[timeZoneParam] = dateEnv.timeZone;\n    }\n    return params;\n}\n\nvar SIMPLE_RECURRING_REFINERS = {\n    daysOfWeek: identity,\n    startTime: createDuration,\n    endTime: createDuration,\n    duration: createDuration,\n    startRecur: identity,\n    endRecur: identity,\n};\n\nvar recurring = {\n    parse: function (refined, dateEnv) {\n        if (refined.daysOfWeek || refined.startTime || refined.endTime || refined.startRecur || refined.endRecur) {\n            var recurringData = {\n                daysOfWeek: refined.daysOfWeek || null,\n                startTime: refined.startTime || null,\n                endTime: refined.endTime || null,\n                startRecur: refined.startRecur ? dateEnv.createMarker(refined.startRecur) : null,\n                endRecur: refined.endRecur ? dateEnv.createMarker(refined.endRecur) : null,\n            };\n            var duration = void 0;\n            if (refined.duration) {\n                duration = refined.duration;\n            }\n            if (!duration && refined.startTime && refined.endTime) {\n                duration = subtractDurations(refined.endTime, refined.startTime);\n            }\n            return {\n                allDayGuess: Boolean(!refined.startTime && !refined.endTime),\n                duration: duration,\n                typeData: recurringData, // doesn't need endTime anymore but oh well\n            };\n        }\n        return null;\n    },\n    expand: function (typeData, framingRange, dateEnv) {\n        var clippedFramingRange = intersectRanges(framingRange, { start: typeData.startRecur, end: typeData.endRecur });\n        if (clippedFramingRange) {\n            return expandRanges(typeData.daysOfWeek, typeData.startTime, clippedFramingRange, dateEnv);\n        }\n        return [];\n    },\n};\nvar simpleRecurringEventsPlugin = createPlugin({\n    recurringTypes: [recurring],\n    eventRefiners: SIMPLE_RECURRING_REFINERS,\n});\nfunction expandRanges(daysOfWeek, startTime, framingRange, dateEnv) {\n    var dowHash = daysOfWeek ? arrayToHash(daysOfWeek) : null;\n    var dayMarker = startOfDay(framingRange.start);\n    var endMarker = framingRange.end;\n    var instanceStarts = [];\n    while (dayMarker < endMarker) {\n        var instanceStart \n        // if everyday, or this particular day-of-week\n        = void 0;\n        // if everyday, or this particular day-of-week\n        if (!dowHash || dowHash[dayMarker.getUTCDay()]) {\n            if (startTime) {\n                instanceStart = dateEnv.add(dayMarker, startTime);\n            }\n            else {\n                instanceStart = dayMarker;\n            }\n            instanceStarts.push(instanceStart);\n        }\n        dayMarker = addDays(dayMarker, 1);\n    }\n    return instanceStarts;\n}\n\nvar changeHandlerPlugin = createPlugin({\n    optionChangeHandlers: {\n        events: function (events, context) {\n            handleEventSources([events], context);\n        },\n        eventSources: handleEventSources,\n    },\n});\n/*\nBUG: if `event` was supplied, all previously-given `eventSources` will be wiped out\n*/\nfunction handleEventSources(inputs, context) {\n    var unfoundSources = hashValuesToArray(context.getCurrentData().eventSources);\n    var newInputs = [];\n    for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\n        var input = inputs_1[_i];\n        var inputFound = false;\n        for (var i = 0; i < unfoundSources.length; i += 1) {\n            if (unfoundSources[i]._raw === input) {\n                unfoundSources.splice(i, 1); // delete\n                inputFound = true;\n                break;\n            }\n        }\n        if (!inputFound) {\n            newInputs.push(input);\n        }\n    }\n    for (var _a = 0, unfoundSources_1 = unfoundSources; _a < unfoundSources_1.length; _a++) {\n        var unfoundSource = unfoundSources_1[_a];\n        context.dispatch({\n            type: 'REMOVE_EVENT_SOURCE',\n            sourceId: unfoundSource.sourceId,\n        });\n    }\n    for (var _b = 0, newInputs_1 = newInputs; _b < newInputs_1.length; _b++) {\n        var newInput = newInputs_1[_b];\n        context.calendarApi.addEventSource(newInput);\n    }\n}\n\nfunction handleDateProfile(dateProfile, context) {\n    context.emitter.trigger('datesSet', __assign(__assign({}, buildRangeApiWithTimeZone(dateProfile.activeRange, context.dateEnv)), { view: context.viewApi }));\n}\n\nfunction handleEventStore(eventStore, context) {\n    var emitter = context.emitter;\n    if (emitter.hasHandlers('eventsSet')) {\n        emitter.trigger('eventsSet', buildEventApis(eventStore, context));\n    }\n}\n\n/*\nthis array is exposed on the root namespace so that UMD plugins can add to it.\nsee the rollup-bundles script.\n*/\nvar globalPlugins = [\n    arrayEventSourcePlugin,\n    funcEventSourcePlugin,\n    jsonFeedEventSourcePlugin,\n    simpleRecurringEventsPlugin,\n    changeHandlerPlugin,\n    createPlugin({\n        isLoadingFuncs: [\n            function (state) { return computeEventSourcesLoading(state.eventSources); },\n        ],\n        contentTypeHandlers: {\n            html: buildHtmlRenderer,\n            domNodes: buildDomNodeRenderer,\n        },\n        propSetHandlers: {\n            dateProfile: handleDateProfile,\n            eventStore: handleEventStore,\n        },\n    }),\n];\nfunction buildHtmlRenderer() {\n    var currentEl = null;\n    var currentHtml = '';\n    function render(el, html) {\n        if (el !== currentEl || html !== currentHtml) {\n            el.innerHTML = html;\n        }\n        currentEl = el;\n        currentHtml = html;\n    }\n    function destroy() {\n        currentEl.innerHTML = '';\n        currentEl = null;\n        currentHtml = '';\n    }\n    return { render: render, destroy: destroy };\n}\nfunction buildDomNodeRenderer() {\n    var currentEl = null;\n    var currentDomNodes = [];\n    function render(el, domNodes) {\n        var newDomNodes = Array.prototype.slice.call(domNodes);\n        if (el !== currentEl || !isArraysEqual(currentDomNodes, newDomNodes)) {\n            // append first, remove second (for scroll resetting)\n            for (var _i = 0, newDomNodes_1 = newDomNodes; _i < newDomNodes_1.length; _i++) {\n                var newNode = newDomNodes_1[_i];\n                el.appendChild(newNode);\n            }\n            destroy();\n        }\n        currentEl = el;\n        currentDomNodes = newDomNodes;\n    }\n    function destroy() {\n        currentDomNodes.forEach(removeElement);\n        currentDomNodes = [];\n        currentEl = null;\n    }\n    return { render: render, destroy: destroy };\n}\n\nvar DelayedRunner = /** @class */ (function () {\n    function DelayedRunner(drainedOption) {\n        this.drainedOption = drainedOption;\n        this.isRunning = false;\n        this.isDirty = false;\n        this.pauseDepths = {};\n        this.timeoutId = 0;\n    }\n    DelayedRunner.prototype.request = function (delay) {\n        this.isDirty = true;\n        if (!this.isPaused()) {\n            this.clearTimeout();\n            if (delay == null) {\n                this.tryDrain();\n            }\n            else {\n                this.timeoutId = setTimeout(// NOT OPTIMAL! TODO: look at debounce\n                this.tryDrain.bind(this), delay);\n            }\n        }\n    };\n    DelayedRunner.prototype.pause = function (scope) {\n        if (scope === void 0) { scope = ''; }\n        var pauseDepths = this.pauseDepths;\n        pauseDepths[scope] = (pauseDepths[scope] || 0) + 1;\n        this.clearTimeout();\n    };\n    DelayedRunner.prototype.resume = function (scope, force) {\n        if (scope === void 0) { scope = ''; }\n        var pauseDepths = this.pauseDepths;\n        if (scope in pauseDepths) {\n            if (force) {\n                delete pauseDepths[scope];\n            }\n            else {\n                pauseDepths[scope] -= 1;\n                var depth = pauseDepths[scope];\n                if (depth <= 0) {\n                    delete pauseDepths[scope];\n                }\n            }\n            this.tryDrain();\n        }\n    };\n    DelayedRunner.prototype.isPaused = function () {\n        return Object.keys(this.pauseDepths).length;\n    };\n    DelayedRunner.prototype.tryDrain = function () {\n        if (!this.isRunning && !this.isPaused()) {\n            this.isRunning = true;\n            while (this.isDirty) {\n                this.isDirty = false;\n                this.drained(); // might set isDirty to true again\n            }\n            this.isRunning = false;\n        }\n    };\n    DelayedRunner.prototype.clear = function () {\n        this.clearTimeout();\n        this.isDirty = false;\n        this.pauseDepths = {};\n    };\n    DelayedRunner.prototype.clearTimeout = function () {\n        if (this.timeoutId) {\n            clearTimeout(this.timeoutId);\n            this.timeoutId = 0;\n        }\n    };\n    DelayedRunner.prototype.drained = function () {\n        if (this.drainedOption) {\n            this.drainedOption();\n        }\n    };\n    return DelayedRunner;\n}());\n\nvar TaskRunner = /** @class */ (function () {\n    function TaskRunner(runTaskOption, drainedOption) {\n        this.runTaskOption = runTaskOption;\n        this.drainedOption = drainedOption;\n        this.queue = [];\n        this.delayedRunner = new DelayedRunner(this.drain.bind(this));\n    }\n    TaskRunner.prototype.request = function (task, delay) {\n        this.queue.push(task);\n        this.delayedRunner.request(delay);\n    };\n    TaskRunner.prototype.pause = function (scope) {\n        this.delayedRunner.pause(scope);\n    };\n    TaskRunner.prototype.resume = function (scope, force) {\n        this.delayedRunner.resume(scope, force);\n    };\n    TaskRunner.prototype.drain = function () {\n        var queue = this.queue;\n        while (queue.length) {\n            var completedTasks = [];\n            var task = void 0;\n            while ((task = queue.shift())) {\n                this.runTask(task);\n                completedTasks.push(task);\n            }\n            this.drained(completedTasks);\n        } // keep going, in case new tasks were added in the drained handler\n    };\n    TaskRunner.prototype.runTask = function (task) {\n        if (this.runTaskOption) {\n            this.runTaskOption(task);\n        }\n    };\n    TaskRunner.prototype.drained = function (completedTasks) {\n        if (this.drainedOption) {\n            this.drainedOption(completedTasks);\n        }\n    };\n    return TaskRunner;\n}());\n\n// Computes what the title at the top of the calendarApi should be for this view\nfunction buildTitle(dateProfile, viewOptions, dateEnv) {\n    var range;\n    // for views that span a large unit of time, show the proper interval, ignoring stray days before and after\n    if (/^(year|month)$/.test(dateProfile.currentRangeUnit)) {\n        range = dateProfile.currentRange;\n    }\n    else { // for day units or smaller, use the actual day range\n        range = dateProfile.activeRange;\n    }\n    return dateEnv.formatRange(range.start, range.end, createFormatter(viewOptions.titleFormat || buildTitleFormat(dateProfile)), {\n        isEndExclusive: dateProfile.isRangeAllDay,\n        defaultSeparator: viewOptions.titleRangeSeparator,\n    });\n}\n// Generates the format string that should be used to generate the title for the current date range.\n// Attempts to compute the most appropriate format if not explicitly specified with `titleFormat`.\nfunction buildTitleFormat(dateProfile) {\n    var currentRangeUnit = dateProfile.currentRangeUnit;\n    if (currentRangeUnit === 'year') {\n        return { year: 'numeric' };\n    }\n    if (currentRangeUnit === 'month') {\n        return { year: 'numeric', month: 'long' }; // like \"September 2014\"\n    }\n    var days = diffWholeDays(dateProfile.currentRange.start, dateProfile.currentRange.end);\n    if (days !== null && days > 1) {\n        // multi-day range. shorter, like \"Sep 9 - 10 2014\"\n        return { year: 'numeric', month: 'short', day: 'numeric' };\n    }\n    // one day. longer, like \"September 9 2014\"\n    return { year: 'numeric', month: 'long', day: 'numeric' };\n}\n\n// in future refactor, do the redux-style function(state=initial) for initial-state\n// also, whatever is happening in constructor, have it happen in action queue too\nvar CalendarDataManager = /** @class */ (function () {\n    function CalendarDataManager(props) {\n        var _this = this;\n        this.computeOptionsData = memoize(this._computeOptionsData);\n        this.computeCurrentViewData = memoize(this._computeCurrentViewData);\n        this.organizeRawLocales = memoize(organizeRawLocales);\n        this.buildLocale = memoize(buildLocale);\n        this.buildPluginHooks = buildBuildPluginHooks();\n        this.buildDateEnv = memoize(buildDateEnv);\n        this.buildTheme = memoize(buildTheme);\n        this.parseToolbars = memoize(parseToolbars);\n        this.buildViewSpecs = memoize(buildViewSpecs);\n        this.buildDateProfileGenerator = memoizeObjArg(buildDateProfileGenerator);\n        this.buildViewApi = memoize(buildViewApi);\n        this.buildViewUiProps = memoizeObjArg(buildViewUiProps);\n        this.buildEventUiBySource = memoize(buildEventUiBySource, isPropsEqual);\n        this.buildEventUiBases = memoize(buildEventUiBases);\n        this.parseContextBusinessHours = memoizeObjArg(parseContextBusinessHours);\n        this.buildTitle = memoize(buildTitle);\n        this.emitter = new Emitter();\n        this.actionRunner = new TaskRunner(this._handleAction.bind(this), this.updateData.bind(this));\n        this.currentCalendarOptionsInput = {};\n        this.currentCalendarOptionsRefined = {};\n        this.currentViewOptionsInput = {};\n        this.currentViewOptionsRefined = {};\n        this.currentCalendarOptionsRefiners = {};\n        this.getCurrentData = function () { return _this.data; };\n        this.dispatch = function (action) {\n            _this.actionRunner.request(action); // protects against recursive calls to _handleAction\n        };\n        this.props = props;\n        this.actionRunner.pause();\n        var dynamicOptionOverrides = {};\n        var optionsData = this.computeOptionsData(props.optionOverrides, dynamicOptionOverrides, props.calendarApi);\n        var currentViewType = optionsData.calendarOptions.initialView || optionsData.pluginHooks.initialView;\n        var currentViewData = this.computeCurrentViewData(currentViewType, optionsData, props.optionOverrides, dynamicOptionOverrides);\n        // wire things up\n        // TODO: not DRY\n        props.calendarApi.currentDataManager = this;\n        this.emitter.setThisContext(props.calendarApi);\n        this.emitter.setOptions(currentViewData.options);\n        var currentDate = getInitialDate(optionsData.calendarOptions, optionsData.dateEnv);\n        var dateProfile = currentViewData.dateProfileGenerator.build(currentDate);\n        if (!rangeContainsMarker(dateProfile.activeRange, currentDate)) {\n            currentDate = dateProfile.currentRange.start;\n        }\n        var calendarContext = {\n            dateEnv: optionsData.dateEnv,\n            options: optionsData.calendarOptions,\n            pluginHooks: optionsData.pluginHooks,\n            calendarApi: props.calendarApi,\n            dispatch: this.dispatch,\n            emitter: this.emitter,\n            getCurrentData: this.getCurrentData,\n        };\n        // needs to be after setThisContext\n        for (var _i = 0, _a = optionsData.pluginHooks.contextInit; _i < _a.length; _i++) {\n            var callback = _a[_i];\n            callback(calendarContext);\n        }\n        // NOT DRY\n        var eventSources = initEventSources(optionsData.calendarOptions, dateProfile, calendarContext);\n        var initialState = {\n            dynamicOptionOverrides: dynamicOptionOverrides,\n            currentViewType: currentViewType,\n            currentDate: currentDate,\n            dateProfile: dateProfile,\n            businessHours: this.parseContextBusinessHours(calendarContext),\n            eventSources: eventSources,\n            eventUiBases: {},\n            eventStore: createEmptyEventStore(),\n            renderableEventStore: createEmptyEventStore(),\n            dateSelection: null,\n            eventSelection: '',\n            eventDrag: null,\n            eventResize: null,\n            selectionConfig: this.buildViewUiProps(calendarContext).selectionConfig,\n        };\n        var contextAndState = __assign(__assign({}, calendarContext), initialState);\n        for (var _b = 0, _c = optionsData.pluginHooks.reducers; _b < _c.length; _b++) {\n            var reducer = _c[_b];\n            __assign(initialState, reducer(null, null, contextAndState));\n        }\n        if (computeIsLoading(initialState, calendarContext)) {\n            this.emitter.trigger('loading', true); // NOT DRY\n        }\n        this.state = initialState;\n        this.updateData();\n        this.actionRunner.resume();\n    }\n    CalendarDataManager.prototype.resetOptions = function (optionOverrides, append) {\n        var props = this.props;\n        props.optionOverrides = append\n            ? __assign(__assign({}, props.optionOverrides), optionOverrides) : optionOverrides;\n        this.actionRunner.request({\n            type: 'NOTHING',\n        });\n    };\n    CalendarDataManager.prototype._handleAction = function (action) {\n        var _a = this, props = _a.props, state = _a.state, emitter = _a.emitter;\n        var dynamicOptionOverrides = reduceDynamicOptionOverrides(state.dynamicOptionOverrides, action);\n        var optionsData = this.computeOptionsData(props.optionOverrides, dynamicOptionOverrides, props.calendarApi);\n        var currentViewType = reduceViewType(state.currentViewType, action);\n        var currentViewData = this.computeCurrentViewData(currentViewType, optionsData, props.optionOverrides, dynamicOptionOverrides);\n        // wire things up\n        // TODO: not DRY\n        props.calendarApi.currentDataManager = this;\n        emitter.setThisContext(props.calendarApi);\n        emitter.setOptions(currentViewData.options);\n        var calendarContext = {\n            dateEnv: optionsData.dateEnv,\n            options: optionsData.calendarOptions,\n            pluginHooks: optionsData.pluginHooks,\n            calendarApi: props.calendarApi,\n            dispatch: this.dispatch,\n            emitter: emitter,\n            getCurrentData: this.getCurrentData,\n        };\n        var currentDate = state.currentDate, dateProfile = state.dateProfile;\n        if (this.data && this.data.dateProfileGenerator !== currentViewData.dateProfileGenerator) { // hack\n            dateProfile = currentViewData.dateProfileGenerator.build(currentDate);\n        }\n        currentDate = reduceCurrentDate(currentDate, action);\n        dateProfile = reduceDateProfile(dateProfile, action, currentDate, currentViewData.dateProfileGenerator);\n        if (action.type === 'PREV' || // TODO: move this logic into DateProfileGenerator\n            action.type === 'NEXT' || // \"\n            !rangeContainsMarker(dateProfile.currentRange, currentDate)) {\n            currentDate = dateProfile.currentRange.start;\n        }\n        var eventSources = reduceEventSources(state.eventSources, action, dateProfile, calendarContext);\n        var eventStore = reduceEventStore(state.eventStore, action, eventSources, dateProfile, calendarContext);\n        var isEventsLoading = computeEventSourcesLoading(eventSources); // BAD. also called in this func in computeIsLoading\n        var renderableEventStore = (isEventsLoading && !currentViewData.options.progressiveEventRendering) ?\n            (state.renderableEventStore || eventStore) : // try from previous state\n            eventStore;\n        var _b = this.buildViewUiProps(calendarContext), eventUiSingleBase = _b.eventUiSingleBase, selectionConfig = _b.selectionConfig; // will memoize obj\n        var eventUiBySource = this.buildEventUiBySource(eventSources);\n        var eventUiBases = this.buildEventUiBases(renderableEventStore.defs, eventUiSingleBase, eventUiBySource);\n        var newState = {\n            dynamicOptionOverrides: dynamicOptionOverrides,\n            currentViewType: currentViewType,\n            currentDate: currentDate,\n            dateProfile: dateProfile,\n            eventSources: eventSources,\n            eventStore: eventStore,\n            renderableEventStore: renderableEventStore,\n            selectionConfig: selectionConfig,\n            eventUiBases: eventUiBases,\n            businessHours: this.parseContextBusinessHours(calendarContext),\n            dateSelection: reduceDateSelection(state.dateSelection, action),\n            eventSelection: reduceSelectedEvent(state.eventSelection, action),\n            eventDrag: reduceEventDrag(state.eventDrag, action),\n            eventResize: reduceEventResize(state.eventResize, action),\n        };\n        var contextAndState = __assign(__assign({}, calendarContext), newState);\n        for (var _i = 0, _c = optionsData.pluginHooks.reducers; _i < _c.length; _i++) {\n            var reducer = _c[_i];\n            __assign(newState, reducer(state, action, contextAndState)); // give the OLD state, for old value\n        }\n        var wasLoading = computeIsLoading(state, calendarContext);\n        var isLoading = computeIsLoading(newState, calendarContext);\n        // TODO: use propSetHandlers in plugin system\n        if (!wasLoading && isLoading) {\n            emitter.trigger('loading', true);\n        }\n        else if (wasLoading && !isLoading) {\n            emitter.trigger('loading', false);\n        }\n        this.state = newState;\n        if (props.onAction) {\n            props.onAction(action);\n        }\n    };\n    CalendarDataManager.prototype.updateData = function () {\n        var _a = this, props = _a.props, state = _a.state;\n        var oldData = this.data;\n        var optionsData = this.computeOptionsData(props.optionOverrides, state.dynamicOptionOverrides, props.calendarApi);\n        var currentViewData = this.computeCurrentViewData(state.currentViewType, optionsData, props.optionOverrides, state.dynamicOptionOverrides);\n        var data = this.data = __assign(__assign(__assign({ viewTitle: this.buildTitle(state.dateProfile, currentViewData.options, optionsData.dateEnv), calendarApi: props.calendarApi, dispatch: this.dispatch, emitter: this.emitter, getCurrentData: this.getCurrentData }, optionsData), currentViewData), state);\n        var changeHandlers = optionsData.pluginHooks.optionChangeHandlers;\n        var oldCalendarOptions = oldData && oldData.calendarOptions;\n        var newCalendarOptions = optionsData.calendarOptions;\n        if (oldCalendarOptions && oldCalendarOptions !== newCalendarOptions) {\n            if (oldCalendarOptions.timeZone !== newCalendarOptions.timeZone) {\n                // hack\n                state.eventSources = data.eventSources = reduceEventSourcesNewTimeZone(data.eventSources, state.dateProfile, data);\n                state.eventStore = data.eventStore = rezoneEventStoreDates(data.eventStore, oldData.dateEnv, data.dateEnv);\n            }\n            for (var optionName in changeHandlers) {\n                if (oldCalendarOptions[optionName] !== newCalendarOptions[optionName]) {\n                    changeHandlers[optionName](newCalendarOptions[optionName], data);\n                }\n            }\n        }\n        if (props.onData) {\n            props.onData(data);\n        }\n    };\n    CalendarDataManager.prototype._computeOptionsData = function (optionOverrides, dynamicOptionOverrides, calendarApi) {\n        // TODO: blacklist options that are handled by optionChangeHandlers\n        var _a = this.processRawCalendarOptions(optionOverrides, dynamicOptionOverrides), refinedOptions = _a.refinedOptions, pluginHooks = _a.pluginHooks, localeDefaults = _a.localeDefaults, availableLocaleData = _a.availableLocaleData, extra = _a.extra;\n        warnUnknownOptions(extra);\n        var dateEnv = this.buildDateEnv(refinedOptions.timeZone, refinedOptions.locale, refinedOptions.weekNumberCalculation, refinedOptions.firstDay, refinedOptions.weekText, pluginHooks, availableLocaleData, refinedOptions.defaultRangeSeparator);\n        var viewSpecs = this.buildViewSpecs(pluginHooks.views, optionOverrides, dynamicOptionOverrides, localeDefaults);\n        var theme = this.buildTheme(refinedOptions, pluginHooks);\n        var toolbarConfig = this.parseToolbars(refinedOptions, optionOverrides, theme, viewSpecs, calendarApi);\n        return {\n            calendarOptions: refinedOptions,\n            pluginHooks: pluginHooks,\n            dateEnv: dateEnv,\n            viewSpecs: viewSpecs,\n            theme: theme,\n            toolbarConfig: toolbarConfig,\n            localeDefaults: localeDefaults,\n            availableRawLocales: availableLocaleData.map,\n        };\n    };\n    // always called from behind a memoizer\n    CalendarDataManager.prototype.processRawCalendarOptions = function (optionOverrides, dynamicOptionOverrides) {\n        var _a = mergeRawOptions([\n            BASE_OPTION_DEFAULTS,\n            optionOverrides,\n            dynamicOptionOverrides,\n        ]), locales = _a.locales, locale = _a.locale;\n        var availableLocaleData = this.organizeRawLocales(locales);\n        var availableRawLocales = availableLocaleData.map;\n        var localeDefaults = this.buildLocale(locale || availableLocaleData.defaultCode, availableRawLocales).options;\n        var pluginHooks = this.buildPluginHooks(optionOverrides.plugins || [], globalPlugins);\n        var refiners = this.currentCalendarOptionsRefiners = __assign(__assign(__assign(__assign(__assign({}, BASE_OPTION_REFINERS), CALENDAR_LISTENER_REFINERS), CALENDAR_OPTION_REFINERS), pluginHooks.listenerRefiners), pluginHooks.optionRefiners);\n        var extra = {};\n        var raw = mergeRawOptions([\n            BASE_OPTION_DEFAULTS,\n            localeDefaults,\n            optionOverrides,\n            dynamicOptionOverrides,\n        ]);\n        var refined = {};\n        var currentRaw = this.currentCalendarOptionsInput;\n        var currentRefined = this.currentCalendarOptionsRefined;\n        var anyChanges = false;\n        for (var optionName in raw) {\n            if (optionName !== 'plugins') { // because plugins is special-cased\n                if (raw[optionName] === currentRaw[optionName] ||\n                    (COMPLEX_OPTION_COMPARATORS[optionName] &&\n                        (optionName in currentRaw) &&\n                        COMPLEX_OPTION_COMPARATORS[optionName](currentRaw[optionName], raw[optionName]))) {\n                    refined[optionName] = currentRefined[optionName];\n                }\n                else if (refiners[optionName]) {\n                    refined[optionName] = refiners[optionName](raw[optionName]);\n                    anyChanges = true;\n                }\n                else {\n                    extra[optionName] = currentRaw[optionName];\n                }\n            }\n        }\n        if (anyChanges) {\n            this.currentCalendarOptionsInput = raw;\n            this.currentCalendarOptionsRefined = refined;\n        }\n        return {\n            rawOptions: this.currentCalendarOptionsInput,\n            refinedOptions: this.currentCalendarOptionsRefined,\n            pluginHooks: pluginHooks,\n            availableLocaleData: availableLocaleData,\n            localeDefaults: localeDefaults,\n            extra: extra,\n        };\n    };\n    CalendarDataManager.prototype._computeCurrentViewData = function (viewType, optionsData, optionOverrides, dynamicOptionOverrides) {\n        var viewSpec = optionsData.viewSpecs[viewType];\n        if (!viewSpec) {\n            throw new Error(\"viewType \\\"\" + viewType + \"\\\" is not available. Please make sure you've loaded all neccessary plugins\");\n        }\n        var _a = this.processRawViewOptions(viewSpec, optionsData.pluginHooks, optionsData.localeDefaults, optionOverrides, dynamicOptionOverrides), refinedOptions = _a.refinedOptions, extra = _a.extra;\n        warnUnknownOptions(extra);\n        var dateProfileGenerator = this.buildDateProfileGenerator({\n            dateProfileGeneratorClass: viewSpec.optionDefaults.dateProfileGeneratorClass,\n            duration: viewSpec.duration,\n            durationUnit: viewSpec.durationUnit,\n            usesMinMaxTime: viewSpec.optionDefaults.usesMinMaxTime,\n            dateEnv: optionsData.dateEnv,\n            calendarApi: this.props.calendarApi,\n            slotMinTime: refinedOptions.slotMinTime,\n            slotMaxTime: refinedOptions.slotMaxTime,\n            showNonCurrentDates: refinedOptions.showNonCurrentDates,\n            dayCount: refinedOptions.dayCount,\n            dateAlignment: refinedOptions.dateAlignment,\n            dateIncrement: refinedOptions.dateIncrement,\n            hiddenDays: refinedOptions.hiddenDays,\n            weekends: refinedOptions.weekends,\n            nowInput: refinedOptions.now,\n            validRangeInput: refinedOptions.validRange,\n            visibleRangeInput: refinedOptions.visibleRange,\n            monthMode: refinedOptions.monthMode,\n            fixedWeekCount: refinedOptions.fixedWeekCount,\n        });\n        var viewApi = this.buildViewApi(viewType, this.getCurrentData, optionsData.dateEnv);\n        return { viewSpec: viewSpec, options: refinedOptions, dateProfileGenerator: dateProfileGenerator, viewApi: viewApi };\n    };\n    CalendarDataManager.prototype.processRawViewOptions = function (viewSpec, pluginHooks, localeDefaults, optionOverrides, dynamicOptionOverrides) {\n        var raw = mergeRawOptions([\n            BASE_OPTION_DEFAULTS,\n            viewSpec.optionDefaults,\n            localeDefaults,\n            optionOverrides,\n            viewSpec.optionOverrides,\n            dynamicOptionOverrides,\n        ]);\n        var refiners = __assign(__assign(__assign(__assign(__assign(__assign({}, BASE_OPTION_REFINERS), CALENDAR_LISTENER_REFINERS), CALENDAR_OPTION_REFINERS), VIEW_OPTION_REFINERS), pluginHooks.listenerRefiners), pluginHooks.optionRefiners);\n        var refined = {};\n        var currentRaw = this.currentViewOptionsInput;\n        var currentRefined = this.currentViewOptionsRefined;\n        var anyChanges = false;\n        var extra = {};\n        for (var optionName in raw) {\n            if (raw[optionName] === currentRaw[optionName]) {\n                refined[optionName] = currentRefined[optionName];\n            }\n            else {\n                if (raw[optionName] === this.currentCalendarOptionsInput[optionName]) {\n                    if (optionName in this.currentCalendarOptionsRefined) { // might be an \"extra\" prop\n                        refined[optionName] = this.currentCalendarOptionsRefined[optionName];\n                    }\n                }\n                else if (refiners[optionName]) {\n                    refined[optionName] = refiners[optionName](raw[optionName]);\n                }\n                else {\n                    extra[optionName] = raw[optionName];\n                }\n                anyChanges = true;\n            }\n        }\n        if (anyChanges) {\n            this.currentViewOptionsInput = raw;\n            this.currentViewOptionsRefined = refined;\n        }\n        return {\n            rawOptions: this.currentViewOptionsInput,\n            refinedOptions: this.currentViewOptionsRefined,\n            extra: extra,\n        };\n    };\n    return CalendarDataManager;\n}());\nfunction buildDateEnv(timeZone, explicitLocale, weekNumberCalculation, firstDay, weekText, pluginHooks, availableLocaleData, defaultSeparator) {\n    var locale = buildLocale(explicitLocale || availableLocaleData.defaultCode, availableLocaleData.map);\n    return new DateEnv({\n        calendarSystem: 'gregory',\n        timeZone: timeZone,\n        namedTimeZoneImpl: pluginHooks.namedTimeZonedImpl,\n        locale: locale,\n        weekNumberCalculation: weekNumberCalculation,\n        firstDay: firstDay,\n        weekText: weekText,\n        cmdFormatter: pluginHooks.cmdFormatter,\n        defaultSeparator: defaultSeparator,\n    });\n}\nfunction buildTheme(options, pluginHooks) {\n    var ThemeClass = pluginHooks.themeClasses[options.themeSystem] || StandardTheme;\n    return new ThemeClass(options);\n}\nfunction buildDateProfileGenerator(props) {\n    var DateProfileGeneratorClass = props.dateProfileGeneratorClass || DateProfileGenerator;\n    return new DateProfileGeneratorClass(props);\n}\nfunction buildViewApi(type, getCurrentData, dateEnv) {\n    return new ViewApi(type, getCurrentData, dateEnv);\n}\nfunction buildEventUiBySource(eventSources) {\n    return mapHash(eventSources, function (eventSource) { return eventSource.ui; });\n}\nfunction buildEventUiBases(eventDefs, eventUiSingleBase, eventUiBySource) {\n    var eventUiBases = { '': eventUiSingleBase };\n    for (var defId in eventDefs) {\n        var def = eventDefs[defId];\n        if (def.sourceId && eventUiBySource[def.sourceId]) {\n            eventUiBases[defId] = eventUiBySource[def.sourceId];\n        }\n    }\n    return eventUiBases;\n}\nfunction buildViewUiProps(calendarContext) {\n    var options = calendarContext.options;\n    return {\n        eventUiSingleBase: createEventUi({\n            display: options.eventDisplay,\n            editable: options.editable,\n            startEditable: options.eventStartEditable,\n            durationEditable: options.eventDurationEditable,\n            constraint: options.eventConstraint,\n            overlap: typeof options.eventOverlap === 'boolean' ? options.eventOverlap : undefined,\n            allow: options.eventAllow,\n            backgroundColor: options.eventBackgroundColor,\n            borderColor: options.eventBorderColor,\n            textColor: options.eventTextColor,\n            color: options.eventColor,\n            // classNames: options.eventClassNames // render hook will handle this\n        }, calendarContext),\n        selectionConfig: createEventUi({\n            constraint: options.selectConstraint,\n            overlap: typeof options.selectOverlap === 'boolean' ? options.selectOverlap : undefined,\n            allow: options.selectAllow,\n        }, calendarContext),\n    };\n}\nfunction computeIsLoading(state, context) {\n    for (var _i = 0, _a = context.pluginHooks.isLoadingFuncs; _i < _a.length; _i++) {\n        var isLoadingFunc = _a[_i];\n        if (isLoadingFunc(state)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction parseContextBusinessHours(calendarContext) {\n    return parseBusinessHours(calendarContext.options.businessHours, calendarContext);\n}\nfunction warnUnknownOptions(options, viewName) {\n    for (var optionName in options) {\n        console.warn(\"Unknown option '\" + optionName + \"'\" +\n            (viewName ? \" for view '\" + viewName + \"'\" : ''));\n    }\n}\n\n// TODO: move this to react plugin?\nvar CalendarDataProvider = /** @class */ (function (_super) {\n    __extends(CalendarDataProvider, _super);\n    function CalendarDataProvider(props) {\n        var _this = _super.call(this, props) || this;\n        _this.handleData = function (data) {\n            if (!_this.dataManager) { // still within initial run, before assignment in constructor\n                // eslint-disable-next-line react/no-direct-mutation-state\n                _this.state = data; // can't use setState yet\n            }\n            else {\n                _this.setState(data);\n            }\n        };\n        _this.dataManager = new CalendarDataManager({\n            optionOverrides: props.optionOverrides,\n            calendarApi: props.calendarApi,\n            onData: _this.handleData,\n        });\n        return _this;\n    }\n    CalendarDataProvider.prototype.render = function () {\n        return this.props.children(this.state);\n    };\n    CalendarDataProvider.prototype.componentDidUpdate = function (prevProps) {\n        var newOptionOverrides = this.props.optionOverrides;\n        if (newOptionOverrides !== prevProps.optionOverrides) { // prevent recursive handleData\n            this.dataManager.resetOptions(newOptionOverrides);\n        }\n    };\n    return CalendarDataProvider;\n}(Component));\n\n// HELPERS\n/*\nif nextDayThreshold is specified, slicing is done in an all-day fashion.\nyou can get nextDayThreshold from context.nextDayThreshold\n*/\nfunction sliceEvents(props, allDay) {\n    return sliceEventStore(props.eventStore, props.eventUiBases, props.dateProfile.activeRange, allDay ? props.nextDayThreshold : null).fg;\n}\n\nvar NamedTimeZoneImpl = /** @class */ (function () {\n    function NamedTimeZoneImpl(timeZoneName) {\n        this.timeZoneName = timeZoneName;\n    }\n    return NamedTimeZoneImpl;\n}());\n\nvar SegHierarchy = /** @class */ (function () {\n    function SegHierarchy() {\n        // settings\n        this.strictOrder = false;\n        this.allowReslicing = false;\n        this.maxCoord = -1; // -1 means no max\n        this.maxStackCnt = -1; // -1 means no max\n        this.levelCoords = []; // ordered\n        this.entriesByLevel = []; // parallel with levelCoords\n        this.stackCnts = {}; // TODO: use better technique!?\n    }\n    SegHierarchy.prototype.addSegs = function (inputs) {\n        var hiddenEntries = [];\n        for (var _i = 0, inputs_1 = inputs; _i < inputs_1.length; _i++) {\n            var input = inputs_1[_i];\n            this.insertEntry(input, hiddenEntries);\n        }\n        return hiddenEntries;\n    };\n    SegHierarchy.prototype.insertEntry = function (entry, hiddenEntries) {\n        var insertion = this.findInsertion(entry);\n        if (this.isInsertionValid(insertion, entry)) {\n            this.insertEntryAt(entry, insertion);\n            return 1;\n        }\n        return this.handleInvalidInsertion(insertion, entry, hiddenEntries);\n    };\n    SegHierarchy.prototype.isInsertionValid = function (insertion, entry) {\n        return (this.maxCoord === -1 || insertion.levelCoord + entry.thickness <= this.maxCoord) &&\n            (this.maxStackCnt === -1 || insertion.stackCnt < this.maxStackCnt);\n    };\n    // returns number of new entries inserted\n    SegHierarchy.prototype.handleInvalidInsertion = function (insertion, entry, hiddenEntries) {\n        if (this.allowReslicing && insertion.touchingEntry) {\n            return this.splitEntry(entry, insertion.touchingEntry, hiddenEntries);\n        }\n        hiddenEntries.push(entry);\n        return 0;\n    };\n    SegHierarchy.prototype.splitEntry = function (entry, barrier, hiddenEntries) {\n        var partCnt = 0;\n        var splitHiddenEntries = [];\n        var entrySpan = entry.span;\n        var barrierSpan = barrier.span;\n        if (entrySpan.start < barrierSpan.start) {\n            partCnt += this.insertEntry({\n                index: entry.index,\n                thickness: entry.thickness,\n                span: { start: entrySpan.start, end: barrierSpan.start },\n            }, splitHiddenEntries);\n        }\n        if (entrySpan.end > barrierSpan.end) {\n            partCnt += this.insertEntry({\n                index: entry.index,\n                thickness: entry.thickness,\n                span: { start: barrierSpan.end, end: entrySpan.end },\n            }, splitHiddenEntries);\n        }\n        if (partCnt) {\n            hiddenEntries.push.apply(hiddenEntries, __spreadArray([{\n                    index: entry.index,\n                    thickness: entry.thickness,\n                    span: intersectSpans(barrierSpan, entrySpan), // guaranteed to intersect\n                }], splitHiddenEntries));\n            return partCnt;\n        }\n        hiddenEntries.push(entry);\n        return 0;\n    };\n    SegHierarchy.prototype.insertEntryAt = function (entry, insertion) {\n        var _a = this, entriesByLevel = _a.entriesByLevel, levelCoords = _a.levelCoords;\n        if (insertion.lateral === -1) {\n            // create a new level\n            insertAt(levelCoords, insertion.level, insertion.levelCoord);\n            insertAt(entriesByLevel, insertion.level, [entry]);\n        }\n        else {\n            // insert into existing level\n            insertAt(entriesByLevel[insertion.level], insertion.lateral, entry);\n        }\n        this.stackCnts[buildEntryKey(entry)] = insertion.stackCnt;\n    };\n    SegHierarchy.prototype.findInsertion = function (newEntry) {\n        var _a = this, levelCoords = _a.levelCoords, entriesByLevel = _a.entriesByLevel, strictOrder = _a.strictOrder, stackCnts = _a.stackCnts;\n        var levelCnt = levelCoords.length;\n        var candidateCoord = 0;\n        var touchingLevel = -1;\n        var touchingLateral = -1;\n        var touchingEntry = null;\n        var stackCnt = 0;\n        for (var trackingLevel = 0; trackingLevel < levelCnt; trackingLevel += 1) {\n            var trackingCoord = levelCoords[trackingLevel];\n            // if the current level is past the placed entry, we have found a good empty space and can stop.\n            // if strictOrder, keep finding more lateral intersections.\n            if (!strictOrder && trackingCoord >= candidateCoord + newEntry.thickness) {\n                break;\n            }\n            var trackingEntries = entriesByLevel[trackingLevel];\n            var trackingEntry = void 0;\n            var searchRes = binarySearch(trackingEntries, newEntry.span.start, getEntrySpanEnd); // find first entry after newEntry's end\n            var lateralIndex = searchRes[0] + searchRes[1]; // if exact match (which doesn't collide), go to next one\n            while ( // loop through entries that horizontally intersect\n            (trackingEntry = trackingEntries[lateralIndex]) && // but not past the whole entry list\n                trackingEntry.span.start < newEntry.span.end // and not entirely past newEntry\n            ) {\n                var trackingEntryBottom = trackingCoord + trackingEntry.thickness;\n                // intersects into the top of the candidate?\n                if (trackingEntryBottom > candidateCoord) {\n                    candidateCoord = trackingEntryBottom;\n                    touchingEntry = trackingEntry;\n                    touchingLevel = trackingLevel;\n                    touchingLateral = lateralIndex;\n                }\n                // butts up against top of candidate? (will happen if just intersected as well)\n                if (trackingEntryBottom === candidateCoord) {\n                    // accumulate the highest possible stackCnt of the trackingEntries that butt up\n                    stackCnt = Math.max(stackCnt, stackCnts[buildEntryKey(trackingEntry)] + 1);\n                }\n                lateralIndex += 1;\n            }\n        }\n        // the destination level will be after touchingEntry's level. find it\n        var destLevel = 0;\n        if (touchingEntry) {\n            destLevel = touchingLevel + 1;\n            while (destLevel < levelCnt && levelCoords[destLevel] < candidateCoord) {\n                destLevel += 1;\n            }\n        }\n        // if adding to an existing level, find where to insert\n        var destLateral = -1;\n        if (destLevel < levelCnt && levelCoords[destLevel] === candidateCoord) {\n            destLateral = binarySearch(entriesByLevel[destLevel], newEntry.span.end, getEntrySpanEnd)[0];\n        }\n        return {\n            touchingLevel: touchingLevel,\n            touchingLateral: touchingLateral,\n            touchingEntry: touchingEntry,\n            stackCnt: stackCnt,\n            levelCoord: candidateCoord,\n            level: destLevel,\n            lateral: destLateral,\n        };\n    };\n    // sorted by levelCoord (lowest to highest)\n    SegHierarchy.prototype.toRects = function () {\n        var _a = this, entriesByLevel = _a.entriesByLevel, levelCoords = _a.levelCoords;\n        var levelCnt = entriesByLevel.length;\n        var rects = [];\n        for (var level = 0; level < levelCnt; level += 1) {\n            var entries = entriesByLevel[level];\n            var levelCoord = levelCoords[level];\n            for (var _i = 0, entries_1 = entries; _i < entries_1.length; _i++) {\n                var entry = entries_1[_i];\n                rects.push(__assign(__assign({}, entry), { levelCoord: levelCoord }));\n            }\n        }\n        return rects;\n    };\n    return SegHierarchy;\n}());\nfunction getEntrySpanEnd(entry) {\n    return entry.span.end;\n}\nfunction buildEntryKey(entry) {\n    return entry.index + ':' + entry.span.start;\n}\n// returns groups with entries sorted by input order\nfunction groupIntersectingEntries(entries) {\n    var merges = [];\n    for (var _i = 0, entries_2 = entries; _i < entries_2.length; _i++) {\n        var entry = entries_2[_i];\n        var filteredMerges = [];\n        var hungryMerge = {\n            span: entry.span,\n            entries: [entry],\n        };\n        for (var _a = 0, merges_1 = merges; _a < merges_1.length; _a++) {\n            var merge = merges_1[_a];\n            if (intersectSpans(merge.span, hungryMerge.span)) {\n                hungryMerge = {\n                    entries: merge.entries.concat(hungryMerge.entries),\n                    span: joinSpans(merge.span, hungryMerge.span),\n                };\n            }\n            else {\n                filteredMerges.push(merge);\n            }\n        }\n        filteredMerges.push(hungryMerge);\n        merges = filteredMerges;\n    }\n    return merges;\n}\nfunction joinSpans(span0, span1) {\n    return {\n        start: Math.min(span0.start, span1.start),\n        end: Math.max(span0.end, span1.end),\n    };\n}\nfunction intersectSpans(span0, span1) {\n    var start = Math.max(span0.start, span1.start);\n    var end = Math.min(span0.end, span1.end);\n    if (start < end) {\n        return { start: start, end: end };\n    }\n    return null;\n}\n// general util\n// ---------------------------------------------------------------------------------------------------------------------\nfunction insertAt(arr, index, item) {\n    arr.splice(index, 0, item);\n}\nfunction binarySearch(a, searchVal, getItemVal) {\n    var startIndex = 0;\n    var endIndex = a.length; // exclusive\n    if (!endIndex || searchVal < getItemVal(a[startIndex])) { // no items OR before first item\n        return [0, 0];\n    }\n    if (searchVal > getItemVal(a[endIndex - 1])) { // after last item\n        return [endIndex, 0];\n    }\n    while (startIndex < endIndex) {\n        var middleIndex = Math.floor(startIndex + (endIndex - startIndex) / 2);\n        var middleVal = getItemVal(a[middleIndex]);\n        if (searchVal < middleVal) {\n            endIndex = middleIndex;\n        }\n        else if (searchVal > middleVal) {\n            startIndex = middleIndex + 1;\n        }\n        else { // equal!\n            return [middleIndex, 1];\n        }\n    }\n    return [startIndex, 0];\n}\n\nvar Interaction = /** @class */ (function () {\n    function Interaction(settings) {\n        this.component = settings.component;\n        this.isHitComboAllowed = settings.isHitComboAllowed || null;\n    }\n    Interaction.prototype.destroy = function () {\n    };\n    return Interaction;\n}());\nfunction parseInteractionSettings(component, input) {\n    return {\n        component: component,\n        el: input.el,\n        useEventCenter: input.useEventCenter != null ? input.useEventCenter : true,\n        isHitComboAllowed: input.isHitComboAllowed || null,\n    };\n}\nfunction interactionSettingsToStore(settings) {\n    var _a;\n    return _a = {},\n        _a[settings.component.uid] = settings,\n        _a;\n}\n// global state\nvar interactionSettingsStore = {};\n\n/*\nAn abstraction for a dragging interaction originating on an event.\nDoes higher-level things than PointerDragger, such as possibly:\n- a \"mirror\" that moves with the pointer\n- a minimum number of pixels or other criteria for a true drag to begin\n\nsubclasses must emit:\n- pointerdown\n- dragstart\n- dragmove\n- pointerup\n- dragend\n*/\nvar ElementDragging = /** @class */ (function () {\n    function ElementDragging(el, selector) {\n        this.emitter = new Emitter();\n    }\n    ElementDragging.prototype.destroy = function () {\n    };\n    ElementDragging.prototype.setMirrorIsVisible = function (bool) {\n        // optional if subclass doesn't want to support a mirror\n    };\n    ElementDragging.prototype.setMirrorNeedsRevert = function (bool) {\n        // optional if subclass doesn't want to support a mirror\n    };\n    ElementDragging.prototype.setAutoScrollEnabled = function (bool) {\n        // optional\n    };\n    return ElementDragging;\n}());\n\n// TODO: get rid of this in favor of options system,\n// tho it's really easy to access this globally rather than pass thru options.\nvar config = {};\n\n/*\nInformation about what will happen when an external element is dragged-and-dropped\nonto a calendar. Contains information for creating an event.\n*/\nvar DRAG_META_REFINERS = {\n    startTime: createDuration,\n    duration: createDuration,\n    create: Boolean,\n    sourceId: String,\n};\nfunction parseDragMeta(raw) {\n    var _a = refineProps(raw, DRAG_META_REFINERS), refined = _a.refined, extra = _a.extra;\n    return {\n        startTime: refined.startTime || null,\n        duration: refined.duration || null,\n        create: refined.create != null ? refined.create : true,\n        sourceId: refined.sourceId,\n        leftoverProps: extra,\n    };\n}\n\nvar ToolbarSection = /** @class */ (function (_super) {\n    __extends(ToolbarSection, _super);\n    function ToolbarSection() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ToolbarSection.prototype.render = function () {\n        var _this = this;\n        var children = this.props.widgetGroups.map(function (widgetGroup) { return _this.renderWidgetGroup(widgetGroup); });\n        return createElement.apply(void 0, __spreadArray(['div', { className: 'fc-toolbar-chunk' }], children));\n    };\n    ToolbarSection.prototype.renderWidgetGroup = function (widgetGroup) {\n        var props = this.props;\n        var theme = this.context.theme;\n        var children = [];\n        var isOnlyButtons = true;\n        for (var _i = 0, widgetGroup_1 = widgetGroup; _i < widgetGroup_1.length; _i++) {\n            var widget = widgetGroup_1[_i];\n            var buttonName = widget.buttonName, buttonClick = widget.buttonClick, buttonText = widget.buttonText, buttonIcon = widget.buttonIcon, buttonHint = widget.buttonHint;\n            if (buttonName === 'title') {\n                isOnlyButtons = false;\n                children.push(createElement(\"h2\", { className: \"fc-toolbar-title\", id: props.titleId }, props.title));\n            }\n            else {\n                var isPressed = buttonName === props.activeButton;\n                var isDisabled = (!props.isTodayEnabled && buttonName === 'today') ||\n                    (!props.isPrevEnabled && buttonName === 'prev') ||\n                    (!props.isNextEnabled && buttonName === 'next');\n                var buttonClasses = [\"fc-\" + buttonName + \"-button\", theme.getClass('button')];\n                if (isPressed) {\n                    buttonClasses.push(theme.getClass('buttonActive'));\n                }\n                children.push(createElement(\"button\", { type: \"button\", title: typeof buttonHint === 'function' ? buttonHint(props.navUnit) : buttonHint, disabled: isDisabled, \"aria-pressed\": isPressed, className: buttonClasses.join(' '), onClick: buttonClick }, buttonText || (buttonIcon ? createElement(\"span\", { className: buttonIcon }) : '')));\n            }\n        }\n        if (children.length > 1) {\n            var groupClassName = (isOnlyButtons && theme.getClass('buttonGroup')) || '';\n            return createElement.apply(void 0, __spreadArray(['div', { className: groupClassName }], children));\n        }\n        return children[0];\n    };\n    return ToolbarSection;\n}(BaseComponent));\n\nvar Toolbar = /** @class */ (function (_super) {\n    __extends(Toolbar, _super);\n    function Toolbar() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Toolbar.prototype.render = function () {\n        var _a = this.props, model = _a.model, extraClassName = _a.extraClassName;\n        var forceLtr = false;\n        var startContent;\n        var endContent;\n        var sectionWidgets = model.sectionWidgets;\n        var centerContent = sectionWidgets.center;\n        if (sectionWidgets.left) {\n            forceLtr = true;\n            startContent = sectionWidgets.left;\n        }\n        else {\n            startContent = sectionWidgets.start;\n        }\n        if (sectionWidgets.right) {\n            forceLtr = true;\n            endContent = sectionWidgets.right;\n        }\n        else {\n            endContent = sectionWidgets.end;\n        }\n        var classNames = [\n            extraClassName || '',\n            'fc-toolbar',\n            forceLtr ? 'fc-toolbar-ltr' : '',\n        ];\n        return (createElement(\"div\", { className: classNames.join(' ') },\n            this.renderSection('start', startContent || []),\n            this.renderSection('center', centerContent || []),\n            this.renderSection('end', endContent || [])));\n    };\n    Toolbar.prototype.renderSection = function (key, widgetGroups) {\n        var props = this.props;\n        return (createElement(ToolbarSection, { key: key, widgetGroups: widgetGroups, title: props.title, navUnit: props.navUnit, activeButton: props.activeButton, isTodayEnabled: props.isTodayEnabled, isPrevEnabled: props.isPrevEnabled, isNextEnabled: props.isNextEnabled, titleId: props.titleId }));\n    };\n    return Toolbar;\n}(BaseComponent));\n\n// TODO: do function component?\nvar ViewContainer = /** @class */ (function (_super) {\n    __extends(ViewContainer, _super);\n    function ViewContainer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            availableWidth: null,\n        };\n        _this.handleEl = function (el) {\n            _this.el = el;\n            setRef(_this.props.elRef, el);\n            _this.updateAvailableWidth();\n        };\n        _this.handleResize = function () {\n            _this.updateAvailableWidth();\n        };\n        return _this;\n    }\n    ViewContainer.prototype.render = function () {\n        var _a = this, props = _a.props, state = _a.state;\n        var aspectRatio = props.aspectRatio;\n        var classNames = [\n            'fc-view-harness',\n            (aspectRatio || props.liquid || props.height)\n                ? 'fc-view-harness-active' // harness controls the height\n                : 'fc-view-harness-passive', // let the view do the height\n        ];\n        var height = '';\n        var paddingBottom = '';\n        if (aspectRatio) {\n            if (state.availableWidth !== null) {\n                height = state.availableWidth / aspectRatio;\n            }\n            else {\n                // while waiting to know availableWidth, we can't set height to *zero*\n                // because will cause lots of unnecessary scrollbars within scrollgrid.\n                // BETTER: don't start rendering ANYTHING yet until we know container width\n                // NOTE: why not always use paddingBottom? Causes height oscillation (issue 5606)\n                paddingBottom = (1 / aspectRatio) * 100 + \"%\";\n            }\n        }\n        else {\n            height = props.height || '';\n        }\n        return (createElement(\"div\", { \"aria-labelledby\": props.labeledById, ref: this.handleEl, className: classNames.join(' '), style: { height: height, paddingBottom: paddingBottom } }, props.children));\n    };\n    ViewContainer.prototype.componentDidMount = function () {\n        this.context.addResizeHandler(this.handleResize);\n    };\n    ViewContainer.prototype.componentWillUnmount = function () {\n        this.context.removeResizeHandler(this.handleResize);\n    };\n    ViewContainer.prototype.updateAvailableWidth = function () {\n        if (this.el && // needed. but why?\n            this.props.aspectRatio // aspectRatio is the only height setting that needs availableWidth\n        ) {\n            this.setState({ availableWidth: this.el.offsetWidth });\n        }\n    };\n    return ViewContainer;\n}(BaseComponent));\n\n/*\nDetects when the user clicks on an event within a DateComponent\n*/\nvar EventClicking = /** @class */ (function (_super) {\n    __extends(EventClicking, _super);\n    function EventClicking(settings) {\n        var _this = _super.call(this, settings) || this;\n        _this.handleSegClick = function (ev, segEl) {\n            var component = _this.component;\n            var context = component.context;\n            var seg = getElSeg(segEl);\n            if (seg && // might be the <div> surrounding the more link\n                component.isValidSegDownEl(ev.target)) {\n                // our way to simulate a link click for elements that can't be <a> tags\n                // grab before trigger fired in case trigger trashes DOM thru rerendering\n                var hasUrlContainer = elementClosest(ev.target, '.fc-event-forced-url');\n                var url = hasUrlContainer ? hasUrlContainer.querySelector('a[href]').href : '';\n                context.emitter.trigger('eventClick', {\n                    el: segEl,\n                    event: new EventApi(component.context, seg.eventRange.def, seg.eventRange.instance),\n                    jsEvent: ev,\n                    view: context.viewApi,\n                });\n                if (url && !ev.defaultPrevented) {\n                    window.location.href = url;\n                }\n            }\n        };\n        _this.destroy = listenBySelector(settings.el, 'click', '.fc-event', // on both fg and bg events\n        _this.handleSegClick);\n        return _this;\n    }\n    return EventClicking;\n}(Interaction));\n\n/*\nTriggers events and adds/removes core classNames when the user's pointer\nenters/leaves event-elements of a component.\n*/\nvar EventHovering = /** @class */ (function (_super) {\n    __extends(EventHovering, _super);\n    function EventHovering(settings) {\n        var _this = _super.call(this, settings) || this;\n        // for simulating an eventMouseLeave when the event el is destroyed while mouse is over it\n        _this.handleEventElRemove = function (el) {\n            if (el === _this.currentSegEl) {\n                _this.handleSegLeave(null, _this.currentSegEl);\n            }\n        };\n        _this.handleSegEnter = function (ev, segEl) {\n            if (getElSeg(segEl)) { // TODO: better way to make sure not hovering over more+ link or its wrapper\n                _this.currentSegEl = segEl;\n                _this.triggerEvent('eventMouseEnter', ev, segEl);\n            }\n        };\n        _this.handleSegLeave = function (ev, segEl) {\n            if (_this.currentSegEl) {\n                _this.currentSegEl = null;\n                _this.triggerEvent('eventMouseLeave', ev, segEl);\n            }\n        };\n        _this.removeHoverListeners = listenToHoverBySelector(settings.el, '.fc-event', // on both fg and bg events\n        _this.handleSegEnter, _this.handleSegLeave);\n        return _this;\n    }\n    EventHovering.prototype.destroy = function () {\n        this.removeHoverListeners();\n    };\n    EventHovering.prototype.triggerEvent = function (publicEvName, ev, segEl) {\n        var component = this.component;\n        var context = component.context;\n        var seg = getElSeg(segEl);\n        if (!ev || component.isValidSegDownEl(ev.target)) {\n            context.emitter.trigger(publicEvName, {\n                el: segEl,\n                event: new EventApi(context, seg.eventRange.def, seg.eventRange.instance),\n                jsEvent: ev,\n                view: context.viewApi,\n            });\n        }\n    };\n    return EventHovering;\n}(Interaction));\n\nvar CalendarContent = /** @class */ (function (_super) {\n    __extends(CalendarContent, _super);\n    function CalendarContent() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buildViewContext = memoize(buildViewContext);\n        _this.buildViewPropTransformers = memoize(buildViewPropTransformers);\n        _this.buildToolbarProps = memoize(buildToolbarProps);\n        _this.headerRef = createRef();\n        _this.footerRef = createRef();\n        _this.interactionsStore = {};\n        // eslint-disable-next-line\n        _this.state = {\n            viewLabelId: getUniqueDomId(),\n        };\n        // Component Registration\n        // -----------------------------------------------------------------------------------------------------------------\n        _this.registerInteractiveComponent = function (component, settingsInput) {\n            var settings = parseInteractionSettings(component, settingsInput);\n            var DEFAULT_INTERACTIONS = [\n                EventClicking,\n                EventHovering,\n            ];\n            var interactionClasses = DEFAULT_INTERACTIONS.concat(_this.props.pluginHooks.componentInteractions);\n            var interactions = interactionClasses.map(function (TheInteractionClass) { return new TheInteractionClass(settings); });\n            _this.interactionsStore[component.uid] = interactions;\n            interactionSettingsStore[component.uid] = settings;\n        };\n        _this.unregisterInteractiveComponent = function (component) {\n            var listeners = _this.interactionsStore[component.uid];\n            if (listeners) {\n                for (var _i = 0, listeners_1 = listeners; _i < listeners_1.length; _i++) {\n                    var listener = listeners_1[_i];\n                    listener.destroy();\n                }\n                delete _this.interactionsStore[component.uid];\n            }\n            delete interactionSettingsStore[component.uid];\n        };\n        // Resizing\n        // -----------------------------------------------------------------------------------------------------------------\n        _this.resizeRunner = new DelayedRunner(function () {\n            _this.props.emitter.trigger('_resize', true); // should window resizes be considered \"forced\" ?\n            _this.props.emitter.trigger('windowResize', { view: _this.props.viewApi });\n        });\n        _this.handleWindowResize = function (ev) {\n            var options = _this.props.options;\n            if (options.handleWindowResize &&\n                ev.target === window // avoid jqui events\n            ) {\n                _this.resizeRunner.request(options.windowResizeDelay);\n            }\n        };\n        return _this;\n    }\n    /*\n    renders INSIDE of an outer div\n    */\n    CalendarContent.prototype.render = function () {\n        var props = this.props;\n        var toolbarConfig = props.toolbarConfig, options = props.options;\n        var toolbarProps = this.buildToolbarProps(props.viewSpec, props.dateProfile, props.dateProfileGenerator, props.currentDate, getNow(props.options.now, props.dateEnv), // TODO: use NowTimer????\n        props.viewTitle);\n        var viewVGrow = false;\n        var viewHeight = '';\n        var viewAspectRatio;\n        if (props.isHeightAuto || props.forPrint) {\n            viewHeight = '';\n        }\n        else if (options.height != null) {\n            viewVGrow = true;\n        }\n        else if (options.contentHeight != null) {\n            viewHeight = options.contentHeight;\n        }\n        else {\n            viewAspectRatio = Math.max(options.aspectRatio, 0.5); // prevent from getting too tall\n        }\n        var viewContext = this.buildViewContext(props.viewSpec, props.viewApi, props.options, props.dateProfileGenerator, props.dateEnv, props.theme, props.pluginHooks, props.dispatch, props.getCurrentData, props.emitter, props.calendarApi, this.registerInteractiveComponent, this.unregisterInteractiveComponent);\n        var viewLabelId = (toolbarConfig.header && toolbarConfig.header.hasTitle)\n            ? this.state.viewLabelId\n            : '';\n        return (createElement(ViewContextType.Provider, { value: viewContext },\n            toolbarConfig.header && (createElement(Toolbar, __assign({ ref: this.headerRef, extraClassName: \"fc-header-toolbar\", model: toolbarConfig.header, titleId: viewLabelId }, toolbarProps))),\n            createElement(ViewContainer, { liquid: viewVGrow, height: viewHeight, aspectRatio: viewAspectRatio, labeledById: viewLabelId },\n                this.renderView(props),\n                this.buildAppendContent()),\n            toolbarConfig.footer && (createElement(Toolbar, __assign({ ref: this.footerRef, extraClassName: \"fc-footer-toolbar\", model: toolbarConfig.footer, titleId: \"\" }, toolbarProps)))));\n    };\n    CalendarContent.prototype.componentDidMount = function () {\n        var props = this.props;\n        this.calendarInteractions = props.pluginHooks.calendarInteractions\n            .map(function (CalendarInteractionClass) { return new CalendarInteractionClass(props); });\n        window.addEventListener('resize', this.handleWindowResize);\n        var propSetHandlers = props.pluginHooks.propSetHandlers;\n        for (var propName in propSetHandlers) {\n            propSetHandlers[propName](props[propName], props);\n        }\n    };\n    CalendarContent.prototype.componentDidUpdate = function (prevProps) {\n        var props = this.props;\n        var propSetHandlers = props.pluginHooks.propSetHandlers;\n        for (var propName in propSetHandlers) {\n            if (props[propName] !== prevProps[propName]) {\n                propSetHandlers[propName](props[propName], props);\n            }\n        }\n    };\n    CalendarContent.prototype.componentWillUnmount = function () {\n        window.removeEventListener('resize', this.handleWindowResize);\n        this.resizeRunner.clear();\n        for (var _i = 0, _a = this.calendarInteractions; _i < _a.length; _i++) {\n            var interaction = _a[_i];\n            interaction.destroy();\n        }\n        this.props.emitter.trigger('_unmount');\n    };\n    CalendarContent.prototype.buildAppendContent = function () {\n        var props = this.props;\n        var children = props.pluginHooks.viewContainerAppends.map(function (buildAppendContent) { return buildAppendContent(props); });\n        return createElement.apply(void 0, __spreadArray([Fragment, {}], children));\n    };\n    CalendarContent.prototype.renderView = function (props) {\n        var pluginHooks = props.pluginHooks;\n        var viewSpec = props.viewSpec;\n        var viewProps = {\n            dateProfile: props.dateProfile,\n            businessHours: props.businessHours,\n            eventStore: props.renderableEventStore,\n            eventUiBases: props.eventUiBases,\n            dateSelection: props.dateSelection,\n            eventSelection: props.eventSelection,\n            eventDrag: props.eventDrag,\n            eventResize: props.eventResize,\n            isHeightAuto: props.isHeightAuto,\n            forPrint: props.forPrint,\n        };\n        var transformers = this.buildViewPropTransformers(pluginHooks.viewPropsTransformers);\n        for (var _i = 0, transformers_1 = transformers; _i < transformers_1.length; _i++) {\n            var transformer = transformers_1[_i];\n            __assign(viewProps, transformer.transform(viewProps, props));\n        }\n        var ViewComponent = viewSpec.component;\n        return (createElement(ViewComponent, __assign({}, viewProps)));\n    };\n    return CalendarContent;\n}(PureComponent));\nfunction buildToolbarProps(viewSpec, dateProfile, dateProfileGenerator, currentDate, now, title) {\n    // don't force any date-profiles to valid date profiles (the `false`) so that we can tell if it's invalid\n    var todayInfo = dateProfileGenerator.build(now, undefined, false); // TODO: need `undefined` or else INFINITE LOOP for some reason\n    var prevInfo = dateProfileGenerator.buildPrev(dateProfile, currentDate, false);\n    var nextInfo = dateProfileGenerator.buildNext(dateProfile, currentDate, false);\n    return {\n        title: title,\n        activeButton: viewSpec.type,\n        navUnit: viewSpec.singleUnit,\n        isTodayEnabled: todayInfo.isValid && !rangeContainsMarker(dateProfile.currentRange, now),\n        isPrevEnabled: prevInfo.isValid,\n        isNextEnabled: nextInfo.isValid,\n    };\n}\n// Plugin\n// -----------------------------------------------------------------------------------------------------------------\nfunction buildViewPropTransformers(theClasses) {\n    return theClasses.map(function (TheClass) { return new TheClass(); });\n}\n\nvar CalendarRoot = /** @class */ (function (_super) {\n    __extends(CalendarRoot, _super);\n    function CalendarRoot() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            forPrint: false,\n        };\n        _this.handleBeforePrint = function () {\n            _this.setState({ forPrint: true });\n        };\n        _this.handleAfterPrint = function () {\n            _this.setState({ forPrint: false });\n        };\n        return _this;\n    }\n    CalendarRoot.prototype.render = function () {\n        var props = this.props;\n        var options = props.options;\n        var forPrint = this.state.forPrint;\n        var isHeightAuto = forPrint || options.height === 'auto' || options.contentHeight === 'auto';\n        var height = (!isHeightAuto && options.height != null) ? options.height : '';\n        var classNames = [\n            'fc',\n            forPrint ? 'fc-media-print' : 'fc-media-screen',\n            \"fc-direction-\" + options.direction,\n            props.theme.getClass('root'),\n        ];\n        if (!getCanVGrowWithinCell()) {\n            classNames.push('fc-liquid-hack');\n        }\n        return props.children(classNames, height, isHeightAuto, forPrint);\n    };\n    CalendarRoot.prototype.componentDidMount = function () {\n        var emitter = this.props.emitter;\n        emitter.on('_beforeprint', this.handleBeforePrint);\n        emitter.on('_afterprint', this.handleAfterPrint);\n    };\n    CalendarRoot.prototype.componentWillUnmount = function () {\n        var emitter = this.props.emitter;\n        emitter.off('_beforeprint', this.handleBeforePrint);\n        emitter.off('_afterprint', this.handleAfterPrint);\n    };\n    return CalendarRoot;\n}(BaseComponent));\n\n// Computes a default column header formatting string if `colFormat` is not explicitly defined\nfunction computeFallbackHeaderFormat(datesRepDistinctDays, dayCnt) {\n    // if more than one week row, or if there are a lot of columns with not much space,\n    // put just the day numbers will be in each cell\n    if (!datesRepDistinctDays || dayCnt > 10) {\n        return createFormatter({ weekday: 'short' }); // \"Sat\"\n    }\n    if (dayCnt > 1) {\n        return createFormatter({ weekday: 'short', month: 'numeric', day: 'numeric', omitCommas: true }); // \"Sat 11/12\"\n    }\n    return createFormatter({ weekday: 'long' }); // \"Saturday\"\n}\n\nvar CLASS_NAME = 'fc-col-header-cell'; // do the cushion too? no\nfunction renderInner$1(hookProps) {\n    return hookProps.text;\n}\n\nvar TableDateCell = /** @class */ (function (_super) {\n    __extends(TableDateCell, _super);\n    function TableDateCell() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TableDateCell.prototype.render = function () {\n        var _a = this.context, dateEnv = _a.dateEnv, options = _a.options, theme = _a.theme, viewApi = _a.viewApi;\n        var props = this.props;\n        var date = props.date, dateProfile = props.dateProfile;\n        var dayMeta = getDateMeta(date, props.todayRange, null, dateProfile);\n        var classNames = [CLASS_NAME].concat(getDayClassNames(dayMeta, theme));\n        var text = dateEnv.format(date, props.dayHeaderFormat);\n        // if colCnt is 1, we are already in a day-view and don't need a navlink\n        var navLinkAttrs = (!dayMeta.isDisabled && props.colCnt > 1)\n            ? buildNavLinkAttrs(this.context, date)\n            : {};\n        var hookProps = __assign(__assign(__assign({ date: dateEnv.toDate(date), view: viewApi }, props.extraHookProps), { text: text }), dayMeta);\n        return (createElement(RenderHook, { hookProps: hookProps, classNames: options.dayHeaderClassNames, content: options.dayHeaderContent, defaultContent: renderInner$1, didMount: options.dayHeaderDidMount, willUnmount: options.dayHeaderWillUnmount }, function (rootElRef, customClassNames, innerElRef, innerContent) { return (createElement(\"th\", __assign({ ref: rootElRef, role: \"columnheader\", className: classNames.concat(customClassNames).join(' '), \"data-date\": !dayMeta.isDisabled ? formatDayString(date) : undefined, colSpan: props.colSpan }, props.extraDataAttrs),\n            createElement(\"div\", { className: \"fc-scrollgrid-sync-inner\" }, !dayMeta.isDisabled && (createElement(\"a\", __assign({ ref: innerElRef, className: [\n                    'fc-col-header-cell-cushion',\n                    props.isSticky ? 'fc-sticky' : '',\n                ].join(' ') }, navLinkAttrs), innerContent))))); }));\n    };\n    return TableDateCell;\n}(BaseComponent));\n\nvar WEEKDAY_FORMAT = createFormatter({ weekday: 'long' });\nvar TableDowCell = /** @class */ (function (_super) {\n    __extends(TableDowCell, _super);\n    function TableDowCell() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TableDowCell.prototype.render = function () {\n        var props = this.props;\n        var _a = this.context, dateEnv = _a.dateEnv, theme = _a.theme, viewApi = _a.viewApi, options = _a.options;\n        var date = addDays(new Date(259200000), props.dow); // start with Sun, 04 Jan 1970 00:00:00 GMT\n        var dateMeta = {\n            dow: props.dow,\n            isDisabled: false,\n            isFuture: false,\n            isPast: false,\n            isToday: false,\n            isOther: false,\n        };\n        var classNames = [CLASS_NAME].concat(getDayClassNames(dateMeta, theme), props.extraClassNames || []);\n        var text = dateEnv.format(date, props.dayHeaderFormat);\n        var hookProps = __assign(__assign(__assign(__assign({ // TODO: make this public?\n            date: date }, dateMeta), { view: viewApi }), props.extraHookProps), { text: text });\n        return (createElement(RenderHook, { hookProps: hookProps, classNames: options.dayHeaderClassNames, content: options.dayHeaderContent, defaultContent: renderInner$1, didMount: options.dayHeaderDidMount, willUnmount: options.dayHeaderWillUnmount }, function (rootElRef, customClassNames, innerElRef, innerContent) { return (createElement(\"th\", __assign({ ref: rootElRef, role: \"columnheader\", className: classNames.concat(customClassNames).join(' '), colSpan: props.colSpan }, props.extraDataAttrs),\n            createElement(\"div\", { className: \"fc-scrollgrid-sync-inner\" },\n                createElement(\"a\", { \"aria-label\": dateEnv.format(date, WEEKDAY_FORMAT), className: [\n                        'fc-col-header-cell-cushion',\n                        props.isSticky ? 'fc-sticky' : '',\n                    ].join(' '), ref: innerElRef }, innerContent)))); }));\n    };\n    return TableDowCell;\n}(BaseComponent));\n\nvar NowTimer = /** @class */ (function (_super) {\n    __extends(NowTimer, _super);\n    function NowTimer(props, context) {\n        var _this = _super.call(this, props, context) || this;\n        _this.initialNowDate = getNow(context.options.now, context.dateEnv);\n        _this.initialNowQueriedMs = new Date().valueOf();\n        _this.state = _this.computeTiming().currentState;\n        return _this;\n    }\n    NowTimer.prototype.render = function () {\n        var _a = this, props = _a.props, state = _a.state;\n        return props.children(state.nowDate, state.todayRange);\n    };\n    NowTimer.prototype.componentDidMount = function () {\n        this.setTimeout();\n    };\n    NowTimer.prototype.componentDidUpdate = function (prevProps) {\n        if (prevProps.unit !== this.props.unit) {\n            this.clearTimeout();\n            this.setTimeout();\n        }\n    };\n    NowTimer.prototype.componentWillUnmount = function () {\n        this.clearTimeout();\n    };\n    NowTimer.prototype.computeTiming = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        var unroundedNow = addMs(this.initialNowDate, new Date().valueOf() - this.initialNowQueriedMs);\n        var currentUnitStart = context.dateEnv.startOf(unroundedNow, props.unit);\n        var nextUnitStart = context.dateEnv.add(currentUnitStart, createDuration(1, props.unit));\n        var waitMs = nextUnitStart.valueOf() - unroundedNow.valueOf();\n        // there is a max setTimeout ms value (https://stackoverflow.com/a/3468650/96342)\n        // ensure no longer than a day\n        waitMs = Math.min(1000 * 60 * 60 * 24, waitMs);\n        return {\n            currentState: { nowDate: currentUnitStart, todayRange: buildDayRange(currentUnitStart) },\n            nextState: { nowDate: nextUnitStart, todayRange: buildDayRange(nextUnitStart) },\n            waitMs: waitMs,\n        };\n    };\n    NowTimer.prototype.setTimeout = function () {\n        var _this = this;\n        var _a = this.computeTiming(), nextState = _a.nextState, waitMs = _a.waitMs;\n        this.timeoutId = setTimeout(function () {\n            _this.setState(nextState, function () {\n                _this.setTimeout();\n            });\n        }, waitMs);\n    };\n    NowTimer.prototype.clearTimeout = function () {\n        if (this.timeoutId) {\n            clearTimeout(this.timeoutId);\n        }\n    };\n    NowTimer.contextType = ViewContextType;\n    return NowTimer;\n}(Component));\nfunction buildDayRange(date) {\n    var start = startOfDay(date);\n    var end = addDays(start, 1);\n    return { start: start, end: end };\n}\n\nvar DayHeader = /** @class */ (function (_super) {\n    __extends(DayHeader, _super);\n    function DayHeader() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.createDayHeaderFormatter = memoize(createDayHeaderFormatter);\n        return _this;\n    }\n    DayHeader.prototype.render = function () {\n        var context = this.context;\n        var _a = this.props, dates = _a.dates, dateProfile = _a.dateProfile, datesRepDistinctDays = _a.datesRepDistinctDays, renderIntro = _a.renderIntro;\n        var dayHeaderFormat = this.createDayHeaderFormatter(context.options.dayHeaderFormat, datesRepDistinctDays, dates.length);\n        return (createElement(NowTimer, { unit: \"day\" }, function (nowDate, todayRange) { return (createElement(\"tr\", { role: \"row\" },\n            renderIntro && renderIntro('day'),\n            dates.map(function (date) { return (datesRepDistinctDays ? (createElement(TableDateCell, { key: date.toISOString(), date: date, dateProfile: dateProfile, todayRange: todayRange, colCnt: dates.length, dayHeaderFormat: dayHeaderFormat })) : (createElement(TableDowCell, { key: date.getUTCDay(), dow: date.getUTCDay(), dayHeaderFormat: dayHeaderFormat }))); }))); }));\n    };\n    return DayHeader;\n}(BaseComponent));\nfunction createDayHeaderFormatter(explicitFormat, datesRepDistinctDays, dateCnt) {\n    return explicitFormat || computeFallbackHeaderFormat(datesRepDistinctDays, dateCnt);\n}\n\nvar DaySeriesModel = /** @class */ (function () {\n    function DaySeriesModel(range, dateProfileGenerator) {\n        var date = range.start;\n        var end = range.end;\n        var indices = [];\n        var dates = [];\n        var dayIndex = -1;\n        while (date < end) { // loop each day from start to end\n            if (dateProfileGenerator.isHiddenDay(date)) {\n                indices.push(dayIndex + 0.5); // mark that it's between indices\n            }\n            else {\n                dayIndex += 1;\n                indices.push(dayIndex);\n                dates.push(date);\n            }\n            date = addDays(date, 1);\n        }\n        this.dates = dates;\n        this.indices = indices;\n        this.cnt = dates.length;\n    }\n    DaySeriesModel.prototype.sliceRange = function (range) {\n        var firstIndex = this.getDateDayIndex(range.start); // inclusive first index\n        var lastIndex = this.getDateDayIndex(addDays(range.end, -1)); // inclusive last index\n        var clippedFirstIndex = Math.max(0, firstIndex);\n        var clippedLastIndex = Math.min(this.cnt - 1, lastIndex);\n        // deal with in-between indices\n        clippedFirstIndex = Math.ceil(clippedFirstIndex); // in-between starts round to next cell\n        clippedLastIndex = Math.floor(clippedLastIndex); // in-between ends round to prev cell\n        if (clippedFirstIndex <= clippedLastIndex) {\n            return {\n                firstIndex: clippedFirstIndex,\n                lastIndex: clippedLastIndex,\n                isStart: firstIndex === clippedFirstIndex,\n                isEnd: lastIndex === clippedLastIndex,\n            };\n        }\n        return null;\n    };\n    // Given a date, returns its chronolocial cell-index from the first cell of the grid.\n    // If the date lies between cells (because of hiddenDays), returns a floating-point value between offsets.\n    // If before the first offset, returns a negative number.\n    // If after the last offset, returns an offset past the last cell offset.\n    // Only works for *start* dates of cells. Will not work for exclusive end dates for cells.\n    DaySeriesModel.prototype.getDateDayIndex = function (date) {\n        var indices = this.indices;\n        var dayOffset = Math.floor(diffDays(this.dates[0], date));\n        if (dayOffset < 0) {\n            return indices[0] - 1;\n        }\n        if (dayOffset >= indices.length) {\n            return indices[indices.length - 1] + 1;\n        }\n        return indices[dayOffset];\n    };\n    return DaySeriesModel;\n}());\n\nvar DayTableModel = /** @class */ (function () {\n    function DayTableModel(daySeries, breakOnWeeks) {\n        var dates = daySeries.dates;\n        var daysPerRow;\n        var firstDay;\n        var rowCnt;\n        if (breakOnWeeks) {\n            // count columns until the day-of-week repeats\n            firstDay = dates[0].getUTCDay();\n            for (daysPerRow = 1; daysPerRow < dates.length; daysPerRow += 1) {\n                if (dates[daysPerRow].getUTCDay() === firstDay) {\n                    break;\n                }\n            }\n            rowCnt = Math.ceil(dates.length / daysPerRow);\n        }\n        else {\n            rowCnt = 1;\n            daysPerRow = dates.length;\n        }\n        this.rowCnt = rowCnt;\n        this.colCnt = daysPerRow;\n        this.daySeries = daySeries;\n        this.cells = this.buildCells();\n        this.headerDates = this.buildHeaderDates();\n    }\n    DayTableModel.prototype.buildCells = function () {\n        var rows = [];\n        for (var row = 0; row < this.rowCnt; row += 1) {\n            var cells = [];\n            for (var col = 0; col < this.colCnt; col += 1) {\n                cells.push(this.buildCell(row, col));\n            }\n            rows.push(cells);\n        }\n        return rows;\n    };\n    DayTableModel.prototype.buildCell = function (row, col) {\n        var date = this.daySeries.dates[row * this.colCnt + col];\n        return {\n            key: date.toISOString(),\n            date: date,\n        };\n    };\n    DayTableModel.prototype.buildHeaderDates = function () {\n        var dates = [];\n        for (var col = 0; col < this.colCnt; col += 1) {\n            dates.push(this.cells[0][col].date);\n        }\n        return dates;\n    };\n    DayTableModel.prototype.sliceRange = function (range) {\n        var colCnt = this.colCnt;\n        var seriesSeg = this.daySeries.sliceRange(range);\n        var segs = [];\n        if (seriesSeg) {\n            var firstIndex = seriesSeg.firstIndex, lastIndex = seriesSeg.lastIndex;\n            var index = firstIndex;\n            while (index <= lastIndex) {\n                var row = Math.floor(index / colCnt);\n                var nextIndex = Math.min((row + 1) * colCnt, lastIndex + 1);\n                segs.push({\n                    row: row,\n                    firstCol: index % colCnt,\n                    lastCol: (nextIndex - 1) % colCnt,\n                    isStart: seriesSeg.isStart && index === firstIndex,\n                    isEnd: seriesSeg.isEnd && (nextIndex - 1) === lastIndex,\n                });\n                index = nextIndex;\n            }\n        }\n        return segs;\n    };\n    return DayTableModel;\n}());\n\nvar Slicer = /** @class */ (function () {\n    function Slicer() {\n        this.sliceBusinessHours = memoize(this._sliceBusinessHours);\n        this.sliceDateSelection = memoize(this._sliceDateSpan);\n        this.sliceEventStore = memoize(this._sliceEventStore);\n        this.sliceEventDrag = memoize(this._sliceInteraction);\n        this.sliceEventResize = memoize(this._sliceInteraction);\n        this.forceDayIfListItem = false; // hack\n    }\n    Slicer.prototype.sliceProps = function (props, dateProfile, nextDayThreshold, context) {\n        var extraArgs = [];\n        for (var _i = 4; _i < arguments.length; _i++) {\n            extraArgs[_i - 4] = arguments[_i];\n        }\n        var eventUiBases = props.eventUiBases;\n        var eventSegs = this.sliceEventStore.apply(this, __spreadArray([props.eventStore, eventUiBases, dateProfile, nextDayThreshold], extraArgs));\n        return {\n            dateSelectionSegs: this.sliceDateSelection.apply(this, __spreadArray([props.dateSelection, eventUiBases, context], extraArgs)),\n            businessHourSegs: this.sliceBusinessHours.apply(this, __spreadArray([props.businessHours, dateProfile, nextDayThreshold, context], extraArgs)),\n            fgEventSegs: eventSegs.fg,\n            bgEventSegs: eventSegs.bg,\n            eventDrag: this.sliceEventDrag.apply(this, __spreadArray([props.eventDrag, eventUiBases, dateProfile, nextDayThreshold], extraArgs)),\n            eventResize: this.sliceEventResize.apply(this, __spreadArray([props.eventResize, eventUiBases, dateProfile, nextDayThreshold], extraArgs)),\n            eventSelection: props.eventSelection,\n        }; // TODO: give interactionSegs?\n    };\n    Slicer.prototype.sliceNowDate = function (// does not memoize\n    date, context) {\n        var extraArgs = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            extraArgs[_i - 2] = arguments[_i];\n        }\n        return this._sliceDateSpan.apply(this, __spreadArray([{ range: { start: date, end: addMs(date, 1) }, allDay: false },\n            {},\n            context], extraArgs));\n    };\n    Slicer.prototype._sliceBusinessHours = function (businessHours, dateProfile, nextDayThreshold, context) {\n        var extraArgs = [];\n        for (var _i = 4; _i < arguments.length; _i++) {\n            extraArgs[_i - 4] = arguments[_i];\n        }\n        if (!businessHours) {\n            return [];\n        }\n        return this._sliceEventStore.apply(this, __spreadArray([expandRecurring(businessHours, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), context),\n            {},\n            dateProfile,\n            nextDayThreshold], extraArgs)).bg;\n    };\n    Slicer.prototype._sliceEventStore = function (eventStore, eventUiBases, dateProfile, nextDayThreshold) {\n        var extraArgs = [];\n        for (var _i = 4; _i < arguments.length; _i++) {\n            extraArgs[_i - 4] = arguments[_i];\n        }\n        if (eventStore) {\n            var rangeRes = sliceEventStore(eventStore, eventUiBases, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), nextDayThreshold);\n            return {\n                bg: this.sliceEventRanges(rangeRes.bg, extraArgs),\n                fg: this.sliceEventRanges(rangeRes.fg, extraArgs),\n            };\n        }\n        return { bg: [], fg: [] };\n    };\n    Slicer.prototype._sliceInteraction = function (interaction, eventUiBases, dateProfile, nextDayThreshold) {\n        var extraArgs = [];\n        for (var _i = 4; _i < arguments.length; _i++) {\n            extraArgs[_i - 4] = arguments[_i];\n        }\n        if (!interaction) {\n            return null;\n        }\n        var rangeRes = sliceEventStore(interaction.mutatedEvents, eventUiBases, computeActiveRange(dateProfile, Boolean(nextDayThreshold)), nextDayThreshold);\n        return {\n            segs: this.sliceEventRanges(rangeRes.fg, extraArgs),\n            affectedInstances: interaction.affectedEvents.instances,\n            isEvent: interaction.isEvent,\n        };\n    };\n    Slicer.prototype._sliceDateSpan = function (dateSpan, eventUiBases, context) {\n        var extraArgs = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            extraArgs[_i - 3] = arguments[_i];\n        }\n        if (!dateSpan) {\n            return [];\n        }\n        var eventRange = fabricateEventRange(dateSpan, eventUiBases, context);\n        var segs = this.sliceRange.apply(this, __spreadArray([dateSpan.range], extraArgs));\n        for (var _a = 0, segs_1 = segs; _a < segs_1.length; _a++) {\n            var seg = segs_1[_a];\n            seg.eventRange = eventRange;\n        }\n        return segs;\n    };\n    /*\n    \"complete\" seg means it has component and eventRange\n    */\n    Slicer.prototype.sliceEventRanges = function (eventRanges, extraArgs) {\n        var segs = [];\n        for (var _i = 0, eventRanges_1 = eventRanges; _i < eventRanges_1.length; _i++) {\n            var eventRange = eventRanges_1[_i];\n            segs.push.apply(segs, this.sliceEventRange(eventRange, extraArgs));\n        }\n        return segs;\n    };\n    /*\n    \"complete\" seg means it has component and eventRange\n    */\n    Slicer.prototype.sliceEventRange = function (eventRange, extraArgs) {\n        var dateRange = eventRange.range;\n        // hack to make multi-day events that are being force-displayed as list-items to take up only one day\n        if (this.forceDayIfListItem && eventRange.ui.display === 'list-item') {\n            dateRange = {\n                start: dateRange.start,\n                end: addDays(dateRange.start, 1),\n            };\n        }\n        var segs = this.sliceRange.apply(this, __spreadArray([dateRange], extraArgs));\n        for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n            var seg = segs_2[_i];\n            seg.eventRange = eventRange;\n            seg.isStart = eventRange.isStart && seg.isStart;\n            seg.isEnd = eventRange.isEnd && seg.isEnd;\n        }\n        return segs;\n    };\n    return Slicer;\n}());\n/*\nfor incorporating slotMinTime/slotMaxTime if appropriate\nTODO: should be part of DateProfile!\nTimelineDateProfile already does this btw\n*/\nfunction computeActiveRange(dateProfile, isComponentAllDay) {\n    var range = dateProfile.activeRange;\n    if (isComponentAllDay) {\n        return range;\n    }\n    return {\n        start: addMs(range.start, dateProfile.slotMinTime.milliseconds),\n        end: addMs(range.end, dateProfile.slotMaxTime.milliseconds - 864e5), // 864e5 = ms in a day\n    };\n}\n\n// high-level segmenting-aware tester functions\n// ------------------------------------------------------------------------------------------------------------------------\nfunction isInteractionValid(interaction, dateProfile, context) {\n    var instances = interaction.mutatedEvents.instances;\n    for (var instanceId in instances) {\n        if (!rangeContainsRange(dateProfile.validRange, instances[instanceId].range)) {\n            return false;\n        }\n    }\n    return isNewPropsValid({ eventDrag: interaction }, context); // HACK: the eventDrag props is used for ALL interactions\n}\nfunction isDateSelectionValid(dateSelection, dateProfile, context) {\n    if (!rangeContainsRange(dateProfile.validRange, dateSelection.range)) {\n        return false;\n    }\n    return isNewPropsValid({ dateSelection: dateSelection }, context);\n}\nfunction isNewPropsValid(newProps, context) {\n    var calendarState = context.getCurrentData();\n    var props = __assign({ businessHours: calendarState.businessHours, dateSelection: '', eventStore: calendarState.eventStore, eventUiBases: calendarState.eventUiBases, eventSelection: '', eventDrag: null, eventResize: null }, newProps);\n    return (context.pluginHooks.isPropsValid || isPropsValid)(props, context);\n}\nfunction isPropsValid(state, context, dateSpanMeta, filterConfig) {\n    if (dateSpanMeta === void 0) { dateSpanMeta = {}; }\n    if (state.eventDrag && !isInteractionPropsValid(state, context, dateSpanMeta, filterConfig)) {\n        return false;\n    }\n    if (state.dateSelection && !isDateSelectionPropsValid(state, context, dateSpanMeta, filterConfig)) {\n        return false;\n    }\n    return true;\n}\n// Moving Event Validation\n// ------------------------------------------------------------------------------------------------------------------------\nfunction isInteractionPropsValid(state, context, dateSpanMeta, filterConfig) {\n    var currentState = context.getCurrentData();\n    var interaction = state.eventDrag; // HACK: the eventDrag props is used for ALL interactions\n    var subjectEventStore = interaction.mutatedEvents;\n    var subjectDefs = subjectEventStore.defs;\n    var subjectInstances = subjectEventStore.instances;\n    var subjectConfigs = compileEventUis(subjectDefs, interaction.isEvent ?\n        state.eventUiBases :\n        { '': currentState.selectionConfig });\n    if (filterConfig) {\n        subjectConfigs = mapHash(subjectConfigs, filterConfig);\n    }\n    // exclude the subject events. TODO: exclude defs too?\n    var otherEventStore = excludeInstances(state.eventStore, interaction.affectedEvents.instances);\n    var otherDefs = otherEventStore.defs;\n    var otherInstances = otherEventStore.instances;\n    var otherConfigs = compileEventUis(otherDefs, state.eventUiBases);\n    for (var subjectInstanceId in subjectInstances) {\n        var subjectInstance = subjectInstances[subjectInstanceId];\n        var subjectRange = subjectInstance.range;\n        var subjectConfig = subjectConfigs[subjectInstance.defId];\n        var subjectDef = subjectDefs[subjectInstance.defId];\n        // constraint\n        if (!allConstraintsPass(subjectConfig.constraints, subjectRange, otherEventStore, state.businessHours, context)) {\n            return false;\n        }\n        // overlap\n        var eventOverlap = context.options.eventOverlap;\n        var eventOverlapFunc = typeof eventOverlap === 'function' ? eventOverlap : null;\n        for (var otherInstanceId in otherInstances) {\n            var otherInstance = otherInstances[otherInstanceId];\n            // intersect! evaluate\n            if (rangesIntersect(subjectRange, otherInstance.range)) {\n                var otherOverlap = otherConfigs[otherInstance.defId].overlap;\n                // consider the other event's overlap. only do this if the subject event is a \"real\" event\n                if (otherOverlap === false && interaction.isEvent) {\n                    return false;\n                }\n                if (subjectConfig.overlap === false) {\n                    return false;\n                }\n                if (eventOverlapFunc && !eventOverlapFunc(new EventApi(context, otherDefs[otherInstance.defId], otherInstance), // still event\n                new EventApi(context, subjectDef, subjectInstance))) {\n                    return false;\n                }\n            }\n        }\n        // allow (a function)\n        var calendarEventStore = currentState.eventStore; // need global-to-calendar, not local to component (splittable)state\n        for (var _i = 0, _a = subjectConfig.allows; _i < _a.length; _i++) {\n            var subjectAllow = _a[_i];\n            var subjectDateSpan = __assign(__assign({}, dateSpanMeta), { range: subjectInstance.range, allDay: subjectDef.allDay });\n            var origDef = calendarEventStore.defs[subjectDef.defId];\n            var origInstance = calendarEventStore.instances[subjectInstanceId];\n            var eventApi = void 0;\n            if (origDef) { // was previously in the calendar\n                eventApi = new EventApi(context, origDef, origInstance);\n            }\n            else { // was an external event\n                eventApi = new EventApi(context, subjectDef); // no instance, because had no dates\n            }\n            if (!subjectAllow(buildDateSpanApiWithContext(subjectDateSpan, context), eventApi)) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n// Date Selection Validation\n// ------------------------------------------------------------------------------------------------------------------------\nfunction isDateSelectionPropsValid(state, context, dateSpanMeta, filterConfig) {\n    var relevantEventStore = state.eventStore;\n    var relevantDefs = relevantEventStore.defs;\n    var relevantInstances = relevantEventStore.instances;\n    var selection = state.dateSelection;\n    var selectionRange = selection.range;\n    var selectionConfig = context.getCurrentData().selectionConfig;\n    if (filterConfig) {\n        selectionConfig = filterConfig(selectionConfig);\n    }\n    // constraint\n    if (!allConstraintsPass(selectionConfig.constraints, selectionRange, relevantEventStore, state.businessHours, context)) {\n        return false;\n    }\n    // overlap\n    var selectOverlap = context.options.selectOverlap;\n    var selectOverlapFunc = typeof selectOverlap === 'function' ? selectOverlap : null;\n    for (var relevantInstanceId in relevantInstances) {\n        var relevantInstance = relevantInstances[relevantInstanceId];\n        // intersect! evaluate\n        if (rangesIntersect(selectionRange, relevantInstance.range)) {\n            if (selectionConfig.overlap === false) {\n                return false;\n            }\n            if (selectOverlapFunc && !selectOverlapFunc(new EventApi(context, relevantDefs[relevantInstance.defId], relevantInstance), null)) {\n                return false;\n            }\n        }\n    }\n    // allow (a function)\n    for (var _i = 0, _a = selectionConfig.allows; _i < _a.length; _i++) {\n        var selectionAllow = _a[_i];\n        var fullDateSpan = __assign(__assign({}, dateSpanMeta), selection);\n        if (!selectionAllow(buildDateSpanApiWithContext(fullDateSpan, context), null)) {\n            return false;\n        }\n    }\n    return true;\n}\n// Constraint Utils\n// ------------------------------------------------------------------------------------------------------------------------\nfunction allConstraintsPass(constraints, subjectRange, otherEventStore, businessHoursUnexpanded, context) {\n    for (var _i = 0, constraints_1 = constraints; _i < constraints_1.length; _i++) {\n        var constraint = constraints_1[_i];\n        if (!anyRangesContainRange(constraintToRanges(constraint, subjectRange, otherEventStore, businessHoursUnexpanded, context), subjectRange)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction constraintToRanges(constraint, subjectRange, // for expanding a recurring constraint, or expanding business hours\notherEventStore, // for if constraint is an even group ID\nbusinessHoursUnexpanded, // for if constraint is 'businessHours'\ncontext) {\n    if (constraint === 'businessHours') {\n        return eventStoreToRanges(expandRecurring(businessHoursUnexpanded, subjectRange, context));\n    }\n    if (typeof constraint === 'string') { // an group ID\n        return eventStoreToRanges(filterEventStoreDefs(otherEventStore, function (eventDef) { return eventDef.groupId === constraint; }));\n    }\n    if (typeof constraint === 'object' && constraint) { // non-null object\n        return eventStoreToRanges(expandRecurring(constraint, subjectRange, context));\n    }\n    return []; // if it's false\n}\n// TODO: move to event-store file?\nfunction eventStoreToRanges(eventStore) {\n    var instances = eventStore.instances;\n    var ranges = [];\n    for (var instanceId in instances) {\n        ranges.push(instances[instanceId].range);\n    }\n    return ranges;\n}\n// TODO: move to geom file?\nfunction anyRangesContainRange(outerRanges, innerRange) {\n    for (var _i = 0, outerRanges_1 = outerRanges; _i < outerRanges_1.length; _i++) {\n        var outerRange = outerRanges_1[_i];\n        if (rangeContainsRange(outerRange, innerRange)) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar VISIBLE_HIDDEN_RE = /^(visible|hidden)$/;\nvar Scroller = /** @class */ (function (_super) {\n    __extends(Scroller, _super);\n    function Scroller() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleEl = function (el) {\n            _this.el = el;\n            setRef(_this.props.elRef, el);\n        };\n        return _this;\n    }\n    Scroller.prototype.render = function () {\n        var props = this.props;\n        var liquid = props.liquid, liquidIsAbsolute = props.liquidIsAbsolute;\n        var isAbsolute = liquid && liquidIsAbsolute;\n        var className = ['fc-scroller'];\n        if (liquid) {\n            if (liquidIsAbsolute) {\n                className.push('fc-scroller-liquid-absolute');\n            }\n            else {\n                className.push('fc-scroller-liquid');\n            }\n        }\n        return (createElement(\"div\", { ref: this.handleEl, className: className.join(' '), style: {\n                overflowX: props.overflowX,\n                overflowY: props.overflowY,\n                left: (isAbsolute && -(props.overcomeLeft || 0)) || '',\n                right: (isAbsolute && -(props.overcomeRight || 0)) || '',\n                bottom: (isAbsolute && -(props.overcomeBottom || 0)) || '',\n                marginLeft: (!isAbsolute && -(props.overcomeLeft || 0)) || '',\n                marginRight: (!isAbsolute && -(props.overcomeRight || 0)) || '',\n                marginBottom: (!isAbsolute && -(props.overcomeBottom || 0)) || '',\n                maxHeight: props.maxHeight || '',\n            } }, props.children));\n    };\n    Scroller.prototype.needsXScrolling = function () {\n        if (VISIBLE_HIDDEN_RE.test(this.props.overflowX)) {\n            return false;\n        }\n        // testing scrollWidth>clientWidth is unreliable cross-browser when pixel heights aren't integers.\n        // much more reliable to see if children are taller than the scroller, even tho doesn't account for\n        // inner-child margins and absolute positioning\n        var el = this.el;\n        var realClientWidth = this.el.getBoundingClientRect().width - this.getYScrollbarWidth();\n        var children = el.children;\n        for (var i = 0; i < children.length; i += 1) {\n            var childEl = children[i];\n            if (childEl.getBoundingClientRect().width > realClientWidth) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Scroller.prototype.needsYScrolling = function () {\n        if (VISIBLE_HIDDEN_RE.test(this.props.overflowY)) {\n            return false;\n        }\n        // testing scrollHeight>clientHeight is unreliable cross-browser when pixel heights aren't integers.\n        // much more reliable to see if children are taller than the scroller, even tho doesn't account for\n        // inner-child margins and absolute positioning\n        var el = this.el;\n        var realClientHeight = this.el.getBoundingClientRect().height - this.getXScrollbarWidth();\n        var children = el.children;\n        for (var i = 0; i < children.length; i += 1) {\n            var childEl = children[i];\n            if (childEl.getBoundingClientRect().height > realClientHeight) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Scroller.prototype.getXScrollbarWidth = function () {\n        if (VISIBLE_HIDDEN_RE.test(this.props.overflowX)) {\n            return 0;\n        }\n        return this.el.offsetHeight - this.el.clientHeight; // only works because we guarantee no borders. TODO: add to CSS with important?\n    };\n    Scroller.prototype.getYScrollbarWidth = function () {\n        if (VISIBLE_HIDDEN_RE.test(this.props.overflowY)) {\n            return 0;\n        }\n        return this.el.offsetWidth - this.el.clientWidth; // only works because we guarantee no borders. TODO: add to CSS with important?\n    };\n    return Scroller;\n}(BaseComponent));\n\n/*\nTODO: somehow infer OtherArgs from masterCallback?\nTODO: infer RefType from masterCallback if provided\n*/\nvar RefMap = /** @class */ (function () {\n    function RefMap(masterCallback) {\n        var _this = this;\n        this.masterCallback = masterCallback;\n        this.currentMap = {};\n        this.depths = {};\n        this.callbackMap = {};\n        this.handleValue = function (val, key) {\n            var _a = _this, depths = _a.depths, currentMap = _a.currentMap;\n            var removed = false;\n            var added = false;\n            if (val !== null) {\n                // for bug... ACTUALLY: can probably do away with this now that callers don't share numeric indices anymore\n                removed = (key in currentMap);\n                currentMap[key] = val;\n                depths[key] = (depths[key] || 0) + 1;\n                added = true;\n            }\n            else {\n                depths[key] -= 1;\n                if (!depths[key]) {\n                    delete currentMap[key];\n                    delete _this.callbackMap[key];\n                    removed = true;\n                }\n            }\n            if (_this.masterCallback) {\n                if (removed) {\n                    _this.masterCallback(null, String(key));\n                }\n                if (added) {\n                    _this.masterCallback(val, String(key));\n                }\n            }\n        };\n    }\n    RefMap.prototype.createRef = function (key) {\n        var _this = this;\n        var refCallback = this.callbackMap[key];\n        if (!refCallback) {\n            refCallback = this.callbackMap[key] = function (val) {\n                _this.handleValue(val, String(key));\n            };\n        }\n        return refCallback;\n    };\n    // TODO: check callers that don't care about order. should use getAll instead\n    // NOTE: this method has become less valuable now that we are encouraged to map order by some other index\n    // TODO: provide ONE array-export function, buildArray, which fails on non-numeric indexes. caller can manipulate and \"collect\"\n    RefMap.prototype.collect = function (startIndex, endIndex, step) {\n        return collectFromHash(this.currentMap, startIndex, endIndex, step);\n    };\n    RefMap.prototype.getAll = function () {\n        return hashValuesToArray(this.currentMap);\n    };\n    return RefMap;\n}());\n\nfunction computeShrinkWidth(chunkEls) {\n    var shrinkCells = findElements(chunkEls, '.fc-scrollgrid-shrink');\n    var largestWidth = 0;\n    for (var _i = 0, shrinkCells_1 = shrinkCells; _i < shrinkCells_1.length; _i++) {\n        var shrinkCell = shrinkCells_1[_i];\n        largestWidth = Math.max(largestWidth, computeSmallestCellWidth(shrinkCell));\n    }\n    return Math.ceil(largestWidth); // <table> elements work best with integers. round up to ensure contents fits\n}\nfunction getSectionHasLiquidHeight(props, sectionConfig) {\n    return props.liquid && sectionConfig.liquid; // does the section do liquid-height? (need to have whole scrollgrid liquid-height as well)\n}\nfunction getAllowYScrolling(props, sectionConfig) {\n    return sectionConfig.maxHeight != null || // if its possible for the height to max out, we might need scrollbars\n        getSectionHasLiquidHeight(props, sectionConfig); // if the section is liquid height, it might condense enough to require scrollbars\n}\n// TODO: ONLY use `arg`. force out internal function to use same API\nfunction renderChunkContent(sectionConfig, chunkConfig, arg, isHeader) {\n    var expandRows = arg.expandRows;\n    var content = typeof chunkConfig.content === 'function' ?\n        chunkConfig.content(arg) :\n        createElement('table', {\n            role: 'presentation',\n            className: [\n                chunkConfig.tableClassName,\n                sectionConfig.syncRowHeights ? 'fc-scrollgrid-sync-table' : '',\n            ].join(' '),\n            style: {\n                minWidth: arg.tableMinWidth,\n                width: arg.clientWidth,\n                height: expandRows ? arg.clientHeight : '', // css `height` on a <table> serves as a min-height\n            },\n        }, arg.tableColGroupNode, createElement(isHeader ? 'thead' : 'tbody', {\n            role: 'presentation',\n        }, typeof chunkConfig.rowContent === 'function'\n            ? chunkConfig.rowContent(arg)\n            : chunkConfig.rowContent));\n    return content;\n}\nfunction isColPropsEqual(cols0, cols1) {\n    return isArraysEqual(cols0, cols1, isPropsEqual);\n}\nfunction renderMicroColGroup(cols, shrinkWidth) {\n    var colNodes = [];\n    /*\n    for ColProps with spans, it would have been great to make a single <col span=\"\">\n    HOWEVER, Chrome was getting messing up distributing the width to <td>/<th> elements with colspans.\n    SOLUTION: making individual <col> elements makes Chrome behave.\n    */\n    for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n        var colProps = cols_1[_i];\n        var span = colProps.span || 1;\n        for (var i = 0; i < span; i += 1) {\n            colNodes.push(createElement(\"col\", { style: {\n                    width: colProps.width === 'shrink' ? sanitizeShrinkWidth(shrinkWidth) : (colProps.width || ''),\n                    minWidth: colProps.minWidth || '',\n                } }));\n        }\n    }\n    return createElement.apply(void 0, __spreadArray(['colgroup', {}], colNodes));\n}\nfunction sanitizeShrinkWidth(shrinkWidth) {\n    /* why 4? if we do 0, it will kill any border, which are needed for computeSmallestCellWidth\n    4 accounts for 2 2-pixel borders. TODO: better solution? */\n    return shrinkWidth == null ? 4 : shrinkWidth;\n}\nfunction hasShrinkWidth(cols) {\n    for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n        var col = cols_2[_i];\n        if (col.width === 'shrink') {\n            return true;\n        }\n    }\n    return false;\n}\nfunction getScrollGridClassNames(liquid, context) {\n    var classNames = [\n        'fc-scrollgrid',\n        context.theme.getClass('table'),\n    ];\n    if (liquid) {\n        classNames.push('fc-scrollgrid-liquid');\n    }\n    return classNames;\n}\nfunction getSectionClassNames(sectionConfig, wholeTableVGrow) {\n    var classNames = [\n        'fc-scrollgrid-section',\n        \"fc-scrollgrid-section-\" + sectionConfig.type,\n        sectionConfig.className, // used?\n    ];\n    if (wholeTableVGrow && sectionConfig.liquid && sectionConfig.maxHeight == null) {\n        classNames.push('fc-scrollgrid-section-liquid');\n    }\n    if (sectionConfig.isSticky) {\n        classNames.push('fc-scrollgrid-section-sticky');\n    }\n    return classNames;\n}\nfunction renderScrollShim(arg) {\n    return (createElement(\"div\", { className: \"fc-scrollgrid-sticky-shim\", style: {\n            width: arg.clientWidth,\n            minWidth: arg.tableMinWidth,\n        } }));\n}\nfunction getStickyHeaderDates(options) {\n    var stickyHeaderDates = options.stickyHeaderDates;\n    if (stickyHeaderDates == null || stickyHeaderDates === 'auto') {\n        stickyHeaderDates = options.height === 'auto' || options.viewHeight === 'auto';\n    }\n    return stickyHeaderDates;\n}\nfunction getStickyFooterScrollbar(options) {\n    var stickyFooterScrollbar = options.stickyFooterScrollbar;\n    if (stickyFooterScrollbar == null || stickyFooterScrollbar === 'auto') {\n        stickyFooterScrollbar = options.height === 'auto' || options.viewHeight === 'auto';\n    }\n    return stickyFooterScrollbar;\n}\n\nvar SimpleScrollGrid = /** @class */ (function (_super) {\n    __extends(SimpleScrollGrid, _super);\n    function SimpleScrollGrid() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.processCols = memoize(function (a) { return a; }, isColPropsEqual); // so we get same `cols` props every time\n        // yucky to memoize VNodes, but much more efficient for consumers\n        _this.renderMicroColGroup = memoize(renderMicroColGroup);\n        _this.scrollerRefs = new RefMap();\n        _this.scrollerElRefs = new RefMap(_this._handleScrollerEl.bind(_this));\n        _this.state = {\n            shrinkWidth: null,\n            forceYScrollbars: false,\n            scrollerClientWidths: {},\n            scrollerClientHeights: {},\n        };\n        // TODO: can do a really simple print-view. dont need to join rows\n        _this.handleSizing = function () {\n            _this.setState(__assign({ shrinkWidth: _this.computeShrinkWidth() }, _this.computeScrollerDims()));\n        };\n        return _this;\n    }\n    SimpleScrollGrid.prototype.render = function () {\n        var _a = this, props = _a.props, state = _a.state, context = _a.context;\n        var sectionConfigs = props.sections || [];\n        var cols = this.processCols(props.cols);\n        var microColGroupNode = this.renderMicroColGroup(cols, state.shrinkWidth);\n        var classNames = getScrollGridClassNames(props.liquid, context);\n        if (props.collapsibleWidth) {\n            classNames.push('fc-scrollgrid-collapsible');\n        }\n        // TODO: make DRY\n        var configCnt = sectionConfigs.length;\n        var configI = 0;\n        var currentConfig;\n        var headSectionNodes = [];\n        var bodySectionNodes = [];\n        var footSectionNodes = [];\n        while (configI < configCnt && (currentConfig = sectionConfigs[configI]).type === 'header') {\n            headSectionNodes.push(this.renderSection(currentConfig, microColGroupNode, true));\n            configI += 1;\n        }\n        while (configI < configCnt && (currentConfig = sectionConfigs[configI]).type === 'body') {\n            bodySectionNodes.push(this.renderSection(currentConfig, microColGroupNode, false));\n            configI += 1;\n        }\n        while (configI < configCnt && (currentConfig = sectionConfigs[configI]).type === 'footer') {\n            footSectionNodes.push(this.renderSection(currentConfig, microColGroupNode, true));\n            configI += 1;\n        }\n        // firefox bug: when setting height on table and there is a thead or tfoot,\n        // the necessary height:100% on the liquid-height body section forces the *whole* table to be taller. (bug #5524)\n        // use getCanVGrowWithinCell as a way to detect table-stupid firefox.\n        // if so, use a simpler dom structure, jam everything into a lone tbody.\n        var isBuggy = !getCanVGrowWithinCell();\n        var roleAttrs = { role: 'rowgroup' };\n        return createElement('table', {\n            role: 'grid',\n            className: classNames.join(' '),\n            style: { height: props.height },\n        }, Boolean(!isBuggy && headSectionNodes.length) && createElement.apply(void 0, __spreadArray(['thead', roleAttrs], headSectionNodes)), Boolean(!isBuggy && bodySectionNodes.length) && createElement.apply(void 0, __spreadArray(['tbody', roleAttrs], bodySectionNodes)), Boolean(!isBuggy && footSectionNodes.length) && createElement.apply(void 0, __spreadArray(['tfoot', roleAttrs], footSectionNodes)), isBuggy && createElement.apply(void 0, __spreadArray(__spreadArray(__spreadArray(['tbody', roleAttrs], headSectionNodes), bodySectionNodes), footSectionNodes)));\n    };\n    SimpleScrollGrid.prototype.renderSection = function (sectionConfig, microColGroupNode, isHeader) {\n        if ('outerContent' in sectionConfig) {\n            return (createElement(Fragment, { key: sectionConfig.key }, sectionConfig.outerContent));\n        }\n        return (createElement(\"tr\", { key: sectionConfig.key, role: \"presentation\", className: getSectionClassNames(sectionConfig, this.props.liquid).join(' ') }, this.renderChunkTd(sectionConfig, microColGroupNode, sectionConfig.chunk, isHeader)));\n    };\n    SimpleScrollGrid.prototype.renderChunkTd = function (sectionConfig, microColGroupNode, chunkConfig, isHeader) {\n        if ('outerContent' in chunkConfig) {\n            return chunkConfig.outerContent;\n        }\n        var props = this.props;\n        var _a = this.state, forceYScrollbars = _a.forceYScrollbars, scrollerClientWidths = _a.scrollerClientWidths, scrollerClientHeights = _a.scrollerClientHeights;\n        var needsYScrolling = getAllowYScrolling(props, sectionConfig); // TODO: do lazily. do in section config?\n        var isLiquid = getSectionHasLiquidHeight(props, sectionConfig);\n        // for `!props.liquid` - is WHOLE scrollgrid natural height?\n        // TODO: do same thing in advanced scrollgrid? prolly not b/c always has horizontal scrollbars\n        var overflowY = !props.liquid ? 'visible' :\n            forceYScrollbars ? 'scroll' :\n                !needsYScrolling ? 'hidden' :\n                    'auto';\n        var sectionKey = sectionConfig.key;\n        var content = renderChunkContent(sectionConfig, chunkConfig, {\n            tableColGroupNode: microColGroupNode,\n            tableMinWidth: '',\n            clientWidth: (!props.collapsibleWidth && scrollerClientWidths[sectionKey] !== undefined) ? scrollerClientWidths[sectionKey] : null,\n            clientHeight: scrollerClientHeights[sectionKey] !== undefined ? scrollerClientHeights[sectionKey] : null,\n            expandRows: sectionConfig.expandRows,\n            syncRowHeights: false,\n            rowSyncHeights: [],\n            reportRowHeightChange: function () { },\n        }, isHeader);\n        return createElement(isHeader ? 'th' : 'td', {\n            ref: chunkConfig.elRef,\n            role: 'presentation',\n        }, createElement(\"div\", { className: \"fc-scroller-harness\" + (isLiquid ? ' fc-scroller-harness-liquid' : '') },\n            createElement(Scroller, { ref: this.scrollerRefs.createRef(sectionKey), elRef: this.scrollerElRefs.createRef(sectionKey), overflowY: overflowY, overflowX: !props.liquid ? 'visible' : 'hidden' /* natural height? */, maxHeight: sectionConfig.maxHeight, liquid: isLiquid, liquidIsAbsolute // because its within a harness\n                : true }, content)));\n    };\n    SimpleScrollGrid.prototype._handleScrollerEl = function (scrollerEl, key) {\n        var section = getSectionByKey(this.props.sections, key);\n        if (section) {\n            setRef(section.chunk.scrollerElRef, scrollerEl);\n        }\n    };\n    SimpleScrollGrid.prototype.componentDidMount = function () {\n        this.handleSizing();\n        this.context.addResizeHandler(this.handleSizing);\n    };\n    SimpleScrollGrid.prototype.componentDidUpdate = function () {\n        // TODO: need better solution when state contains non-sizing things\n        this.handleSizing();\n    };\n    SimpleScrollGrid.prototype.componentWillUnmount = function () {\n        this.context.removeResizeHandler(this.handleSizing);\n    };\n    SimpleScrollGrid.prototype.computeShrinkWidth = function () {\n        return hasShrinkWidth(this.props.cols)\n            ? computeShrinkWidth(this.scrollerElRefs.getAll())\n            : 0;\n    };\n    SimpleScrollGrid.prototype.computeScrollerDims = function () {\n        var scrollbarWidth = getScrollbarWidths();\n        var _a = this, scrollerRefs = _a.scrollerRefs, scrollerElRefs = _a.scrollerElRefs;\n        var forceYScrollbars = false;\n        var scrollerClientWidths = {};\n        var scrollerClientHeights = {};\n        for (var sectionKey in scrollerRefs.currentMap) {\n            var scroller = scrollerRefs.currentMap[sectionKey];\n            if (scroller && scroller.needsYScrolling()) {\n                forceYScrollbars = true;\n                break;\n            }\n        }\n        for (var _i = 0, _b = this.props.sections; _i < _b.length; _i++) {\n            var section = _b[_i];\n            var sectionKey = section.key;\n            var scrollerEl = scrollerElRefs.currentMap[sectionKey];\n            if (scrollerEl) {\n                var harnessEl = scrollerEl.parentNode; // TODO: weird way to get this. need harness b/c doesn't include table borders\n                scrollerClientWidths[sectionKey] = Math.floor(harnessEl.getBoundingClientRect().width - (forceYScrollbars\n                    ? scrollbarWidth.y // use global because scroller might not have scrollbars yet but will need them in future\n                    : 0));\n                scrollerClientHeights[sectionKey] = Math.floor(harnessEl.getBoundingClientRect().height);\n            }\n        }\n        return { forceYScrollbars: forceYScrollbars, scrollerClientWidths: scrollerClientWidths, scrollerClientHeights: scrollerClientHeights };\n    };\n    return SimpleScrollGrid;\n}(BaseComponent));\nSimpleScrollGrid.addStateEquality({\n    scrollerClientWidths: isPropsEqual,\n    scrollerClientHeights: isPropsEqual,\n});\nfunction getSectionByKey(sections, key) {\n    for (var _i = 0, sections_1 = sections; _i < sections_1.length; _i++) {\n        var section = sections_1[_i];\n        if (section.key === key) {\n            return section;\n        }\n    }\n    return null;\n}\n\nvar EventRoot = /** @class */ (function (_super) {\n    __extends(EventRoot, _super);\n    function EventRoot() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.elRef = createRef();\n        return _this;\n    }\n    EventRoot.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        var options = context.options;\n        var seg = props.seg;\n        var eventRange = seg.eventRange;\n        var ui = eventRange.ui;\n        var hookProps = {\n            event: new EventApi(context, eventRange.def, eventRange.instance),\n            view: context.viewApi,\n            timeText: props.timeText,\n            textColor: ui.textColor,\n            backgroundColor: ui.backgroundColor,\n            borderColor: ui.borderColor,\n            isDraggable: !props.disableDragging && computeSegDraggable(seg, context),\n            isStartResizable: !props.disableResizing && computeSegStartResizable(seg, context),\n            isEndResizable: !props.disableResizing && computeSegEndResizable(seg),\n            isMirror: Boolean(props.isDragging || props.isResizing || props.isDateSelecting),\n            isStart: Boolean(seg.isStart),\n            isEnd: Boolean(seg.isEnd),\n            isPast: Boolean(props.isPast),\n            isFuture: Boolean(props.isFuture),\n            isToday: Boolean(props.isToday),\n            isSelected: Boolean(props.isSelected),\n            isDragging: Boolean(props.isDragging),\n            isResizing: Boolean(props.isResizing),\n        };\n        var standardClassNames = getEventClassNames(hookProps).concat(ui.classNames);\n        return (createElement(RenderHook, { hookProps: hookProps, classNames: options.eventClassNames, content: options.eventContent, defaultContent: props.defaultContent, didMount: options.eventDidMount, willUnmount: options.eventWillUnmount, elRef: this.elRef }, function (rootElRef, customClassNames, innerElRef, innerContent) { return props.children(rootElRef, standardClassNames.concat(customClassNames), innerElRef, innerContent, hookProps); }));\n    };\n    EventRoot.prototype.componentDidMount = function () {\n        setElSeg(this.elRef.current, this.props.seg);\n    };\n    /*\n    need to re-assign seg to the element if seg changes, even if the element is the same\n    */\n    EventRoot.prototype.componentDidUpdate = function (prevProps) {\n        var seg = this.props.seg;\n        if (seg !== prevProps.seg) {\n            setElSeg(this.elRef.current, seg);\n        }\n    };\n    return EventRoot;\n}(BaseComponent));\n\n// should not be a purecomponent\nvar StandardEvent = /** @class */ (function (_super) {\n    __extends(StandardEvent, _super);\n    function StandardEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    StandardEvent.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        var seg = props.seg;\n        var timeFormat = context.options.eventTimeFormat || props.defaultTimeFormat;\n        var timeText = buildSegTimeText(seg, timeFormat, context, props.defaultDisplayEventTime, props.defaultDisplayEventEnd);\n        return (createElement(EventRoot, { seg: seg, timeText: timeText, disableDragging: props.disableDragging, disableResizing: props.disableResizing, defaultContent: props.defaultContent || renderInnerContent$1, isDragging: props.isDragging, isResizing: props.isResizing, isDateSelecting: props.isDateSelecting, isSelected: props.isSelected, isPast: props.isPast, isFuture: props.isFuture, isToday: props.isToday }, function (rootElRef, classNames, innerElRef, innerContent, hookProps) { return (createElement(\"a\", __assign({ className: props.extraClassNames.concat(classNames).join(' '), style: {\n                borderColor: hookProps.borderColor,\n                backgroundColor: hookProps.backgroundColor,\n            }, ref: rootElRef }, getSegAnchorAttrs(seg, context)),\n            createElement(\"div\", { className: \"fc-event-main\", ref: innerElRef, style: { color: hookProps.textColor } }, innerContent),\n            hookProps.isStartResizable &&\n                createElement(\"div\", { className: \"fc-event-resizer fc-event-resizer-start\" }),\n            hookProps.isEndResizable &&\n                createElement(\"div\", { className: \"fc-event-resizer fc-event-resizer-end\" }))); }));\n    };\n    return StandardEvent;\n}(BaseComponent));\nfunction renderInnerContent$1(innerProps) {\n    return (createElement(\"div\", { className: \"fc-event-main-frame\" },\n        innerProps.timeText && (createElement(\"div\", { className: \"fc-event-time\" }, innerProps.timeText)),\n        createElement(\"div\", { className: \"fc-event-title-container\" },\n            createElement(\"div\", { className: \"fc-event-title fc-sticky\" }, innerProps.event.title || createElement(Fragment, null, \"\\u00A0\")))));\n}\n\nvar NowIndicatorRoot = function (props) { return (createElement(ViewContextType.Consumer, null, function (context) {\n    var options = context.options;\n    var hookProps = {\n        isAxis: props.isAxis,\n        date: context.dateEnv.toDate(props.date),\n        view: context.viewApi,\n    };\n    return (createElement(RenderHook, { hookProps: hookProps, classNames: options.nowIndicatorClassNames, content: options.nowIndicatorContent, didMount: options.nowIndicatorDidMount, willUnmount: options.nowIndicatorWillUnmount }, props.children));\n})); };\n\nvar DAY_NUM_FORMAT = createFormatter({ day: 'numeric' });\nvar DayCellContent = /** @class */ (function (_super) {\n    __extends(DayCellContent, _super);\n    function DayCellContent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DayCellContent.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        var options = context.options;\n        var hookProps = refineDayCellHookProps({\n            date: props.date,\n            dateProfile: props.dateProfile,\n            todayRange: props.todayRange,\n            showDayNumber: props.showDayNumber,\n            extraProps: props.extraHookProps,\n            viewApi: context.viewApi,\n            dateEnv: context.dateEnv,\n        });\n        return (createElement(ContentHook, { hookProps: hookProps, content: options.dayCellContent, defaultContent: props.defaultContent }, props.children));\n    };\n    return DayCellContent;\n}(BaseComponent));\nfunction refineDayCellHookProps(raw) {\n    var date = raw.date, dateEnv = raw.dateEnv;\n    var dayMeta = getDateMeta(date, raw.todayRange, null, raw.dateProfile);\n    return __assign(__assign(__assign({ date: dateEnv.toDate(date), view: raw.viewApi }, dayMeta), { dayNumberText: raw.showDayNumber ? dateEnv.format(date, DAY_NUM_FORMAT) : '' }), raw.extraProps);\n}\n\nvar DayCellRoot = /** @class */ (function (_super) {\n    __extends(DayCellRoot, _super);\n    function DayCellRoot() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.refineHookProps = memoizeObjArg(refineDayCellHookProps);\n        _this.normalizeClassNames = buildClassNameNormalizer();\n        return _this;\n    }\n    DayCellRoot.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        var options = context.options;\n        var hookProps = this.refineHookProps({\n            date: props.date,\n            dateProfile: props.dateProfile,\n            todayRange: props.todayRange,\n            showDayNumber: props.showDayNumber,\n            extraProps: props.extraHookProps,\n            viewApi: context.viewApi,\n            dateEnv: context.dateEnv,\n        });\n        var classNames = getDayClassNames(hookProps, context.theme).concat(hookProps.isDisabled\n            ? [] // don't use custom classNames if disabled\n            : this.normalizeClassNames(options.dayCellClassNames, hookProps));\n        var dataAttrs = hookProps.isDisabled ? {} : {\n            'data-date': formatDayString(props.date),\n        };\n        return (createElement(MountHook, { hookProps: hookProps, didMount: options.dayCellDidMount, willUnmount: options.dayCellWillUnmount, elRef: props.elRef }, function (rootElRef) { return props.children(rootElRef, classNames, dataAttrs, hookProps.isDisabled); }));\n    };\n    return DayCellRoot;\n}(BaseComponent));\n\nfunction renderFill(fillType) {\n    return (createElement(\"div\", { className: \"fc-\" + fillType }));\n}\nvar BgEvent = function (props) { return (createElement(EventRoot, { defaultContent: renderInnerContent, seg: props.seg /* uselesss i think */, timeText: \"\", disableDragging: true, disableResizing: true, isDragging: false, isResizing: false, isDateSelecting: false, isSelected: false, isPast: props.isPast, isFuture: props.isFuture, isToday: props.isToday }, function (rootElRef, classNames, innerElRef, innerContent, hookProps) { return (createElement(\"div\", { ref: rootElRef, className: ['fc-bg-event'].concat(classNames).join(' '), style: {\n        backgroundColor: hookProps.backgroundColor,\n    } }, innerContent)); })); };\nfunction renderInnerContent(props) {\n    var title = props.event.title;\n    return title && (createElement(\"div\", { className: \"fc-event-title\" }, props.event.title));\n}\n\nvar WeekNumberRoot = function (props) { return (createElement(ViewContextType.Consumer, null, function (context) {\n    var dateEnv = context.dateEnv, options = context.options;\n    var date = props.date;\n    var format = options.weekNumberFormat || props.defaultFormat;\n    var num = dateEnv.computeWeekNumber(date); // TODO: somehow use for formatting as well?\n    var text = dateEnv.format(date, format);\n    var hookProps = { num: num, text: text, date: date };\n    return (createElement(RenderHook, { hookProps: hookProps, classNames: options.weekNumberClassNames, content: options.weekNumberContent, defaultContent: renderInner, didMount: options.weekNumberDidMount, willUnmount: options.weekNumberWillUnmount }, props.children));\n})); };\nfunction renderInner(innerProps) {\n    return innerProps.text;\n}\n\nvar PADDING_FROM_VIEWPORT = 10;\nvar Popover = /** @class */ (function (_super) {\n    __extends(Popover, _super);\n    function Popover() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            titleId: getUniqueDomId(),\n        };\n        _this.handleRootEl = function (el) {\n            _this.rootEl = el;\n            if (_this.props.elRef) {\n                setRef(_this.props.elRef, el);\n            }\n        };\n        // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n        _this.handleDocumentMouseDown = function (ev) {\n            // only hide the popover if the click happened outside the popover\n            var target = getEventTargetViaRoot(ev);\n            if (!_this.rootEl.contains(target)) {\n                _this.handleCloseClick();\n            }\n        };\n        _this.handleDocumentKeyDown = function (ev) {\n            if (ev.key === 'Escape') {\n                _this.handleCloseClick();\n            }\n        };\n        _this.handleCloseClick = function () {\n            var onClose = _this.props.onClose;\n            if (onClose) {\n                onClose();\n            }\n        };\n        return _this;\n    }\n    Popover.prototype.render = function () {\n        var _a = this.context, theme = _a.theme, options = _a.options;\n        var _b = this, props = _b.props, state = _b.state;\n        var classNames = [\n            'fc-popover',\n            theme.getClass('popover'),\n        ].concat(props.extraClassNames || []);\n        return createPortal(createElement(\"div\", __assign({ id: props.id, className: classNames.join(' '), \"aria-labelledby\": state.titleId }, props.extraAttrs, { ref: this.handleRootEl }),\n            createElement(\"div\", { className: 'fc-popover-header ' + theme.getClass('popoverHeader') },\n                createElement(\"span\", { className: \"fc-popover-title\", id: state.titleId }, props.title),\n                createElement(\"span\", { className: 'fc-popover-close ' + theme.getIconClass('close'), title: options.closeHint, onClick: this.handleCloseClick })),\n            createElement(\"div\", { className: 'fc-popover-body ' + theme.getClass('popoverContent') }, props.children)), props.parentEl);\n    };\n    Popover.prototype.componentDidMount = function () {\n        document.addEventListener('mousedown', this.handleDocumentMouseDown);\n        document.addEventListener('keydown', this.handleDocumentKeyDown);\n        this.updateSize();\n    };\n    Popover.prototype.componentWillUnmount = function () {\n        document.removeEventListener('mousedown', this.handleDocumentMouseDown);\n        document.removeEventListener('keydown', this.handleDocumentKeyDown);\n    };\n    Popover.prototype.updateSize = function () {\n        var isRtl = this.context.isRtl;\n        var _a = this.props, alignmentEl = _a.alignmentEl, alignGridTop = _a.alignGridTop;\n        var rootEl = this.rootEl;\n        var alignmentRect = computeClippedClientRect(alignmentEl);\n        if (alignmentRect) {\n            var popoverDims = rootEl.getBoundingClientRect();\n            // position relative to viewport\n            var popoverTop = alignGridTop\n                ? elementClosest(alignmentEl, '.fc-scrollgrid').getBoundingClientRect().top\n                : alignmentRect.top;\n            var popoverLeft = isRtl ? alignmentRect.right - popoverDims.width : alignmentRect.left;\n            // constrain\n            popoverTop = Math.max(popoverTop, PADDING_FROM_VIEWPORT);\n            popoverLeft = Math.min(popoverLeft, document.documentElement.clientWidth - PADDING_FROM_VIEWPORT - popoverDims.width);\n            popoverLeft = Math.max(popoverLeft, PADDING_FROM_VIEWPORT);\n            var origin_1 = rootEl.offsetParent.getBoundingClientRect();\n            applyStyle(rootEl, {\n                top: popoverTop - origin_1.top,\n                left: popoverLeft - origin_1.left,\n            });\n        }\n    };\n    return Popover;\n}(BaseComponent));\n\nvar MorePopover = /** @class */ (function (_super) {\n    __extends(MorePopover, _super);\n    function MorePopover() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleRootEl = function (rootEl) {\n            _this.rootEl = rootEl;\n            if (rootEl) {\n                _this.context.registerInteractiveComponent(_this, {\n                    el: rootEl,\n                    useEventCenter: false,\n                });\n            }\n            else {\n                _this.context.unregisterInteractiveComponent(_this);\n            }\n        };\n        return _this;\n    }\n    MorePopover.prototype.render = function () {\n        var _a = this.context, options = _a.options, dateEnv = _a.dateEnv;\n        var props = this.props;\n        var startDate = props.startDate, todayRange = props.todayRange, dateProfile = props.dateProfile;\n        var title = dateEnv.format(startDate, options.dayPopoverFormat);\n        return (createElement(DayCellRoot, { date: startDate, dateProfile: dateProfile, todayRange: todayRange, elRef: this.handleRootEl }, function (rootElRef, dayClassNames, dataAttrs) { return (createElement(Popover, { elRef: rootElRef, id: props.id, title: title, extraClassNames: ['fc-more-popover'].concat(dayClassNames), extraAttrs: dataAttrs /* TODO: make these time-based when not whole-day? */, parentEl: props.parentEl, alignmentEl: props.alignmentEl, alignGridTop: props.alignGridTop, onClose: props.onClose },\n            createElement(DayCellContent, { date: startDate, dateProfile: dateProfile, todayRange: todayRange }, function (innerElRef, innerContent) { return (innerContent &&\n                createElement(\"div\", { className: \"fc-more-popover-misc\", ref: innerElRef }, innerContent)); }),\n            props.children)); }));\n    };\n    MorePopover.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n        var _a = this, rootEl = _a.rootEl, props = _a.props;\n        if (positionLeft >= 0 && positionLeft < elWidth &&\n            positionTop >= 0 && positionTop < elHeight) {\n            return {\n                dateProfile: props.dateProfile,\n                dateSpan: __assign({ allDay: true, range: {\n                        start: props.startDate,\n                        end: props.endDate,\n                    } }, props.extraDateSpan),\n                dayEl: rootEl,\n                rect: {\n                    left: 0,\n                    top: 0,\n                    right: elWidth,\n                    bottom: elHeight,\n                },\n                layer: 1, // important when comparing with hits from other components\n            };\n        }\n        return null;\n    };\n    return MorePopover;\n}(DateComponent));\n\nvar MoreLinkRoot = /** @class */ (function (_super) {\n    __extends(MoreLinkRoot, _super);\n    function MoreLinkRoot() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.linkElRef = createRef();\n        _this.state = {\n            isPopoverOpen: false,\n            popoverId: getUniqueDomId(),\n        };\n        _this.handleClick = function (ev) {\n            var _a = _this, props = _a.props, context = _a.context;\n            var moreLinkClick = context.options.moreLinkClick;\n            var date = computeRange(props).start;\n            function buildPublicSeg(seg) {\n                var _a = seg.eventRange, def = _a.def, instance = _a.instance, range = _a.range;\n                return {\n                    event: new EventApi(context, def, instance),\n                    start: context.dateEnv.toDate(range.start),\n                    end: context.dateEnv.toDate(range.end),\n                    isStart: seg.isStart,\n                    isEnd: seg.isEnd,\n                };\n            }\n            if (typeof moreLinkClick === 'function') {\n                moreLinkClick = moreLinkClick({\n                    date: date,\n                    allDay: Boolean(props.allDayDate),\n                    allSegs: props.allSegs.map(buildPublicSeg),\n                    hiddenSegs: props.hiddenSegs.map(buildPublicSeg),\n                    jsEvent: ev,\n                    view: context.viewApi,\n                });\n            }\n            if (!moreLinkClick || moreLinkClick === 'popover') {\n                _this.setState({ isPopoverOpen: true });\n            }\n            else if (typeof moreLinkClick === 'string') { // a view name\n                context.calendarApi.zoomTo(date, moreLinkClick);\n            }\n        };\n        _this.handlePopoverClose = function () {\n            _this.setState({ isPopoverOpen: false });\n        };\n        return _this;\n    }\n    MoreLinkRoot.prototype.render = function () {\n        var _this = this;\n        var _a = this, props = _a.props, state = _a.state;\n        return (createElement(ViewContextType.Consumer, null, function (context) {\n            var viewApi = context.viewApi, options = context.options, calendarApi = context.calendarApi;\n            var moreLinkText = options.moreLinkText;\n            var moreCnt = props.moreCnt;\n            var range = computeRange(props);\n            var text = typeof moreLinkText === 'function' // TODO: eventually use formatWithOrdinals\n                ? moreLinkText.call(calendarApi, moreCnt)\n                : \"+\" + moreCnt + \" \" + moreLinkText;\n            var title = formatWithOrdinals(options.moreLinkHint, [moreCnt], text);\n            var hookProps = {\n                num: moreCnt,\n                shortText: \"+\" + moreCnt,\n                text: text,\n                view: viewApi,\n            };\n            return (createElement(Fragment, null,\n                Boolean(props.moreCnt) && (createElement(RenderHook, { elRef: _this.linkElRef, hookProps: hookProps, classNames: options.moreLinkClassNames, content: options.moreLinkContent, defaultContent: props.defaultContent || renderMoreLinkInner, didMount: options.moreLinkDidMount, willUnmount: options.moreLinkWillUnmount }, function (rootElRef, customClassNames, innerElRef, innerContent) { return props.children(rootElRef, ['fc-more-link'].concat(customClassNames), innerElRef, innerContent, _this.handleClick, title, state.isPopoverOpen, state.isPopoverOpen ? state.popoverId : ''); })),\n                state.isPopoverOpen && (createElement(MorePopover, { id: state.popoverId, startDate: range.start, endDate: range.end, dateProfile: props.dateProfile, todayRange: props.todayRange, extraDateSpan: props.extraDateSpan, parentEl: _this.parentEl, alignmentEl: props.alignmentElRef.current, alignGridTop: props.alignGridTop, onClose: _this.handlePopoverClose }, props.popoverContent()))));\n        }));\n    };\n    MoreLinkRoot.prototype.componentDidMount = function () {\n        this.updateParentEl();\n    };\n    MoreLinkRoot.prototype.componentDidUpdate = function () {\n        this.updateParentEl();\n    };\n    MoreLinkRoot.prototype.updateParentEl = function () {\n        if (this.linkElRef.current) {\n            this.parentEl = elementClosest(this.linkElRef.current, '.fc-view-harness');\n        }\n    };\n    return MoreLinkRoot;\n}(BaseComponent));\nfunction renderMoreLinkInner(props) {\n    return props.text;\n}\nfunction computeRange(props) {\n    if (props.allDayDate) {\n        return {\n            start: props.allDayDate,\n            end: addDays(props.allDayDate, 1),\n        };\n    }\n    var hiddenSegs = props.hiddenSegs;\n    return {\n        start: computeEarliestSegStart(hiddenSegs),\n        end: computeLatestSegEnd(hiddenSegs),\n    };\n}\nfunction computeEarliestSegStart(segs) {\n    return segs.reduce(pickEarliestStart).eventRange.range.start;\n}\nfunction pickEarliestStart(seg0, seg1) {\n    return seg0.eventRange.range.start < seg1.eventRange.range.start ? seg0 : seg1;\n}\nfunction computeLatestSegEnd(segs) {\n    return segs.reduce(pickLatestEnd).eventRange.range.end;\n}\nfunction pickLatestEnd(seg0, seg1) {\n    return seg0.eventRange.range.end > seg1.eventRange.range.end ? seg0 : seg1;\n}\n\n// exports\n// --------------------------------------------------------------------------------------------------\nvar version = '5.10.2'; // important to type it, so .d.ts has generic string\n\nexport { BASE_OPTION_DEFAULTS, BASE_OPTION_REFINERS, BaseComponent, BgEvent, CalendarApi, CalendarContent, CalendarDataManager, CalendarDataProvider, CalendarRoot, ContentHook, CustomContentRenderContext, DateComponent, DateEnv, DateProfileGenerator, DayCellContent, DayCellRoot, DayHeader, DaySeriesModel, DayTableModel, DelayedRunner, ElementDragging, ElementScrollController, Emitter, EventApi, EventRoot, EventSourceApi, Interaction, MoreLinkRoot, MountHook, NamedTimeZoneImpl, NowIndicatorRoot, NowTimer, PositionCache, RefMap, RenderHook, ScrollController, ScrollResponder, Scroller, SegHierarchy, SimpleScrollGrid, Slicer, Splitter, StandardEvent, TableDateCell, TableDowCell, Theme, ViewApi, ViewContextType, ViewRoot, WeekNumberRoot, WindowScrollController, addDays, addDurations, addMs, addWeeks, allowContextMenu, allowSelection, applyMutationToEventStore, applyStyle, applyStyleProp, asCleanDays, asRoughMinutes, asRoughMs, asRoughSeconds, binarySearch, buildClassNameNormalizer, buildEntryKey, buildEventApis, buildEventRangeKey, buildHashFromArray, buildIsoString, buildNavLinkAttrs, buildSegCompareObj, buildSegTimeText, collectFromHash, combineEventUis, compareByFieldSpec, compareByFieldSpecs, compareNumbers, compareObjs, computeEarliestSegStart, computeEdges, computeFallbackHeaderFormat, computeHeightAndMargins, computeInnerRect, computeRect, computeSegDraggable, computeSegEndResizable, computeSegStartResizable, computeShrinkWidth, computeSmallestCellWidth, computeVisibleDayRange, config, constrainPoint, createAriaClickAttrs, createDuration, createEmptyEventStore, createEventInstance, createEventUi, createFormatter, createPlugin, diffDates, diffDayAndTime, diffDays, diffPoints, diffWeeks, diffWholeDays, diffWholeWeeks, disableCursor, elementClosest, elementMatches, enableCursor, eventTupleToStore, filterEventStoreDefs, filterHash, findDirectChildren, findElements, flexibleCompare, formatDate, formatDayString, formatIsoTimeString, formatRange, getAllowYScrolling, getCanVGrowWithinCell, getClippingParents, getDateMeta, getDayClassNames, getDefaultEventEnd, getElRoot, getElSeg, getEntrySpanEnd, getEventClassNames, getEventTargetViaRoot, getIsRtlScrollbarOnLeft, getRectCenter, getRelevantEvents, getScrollGridClassNames, getScrollbarWidths, getSectionClassNames, getSectionHasLiquidHeight, getSegAnchorAttrs, getSegMeta, getSlotClassNames, getStickyFooterScrollbar, getStickyHeaderDates, getUnequalProps, getUniqueDomId, globalLocales, globalPlugins, greatestDurationDenominator, groupIntersectingEntries, guid, hasBgRendering, hasShrinkWidth, identity, interactionSettingsStore, interactionSettingsToStore, intersectRanges, intersectRects, intersectSpans, isArraysEqual, isColPropsEqual, isDateSelectionValid, isDateSpansEqual, isInt, isInteractionValid, isMultiDayRange, isPropsEqual, isPropsValid, isValidDate, joinSpans, listenBySelector, mapHash, memoize, memoizeArraylike, memoizeHashlike, memoizeObjArg, mergeEventStores, multiplyDuration, padStart, parseBusinessHours, parseClassNames, parseDragMeta, parseEventDef, parseFieldSpecs, parse as parseMarker, pointInsideRect, preventContextMenu, preventDefault, preventSelection, rangeContainsMarker, rangeContainsRange, rangesEqual, rangesIntersect, refineEventDef, refineProps, removeElement, removeExact, renderChunkContent, renderFill, renderMicroColGroup, renderScrollShim, requestJson, sanitizeShrinkWidth, setElSeg, setRef, sliceEventStore, sliceEvents, sortEventSegs, startOfDay, translateRect, triggerDateSelect, unpromisify, version, whenTransitionDone, wholeDivideDurations };\n//# sourceMappingURL=main.js.map\n","/*!\nFullCalendar v5.10.2\nDocs & License: https://fullcalendar.io/\n(c) 2021 Adam Shaw\n*/\nimport './vdom.js';\nimport { __extends, __assign } from 'tslib';\nimport { flushSync, render, createElement, CalendarRoot, CustomContentRenderContext, CalendarContent, unmountComponentAtNode, DelayedRunner, CalendarDataManager, isArraysEqual, applyStyleProp, CalendarApi } from '@fullcalendar/common';\nexport * from '@fullcalendar/common';\n\nvar Calendar = /** @class */ (function (_super) {\n    __extends(Calendar, _super);\n    function Calendar(el, optionOverrides) {\n        if (optionOverrides === void 0) { optionOverrides = {}; }\n        var _this = _super.call(this) || this;\n        _this.isRendering = false;\n        _this.isRendered = false;\n        _this.currentClassNames = [];\n        _this.customContentRenderId = 0; // will affect custom generated classNames?\n        _this.handleAction = function (action) {\n            // actions we know we want to render immediately\n            switch (action.type) {\n                case 'SET_EVENT_DRAG':\n                case 'SET_EVENT_RESIZE':\n                    _this.renderRunner.tryDrain();\n            }\n        };\n        _this.handleData = function (data) {\n            _this.currentData = data;\n            _this.renderRunner.request(data.calendarOptions.rerenderDelay);\n        };\n        _this.handleRenderRequest = function () {\n            if (_this.isRendering) {\n                _this.isRendered = true;\n                var currentData_1 = _this.currentData;\n                flushSync(function () {\n                    render(createElement(CalendarRoot, { options: currentData_1.calendarOptions, theme: currentData_1.theme, emitter: currentData_1.emitter }, function (classNames, height, isHeightAuto, forPrint) {\n                        _this.setClassNames(classNames);\n                        _this.setHeight(height);\n                        return (createElement(CustomContentRenderContext.Provider, { value: _this.customContentRenderId },\n                            createElement(CalendarContent, __assign({ isHeightAuto: isHeightAuto, forPrint: forPrint }, currentData_1))));\n                    }), _this.el);\n                });\n            }\n            else if (_this.isRendered) {\n                _this.isRendered = false;\n                unmountComponentAtNode(_this.el);\n                _this.setClassNames([]);\n                _this.setHeight('');\n            }\n        };\n        _this.el = el;\n        _this.renderRunner = new DelayedRunner(_this.handleRenderRequest);\n        new CalendarDataManager({\n            optionOverrides: optionOverrides,\n            calendarApi: _this,\n            onAction: _this.handleAction,\n            onData: _this.handleData,\n        });\n        return _this;\n    }\n    Object.defineProperty(Calendar.prototype, \"view\", {\n        get: function () { return this.currentData.viewApi; } // for public API\n        ,\n        enumerable: false,\n        configurable: true\n    });\n    Calendar.prototype.render = function () {\n        var wasRendering = this.isRendering;\n        if (!wasRendering) {\n            this.isRendering = true;\n        }\n        else {\n            this.customContentRenderId += 1;\n        }\n        this.renderRunner.request();\n        if (wasRendering) {\n            this.updateSize();\n        }\n    };\n    Calendar.prototype.destroy = function () {\n        if (this.isRendering) {\n            this.isRendering = false;\n            this.renderRunner.request();\n        }\n    };\n    Calendar.prototype.updateSize = function () {\n        var _this = this;\n        flushSync(function () {\n            _super.prototype.updateSize.call(_this);\n        });\n    };\n    Calendar.prototype.batchRendering = function (func) {\n        this.renderRunner.pause('batchRendering');\n        func();\n        this.renderRunner.resume('batchRendering');\n    };\n    Calendar.prototype.pauseRendering = function () {\n        this.renderRunner.pause('pauseRendering');\n    };\n    Calendar.prototype.resumeRendering = function () {\n        this.renderRunner.resume('pauseRendering', true);\n    };\n    Calendar.prototype.resetOptions = function (optionOverrides, append) {\n        this.currentDataManager.resetOptions(optionOverrides, append);\n    };\n    Calendar.prototype.setClassNames = function (classNames) {\n        if (!isArraysEqual(classNames, this.currentClassNames)) {\n            var classList = this.el.classList;\n            for (var _i = 0, _a = this.currentClassNames; _i < _a.length; _i++) {\n                var className = _a[_i];\n                classList.remove(className);\n            }\n            for (var _b = 0, classNames_1 = classNames; _b < classNames_1.length; _b++) {\n                var className = classNames_1[_b];\n                classList.add(className);\n            }\n            this.currentClassNames = classNames;\n        }\n    };\n    Calendar.prototype.setHeight = function (height) {\n        applyStyleProp(this.el, 'height', height);\n    };\n    return Calendar;\n}(CalendarApi));\n\nexport { Calendar };\n//# sourceMappingURL=main.js.map\n","/*!\nFullCalendar v5.10.2\nDocs & License: https://fullcalendar.io/\n(c) 2021 Adam Shaw\n*/\nimport './main.css';\n\nimport { createRef, getStickyHeaderDates, createElement, ViewRoot, SimpleScrollGrid, getStickyFooterScrollbar, renderScrollShim, DateComponent, buildNavLinkAttrs, DayCellContent, Fragment, BaseComponent, createFormatter, StandardEvent, buildSegTimeText, EventRoot, getSegAnchorAttrs, memoize, MoreLinkRoot, getSegMeta, createAriaClickAttrs, getUniqueDomId, setRef, DayCellRoot, WeekNumberRoot, buildEntryKey, intersectSpans, SegHierarchy, intersectRanges, addDays, RefMap, sortEventSegs, isPropsEqual, buildEventRangeKey, BgEvent, renderFill, PositionCache, NowTimer, Slicer, DayHeader, DaySeriesModel, DayTableModel, addWeeks, diffWeeks, DateProfileGenerator, createPlugin } from '@fullcalendar/common';\nimport { __extends, __assign, __spreadArray } from 'tslib';\n\n/* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n----------------------------------------------------------------------------------------------------------------------*/\n// It is a manager for a Table subcomponent, which does most of the heavy lifting.\n// It is responsible for managing width/height.\nvar TableView = /** @class */ (function (_super) {\n    __extends(TableView, _super);\n    function TableView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.headerElRef = createRef();\n        return _this;\n    }\n    TableView.prototype.renderSimpleLayout = function (headerRowContent, bodyContent) {\n        var _a = this, props = _a.props, context = _a.context;\n        var sections = [];\n        var stickyHeaderDates = getStickyHeaderDates(context.options);\n        if (headerRowContent) {\n            sections.push({\n                type: 'header',\n                key: 'header',\n                isSticky: stickyHeaderDates,\n                chunk: {\n                    elRef: this.headerElRef,\n                    tableClassName: 'fc-col-header',\n                    rowContent: headerRowContent,\n                },\n            });\n        }\n        sections.push({\n            type: 'body',\n            key: 'body',\n            liquid: true,\n            chunk: { content: bodyContent },\n        });\n        return (createElement(ViewRoot, { viewSpec: context.viewSpec }, function (rootElRef, classNames) { return (createElement(\"div\", { ref: rootElRef, className: ['fc-daygrid'].concat(classNames).join(' ') },\n            createElement(SimpleScrollGrid, { liquid: !props.isHeightAuto && !props.forPrint, collapsibleWidth: props.forPrint, cols: [] /* TODO: make optional? */, sections: sections }))); }));\n    };\n    TableView.prototype.renderHScrollLayout = function (headerRowContent, bodyContent, colCnt, dayMinWidth) {\n        var ScrollGrid = this.context.pluginHooks.scrollGridImpl;\n        if (!ScrollGrid) {\n            throw new Error('No ScrollGrid implementation');\n        }\n        var _a = this, props = _a.props, context = _a.context;\n        var stickyHeaderDates = !props.forPrint && getStickyHeaderDates(context.options);\n        var stickyFooterScrollbar = !props.forPrint && getStickyFooterScrollbar(context.options);\n        var sections = [];\n        if (headerRowContent) {\n            sections.push({\n                type: 'header',\n                key: 'header',\n                isSticky: stickyHeaderDates,\n                chunks: [{\n                        key: 'main',\n                        elRef: this.headerElRef,\n                        tableClassName: 'fc-col-header',\n                        rowContent: headerRowContent,\n                    }],\n            });\n        }\n        sections.push({\n            type: 'body',\n            key: 'body',\n            liquid: true,\n            chunks: [{\n                    key: 'main',\n                    content: bodyContent,\n                }],\n        });\n        if (stickyFooterScrollbar) {\n            sections.push({\n                type: 'footer',\n                key: 'footer',\n                isSticky: true,\n                chunks: [{\n                        key: 'main',\n                        content: renderScrollShim,\n                    }],\n            });\n        }\n        return (createElement(ViewRoot, { viewSpec: context.viewSpec }, function (rootElRef, classNames) { return (createElement(\"div\", { ref: rootElRef, className: ['fc-daygrid'].concat(classNames).join(' ') },\n            createElement(ScrollGrid, { liquid: !props.isHeightAuto && !props.forPrint, collapsibleWidth: props.forPrint, colGroups: [{ cols: [{ span: colCnt, minWidth: dayMinWidth }] }], sections: sections }))); }));\n    };\n    return TableView;\n}(DateComponent));\n\nfunction splitSegsByRow(segs, rowCnt) {\n    var byRow = [];\n    for (var i = 0; i < rowCnt; i += 1) {\n        byRow[i] = [];\n    }\n    for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n        var seg = segs_1[_i];\n        byRow[seg.row].push(seg);\n    }\n    return byRow;\n}\nfunction splitSegsByFirstCol(segs, colCnt) {\n    var byCol = [];\n    for (var i = 0; i < colCnt; i += 1) {\n        byCol[i] = [];\n    }\n    for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n        var seg = segs_2[_i];\n        byCol[seg.firstCol].push(seg);\n    }\n    return byCol;\n}\nfunction splitInteractionByRow(ui, rowCnt) {\n    var byRow = [];\n    if (!ui) {\n        for (var i = 0; i < rowCnt; i += 1) {\n            byRow[i] = null;\n        }\n    }\n    else {\n        for (var i = 0; i < rowCnt; i += 1) {\n            byRow[i] = {\n                affectedInstances: ui.affectedInstances,\n                isEvent: ui.isEvent,\n                segs: [],\n            };\n        }\n        for (var _i = 0, _a = ui.segs; _i < _a.length; _i++) {\n            var seg = _a[_i];\n            byRow[seg.row].segs.push(seg);\n        }\n    }\n    return byRow;\n}\n\nvar TableCellTop = /** @class */ (function (_super) {\n    __extends(TableCellTop, _super);\n    function TableCellTop() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TableCellTop.prototype.render = function () {\n        var props = this.props;\n        var navLinkAttrs = buildNavLinkAttrs(this.context, props.date);\n        return (createElement(DayCellContent, { date: props.date, dateProfile: props.dateProfile, todayRange: props.todayRange, showDayNumber: props.showDayNumber, extraHookProps: props.extraHookProps, defaultContent: renderTopInner }, function (innerElRef, innerContent) { return ((innerContent || props.forceDayTop) && (createElement(\"div\", { className: \"fc-daygrid-day-top\", ref: innerElRef },\n            createElement(\"a\", __assign({ id: props.dayNumberId, className: \"fc-daygrid-day-number\" }, navLinkAttrs), innerContent || createElement(Fragment, null, \"\\u00A0\"))))); }));\n    };\n    return TableCellTop;\n}(BaseComponent));\nfunction renderTopInner(props) {\n    return props.dayNumberText;\n}\n\nvar DEFAULT_TABLE_EVENT_TIME_FORMAT = createFormatter({\n    hour: 'numeric',\n    minute: '2-digit',\n    omitZeroMinute: true,\n    meridiem: 'narrow',\n});\nfunction hasListItemDisplay(seg) {\n    var display = seg.eventRange.ui.display;\n    return display === 'list-item' || (display === 'auto' &&\n        !seg.eventRange.def.allDay &&\n        seg.firstCol === seg.lastCol && // can't be multi-day\n        seg.isStart && // \"\n        seg.isEnd // \"\n    );\n}\n\nvar TableBlockEvent = /** @class */ (function (_super) {\n    __extends(TableBlockEvent, _super);\n    function TableBlockEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TableBlockEvent.prototype.render = function () {\n        var props = this.props;\n        return (createElement(StandardEvent, __assign({}, props, { extraClassNames: ['fc-daygrid-event', 'fc-daygrid-block-event', 'fc-h-event'], defaultTimeFormat: DEFAULT_TABLE_EVENT_TIME_FORMAT, defaultDisplayEventEnd: props.defaultDisplayEventEnd, disableResizing: !props.seg.eventRange.def.allDay })));\n    };\n    return TableBlockEvent;\n}(BaseComponent));\n\nvar TableListItemEvent = /** @class */ (function (_super) {\n    __extends(TableListItemEvent, _super);\n    function TableListItemEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TableListItemEvent.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        var timeFormat = context.options.eventTimeFormat || DEFAULT_TABLE_EVENT_TIME_FORMAT;\n        var timeText = buildSegTimeText(props.seg, timeFormat, context, true, props.defaultDisplayEventEnd);\n        return (createElement(EventRoot, { seg: props.seg, timeText: timeText, defaultContent: renderInnerContent, isDragging: props.isDragging, isResizing: false, isDateSelecting: false, isSelected: props.isSelected, isPast: props.isPast, isFuture: props.isFuture, isToday: props.isToday }, function (rootElRef, classNames, innerElRef, innerContent) { return ( // we don't use styles!\n        createElement(\"a\", __assign({ className: ['fc-daygrid-event', 'fc-daygrid-dot-event'].concat(classNames).join(' '), ref: rootElRef }, getSegAnchorAttrs(props.seg, context)), innerContent)); }));\n    };\n    return TableListItemEvent;\n}(BaseComponent));\nfunction renderInnerContent(innerProps) {\n    return (createElement(Fragment, null,\n        createElement(\"div\", { className: \"fc-daygrid-event-dot\", style: { borderColor: innerProps.borderColor || innerProps.backgroundColor } }),\n        innerProps.timeText && (createElement(\"div\", { className: \"fc-event-time\" }, innerProps.timeText)),\n        createElement(\"div\", { className: \"fc-event-title\" }, innerProps.event.title || createElement(Fragment, null, \"\\u00A0\"))));\n}\n\nvar TableCellMoreLink = /** @class */ (function (_super) {\n    __extends(TableCellMoreLink, _super);\n    function TableCellMoreLink() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.compileSegs = memoize(compileSegs);\n        return _this;\n    }\n    TableCellMoreLink.prototype.render = function () {\n        var props = this.props;\n        var _a = this.compileSegs(props.singlePlacements), allSegs = _a.allSegs, invisibleSegs = _a.invisibleSegs;\n        return (createElement(MoreLinkRoot, { dateProfile: props.dateProfile, todayRange: props.todayRange, allDayDate: props.allDayDate, moreCnt: props.moreCnt, allSegs: allSegs, hiddenSegs: invisibleSegs, alignmentElRef: props.alignmentElRef, alignGridTop: props.alignGridTop, extraDateSpan: props.extraDateSpan, popoverContent: function () {\n                var isForcedInvisible = (props.eventDrag ? props.eventDrag.affectedInstances : null) ||\n                    (props.eventResize ? props.eventResize.affectedInstances : null) ||\n                    {};\n                return (createElement(Fragment, null, allSegs.map(function (seg) {\n                    var instanceId = seg.eventRange.instance.instanceId;\n                    return (createElement(\"div\", { className: \"fc-daygrid-event-harness\", key: instanceId, style: {\n                            visibility: isForcedInvisible[instanceId] ? 'hidden' : '',\n                        } }, hasListItemDisplay(seg) ? (createElement(TableListItemEvent, __assign({ seg: seg, isDragging: false, isSelected: instanceId === props.eventSelection, defaultDisplayEventEnd: false }, getSegMeta(seg, props.todayRange)))) : (createElement(TableBlockEvent, __assign({ seg: seg, isDragging: false, isResizing: false, isDateSelecting: false, isSelected: instanceId === props.eventSelection, defaultDisplayEventEnd: false }, getSegMeta(seg, props.todayRange))))));\n                })));\n            } }, function (rootElRef, classNames, innerElRef, innerContent, handleClick, title, isExpanded, popoverId) { return (createElement(\"a\", __assign({ ref: rootElRef, className: ['fc-daygrid-more-link'].concat(classNames).join(' '), title: title, \"aria-expanded\": isExpanded, \"aria-controls\": popoverId }, createAriaClickAttrs(handleClick)), innerContent)); }));\n    };\n    return TableCellMoreLink;\n}(BaseComponent));\nfunction compileSegs(singlePlacements) {\n    var allSegs = [];\n    var invisibleSegs = [];\n    for (var _i = 0, singlePlacements_1 = singlePlacements; _i < singlePlacements_1.length; _i++) {\n        var placement = singlePlacements_1[_i];\n        allSegs.push(placement.seg);\n        if (!placement.isVisible) {\n            invisibleSegs.push(placement.seg);\n        }\n    }\n    return { allSegs: allSegs, invisibleSegs: invisibleSegs };\n}\n\nvar DEFAULT_WEEK_NUM_FORMAT = createFormatter({ week: 'narrow' });\nvar TableCell = /** @class */ (function (_super) {\n    __extends(TableCell, _super);\n    function TableCell() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.rootElRef = createRef();\n        _this.state = {\n            dayNumberId: getUniqueDomId(),\n        };\n        _this.handleRootEl = function (el) {\n            setRef(_this.rootElRef, el);\n            setRef(_this.props.elRef, el);\n        };\n        return _this;\n    }\n    TableCell.prototype.render = function () {\n        var _a = this, context = _a.context, props = _a.props, state = _a.state, rootElRef = _a.rootElRef;\n        var date = props.date, dateProfile = props.dateProfile;\n        var navLinkAttrs = buildNavLinkAttrs(context, date, 'week');\n        return (createElement(DayCellRoot, { date: date, dateProfile: dateProfile, todayRange: props.todayRange, showDayNumber: props.showDayNumber, extraHookProps: props.extraHookProps, elRef: this.handleRootEl }, function (dayElRef, dayClassNames, rootDataAttrs, isDisabled) { return (createElement(\"td\", __assign({ ref: dayElRef, role: \"gridcell\", className: ['fc-daygrid-day'].concat(dayClassNames, props.extraClassNames || []).join(' ') }, rootDataAttrs, props.extraDataAttrs, (props.showDayNumber ? { 'aria-labelledby': state.dayNumberId } : {})),\n            createElement(\"div\", { className: \"fc-daygrid-day-frame fc-scrollgrid-sync-inner\", ref: props.innerElRef /* different from hook system! RENAME */ },\n                props.showWeekNumber && (createElement(WeekNumberRoot, { date: date, defaultFormat: DEFAULT_WEEK_NUM_FORMAT }, function (weekElRef, weekClassNames, innerElRef, innerContent) { return (createElement(\"a\", __assign({ ref: weekElRef, className: ['fc-daygrid-week-number'].concat(weekClassNames).join(' ') }, navLinkAttrs), innerContent)); })),\n                !isDisabled && (createElement(TableCellTop, { date: date, dateProfile: dateProfile, showDayNumber: props.showDayNumber, dayNumberId: state.dayNumberId, forceDayTop: props.forceDayTop, todayRange: props.todayRange, extraHookProps: props.extraHookProps })),\n                createElement(\"div\", { className: \"fc-daygrid-day-events\", ref: props.fgContentElRef },\n                    props.fgContent,\n                    createElement(\"div\", { className: \"fc-daygrid-day-bottom\", style: { marginTop: props.moreMarginTop } },\n                        createElement(TableCellMoreLink, { allDayDate: date, singlePlacements: props.singlePlacements, moreCnt: props.moreCnt, alignmentElRef: rootElRef, alignGridTop: !props.showDayNumber, extraDateSpan: props.extraDateSpan, dateProfile: props.dateProfile, eventSelection: props.eventSelection, eventDrag: props.eventDrag, eventResize: props.eventResize, todayRange: props.todayRange }))),\n                createElement(\"div\", { className: \"fc-daygrid-day-bg\" }, props.bgContent)))); }));\n    };\n    return TableCell;\n}(DateComponent));\n\nfunction computeFgSegPlacement(segs, // assumed already sorted\ndayMaxEvents, dayMaxEventRows, strictOrder, eventInstanceHeights, maxContentHeight, cells) {\n    var hierarchy = new DayGridSegHierarchy();\n    hierarchy.allowReslicing = true;\n    hierarchy.strictOrder = strictOrder;\n    if (dayMaxEvents === true || dayMaxEventRows === true) {\n        hierarchy.maxCoord = maxContentHeight;\n        hierarchy.hiddenConsumes = true;\n    }\n    else if (typeof dayMaxEvents === 'number') {\n        hierarchy.maxStackCnt = dayMaxEvents;\n    }\n    else if (typeof dayMaxEventRows === 'number') {\n        hierarchy.maxStackCnt = dayMaxEventRows;\n        hierarchy.hiddenConsumes = true;\n    }\n    // create segInputs only for segs with known heights\n    var segInputs = [];\n    var unknownHeightSegs = [];\n    for (var i = 0; i < segs.length; i += 1) {\n        var seg = segs[i];\n        var instanceId = seg.eventRange.instance.instanceId;\n        var eventHeight = eventInstanceHeights[instanceId];\n        if (eventHeight != null) {\n            segInputs.push({\n                index: i,\n                thickness: eventHeight,\n                span: {\n                    start: seg.firstCol,\n                    end: seg.lastCol + 1,\n                },\n            });\n        }\n        else {\n            unknownHeightSegs.push(seg);\n        }\n    }\n    var hiddenEntries = hierarchy.addSegs(segInputs);\n    var segRects = hierarchy.toRects();\n    var _a = placeRects(segRects, segs, cells), singleColPlacements = _a.singleColPlacements, multiColPlacements = _a.multiColPlacements, leftoverMargins = _a.leftoverMargins;\n    var moreCnts = [];\n    var moreMarginTops = [];\n    // add segs with unknown heights\n    for (var _i = 0, unknownHeightSegs_1 = unknownHeightSegs; _i < unknownHeightSegs_1.length; _i++) {\n        var seg = unknownHeightSegs_1[_i];\n        multiColPlacements[seg.firstCol].push({\n            seg: seg,\n            isVisible: false,\n            isAbsolute: true,\n            absoluteTop: 0,\n            marginTop: 0,\n        });\n        for (var col = seg.firstCol; col <= seg.lastCol; col += 1) {\n            singleColPlacements[col].push({\n                seg: resliceSeg(seg, col, col + 1, cells),\n                isVisible: false,\n                isAbsolute: false,\n                absoluteTop: 0,\n                marginTop: 0,\n            });\n        }\n    }\n    // add the hidden entries\n    for (var col = 0; col < cells.length; col += 1) {\n        moreCnts.push(0);\n    }\n    for (var _b = 0, hiddenEntries_1 = hiddenEntries; _b < hiddenEntries_1.length; _b++) {\n        var hiddenEntry = hiddenEntries_1[_b];\n        var seg = segs[hiddenEntry.index];\n        var hiddenSpan = hiddenEntry.span;\n        multiColPlacements[hiddenSpan.start].push({\n            seg: resliceSeg(seg, hiddenSpan.start, hiddenSpan.end, cells),\n            isVisible: false,\n            isAbsolute: true,\n            absoluteTop: 0,\n            marginTop: 0,\n        });\n        for (var col = hiddenSpan.start; col < hiddenSpan.end; col += 1) {\n            moreCnts[col] += 1;\n            singleColPlacements[col].push({\n                seg: resliceSeg(seg, col, col + 1, cells),\n                isVisible: false,\n                isAbsolute: false,\n                absoluteTop: 0,\n                marginTop: 0,\n            });\n        }\n    }\n    // deal with leftover margins\n    for (var col = 0; col < cells.length; col += 1) {\n        moreMarginTops.push(leftoverMargins[col]);\n    }\n    return { singleColPlacements: singleColPlacements, multiColPlacements: multiColPlacements, moreCnts: moreCnts, moreMarginTops: moreMarginTops };\n}\n// rects ordered by top coord, then left\nfunction placeRects(allRects, segs, cells) {\n    var rectsByEachCol = groupRectsByEachCol(allRects, cells.length);\n    var singleColPlacements = [];\n    var multiColPlacements = [];\n    var leftoverMargins = [];\n    for (var col = 0; col < cells.length; col += 1) {\n        var rects = rectsByEachCol[col];\n        // compute all static segs in singlePlacements\n        var singlePlacements = [];\n        var currentHeight = 0;\n        var currentMarginTop = 0;\n        for (var _i = 0, rects_1 = rects; _i < rects_1.length; _i++) {\n            var rect = rects_1[_i];\n            var seg = segs[rect.index];\n            singlePlacements.push({\n                seg: resliceSeg(seg, col, col + 1, cells),\n                isVisible: true,\n                isAbsolute: false,\n                absoluteTop: rect.levelCoord,\n                marginTop: rect.levelCoord - currentHeight,\n            });\n            currentHeight = rect.levelCoord + rect.thickness;\n        }\n        // compute mixed static/absolute segs in multiPlacements\n        var multiPlacements = [];\n        currentHeight = 0;\n        currentMarginTop = 0;\n        for (var _a = 0, rects_2 = rects; _a < rects_2.length; _a++) {\n            var rect = rects_2[_a];\n            var seg = segs[rect.index];\n            var isAbsolute = rect.span.end - rect.span.start > 1; // multi-column?\n            var isFirstCol = rect.span.start === col;\n            currentMarginTop += rect.levelCoord - currentHeight; // amount of space since bottom of previous seg\n            currentHeight = rect.levelCoord + rect.thickness; // height will now be bottom of current seg\n            if (isAbsolute) {\n                currentMarginTop += rect.thickness;\n                if (isFirstCol) {\n                    multiPlacements.push({\n                        seg: resliceSeg(seg, rect.span.start, rect.span.end, cells),\n                        isVisible: true,\n                        isAbsolute: true,\n                        absoluteTop: rect.levelCoord,\n                        marginTop: 0,\n                    });\n                }\n            }\n            else if (isFirstCol) {\n                multiPlacements.push({\n                    seg: resliceSeg(seg, rect.span.start, rect.span.end, cells),\n                    isVisible: true,\n                    isAbsolute: false,\n                    absoluteTop: rect.levelCoord,\n                    marginTop: currentMarginTop, // claim the margin\n                });\n                currentMarginTop = 0;\n            }\n        }\n        singleColPlacements.push(singlePlacements);\n        multiColPlacements.push(multiPlacements);\n        leftoverMargins.push(currentMarginTop);\n    }\n    return { singleColPlacements: singleColPlacements, multiColPlacements: multiColPlacements, leftoverMargins: leftoverMargins };\n}\nfunction groupRectsByEachCol(rects, colCnt) {\n    var rectsByEachCol = [];\n    for (var col = 0; col < colCnt; col += 1) {\n        rectsByEachCol.push([]);\n    }\n    for (var _i = 0, rects_3 = rects; _i < rects_3.length; _i++) {\n        var rect = rects_3[_i];\n        for (var col = rect.span.start; col < rect.span.end; col += 1) {\n            rectsByEachCol[col].push(rect);\n        }\n    }\n    return rectsByEachCol;\n}\nfunction resliceSeg(seg, spanStart, spanEnd, cells) {\n    if (seg.firstCol === spanStart && seg.lastCol === spanEnd - 1) {\n        return seg;\n    }\n    var eventRange = seg.eventRange;\n    var origRange = eventRange.range;\n    var slicedRange = intersectRanges(origRange, {\n        start: cells[spanStart].date,\n        end: addDays(cells[spanEnd - 1].date, 1),\n    });\n    return __assign(__assign({}, seg), { firstCol: spanStart, lastCol: spanEnd - 1, eventRange: {\n            def: eventRange.def,\n            ui: __assign(__assign({}, eventRange.ui), { durationEditable: false }),\n            instance: eventRange.instance,\n            range: slicedRange,\n        }, isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(), isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf() });\n}\nvar DayGridSegHierarchy = /** @class */ (function (_super) {\n    __extends(DayGridSegHierarchy, _super);\n    function DayGridSegHierarchy() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        // config\n        _this.hiddenConsumes = false;\n        // allows us to keep hidden entries in the hierarchy so they take up space\n        _this.forceHidden = {};\n        return _this;\n    }\n    DayGridSegHierarchy.prototype.addSegs = function (segInputs) {\n        var _this = this;\n        var hiddenSegs = _super.prototype.addSegs.call(this, segInputs);\n        var entriesByLevel = this.entriesByLevel;\n        var excludeHidden = function (entry) { return !_this.forceHidden[buildEntryKey(entry)]; };\n        // remove the forced-hidden segs\n        for (var level = 0; level < entriesByLevel.length; level += 1) {\n            entriesByLevel[level] = entriesByLevel[level].filter(excludeHidden);\n        }\n        return hiddenSegs;\n    };\n    DayGridSegHierarchy.prototype.handleInvalidInsertion = function (insertion, entry, hiddenEntries) {\n        var _a = this, entriesByLevel = _a.entriesByLevel, forceHidden = _a.forceHidden;\n        var touchingEntry = insertion.touchingEntry, touchingLevel = insertion.touchingLevel, touchingLateral = insertion.touchingLateral;\n        if (this.hiddenConsumes && touchingEntry) {\n            var touchingEntryId = buildEntryKey(touchingEntry);\n            // if not already hidden\n            if (!forceHidden[touchingEntryId]) {\n                if (this.allowReslicing) {\n                    var placeholderEntry = __assign(__assign({}, touchingEntry), { span: intersectSpans(touchingEntry.span, entry.span) });\n                    var placeholderEntryId = buildEntryKey(placeholderEntry);\n                    forceHidden[placeholderEntryId] = true;\n                    entriesByLevel[touchingLevel][touchingLateral] = placeholderEntry; // replace touchingEntry with our placeholder\n                    this.splitEntry(touchingEntry, entry, hiddenEntries); // split up the touchingEntry, reinsert it\n                }\n                else {\n                    forceHidden[touchingEntryId] = true;\n                    hiddenEntries.push(touchingEntry);\n                }\n            }\n        }\n        return _super.prototype.handleInvalidInsertion.call(this, insertion, entry, hiddenEntries);\n    };\n    return DayGridSegHierarchy;\n}(SegHierarchy));\n\nvar TableRow = /** @class */ (function (_super) {\n    __extends(TableRow, _super);\n    function TableRow() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.cellElRefs = new RefMap(); // the <td>\n        _this.frameElRefs = new RefMap(); // the fc-daygrid-day-frame\n        _this.fgElRefs = new RefMap(); // the fc-daygrid-day-events\n        _this.segHarnessRefs = new RefMap(); // indexed by \"instanceId:firstCol\"\n        _this.rootElRef = createRef();\n        _this.state = {\n            framePositions: null,\n            maxContentHeight: null,\n            eventInstanceHeights: {},\n        };\n        return _this;\n    }\n    TableRow.prototype.render = function () {\n        var _this = this;\n        var _a = this, props = _a.props, state = _a.state, context = _a.context;\n        var options = context.options;\n        var colCnt = props.cells.length;\n        var businessHoursByCol = splitSegsByFirstCol(props.businessHourSegs, colCnt);\n        var bgEventSegsByCol = splitSegsByFirstCol(props.bgEventSegs, colCnt);\n        var highlightSegsByCol = splitSegsByFirstCol(this.getHighlightSegs(), colCnt);\n        var mirrorSegsByCol = splitSegsByFirstCol(this.getMirrorSegs(), colCnt);\n        var _b = computeFgSegPlacement(sortEventSegs(props.fgEventSegs, options.eventOrder), props.dayMaxEvents, props.dayMaxEventRows, options.eventOrderStrict, state.eventInstanceHeights, state.maxContentHeight, props.cells), singleColPlacements = _b.singleColPlacements, multiColPlacements = _b.multiColPlacements, moreCnts = _b.moreCnts, moreMarginTops = _b.moreMarginTops;\n        var isForcedInvisible = // TODO: messy way to compute this\n         (props.eventDrag && props.eventDrag.affectedInstances) ||\n            (props.eventResize && props.eventResize.affectedInstances) ||\n            {};\n        return (createElement(\"tr\", { ref: this.rootElRef, role: \"row\" },\n            props.renderIntro && props.renderIntro(),\n            props.cells.map(function (cell, col) {\n                var normalFgNodes = _this.renderFgSegs(col, props.forPrint ? singleColPlacements[col] : multiColPlacements[col], props.todayRange, isForcedInvisible);\n                var mirrorFgNodes = _this.renderFgSegs(col, buildMirrorPlacements(mirrorSegsByCol[col], multiColPlacements), props.todayRange, {}, Boolean(props.eventDrag), Boolean(props.eventResize), false);\n                return (createElement(TableCell, { key: cell.key, elRef: _this.cellElRefs.createRef(cell.key), innerElRef: _this.frameElRefs.createRef(cell.key) /* FF <td> problem, but okay to use for left/right. TODO: rename prop */, dateProfile: props.dateProfile, date: cell.date, showDayNumber: props.showDayNumbers, showWeekNumber: props.showWeekNumbers && col === 0, forceDayTop: props.showWeekNumbers /* even displaying weeknum for row, not necessarily day */, todayRange: props.todayRange, eventSelection: props.eventSelection, eventDrag: props.eventDrag, eventResize: props.eventResize, extraHookProps: cell.extraHookProps, extraDataAttrs: cell.extraDataAttrs, extraClassNames: cell.extraClassNames, extraDateSpan: cell.extraDateSpan, moreCnt: moreCnts[col], moreMarginTop: moreMarginTops[col], singlePlacements: singleColPlacements[col], fgContentElRef: _this.fgElRefs.createRef(cell.key), fgContent: ( // Fragment scopes the keys\n                    createElement(Fragment, null,\n                        createElement(Fragment, null, normalFgNodes),\n                        createElement(Fragment, null, mirrorFgNodes))), bgContent: ( // Fragment scopes the keys\n                    createElement(Fragment, null,\n                        _this.renderFillSegs(highlightSegsByCol[col], 'highlight'),\n                        _this.renderFillSegs(businessHoursByCol[col], 'non-business'),\n                        _this.renderFillSegs(bgEventSegsByCol[col], 'bg-event'))) }));\n            })));\n    };\n    TableRow.prototype.componentDidMount = function () {\n        this.updateSizing(true);\n    };\n    TableRow.prototype.componentDidUpdate = function (prevProps, prevState) {\n        var currentProps = this.props;\n        this.updateSizing(!isPropsEqual(prevProps, currentProps));\n    };\n    TableRow.prototype.getHighlightSegs = function () {\n        var props = this.props;\n        if (props.eventDrag && props.eventDrag.segs.length) { // messy check\n            return props.eventDrag.segs;\n        }\n        if (props.eventResize && props.eventResize.segs.length) { // messy check\n            return props.eventResize.segs;\n        }\n        return props.dateSelectionSegs;\n    };\n    TableRow.prototype.getMirrorSegs = function () {\n        var props = this.props;\n        if (props.eventResize && props.eventResize.segs.length) { // messy check\n            return props.eventResize.segs;\n        }\n        return [];\n    };\n    TableRow.prototype.renderFgSegs = function (col, segPlacements, todayRange, isForcedInvisible, isDragging, isResizing, isDateSelecting) {\n        var context = this.context;\n        var eventSelection = this.props.eventSelection;\n        var framePositions = this.state.framePositions;\n        var defaultDisplayEventEnd = this.props.cells.length === 1; // colCnt === 1\n        var isMirror = isDragging || isResizing || isDateSelecting;\n        var nodes = [];\n        if (framePositions) {\n            for (var _i = 0, segPlacements_1 = segPlacements; _i < segPlacements_1.length; _i++) {\n                var placement = segPlacements_1[_i];\n                var seg = placement.seg;\n                var instanceId = seg.eventRange.instance.instanceId;\n                var key = instanceId + ':' + col;\n                var isVisible = placement.isVisible && !isForcedInvisible[instanceId];\n                var isAbsolute = placement.isAbsolute;\n                var left = '';\n                var right = '';\n                if (isAbsolute) {\n                    if (context.isRtl) {\n                        right = 0;\n                        left = framePositions.lefts[seg.lastCol] - framePositions.lefts[seg.firstCol];\n                    }\n                    else {\n                        left = 0;\n                        right = framePositions.rights[seg.firstCol] - framePositions.rights[seg.lastCol];\n                    }\n                }\n                /*\n                known bug: events that are force to be list-item but span multiple days still take up space in later columns\n                todo: in print view, for multi-day events, don't display title within non-start/end segs\n                */\n                nodes.push(createElement(\"div\", { className: 'fc-daygrid-event-harness' + (isAbsolute ? ' fc-daygrid-event-harness-abs' : ''), key: key, ref: isMirror ? null : this.segHarnessRefs.createRef(key), style: {\n                        visibility: isVisible ? '' : 'hidden',\n                        marginTop: isAbsolute ? '' : placement.marginTop,\n                        top: isAbsolute ? placement.absoluteTop : '',\n                        left: left,\n                        right: right,\n                    } }, hasListItemDisplay(seg) ? (createElement(TableListItemEvent, __assign({ seg: seg, isDragging: isDragging, isSelected: instanceId === eventSelection, defaultDisplayEventEnd: defaultDisplayEventEnd }, getSegMeta(seg, todayRange)))) : (createElement(TableBlockEvent, __assign({ seg: seg, isDragging: isDragging, isResizing: isResizing, isDateSelecting: isDateSelecting, isSelected: instanceId === eventSelection, defaultDisplayEventEnd: defaultDisplayEventEnd }, getSegMeta(seg, todayRange))))));\n            }\n        }\n        return nodes;\n    };\n    TableRow.prototype.renderFillSegs = function (segs, fillType) {\n        var isRtl = this.context.isRtl;\n        var todayRange = this.props.todayRange;\n        var framePositions = this.state.framePositions;\n        var nodes = [];\n        if (framePositions) {\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                var leftRightCss = isRtl ? {\n                    right: 0,\n                    left: framePositions.lefts[seg.lastCol] - framePositions.lefts[seg.firstCol],\n                } : {\n                    left: 0,\n                    right: framePositions.rights[seg.firstCol] - framePositions.rights[seg.lastCol],\n                };\n                nodes.push(createElement(\"div\", { key: buildEventRangeKey(seg.eventRange), className: \"fc-daygrid-bg-harness\", style: leftRightCss }, fillType === 'bg-event' ?\n                    createElement(BgEvent, __assign({ seg: seg }, getSegMeta(seg, todayRange))) :\n                    renderFill(fillType)));\n            }\n        }\n        return createElement.apply(void 0, __spreadArray([Fragment, {}], nodes));\n    };\n    TableRow.prototype.updateSizing = function (isExternalSizingChange) {\n        var _a = this, props = _a.props, frameElRefs = _a.frameElRefs;\n        if (!props.forPrint &&\n            props.clientWidth !== null // positioning ready?\n        ) {\n            if (isExternalSizingChange) {\n                var frameEls = props.cells.map(function (cell) { return frameElRefs.currentMap[cell.key]; });\n                if (frameEls.length) {\n                    var originEl = this.rootElRef.current;\n                    this.setState({\n                        framePositions: new PositionCache(originEl, frameEls, true, // isHorizontal\n                        false),\n                    });\n                }\n            }\n            var oldInstanceHeights = this.state.eventInstanceHeights;\n            var newInstanceHeights = this.queryEventInstanceHeights();\n            var limitByContentHeight = props.dayMaxEvents === true || props.dayMaxEventRows === true;\n            this.setState({\n                // HACK to prevent oscillations of events being shown/hidden from max-event-rows\n                // Essentially, once you compute an element's height, never null-out.\n                // TODO: always display all events, as visibility:hidden?\n                eventInstanceHeights: __assign(__assign({}, oldInstanceHeights), newInstanceHeights),\n                maxContentHeight: limitByContentHeight ? this.computeMaxContentHeight() : null,\n            });\n        }\n    };\n    TableRow.prototype.queryEventInstanceHeights = function () {\n        var segElMap = this.segHarnessRefs.currentMap;\n        var eventInstanceHeights = {};\n        // get the max height amongst instance segs\n        for (var key in segElMap) {\n            var height = Math.round(segElMap[key].getBoundingClientRect().height);\n            var instanceId = key.split(':')[0]; // deconstruct how renderFgSegs makes the key\n            eventInstanceHeights[instanceId] = Math.max(eventInstanceHeights[instanceId] || 0, height);\n        }\n        return eventInstanceHeights;\n    };\n    TableRow.prototype.computeMaxContentHeight = function () {\n        var firstKey = this.props.cells[0].key;\n        var cellEl = this.cellElRefs.currentMap[firstKey];\n        var fcContainerEl = this.fgElRefs.currentMap[firstKey];\n        return cellEl.getBoundingClientRect().bottom - fcContainerEl.getBoundingClientRect().top;\n    };\n    TableRow.prototype.getCellEls = function () {\n        var elMap = this.cellElRefs.currentMap;\n        return this.props.cells.map(function (cell) { return elMap[cell.key]; });\n    };\n    return TableRow;\n}(DateComponent));\nTableRow.addStateEquality({\n    eventInstanceHeights: isPropsEqual,\n});\nfunction buildMirrorPlacements(mirrorSegs, colPlacements) {\n    if (!mirrorSegs.length) {\n        return [];\n    }\n    var topsByInstanceId = buildAbsoluteTopHash(colPlacements); // TODO: cache this at first render?\n    return mirrorSegs.map(function (seg) { return ({\n        seg: seg,\n        isVisible: true,\n        isAbsolute: true,\n        absoluteTop: topsByInstanceId[seg.eventRange.instance.instanceId],\n        marginTop: 0,\n    }); });\n}\nfunction buildAbsoluteTopHash(colPlacements) {\n    var topsByInstanceId = {};\n    for (var _i = 0, colPlacements_1 = colPlacements; _i < colPlacements_1.length; _i++) {\n        var placements = colPlacements_1[_i];\n        for (var _a = 0, placements_1 = placements; _a < placements_1.length; _a++) {\n            var placement = placements_1[_a];\n            topsByInstanceId[placement.seg.eventRange.instance.instanceId] = placement.absoluteTop;\n        }\n    }\n    return topsByInstanceId;\n}\n\nvar Table = /** @class */ (function (_super) {\n    __extends(Table, _super);\n    function Table() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.splitBusinessHourSegs = memoize(splitSegsByRow);\n        _this.splitBgEventSegs = memoize(splitSegsByRow);\n        _this.splitFgEventSegs = memoize(splitSegsByRow);\n        _this.splitDateSelectionSegs = memoize(splitSegsByRow);\n        _this.splitEventDrag = memoize(splitInteractionByRow);\n        _this.splitEventResize = memoize(splitInteractionByRow);\n        _this.rowRefs = new RefMap();\n        _this.handleRootEl = function (rootEl) {\n            _this.rootEl = rootEl;\n            if (rootEl) {\n                _this.context.registerInteractiveComponent(_this, {\n                    el: rootEl,\n                    isHitComboAllowed: _this.props.isHitComboAllowed,\n                });\n            }\n            else {\n                _this.context.unregisterInteractiveComponent(_this);\n            }\n        };\n        return _this;\n    }\n    Table.prototype.render = function () {\n        var _this = this;\n        var props = this.props;\n        var dateProfile = props.dateProfile, dayMaxEventRows = props.dayMaxEventRows, dayMaxEvents = props.dayMaxEvents, expandRows = props.expandRows;\n        var rowCnt = props.cells.length;\n        var businessHourSegsByRow = this.splitBusinessHourSegs(props.businessHourSegs, rowCnt);\n        var bgEventSegsByRow = this.splitBgEventSegs(props.bgEventSegs, rowCnt);\n        var fgEventSegsByRow = this.splitFgEventSegs(props.fgEventSegs, rowCnt);\n        var dateSelectionSegsByRow = this.splitDateSelectionSegs(props.dateSelectionSegs, rowCnt);\n        var eventDragByRow = this.splitEventDrag(props.eventDrag, rowCnt);\n        var eventResizeByRow = this.splitEventResize(props.eventResize, rowCnt);\n        var limitViaBalanced = dayMaxEvents === true || dayMaxEventRows === true;\n        // if rows can't expand to fill fixed height, can't do balanced-height event limit\n        // TODO: best place to normalize these options?\n        if (limitViaBalanced && !expandRows) {\n            limitViaBalanced = false;\n            dayMaxEventRows = null;\n            dayMaxEvents = null;\n        }\n        var classNames = [\n            'fc-daygrid-body',\n            limitViaBalanced ? 'fc-daygrid-body-balanced' : 'fc-daygrid-body-unbalanced',\n            expandRows ? '' : 'fc-daygrid-body-natural', // will height of one row depend on the others?\n        ];\n        return (createElement(\"div\", { className: classNames.join(' '), ref: this.handleRootEl, style: {\n                // these props are important to give this wrapper correct dimensions for interactions\n                // TODO: if we set it here, can we avoid giving to inner tables?\n                width: props.clientWidth,\n                minWidth: props.tableMinWidth,\n            } },\n            createElement(NowTimer, { unit: \"day\" }, function (nowDate, todayRange) { return (createElement(Fragment, null,\n                createElement(\"table\", { role: \"presentation\", className: \"fc-scrollgrid-sync-table\", style: {\n                        width: props.clientWidth,\n                        minWidth: props.tableMinWidth,\n                        height: expandRows ? props.clientHeight : '',\n                    } },\n                    props.colGroupNode,\n                    createElement(\"tbody\", { role: \"presentation\" }, props.cells.map(function (cells, row) { return (createElement(TableRow, { ref: _this.rowRefs.createRef(row), key: cells.length\n                            ? cells[0].date.toISOString() /* best? or put key on cell? or use diff formatter? */\n                            : row // in case there are no cells (like when resource view is loading)\n                        , showDayNumbers: rowCnt > 1, showWeekNumbers: props.showWeekNumbers, todayRange: todayRange, dateProfile: dateProfile, cells: cells, renderIntro: props.renderRowIntro, businessHourSegs: businessHourSegsByRow[row], eventSelection: props.eventSelection, bgEventSegs: bgEventSegsByRow[row].filter(isSegAllDay) /* hack */, fgEventSegs: fgEventSegsByRow[row], dateSelectionSegs: dateSelectionSegsByRow[row], eventDrag: eventDragByRow[row], eventResize: eventResizeByRow[row], dayMaxEvents: dayMaxEvents, dayMaxEventRows: dayMaxEventRows, clientWidth: props.clientWidth, clientHeight: props.clientHeight, forPrint: props.forPrint })); }))))); })));\n    };\n    // Hit System\n    // ----------------------------------------------------------------------------------------------------\n    Table.prototype.prepareHits = function () {\n        this.rowPositions = new PositionCache(this.rootEl, this.rowRefs.collect().map(function (rowObj) { return rowObj.getCellEls()[0]; }), // first cell el in each row. TODO: not optimal\n        false, true);\n        this.colPositions = new PositionCache(this.rootEl, this.rowRefs.currentMap[0].getCellEls(), // cell els in first row\n        true, // horizontal\n        false);\n    };\n    Table.prototype.queryHit = function (positionLeft, positionTop) {\n        var _a = this, colPositions = _a.colPositions, rowPositions = _a.rowPositions;\n        var col = colPositions.leftToIndex(positionLeft);\n        var row = rowPositions.topToIndex(positionTop);\n        if (row != null && col != null) {\n            var cell = this.props.cells[row][col];\n            return {\n                dateProfile: this.props.dateProfile,\n                dateSpan: __assign({ range: this.getCellRange(row, col), allDay: true }, cell.extraDateSpan),\n                dayEl: this.getCellEl(row, col),\n                rect: {\n                    left: colPositions.lefts[col],\n                    right: colPositions.rights[col],\n                    top: rowPositions.tops[row],\n                    bottom: rowPositions.bottoms[row],\n                },\n                layer: 0,\n            };\n        }\n        return null;\n    };\n    Table.prototype.getCellEl = function (row, col) {\n        return this.rowRefs.currentMap[row].getCellEls()[col]; // TODO: not optimal\n    };\n    Table.prototype.getCellRange = function (row, col) {\n        var start = this.props.cells[row][col].date;\n        var end = addDays(start, 1);\n        return { start: start, end: end };\n    };\n    return Table;\n}(DateComponent));\nfunction isSegAllDay(seg) {\n    return seg.eventRange.def.allDay;\n}\n\nvar DayTableSlicer = /** @class */ (function (_super) {\n    __extends(DayTableSlicer, _super);\n    function DayTableSlicer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.forceDayIfListItem = true;\n        return _this;\n    }\n    DayTableSlicer.prototype.sliceRange = function (dateRange, dayTableModel) {\n        return dayTableModel.sliceRange(dateRange);\n    };\n    return DayTableSlicer;\n}(Slicer));\n\nvar DayTable = /** @class */ (function (_super) {\n    __extends(DayTable, _super);\n    function DayTable() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.slicer = new DayTableSlicer();\n        _this.tableRef = createRef();\n        return _this;\n    }\n    DayTable.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        return (createElement(Table, __assign({ ref: this.tableRef }, this.slicer.sliceProps(props, props.dateProfile, props.nextDayThreshold, context, props.dayTableModel), { dateProfile: props.dateProfile, cells: props.dayTableModel.cells, colGroupNode: props.colGroupNode, tableMinWidth: props.tableMinWidth, renderRowIntro: props.renderRowIntro, dayMaxEvents: props.dayMaxEvents, dayMaxEventRows: props.dayMaxEventRows, showWeekNumbers: props.showWeekNumbers, expandRows: props.expandRows, headerAlignElRef: props.headerAlignElRef, clientWidth: props.clientWidth, clientHeight: props.clientHeight, forPrint: props.forPrint })));\n    };\n    return DayTable;\n}(DateComponent));\n\nvar DayTableView = /** @class */ (function (_super) {\n    __extends(DayTableView, _super);\n    function DayTableView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buildDayTableModel = memoize(buildDayTableModel);\n        _this.headerRef = createRef();\n        _this.tableRef = createRef();\n        return _this;\n    }\n    DayTableView.prototype.render = function () {\n        var _this = this;\n        var _a = this.context, options = _a.options, dateProfileGenerator = _a.dateProfileGenerator;\n        var props = this.props;\n        var dayTableModel = this.buildDayTableModel(props.dateProfile, dateProfileGenerator);\n        var headerContent = options.dayHeaders && (createElement(DayHeader, { ref: this.headerRef, dateProfile: props.dateProfile, dates: dayTableModel.headerDates, datesRepDistinctDays: dayTableModel.rowCnt === 1 }));\n        var bodyContent = function (contentArg) { return (createElement(DayTable, { ref: _this.tableRef, dateProfile: props.dateProfile, dayTableModel: dayTableModel, businessHours: props.businessHours, dateSelection: props.dateSelection, eventStore: props.eventStore, eventUiBases: props.eventUiBases, eventSelection: props.eventSelection, eventDrag: props.eventDrag, eventResize: props.eventResize, nextDayThreshold: options.nextDayThreshold, colGroupNode: contentArg.tableColGroupNode, tableMinWidth: contentArg.tableMinWidth, dayMaxEvents: options.dayMaxEvents, dayMaxEventRows: options.dayMaxEventRows, showWeekNumbers: options.weekNumbers, expandRows: !props.isHeightAuto, headerAlignElRef: _this.headerElRef, clientWidth: contentArg.clientWidth, clientHeight: contentArg.clientHeight, forPrint: props.forPrint })); };\n        return options.dayMinWidth\n            ? this.renderHScrollLayout(headerContent, bodyContent, dayTableModel.colCnt, options.dayMinWidth)\n            : this.renderSimpleLayout(headerContent, bodyContent);\n    };\n    return DayTableView;\n}(TableView));\nfunction buildDayTableModel(dateProfile, dateProfileGenerator) {\n    var daySeries = new DaySeriesModel(dateProfile.renderRange, dateProfileGenerator);\n    return new DayTableModel(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n}\n\nvar TableDateProfileGenerator = /** @class */ (function (_super) {\n    __extends(TableDateProfileGenerator, _super);\n    function TableDateProfileGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    // Computes the date range that will be rendered.\n    TableDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n        var dateEnv = this.props.dateEnv;\n        var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n        var start = renderRange.start;\n        var end = renderRange.end;\n        var endOfWeek;\n        // year and month views should be aligned with weeks. this is already done for week\n        if (/^(year|month)$/.test(currentRangeUnit)) {\n            start = dateEnv.startOfWeek(start);\n            // make end-of-week if not already\n            endOfWeek = dateEnv.startOfWeek(end);\n            if (endOfWeek.valueOf() !== end.valueOf()) {\n                end = addWeeks(endOfWeek, 1);\n            }\n        }\n        // ensure 6 weeks\n        if (this.props.monthMode &&\n            this.props.fixedWeekCount) {\n            var rowCnt = Math.ceil(// could be partial weeks due to hiddenDays\n            diffWeeks(start, end));\n            end = addWeeks(end, 6 - rowCnt);\n        }\n        return { start: start, end: end };\n    };\n    return TableDateProfileGenerator;\n}(DateProfileGenerator));\n\nvar main = createPlugin({\n    initialView: 'dayGridMonth',\n    views: {\n        dayGrid: {\n            component: DayTableView,\n            dateProfileGeneratorClass: TableDateProfileGenerator,\n        },\n        dayGridDay: {\n            type: 'dayGrid',\n            duration: { days: 1 },\n        },\n        dayGridWeek: {\n            type: 'dayGrid',\n            duration: { weeks: 1 },\n        },\n        dayGridMonth: {\n            type: 'dayGrid',\n            duration: { months: 1 },\n            monthMode: true,\n            fixedWeekCount: true,\n        },\n    },\n});\n\nexport default main;\nexport { DayTableView as DayGridView, DayTable, DayTableSlicer, Table, TableView, buildDayTableModel };\n//# sourceMappingURL=main.js.map\n","/*!\nFullCalendar v5.10.2\nDocs & License: https://fullcalendar.io/\n(c) 2021 Adam Shaw\n*/\nimport './main.css';\n\nimport { hasBgRendering, Splitter, createFormatter, createElement, ViewContextType, RenderHook, BaseComponent, createRef, diffDays, buildNavLinkAttrs, WeekNumberRoot, getStickyHeaderDates, ViewRoot, SimpleScrollGrid, getStickyFooterScrollbar, NowTimer, NowIndicatorRoot, renderScrollShim, DateComponent, rangeContainsMarker, startOfDay, asRoughMs, createDuration, RefMap, PositionCache, MoreLinkRoot, setRef, SegHierarchy, groupIntersectingEntries, buildEntryKey, binarySearch, getEntrySpanEnd, StandardEvent, DayCellContent, Fragment, getSegMeta, memoize, sortEventSegs, DayCellRoot, buildIsoString, computeEarliestSegStart, buildEventRangeKey, BgEvent, renderFill, addDurations, multiplyDuration, wholeDivideDurations, intersectRanges, Slicer, formatIsoTimeString, DayHeader, DaySeriesModel, DayTableModel, createPlugin } from '@fullcalendar/common';\nimport { __extends, __assign } from 'tslib';\nimport { DayTable } from '@fullcalendar/daygrid';\n\nvar AllDaySplitter = /** @class */ (function (_super) {\n    __extends(AllDaySplitter, _super);\n    function AllDaySplitter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AllDaySplitter.prototype.getKeyInfo = function () {\n        return {\n            allDay: {},\n            timed: {},\n        };\n    };\n    AllDaySplitter.prototype.getKeysForDateSpan = function (dateSpan) {\n        if (dateSpan.allDay) {\n            return ['allDay'];\n        }\n        return ['timed'];\n    };\n    AllDaySplitter.prototype.getKeysForEventDef = function (eventDef) {\n        if (!eventDef.allDay) {\n            return ['timed'];\n        }\n        if (hasBgRendering(eventDef)) {\n            return ['timed', 'allDay'];\n        }\n        return ['allDay'];\n    };\n    return AllDaySplitter;\n}(Splitter));\n\nvar DEFAULT_SLAT_LABEL_FORMAT = createFormatter({\n    hour: 'numeric',\n    minute: '2-digit',\n    omitZeroMinute: true,\n    meridiem: 'short',\n});\nfunction TimeColsAxisCell(props) {\n    var classNames = [\n        'fc-timegrid-slot',\n        'fc-timegrid-slot-label',\n        props.isLabeled ? 'fc-scrollgrid-shrink' : 'fc-timegrid-slot-minor',\n    ];\n    return (createElement(ViewContextType.Consumer, null, function (context) {\n        if (!props.isLabeled) {\n            return (createElement(\"td\", { className: classNames.join(' '), \"data-time\": props.isoTimeStr }));\n        }\n        var dateEnv = context.dateEnv, options = context.options, viewApi = context.viewApi;\n        var labelFormat = // TODO: fully pre-parse\n         options.slotLabelFormat == null ? DEFAULT_SLAT_LABEL_FORMAT :\n            Array.isArray(options.slotLabelFormat) ? createFormatter(options.slotLabelFormat[0]) :\n                createFormatter(options.slotLabelFormat);\n        var hookProps = {\n            level: 0,\n            time: props.time,\n            date: dateEnv.toDate(props.date),\n            view: viewApi,\n            text: dateEnv.format(props.date, labelFormat),\n        };\n        return (createElement(RenderHook, { hookProps: hookProps, classNames: options.slotLabelClassNames, content: options.slotLabelContent, defaultContent: renderInnerContent, didMount: options.slotLabelDidMount, willUnmount: options.slotLabelWillUnmount }, function (rootElRef, customClassNames, innerElRef, innerContent) { return (createElement(\"td\", { ref: rootElRef, className: classNames.concat(customClassNames).join(' '), \"data-time\": props.isoTimeStr },\n            createElement(\"div\", { className: \"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame\" },\n                createElement(\"div\", { className: \"fc-timegrid-slot-label-cushion fc-scrollgrid-shrink-cushion\", ref: innerElRef }, innerContent)))); }));\n    }));\n}\nfunction renderInnerContent(props) {\n    return props.text;\n}\n\nvar TimeBodyAxis = /** @class */ (function (_super) {\n    __extends(TimeBodyAxis, _super);\n    function TimeBodyAxis() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TimeBodyAxis.prototype.render = function () {\n        return this.props.slatMetas.map(function (slatMeta) { return (createElement(\"tr\", { key: slatMeta.key },\n            createElement(TimeColsAxisCell, __assign({}, slatMeta)))); });\n    };\n    return TimeBodyAxis;\n}(BaseComponent));\n\nvar DEFAULT_WEEK_NUM_FORMAT = createFormatter({ week: 'short' });\nvar AUTO_ALL_DAY_MAX_EVENT_ROWS = 5;\nvar TimeColsView = /** @class */ (function (_super) {\n    __extends(TimeColsView, _super);\n    function TimeColsView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.allDaySplitter = new AllDaySplitter(); // for use by subclasses\n        _this.headerElRef = createRef();\n        _this.rootElRef = createRef();\n        _this.scrollerElRef = createRef();\n        _this.state = {\n            slatCoords: null,\n        };\n        _this.handleScrollTopRequest = function (scrollTop) {\n            var scrollerEl = _this.scrollerElRef.current;\n            if (scrollerEl) { // TODO: not sure how this could ever be null. weirdness with the reducer\n                scrollerEl.scrollTop = scrollTop;\n            }\n        };\n        /* Header Render Methods\n        ------------------------------------------------------------------------------------------------------------------*/\n        _this.renderHeadAxis = function (rowKey, frameHeight) {\n            if (frameHeight === void 0) { frameHeight = ''; }\n            var options = _this.context.options;\n            var dateProfile = _this.props.dateProfile;\n            var range = dateProfile.renderRange;\n            var dayCnt = diffDays(range.start, range.end);\n            var navLinkAttrs = (dayCnt === 1) // only do in day views (to avoid doing in week views that dont need it)\n                ? buildNavLinkAttrs(_this.context, range.start, 'week')\n                : {};\n            if (options.weekNumbers && rowKey === 'day') {\n                return (createElement(WeekNumberRoot, { date: range.start, defaultFormat: DEFAULT_WEEK_NUM_FORMAT }, function (rootElRef, classNames, innerElRef, innerContent) { return (createElement(\"th\", { ref: rootElRef, \"aria-hidden\": true, className: [\n                        'fc-timegrid-axis',\n                        'fc-scrollgrid-shrink',\n                    ].concat(classNames).join(' ') },\n                    createElement(\"div\", { className: \"fc-timegrid-axis-frame fc-scrollgrid-shrink-frame fc-timegrid-axis-frame-liquid\", style: { height: frameHeight } },\n                        createElement(\"a\", __assign({ ref: innerElRef, className: \"fc-timegrid-axis-cushion fc-scrollgrid-shrink-cushion fc-scrollgrid-sync-inner\" }, navLinkAttrs), innerContent)))); }));\n            }\n            return (createElement(\"th\", { \"aria-hidden\": true, className: \"fc-timegrid-axis\" },\n                createElement(\"div\", { className: \"fc-timegrid-axis-frame\", style: { height: frameHeight } })));\n        };\n        /* Table Component Render Methods\n        ------------------------------------------------------------------------------------------------------------------*/\n        // only a one-way height sync. we don't send the axis inner-content height to the DayGrid,\n        // but DayGrid still needs to have classNames on inner elements in order to measure.\n        _this.renderTableRowAxis = function (rowHeight) {\n            var _a = _this.context, options = _a.options, viewApi = _a.viewApi;\n            var hookProps = {\n                text: options.allDayText,\n                view: viewApi,\n            };\n            return (\n            // TODO: make reusable hook. used in list view too\n            createElement(RenderHook, { hookProps: hookProps, classNames: options.allDayClassNames, content: options.allDayContent, defaultContent: renderAllDayInner, didMount: options.allDayDidMount, willUnmount: options.allDayWillUnmount }, function (rootElRef, classNames, innerElRef, innerContent) { return (createElement(\"td\", { ref: rootElRef, \"aria-hidden\": true, className: [\n                    'fc-timegrid-axis',\n                    'fc-scrollgrid-shrink',\n                ].concat(classNames).join(' ') },\n                createElement(\"div\", { className: 'fc-timegrid-axis-frame fc-scrollgrid-shrink-frame' + (rowHeight == null ? ' fc-timegrid-axis-frame-liquid' : ''), style: { height: rowHeight } },\n                    createElement(\"span\", { className: \"fc-timegrid-axis-cushion fc-scrollgrid-shrink-cushion fc-scrollgrid-sync-inner\", ref: innerElRef }, innerContent)))); }));\n        };\n        _this.handleSlatCoords = function (slatCoords) {\n            _this.setState({ slatCoords: slatCoords });\n        };\n        return _this;\n    }\n    // rendering\n    // ----------------------------------------------------------------------------------------------------\n    TimeColsView.prototype.renderSimpleLayout = function (headerRowContent, allDayContent, timeContent) {\n        var _a = this, context = _a.context, props = _a.props;\n        var sections = [];\n        var stickyHeaderDates = getStickyHeaderDates(context.options);\n        if (headerRowContent) {\n            sections.push({\n                type: 'header',\n                key: 'header',\n                isSticky: stickyHeaderDates,\n                chunk: {\n                    elRef: this.headerElRef,\n                    tableClassName: 'fc-col-header',\n                    rowContent: headerRowContent,\n                },\n            });\n        }\n        if (allDayContent) {\n            sections.push({\n                type: 'body',\n                key: 'all-day',\n                chunk: { content: allDayContent },\n            });\n            sections.push({\n                type: 'body',\n                key: 'all-day-divider',\n                outerContent: ( // TODO: rename to cellContent so don't need to define <tr>?\n                createElement(\"tr\", { role: \"presentation\", className: \"fc-scrollgrid-section\" },\n                    createElement(\"td\", { className: 'fc-timegrid-divider ' + context.theme.getClass('tableCellShaded') }))),\n            });\n        }\n        sections.push({\n            type: 'body',\n            key: 'body',\n            liquid: true,\n            expandRows: Boolean(context.options.expandRows),\n            chunk: {\n                scrollerElRef: this.scrollerElRef,\n                content: timeContent,\n            },\n        });\n        return (createElement(ViewRoot, { viewSpec: context.viewSpec, elRef: this.rootElRef }, function (rootElRef, classNames) { return (createElement(\"div\", { className: ['fc-timegrid'].concat(classNames).join(' '), ref: rootElRef },\n            createElement(SimpleScrollGrid, { liquid: !props.isHeightAuto && !props.forPrint, collapsibleWidth: props.forPrint, cols: [{ width: 'shrink' }], sections: sections }))); }));\n    };\n    TimeColsView.prototype.renderHScrollLayout = function (headerRowContent, allDayContent, timeContent, colCnt, dayMinWidth, slatMetas, slatCoords) {\n        var _this = this;\n        var ScrollGrid = this.context.pluginHooks.scrollGridImpl;\n        if (!ScrollGrid) {\n            throw new Error('No ScrollGrid implementation');\n        }\n        var _a = this, context = _a.context, props = _a.props;\n        var stickyHeaderDates = !props.forPrint && getStickyHeaderDates(context.options);\n        var stickyFooterScrollbar = !props.forPrint && getStickyFooterScrollbar(context.options);\n        var sections = [];\n        if (headerRowContent) {\n            sections.push({\n                type: 'header',\n                key: 'header',\n                isSticky: stickyHeaderDates,\n                syncRowHeights: true,\n                chunks: [\n                    {\n                        key: 'axis',\n                        rowContent: function (arg) { return (createElement(\"tr\", { role: \"presentation\" }, _this.renderHeadAxis('day', arg.rowSyncHeights[0]))); },\n                    },\n                    {\n                        key: 'cols',\n                        elRef: this.headerElRef,\n                        tableClassName: 'fc-col-header',\n                        rowContent: headerRowContent,\n                    },\n                ],\n            });\n        }\n        if (allDayContent) {\n            sections.push({\n                type: 'body',\n                key: 'all-day',\n                syncRowHeights: true,\n                chunks: [\n                    {\n                        key: 'axis',\n                        rowContent: function (contentArg) { return (createElement(\"tr\", { role: \"presentation\" }, _this.renderTableRowAxis(contentArg.rowSyncHeights[0]))); },\n                    },\n                    {\n                        key: 'cols',\n                        content: allDayContent,\n                    },\n                ],\n            });\n            sections.push({\n                key: 'all-day-divider',\n                type: 'body',\n                outerContent: ( // TODO: rename to cellContent so don't need to define <tr>?\n                createElement(\"tr\", { role: \"presentation\", className: \"fc-scrollgrid-section\" },\n                    createElement(\"td\", { colSpan: 2, className: 'fc-timegrid-divider ' + context.theme.getClass('tableCellShaded') }))),\n            });\n        }\n        var isNowIndicator = context.options.nowIndicator;\n        sections.push({\n            type: 'body',\n            key: 'body',\n            liquid: true,\n            expandRows: Boolean(context.options.expandRows),\n            chunks: [\n                {\n                    key: 'axis',\n                    content: function (arg) { return (\n                    // TODO: make this now-indicator arrow more DRY with TimeColsContent\n                    createElement(\"div\", { className: \"fc-timegrid-axis-chunk\" },\n                        createElement(\"table\", { \"aria-hidden\": true, style: { height: arg.expandRows ? arg.clientHeight : '' } },\n                            arg.tableColGroupNode,\n                            createElement(\"tbody\", null,\n                                createElement(TimeBodyAxis, { slatMetas: slatMetas }))),\n                        createElement(\"div\", { className: \"fc-timegrid-now-indicator-container\" },\n                            createElement(NowTimer, { unit: isNowIndicator ? 'minute' : 'day' /* hacky */ }, function (nowDate) {\n                                var nowIndicatorTop = isNowIndicator &&\n                                    slatCoords &&\n                                    slatCoords.safeComputeTop(nowDate); // might return void\n                                if (typeof nowIndicatorTop === 'number') {\n                                    return (createElement(NowIndicatorRoot, { isAxis: true, date: nowDate }, function (rootElRef, classNames, innerElRef, innerContent) { return (createElement(\"div\", { ref: rootElRef, className: ['fc-timegrid-now-indicator-arrow'].concat(classNames).join(' '), style: { top: nowIndicatorTop } }, innerContent)); }));\n                                }\n                                return null;\n                            })))); },\n                },\n                {\n                    key: 'cols',\n                    scrollerElRef: this.scrollerElRef,\n                    content: timeContent,\n                },\n            ],\n        });\n        if (stickyFooterScrollbar) {\n            sections.push({\n                key: 'footer',\n                type: 'footer',\n                isSticky: true,\n                chunks: [\n                    {\n                        key: 'axis',\n                        content: renderScrollShim,\n                    },\n                    {\n                        key: 'cols',\n                        content: renderScrollShim,\n                    },\n                ],\n            });\n        }\n        return (createElement(ViewRoot, { viewSpec: context.viewSpec, elRef: this.rootElRef }, function (rootElRef, classNames) { return (createElement(\"div\", { className: ['fc-timegrid'].concat(classNames).join(' '), ref: rootElRef },\n            createElement(ScrollGrid, { liquid: !props.isHeightAuto && !props.forPrint, collapsibleWidth: false, colGroups: [\n                    { width: 'shrink', cols: [{ width: 'shrink' }] },\n                    { cols: [{ span: colCnt, minWidth: dayMinWidth }] },\n                ], sections: sections }))); }));\n    };\n    /* Dimensions\n    ------------------------------------------------------------------------------------------------------------------*/\n    TimeColsView.prototype.getAllDayMaxEventProps = function () {\n        var _a = this.context.options, dayMaxEvents = _a.dayMaxEvents, dayMaxEventRows = _a.dayMaxEventRows;\n        if (dayMaxEvents === true || dayMaxEventRows === true) { // is auto?\n            dayMaxEvents = undefined;\n            dayMaxEventRows = AUTO_ALL_DAY_MAX_EVENT_ROWS; // make sure \"auto\" goes to a real number\n        }\n        return { dayMaxEvents: dayMaxEvents, dayMaxEventRows: dayMaxEventRows };\n    };\n    return TimeColsView;\n}(DateComponent));\nfunction renderAllDayInner(hookProps) {\n    return hookProps.text;\n}\n\nvar TimeColsSlatsCoords = /** @class */ (function () {\n    function TimeColsSlatsCoords(positions, dateProfile, slotDuration) {\n        this.positions = positions;\n        this.dateProfile = dateProfile;\n        this.slotDuration = slotDuration;\n    }\n    TimeColsSlatsCoords.prototype.safeComputeTop = function (date) {\n        var dateProfile = this.dateProfile;\n        if (rangeContainsMarker(dateProfile.currentRange, date)) {\n            var startOfDayDate = startOfDay(date);\n            var timeMs = date.valueOf() - startOfDayDate.valueOf();\n            if (timeMs >= asRoughMs(dateProfile.slotMinTime) &&\n                timeMs < asRoughMs(dateProfile.slotMaxTime)) {\n                return this.computeTimeTop(createDuration(timeMs));\n            }\n        }\n        return null;\n    };\n    // Computes the top coordinate, relative to the bounds of the grid, of the given date.\n    // A `startOfDayDate` must be given for avoiding ambiguity over how to treat midnight.\n    TimeColsSlatsCoords.prototype.computeDateTop = function (when, startOfDayDate) {\n        if (!startOfDayDate) {\n            startOfDayDate = startOfDay(when);\n        }\n        return this.computeTimeTop(createDuration(when.valueOf() - startOfDayDate.valueOf()));\n    };\n    // Computes the top coordinate, relative to the bounds of the grid, of the given time (a Duration).\n    // This is a makeshify way to compute the time-top. Assumes all slatMetas dates are uniform.\n    // Eventually allow computation with arbirary slat dates.\n    TimeColsSlatsCoords.prototype.computeTimeTop = function (duration) {\n        var _a = this, positions = _a.positions, dateProfile = _a.dateProfile;\n        var len = positions.els.length;\n        // floating-point value of # of slots covered\n        var slatCoverage = (duration.milliseconds - asRoughMs(dateProfile.slotMinTime)) / asRoughMs(this.slotDuration);\n        var slatIndex;\n        var slatRemainder;\n        // compute a floating-point number for how many slats should be progressed through.\n        // from 0 to number of slats (inclusive)\n        // constrained because slotMinTime/slotMaxTime might be customized.\n        slatCoverage = Math.max(0, slatCoverage);\n        slatCoverage = Math.min(len, slatCoverage);\n        // an integer index of the furthest whole slat\n        // from 0 to number slats (*exclusive*, so len-1)\n        slatIndex = Math.floor(slatCoverage);\n        slatIndex = Math.min(slatIndex, len - 1);\n        // how much further through the slatIndex slat (from 0.0-1.0) must be covered in addition.\n        // could be 1.0 if slatCoverage is covering *all* the slots\n        slatRemainder = slatCoverage - slatIndex;\n        return positions.tops[slatIndex] +\n            positions.getHeight(slatIndex) * slatRemainder;\n    };\n    return TimeColsSlatsCoords;\n}());\n\nvar TimeColsSlatsBody = /** @class */ (function (_super) {\n    __extends(TimeColsSlatsBody, _super);\n    function TimeColsSlatsBody() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TimeColsSlatsBody.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        var options = context.options;\n        var slatElRefs = props.slatElRefs;\n        return (createElement(\"tbody\", null, props.slatMetas.map(function (slatMeta, i) {\n            var hookProps = {\n                time: slatMeta.time,\n                date: context.dateEnv.toDate(slatMeta.date),\n                view: context.viewApi,\n            };\n            var classNames = [\n                'fc-timegrid-slot',\n                'fc-timegrid-slot-lane',\n                slatMeta.isLabeled ? '' : 'fc-timegrid-slot-minor',\n            ];\n            return (createElement(\"tr\", { key: slatMeta.key, ref: slatElRefs.createRef(slatMeta.key) },\n                props.axis && (createElement(TimeColsAxisCell, __assign({}, slatMeta))),\n                createElement(RenderHook, { hookProps: hookProps, classNames: options.slotLaneClassNames, content: options.slotLaneContent, didMount: options.slotLaneDidMount, willUnmount: options.slotLaneWillUnmount }, function (rootElRef, customClassNames, innerElRef, innerContent) { return (createElement(\"td\", { ref: rootElRef, className: classNames.concat(customClassNames).join(' '), \"data-time\": slatMeta.isoTimeStr }, innerContent)); })));\n        })));\n    };\n    return TimeColsSlatsBody;\n}(BaseComponent));\n\n/*\nfor the horizontal \"slats\" that run width-wise. Has a time axis on a side. Depends on RTL.\n*/\nvar TimeColsSlats = /** @class */ (function (_super) {\n    __extends(TimeColsSlats, _super);\n    function TimeColsSlats() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.rootElRef = createRef();\n        _this.slatElRefs = new RefMap();\n        return _this;\n    }\n    TimeColsSlats.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        return (createElement(\"div\", { ref: this.rootElRef, className: \"fc-timegrid-slots\" },\n            createElement(\"table\", { \"aria-hidden\": true, className: context.theme.getClass('table'), style: {\n                    minWidth: props.tableMinWidth,\n                    width: props.clientWidth,\n                    height: props.minHeight,\n                } },\n                props.tableColGroupNode /* relies on there only being a single <col> for the axis */,\n                createElement(TimeColsSlatsBody, { slatElRefs: this.slatElRefs, axis: props.axis, slatMetas: props.slatMetas }))));\n    };\n    TimeColsSlats.prototype.componentDidMount = function () {\n        this.updateSizing();\n    };\n    TimeColsSlats.prototype.componentDidUpdate = function () {\n        this.updateSizing();\n    };\n    TimeColsSlats.prototype.componentWillUnmount = function () {\n        if (this.props.onCoords) {\n            this.props.onCoords(null);\n        }\n    };\n    TimeColsSlats.prototype.updateSizing = function () {\n        var _a = this, context = _a.context, props = _a.props;\n        if (props.onCoords &&\n            props.clientWidth !== null // means sizing has stabilized\n        ) {\n            var rootEl = this.rootElRef.current;\n            if (rootEl.offsetHeight) { // not hidden by css\n                props.onCoords(new TimeColsSlatsCoords(new PositionCache(this.rootElRef.current, collectSlatEls(this.slatElRefs.currentMap, props.slatMetas), false, true), this.props.dateProfile, context.options.slotDuration));\n            }\n        }\n    };\n    return TimeColsSlats;\n}(BaseComponent));\nfunction collectSlatEls(elMap, slatMetas) {\n    return slatMetas.map(function (slatMeta) { return elMap[slatMeta.key]; });\n}\n\nfunction splitSegsByCol(segs, colCnt) {\n    var segsByCol = [];\n    var i;\n    for (i = 0; i < colCnt; i += 1) {\n        segsByCol.push([]);\n    }\n    if (segs) {\n        for (i = 0; i < segs.length; i += 1) {\n            segsByCol[segs[i].col].push(segs[i]);\n        }\n    }\n    return segsByCol;\n}\nfunction splitInteractionByCol(ui, colCnt) {\n    var byRow = [];\n    if (!ui) {\n        for (var i = 0; i < colCnt; i += 1) {\n            byRow[i] = null;\n        }\n    }\n    else {\n        for (var i = 0; i < colCnt; i += 1) {\n            byRow[i] = {\n                affectedInstances: ui.affectedInstances,\n                isEvent: ui.isEvent,\n                segs: [],\n            };\n        }\n        for (var _i = 0, _a = ui.segs; _i < _a.length; _i++) {\n            var seg = _a[_i];\n            byRow[seg.col].segs.push(seg);\n        }\n    }\n    return byRow;\n}\n\nvar TimeColMoreLink = /** @class */ (function (_super) {\n    __extends(TimeColMoreLink, _super);\n    function TimeColMoreLink() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.rootElRef = createRef();\n        return _this;\n    }\n    TimeColMoreLink.prototype.render = function () {\n        var _this = this;\n        var props = this.props;\n        return (createElement(MoreLinkRoot, { allDayDate: null, moreCnt: props.hiddenSegs.length, allSegs: props.hiddenSegs, hiddenSegs: props.hiddenSegs, alignmentElRef: this.rootElRef, defaultContent: renderMoreLinkInner, extraDateSpan: props.extraDateSpan, dateProfile: props.dateProfile, todayRange: props.todayRange, popoverContent: function () { return renderPlainFgSegs(props.hiddenSegs, props); } }, function (rootElRef, classNames, innerElRef, innerContent, handleClick, title, isExpanded, popoverId) { return (createElement(\"a\", { ref: function (el) {\n                setRef(rootElRef, el);\n                setRef(_this.rootElRef, el);\n            }, className: ['fc-timegrid-more-link'].concat(classNames).join(' '), style: { top: props.top, bottom: props.bottom }, onClick: handleClick, title: title, \"aria-expanded\": isExpanded, \"aria-controls\": popoverId },\n            createElement(\"div\", { ref: innerElRef, className: \"fc-timegrid-more-link-inner fc-sticky\" }, innerContent))); }));\n    };\n    return TimeColMoreLink;\n}(BaseComponent));\nfunction renderMoreLinkInner(props) {\n    return props.shortText;\n}\n\n// segInputs assumed sorted\nfunction buildPositioning(segInputs, strictOrder, maxStackCnt) {\n    var hierarchy = new SegHierarchy();\n    if (strictOrder != null) {\n        hierarchy.strictOrder = strictOrder;\n    }\n    if (maxStackCnt != null) {\n        hierarchy.maxStackCnt = maxStackCnt;\n    }\n    var hiddenEntries = hierarchy.addSegs(segInputs);\n    var hiddenGroups = groupIntersectingEntries(hiddenEntries);\n    var web = buildWeb(hierarchy);\n    web = stretchWeb(web, 1); // all levelCoords/thickness will have 0.0-1.0\n    var segRects = webToRects(web);\n    return { segRects: segRects, hiddenGroups: hiddenGroups };\n}\nfunction buildWeb(hierarchy) {\n    var entriesByLevel = hierarchy.entriesByLevel;\n    var buildNode = cacheable(function (level, lateral) { return level + ':' + lateral; }, function (level, lateral) {\n        var siblingRange = findNextLevelSegs(hierarchy, level, lateral);\n        var nextLevelRes = buildNodes(siblingRange, buildNode);\n        var entry = entriesByLevel[level][lateral];\n        return [\n            __assign(__assign({}, entry), { nextLevelNodes: nextLevelRes[0] }),\n            entry.thickness + nextLevelRes[1], // the pressure builds\n        ];\n    });\n    return buildNodes(entriesByLevel.length\n        ? { level: 0, lateralStart: 0, lateralEnd: entriesByLevel[0].length }\n        : null, buildNode)[0];\n}\nfunction buildNodes(siblingRange, buildNode) {\n    if (!siblingRange) {\n        return [[], 0];\n    }\n    var level = siblingRange.level, lateralStart = siblingRange.lateralStart, lateralEnd = siblingRange.lateralEnd;\n    var lateral = lateralStart;\n    var pairs = [];\n    while (lateral < lateralEnd) {\n        pairs.push(buildNode(level, lateral));\n        lateral += 1;\n    }\n    pairs.sort(cmpDescPressures);\n    return [\n        pairs.map(extractNode),\n        pairs[0][1], // first item's pressure\n    ];\n}\nfunction cmpDescPressures(a, b) {\n    return b[1] - a[1];\n}\nfunction extractNode(a) {\n    return a[0];\n}\nfunction findNextLevelSegs(hierarchy, subjectLevel, subjectLateral) {\n    var levelCoords = hierarchy.levelCoords, entriesByLevel = hierarchy.entriesByLevel;\n    var subjectEntry = entriesByLevel[subjectLevel][subjectLateral];\n    var afterSubject = levelCoords[subjectLevel] + subjectEntry.thickness;\n    var levelCnt = levelCoords.length;\n    var level = subjectLevel;\n    // skip past levels that are too high up\n    for (; level < levelCnt && levelCoords[level] < afterSubject; level += 1)\n        ; // do nothing\n    for (; level < levelCnt; level += 1) {\n        var entries = entriesByLevel[level];\n        var entry = void 0;\n        var searchIndex = binarySearch(entries, subjectEntry.span.start, getEntrySpanEnd);\n        var lateralStart = searchIndex[0] + searchIndex[1]; // if exact match (which doesn't collide), go to next one\n        var lateralEnd = lateralStart;\n        while ( // loop through entries that horizontally intersect\n        (entry = entries[lateralEnd]) && // but not past the whole seg list\n            entry.span.start < subjectEntry.span.end) {\n            lateralEnd += 1;\n        }\n        if (lateralStart < lateralEnd) {\n            return { level: level, lateralStart: lateralStart, lateralEnd: lateralEnd };\n        }\n    }\n    return null;\n}\nfunction stretchWeb(topLevelNodes, totalThickness) {\n    var stretchNode = cacheable(function (node, startCoord, prevThickness) { return buildEntryKey(node); }, function (node, startCoord, prevThickness) {\n        var nextLevelNodes = node.nextLevelNodes, thickness = node.thickness;\n        var allThickness = thickness + prevThickness;\n        var thicknessFraction = thickness / allThickness;\n        var endCoord;\n        var newChildren = [];\n        if (!nextLevelNodes.length) {\n            endCoord = totalThickness;\n        }\n        else {\n            for (var _i = 0, nextLevelNodes_1 = nextLevelNodes; _i < nextLevelNodes_1.length; _i++) {\n                var childNode = nextLevelNodes_1[_i];\n                if (endCoord === undefined) {\n                    var res = stretchNode(childNode, startCoord, allThickness);\n                    endCoord = res[0];\n                    newChildren.push(res[1]);\n                }\n                else {\n                    var res = stretchNode(childNode, endCoord, 0);\n                    newChildren.push(res[1]);\n                }\n            }\n        }\n        var newThickness = (endCoord - startCoord) * thicknessFraction;\n        return [endCoord - newThickness, __assign(__assign({}, node), { thickness: newThickness, nextLevelNodes: newChildren })];\n    });\n    return topLevelNodes.map(function (node) { return stretchNode(node, 0, 0)[1]; });\n}\n// not sorted in any particular order\nfunction webToRects(topLevelNodes) {\n    var rects = [];\n    var processNode = cacheable(function (node, levelCoord, stackDepth) { return buildEntryKey(node); }, function (node, levelCoord, stackDepth) {\n        var rect = __assign(__assign({}, node), { levelCoord: levelCoord,\n            stackDepth: stackDepth, stackForward: 0 });\n        rects.push(rect);\n        return (rect.stackForward = processNodes(node.nextLevelNodes, levelCoord + node.thickness, stackDepth + 1) + 1);\n    });\n    function processNodes(nodes, levelCoord, stackDepth) {\n        var stackForward = 0;\n        for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n            var node = nodes_1[_i];\n            stackForward = Math.max(processNode(node, levelCoord, stackDepth), stackForward);\n        }\n        return stackForward;\n    }\n    processNodes(topLevelNodes, 0, 0);\n    return rects; // TODO: sort rects by levelCoord to be consistent with toRects?\n}\n// TODO: move to general util\nfunction cacheable(keyFunc, workFunc) {\n    var cache = {};\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var key = keyFunc.apply(void 0, args);\n        return (key in cache)\n            ? cache[key]\n            : (cache[key] = workFunc.apply(void 0, args));\n    };\n}\n\nfunction computeSegVCoords(segs, colDate, slatCoords, eventMinHeight) {\n    if (slatCoords === void 0) { slatCoords = null; }\n    if (eventMinHeight === void 0) { eventMinHeight = 0; }\n    var vcoords = [];\n    if (slatCoords) {\n        for (var i = 0; i < segs.length; i += 1) {\n            var seg = segs[i];\n            var spanStart = slatCoords.computeDateTop(seg.start, colDate);\n            var spanEnd = Math.max(spanStart + (eventMinHeight || 0), // :(\n            slatCoords.computeDateTop(seg.end, colDate));\n            vcoords.push({\n                start: Math.round(spanStart),\n                end: Math.round(spanEnd), //\n            });\n        }\n    }\n    return vcoords;\n}\nfunction computeFgSegPlacements(segs, segVCoords, // might not have for every seg\neventOrderStrict, eventMaxStack) {\n    var segInputs = [];\n    var dumbSegs = []; // segs without coords\n    for (var i = 0; i < segs.length; i += 1) {\n        var vcoords = segVCoords[i];\n        if (vcoords) {\n            segInputs.push({\n                index: i,\n                thickness: 1,\n                span: vcoords,\n            });\n        }\n        else {\n            dumbSegs.push(segs[i]);\n        }\n    }\n    var _a = buildPositioning(segInputs, eventOrderStrict, eventMaxStack), segRects = _a.segRects, hiddenGroups = _a.hiddenGroups;\n    var segPlacements = [];\n    for (var _i = 0, segRects_1 = segRects; _i < segRects_1.length; _i++) {\n        var segRect = segRects_1[_i];\n        segPlacements.push({\n            seg: segs[segRect.index],\n            rect: segRect,\n        });\n    }\n    for (var _b = 0, dumbSegs_1 = dumbSegs; _b < dumbSegs_1.length; _b++) {\n        var dumbSeg = dumbSegs_1[_b];\n        segPlacements.push({ seg: dumbSeg, rect: null });\n    }\n    return { segPlacements: segPlacements, hiddenGroups: hiddenGroups };\n}\n\nvar DEFAULT_TIME_FORMAT = createFormatter({\n    hour: 'numeric',\n    minute: '2-digit',\n    meridiem: false,\n});\nvar TimeColEvent = /** @class */ (function (_super) {\n    __extends(TimeColEvent, _super);\n    function TimeColEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TimeColEvent.prototype.render = function () {\n        var classNames = [\n            'fc-timegrid-event',\n            'fc-v-event',\n        ];\n        if (this.props.isShort) {\n            classNames.push('fc-timegrid-event-short');\n        }\n        return (createElement(StandardEvent, __assign({}, this.props, { defaultTimeFormat: DEFAULT_TIME_FORMAT, extraClassNames: classNames })));\n    };\n    return TimeColEvent;\n}(BaseComponent));\n\nvar TimeColMisc = /** @class */ (function (_super) {\n    __extends(TimeColMisc, _super);\n    function TimeColMisc() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TimeColMisc.prototype.render = function () {\n        var props = this.props;\n        return (createElement(DayCellContent, { date: props.date, dateProfile: props.dateProfile, todayRange: props.todayRange, extraHookProps: props.extraHookProps }, function (innerElRef, innerContent) { return (innerContent &&\n            createElement(\"div\", { className: \"fc-timegrid-col-misc\", ref: innerElRef }, innerContent)); }));\n    };\n    return TimeColMisc;\n}(BaseComponent));\n\nvar TimeCol = /** @class */ (function (_super) {\n    __extends(TimeCol, _super);\n    function TimeCol() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.sortEventSegs = memoize(sortEventSegs);\n        return _this;\n    }\n    // TODO: memoize event-placement?\n    TimeCol.prototype.render = function () {\n        var _this = this;\n        var _a = this, props = _a.props, context = _a.context;\n        var isSelectMirror = context.options.selectMirror;\n        var mirrorSegs = (props.eventDrag && props.eventDrag.segs) ||\n            (props.eventResize && props.eventResize.segs) ||\n            (isSelectMirror && props.dateSelectionSegs) ||\n            [];\n        var interactionAffectedInstances = // TODO: messy way to compute this\n         (props.eventDrag && props.eventDrag.affectedInstances) ||\n            (props.eventResize && props.eventResize.affectedInstances) ||\n            {};\n        var sortedFgSegs = this.sortEventSegs(props.fgEventSegs, context.options.eventOrder);\n        return (createElement(DayCellRoot, { elRef: props.elRef, date: props.date, dateProfile: props.dateProfile, todayRange: props.todayRange, extraHookProps: props.extraHookProps }, function (rootElRef, classNames, dataAttrs) { return (createElement(\"td\", __assign({ ref: rootElRef, role: \"gridcell\", className: ['fc-timegrid-col'].concat(classNames, props.extraClassNames || []).join(' ') }, dataAttrs, props.extraDataAttrs),\n            createElement(\"div\", { className: \"fc-timegrid-col-frame\" },\n                createElement(\"div\", { className: \"fc-timegrid-col-bg\" },\n                    _this.renderFillSegs(props.businessHourSegs, 'non-business'),\n                    _this.renderFillSegs(props.bgEventSegs, 'bg-event'),\n                    _this.renderFillSegs(props.dateSelectionSegs, 'highlight')),\n                createElement(\"div\", { className: \"fc-timegrid-col-events\" }, _this.renderFgSegs(sortedFgSegs, interactionAffectedInstances, false, false, false)),\n                createElement(\"div\", { className: \"fc-timegrid-col-events\" }, _this.renderFgSegs(mirrorSegs, {}, Boolean(props.eventDrag), Boolean(props.eventResize), Boolean(isSelectMirror))),\n                createElement(\"div\", { className: \"fc-timegrid-now-indicator-container\" }, _this.renderNowIndicator(props.nowIndicatorSegs)),\n                createElement(TimeColMisc, { date: props.date, dateProfile: props.dateProfile, todayRange: props.todayRange, extraHookProps: props.extraHookProps })))); }));\n    };\n    TimeCol.prototype.renderFgSegs = function (sortedFgSegs, segIsInvisible, isDragging, isResizing, isDateSelecting) {\n        var props = this.props;\n        if (props.forPrint) {\n            return renderPlainFgSegs(sortedFgSegs, props);\n        }\n        return this.renderPositionedFgSegs(sortedFgSegs, segIsInvisible, isDragging, isResizing, isDateSelecting);\n    };\n    TimeCol.prototype.renderPositionedFgSegs = function (segs, // if not mirror, needs to be sorted\n    segIsInvisible, isDragging, isResizing, isDateSelecting) {\n        var _this = this;\n        var _a = this.context.options, eventMaxStack = _a.eventMaxStack, eventShortHeight = _a.eventShortHeight, eventOrderStrict = _a.eventOrderStrict, eventMinHeight = _a.eventMinHeight;\n        var _b = this.props, date = _b.date, slatCoords = _b.slatCoords, eventSelection = _b.eventSelection, todayRange = _b.todayRange, nowDate = _b.nowDate;\n        var isMirror = isDragging || isResizing || isDateSelecting;\n        var segVCoords = computeSegVCoords(segs, date, slatCoords, eventMinHeight);\n        var _c = computeFgSegPlacements(segs, segVCoords, eventOrderStrict, eventMaxStack), segPlacements = _c.segPlacements, hiddenGroups = _c.hiddenGroups;\n        return (createElement(Fragment, null,\n            this.renderHiddenGroups(hiddenGroups, segs),\n            segPlacements.map(function (segPlacement) {\n                var seg = segPlacement.seg, rect = segPlacement.rect;\n                var instanceId = seg.eventRange.instance.instanceId;\n                var isVisible = isMirror || Boolean(!segIsInvisible[instanceId] && rect);\n                var vStyle = computeSegVStyle(rect && rect.span);\n                var hStyle = (!isMirror && rect) ? _this.computeSegHStyle(rect) : { left: 0, right: 0 };\n                var isInset = Boolean(rect) && rect.stackForward > 0;\n                var isShort = Boolean(rect) && (rect.span.end - rect.span.start) < eventShortHeight; // look at other places for this problem\n                return (createElement(\"div\", { className: 'fc-timegrid-event-harness' +\n                        (isInset ? ' fc-timegrid-event-harness-inset' : ''), key: instanceId, style: __assign(__assign({ visibility: isVisible ? '' : 'hidden' }, vStyle), hStyle) },\n                    createElement(TimeColEvent, __assign({ seg: seg, isDragging: isDragging, isResizing: isResizing, isDateSelecting: isDateSelecting, isSelected: instanceId === eventSelection, isShort: isShort }, getSegMeta(seg, todayRange, nowDate)))));\n            })));\n    };\n    // will already have eventMinHeight applied because segInputs already had it\n    TimeCol.prototype.renderHiddenGroups = function (hiddenGroups, segs) {\n        var _a = this.props, extraDateSpan = _a.extraDateSpan, dateProfile = _a.dateProfile, todayRange = _a.todayRange, nowDate = _a.nowDate, eventSelection = _a.eventSelection, eventDrag = _a.eventDrag, eventResize = _a.eventResize;\n        return (createElement(Fragment, null, hiddenGroups.map(function (hiddenGroup) {\n            var positionCss = computeSegVStyle(hiddenGroup.span);\n            var hiddenSegs = compileSegsFromEntries(hiddenGroup.entries, segs);\n            return (createElement(TimeColMoreLink, { key: buildIsoString(computeEarliestSegStart(hiddenSegs)), hiddenSegs: hiddenSegs, top: positionCss.top, bottom: positionCss.bottom, extraDateSpan: extraDateSpan, dateProfile: dateProfile, todayRange: todayRange, nowDate: nowDate, eventSelection: eventSelection, eventDrag: eventDrag, eventResize: eventResize }));\n        })));\n    };\n    TimeCol.prototype.renderFillSegs = function (segs, fillType) {\n        var _a = this, props = _a.props, context = _a.context;\n        var segVCoords = computeSegVCoords(segs, props.date, props.slatCoords, context.options.eventMinHeight); // don't assume all populated\n        var children = segVCoords.map(function (vcoords, i) {\n            var seg = segs[i];\n            return (createElement(\"div\", { key: buildEventRangeKey(seg.eventRange), className: \"fc-timegrid-bg-harness\", style: computeSegVStyle(vcoords) }, fillType === 'bg-event' ?\n                createElement(BgEvent, __assign({ seg: seg }, getSegMeta(seg, props.todayRange, props.nowDate))) :\n                renderFill(fillType)));\n        });\n        return createElement(Fragment, null, children);\n    };\n    TimeCol.prototype.renderNowIndicator = function (segs) {\n        var _a = this.props, slatCoords = _a.slatCoords, date = _a.date;\n        if (!slatCoords) {\n            return null;\n        }\n        return segs.map(function (seg, i) { return (createElement(NowIndicatorRoot, { isAxis: false, date: date, \n            // key doesn't matter. will only ever be one\n            key: i }, function (rootElRef, classNames, innerElRef, innerContent) { return (createElement(\"div\", { ref: rootElRef, className: ['fc-timegrid-now-indicator-line'].concat(classNames).join(' '), style: { top: slatCoords.computeDateTop(seg.start, date) } }, innerContent)); })); });\n    };\n    TimeCol.prototype.computeSegHStyle = function (segHCoords) {\n        var _a = this.context, isRtl = _a.isRtl, options = _a.options;\n        var shouldOverlap = options.slotEventOverlap;\n        var nearCoord = segHCoords.levelCoord; // the left side if LTR. the right side if RTL. floating-point\n        var farCoord = segHCoords.levelCoord + segHCoords.thickness; // the right side if LTR. the left side if RTL. floating-point\n        var left; // amount of space from left edge, a fraction of the total width\n        var right; // amount of space from right edge, a fraction of the total width\n        if (shouldOverlap) {\n            // double the width, but don't go beyond the maximum forward coordinate (1.0)\n            farCoord = Math.min(1, nearCoord + (farCoord - nearCoord) * 2);\n        }\n        if (isRtl) {\n            left = 1 - farCoord;\n            right = nearCoord;\n        }\n        else {\n            left = nearCoord;\n            right = 1 - farCoord;\n        }\n        var props = {\n            zIndex: segHCoords.stackDepth + 1,\n            left: left * 100 + '%',\n            right: right * 100 + '%',\n        };\n        if (shouldOverlap && !segHCoords.stackForward) {\n            // add padding to the edge so that forward stacked events don't cover the resizer's icon\n            props[isRtl ? 'marginLeft' : 'marginRight'] = 10 * 2; // 10 is a guesstimate of the icon's width\n        }\n        return props;\n    };\n    return TimeCol;\n}(BaseComponent));\nfunction renderPlainFgSegs(sortedFgSegs, _a) {\n    var todayRange = _a.todayRange, nowDate = _a.nowDate, eventSelection = _a.eventSelection, eventDrag = _a.eventDrag, eventResize = _a.eventResize;\n    var hiddenInstances = (eventDrag ? eventDrag.affectedInstances : null) ||\n        (eventResize ? eventResize.affectedInstances : null) ||\n        {};\n    return (createElement(Fragment, null, sortedFgSegs.map(function (seg) {\n        var instanceId = seg.eventRange.instance.instanceId;\n        return (createElement(\"div\", { key: instanceId, style: { visibility: hiddenInstances[instanceId] ? 'hidden' : '' } },\n            createElement(TimeColEvent, __assign({ seg: seg, isDragging: false, isResizing: false, isDateSelecting: false, isSelected: instanceId === eventSelection, isShort: false }, getSegMeta(seg, todayRange, nowDate)))));\n    })));\n}\nfunction computeSegVStyle(segVCoords) {\n    if (!segVCoords) {\n        return { top: '', bottom: '' };\n    }\n    return {\n        top: segVCoords.start,\n        bottom: -segVCoords.end,\n    };\n}\nfunction compileSegsFromEntries(segEntries, allSegs) {\n    return segEntries.map(function (segEntry) { return allSegs[segEntry.index]; });\n}\n\nvar TimeColsContent = /** @class */ (function (_super) {\n    __extends(TimeColsContent, _super);\n    function TimeColsContent() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.splitFgEventSegs = memoize(splitSegsByCol);\n        _this.splitBgEventSegs = memoize(splitSegsByCol);\n        _this.splitBusinessHourSegs = memoize(splitSegsByCol);\n        _this.splitNowIndicatorSegs = memoize(splitSegsByCol);\n        _this.splitDateSelectionSegs = memoize(splitSegsByCol);\n        _this.splitEventDrag = memoize(splitInteractionByCol);\n        _this.splitEventResize = memoize(splitInteractionByCol);\n        _this.rootElRef = createRef();\n        _this.cellElRefs = new RefMap();\n        return _this;\n    }\n    TimeColsContent.prototype.render = function () {\n        var _this = this;\n        var _a = this, props = _a.props, context = _a.context;\n        var nowIndicatorTop = context.options.nowIndicator &&\n            props.slatCoords &&\n            props.slatCoords.safeComputeTop(props.nowDate); // might return void\n        var colCnt = props.cells.length;\n        var fgEventSegsByRow = this.splitFgEventSegs(props.fgEventSegs, colCnt);\n        var bgEventSegsByRow = this.splitBgEventSegs(props.bgEventSegs, colCnt);\n        var businessHourSegsByRow = this.splitBusinessHourSegs(props.businessHourSegs, colCnt);\n        var nowIndicatorSegsByRow = this.splitNowIndicatorSegs(props.nowIndicatorSegs, colCnt);\n        var dateSelectionSegsByRow = this.splitDateSelectionSegs(props.dateSelectionSegs, colCnt);\n        var eventDragByRow = this.splitEventDrag(props.eventDrag, colCnt);\n        var eventResizeByRow = this.splitEventResize(props.eventResize, colCnt);\n        return (createElement(\"div\", { className: \"fc-timegrid-cols\", ref: this.rootElRef },\n            createElement(\"table\", { role: \"presentation\", style: {\n                    minWidth: props.tableMinWidth,\n                    width: props.clientWidth,\n                } },\n                props.tableColGroupNode,\n                createElement(\"tbody\", { role: \"presentation\" },\n                    createElement(\"tr\", { role: \"row\" },\n                        props.axis && (createElement(\"td\", { \"aria-hidden\": true, className: \"fc-timegrid-col fc-timegrid-axis\" },\n                            createElement(\"div\", { className: \"fc-timegrid-col-frame\" },\n                                createElement(\"div\", { className: \"fc-timegrid-now-indicator-container\" }, typeof nowIndicatorTop === 'number' && (createElement(NowIndicatorRoot, { isAxis: true, date: props.nowDate }, function (rootElRef, classNames, innerElRef, innerContent) { return (createElement(\"div\", { ref: rootElRef, className: ['fc-timegrid-now-indicator-arrow'].concat(classNames).join(' '), style: { top: nowIndicatorTop } }, innerContent)); })))))),\n                        props.cells.map(function (cell, i) { return (createElement(TimeCol, { key: cell.key, elRef: _this.cellElRefs.createRef(cell.key), dateProfile: props.dateProfile, date: cell.date, nowDate: props.nowDate, todayRange: props.todayRange, extraHookProps: cell.extraHookProps, extraDataAttrs: cell.extraDataAttrs, extraClassNames: cell.extraClassNames, extraDateSpan: cell.extraDateSpan, fgEventSegs: fgEventSegsByRow[i], bgEventSegs: bgEventSegsByRow[i], businessHourSegs: businessHourSegsByRow[i], nowIndicatorSegs: nowIndicatorSegsByRow[i], dateSelectionSegs: dateSelectionSegsByRow[i], eventDrag: eventDragByRow[i], eventResize: eventResizeByRow[i], slatCoords: props.slatCoords, eventSelection: props.eventSelection, forPrint: props.forPrint })); }))))));\n    };\n    TimeColsContent.prototype.componentDidMount = function () {\n        this.updateCoords();\n    };\n    TimeColsContent.prototype.componentDidUpdate = function () {\n        this.updateCoords();\n    };\n    TimeColsContent.prototype.updateCoords = function () {\n        var props = this.props;\n        if (props.onColCoords &&\n            props.clientWidth !== null // means sizing has stabilized\n        ) {\n            props.onColCoords(new PositionCache(this.rootElRef.current, collectCellEls(this.cellElRefs.currentMap, props.cells), true, // horizontal\n            false));\n        }\n    };\n    return TimeColsContent;\n}(BaseComponent));\nfunction collectCellEls(elMap, cells) {\n    return cells.map(function (cell) { return elMap[cell.key]; });\n}\n\n/* A component that renders one or more columns of vertical time slots\n----------------------------------------------------------------------------------------------------------------------*/\nvar TimeCols = /** @class */ (function (_super) {\n    __extends(TimeCols, _super);\n    function TimeCols() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.processSlotOptions = memoize(processSlotOptions);\n        _this.state = {\n            slatCoords: null,\n        };\n        _this.handleRootEl = function (el) {\n            if (el) {\n                _this.context.registerInteractiveComponent(_this, {\n                    el: el,\n                    isHitComboAllowed: _this.props.isHitComboAllowed,\n                });\n            }\n            else {\n                _this.context.unregisterInteractiveComponent(_this);\n            }\n        };\n        _this.handleScrollRequest = function (request) {\n            var onScrollTopRequest = _this.props.onScrollTopRequest;\n            var slatCoords = _this.state.slatCoords;\n            if (onScrollTopRequest && slatCoords) {\n                if (request.time) {\n                    var top_1 = slatCoords.computeTimeTop(request.time);\n                    top_1 = Math.ceil(top_1); // zoom can give weird floating-point values. rather scroll a little bit further\n                    if (top_1) {\n                        top_1 += 1; // to overcome top border that slots beyond the first have. looks better\n                    }\n                    onScrollTopRequest(top_1);\n                }\n                return true;\n            }\n            return false;\n        };\n        _this.handleColCoords = function (colCoords) {\n            _this.colCoords = colCoords;\n        };\n        _this.handleSlatCoords = function (slatCoords) {\n            _this.setState({ slatCoords: slatCoords });\n            if (_this.props.onSlatCoords) {\n                _this.props.onSlatCoords(slatCoords);\n            }\n        };\n        return _this;\n    }\n    TimeCols.prototype.render = function () {\n        var _a = this, props = _a.props, state = _a.state;\n        return (createElement(\"div\", { className: \"fc-timegrid-body\", ref: this.handleRootEl, style: {\n                // these props are important to give this wrapper correct dimensions for interactions\n                // TODO: if we set it here, can we avoid giving to inner tables?\n                width: props.clientWidth,\n                minWidth: props.tableMinWidth,\n            } },\n            createElement(TimeColsSlats, { axis: props.axis, dateProfile: props.dateProfile, slatMetas: props.slatMetas, clientWidth: props.clientWidth, minHeight: props.expandRows ? props.clientHeight : '', tableMinWidth: props.tableMinWidth, tableColGroupNode: props.axis ? props.tableColGroupNode : null /* axis depends on the colgroup's shrinking */, onCoords: this.handleSlatCoords }),\n            createElement(TimeColsContent, { cells: props.cells, axis: props.axis, dateProfile: props.dateProfile, businessHourSegs: props.businessHourSegs, bgEventSegs: props.bgEventSegs, fgEventSegs: props.fgEventSegs, dateSelectionSegs: props.dateSelectionSegs, eventSelection: props.eventSelection, eventDrag: props.eventDrag, eventResize: props.eventResize, todayRange: props.todayRange, nowDate: props.nowDate, nowIndicatorSegs: props.nowIndicatorSegs, clientWidth: props.clientWidth, tableMinWidth: props.tableMinWidth, tableColGroupNode: props.tableColGroupNode, slatCoords: state.slatCoords, onColCoords: this.handleColCoords, forPrint: props.forPrint })));\n    };\n    TimeCols.prototype.componentDidMount = function () {\n        this.scrollResponder = this.context.createScrollResponder(this.handleScrollRequest);\n    };\n    TimeCols.prototype.componentDidUpdate = function (prevProps) {\n        this.scrollResponder.update(prevProps.dateProfile !== this.props.dateProfile);\n    };\n    TimeCols.prototype.componentWillUnmount = function () {\n        this.scrollResponder.detach();\n    };\n    TimeCols.prototype.queryHit = function (positionLeft, positionTop) {\n        var _a = this.context, dateEnv = _a.dateEnv, options = _a.options;\n        var colCoords = this.colCoords;\n        var dateProfile = this.props.dateProfile;\n        var slatCoords = this.state.slatCoords;\n        var _b = this.processSlotOptions(this.props.slotDuration, options.snapDuration), snapDuration = _b.snapDuration, snapsPerSlot = _b.snapsPerSlot;\n        var colIndex = colCoords.leftToIndex(positionLeft);\n        var slatIndex = slatCoords.positions.topToIndex(positionTop);\n        if (colIndex != null && slatIndex != null) {\n            var cell = this.props.cells[colIndex];\n            var slatTop = slatCoords.positions.tops[slatIndex];\n            var slatHeight = slatCoords.positions.getHeight(slatIndex);\n            var partial = (positionTop - slatTop) / slatHeight; // floating point number between 0 and 1\n            var localSnapIndex = Math.floor(partial * snapsPerSlot); // the snap # relative to start of slat\n            var snapIndex = slatIndex * snapsPerSlot + localSnapIndex;\n            var dayDate = this.props.cells[colIndex].date;\n            var time = addDurations(dateProfile.slotMinTime, multiplyDuration(snapDuration, snapIndex));\n            var start = dateEnv.add(dayDate, time);\n            var end = dateEnv.add(start, snapDuration);\n            return {\n                dateProfile: dateProfile,\n                dateSpan: __assign({ range: { start: start, end: end }, allDay: false }, cell.extraDateSpan),\n                dayEl: colCoords.els[colIndex],\n                rect: {\n                    left: colCoords.lefts[colIndex],\n                    right: colCoords.rights[colIndex],\n                    top: slatTop,\n                    bottom: slatTop + slatHeight,\n                },\n                layer: 0,\n            };\n        }\n        return null;\n    };\n    return TimeCols;\n}(DateComponent));\nfunction processSlotOptions(slotDuration, snapDurationOverride) {\n    var snapDuration = snapDurationOverride || slotDuration;\n    var snapsPerSlot = wholeDivideDurations(slotDuration, snapDuration);\n    if (snapsPerSlot === null) {\n        snapDuration = slotDuration;\n        snapsPerSlot = 1;\n        // TODO: say warning?\n    }\n    return { snapDuration: snapDuration, snapsPerSlot: snapsPerSlot };\n}\n\nvar DayTimeColsSlicer = /** @class */ (function (_super) {\n    __extends(DayTimeColsSlicer, _super);\n    function DayTimeColsSlicer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DayTimeColsSlicer.prototype.sliceRange = function (range, dayRanges) {\n        var segs = [];\n        for (var col = 0; col < dayRanges.length; col += 1) {\n            var segRange = intersectRanges(range, dayRanges[col]);\n            if (segRange) {\n                segs.push({\n                    start: segRange.start,\n                    end: segRange.end,\n                    isStart: segRange.start.valueOf() === range.start.valueOf(),\n                    isEnd: segRange.end.valueOf() === range.end.valueOf(),\n                    col: col,\n                });\n            }\n        }\n        return segs;\n    };\n    return DayTimeColsSlicer;\n}(Slicer));\n\nvar DayTimeCols = /** @class */ (function (_super) {\n    __extends(DayTimeCols, _super);\n    function DayTimeCols() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buildDayRanges = memoize(buildDayRanges);\n        _this.slicer = new DayTimeColsSlicer();\n        _this.timeColsRef = createRef();\n        return _this;\n    }\n    DayTimeCols.prototype.render = function () {\n        var _this = this;\n        var _a = this, props = _a.props, context = _a.context;\n        var dateProfile = props.dateProfile, dayTableModel = props.dayTableModel;\n        var isNowIndicator = context.options.nowIndicator;\n        var dayRanges = this.buildDayRanges(dayTableModel, dateProfile, context.dateEnv);\n        // give it the first row of cells\n        // TODO: would move this further down hierarchy, but sliceNowDate needs it\n        return (createElement(NowTimer, { unit: isNowIndicator ? 'minute' : 'day' }, function (nowDate, todayRange) { return (createElement(TimeCols, __assign({ ref: _this.timeColsRef }, _this.slicer.sliceProps(props, dateProfile, null, context, dayRanges), { forPrint: props.forPrint, axis: props.axis, dateProfile: dateProfile, slatMetas: props.slatMetas, slotDuration: props.slotDuration, cells: dayTableModel.cells[0], tableColGroupNode: props.tableColGroupNode, tableMinWidth: props.tableMinWidth, clientWidth: props.clientWidth, clientHeight: props.clientHeight, expandRows: props.expandRows, nowDate: nowDate, nowIndicatorSegs: isNowIndicator && _this.slicer.sliceNowDate(nowDate, context, dayRanges), todayRange: todayRange, onScrollTopRequest: props.onScrollTopRequest, onSlatCoords: props.onSlatCoords }))); }));\n    };\n    return DayTimeCols;\n}(DateComponent));\nfunction buildDayRanges(dayTableModel, dateProfile, dateEnv) {\n    var ranges = [];\n    for (var _i = 0, _a = dayTableModel.headerDates; _i < _a.length; _i++) {\n        var date = _a[_i];\n        ranges.push({\n            start: dateEnv.add(date, dateProfile.slotMinTime),\n            end: dateEnv.add(date, dateProfile.slotMaxTime),\n        });\n    }\n    return ranges;\n}\n\n// potential nice values for the slot-duration and interval-duration\n// from largest to smallest\nvar STOCK_SUB_DURATIONS = [\n    { hours: 1 },\n    { minutes: 30 },\n    { minutes: 15 },\n    { seconds: 30 },\n    { seconds: 15 },\n];\nfunction buildSlatMetas(slotMinTime, slotMaxTime, explicitLabelInterval, slotDuration, dateEnv) {\n    var dayStart = new Date(0);\n    var slatTime = slotMinTime;\n    var slatIterator = createDuration(0);\n    var labelInterval = explicitLabelInterval || computeLabelInterval(slotDuration);\n    var metas = [];\n    while (asRoughMs(slatTime) < asRoughMs(slotMaxTime)) {\n        var date = dateEnv.add(dayStart, slatTime);\n        var isLabeled = wholeDivideDurations(slatIterator, labelInterval) !== null;\n        metas.push({\n            date: date,\n            time: slatTime,\n            key: date.toISOString(),\n            isoTimeStr: formatIsoTimeString(date),\n            isLabeled: isLabeled,\n        });\n        slatTime = addDurations(slatTime, slotDuration);\n        slatIterator = addDurations(slatIterator, slotDuration);\n    }\n    return metas;\n}\n// Computes an automatic value for slotLabelInterval\nfunction computeLabelInterval(slotDuration) {\n    var i;\n    var labelInterval;\n    var slotsPerLabel;\n    // find the smallest stock label interval that results in more than one slots-per-label\n    for (i = STOCK_SUB_DURATIONS.length - 1; i >= 0; i -= 1) {\n        labelInterval = createDuration(STOCK_SUB_DURATIONS[i]);\n        slotsPerLabel = wholeDivideDurations(labelInterval, slotDuration);\n        if (slotsPerLabel !== null && slotsPerLabel > 1) {\n            return labelInterval;\n        }\n    }\n    return slotDuration; // fall back\n}\n\nvar DayTimeColsView = /** @class */ (function (_super) {\n    __extends(DayTimeColsView, _super);\n    function DayTimeColsView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.buildTimeColsModel = memoize(buildTimeColsModel);\n        _this.buildSlatMetas = memoize(buildSlatMetas);\n        return _this;\n    }\n    DayTimeColsView.prototype.render = function () {\n        var _this = this;\n        var _a = this.context, options = _a.options, dateEnv = _a.dateEnv, dateProfileGenerator = _a.dateProfileGenerator;\n        var props = this.props;\n        var dateProfile = props.dateProfile;\n        var dayTableModel = this.buildTimeColsModel(dateProfile, dateProfileGenerator);\n        var splitProps = this.allDaySplitter.splitProps(props);\n        var slatMetas = this.buildSlatMetas(dateProfile.slotMinTime, dateProfile.slotMaxTime, options.slotLabelInterval, options.slotDuration, dateEnv);\n        var dayMinWidth = options.dayMinWidth;\n        var hasAttachedAxis = !dayMinWidth;\n        var hasDetachedAxis = dayMinWidth;\n        var headerContent = options.dayHeaders && (createElement(DayHeader, { dates: dayTableModel.headerDates, dateProfile: dateProfile, datesRepDistinctDays: true, renderIntro: hasAttachedAxis ? this.renderHeadAxis : null }));\n        var allDayContent = (options.allDaySlot !== false) && (function (contentArg) { return (createElement(DayTable, __assign({}, splitProps.allDay, { dateProfile: dateProfile, dayTableModel: dayTableModel, nextDayThreshold: options.nextDayThreshold, tableMinWidth: contentArg.tableMinWidth, colGroupNode: contentArg.tableColGroupNode, renderRowIntro: hasAttachedAxis ? _this.renderTableRowAxis : null, showWeekNumbers: false, expandRows: false, headerAlignElRef: _this.headerElRef, clientWidth: contentArg.clientWidth, clientHeight: contentArg.clientHeight, forPrint: props.forPrint }, _this.getAllDayMaxEventProps()))); });\n        var timeGridContent = function (contentArg) { return (createElement(DayTimeCols, __assign({}, splitProps.timed, { dayTableModel: dayTableModel, dateProfile: dateProfile, axis: hasAttachedAxis, slotDuration: options.slotDuration, slatMetas: slatMetas, forPrint: props.forPrint, tableColGroupNode: contentArg.tableColGroupNode, tableMinWidth: contentArg.tableMinWidth, clientWidth: contentArg.clientWidth, clientHeight: contentArg.clientHeight, onSlatCoords: _this.handleSlatCoords, expandRows: contentArg.expandRows, onScrollTopRequest: _this.handleScrollTopRequest }))); };\n        return hasDetachedAxis\n            ? this.renderHScrollLayout(headerContent, allDayContent, timeGridContent, dayTableModel.colCnt, dayMinWidth, slatMetas, this.state.slatCoords)\n            : this.renderSimpleLayout(headerContent, allDayContent, timeGridContent);\n    };\n    return DayTimeColsView;\n}(TimeColsView));\nfunction buildTimeColsModel(dateProfile, dateProfileGenerator) {\n    var daySeries = new DaySeriesModel(dateProfile.renderRange, dateProfileGenerator);\n    return new DayTableModel(daySeries, false);\n}\n\nvar OPTION_REFINERS = {\n    allDaySlot: Boolean,\n};\n\nvar main = createPlugin({\n    initialView: 'timeGridWeek',\n    optionRefiners: OPTION_REFINERS,\n    views: {\n        timeGrid: {\n            component: DayTimeColsView,\n            usesMinMaxTime: true,\n            allDaySlot: true,\n            slotDuration: '00:30:00',\n            slotEventOverlap: true, // a bad name. confused with overlap/constraint system\n        },\n        timeGridDay: {\n            type: 'timeGrid',\n            duration: { days: 1 },\n        },\n        timeGridWeek: {\n            type: 'timeGrid',\n            duration: { weeks: 1 },\n        },\n    },\n});\n\nexport default main;\nexport { DayTimeCols, DayTimeColsSlicer, DayTimeColsView, TimeCols, TimeColsSlatsCoords, TimeColsView, buildDayRanges, buildSlatMetas, buildTimeColsModel };\n//# sourceMappingURL=main.js.map\n","/*!\nFullCalendar v5.10.2\nDocs & License: https://fullcalendar.io/\n(c) 2021 Adam Shaw\n*/\nimport './main.css';\n\nimport { getUniqueDomId, getDateMeta, buildNavLinkAttrs, getDayClassNames, createElement, RenderHook, formatDayString, BaseComponent, Fragment, createFormatter, EventRoot, getSegAnchorAttrs, isMultiDayRange, buildSegTimeText, memoize, ViewRoot, Scroller, NowTimer, sortEventSegs, getSegMeta, sliceEventStore, intersectRanges, DateComponent, startOfDay, addDays, identity, createPlugin } from '@fullcalendar/common';\nimport { __extends, __assign } from 'tslib';\n\nvar ListViewHeaderRow = /** @class */ (function (_super) {\n    __extends(ListViewHeaderRow, _super);\n    function ListViewHeaderRow() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            textId: getUniqueDomId(),\n        };\n        return _this;\n    }\n    ListViewHeaderRow.prototype.render = function () {\n        var _a = this.context, theme = _a.theme, dateEnv = _a.dateEnv, options = _a.options, viewApi = _a.viewApi;\n        var _b = this.props, cellId = _b.cellId, dayDate = _b.dayDate, todayRange = _b.todayRange;\n        var textId = this.state.textId;\n        var dayMeta = getDateMeta(dayDate, todayRange);\n        // will ever be falsy?\n        var text = options.listDayFormat ? dateEnv.format(dayDate, options.listDayFormat) : '';\n        // will ever be falsy? also, BAD NAME \"alt\"\n        var sideText = options.listDaySideFormat ? dateEnv.format(dayDate, options.listDaySideFormat) : '';\n        var hookProps = __assign({ date: dateEnv.toDate(dayDate), view: viewApi, textId: textId,\n            text: text,\n            sideText: sideText, navLinkAttrs: buildNavLinkAttrs(this.context, dayDate), sideNavLinkAttrs: buildNavLinkAttrs(this.context, dayDate, 'day', false) }, dayMeta);\n        var classNames = ['fc-list-day'].concat(getDayClassNames(dayMeta, theme));\n        // TODO: make a reusable HOC for dayHeader (used in daygrid/timegrid too)\n        return (createElement(RenderHook, { hookProps: hookProps, classNames: options.dayHeaderClassNames, content: options.dayHeaderContent, defaultContent: renderInnerContent, didMount: options.dayHeaderDidMount, willUnmount: options.dayHeaderWillUnmount }, function (rootElRef, customClassNames, innerElRef, innerContent) { return (createElement(\"tr\", { ref: rootElRef, className: classNames.concat(customClassNames).join(' '), \"data-date\": formatDayString(dayDate) },\n            createElement(\"th\", { scope: \"colgroup\", colSpan: 3, id: cellId, \"aria-labelledby\": textId },\n                createElement(\"div\", { className: 'fc-list-day-cushion ' + theme.getClass('tableCellShaded'), ref: innerElRef }, innerContent)))); }));\n    };\n    return ListViewHeaderRow;\n}(BaseComponent));\nfunction renderInnerContent(props) {\n    return (createElement(Fragment, null,\n        props.text && (createElement(\"a\", __assign({ id: props.textId, className: \"fc-list-day-text\" }, props.navLinkAttrs), props.text)),\n        props.sideText && ( /* not keyboard tabbable */createElement(\"a\", __assign({ \"aria-hidden\": true, className: \"fc-list-day-side-text\" }, props.sideNavLinkAttrs), props.sideText))));\n}\n\nvar DEFAULT_TIME_FORMAT = createFormatter({\n    hour: 'numeric',\n    minute: '2-digit',\n    meridiem: 'short',\n});\nvar ListViewEventRow = /** @class */ (function (_super) {\n    __extends(ListViewEventRow, _super);\n    function ListViewEventRow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ListViewEventRow.prototype.render = function () {\n        var _a = this, props = _a.props, context = _a.context;\n        var seg = props.seg, timeHeaderId = props.timeHeaderId, eventHeaderId = props.eventHeaderId, dateHeaderId = props.dateHeaderId;\n        var timeFormat = context.options.eventTimeFormat || DEFAULT_TIME_FORMAT;\n        return (createElement(EventRoot, { seg: seg, timeText: \"\" // BAD. because of all-day content\n            , disableDragging: true, disableResizing: true, defaultContent: function () { return renderEventInnerContent(seg, context); } /* weird */, isPast: props.isPast, isFuture: props.isFuture, isToday: props.isToday, isSelected: props.isSelected, isDragging: props.isDragging, isResizing: props.isResizing, isDateSelecting: props.isDateSelecting }, function (rootElRef, classNames, innerElRef, innerContent, hookProps) { return (createElement(\"tr\", { className: ['fc-list-event', hookProps.event.url ? 'fc-event-forced-url' : ''].concat(classNames).join(' '), ref: rootElRef },\n            buildTimeContent(seg, timeFormat, context, timeHeaderId, dateHeaderId),\n            createElement(\"td\", { \"aria-hidden\": true, className: \"fc-list-event-graphic\" },\n                createElement(\"span\", { className: \"fc-list-event-dot\", style: { borderColor: hookProps.borderColor || hookProps.backgroundColor } })),\n            createElement(\"td\", { ref: innerElRef, headers: eventHeaderId + \" \" + dateHeaderId, className: \"fc-list-event-title\" }, innerContent))); }));\n    };\n    return ListViewEventRow;\n}(BaseComponent));\nfunction renderEventInnerContent(seg, context) {\n    var interactiveAttrs = getSegAnchorAttrs(seg, context);\n    return (createElement(\"a\", __assign({}, interactiveAttrs), seg.eventRange.def.title));\n}\nfunction buildTimeContent(seg, timeFormat, context, timeHeaderId, dateHeaderId) {\n    var options = context.options;\n    if (options.displayEventTime !== false) {\n        var eventDef = seg.eventRange.def;\n        var eventInstance = seg.eventRange.instance;\n        var doAllDay = false;\n        var timeText = void 0;\n        if (eventDef.allDay) {\n            doAllDay = true;\n        }\n        else if (isMultiDayRange(seg.eventRange.range)) { // TODO: use (!isStart || !isEnd) instead?\n            if (seg.isStart) {\n                timeText = buildSegTimeText(seg, timeFormat, context, null, null, eventInstance.range.start, seg.end);\n            }\n            else if (seg.isEnd) {\n                timeText = buildSegTimeText(seg, timeFormat, context, null, null, seg.start, eventInstance.range.end);\n            }\n            else {\n                doAllDay = true;\n            }\n        }\n        else {\n            timeText = buildSegTimeText(seg, timeFormat, context);\n        }\n        if (doAllDay) {\n            var hookProps = {\n                text: context.options.allDayText,\n                view: context.viewApi,\n            };\n            return (createElement(RenderHook, { hookProps: hookProps, classNames: options.allDayClassNames, content: options.allDayContent, defaultContent: renderAllDayInner, didMount: options.allDayDidMount, willUnmount: options.allDayWillUnmount }, function (rootElRef, classNames, innerElRef, innerContent) { return (createElement(\"td\", { ref: rootElRef, headers: timeHeaderId + \" \" + dateHeaderId, className: ['fc-list-event-time'].concat(classNames).join(' ') }, innerContent)); }));\n        }\n        return (createElement(\"td\", { className: \"fc-list-event-time\" }, timeText));\n    }\n    return null;\n}\nfunction renderAllDayInner(hookProps) {\n    return hookProps.text;\n}\n\n/*\nResponsible for the scroller, and forwarding event-related actions into the \"grid\".\n*/\nvar ListView = /** @class */ (function (_super) {\n    __extends(ListView, _super);\n    function ListView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.computeDateVars = memoize(computeDateVars);\n        _this.eventStoreToSegs = memoize(_this._eventStoreToSegs);\n        _this.state = {\n            timeHeaderId: getUniqueDomId(),\n            eventHeaderId: getUniqueDomId(),\n            dateHeaderIdRoot: getUniqueDomId(),\n        };\n        _this.setRootEl = function (rootEl) {\n            if (rootEl) {\n                _this.context.registerInteractiveComponent(_this, {\n                    el: rootEl,\n                });\n            }\n            else {\n                _this.context.unregisterInteractiveComponent(_this);\n            }\n        };\n        return _this;\n    }\n    ListView.prototype.render = function () {\n        var _this = this;\n        var _a = this, props = _a.props, context = _a.context;\n        var extraClassNames = [\n            'fc-list',\n            context.theme.getClass('table'),\n            context.options.stickyHeaderDates !== false ? 'fc-list-sticky' : '',\n        ];\n        var _b = this.computeDateVars(props.dateProfile), dayDates = _b.dayDates, dayRanges = _b.dayRanges;\n        var eventSegs = this.eventStoreToSegs(props.eventStore, props.eventUiBases, dayRanges);\n        return (createElement(ViewRoot, { viewSpec: context.viewSpec, elRef: this.setRootEl }, function (rootElRef, classNames) { return (createElement(\"div\", { ref: rootElRef, className: extraClassNames.concat(classNames).join(' ') },\n            createElement(Scroller, { liquid: !props.isHeightAuto, overflowX: props.isHeightAuto ? 'visible' : 'hidden', overflowY: props.isHeightAuto ? 'visible' : 'auto' }, eventSegs.length > 0 ?\n                _this.renderSegList(eventSegs, dayDates) :\n                _this.renderEmptyMessage()))); }));\n    };\n    ListView.prototype.renderEmptyMessage = function () {\n        var _a = this.context, options = _a.options, viewApi = _a.viewApi;\n        var hookProps = {\n            text: options.noEventsText,\n            view: viewApi,\n        };\n        return (createElement(RenderHook, { hookProps: hookProps, classNames: options.noEventsClassNames, content: options.noEventsContent, defaultContent: renderNoEventsInner, didMount: options.noEventsDidMount, willUnmount: options.noEventsWillUnmount }, function (rootElRef, classNames, innerElRef, innerContent) { return (createElement(\"div\", { className: ['fc-list-empty'].concat(classNames).join(' '), ref: rootElRef },\n            createElement(\"div\", { className: \"fc-list-empty-cushion\", ref: innerElRef }, innerContent))); }));\n    };\n    ListView.prototype.renderSegList = function (allSegs, dayDates) {\n        var _a = this.context, theme = _a.theme, options = _a.options;\n        var _b = this.state, timeHeaderId = _b.timeHeaderId, eventHeaderId = _b.eventHeaderId, dateHeaderIdRoot = _b.dateHeaderIdRoot;\n        var segsByDay = groupSegsByDay(allSegs); // sparse array\n        return (createElement(NowTimer, { unit: \"day\" }, function (nowDate, todayRange) {\n            var innerNodes = [];\n            for (var dayIndex = 0; dayIndex < segsByDay.length; dayIndex += 1) {\n                var daySegs = segsByDay[dayIndex];\n                if (daySegs) { // sparse array, so might be undefined\n                    var dayStr = formatDayString(dayDates[dayIndex]);\n                    var dateHeaderId = dateHeaderIdRoot + '-' + dayStr;\n                    // append a day header\n                    innerNodes.push(createElement(ListViewHeaderRow, { key: dayStr, cellId: dateHeaderId, dayDate: dayDates[dayIndex], todayRange: todayRange }));\n                    daySegs = sortEventSegs(daySegs, options.eventOrder);\n                    for (var _i = 0, daySegs_1 = daySegs; _i < daySegs_1.length; _i++) {\n                        var seg = daySegs_1[_i];\n                        innerNodes.push(createElement(ListViewEventRow, __assign({ key: dayStr + ':' + seg.eventRange.instance.instanceId /* are multiple segs for an instanceId */, seg: seg, isDragging: false, isResizing: false, isDateSelecting: false, isSelected: false, timeHeaderId: timeHeaderId, eventHeaderId: eventHeaderId, dateHeaderId: dateHeaderId }, getSegMeta(seg, todayRange, nowDate))));\n                    }\n                }\n            }\n            return (createElement(\"table\", { className: 'fc-list-table ' + theme.getClass('table') },\n                createElement(\"thead\", null,\n                    createElement(\"tr\", null,\n                        createElement(\"th\", { scope: \"col\", id: timeHeaderId }, options.timeHint),\n                        createElement(\"th\", { scope: \"col\", \"aria-hidden\": true }),\n                        createElement(\"th\", { scope: \"col\", id: eventHeaderId }, options.eventHint))),\n                createElement(\"tbody\", null, innerNodes)));\n        }));\n    };\n    ListView.prototype._eventStoreToSegs = function (eventStore, eventUiBases, dayRanges) {\n        return this.eventRangesToSegs(sliceEventStore(eventStore, eventUiBases, this.props.dateProfile.activeRange, this.context.options.nextDayThreshold).fg, dayRanges);\n    };\n    ListView.prototype.eventRangesToSegs = function (eventRanges, dayRanges) {\n        var segs = [];\n        for (var _i = 0, eventRanges_1 = eventRanges; _i < eventRanges_1.length; _i++) {\n            var eventRange = eventRanges_1[_i];\n            segs.push.apply(segs, this.eventRangeToSegs(eventRange, dayRanges));\n        }\n        return segs;\n    };\n    ListView.prototype.eventRangeToSegs = function (eventRange, dayRanges) {\n        var dateEnv = this.context.dateEnv;\n        var nextDayThreshold = this.context.options.nextDayThreshold;\n        var range = eventRange.range;\n        var allDay = eventRange.def.allDay;\n        var dayIndex;\n        var segRange;\n        var seg;\n        var segs = [];\n        for (dayIndex = 0; dayIndex < dayRanges.length; dayIndex += 1) {\n            segRange = intersectRanges(range, dayRanges[dayIndex]);\n            if (segRange) {\n                seg = {\n                    component: this,\n                    eventRange: eventRange,\n                    start: segRange.start,\n                    end: segRange.end,\n                    isStart: eventRange.isStart && segRange.start.valueOf() === range.start.valueOf(),\n                    isEnd: eventRange.isEnd && segRange.end.valueOf() === range.end.valueOf(),\n                    dayIndex: dayIndex,\n                };\n                segs.push(seg);\n                // detect when range won't go fully into the next day,\n                // and mutate the latest seg to the be the end.\n                if (!seg.isEnd && !allDay &&\n                    dayIndex + 1 < dayRanges.length &&\n                    range.end <\n                        dateEnv.add(dayRanges[dayIndex + 1].start, nextDayThreshold)) {\n                    seg.end = range.end;\n                    seg.isEnd = true;\n                    break;\n                }\n            }\n        }\n        return segs;\n    };\n    return ListView;\n}(DateComponent));\nfunction renderNoEventsInner(hookProps) {\n    return hookProps.text;\n}\nfunction computeDateVars(dateProfile) {\n    var dayStart = startOfDay(dateProfile.renderRange.start);\n    var viewEnd = dateProfile.renderRange.end;\n    var dayDates = [];\n    var dayRanges = [];\n    while (dayStart < viewEnd) {\n        dayDates.push(dayStart);\n        dayRanges.push({\n            start: dayStart,\n            end: addDays(dayStart, 1),\n        });\n        dayStart = addDays(dayStart, 1);\n    }\n    return { dayDates: dayDates, dayRanges: dayRanges };\n}\n// Returns a sparse array of arrays, segs grouped by their dayIndex\nfunction groupSegsByDay(segs) {\n    var segsByDay = []; // sparse array\n    var i;\n    var seg;\n    for (i = 0; i < segs.length; i += 1) {\n        seg = segs[i];\n        (segsByDay[seg.dayIndex] || (segsByDay[seg.dayIndex] = []))\n            .push(seg);\n    }\n    return segsByDay;\n}\n\nvar OPTION_REFINERS = {\n    listDayFormat: createFalsableFormatter,\n    listDaySideFormat: createFalsableFormatter,\n    noEventsClassNames: identity,\n    noEventsContent: identity,\n    noEventsDidMount: identity,\n    noEventsWillUnmount: identity,\n    // noEventsText is defined in base options\n};\nfunction createFalsableFormatter(input) {\n    return input === false ? null : createFormatter(input);\n}\n\nvar main = createPlugin({\n    optionRefiners: OPTION_REFINERS,\n    views: {\n        list: {\n            component: ListView,\n            buttonTextKey: 'list',\n            listDayFormat: { month: 'long', day: 'numeric', year: 'numeric' }, // like \"January 1, 2016\"\n        },\n        listDay: {\n            type: 'list',\n            duration: { days: 1 },\n            listDayFormat: { weekday: 'long' }, // day-of-week is all we need. full date is probably in headerToolbar\n        },\n        listWeek: {\n            type: 'list',\n            duration: { weeks: 1 },\n            listDayFormat: { weekday: 'long' },\n            listDaySideFormat: { month: 'long', day: 'numeric', year: 'numeric' },\n        },\n        listMonth: {\n            type: 'list',\n            duration: { month: 1 },\n            listDaySideFormat: { weekday: 'long' }, // day-of-week is nice-to-have\n        },\n        listYear: {\n            type: 'list',\n            duration: { year: 1 },\n            listDaySideFormat: { weekday: 'long' }, // day-of-week is nice-to-have\n        },\n    },\n});\n\nexport default main;\nexport { ListView };\n//# sourceMappingURL=main.js.map\n","/*!\nFullCalendar v5.10.2\nDocs & License: https://fullcalendar.io/\n(c) 2021 Adam Shaw\n*/\nimport { config, elementClosest, Emitter, applyStyle, whenTransitionDone, removeElement, ScrollController, ElementScrollController, computeInnerRect, WindowScrollController, getElRoot, preventSelection, preventContextMenu, allowSelection, allowContextMenu, ElementDragging, computeRect, getClippingParents, pointInsideRect, isDateSpansEqual, constrainPoint, intersectRects, getRectCenter, diffPoints, mapHash, rangeContainsRange, interactionSettingsToStore, Interaction, isDateSelectionValid, enableCursor, disableCursor, triggerDateSelect, compareNumbers, getElSeg, getRelevantEvents, EventApi, createEmptyEventStore, applyMutationToEventStore, isInteractionValid, buildEventApis, interactionSettingsStore, startOfDay, diffDates, createDuration, getEventTargetViaRoot, identity, eventTupleToStore, parseDragMeta, elementMatches, refineEventDef, parseEventDef, getDefaultEventEnd, createEventInstance, BASE_OPTION_DEFAULTS, createPlugin } from '@fullcalendar/common';\nimport { __extends, __assign } from 'tslib';\n\nconfig.touchMouseIgnoreWait = 500;\nvar ignoreMouseDepth = 0;\nvar listenerCnt = 0;\nvar isWindowTouchMoveCancelled = false;\n/*\nUses a \"pointer\" abstraction, which monitors UI events for both mouse and touch.\nTracks when the pointer \"drags\" on a certain element, meaning down+move+up.\n\nAlso, tracks if there was touch-scrolling.\nAlso, can prevent touch-scrolling from happening.\nAlso, can fire pointermove events when scrolling happens underneath, even when no real pointer movement.\n\nemits:\n- pointerdown\n- pointermove\n- pointerup\n*/\nvar PointerDragging = /** @class */ (function () {\n    function PointerDragging(containerEl) {\n        var _this = this;\n        this.subjectEl = null;\n        // options that can be directly assigned by caller\n        this.selector = ''; // will cause subjectEl in all emitted events to be this element\n        this.handleSelector = '';\n        this.shouldIgnoreMove = false;\n        this.shouldWatchScroll = true; // for simulating pointermove on scroll\n        // internal states\n        this.isDragging = false;\n        this.isTouchDragging = false;\n        this.wasTouchScroll = false;\n        // Mouse\n        // ----------------------------------------------------------------------------------------------------\n        this.handleMouseDown = function (ev) {\n            if (!_this.shouldIgnoreMouse() &&\n                isPrimaryMouseButton(ev) &&\n                _this.tryStart(ev)) {\n                var pev = _this.createEventFromMouse(ev, true);\n                _this.emitter.trigger('pointerdown', pev);\n                _this.initScrollWatch(pev);\n                if (!_this.shouldIgnoreMove) {\n                    document.addEventListener('mousemove', _this.handleMouseMove);\n                }\n                document.addEventListener('mouseup', _this.handleMouseUp);\n            }\n        };\n        this.handleMouseMove = function (ev) {\n            var pev = _this.createEventFromMouse(ev);\n            _this.recordCoords(pev);\n            _this.emitter.trigger('pointermove', pev);\n        };\n        this.handleMouseUp = function (ev) {\n            document.removeEventListener('mousemove', _this.handleMouseMove);\n            document.removeEventListener('mouseup', _this.handleMouseUp);\n            _this.emitter.trigger('pointerup', _this.createEventFromMouse(ev));\n            _this.cleanup(); // call last so that pointerup has access to props\n        };\n        // Touch\n        // ----------------------------------------------------------------------------------------------------\n        this.handleTouchStart = function (ev) {\n            if (_this.tryStart(ev)) {\n                _this.isTouchDragging = true;\n                var pev = _this.createEventFromTouch(ev, true);\n                _this.emitter.trigger('pointerdown', pev);\n                _this.initScrollWatch(pev);\n                // unlike mouse, need to attach to target, not document\n                // https://stackoverflow.com/a/45760014\n                var targetEl = ev.target;\n                if (!_this.shouldIgnoreMove) {\n                    targetEl.addEventListener('touchmove', _this.handleTouchMove);\n                }\n                targetEl.addEventListener('touchend', _this.handleTouchEnd);\n                targetEl.addEventListener('touchcancel', _this.handleTouchEnd); // treat it as a touch end\n                // attach a handler to get called when ANY scroll action happens on the page.\n                // this was impossible to do with normal on/off because 'scroll' doesn't bubble.\n                // http://stackoverflow.com/a/32954565/96342\n                window.addEventListener('scroll', _this.handleTouchScroll, true);\n            }\n        };\n        this.handleTouchMove = function (ev) {\n            var pev = _this.createEventFromTouch(ev);\n            _this.recordCoords(pev);\n            _this.emitter.trigger('pointermove', pev);\n        };\n        this.handleTouchEnd = function (ev) {\n            if (_this.isDragging) { // done to guard against touchend followed by touchcancel\n                var targetEl = ev.target;\n                targetEl.removeEventListener('touchmove', _this.handleTouchMove);\n                targetEl.removeEventListener('touchend', _this.handleTouchEnd);\n                targetEl.removeEventListener('touchcancel', _this.handleTouchEnd);\n                window.removeEventListener('scroll', _this.handleTouchScroll, true); // useCaptured=true\n                _this.emitter.trigger('pointerup', _this.createEventFromTouch(ev));\n                _this.cleanup(); // call last so that pointerup has access to props\n                _this.isTouchDragging = false;\n                startIgnoringMouse();\n            }\n        };\n        this.handleTouchScroll = function () {\n            _this.wasTouchScroll = true;\n        };\n        this.handleScroll = function (ev) {\n            if (!_this.shouldIgnoreMove) {\n                var pageX = (window.pageXOffset - _this.prevScrollX) + _this.prevPageX;\n                var pageY = (window.pageYOffset - _this.prevScrollY) + _this.prevPageY;\n                _this.emitter.trigger('pointermove', {\n                    origEvent: ev,\n                    isTouch: _this.isTouchDragging,\n                    subjectEl: _this.subjectEl,\n                    pageX: pageX,\n                    pageY: pageY,\n                    deltaX: pageX - _this.origPageX,\n                    deltaY: pageY - _this.origPageY,\n                });\n            }\n        };\n        this.containerEl = containerEl;\n        this.emitter = new Emitter();\n        containerEl.addEventListener('mousedown', this.handleMouseDown);\n        containerEl.addEventListener('touchstart', this.handleTouchStart, { passive: true });\n        listenerCreated();\n    }\n    PointerDragging.prototype.destroy = function () {\n        this.containerEl.removeEventListener('mousedown', this.handleMouseDown);\n        this.containerEl.removeEventListener('touchstart', this.handleTouchStart, { passive: true });\n        listenerDestroyed();\n    };\n    PointerDragging.prototype.tryStart = function (ev) {\n        var subjectEl = this.querySubjectEl(ev);\n        var downEl = ev.target;\n        if (subjectEl &&\n            (!this.handleSelector || elementClosest(downEl, this.handleSelector))) {\n            this.subjectEl = subjectEl;\n            this.isDragging = true; // do this first so cancelTouchScroll will work\n            this.wasTouchScroll = false;\n            return true;\n        }\n        return false;\n    };\n    PointerDragging.prototype.cleanup = function () {\n        isWindowTouchMoveCancelled = false;\n        this.isDragging = false;\n        this.subjectEl = null;\n        // keep wasTouchScroll around for later access\n        this.destroyScrollWatch();\n    };\n    PointerDragging.prototype.querySubjectEl = function (ev) {\n        if (this.selector) {\n            return elementClosest(ev.target, this.selector);\n        }\n        return this.containerEl;\n    };\n    PointerDragging.prototype.shouldIgnoreMouse = function () {\n        return ignoreMouseDepth || this.isTouchDragging;\n    };\n    // can be called by user of this class, to cancel touch-based scrolling for the current drag\n    PointerDragging.prototype.cancelTouchScroll = function () {\n        if (this.isDragging) {\n            isWindowTouchMoveCancelled = true;\n        }\n    };\n    // Scrolling that simulates pointermoves\n    // ----------------------------------------------------------------------------------------------------\n    PointerDragging.prototype.initScrollWatch = function (ev) {\n        if (this.shouldWatchScroll) {\n            this.recordCoords(ev);\n            window.addEventListener('scroll', this.handleScroll, true); // useCapture=true\n        }\n    };\n    PointerDragging.prototype.recordCoords = function (ev) {\n        if (this.shouldWatchScroll) {\n            this.prevPageX = ev.pageX;\n            this.prevPageY = ev.pageY;\n            this.prevScrollX = window.pageXOffset;\n            this.prevScrollY = window.pageYOffset;\n        }\n    };\n    PointerDragging.prototype.destroyScrollWatch = function () {\n        if (this.shouldWatchScroll) {\n            window.removeEventListener('scroll', this.handleScroll, true); // useCaptured=true\n        }\n    };\n    // Event Normalization\n    // ----------------------------------------------------------------------------------------------------\n    PointerDragging.prototype.createEventFromMouse = function (ev, isFirst) {\n        var deltaX = 0;\n        var deltaY = 0;\n        // TODO: repeat code\n        if (isFirst) {\n            this.origPageX = ev.pageX;\n            this.origPageY = ev.pageY;\n        }\n        else {\n            deltaX = ev.pageX - this.origPageX;\n            deltaY = ev.pageY - this.origPageY;\n        }\n        return {\n            origEvent: ev,\n            isTouch: false,\n            subjectEl: this.subjectEl,\n            pageX: ev.pageX,\n            pageY: ev.pageY,\n            deltaX: deltaX,\n            deltaY: deltaY,\n        };\n    };\n    PointerDragging.prototype.createEventFromTouch = function (ev, isFirst) {\n        var touches = ev.touches;\n        var pageX;\n        var pageY;\n        var deltaX = 0;\n        var deltaY = 0;\n        // if touch coords available, prefer,\n        // because FF would give bad ev.pageX ev.pageY\n        if (touches && touches.length) {\n            pageX = touches[0].pageX;\n            pageY = touches[0].pageY;\n        }\n        else {\n            pageX = ev.pageX;\n            pageY = ev.pageY;\n        }\n        // TODO: repeat code\n        if (isFirst) {\n            this.origPageX = pageX;\n            this.origPageY = pageY;\n        }\n        else {\n            deltaX = pageX - this.origPageX;\n            deltaY = pageY - this.origPageY;\n        }\n        return {\n            origEvent: ev,\n            isTouch: true,\n            subjectEl: this.subjectEl,\n            pageX: pageX,\n            pageY: pageY,\n            deltaX: deltaX,\n            deltaY: deltaY,\n        };\n    };\n    return PointerDragging;\n}());\n// Returns a boolean whether this was a left mouse click and no ctrl key (which means right click on Mac)\nfunction isPrimaryMouseButton(ev) {\n    return ev.button === 0 && !ev.ctrlKey;\n}\n// Ignoring fake mouse events generated by touch\n// ----------------------------------------------------------------------------------------------------\nfunction startIgnoringMouse() {\n    ignoreMouseDepth += 1;\n    setTimeout(function () {\n        ignoreMouseDepth -= 1;\n    }, config.touchMouseIgnoreWait);\n}\n// We want to attach touchmove as early as possible for Safari\n// ----------------------------------------------------------------------------------------------------\nfunction listenerCreated() {\n    listenerCnt += 1;\n    if (listenerCnt === 1) {\n        window.addEventListener('touchmove', onWindowTouchMove, { passive: false });\n    }\n}\nfunction listenerDestroyed() {\n    listenerCnt -= 1;\n    if (!listenerCnt) {\n        window.removeEventListener('touchmove', onWindowTouchMove, { passive: false });\n    }\n}\nfunction onWindowTouchMove(ev) {\n    if (isWindowTouchMoveCancelled) {\n        ev.preventDefault();\n    }\n}\n\n/*\nAn effect in which an element follows the movement of a pointer across the screen.\nThe moving element is a clone of some other element.\nMust call start + handleMove + stop.\n*/\nvar ElementMirror = /** @class */ (function () {\n    function ElementMirror() {\n        this.isVisible = false; // must be explicitly enabled\n        this.sourceEl = null;\n        this.mirrorEl = null;\n        this.sourceElRect = null; // screen coords relative to viewport\n        // options that can be set directly by caller\n        this.parentNode = document.body; // HIGHLY SUGGESTED to set this to sidestep ShadowDOM issues\n        this.zIndex = 9999;\n        this.revertDuration = 0;\n    }\n    ElementMirror.prototype.start = function (sourceEl, pageX, pageY) {\n        this.sourceEl = sourceEl;\n        this.sourceElRect = this.sourceEl.getBoundingClientRect();\n        this.origScreenX = pageX - window.pageXOffset;\n        this.origScreenY = pageY - window.pageYOffset;\n        this.deltaX = 0;\n        this.deltaY = 0;\n        this.updateElPosition();\n    };\n    ElementMirror.prototype.handleMove = function (pageX, pageY) {\n        this.deltaX = (pageX - window.pageXOffset) - this.origScreenX;\n        this.deltaY = (pageY - window.pageYOffset) - this.origScreenY;\n        this.updateElPosition();\n    };\n    // can be called before start\n    ElementMirror.prototype.setIsVisible = function (bool) {\n        if (bool) {\n            if (!this.isVisible) {\n                if (this.mirrorEl) {\n                    this.mirrorEl.style.display = '';\n                }\n                this.isVisible = bool; // needs to happen before updateElPosition\n                this.updateElPosition(); // because was not updating the position while invisible\n            }\n        }\n        else if (this.isVisible) {\n            if (this.mirrorEl) {\n                this.mirrorEl.style.display = 'none';\n            }\n            this.isVisible = bool;\n        }\n    };\n    // always async\n    ElementMirror.prototype.stop = function (needsRevertAnimation, callback) {\n        var _this = this;\n        var done = function () {\n            _this.cleanup();\n            callback();\n        };\n        if (needsRevertAnimation &&\n            this.mirrorEl &&\n            this.isVisible &&\n            this.revertDuration && // if 0, transition won't work\n            (this.deltaX || this.deltaY) // if same coords, transition won't work\n        ) {\n            this.doRevertAnimation(done, this.revertDuration);\n        }\n        else {\n            setTimeout(done, 0);\n        }\n    };\n    ElementMirror.prototype.doRevertAnimation = function (callback, revertDuration) {\n        var mirrorEl = this.mirrorEl;\n        var finalSourceElRect = this.sourceEl.getBoundingClientRect(); // because autoscrolling might have happened\n        mirrorEl.style.transition =\n            'top ' + revertDuration + 'ms,' +\n                'left ' + revertDuration + 'ms';\n        applyStyle(mirrorEl, {\n            left: finalSourceElRect.left,\n            top: finalSourceElRect.top,\n        });\n        whenTransitionDone(mirrorEl, function () {\n            mirrorEl.style.transition = '';\n            callback();\n        });\n    };\n    ElementMirror.prototype.cleanup = function () {\n        if (this.mirrorEl) {\n            removeElement(this.mirrorEl);\n            this.mirrorEl = null;\n        }\n        this.sourceEl = null;\n    };\n    ElementMirror.prototype.updateElPosition = function () {\n        if (this.sourceEl && this.isVisible) {\n            applyStyle(this.getMirrorEl(), {\n                left: this.sourceElRect.left + this.deltaX,\n                top: this.sourceElRect.top + this.deltaY,\n            });\n        }\n    };\n    ElementMirror.prototype.getMirrorEl = function () {\n        var sourceElRect = this.sourceElRect;\n        var mirrorEl = this.mirrorEl;\n        if (!mirrorEl) {\n            mirrorEl = this.mirrorEl = this.sourceEl.cloneNode(true); // cloneChildren=true\n            // we don't want long taps or any mouse interaction causing selection/menus.\n            // would use preventSelection(), but that prevents selectstart, causing problems.\n            mirrorEl.classList.add('fc-unselectable');\n            mirrorEl.classList.add('fc-event-dragging');\n            applyStyle(mirrorEl, {\n                position: 'fixed',\n                zIndex: this.zIndex,\n                visibility: '',\n                boxSizing: 'border-box',\n                width: sourceElRect.right - sourceElRect.left,\n                height: sourceElRect.bottom - sourceElRect.top,\n                right: 'auto',\n                bottom: 'auto',\n                margin: 0,\n            });\n            this.parentNode.appendChild(mirrorEl);\n        }\n        return mirrorEl;\n    };\n    return ElementMirror;\n}());\n\n/*\nIs a cache for a given element's scroll information (all the info that ScrollController stores)\nin addition the \"client rectangle\" of the element.. the area within the scrollbars.\n\nThe cache can be in one of two modes:\n- doesListening:false - ignores when the container is scrolled by someone else\n- doesListening:true - watch for scrolling and update the cache\n*/\nvar ScrollGeomCache = /** @class */ (function (_super) {\n    __extends(ScrollGeomCache, _super);\n    function ScrollGeomCache(scrollController, doesListening) {\n        var _this = _super.call(this) || this;\n        _this.handleScroll = function () {\n            _this.scrollTop = _this.scrollController.getScrollTop();\n            _this.scrollLeft = _this.scrollController.getScrollLeft();\n            _this.handleScrollChange();\n        };\n        _this.scrollController = scrollController;\n        _this.doesListening = doesListening;\n        _this.scrollTop = _this.origScrollTop = scrollController.getScrollTop();\n        _this.scrollLeft = _this.origScrollLeft = scrollController.getScrollLeft();\n        _this.scrollWidth = scrollController.getScrollWidth();\n        _this.scrollHeight = scrollController.getScrollHeight();\n        _this.clientWidth = scrollController.getClientWidth();\n        _this.clientHeight = scrollController.getClientHeight();\n        _this.clientRect = _this.computeClientRect(); // do last in case it needs cached values\n        if (_this.doesListening) {\n            _this.getEventTarget().addEventListener('scroll', _this.handleScroll);\n        }\n        return _this;\n    }\n    ScrollGeomCache.prototype.destroy = function () {\n        if (this.doesListening) {\n            this.getEventTarget().removeEventListener('scroll', this.handleScroll);\n        }\n    };\n    ScrollGeomCache.prototype.getScrollTop = function () {\n        return this.scrollTop;\n    };\n    ScrollGeomCache.prototype.getScrollLeft = function () {\n        return this.scrollLeft;\n    };\n    ScrollGeomCache.prototype.setScrollTop = function (top) {\n        this.scrollController.setScrollTop(top);\n        if (!this.doesListening) {\n            // we are not relying on the element to normalize out-of-bounds scroll values\n            // so we need to sanitize ourselves\n            this.scrollTop = Math.max(Math.min(top, this.getMaxScrollTop()), 0);\n            this.handleScrollChange();\n        }\n    };\n    ScrollGeomCache.prototype.setScrollLeft = function (top) {\n        this.scrollController.setScrollLeft(top);\n        if (!this.doesListening) {\n            // we are not relying on the element to normalize out-of-bounds scroll values\n            // so we need to sanitize ourselves\n            this.scrollLeft = Math.max(Math.min(top, this.getMaxScrollLeft()), 0);\n            this.handleScrollChange();\n        }\n    };\n    ScrollGeomCache.prototype.getClientWidth = function () {\n        return this.clientWidth;\n    };\n    ScrollGeomCache.prototype.getClientHeight = function () {\n        return this.clientHeight;\n    };\n    ScrollGeomCache.prototype.getScrollWidth = function () {\n        return this.scrollWidth;\n    };\n    ScrollGeomCache.prototype.getScrollHeight = function () {\n        return this.scrollHeight;\n    };\n    ScrollGeomCache.prototype.handleScrollChange = function () {\n    };\n    return ScrollGeomCache;\n}(ScrollController));\n\nvar ElementScrollGeomCache = /** @class */ (function (_super) {\n    __extends(ElementScrollGeomCache, _super);\n    function ElementScrollGeomCache(el, doesListening) {\n        return _super.call(this, new ElementScrollController(el), doesListening) || this;\n    }\n    ElementScrollGeomCache.prototype.getEventTarget = function () {\n        return this.scrollController.el;\n    };\n    ElementScrollGeomCache.prototype.computeClientRect = function () {\n        return computeInnerRect(this.scrollController.el);\n    };\n    return ElementScrollGeomCache;\n}(ScrollGeomCache));\n\nvar WindowScrollGeomCache = /** @class */ (function (_super) {\n    __extends(WindowScrollGeomCache, _super);\n    function WindowScrollGeomCache(doesListening) {\n        return _super.call(this, new WindowScrollController(), doesListening) || this;\n    }\n    WindowScrollGeomCache.prototype.getEventTarget = function () {\n        return window;\n    };\n    WindowScrollGeomCache.prototype.computeClientRect = function () {\n        return {\n            left: this.scrollLeft,\n            right: this.scrollLeft + this.clientWidth,\n            top: this.scrollTop,\n            bottom: this.scrollTop + this.clientHeight,\n        };\n    };\n    // the window is the only scroll object that changes it's rectangle relative\n    // to the document's topleft as it scrolls\n    WindowScrollGeomCache.prototype.handleScrollChange = function () {\n        this.clientRect = this.computeClientRect();\n    };\n    return WindowScrollGeomCache;\n}(ScrollGeomCache));\n\n// If available we are using native \"performance\" API instead of \"Date\"\n// Read more about it on MDN:\n// https://developer.mozilla.org/en-US/docs/Web/API/Performance\nvar getTime = typeof performance === 'function' ? performance.now : Date.now;\n/*\nFor a pointer interaction, automatically scrolls certain scroll containers when the pointer\napproaches the edge.\n\nThe caller must call start + handleMove + stop.\n*/\nvar AutoScroller = /** @class */ (function () {\n    function AutoScroller() {\n        var _this = this;\n        // options that can be set by caller\n        this.isEnabled = true;\n        this.scrollQuery = [window, '.fc-scroller'];\n        this.edgeThreshold = 50; // pixels\n        this.maxVelocity = 300; // pixels per second\n        // internal state\n        this.pointerScreenX = null;\n        this.pointerScreenY = null;\n        this.isAnimating = false;\n        this.scrollCaches = null;\n        // protect against the initial pointerdown being too close to an edge and starting the scroll\n        this.everMovedUp = false;\n        this.everMovedDown = false;\n        this.everMovedLeft = false;\n        this.everMovedRight = false;\n        this.animate = function () {\n            if (_this.isAnimating) { // wasn't cancelled between animation calls\n                var edge = _this.computeBestEdge(_this.pointerScreenX + window.pageXOffset, _this.pointerScreenY + window.pageYOffset);\n                if (edge) {\n                    var now = getTime();\n                    _this.handleSide(edge, (now - _this.msSinceRequest) / 1000);\n                    _this.requestAnimation(now);\n                }\n                else {\n                    _this.isAnimating = false; // will stop animation\n                }\n            }\n        };\n    }\n    AutoScroller.prototype.start = function (pageX, pageY, scrollStartEl) {\n        if (this.isEnabled) {\n            this.scrollCaches = this.buildCaches(scrollStartEl);\n            this.pointerScreenX = null;\n            this.pointerScreenY = null;\n            this.everMovedUp = false;\n            this.everMovedDown = false;\n            this.everMovedLeft = false;\n            this.everMovedRight = false;\n            this.handleMove(pageX, pageY);\n        }\n    };\n    AutoScroller.prototype.handleMove = function (pageX, pageY) {\n        if (this.isEnabled) {\n            var pointerScreenX = pageX - window.pageXOffset;\n            var pointerScreenY = pageY - window.pageYOffset;\n            var yDelta = this.pointerScreenY === null ? 0 : pointerScreenY - this.pointerScreenY;\n            var xDelta = this.pointerScreenX === null ? 0 : pointerScreenX - this.pointerScreenX;\n            if (yDelta < 0) {\n                this.everMovedUp = true;\n            }\n            else if (yDelta > 0) {\n                this.everMovedDown = true;\n            }\n            if (xDelta < 0) {\n                this.everMovedLeft = true;\n            }\n            else if (xDelta > 0) {\n                this.everMovedRight = true;\n            }\n            this.pointerScreenX = pointerScreenX;\n            this.pointerScreenY = pointerScreenY;\n            if (!this.isAnimating) {\n                this.isAnimating = true;\n                this.requestAnimation(getTime());\n            }\n        }\n    };\n    AutoScroller.prototype.stop = function () {\n        if (this.isEnabled) {\n            this.isAnimating = false; // will stop animation\n            for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                var scrollCache = _a[_i];\n                scrollCache.destroy();\n            }\n            this.scrollCaches = null;\n        }\n    };\n    AutoScroller.prototype.requestAnimation = function (now) {\n        this.msSinceRequest = now;\n        requestAnimationFrame(this.animate);\n    };\n    AutoScroller.prototype.handleSide = function (edge, seconds) {\n        var scrollCache = edge.scrollCache;\n        var edgeThreshold = this.edgeThreshold;\n        var invDistance = edgeThreshold - edge.distance;\n        var velocity = // the closer to the edge, the faster we scroll\n         ((invDistance * invDistance) / (edgeThreshold * edgeThreshold)) * // quadratic\n            this.maxVelocity * seconds;\n        var sign = 1;\n        switch (edge.name) {\n            case 'left':\n                sign = -1;\n            // falls through\n            case 'right':\n                scrollCache.setScrollLeft(scrollCache.getScrollLeft() + velocity * sign);\n                break;\n            case 'top':\n                sign = -1;\n            // falls through\n            case 'bottom':\n                scrollCache.setScrollTop(scrollCache.getScrollTop() + velocity * sign);\n                break;\n        }\n    };\n    // left/top are relative to document topleft\n    AutoScroller.prototype.computeBestEdge = function (left, top) {\n        var edgeThreshold = this.edgeThreshold;\n        var bestSide = null;\n        var scrollCaches = this.scrollCaches || [];\n        for (var _i = 0, scrollCaches_1 = scrollCaches; _i < scrollCaches_1.length; _i++) {\n            var scrollCache = scrollCaches_1[_i];\n            var rect = scrollCache.clientRect;\n            var leftDist = left - rect.left;\n            var rightDist = rect.right - left;\n            var topDist = top - rect.top;\n            var bottomDist = rect.bottom - top;\n            // completely within the rect?\n            if (leftDist >= 0 && rightDist >= 0 && topDist >= 0 && bottomDist >= 0) {\n                if (topDist <= edgeThreshold && this.everMovedUp && scrollCache.canScrollUp() &&\n                    (!bestSide || bestSide.distance > topDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'top', distance: topDist };\n                }\n                if (bottomDist <= edgeThreshold && this.everMovedDown && scrollCache.canScrollDown() &&\n                    (!bestSide || bestSide.distance > bottomDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'bottom', distance: bottomDist };\n                }\n                if (leftDist <= edgeThreshold && this.everMovedLeft && scrollCache.canScrollLeft() &&\n                    (!bestSide || bestSide.distance > leftDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'left', distance: leftDist };\n                }\n                if (rightDist <= edgeThreshold && this.everMovedRight && scrollCache.canScrollRight() &&\n                    (!bestSide || bestSide.distance > rightDist)) {\n                    bestSide = { scrollCache: scrollCache, name: 'right', distance: rightDist };\n                }\n            }\n        }\n        return bestSide;\n    };\n    AutoScroller.prototype.buildCaches = function (scrollStartEl) {\n        return this.queryScrollEls(scrollStartEl).map(function (el) {\n            if (el === window) {\n                return new WindowScrollGeomCache(false); // false = don't listen to user-generated scrolls\n            }\n            return new ElementScrollGeomCache(el, false); // false = don't listen to user-generated scrolls\n        });\n    };\n    AutoScroller.prototype.queryScrollEls = function (scrollStartEl) {\n        var els = [];\n        for (var _i = 0, _a = this.scrollQuery; _i < _a.length; _i++) {\n            var query = _a[_i];\n            if (typeof query === 'object') {\n                els.push(query);\n            }\n            else {\n                els.push.apply(els, Array.prototype.slice.call(getElRoot(scrollStartEl).querySelectorAll(query)));\n            }\n        }\n        return els;\n    };\n    return AutoScroller;\n}());\n\n/*\nMonitors dragging on an element. Has a number of high-level features:\n- minimum distance required before dragging\n- minimum wait time (\"delay\") before dragging\n- a mirror element that follows the pointer\n*/\nvar FeaturefulElementDragging = /** @class */ (function (_super) {\n    __extends(FeaturefulElementDragging, _super);\n    function FeaturefulElementDragging(containerEl, selector) {\n        var _this = _super.call(this, containerEl) || this;\n        _this.containerEl = containerEl;\n        // options that can be directly set by caller\n        // the caller can also set the PointerDragging's options as well\n        _this.delay = null;\n        _this.minDistance = 0;\n        _this.touchScrollAllowed = true; // prevents drag from starting and blocks scrolling during drag\n        _this.mirrorNeedsRevert = false;\n        _this.isInteracting = false; // is the user validly moving the pointer? lasts until pointerup\n        _this.isDragging = false; // is it INTENTFULLY dragging? lasts until after revert animation\n        _this.isDelayEnded = false;\n        _this.isDistanceSurpassed = false;\n        _this.delayTimeoutId = null;\n        _this.onPointerDown = function (ev) {\n            if (!_this.isDragging) { // so new drag doesn't happen while revert animation is going\n                _this.isInteracting = true;\n                _this.isDelayEnded = false;\n                _this.isDistanceSurpassed = false;\n                preventSelection(document.body);\n                preventContextMenu(document.body);\n                // prevent links from being visited if there's an eventual drag.\n                // also prevents selection in older browsers (maybe?).\n                // not necessary for touch, besides, browser would complain about passiveness.\n                if (!ev.isTouch) {\n                    ev.origEvent.preventDefault();\n                }\n                _this.emitter.trigger('pointerdown', ev);\n                if (_this.isInteracting && // not destroyed via pointerdown handler\n                    !_this.pointer.shouldIgnoreMove) {\n                    // actions related to initiating dragstart+dragmove+dragend...\n                    _this.mirror.setIsVisible(false); // reset. caller must set-visible\n                    _this.mirror.start(ev.subjectEl, ev.pageX, ev.pageY); // must happen on first pointer down\n                    _this.startDelay(ev);\n                    if (!_this.minDistance) {\n                        _this.handleDistanceSurpassed(ev);\n                    }\n                }\n            }\n        };\n        _this.onPointerMove = function (ev) {\n            if (_this.isInteracting) {\n                _this.emitter.trigger('pointermove', ev);\n                if (!_this.isDistanceSurpassed) {\n                    var minDistance = _this.minDistance;\n                    var distanceSq = void 0; // current distance from the origin, squared\n                    var deltaX = ev.deltaX, deltaY = ev.deltaY;\n                    distanceSq = deltaX * deltaX + deltaY * deltaY;\n                    if (distanceSq >= minDistance * minDistance) { // use pythagorean theorem\n                        _this.handleDistanceSurpassed(ev);\n                    }\n                }\n                if (_this.isDragging) {\n                    // a real pointer move? (not one simulated by scrolling)\n                    if (ev.origEvent.type !== 'scroll') {\n                        _this.mirror.handleMove(ev.pageX, ev.pageY);\n                        _this.autoScroller.handleMove(ev.pageX, ev.pageY);\n                    }\n                    _this.emitter.trigger('dragmove', ev);\n                }\n            }\n        };\n        _this.onPointerUp = function (ev) {\n            if (_this.isInteracting) {\n                _this.isInteracting = false;\n                allowSelection(document.body);\n                allowContextMenu(document.body);\n                _this.emitter.trigger('pointerup', ev); // can potentially set mirrorNeedsRevert\n                if (_this.isDragging) {\n                    _this.autoScroller.stop();\n                    _this.tryStopDrag(ev); // which will stop the mirror\n                }\n                if (_this.delayTimeoutId) {\n                    clearTimeout(_this.delayTimeoutId);\n                    _this.delayTimeoutId = null;\n                }\n            }\n        };\n        var pointer = _this.pointer = new PointerDragging(containerEl);\n        pointer.emitter.on('pointerdown', _this.onPointerDown);\n        pointer.emitter.on('pointermove', _this.onPointerMove);\n        pointer.emitter.on('pointerup', _this.onPointerUp);\n        if (selector) {\n            pointer.selector = selector;\n        }\n        _this.mirror = new ElementMirror();\n        _this.autoScroller = new AutoScroller();\n        return _this;\n    }\n    FeaturefulElementDragging.prototype.destroy = function () {\n        this.pointer.destroy();\n        // HACK: simulate a pointer-up to end the current drag\n        // TODO: fire 'dragend' directly and stop interaction. discourage use of pointerup event (b/c might not fire)\n        this.onPointerUp({});\n    };\n    FeaturefulElementDragging.prototype.startDelay = function (ev) {\n        var _this = this;\n        if (typeof this.delay === 'number') {\n            this.delayTimeoutId = setTimeout(function () {\n                _this.delayTimeoutId = null;\n                _this.handleDelayEnd(ev);\n            }, this.delay); // not assignable to number!\n        }\n        else {\n            this.handleDelayEnd(ev);\n        }\n    };\n    FeaturefulElementDragging.prototype.handleDelayEnd = function (ev) {\n        this.isDelayEnded = true;\n        this.tryStartDrag(ev);\n    };\n    FeaturefulElementDragging.prototype.handleDistanceSurpassed = function (ev) {\n        this.isDistanceSurpassed = true;\n        this.tryStartDrag(ev);\n    };\n    FeaturefulElementDragging.prototype.tryStartDrag = function (ev) {\n        if (this.isDelayEnded && this.isDistanceSurpassed) {\n            if (!this.pointer.wasTouchScroll || this.touchScrollAllowed) {\n                this.isDragging = true;\n                this.mirrorNeedsRevert = false;\n                this.autoScroller.start(ev.pageX, ev.pageY, this.containerEl);\n                this.emitter.trigger('dragstart', ev);\n                if (this.touchScrollAllowed === false) {\n                    this.pointer.cancelTouchScroll();\n                }\n            }\n        }\n    };\n    FeaturefulElementDragging.prototype.tryStopDrag = function (ev) {\n        // .stop() is ALWAYS asynchronous, which we NEED because we want all pointerup events\n        // that come from the document to fire beforehand. much more convenient this way.\n        this.mirror.stop(this.mirrorNeedsRevert, this.stopDrag.bind(this, ev));\n    };\n    FeaturefulElementDragging.prototype.stopDrag = function (ev) {\n        this.isDragging = false;\n        this.emitter.trigger('dragend', ev);\n    };\n    // fill in the implementations...\n    FeaturefulElementDragging.prototype.setIgnoreMove = function (bool) {\n        this.pointer.shouldIgnoreMove = bool;\n    };\n    FeaturefulElementDragging.prototype.setMirrorIsVisible = function (bool) {\n        this.mirror.setIsVisible(bool);\n    };\n    FeaturefulElementDragging.prototype.setMirrorNeedsRevert = function (bool) {\n        this.mirrorNeedsRevert = bool;\n    };\n    FeaturefulElementDragging.prototype.setAutoScrollEnabled = function (bool) {\n        this.autoScroller.isEnabled = bool;\n    };\n    return FeaturefulElementDragging;\n}(ElementDragging));\n\n/*\nWhen this class is instantiated, it records the offset of an element (relative to the document topleft),\nand continues to monitor scrolling, updating the cached coordinates if it needs to.\nDoes not access the DOM after instantiation, so highly performant.\n\nAlso keeps track of all scrolling/overflow:hidden containers that are parents of the given element\nand an determine if a given point is inside the combined clipping rectangle.\n*/\nvar OffsetTracker = /** @class */ (function () {\n    function OffsetTracker(el) {\n        this.origRect = computeRect(el);\n        // will work fine for divs that have overflow:hidden\n        this.scrollCaches = getClippingParents(el).map(function (scrollEl) { return new ElementScrollGeomCache(scrollEl, true); });\n    }\n    OffsetTracker.prototype.destroy = function () {\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            scrollCache.destroy();\n        }\n    };\n    OffsetTracker.prototype.computeLeft = function () {\n        var left = this.origRect.left;\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            left += scrollCache.origScrollLeft - scrollCache.getScrollLeft();\n        }\n        return left;\n    };\n    OffsetTracker.prototype.computeTop = function () {\n        var top = this.origRect.top;\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            top += scrollCache.origScrollTop - scrollCache.getScrollTop();\n        }\n        return top;\n    };\n    OffsetTracker.prototype.isWithinClipping = function (pageX, pageY) {\n        var point = { left: pageX, top: pageY };\n        for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n            var scrollCache = _a[_i];\n            if (!isIgnoredClipping(scrollCache.getEventTarget()) &&\n                !pointInsideRect(point, scrollCache.clientRect)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    return OffsetTracker;\n}());\n// certain clipping containers should never constrain interactions, like <html> and <body>\n// https://github.com/fullcalendar/fullcalendar/issues/3615\nfunction isIgnoredClipping(node) {\n    var tagName = node.tagName;\n    return tagName === 'HTML' || tagName === 'BODY';\n}\n\n/*\nTracks movement over multiple droppable areas (aka \"hits\")\nthat exist in one or more DateComponents.\nRelies on an existing draggable.\n\nemits:\n- pointerdown\n- dragstart\n- hitchange - fires initially, even if not over a hit\n- pointerup\n- (hitchange - again, to null, if ended over a hit)\n- dragend\n*/\nvar HitDragging = /** @class */ (function () {\n    function HitDragging(dragging, droppableStore) {\n        var _this = this;\n        // options that can be set by caller\n        this.useSubjectCenter = false;\n        this.requireInitial = true; // if doesn't start out on a hit, won't emit any events\n        this.initialHit = null;\n        this.movingHit = null;\n        this.finalHit = null; // won't ever be populated if shouldIgnoreMove\n        this.handlePointerDown = function (ev) {\n            var dragging = _this.dragging;\n            _this.initialHit = null;\n            _this.movingHit = null;\n            _this.finalHit = null;\n            _this.prepareHits();\n            _this.processFirstCoord(ev);\n            if (_this.initialHit || !_this.requireInitial) {\n                dragging.setIgnoreMove(false);\n                // TODO: fire this before computing processFirstCoord, so listeners can cancel. this gets fired by almost every handler :(\n                _this.emitter.trigger('pointerdown', ev);\n            }\n            else {\n                dragging.setIgnoreMove(true);\n            }\n        };\n        this.handleDragStart = function (ev) {\n            _this.emitter.trigger('dragstart', ev);\n            _this.handleMove(ev, true); // force = fire even if initially null\n        };\n        this.handleDragMove = function (ev) {\n            _this.emitter.trigger('dragmove', ev);\n            _this.handleMove(ev);\n        };\n        this.handlePointerUp = function (ev) {\n            _this.releaseHits();\n            _this.emitter.trigger('pointerup', ev);\n        };\n        this.handleDragEnd = function (ev) {\n            if (_this.movingHit) {\n                _this.emitter.trigger('hitupdate', null, true, ev);\n            }\n            _this.finalHit = _this.movingHit;\n            _this.movingHit = null;\n            _this.emitter.trigger('dragend', ev);\n        };\n        this.droppableStore = droppableStore;\n        dragging.emitter.on('pointerdown', this.handlePointerDown);\n        dragging.emitter.on('dragstart', this.handleDragStart);\n        dragging.emitter.on('dragmove', this.handleDragMove);\n        dragging.emitter.on('pointerup', this.handlePointerUp);\n        dragging.emitter.on('dragend', this.handleDragEnd);\n        this.dragging = dragging;\n        this.emitter = new Emitter();\n    }\n    // sets initialHit\n    // sets coordAdjust\n    HitDragging.prototype.processFirstCoord = function (ev) {\n        var origPoint = { left: ev.pageX, top: ev.pageY };\n        var adjustedPoint = origPoint;\n        var subjectEl = ev.subjectEl;\n        var subjectRect;\n        if (subjectEl instanceof HTMLElement) { // i.e. not a Document/ShadowRoot\n            subjectRect = computeRect(subjectEl);\n            adjustedPoint = constrainPoint(adjustedPoint, subjectRect);\n        }\n        var initialHit = this.initialHit = this.queryHitForOffset(adjustedPoint.left, adjustedPoint.top);\n        if (initialHit) {\n            if (this.useSubjectCenter && subjectRect) {\n                var slicedSubjectRect = intersectRects(subjectRect, initialHit.rect);\n                if (slicedSubjectRect) {\n                    adjustedPoint = getRectCenter(slicedSubjectRect);\n                }\n            }\n            this.coordAdjust = diffPoints(adjustedPoint, origPoint);\n        }\n        else {\n            this.coordAdjust = { left: 0, top: 0 };\n        }\n    };\n    HitDragging.prototype.handleMove = function (ev, forceHandle) {\n        var hit = this.queryHitForOffset(ev.pageX + this.coordAdjust.left, ev.pageY + this.coordAdjust.top);\n        if (forceHandle || !isHitsEqual(this.movingHit, hit)) {\n            this.movingHit = hit;\n            this.emitter.trigger('hitupdate', hit, false, ev);\n        }\n    };\n    HitDragging.prototype.prepareHits = function () {\n        this.offsetTrackers = mapHash(this.droppableStore, function (interactionSettings) {\n            interactionSettings.component.prepareHits();\n            return new OffsetTracker(interactionSettings.el);\n        });\n    };\n    HitDragging.prototype.releaseHits = function () {\n        var offsetTrackers = this.offsetTrackers;\n        for (var id in offsetTrackers) {\n            offsetTrackers[id].destroy();\n        }\n        this.offsetTrackers = {};\n    };\n    HitDragging.prototype.queryHitForOffset = function (offsetLeft, offsetTop) {\n        var _a = this, droppableStore = _a.droppableStore, offsetTrackers = _a.offsetTrackers;\n        var bestHit = null;\n        for (var id in droppableStore) {\n            var component = droppableStore[id].component;\n            var offsetTracker = offsetTrackers[id];\n            if (offsetTracker && // wasn't destroyed mid-drag\n                offsetTracker.isWithinClipping(offsetLeft, offsetTop)) {\n                var originLeft = offsetTracker.computeLeft();\n                var originTop = offsetTracker.computeTop();\n                var positionLeft = offsetLeft - originLeft;\n                var positionTop = offsetTop - originTop;\n                var origRect = offsetTracker.origRect;\n                var width = origRect.right - origRect.left;\n                var height = origRect.bottom - origRect.top;\n                if (\n                // must be within the element's bounds\n                positionLeft >= 0 && positionLeft < width &&\n                    positionTop >= 0 && positionTop < height) {\n                    var hit = component.queryHit(positionLeft, positionTop, width, height);\n                    if (hit && (\n                    // make sure the hit is within activeRange, meaning it's not a dead cell\n                    rangeContainsRange(hit.dateProfile.activeRange, hit.dateSpan.range)) &&\n                        (!bestHit || hit.layer > bestHit.layer)) {\n                        hit.componentId = id;\n                        hit.context = component.context;\n                        // TODO: better way to re-orient rectangle\n                        hit.rect.left += originLeft;\n                        hit.rect.right += originLeft;\n                        hit.rect.top += originTop;\n                        hit.rect.bottom += originTop;\n                        bestHit = hit;\n                    }\n                }\n            }\n        }\n        return bestHit;\n    };\n    return HitDragging;\n}());\nfunction isHitsEqual(hit0, hit1) {\n    if (!hit0 && !hit1) {\n        return true;\n    }\n    if (Boolean(hit0) !== Boolean(hit1)) {\n        return false;\n    }\n    return isDateSpansEqual(hit0.dateSpan, hit1.dateSpan);\n}\n\nfunction buildDatePointApiWithContext(dateSpan, context) {\n    var props = {};\n    for (var _i = 0, _a = context.pluginHooks.datePointTransforms; _i < _a.length; _i++) {\n        var transform = _a[_i];\n        __assign(props, transform(dateSpan, context));\n    }\n    __assign(props, buildDatePointApi(dateSpan, context.dateEnv));\n    return props;\n}\nfunction buildDatePointApi(span, dateEnv) {\n    return {\n        date: dateEnv.toDate(span.range.start),\n        dateStr: dateEnv.formatIso(span.range.start, { omitTime: span.allDay }),\n        allDay: span.allDay,\n    };\n}\n\n/*\nMonitors when the user clicks on a specific date/time of a component.\nA pointerdown+pointerup on the same \"hit\" constitutes a click.\n*/\nvar DateClicking = /** @class */ (function (_super) {\n    __extends(DateClicking, _super);\n    function DateClicking(settings) {\n        var _this = _super.call(this, settings) || this;\n        _this.handlePointerDown = function (pev) {\n            var dragging = _this.dragging;\n            var downEl = pev.origEvent.target;\n            // do this in pointerdown (not dragend) because DOM might be mutated by the time dragend is fired\n            dragging.setIgnoreMove(!_this.component.isValidDateDownEl(downEl));\n        };\n        // won't even fire if moving was ignored\n        _this.handleDragEnd = function (ev) {\n            var component = _this.component;\n            var pointer = _this.dragging.pointer;\n            if (!pointer.wasTouchScroll) {\n                var _a = _this.hitDragging, initialHit = _a.initialHit, finalHit = _a.finalHit;\n                if (initialHit && finalHit && isHitsEqual(initialHit, finalHit)) {\n                    var context = component.context;\n                    var arg = __assign(__assign({}, buildDatePointApiWithContext(initialHit.dateSpan, context)), { dayEl: initialHit.dayEl, jsEvent: ev.origEvent, view: context.viewApi || context.calendarApi.view });\n                    context.emitter.trigger('dateClick', arg);\n                }\n            }\n        };\n        // we DO want to watch pointer moves because otherwise finalHit won't get populated\n        _this.dragging = new FeaturefulElementDragging(settings.el);\n        _this.dragging.autoScroller.isEnabled = false;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsToStore(settings));\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragend', _this.handleDragEnd);\n        return _this;\n    }\n    DateClicking.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return DateClicking;\n}(Interaction));\n\n/*\nTracks when the user selects a portion of time of a component,\nconstituted by a drag over date cells, with a possible delay at the beginning of the drag.\n*/\nvar DateSelecting = /** @class */ (function (_super) {\n    __extends(DateSelecting, _super);\n    function DateSelecting(settings) {\n        var _this = _super.call(this, settings) || this;\n        _this.dragSelection = null;\n        _this.handlePointerDown = function (ev) {\n            var _a = _this, component = _a.component, dragging = _a.dragging;\n            var options = component.context.options;\n            var canSelect = options.selectable &&\n                component.isValidDateDownEl(ev.origEvent.target);\n            // don't bother to watch expensive moves if component won't do selection\n            dragging.setIgnoreMove(!canSelect);\n            // if touch, require user to hold down\n            dragging.delay = ev.isTouch ? getComponentTouchDelay$1(component) : null;\n        };\n        _this.handleDragStart = function (ev) {\n            _this.component.context.calendarApi.unselect(ev); // unselect previous selections\n        };\n        _this.handleHitUpdate = function (hit, isFinal) {\n            var context = _this.component.context;\n            var dragSelection = null;\n            var isInvalid = false;\n            if (hit) {\n                var initialHit = _this.hitDragging.initialHit;\n                var disallowed = hit.componentId === initialHit.componentId\n                    && _this.isHitComboAllowed\n                    && !_this.isHitComboAllowed(initialHit, hit);\n                if (!disallowed) {\n                    dragSelection = joinHitsIntoSelection(initialHit, hit, context.pluginHooks.dateSelectionTransformers);\n                }\n                if (!dragSelection || !isDateSelectionValid(dragSelection, hit.dateProfile, context)) {\n                    isInvalid = true;\n                    dragSelection = null;\n                }\n            }\n            if (dragSelection) {\n                context.dispatch({ type: 'SELECT_DATES', selection: dragSelection });\n            }\n            else if (!isFinal) { // only unselect if moved away while dragging\n                context.dispatch({ type: 'UNSELECT_DATES' });\n            }\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                _this.dragSelection = dragSelection; // only clear if moved away from all hits while dragging\n            }\n        };\n        _this.handlePointerUp = function (pev) {\n            if (_this.dragSelection) {\n                // selection is already rendered, so just need to report selection\n                triggerDateSelect(_this.dragSelection, pev, _this.component.context);\n                _this.dragSelection = null;\n            }\n        };\n        var component = settings.component;\n        var options = component.context.options;\n        var dragging = _this.dragging = new FeaturefulElementDragging(settings.el);\n        dragging.touchScrollAllowed = false;\n        dragging.minDistance = options.selectMinDistance || 0;\n        dragging.autoScroller.isEnabled = options.dragScroll;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsToStore(settings));\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragstart', _this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n        hitDragging.emitter.on('pointerup', _this.handlePointerUp);\n        return _this;\n    }\n    DateSelecting.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return DateSelecting;\n}(Interaction));\nfunction getComponentTouchDelay$1(component) {\n    var options = component.context.options;\n    var delay = options.selectLongPressDelay;\n    if (delay == null) {\n        delay = options.longPressDelay;\n    }\n    return delay;\n}\nfunction joinHitsIntoSelection(hit0, hit1, dateSelectionTransformers) {\n    var dateSpan0 = hit0.dateSpan;\n    var dateSpan1 = hit1.dateSpan;\n    var ms = [\n        dateSpan0.range.start,\n        dateSpan0.range.end,\n        dateSpan1.range.start,\n        dateSpan1.range.end,\n    ];\n    ms.sort(compareNumbers);\n    var props = {};\n    for (var _i = 0, dateSelectionTransformers_1 = dateSelectionTransformers; _i < dateSelectionTransformers_1.length; _i++) {\n        var transformer = dateSelectionTransformers_1[_i];\n        var res = transformer(hit0, hit1);\n        if (res === false) {\n            return null;\n        }\n        if (res) {\n            __assign(props, res);\n        }\n    }\n    props.range = { start: ms[0], end: ms[3] };\n    props.allDay = dateSpan0.allDay;\n    return props;\n}\n\nvar EventDragging = /** @class */ (function (_super) {\n    __extends(EventDragging, _super);\n    function EventDragging(settings) {\n        var _this = _super.call(this, settings) || this;\n        // internal state\n        _this.subjectEl = null;\n        _this.subjectSeg = null; // the seg being selected/dragged\n        _this.isDragging = false;\n        _this.eventRange = null;\n        _this.relevantEvents = null; // the events being dragged\n        _this.receivingContext = null;\n        _this.validMutation = null;\n        _this.mutatedRelevantEvents = null;\n        _this.handlePointerDown = function (ev) {\n            var origTarget = ev.origEvent.target;\n            var _a = _this, component = _a.component, dragging = _a.dragging;\n            var mirror = dragging.mirror;\n            var options = component.context.options;\n            var initialContext = component.context;\n            _this.subjectEl = ev.subjectEl;\n            var subjectSeg = _this.subjectSeg = getElSeg(ev.subjectEl);\n            var eventRange = _this.eventRange = subjectSeg.eventRange;\n            var eventInstanceId = eventRange.instance.instanceId;\n            _this.relevantEvents = getRelevantEvents(initialContext.getCurrentData().eventStore, eventInstanceId);\n            dragging.minDistance = ev.isTouch ? 0 : options.eventDragMinDistance;\n            dragging.delay =\n                // only do a touch delay if touch and this event hasn't been selected yet\n                (ev.isTouch && eventInstanceId !== component.props.eventSelection) ?\n                    getComponentTouchDelay(component) :\n                    null;\n            if (options.fixedMirrorParent) {\n                mirror.parentNode = options.fixedMirrorParent;\n            }\n            else {\n                mirror.parentNode = elementClosest(origTarget, '.fc');\n            }\n            mirror.revertDuration = options.dragRevertDuration;\n            var isValid = component.isValidSegDownEl(origTarget) &&\n                !elementClosest(origTarget, '.fc-event-resizer'); // NOT on a resizer\n            dragging.setIgnoreMove(!isValid);\n            // disable dragging for elements that are resizable (ie, selectable)\n            // but are not draggable\n            _this.isDragging = isValid &&\n                ev.subjectEl.classList.contains('fc-event-draggable');\n        };\n        _this.handleDragStart = function (ev) {\n            var initialContext = _this.component.context;\n            var eventRange = _this.eventRange;\n            var eventInstanceId = eventRange.instance.instanceId;\n            if (ev.isTouch) {\n                // need to select a different event?\n                if (eventInstanceId !== _this.component.props.eventSelection) {\n                    initialContext.dispatch({ type: 'SELECT_EVENT', eventInstanceId: eventInstanceId });\n                }\n            }\n            else {\n                // if now using mouse, but was previous touch interaction, clear selected event\n                initialContext.dispatch({ type: 'UNSELECT_EVENT' });\n            }\n            if (_this.isDragging) {\n                initialContext.calendarApi.unselect(ev); // unselect *date* selection\n                initialContext.emitter.trigger('eventDragStart', {\n                    el: _this.subjectEl,\n                    event: new EventApi(initialContext, eventRange.def, eventRange.instance),\n                    jsEvent: ev.origEvent,\n                    view: initialContext.viewApi,\n                });\n            }\n        };\n        _this.handleHitUpdate = function (hit, isFinal) {\n            if (!_this.isDragging) {\n                return;\n            }\n            var relevantEvents = _this.relevantEvents;\n            var initialHit = _this.hitDragging.initialHit;\n            var initialContext = _this.component.context;\n            // states based on new hit\n            var receivingContext = null;\n            var mutation = null;\n            var mutatedRelevantEvents = null;\n            var isInvalid = false;\n            var interaction = {\n                affectedEvents: relevantEvents,\n                mutatedEvents: createEmptyEventStore(),\n                isEvent: true,\n            };\n            if (hit) {\n                receivingContext = hit.context;\n                var receivingOptions = receivingContext.options;\n                if (initialContext === receivingContext ||\n                    (receivingOptions.editable && receivingOptions.droppable)) {\n                    mutation = computeEventMutation(initialHit, hit, receivingContext.getCurrentData().pluginHooks.eventDragMutationMassagers);\n                    if (mutation) {\n                        mutatedRelevantEvents = applyMutationToEventStore(relevantEvents, receivingContext.getCurrentData().eventUiBases, mutation, receivingContext);\n                        interaction.mutatedEvents = mutatedRelevantEvents;\n                        if (!isInteractionValid(interaction, hit.dateProfile, receivingContext)) {\n                            isInvalid = true;\n                            mutation = null;\n                            mutatedRelevantEvents = null;\n                            interaction.mutatedEvents = createEmptyEventStore();\n                        }\n                    }\n                }\n                else {\n                    receivingContext = null;\n                }\n            }\n            _this.displayDrag(receivingContext, interaction);\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                if (initialContext === receivingContext && // TODO: write test for this\n                    isHitsEqual(initialHit, hit)) {\n                    mutation = null;\n                }\n                _this.dragging.setMirrorNeedsRevert(!mutation);\n                // render the mirror if no already-rendered mirror\n                // TODO: wish we could somehow wait for dispatch to guarantee render\n                _this.dragging.setMirrorIsVisible(!hit || !getElRoot(_this.subjectEl).querySelector('.fc-event-mirror'));\n                // assign states based on new hit\n                _this.receivingContext = receivingContext;\n                _this.validMutation = mutation;\n                _this.mutatedRelevantEvents = mutatedRelevantEvents;\n            }\n        };\n        _this.handlePointerUp = function () {\n            if (!_this.isDragging) {\n                _this.cleanup(); // because handleDragEnd won't fire\n            }\n        };\n        _this.handleDragEnd = function (ev) {\n            if (_this.isDragging) {\n                var initialContext_1 = _this.component.context;\n                var initialView = initialContext_1.viewApi;\n                var _a = _this, receivingContext_1 = _a.receivingContext, validMutation = _a.validMutation;\n                var eventDef = _this.eventRange.def;\n                var eventInstance = _this.eventRange.instance;\n                var eventApi = new EventApi(initialContext_1, eventDef, eventInstance);\n                var relevantEvents_1 = _this.relevantEvents;\n                var mutatedRelevantEvents_1 = _this.mutatedRelevantEvents;\n                var finalHit = _this.hitDragging.finalHit;\n                _this.clearDrag(); // must happen after revert animation\n                initialContext_1.emitter.trigger('eventDragStop', {\n                    el: _this.subjectEl,\n                    event: eventApi,\n                    jsEvent: ev.origEvent,\n                    view: initialView,\n                });\n                if (validMutation) {\n                    // dropped within same calendar\n                    if (receivingContext_1 === initialContext_1) {\n                        var updatedEventApi = new EventApi(initialContext_1, mutatedRelevantEvents_1.defs[eventDef.defId], eventInstance ? mutatedRelevantEvents_1.instances[eventInstance.instanceId] : null);\n                        initialContext_1.dispatch({\n                            type: 'MERGE_EVENTS',\n                            eventStore: mutatedRelevantEvents_1,\n                        });\n                        var eventChangeArg = {\n                            oldEvent: eventApi,\n                            event: updatedEventApi,\n                            relatedEvents: buildEventApis(mutatedRelevantEvents_1, initialContext_1, eventInstance),\n                            revert: function () {\n                                initialContext_1.dispatch({\n                                    type: 'MERGE_EVENTS',\n                                    eventStore: relevantEvents_1, // the pre-change data\n                                });\n                            },\n                        };\n                        var transformed = {};\n                        for (var _i = 0, _b = initialContext_1.getCurrentData().pluginHooks.eventDropTransformers; _i < _b.length; _i++) {\n                            var transformer = _b[_i];\n                            __assign(transformed, transformer(validMutation, initialContext_1));\n                        }\n                        initialContext_1.emitter.trigger('eventDrop', __assign(__assign(__assign({}, eventChangeArg), transformed), { el: ev.subjectEl, delta: validMutation.datesDelta, jsEvent: ev.origEvent, view: initialView }));\n                        initialContext_1.emitter.trigger('eventChange', eventChangeArg);\n                        // dropped in different calendar\n                    }\n                    else if (receivingContext_1) {\n                        var eventRemoveArg = {\n                            event: eventApi,\n                            relatedEvents: buildEventApis(relevantEvents_1, initialContext_1, eventInstance),\n                            revert: function () {\n                                initialContext_1.dispatch({\n                                    type: 'MERGE_EVENTS',\n                                    eventStore: relevantEvents_1,\n                                });\n                            },\n                        };\n                        initialContext_1.emitter.trigger('eventLeave', __assign(__assign({}, eventRemoveArg), { draggedEl: ev.subjectEl, view: initialView }));\n                        initialContext_1.dispatch({\n                            type: 'REMOVE_EVENTS',\n                            eventStore: relevantEvents_1,\n                        });\n                        initialContext_1.emitter.trigger('eventRemove', eventRemoveArg);\n                        var addedEventDef = mutatedRelevantEvents_1.defs[eventDef.defId];\n                        var addedEventInstance = mutatedRelevantEvents_1.instances[eventInstance.instanceId];\n                        var addedEventApi = new EventApi(receivingContext_1, addedEventDef, addedEventInstance);\n                        receivingContext_1.dispatch({\n                            type: 'MERGE_EVENTS',\n                            eventStore: mutatedRelevantEvents_1,\n                        });\n                        var eventAddArg = {\n                            event: addedEventApi,\n                            relatedEvents: buildEventApis(mutatedRelevantEvents_1, receivingContext_1, addedEventInstance),\n                            revert: function () {\n                                receivingContext_1.dispatch({\n                                    type: 'REMOVE_EVENTS',\n                                    eventStore: mutatedRelevantEvents_1,\n                                });\n                            },\n                        };\n                        receivingContext_1.emitter.trigger('eventAdd', eventAddArg);\n                        if (ev.isTouch) {\n                            receivingContext_1.dispatch({\n                                type: 'SELECT_EVENT',\n                                eventInstanceId: eventInstance.instanceId,\n                            });\n                        }\n                        receivingContext_1.emitter.trigger('drop', __assign(__assign({}, buildDatePointApiWithContext(finalHit.dateSpan, receivingContext_1)), { draggedEl: ev.subjectEl, jsEvent: ev.origEvent, view: finalHit.context.viewApi }));\n                        receivingContext_1.emitter.trigger('eventReceive', __assign(__assign({}, eventAddArg), { draggedEl: ev.subjectEl, view: finalHit.context.viewApi }));\n                    }\n                }\n                else {\n                    initialContext_1.emitter.trigger('_noEventDrop');\n                }\n            }\n            _this.cleanup();\n        };\n        var component = _this.component;\n        var options = component.context.options;\n        var dragging = _this.dragging = new FeaturefulElementDragging(settings.el);\n        dragging.pointer.selector = EventDragging.SELECTOR;\n        dragging.touchScrollAllowed = false;\n        dragging.autoScroller.isEnabled = options.dragScroll;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsStore);\n        hitDragging.useSubjectCenter = settings.useEventCenter;\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragstart', _this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n        hitDragging.emitter.on('pointerup', _this.handlePointerUp);\n        hitDragging.emitter.on('dragend', _this.handleDragEnd);\n        return _this;\n    }\n    EventDragging.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    // render a drag state on the next receivingCalendar\n    EventDragging.prototype.displayDrag = function (nextContext, state) {\n        var initialContext = this.component.context;\n        var prevContext = this.receivingContext;\n        // does the previous calendar need to be cleared?\n        if (prevContext && prevContext !== nextContext) {\n            // does the initial calendar need to be cleared?\n            // if so, don't clear all the way. we still need to to hide the affectedEvents\n            if (prevContext === initialContext) {\n                prevContext.dispatch({\n                    type: 'SET_EVENT_DRAG',\n                    state: {\n                        affectedEvents: state.affectedEvents,\n                        mutatedEvents: createEmptyEventStore(),\n                        isEvent: true,\n                    },\n                });\n                // completely clear the old calendar if it wasn't the initial\n            }\n            else {\n                prevContext.dispatch({ type: 'UNSET_EVENT_DRAG' });\n            }\n        }\n        if (nextContext) {\n            nextContext.dispatch({ type: 'SET_EVENT_DRAG', state: state });\n        }\n    };\n    EventDragging.prototype.clearDrag = function () {\n        var initialCalendar = this.component.context;\n        var receivingContext = this.receivingContext;\n        if (receivingContext) {\n            receivingContext.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n        // the initial calendar might have an dummy drag state from displayDrag\n        if (initialCalendar !== receivingContext) {\n            initialCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n    };\n    EventDragging.prototype.cleanup = function () {\n        this.subjectSeg = null;\n        this.isDragging = false;\n        this.eventRange = null;\n        this.relevantEvents = null;\n        this.receivingContext = null;\n        this.validMutation = null;\n        this.mutatedRelevantEvents = null;\n    };\n    // TODO: test this in IE11\n    // QUESTION: why do we need it on the resizable???\n    EventDragging.SELECTOR = '.fc-event-draggable, .fc-event-resizable';\n    return EventDragging;\n}(Interaction));\nfunction computeEventMutation(hit0, hit1, massagers) {\n    var dateSpan0 = hit0.dateSpan;\n    var dateSpan1 = hit1.dateSpan;\n    var date0 = dateSpan0.range.start;\n    var date1 = dateSpan1.range.start;\n    var standardProps = {};\n    if (dateSpan0.allDay !== dateSpan1.allDay) {\n        standardProps.allDay = dateSpan1.allDay;\n        standardProps.hasEnd = hit1.context.options.allDayMaintainDuration;\n        if (dateSpan1.allDay) {\n            // means date1 is already start-of-day,\n            // but date0 needs to be converted\n            date0 = startOfDay(date0);\n        }\n    }\n    var delta = diffDates(date0, date1, hit0.context.dateEnv, hit0.componentId === hit1.componentId ?\n        hit0.largeUnit :\n        null);\n    if (delta.milliseconds) { // has hours/minutes/seconds\n        standardProps.allDay = false;\n    }\n    var mutation = {\n        datesDelta: delta,\n        standardProps: standardProps,\n    };\n    for (var _i = 0, massagers_1 = massagers; _i < massagers_1.length; _i++) {\n        var massager = massagers_1[_i];\n        massager(mutation, hit0, hit1);\n    }\n    return mutation;\n}\nfunction getComponentTouchDelay(component) {\n    var options = component.context.options;\n    var delay = options.eventLongPressDelay;\n    if (delay == null) {\n        delay = options.longPressDelay;\n    }\n    return delay;\n}\n\nvar EventResizing = /** @class */ (function (_super) {\n    __extends(EventResizing, _super);\n    function EventResizing(settings) {\n        var _this = _super.call(this, settings) || this;\n        // internal state\n        _this.draggingSegEl = null;\n        _this.draggingSeg = null; // TODO: rename to resizingSeg? subjectSeg?\n        _this.eventRange = null;\n        _this.relevantEvents = null;\n        _this.validMutation = null;\n        _this.mutatedRelevantEvents = null;\n        _this.handlePointerDown = function (ev) {\n            var component = _this.component;\n            var segEl = _this.querySegEl(ev);\n            var seg = getElSeg(segEl);\n            var eventRange = _this.eventRange = seg.eventRange;\n            _this.dragging.minDistance = component.context.options.eventDragMinDistance;\n            // if touch, need to be working with a selected event\n            _this.dragging.setIgnoreMove(!_this.component.isValidSegDownEl(ev.origEvent.target) ||\n                (ev.isTouch && _this.component.props.eventSelection !== eventRange.instance.instanceId));\n        };\n        _this.handleDragStart = function (ev) {\n            var context = _this.component.context;\n            var eventRange = _this.eventRange;\n            _this.relevantEvents = getRelevantEvents(context.getCurrentData().eventStore, _this.eventRange.instance.instanceId);\n            var segEl = _this.querySegEl(ev);\n            _this.draggingSegEl = segEl;\n            _this.draggingSeg = getElSeg(segEl);\n            context.calendarApi.unselect();\n            context.emitter.trigger('eventResizeStart', {\n                el: segEl,\n                event: new EventApi(context, eventRange.def, eventRange.instance),\n                jsEvent: ev.origEvent,\n                view: context.viewApi,\n            });\n        };\n        _this.handleHitUpdate = function (hit, isFinal, ev) {\n            var context = _this.component.context;\n            var relevantEvents = _this.relevantEvents;\n            var initialHit = _this.hitDragging.initialHit;\n            var eventInstance = _this.eventRange.instance;\n            var mutation = null;\n            var mutatedRelevantEvents = null;\n            var isInvalid = false;\n            var interaction = {\n                affectedEvents: relevantEvents,\n                mutatedEvents: createEmptyEventStore(),\n                isEvent: true,\n            };\n            if (hit) {\n                var disallowed = hit.componentId === initialHit.componentId\n                    && _this.isHitComboAllowed\n                    && !_this.isHitComboAllowed(initialHit, hit);\n                if (!disallowed) {\n                    mutation = computeMutation(initialHit, hit, ev.subjectEl.classList.contains('fc-event-resizer-start'), eventInstance.range);\n                }\n            }\n            if (mutation) {\n                mutatedRelevantEvents = applyMutationToEventStore(relevantEvents, context.getCurrentData().eventUiBases, mutation, context);\n                interaction.mutatedEvents = mutatedRelevantEvents;\n                if (!isInteractionValid(interaction, hit.dateProfile, context)) {\n                    isInvalid = true;\n                    mutation = null;\n                    mutatedRelevantEvents = null;\n                    interaction.mutatedEvents = null;\n                }\n            }\n            if (mutatedRelevantEvents) {\n                context.dispatch({\n                    type: 'SET_EVENT_RESIZE',\n                    state: interaction,\n                });\n            }\n            else {\n                context.dispatch({ type: 'UNSET_EVENT_RESIZE' });\n            }\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                if (mutation && isHitsEqual(initialHit, hit)) {\n                    mutation = null;\n                }\n                _this.validMutation = mutation;\n                _this.mutatedRelevantEvents = mutatedRelevantEvents;\n            }\n        };\n        _this.handleDragEnd = function (ev) {\n            var context = _this.component.context;\n            var eventDef = _this.eventRange.def;\n            var eventInstance = _this.eventRange.instance;\n            var eventApi = new EventApi(context, eventDef, eventInstance);\n            var relevantEvents = _this.relevantEvents;\n            var mutatedRelevantEvents = _this.mutatedRelevantEvents;\n            context.emitter.trigger('eventResizeStop', {\n                el: _this.draggingSegEl,\n                event: eventApi,\n                jsEvent: ev.origEvent,\n                view: context.viewApi,\n            });\n            if (_this.validMutation) {\n                var updatedEventApi = new EventApi(context, mutatedRelevantEvents.defs[eventDef.defId], eventInstance ? mutatedRelevantEvents.instances[eventInstance.instanceId] : null);\n                context.dispatch({\n                    type: 'MERGE_EVENTS',\n                    eventStore: mutatedRelevantEvents,\n                });\n                var eventChangeArg = {\n                    oldEvent: eventApi,\n                    event: updatedEventApi,\n                    relatedEvents: buildEventApis(mutatedRelevantEvents, context, eventInstance),\n                    revert: function () {\n                        context.dispatch({\n                            type: 'MERGE_EVENTS',\n                            eventStore: relevantEvents, // the pre-change events\n                        });\n                    },\n                };\n                context.emitter.trigger('eventResize', __assign(__assign({}, eventChangeArg), { el: _this.draggingSegEl, startDelta: _this.validMutation.startDelta || createDuration(0), endDelta: _this.validMutation.endDelta || createDuration(0), jsEvent: ev.origEvent, view: context.viewApi }));\n                context.emitter.trigger('eventChange', eventChangeArg);\n            }\n            else {\n                context.emitter.trigger('_noEventResize');\n            }\n            // reset all internal state\n            _this.draggingSeg = null;\n            _this.relevantEvents = null;\n            _this.validMutation = null;\n            // okay to keep eventInstance around. useful to set it in handlePointerDown\n        };\n        var component = settings.component;\n        var dragging = _this.dragging = new FeaturefulElementDragging(settings.el);\n        dragging.pointer.selector = '.fc-event-resizer';\n        dragging.touchScrollAllowed = false;\n        dragging.autoScroller.isEnabled = component.context.options.dragScroll;\n        var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, interactionSettingsToStore(settings));\n        hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n        hitDragging.emitter.on('dragstart', _this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n        hitDragging.emitter.on('dragend', _this.handleDragEnd);\n        return _this;\n    }\n    EventResizing.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    EventResizing.prototype.querySegEl = function (ev) {\n        return elementClosest(ev.subjectEl, '.fc-event');\n    };\n    return EventResizing;\n}(Interaction));\nfunction computeMutation(hit0, hit1, isFromStart, instanceRange) {\n    var dateEnv = hit0.context.dateEnv;\n    var date0 = hit0.dateSpan.range.start;\n    var date1 = hit1.dateSpan.range.start;\n    var delta = diffDates(date0, date1, dateEnv, hit0.largeUnit);\n    if (isFromStart) {\n        if (dateEnv.add(instanceRange.start, delta) < instanceRange.end) {\n            return { startDelta: delta };\n        }\n    }\n    else if (dateEnv.add(instanceRange.end, delta) > instanceRange.start) {\n        return { endDelta: delta };\n    }\n    return null;\n}\n\nvar UnselectAuto = /** @class */ (function () {\n    function UnselectAuto(context) {\n        var _this = this;\n        this.context = context;\n        this.isRecentPointerDateSelect = false; // wish we could use a selector to detect date selection, but uses hit system\n        this.matchesCancel = false;\n        this.matchesEvent = false;\n        this.onSelect = function (selectInfo) {\n            if (selectInfo.jsEvent) {\n                _this.isRecentPointerDateSelect = true;\n            }\n        };\n        this.onDocumentPointerDown = function (pev) {\n            var unselectCancel = _this.context.options.unselectCancel;\n            var downEl = getEventTargetViaRoot(pev.origEvent);\n            _this.matchesCancel = !!elementClosest(downEl, unselectCancel);\n            _this.matchesEvent = !!elementClosest(downEl, EventDragging.SELECTOR); // interaction started on an event?\n        };\n        this.onDocumentPointerUp = function (pev) {\n            var context = _this.context;\n            var documentPointer = _this.documentPointer;\n            var calendarState = context.getCurrentData();\n            // touch-scrolling should never unfocus any type of selection\n            if (!documentPointer.wasTouchScroll) {\n                if (calendarState.dateSelection && // an existing date selection?\n                    !_this.isRecentPointerDateSelect // a new pointer-initiated date selection since last onDocumentPointerUp?\n                ) {\n                    var unselectAuto = context.options.unselectAuto;\n                    if (unselectAuto && (!unselectAuto || !_this.matchesCancel)) {\n                        context.calendarApi.unselect(pev);\n                    }\n                }\n                if (calendarState.eventSelection && // an existing event selected?\n                    !_this.matchesEvent // interaction DIDN'T start on an event\n                ) {\n                    context.dispatch({ type: 'UNSELECT_EVENT' });\n                }\n            }\n            _this.isRecentPointerDateSelect = false;\n        };\n        var documentPointer = this.documentPointer = new PointerDragging(document);\n        documentPointer.shouldIgnoreMove = true;\n        documentPointer.shouldWatchScroll = false;\n        documentPointer.emitter.on('pointerdown', this.onDocumentPointerDown);\n        documentPointer.emitter.on('pointerup', this.onDocumentPointerUp);\n        /*\n        TODO: better way to know about whether there was a selection with the pointer\n        */\n        context.emitter.on('select', this.onSelect);\n    }\n    UnselectAuto.prototype.destroy = function () {\n        this.context.emitter.off('select', this.onSelect);\n        this.documentPointer.destroy();\n    };\n    return UnselectAuto;\n}());\n\nvar OPTION_REFINERS = {\n    fixedMirrorParent: identity,\n};\nvar LISTENER_REFINERS = {\n    dateClick: identity,\n    eventDragStart: identity,\n    eventDragStop: identity,\n    eventDrop: identity,\n    eventResizeStart: identity,\n    eventResizeStop: identity,\n    eventResize: identity,\n    drop: identity,\n    eventReceive: identity,\n    eventLeave: identity,\n};\n\n/*\nGiven an already instantiated draggable object for one-or-more elements,\nInterprets any dragging as an attempt to drag an events that lives outside\nof a calendar onto a calendar.\n*/\nvar ExternalElementDragging = /** @class */ (function () {\n    function ExternalElementDragging(dragging, suppliedDragMeta) {\n        var _this = this;\n        this.receivingContext = null;\n        this.droppableEvent = null; // will exist for all drags, even if create:false\n        this.suppliedDragMeta = null;\n        this.dragMeta = null;\n        this.handleDragStart = function (ev) {\n            _this.dragMeta = _this.buildDragMeta(ev.subjectEl);\n        };\n        this.handleHitUpdate = function (hit, isFinal, ev) {\n            var dragging = _this.hitDragging.dragging;\n            var receivingContext = null;\n            var droppableEvent = null;\n            var isInvalid = false;\n            var interaction = {\n                affectedEvents: createEmptyEventStore(),\n                mutatedEvents: createEmptyEventStore(),\n                isEvent: _this.dragMeta.create,\n            };\n            if (hit) {\n                receivingContext = hit.context;\n                if (_this.canDropElOnCalendar(ev.subjectEl, receivingContext)) {\n                    droppableEvent = computeEventForDateSpan(hit.dateSpan, _this.dragMeta, receivingContext);\n                    interaction.mutatedEvents = eventTupleToStore(droppableEvent);\n                    isInvalid = !isInteractionValid(interaction, hit.dateProfile, receivingContext);\n                    if (isInvalid) {\n                        interaction.mutatedEvents = createEmptyEventStore();\n                        droppableEvent = null;\n                    }\n                }\n            }\n            _this.displayDrag(receivingContext, interaction);\n            // show mirror if no already-rendered mirror element OR if we are shutting down the mirror (?)\n            // TODO: wish we could somehow wait for dispatch to guarantee render\n            dragging.setMirrorIsVisible(isFinal || !droppableEvent || !document.querySelector('.fc-event-mirror'));\n            if (!isInvalid) {\n                enableCursor();\n            }\n            else {\n                disableCursor();\n            }\n            if (!isFinal) {\n                dragging.setMirrorNeedsRevert(!droppableEvent);\n                _this.receivingContext = receivingContext;\n                _this.droppableEvent = droppableEvent;\n            }\n        };\n        this.handleDragEnd = function (pev) {\n            var _a = _this, receivingContext = _a.receivingContext, droppableEvent = _a.droppableEvent;\n            _this.clearDrag();\n            if (receivingContext && droppableEvent) {\n                var finalHit = _this.hitDragging.finalHit;\n                var finalView = finalHit.context.viewApi;\n                var dragMeta = _this.dragMeta;\n                receivingContext.emitter.trigger('drop', __assign(__assign({}, buildDatePointApiWithContext(finalHit.dateSpan, receivingContext)), { draggedEl: pev.subjectEl, jsEvent: pev.origEvent, view: finalView }));\n                if (dragMeta.create) {\n                    var addingEvents_1 = eventTupleToStore(droppableEvent);\n                    receivingContext.dispatch({\n                        type: 'MERGE_EVENTS',\n                        eventStore: addingEvents_1,\n                    });\n                    if (pev.isTouch) {\n                        receivingContext.dispatch({\n                            type: 'SELECT_EVENT',\n                            eventInstanceId: droppableEvent.instance.instanceId,\n                        });\n                    }\n                    // signal that an external event landed\n                    receivingContext.emitter.trigger('eventReceive', {\n                        event: new EventApi(receivingContext, droppableEvent.def, droppableEvent.instance),\n                        relatedEvents: [],\n                        revert: function () {\n                            receivingContext.dispatch({\n                                type: 'REMOVE_EVENTS',\n                                eventStore: addingEvents_1,\n                            });\n                        },\n                        draggedEl: pev.subjectEl,\n                        view: finalView,\n                    });\n                }\n            }\n            _this.receivingContext = null;\n            _this.droppableEvent = null;\n        };\n        var hitDragging = this.hitDragging = new HitDragging(dragging, interactionSettingsStore);\n        hitDragging.requireInitial = false; // will start outside of a component\n        hitDragging.emitter.on('dragstart', this.handleDragStart);\n        hitDragging.emitter.on('hitupdate', this.handleHitUpdate);\n        hitDragging.emitter.on('dragend', this.handleDragEnd);\n        this.suppliedDragMeta = suppliedDragMeta;\n    }\n    ExternalElementDragging.prototype.buildDragMeta = function (subjectEl) {\n        if (typeof this.suppliedDragMeta === 'object') {\n            return parseDragMeta(this.suppliedDragMeta);\n        }\n        if (typeof this.suppliedDragMeta === 'function') {\n            return parseDragMeta(this.suppliedDragMeta(subjectEl));\n        }\n        return getDragMetaFromEl(subjectEl);\n    };\n    ExternalElementDragging.prototype.displayDrag = function (nextContext, state) {\n        var prevContext = this.receivingContext;\n        if (prevContext && prevContext !== nextContext) {\n            prevContext.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n        if (nextContext) {\n            nextContext.dispatch({ type: 'SET_EVENT_DRAG', state: state });\n        }\n    };\n    ExternalElementDragging.prototype.clearDrag = function () {\n        if (this.receivingContext) {\n            this.receivingContext.dispatch({ type: 'UNSET_EVENT_DRAG' });\n        }\n    };\n    ExternalElementDragging.prototype.canDropElOnCalendar = function (el, receivingContext) {\n        var dropAccept = receivingContext.options.dropAccept;\n        if (typeof dropAccept === 'function') {\n            return dropAccept.call(receivingContext.calendarApi, el);\n        }\n        if (typeof dropAccept === 'string' && dropAccept) {\n            return Boolean(elementMatches(el, dropAccept));\n        }\n        return true;\n    };\n    return ExternalElementDragging;\n}());\n// Utils for computing event store from the DragMeta\n// ----------------------------------------------------------------------------------------------------\nfunction computeEventForDateSpan(dateSpan, dragMeta, context) {\n    var defProps = __assign({}, dragMeta.leftoverProps);\n    for (var _i = 0, _a = context.pluginHooks.externalDefTransforms; _i < _a.length; _i++) {\n        var transform = _a[_i];\n        __assign(defProps, transform(dateSpan, dragMeta));\n    }\n    var _b = refineEventDef(defProps, context), refined = _b.refined, extra = _b.extra;\n    var def = parseEventDef(refined, extra, dragMeta.sourceId, dateSpan.allDay, context.options.forceEventDuration || Boolean(dragMeta.duration), // hasEnd\n    context);\n    var start = dateSpan.range.start;\n    // only rely on time info if drop zone is all-day,\n    // otherwise, we already know the time\n    if (dateSpan.allDay && dragMeta.startTime) {\n        start = context.dateEnv.add(start, dragMeta.startTime);\n    }\n    var end = dragMeta.duration ?\n        context.dateEnv.add(start, dragMeta.duration) :\n        getDefaultEventEnd(dateSpan.allDay, start, context);\n    var instance = createEventInstance(def.defId, { start: start, end: end });\n    return { def: def, instance: instance };\n}\n// Utils for extracting data from element\n// ----------------------------------------------------------------------------------------------------\nfunction getDragMetaFromEl(el) {\n    var str = getEmbeddedElData(el, 'event');\n    var obj = str ?\n        JSON.parse(str) :\n        { create: false }; // if no embedded data, assume no event creation\n    return parseDragMeta(obj);\n}\nconfig.dataAttrPrefix = '';\nfunction getEmbeddedElData(el, name) {\n    var prefix = config.dataAttrPrefix;\n    var prefixedName = (prefix ? prefix + '-' : '') + name;\n    return el.getAttribute('data-' + prefixedName) || '';\n}\n\n/*\nMakes an element (that is *external* to any calendar) draggable.\nCan pass in data that determines how an event will be created when dropped onto a calendar.\nLeverages FullCalendar's internal drag-n-drop functionality WITHOUT a third-party drag system.\n*/\nvar ExternalDraggable = /** @class */ (function () {\n    function ExternalDraggable(el, settings) {\n        var _this = this;\n        if (settings === void 0) { settings = {}; }\n        this.handlePointerDown = function (ev) {\n            var dragging = _this.dragging;\n            var _a = _this.settings, minDistance = _a.minDistance, longPressDelay = _a.longPressDelay;\n            dragging.minDistance =\n                minDistance != null ?\n                    minDistance :\n                    (ev.isTouch ? 0 : BASE_OPTION_DEFAULTS.eventDragMinDistance);\n            dragging.delay =\n                ev.isTouch ? // TODO: eventually read eventLongPressDelay instead vvv\n                    (longPressDelay != null ? longPressDelay : BASE_OPTION_DEFAULTS.longPressDelay) :\n                    0;\n        };\n        this.handleDragStart = function (ev) {\n            if (ev.isTouch &&\n                _this.dragging.delay &&\n                ev.subjectEl.classList.contains('fc-event')) {\n                _this.dragging.mirror.getMirrorEl().classList.add('fc-event-selected');\n            }\n        };\n        this.settings = settings;\n        var dragging = this.dragging = new FeaturefulElementDragging(el);\n        dragging.touchScrollAllowed = false;\n        if (settings.itemSelector != null) {\n            dragging.pointer.selector = settings.itemSelector;\n        }\n        if (settings.appendTo != null) {\n            dragging.mirror.parentNode = settings.appendTo; // TODO: write tests\n        }\n        dragging.emitter.on('pointerdown', this.handlePointerDown);\n        dragging.emitter.on('dragstart', this.handleDragStart);\n        new ExternalElementDragging(dragging, settings.eventData); // eslint-disable-line no-new\n    }\n    ExternalDraggable.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return ExternalDraggable;\n}());\n\n/*\nDetects when a *THIRD-PARTY* drag-n-drop system interacts with elements.\nThe third-party system is responsible for drawing the visuals effects of the drag.\nThis class simply monitors for pointer movements and fires events.\nIt also has the ability to hide the moving element (the \"mirror\") during the drag.\n*/\nvar InferredElementDragging = /** @class */ (function (_super) {\n    __extends(InferredElementDragging, _super);\n    function InferredElementDragging(containerEl) {\n        var _this = _super.call(this, containerEl) || this;\n        _this.shouldIgnoreMove = false;\n        _this.mirrorSelector = '';\n        _this.currentMirrorEl = null;\n        _this.handlePointerDown = function (ev) {\n            _this.emitter.trigger('pointerdown', ev);\n            if (!_this.shouldIgnoreMove) {\n                // fire dragstart right away. does not support delay or min-distance\n                _this.emitter.trigger('dragstart', ev);\n            }\n        };\n        _this.handlePointerMove = function (ev) {\n            if (!_this.shouldIgnoreMove) {\n                _this.emitter.trigger('dragmove', ev);\n            }\n        };\n        _this.handlePointerUp = function (ev) {\n            _this.emitter.trigger('pointerup', ev);\n            if (!_this.shouldIgnoreMove) {\n                // fire dragend right away. does not support a revert animation\n                _this.emitter.trigger('dragend', ev);\n            }\n        };\n        var pointer = _this.pointer = new PointerDragging(containerEl);\n        pointer.emitter.on('pointerdown', _this.handlePointerDown);\n        pointer.emitter.on('pointermove', _this.handlePointerMove);\n        pointer.emitter.on('pointerup', _this.handlePointerUp);\n        return _this;\n    }\n    InferredElementDragging.prototype.destroy = function () {\n        this.pointer.destroy();\n    };\n    InferredElementDragging.prototype.setIgnoreMove = function (bool) {\n        this.shouldIgnoreMove = bool;\n    };\n    InferredElementDragging.prototype.setMirrorIsVisible = function (bool) {\n        if (bool) {\n            // restore a previously hidden element.\n            // use the reference in case the selector class has already been removed.\n            if (this.currentMirrorEl) {\n                this.currentMirrorEl.style.visibility = '';\n                this.currentMirrorEl = null;\n            }\n        }\n        else {\n            var mirrorEl = this.mirrorSelector\n                // TODO: somehow query FullCalendars WITHIN shadow-roots\n                ? document.querySelector(this.mirrorSelector)\n                : null;\n            if (mirrorEl) {\n                this.currentMirrorEl = mirrorEl;\n                mirrorEl.style.visibility = 'hidden';\n            }\n        }\n    };\n    return InferredElementDragging;\n}(ElementDragging));\n\n/*\nBridges third-party drag-n-drop systems with FullCalendar.\nMust be instantiated and destroyed by caller.\n*/\nvar ThirdPartyDraggable = /** @class */ (function () {\n    function ThirdPartyDraggable(containerOrSettings, settings) {\n        var containerEl = document;\n        if (\n        // wish we could just test instanceof EventTarget, but doesn't work in IE11\n        containerOrSettings === document ||\n            containerOrSettings instanceof Element) {\n            containerEl = containerOrSettings;\n            settings = settings || {};\n        }\n        else {\n            settings = (containerOrSettings || {});\n        }\n        var dragging = this.dragging = new InferredElementDragging(containerEl);\n        if (typeof settings.itemSelector === 'string') {\n            dragging.pointer.selector = settings.itemSelector;\n        }\n        else if (containerEl === document) {\n            dragging.pointer.selector = '[data-event]';\n        }\n        if (typeof settings.mirrorSelector === 'string') {\n            dragging.mirrorSelector = settings.mirrorSelector;\n        }\n        new ExternalElementDragging(dragging, settings.eventData); // eslint-disable-line no-new\n    }\n    ThirdPartyDraggable.prototype.destroy = function () {\n        this.dragging.destroy();\n    };\n    return ThirdPartyDraggable;\n}());\n\nvar main = createPlugin({\n    componentInteractions: [DateClicking, DateSelecting, EventDragging, EventResizing],\n    calendarInteractions: [UnselectAuto],\n    elementDraggingImpl: FeaturefulElementDragging,\n    optionRefiners: OPTION_REFINERS,\n    listenerRefiners: LISTENER_REFINERS,\n});\n\nexport default main;\nexport { ExternalDraggable as Draggable, FeaturefulElementDragging, PointerDragging, ThirdPartyDraggable };\n//# sourceMappingURL=main.js.map\n","export const makeEvent = (eventName: string, inOptions = {}) => {\n    const options = { detail: null, bubbles: true, composed: true, ...inOptions };\n    return new CustomEvent(eventName, options);\n}","import { html, LitElement } from 'lit'\nimport '@fullcalendar/core/vdom'\nimport { customElement, property } from 'lit/decorators.js'\nimport { Calendar, CalendarOptions } from '@fullcalendar/core';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\nimport listPlugin from \"@fullcalendar/list\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport { makeEvent } from '../helpers';\n\nimport fullCalendarStyle from './_full-calendar.scss';\n\n/**\n * An example element.\n *\n * @slot - This element has a slot\n * @csspart editor - The tiptap editor\n */\n@customElement('full-calendar')\nexport class FullCalendar extends LitElement {\n  static styles = fullCalendarStyle\n  \n  @property({ type: Array })\n  value: Array<any> = []\n\n  @property({ type: Object })\n  options: CalendarOptions = {}\n\n  calendarInstance: Object = { model: null }\n\n  calendar: Calendar = {} as Calendar\n\n  firstUpdated() {\n    this.setup();\n  }\n\n  setup() {\n    const calendarOptions = {\n      plugins: [dayGridPlugin, timeGridPlugin, listPlugin, interactionPlugin],\n      headerToolbar: {\n        left: \"prev,next today\",\n        center: \"title\",\n        right: \"dayGridMonth,timeGridWeek,timeGridDay\",\n      },\n      // initialDate: TODAY,\n      navLinks: true, // can click day/week names to navigate views\n      selectable: true,\n      selectMirror: true,\n\n      views: {\n        dayGridMonth: { buttonText: \"month\" },\n        timeGridWeek: { buttonText: \"week\" },\n        timeGridDay: { buttonText: \"day\" },\n      },\n\n      editable: true,\n      dayMaxEvents: true, // allow \"more\" link when too many events\n      events: this.value,\n      dateClick: this._onAddNewEvent.bind(this),\n      eventClick: this._onAddNewEvent.bind(this),\n      ...this.options,\n    } as CalendarOptions;\n    console.log({ calendarOptions })\n    const calendarEl = this.renderRoot.querySelector('.full-calendar') as HTMLElement;\n    console.log('calendarEl', calendarEl)\n\n    this.calendar = new Calendar(calendarEl, calendarOptions);\n\n    this.calendar.render();\n    this._onCreated(this.calendar)\n  }\n\n  // Render the UI as a function of component state\n  render() {\n    return html`<div class=\"full-calendar\"></div>`;\n  }\n\n  // createRenderRoot() {\n  //   /**\n  //    * Render template in light DOM. Note that shadow DOM features like \n  //    * encapsulated CSS are unavailable.\n  //    */\n  //   return this;\n  // }\n\n  _onAddNewEvent(value: any) {\n    if (this.value !== value) {\n      // this.dispatchEvent(makeEvent('onChange', { detail: { value } }));\n    }\n  }\n\n  _onChange(value: Array<any>) {\n    if (this.value !== value) {\n      this.dispatchEvent(makeEvent('onChange', { detail: { value } }));\n    }\n  }\n\n  _onCreated(model: Calendar) {\n    if (model) {\n      this.calendarInstance.model = model\n      this.dispatchEvent(makeEvent('onCreated', { detail: { model } }));\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'full-calendar': FullCalendar\n  }\n}\n","// ::- Persistent data structure representing an ordered mapping from\n// strings to values, with some convenient update methods.\nfunction OrderedMap(content) {\n  this.content = content;\n}\n\nOrderedMap.prototype = {\n  constructor: OrderedMap,\n\n  find: function(key) {\n    for (var i = 0; i < this.content.length; i += 2)\n      if (this.content[i] === key) return i\n    return -1\n  },\n\n  // :: (string)  ?any\n  // Retrieve the value stored under `key`, or return undefined when\n  // no such key exists.\n  get: function(key) {\n    var found = this.find(key);\n    return found == -1 ? undefined : this.content[found + 1]\n  },\n\n  // :: (string, any, ?string)  OrderedMap\n  // Create a new map by replacing the value of `key` with a new\n  // value, or adding a binding to the end of the map. If `newKey` is\n  // given, the key of the binding will be replaced with that key.\n  update: function(key, value, newKey) {\n    var self = newKey && newKey != key ? this.remove(newKey) : this;\n    var found = self.find(key), content = self.content.slice();\n    if (found == -1) {\n      content.push(newKey || key, value);\n    } else {\n      content[found + 1] = value;\n      if (newKey) content[found] = newKey;\n    }\n    return new OrderedMap(content)\n  },\n\n  // :: (string)  OrderedMap\n  // Return a map with the given key removed, if it existed.\n  remove: function(key) {\n    var found = this.find(key);\n    if (found == -1) return this\n    var content = this.content.slice();\n    content.splice(found, 2);\n    return new OrderedMap(content)\n  },\n\n  // :: (string, any)  OrderedMap\n  // Add a new key to the start of the map.\n  addToStart: function(key, value) {\n    return new OrderedMap([key, value].concat(this.remove(key).content))\n  },\n\n  // :: (string, any)  OrderedMap\n  // Add a new key to the end of the map.\n  addToEnd: function(key, value) {\n    var content = this.remove(key).content.slice();\n    content.push(key, value);\n    return new OrderedMap(content)\n  },\n\n  // :: (string, string, any)  OrderedMap\n  // Add a key after the given key. If `place` is not found, the new\n  // key is added to the end.\n  addBefore: function(place, key, value) {\n    var without = this.remove(key), content = without.content.slice();\n    var found = without.find(place);\n    content.splice(found == -1 ? content.length : found, 0, key, value);\n    return new OrderedMap(content)\n  },\n\n  // :: ((key: string, value: any))\n  // Call the given function for each key/value pair in the map, in\n  // order.\n  forEach: function(f) {\n    for (var i = 0; i < this.content.length; i += 2)\n      f(this.content[i], this.content[i + 1]);\n  },\n\n  // :: (union<Object, OrderedMap>)  OrderedMap\n  // Create a new map by prepending the keys in this map that don't\n  // appear in `map` before the keys in `map`.\n  prepend: function(map) {\n    map = OrderedMap.from(map);\n    if (!map.size) return this\n    return new OrderedMap(map.content.concat(this.subtract(map).content))\n  },\n\n  // :: (union<Object, OrderedMap>)  OrderedMap\n  // Create a new map by appending the keys in this map that don't\n  // appear in `map` after the keys in `map`.\n  append: function(map) {\n    map = OrderedMap.from(map);\n    if (!map.size) return this\n    return new OrderedMap(this.subtract(map).content.concat(map.content))\n  },\n\n  // :: (union<Object, OrderedMap>)  OrderedMap\n  // Create a map containing all the keys in this map that don't\n  // appear in `map`.\n  subtract: function(map) {\n    var result = this;\n    map = OrderedMap.from(map);\n    for (var i = 0; i < map.content.length; i += 2)\n      result = result.remove(map.content[i]);\n    return result\n  },\n\n  // :: number\n  // The amount of keys in this map.\n  get size() {\n    return this.content.length >> 1\n  }\n};\n\n// :: (?union<Object, OrderedMap>)  OrderedMap\n// Return a map with the given content. If null, create an empty\n// map. If given an ordered map, return that map itself. If given an\n// object, create a map from the object's properties.\nOrderedMap.from = function(value) {\n  if (value instanceof OrderedMap) return value\n  var content = [];\n  if (value) for (var prop in value) content.push(prop, value[prop]);\n  return new OrderedMap(content)\n};\n\nexport default OrderedMap;\n","import OrderedMap from 'orderedmap';\n\nfunction findDiffStart(a, b, pos) {\n    for (let i = 0;; i++) {\n        if (i == a.childCount || i == b.childCount)\n            return a.childCount == b.childCount ? null : pos;\n        let childA = a.child(i), childB = b.child(i);\n        if (childA == childB) {\n            pos += childA.nodeSize;\n            continue;\n        }\n        if (!childA.sameMarkup(childB))\n            return pos;\n        if (childA.isText && childA.text != childB.text) {\n            for (let j = 0; childA.text[j] == childB.text[j]; j++)\n                pos++;\n            return pos;\n        }\n        if (childA.content.size || childB.content.size) {\n            let inner = findDiffStart(childA.content, childB.content, pos + 1);\n            if (inner != null)\n                return inner;\n        }\n        pos += childA.nodeSize;\n    }\n}\nfunction findDiffEnd(a, b, posA, posB) {\n    for (let iA = a.childCount, iB = b.childCount;;) {\n        if (iA == 0 || iB == 0)\n            return iA == iB ? null : { a: posA, b: posB };\n        let childA = a.child(--iA), childB = b.child(--iB), size = childA.nodeSize;\n        if (childA == childB) {\n            posA -= size;\n            posB -= size;\n            continue;\n        }\n        if (!childA.sameMarkup(childB))\n            return { a: posA, b: posB };\n        if (childA.isText && childA.text != childB.text) {\n            let same = 0, minSize = Math.min(childA.text.length, childB.text.length);\n            while (same < minSize && childA.text[childA.text.length - same - 1] == childB.text[childB.text.length - same - 1]) {\n                same++;\n                posA--;\n                posB--;\n            }\n            return { a: posA, b: posB };\n        }\n        if (childA.content.size || childB.content.size) {\n            let inner = findDiffEnd(childA.content, childB.content, posA - 1, posB - 1);\n            if (inner)\n                return inner;\n        }\n        posA -= size;\n        posB -= size;\n    }\n}\n\n/**\nA fragment represents a node's collection of child nodes.\n\nLike nodes, fragments are persistent data structures, and you\nshould not mutate them or their content. Rather, you create new\ninstances whenever needed. The API tries to make this easy.\n*/\nclass Fragment {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    @internal\n    */\n    content, size) {\n        this.content = content;\n        this.size = size || 0;\n        if (size == null)\n            for (let i = 0; i < content.length; i++)\n                this.size += content[i].nodeSize;\n    }\n    /**\n    Invoke a callback for all descendant nodes between the given two\n    positions (relative to start of this fragment). Doesn't descend\n    into a node when the callback returns `false`.\n    */\n    nodesBetween(from, to, f, nodeStart = 0, parent) {\n        for (let i = 0, pos = 0; pos < to; i++) {\n            let child = this.content[i], end = pos + child.nodeSize;\n            if (end > from && f(child, nodeStart + pos, parent || null, i) !== false && child.content.size) {\n                let start = pos + 1;\n                child.nodesBetween(Math.max(0, from - start), Math.min(child.content.size, to - start), f, nodeStart + start);\n            }\n            pos = end;\n        }\n    }\n    /**\n    Call the given callback for every descendant node. `pos` will be\n    relative to the start of the fragment. The callback may return\n    `false` to prevent traversal of a given node's children.\n    */\n    descendants(f) {\n        this.nodesBetween(0, this.size, f);\n    }\n    /**\n    Extract the text between `from` and `to`. See the same method on\n    [`Node`](https://prosemirror.net/docs/ref/#model.Node.textBetween).\n    */\n    textBetween(from, to, blockSeparator, leafText) {\n        let text = \"\", separated = true;\n        this.nodesBetween(from, to, (node, pos) => {\n            if (node.isText) {\n                text += node.text.slice(Math.max(from, pos) - pos, to - pos);\n                separated = !blockSeparator;\n            }\n            else if (node.isLeaf) {\n                if (leafText) {\n                    text += typeof leafText === \"function\" ? leafText(node) : leafText;\n                }\n                else if (node.type.spec.leafText) {\n                    text += node.type.spec.leafText(node);\n                }\n                separated = !blockSeparator;\n            }\n            else if (!separated && node.isBlock) {\n                text += blockSeparator;\n                separated = true;\n            }\n        }, 0);\n        return text;\n    }\n    /**\n    Create a new fragment containing the combined content of this\n    fragment and the other.\n    */\n    append(other) {\n        if (!other.size)\n            return this;\n        if (!this.size)\n            return other;\n        let last = this.lastChild, first = other.firstChild, content = this.content.slice(), i = 0;\n        if (last.isText && last.sameMarkup(first)) {\n            content[content.length - 1] = last.withText(last.text + first.text);\n            i = 1;\n        }\n        for (; i < other.content.length; i++)\n            content.push(other.content[i]);\n        return new Fragment(content, this.size + other.size);\n    }\n    /**\n    Cut out the sub-fragment between the two given positions.\n    */\n    cut(from, to = this.size) {\n        if (from == 0 && to == this.size)\n            return this;\n        let result = [], size = 0;\n        if (to > from)\n            for (let i = 0, pos = 0; pos < to; i++) {\n                let child = this.content[i], end = pos + child.nodeSize;\n                if (end > from) {\n                    if (pos < from || end > to) {\n                        if (child.isText)\n                            child = child.cut(Math.max(0, from - pos), Math.min(child.text.length, to - pos));\n                        else\n                            child = child.cut(Math.max(0, from - pos - 1), Math.min(child.content.size, to - pos - 1));\n                    }\n                    result.push(child);\n                    size += child.nodeSize;\n                }\n                pos = end;\n            }\n        return new Fragment(result, size);\n    }\n    /**\n    @internal\n    */\n    cutByIndex(from, to) {\n        if (from == to)\n            return Fragment.empty;\n        if (from == 0 && to == this.content.length)\n            return this;\n        return new Fragment(this.content.slice(from, to));\n    }\n    /**\n    Create a new fragment in which the node at the given index is\n    replaced by the given node.\n    */\n    replaceChild(index, node) {\n        let current = this.content[index];\n        if (current == node)\n            return this;\n        let copy = this.content.slice();\n        let size = this.size + node.nodeSize - current.nodeSize;\n        copy[index] = node;\n        return new Fragment(copy, size);\n    }\n    /**\n    Create a new fragment by prepending the given node to this\n    fragment.\n    */\n    addToStart(node) {\n        return new Fragment([node].concat(this.content), this.size + node.nodeSize);\n    }\n    /**\n    Create a new fragment by appending the given node to this\n    fragment.\n    */\n    addToEnd(node) {\n        return new Fragment(this.content.concat(node), this.size + node.nodeSize);\n    }\n    /**\n    Compare this fragment to another one.\n    */\n    eq(other) {\n        if (this.content.length != other.content.length)\n            return false;\n        for (let i = 0; i < this.content.length; i++)\n            if (!this.content[i].eq(other.content[i]))\n                return false;\n        return true;\n    }\n    /**\n    The first child of the fragment, or `null` if it is empty.\n    */\n    get firstChild() { return this.content.length ? this.content[0] : null; }\n    /**\n    The last child of the fragment, or `null` if it is empty.\n    */\n    get lastChild() { return this.content.length ? this.content[this.content.length - 1] : null; }\n    /**\n    The number of child nodes in this fragment.\n    */\n    get childCount() { return this.content.length; }\n    /**\n    Get the child node at the given index. Raise an error when the\n    index is out of range.\n    */\n    child(index) {\n        let found = this.content[index];\n        if (!found)\n            throw new RangeError(\"Index \" + index + \" out of range for \" + this);\n        return found;\n    }\n    /**\n    Get the child node at the given index, if it exists.\n    */\n    maybeChild(index) {\n        return this.content[index] || null;\n    }\n    /**\n    Call `f` for every child node, passing the node, its offset\n    into this parent node, and its index.\n    */\n    forEach(f) {\n        for (let i = 0, p = 0; i < this.content.length; i++) {\n            let child = this.content[i];\n            f(child, p, i);\n            p += child.nodeSize;\n        }\n    }\n    /**\n    Find the first position at which this fragment and another\n    fragment differ, or `null` if they are the same.\n    */\n    findDiffStart(other, pos = 0) {\n        return findDiffStart(this, other, pos);\n    }\n    /**\n    Find the first position, searching from the end, at which this\n    fragment and the given fragment differ, or `null` if they are\n    the same. Since this position will not be the same in both\n    nodes, an object with two separate positions is returned.\n    */\n    findDiffEnd(other, pos = this.size, otherPos = other.size) {\n        return findDiffEnd(this, other, pos, otherPos);\n    }\n    /**\n    Find the index and inner offset corresponding to a given relative\n    position in this fragment. The result object will be reused\n    (overwritten) the next time the function is called. (Not public.)\n    */\n    findIndex(pos, round = -1) {\n        if (pos == 0)\n            return retIndex(0, pos);\n        if (pos == this.size)\n            return retIndex(this.content.length, pos);\n        if (pos > this.size || pos < 0)\n            throw new RangeError(`Position ${pos} outside of fragment (${this})`);\n        for (let i = 0, curPos = 0;; i++) {\n            let cur = this.child(i), end = curPos + cur.nodeSize;\n            if (end >= pos) {\n                if (end == pos || round > 0)\n                    return retIndex(i + 1, end);\n                return retIndex(i, curPos);\n            }\n            curPos = end;\n        }\n    }\n    /**\n    Return a debugging string that describes this fragment.\n    */\n    toString() { return \"<\" + this.toStringInner() + \">\"; }\n    /**\n    @internal\n    */\n    toStringInner() { return this.content.join(\", \"); }\n    /**\n    Create a JSON-serializeable representation of this fragment.\n    */\n    toJSON() {\n        return this.content.length ? this.content.map(n => n.toJSON()) : null;\n    }\n    /**\n    Deserialize a fragment from its JSON representation.\n    */\n    static fromJSON(schema, value) {\n        if (!value)\n            return Fragment.empty;\n        if (!Array.isArray(value))\n            throw new RangeError(\"Invalid input for Fragment.fromJSON\");\n        return new Fragment(value.map(schema.nodeFromJSON));\n    }\n    /**\n    Build a fragment from an array of nodes. Ensures that adjacent\n    text nodes with the same marks are joined together.\n    */\n    static fromArray(array) {\n        if (!array.length)\n            return Fragment.empty;\n        let joined, size = 0;\n        for (let i = 0; i < array.length; i++) {\n            let node = array[i];\n            size += node.nodeSize;\n            if (i && node.isText && array[i - 1].sameMarkup(node)) {\n                if (!joined)\n                    joined = array.slice(0, i);\n                joined[joined.length - 1] = node\n                    .withText(joined[joined.length - 1].text + node.text);\n            }\n            else if (joined) {\n                joined.push(node);\n            }\n        }\n        return new Fragment(joined || array, size);\n    }\n    /**\n    Create a fragment from something that can be interpreted as a\n    set of nodes. For `null`, it returns the empty fragment. For a\n    fragment, the fragment itself. For a node or array of nodes, a\n    fragment containing those nodes.\n    */\n    static from(nodes) {\n        if (!nodes)\n            return Fragment.empty;\n        if (nodes instanceof Fragment)\n            return nodes;\n        if (Array.isArray(nodes))\n            return this.fromArray(nodes);\n        if (nodes.attrs)\n            return new Fragment([nodes], nodes.nodeSize);\n        throw new RangeError(\"Can not convert \" + nodes + \" to a Fragment\" +\n            (nodes.nodesBetween ? \" (looks like multiple versions of prosemirror-model were loaded)\" : \"\"));\n    }\n}\n/**\nAn empty fragment. Intended to be reused whenever a node doesn't\ncontain anything (rather than allocating a new empty fragment for\neach leaf node).\n*/\nFragment.empty = new Fragment([], 0);\nconst found = { index: 0, offset: 0 };\nfunction retIndex(index, offset) {\n    found.index = index;\n    found.offset = offset;\n    return found;\n}\n\nfunction compareDeep(a, b) {\n    if (a === b)\n        return true;\n    if (!(a && typeof a == \"object\") ||\n        !(b && typeof b == \"object\"))\n        return false;\n    let array = Array.isArray(a);\n    if (Array.isArray(b) != array)\n        return false;\n    if (array) {\n        if (a.length != b.length)\n            return false;\n        for (let i = 0; i < a.length; i++)\n            if (!compareDeep(a[i], b[i]))\n                return false;\n    }\n    else {\n        for (let p in a)\n            if (!(p in b) || !compareDeep(a[p], b[p]))\n                return false;\n        for (let p in b)\n            if (!(p in a))\n                return false;\n    }\n    return true;\n}\n\n/**\nA mark is a piece of information that can be attached to a node,\nsuch as it being emphasized, in code font, or a link. It has a\ntype and optionally a set of attributes that provide further\ninformation (such as the target of the link). Marks are created\nthrough a `Schema`, which controls which types exist and which\nattributes they have.\n*/\nclass Mark {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The type of this mark.\n    */\n    type, \n    /**\n    The attributes associated with this mark.\n    */\n    attrs) {\n        this.type = type;\n        this.attrs = attrs;\n    }\n    /**\n    Given a set of marks, create a new set which contains this one as\n    well, in the right position. If this mark is already in the set,\n    the set itself is returned. If any marks that are set to be\n    [exclusive](https://prosemirror.net/docs/ref/#model.MarkSpec.excludes) with this mark are present,\n    those are replaced by this one.\n    */\n    addToSet(set) {\n        let copy, placed = false;\n        for (let i = 0; i < set.length; i++) {\n            let other = set[i];\n            if (this.eq(other))\n                return set;\n            if (this.type.excludes(other.type)) {\n                if (!copy)\n                    copy = set.slice(0, i);\n            }\n            else if (other.type.excludes(this.type)) {\n                return set;\n            }\n            else {\n                if (!placed && other.type.rank > this.type.rank) {\n                    if (!copy)\n                        copy = set.slice(0, i);\n                    copy.push(this);\n                    placed = true;\n                }\n                if (copy)\n                    copy.push(other);\n            }\n        }\n        if (!copy)\n            copy = set.slice();\n        if (!placed)\n            copy.push(this);\n        return copy;\n    }\n    /**\n    Remove this mark from the given set, returning a new set. If this\n    mark is not in the set, the set itself is returned.\n    */\n    removeFromSet(set) {\n        for (let i = 0; i < set.length; i++)\n            if (this.eq(set[i]))\n                return set.slice(0, i).concat(set.slice(i + 1));\n        return set;\n    }\n    /**\n    Test whether this mark is in the given set of marks.\n    */\n    isInSet(set) {\n        for (let i = 0; i < set.length; i++)\n            if (this.eq(set[i]))\n                return true;\n        return false;\n    }\n    /**\n    Test whether this mark has the same type and attributes as\n    another mark.\n    */\n    eq(other) {\n        return this == other ||\n            (this.type == other.type && compareDeep(this.attrs, other.attrs));\n    }\n    /**\n    Convert this mark to a JSON-serializeable representation.\n    */\n    toJSON() {\n        let obj = { type: this.type.name };\n        for (let _ in this.attrs) {\n            obj.attrs = this.attrs;\n            break;\n        }\n        return obj;\n    }\n    /**\n    Deserialize a mark from JSON.\n    */\n    static fromJSON(schema, json) {\n        if (!json)\n            throw new RangeError(\"Invalid input for Mark.fromJSON\");\n        let type = schema.marks[json.type];\n        if (!type)\n            throw new RangeError(`There is no mark type ${json.type} in this schema`);\n        return type.create(json.attrs);\n    }\n    /**\n    Test whether two sets of marks are identical.\n    */\n    static sameSet(a, b) {\n        if (a == b)\n            return true;\n        if (a.length != b.length)\n            return false;\n        for (let i = 0; i < a.length; i++)\n            if (!a[i].eq(b[i]))\n                return false;\n        return true;\n    }\n    /**\n    Create a properly sorted mark set from null, a single mark, or an\n    unsorted array of marks.\n    */\n    static setFrom(marks) {\n        if (!marks || Array.isArray(marks) && marks.length == 0)\n            return Mark.none;\n        if (marks instanceof Mark)\n            return [marks];\n        let copy = marks.slice();\n        copy.sort((a, b) => a.type.rank - b.type.rank);\n        return copy;\n    }\n}\n/**\nThe empty set of marks.\n*/\nMark.none = [];\n\n/**\nError type raised by [`Node.replace`](https://prosemirror.net/docs/ref/#model.Node.replace) when\ngiven an invalid replacement.\n*/\nclass ReplaceError extends Error {\n}\n/*\nReplaceError = function(this: any, message: string) {\n  let err = Error.call(this, message)\n  ;(err as any).__proto__ = ReplaceError.prototype\n  return err\n} as any\n\nReplaceError.prototype = Object.create(Error.prototype)\nReplaceError.prototype.constructor = ReplaceError\nReplaceError.prototype.name = \"ReplaceError\"\n*/\n/**\nA slice represents a piece cut out of a larger document. It\nstores not only a fragment, but also the depth up to which nodes on\nboth side are open (cut through).\n*/\nclass Slice {\n    /**\n    Create a slice. When specifying a non-zero open depth, you must\n    make sure that there are nodes of at least that depth at the\n    appropriate side of the fragmenti.e. if the fragment is an\n    empty paragraph node, `openStart` and `openEnd` can't be greater\n    than 1.\n    \n    It is not necessary for the content of open nodes to conform to\n    the schema's content constraints, though it should be a valid\n    start/end/middle for such a node, depending on which sides are\n    open.\n    */\n    constructor(\n    /**\n    The slice's content.\n    */\n    content, \n    /**\n    The open depth at the start of the fragment.\n    */\n    openStart, \n    /**\n    The open depth at the end.\n    */\n    openEnd) {\n        this.content = content;\n        this.openStart = openStart;\n        this.openEnd = openEnd;\n    }\n    /**\n    The size this slice would add when inserted into a document.\n    */\n    get size() {\n        return this.content.size - this.openStart - this.openEnd;\n    }\n    /**\n    @internal\n    */\n    insertAt(pos, fragment) {\n        let content = insertInto(this.content, pos + this.openStart, fragment);\n        return content && new Slice(content, this.openStart, this.openEnd);\n    }\n    /**\n    @internal\n    */\n    removeBetween(from, to) {\n        return new Slice(removeRange(this.content, from + this.openStart, to + this.openStart), this.openStart, this.openEnd);\n    }\n    /**\n    Tests whether this slice is equal to another slice.\n    */\n    eq(other) {\n        return this.content.eq(other.content) && this.openStart == other.openStart && this.openEnd == other.openEnd;\n    }\n    /**\n    @internal\n    */\n    toString() {\n        return this.content + \"(\" + this.openStart + \",\" + this.openEnd + \")\";\n    }\n    /**\n    Convert a slice to a JSON-serializable representation.\n    */\n    toJSON() {\n        if (!this.content.size)\n            return null;\n        let json = { content: this.content.toJSON() };\n        if (this.openStart > 0)\n            json.openStart = this.openStart;\n        if (this.openEnd > 0)\n            json.openEnd = this.openEnd;\n        return json;\n    }\n    /**\n    Deserialize a slice from its JSON representation.\n    */\n    static fromJSON(schema, json) {\n        if (!json)\n            return Slice.empty;\n        let openStart = json.openStart || 0, openEnd = json.openEnd || 0;\n        if (typeof openStart != \"number\" || typeof openEnd != \"number\")\n            throw new RangeError(\"Invalid input for Slice.fromJSON\");\n        return new Slice(Fragment.fromJSON(schema, json.content), openStart, openEnd);\n    }\n    /**\n    Create a slice from a fragment by taking the maximum possible\n    open value on both side of the fragment.\n    */\n    static maxOpen(fragment, openIsolating = true) {\n        let openStart = 0, openEnd = 0;\n        for (let n = fragment.firstChild; n && !n.isLeaf && (openIsolating || !n.type.spec.isolating); n = n.firstChild)\n            openStart++;\n        for (let n = fragment.lastChild; n && !n.isLeaf && (openIsolating || !n.type.spec.isolating); n = n.lastChild)\n            openEnd++;\n        return new Slice(fragment, openStart, openEnd);\n    }\n}\n/**\nThe empty slice.\n*/\nSlice.empty = new Slice(Fragment.empty, 0, 0);\nfunction removeRange(content, from, to) {\n    let { index, offset } = content.findIndex(from), child = content.maybeChild(index);\n    let { index: indexTo, offset: offsetTo } = content.findIndex(to);\n    if (offset == from || child.isText) {\n        if (offsetTo != to && !content.child(indexTo).isText)\n            throw new RangeError(\"Removing non-flat range\");\n        return content.cut(0, from).append(content.cut(to));\n    }\n    if (index != indexTo)\n        throw new RangeError(\"Removing non-flat range\");\n    return content.replaceChild(index, child.copy(removeRange(child.content, from - offset - 1, to - offset - 1)));\n}\nfunction insertInto(content, dist, insert, parent) {\n    let { index, offset } = content.findIndex(dist), child = content.maybeChild(index);\n    if (offset == dist || child.isText) {\n        if (parent && !parent.canReplace(index, index, insert))\n            return null;\n        return content.cut(0, dist).append(insert).append(content.cut(dist));\n    }\n    let inner = insertInto(child.content, dist - offset - 1, insert);\n    return inner && content.replaceChild(index, child.copy(inner));\n}\nfunction replace($from, $to, slice) {\n    if (slice.openStart > $from.depth)\n        throw new ReplaceError(\"Inserted content deeper than insertion position\");\n    if ($from.depth - slice.openStart != $to.depth - slice.openEnd)\n        throw new ReplaceError(\"Inconsistent open depths\");\n    return replaceOuter($from, $to, slice, 0);\n}\nfunction replaceOuter($from, $to, slice, depth) {\n    let index = $from.index(depth), node = $from.node(depth);\n    if (index == $to.index(depth) && depth < $from.depth - slice.openStart) {\n        let inner = replaceOuter($from, $to, slice, depth + 1);\n        return node.copy(node.content.replaceChild(index, inner));\n    }\n    else if (!slice.content.size) {\n        return close(node, replaceTwoWay($from, $to, depth));\n    }\n    else if (!slice.openStart && !slice.openEnd && $from.depth == depth && $to.depth == depth) { // Simple, flat case\n        let parent = $from.parent, content = parent.content;\n        return close(parent, content.cut(0, $from.parentOffset).append(slice.content).append(content.cut($to.parentOffset)));\n    }\n    else {\n        let { start, end } = prepareSliceForReplace(slice, $from);\n        return close(node, replaceThreeWay($from, start, end, $to, depth));\n    }\n}\nfunction checkJoin(main, sub) {\n    if (!sub.type.compatibleContent(main.type))\n        throw new ReplaceError(\"Cannot join \" + sub.type.name + \" onto \" + main.type.name);\n}\nfunction joinable($before, $after, depth) {\n    let node = $before.node(depth);\n    checkJoin(node, $after.node(depth));\n    return node;\n}\nfunction addNode(child, target) {\n    let last = target.length - 1;\n    if (last >= 0 && child.isText && child.sameMarkup(target[last]))\n        target[last] = child.withText(target[last].text + child.text);\n    else\n        target.push(child);\n}\nfunction addRange($start, $end, depth, target) {\n    let node = ($end || $start).node(depth);\n    let startIndex = 0, endIndex = $end ? $end.index(depth) : node.childCount;\n    if ($start) {\n        startIndex = $start.index(depth);\n        if ($start.depth > depth) {\n            startIndex++;\n        }\n        else if ($start.textOffset) {\n            addNode($start.nodeAfter, target);\n            startIndex++;\n        }\n    }\n    for (let i = startIndex; i < endIndex; i++)\n        addNode(node.child(i), target);\n    if ($end && $end.depth == depth && $end.textOffset)\n        addNode($end.nodeBefore, target);\n}\nfunction close(node, content) {\n    if (!node.type.validContent(content))\n        throw new ReplaceError(\"Invalid content for node \" + node.type.name);\n    return node.copy(content);\n}\nfunction replaceThreeWay($from, $start, $end, $to, depth) {\n    let openStart = $from.depth > depth && joinable($from, $start, depth + 1);\n    let openEnd = $to.depth > depth && joinable($end, $to, depth + 1);\n    let content = [];\n    addRange(null, $from, depth, content);\n    if (openStart && openEnd && $start.index(depth) == $end.index(depth)) {\n        checkJoin(openStart, openEnd);\n        addNode(close(openStart, replaceThreeWay($from, $start, $end, $to, depth + 1)), content);\n    }\n    else {\n        if (openStart)\n            addNode(close(openStart, replaceTwoWay($from, $start, depth + 1)), content);\n        addRange($start, $end, depth, content);\n        if (openEnd)\n            addNode(close(openEnd, replaceTwoWay($end, $to, depth + 1)), content);\n    }\n    addRange($to, null, depth, content);\n    return new Fragment(content);\n}\nfunction replaceTwoWay($from, $to, depth) {\n    let content = [];\n    addRange(null, $from, depth, content);\n    if ($from.depth > depth) {\n        let type = joinable($from, $to, depth + 1);\n        addNode(close(type, replaceTwoWay($from, $to, depth + 1)), content);\n    }\n    addRange($to, null, depth, content);\n    return new Fragment(content);\n}\nfunction prepareSliceForReplace(slice, $along) {\n    let extra = $along.depth - slice.openStart, parent = $along.node(extra);\n    let node = parent.copy(slice.content);\n    for (let i = extra - 1; i >= 0; i--)\n        node = $along.node(i).copy(Fragment.from(node));\n    return { start: node.resolveNoCache(slice.openStart + extra),\n        end: node.resolveNoCache(node.content.size - slice.openEnd - extra) };\n}\n\n/**\nYou can [_resolve_](https://prosemirror.net/docs/ref/#model.Node.resolve) a position to get more\ninformation about it. Objects of this class represent such a\nresolved position, providing various pieces of context\ninformation, and some helper methods.\n\nThroughout this interface, methods that take an optional `depth`\nparameter will interpret undefined as `this.depth` and negative\nnumbers as `this.depth + value`.\n*/\nclass ResolvedPos {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The position that was resolved.\n    */\n    pos, \n    /**\n    @internal\n    */\n    path, \n    /**\n    The offset this position has into its parent node.\n    */\n    parentOffset) {\n        this.pos = pos;\n        this.path = path;\n        this.parentOffset = parentOffset;\n        this.depth = path.length / 3 - 1;\n    }\n    /**\n    @internal\n    */\n    resolveDepth(val) {\n        if (val == null)\n            return this.depth;\n        if (val < 0)\n            return this.depth + val;\n        return val;\n    }\n    /**\n    The parent node that the position points into. Note that even if\n    a position points into a text node, that node is not considered\n    the parenttext nodes are flat in this model, and have no content.\n    */\n    get parent() { return this.node(this.depth); }\n    /**\n    The root node in which the position was resolved.\n    */\n    get doc() { return this.node(0); }\n    /**\n    The ancestor node at the given level. `p.node(p.depth)` is the\n    same as `p.parent`.\n    */\n    node(depth) { return this.path[this.resolveDepth(depth) * 3]; }\n    /**\n    The index into the ancestor at the given level. If this points\n    at the 3rd node in the 2nd paragraph on the top level, for\n    example, `p.index(0)` is 1 and `p.index(1)` is 2.\n    */\n    index(depth) { return this.path[this.resolveDepth(depth) * 3 + 1]; }\n    /**\n    The index pointing after this position into the ancestor at the\n    given level.\n    */\n    indexAfter(depth) {\n        depth = this.resolveDepth(depth);\n        return this.index(depth) + (depth == this.depth && !this.textOffset ? 0 : 1);\n    }\n    /**\n    The (absolute) position at the start of the node at the given\n    level.\n    */\n    start(depth) {\n        depth = this.resolveDepth(depth);\n        return depth == 0 ? 0 : this.path[depth * 3 - 1] + 1;\n    }\n    /**\n    The (absolute) position at the end of the node at the given\n    level.\n    */\n    end(depth) {\n        depth = this.resolveDepth(depth);\n        return this.start(depth) + this.node(depth).content.size;\n    }\n    /**\n    The (absolute) position directly before the wrapping node at the\n    given level, or, when `depth` is `this.depth + 1`, the original\n    position.\n    */\n    before(depth) {\n        depth = this.resolveDepth(depth);\n        if (!depth)\n            throw new RangeError(\"There is no position before the top-level node\");\n        return depth == this.depth + 1 ? this.pos : this.path[depth * 3 - 1];\n    }\n    /**\n    The (absolute) position directly after the wrapping node at the\n    given level, or the original position when `depth` is `this.depth + 1`.\n    */\n    after(depth) {\n        depth = this.resolveDepth(depth);\n        if (!depth)\n            throw new RangeError(\"There is no position after the top-level node\");\n        return depth == this.depth + 1 ? this.pos : this.path[depth * 3 - 1] + this.path[depth * 3].nodeSize;\n    }\n    /**\n    When this position points into a text node, this returns the\n    distance between the position and the start of the text node.\n    Will be zero for positions that point between nodes.\n    */\n    get textOffset() { return this.pos - this.path[this.path.length - 1]; }\n    /**\n    Get the node directly after the position, if any. If the position\n    points into a text node, only the part of that node after the\n    position is returned.\n    */\n    get nodeAfter() {\n        let parent = this.parent, index = this.index(this.depth);\n        if (index == parent.childCount)\n            return null;\n        let dOff = this.pos - this.path[this.path.length - 1], child = parent.child(index);\n        return dOff ? parent.child(index).cut(dOff) : child;\n    }\n    /**\n    Get the node directly before the position, if any. If the\n    position points into a text node, only the part of that node\n    before the position is returned.\n    */\n    get nodeBefore() {\n        let index = this.index(this.depth);\n        let dOff = this.pos - this.path[this.path.length - 1];\n        if (dOff)\n            return this.parent.child(index).cut(0, dOff);\n        return index == 0 ? null : this.parent.child(index - 1);\n    }\n    /**\n    Get the position at the given index in the parent node at the\n    given depth (which defaults to `this.depth`).\n    */\n    posAtIndex(index, depth) {\n        depth = this.resolveDepth(depth);\n        let node = this.path[depth * 3], pos = depth == 0 ? 0 : this.path[depth * 3 - 1] + 1;\n        for (let i = 0; i < index; i++)\n            pos += node.child(i).nodeSize;\n        return pos;\n    }\n    /**\n    Get the marks at this position, factoring in the surrounding\n    marks' [`inclusive`](https://prosemirror.net/docs/ref/#model.MarkSpec.inclusive) property. If the\n    position is at the start of a non-empty node, the marks of the\n    node after it (if any) are returned.\n    */\n    marks() {\n        let parent = this.parent, index = this.index();\n        // In an empty parent, return the empty array\n        if (parent.content.size == 0)\n            return Mark.none;\n        // When inside a text node, just return the text node's marks\n        if (this.textOffset)\n            return parent.child(index).marks;\n        let main = parent.maybeChild(index - 1), other = parent.maybeChild(index);\n        // If the `after` flag is true of there is no node before, make\n        // the node after this position the main reference.\n        if (!main) {\n            let tmp = main;\n            main = other;\n            other = tmp;\n        }\n        // Use all marks in the main node, except those that have\n        // `inclusive` set to false and are not present in the other node.\n        let marks = main.marks;\n        for (var i = 0; i < marks.length; i++)\n            if (marks[i].type.spec.inclusive === false && (!other || !marks[i].isInSet(other.marks)))\n                marks = marks[i--].removeFromSet(marks);\n        return marks;\n    }\n    /**\n    Get the marks after the current position, if any, except those\n    that are non-inclusive and not present at position `$end`. This\n    is mostly useful for getting the set of marks to preserve after a\n    deletion. Will return `null` if this position is at the end of\n    its parent node or its parent node isn't a textblock (in which\n    case no marks should be preserved).\n    */\n    marksAcross($end) {\n        let after = this.parent.maybeChild(this.index());\n        if (!after || !after.isInline)\n            return null;\n        let marks = after.marks, next = $end.parent.maybeChild($end.index());\n        for (var i = 0; i < marks.length; i++)\n            if (marks[i].type.spec.inclusive === false && (!next || !marks[i].isInSet(next.marks)))\n                marks = marks[i--].removeFromSet(marks);\n        return marks;\n    }\n    /**\n    The depth up to which this position and the given (non-resolved)\n    position share the same parent nodes.\n    */\n    sharedDepth(pos) {\n        for (let depth = this.depth; depth > 0; depth--)\n            if (this.start(depth) <= pos && this.end(depth) >= pos)\n                return depth;\n        return 0;\n    }\n    /**\n    Returns a range based on the place where this position and the\n    given position diverge around block content. If both point into\n    the same textblock, for example, a range around that textblock\n    will be returned. If they point into different blocks, the range\n    around those blocks in their shared ancestor is returned. You can\n    pass in an optional predicate that will be called with a parent\n    node to see if a range into that parent is acceptable.\n    */\n    blockRange(other = this, pred) {\n        if (other.pos < this.pos)\n            return other.blockRange(this);\n        for (let d = this.depth - (this.parent.inlineContent || this.pos == other.pos ? 1 : 0); d >= 0; d--)\n            if (other.pos <= this.end(d) && (!pred || pred(this.node(d))))\n                return new NodeRange(this, other, d);\n        return null;\n    }\n    /**\n    Query whether the given position shares the same parent node.\n    */\n    sameParent(other) {\n        return this.pos - this.parentOffset == other.pos - other.parentOffset;\n    }\n    /**\n    Return the greater of this and the given position.\n    */\n    max(other) {\n        return other.pos > this.pos ? other : this;\n    }\n    /**\n    Return the smaller of this and the given position.\n    */\n    min(other) {\n        return other.pos < this.pos ? other : this;\n    }\n    /**\n    @internal\n    */\n    toString() {\n        let str = \"\";\n        for (let i = 1; i <= this.depth; i++)\n            str += (str ? \"/\" : \"\") + this.node(i).type.name + \"_\" + this.index(i - 1);\n        return str + \":\" + this.parentOffset;\n    }\n    /**\n    @internal\n    */\n    static resolve(doc, pos) {\n        if (!(pos >= 0 && pos <= doc.content.size))\n            throw new RangeError(\"Position \" + pos + \" out of range\");\n        let path = [];\n        let start = 0, parentOffset = pos;\n        for (let node = doc;;) {\n            let { index, offset } = node.content.findIndex(parentOffset);\n            let rem = parentOffset - offset;\n            path.push(node, index, start + offset);\n            if (!rem)\n                break;\n            node = node.child(index);\n            if (node.isText)\n                break;\n            parentOffset = rem - 1;\n            start += offset + 1;\n        }\n        return new ResolvedPos(pos, path, parentOffset);\n    }\n    /**\n    @internal\n    */\n    static resolveCached(doc, pos) {\n        for (let i = 0; i < resolveCache.length; i++) {\n            let cached = resolveCache[i];\n            if (cached.pos == pos && cached.doc == doc)\n                return cached;\n        }\n        let result = resolveCache[resolveCachePos] = ResolvedPos.resolve(doc, pos);\n        resolveCachePos = (resolveCachePos + 1) % resolveCacheSize;\n        return result;\n    }\n}\nlet resolveCache = [], resolveCachePos = 0, resolveCacheSize = 12;\n/**\nRepresents a flat range of content, i.e. one that starts and\nends in the same node.\n*/\nclass NodeRange {\n    /**\n    Construct a node range. `$from` and `$to` should point into the\n    same node until at least the given `depth`, since a node range\n    denotes an adjacent set of nodes in a single parent node.\n    */\n    constructor(\n    /**\n    A resolved position along the start of the content. May have a\n    `depth` greater than this object's `depth` property, since\n    these are the positions that were used to compute the range,\n    not re-resolved positions directly at its boundaries.\n    */\n    $from, \n    /**\n    A position along the end of the content. See\n    caveat for [`$from`](https://prosemirror.net/docs/ref/#model.NodeRange.$from).\n    */\n    $to, \n    /**\n    The depth of the node that this range points into.\n    */\n    depth) {\n        this.$from = $from;\n        this.$to = $to;\n        this.depth = depth;\n    }\n    /**\n    The position at the start of the range.\n    */\n    get start() { return this.$from.before(this.depth + 1); }\n    /**\n    The position at the end of the range.\n    */\n    get end() { return this.$to.after(this.depth + 1); }\n    /**\n    The parent node that the range points into.\n    */\n    get parent() { return this.$from.node(this.depth); }\n    /**\n    The start index of the range in the parent node.\n    */\n    get startIndex() { return this.$from.index(this.depth); }\n    /**\n    The end index of the range in the parent node.\n    */\n    get endIndex() { return this.$to.indexAfter(this.depth); }\n}\n\nconst emptyAttrs = Object.create(null);\n/**\nThis class represents a node in the tree that makes up a\nProseMirror document. So a document is an instance of `Node`, with\nchildren that are also instances of `Node`.\n\nNodes are persistent data structures. Instead of changing them, you\ncreate new ones with the content you want. Old ones keep pointing\nat the old document shape. This is made cheaper by sharing\nstructure between the old and new data as much as possible, which a\ntree shape like this (without back pointers) makes easy.\n\n**Do not** directly mutate the properties of a `Node` object. See\n[the guide](/docs/guide/#doc) for more information.\n*/\nclass Node {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The type of node that this is.\n    */\n    type, \n    /**\n    An object mapping attribute names to values. The kind of\n    attributes allowed and required are\n    [determined](https://prosemirror.net/docs/ref/#model.NodeSpec.attrs) by the node type.\n    */\n    attrs, \n    // A fragment holding the node's children.\n    content, \n    /**\n    The marks (things like whether it is emphasized or part of a\n    link) applied to this node.\n    */\n    marks = Mark.none) {\n        this.type = type;\n        this.attrs = attrs;\n        this.marks = marks;\n        this.content = content || Fragment.empty;\n    }\n    /**\n    The size of this node, as defined by the integer-based [indexing\n    scheme](/docs/guide/#doc.indexing). For text nodes, this is the\n    amount of characters. For other leaf nodes, it is one. For\n    non-leaf nodes, it is the size of the content plus two (the\n    start and end token).\n    */\n    get nodeSize() { return this.isLeaf ? 1 : 2 + this.content.size; }\n    /**\n    The number of children that the node has.\n    */\n    get childCount() { return this.content.childCount; }\n    /**\n    Get the child node at the given index. Raises an error when the\n    index is out of range.\n    */\n    child(index) { return this.content.child(index); }\n    /**\n    Get the child node at the given index, if it exists.\n    */\n    maybeChild(index) { return this.content.maybeChild(index); }\n    /**\n    Call `f` for every child node, passing the node, its offset\n    into this parent node, and its index.\n    */\n    forEach(f) { this.content.forEach(f); }\n    /**\n    Invoke a callback for all descendant nodes recursively between\n    the given two positions that are relative to start of this\n    node's content. The callback is invoked with the node, its\n    parent-relative position, its parent node, and its child index.\n    When the callback returns false for a given node, that node's\n    children will not be recursed over. The last parameter can be\n    used to specify a starting position to count from.\n    */\n    nodesBetween(from, to, f, startPos = 0) {\n        this.content.nodesBetween(from, to, f, startPos, this);\n    }\n    /**\n    Call the given callback for every descendant node. Doesn't\n    descend into a node when the callback returns `false`.\n    */\n    descendants(f) {\n        this.nodesBetween(0, this.content.size, f);\n    }\n    /**\n    Concatenates all the text nodes found in this fragment and its\n    children.\n    */\n    get textContent() {\n        return (this.isLeaf && this.type.spec.leafText)\n            ? this.type.spec.leafText(this)\n            : this.textBetween(0, this.content.size, \"\");\n    }\n    /**\n    Get all text between positions `from` and `to`. When\n    `blockSeparator` is given, it will be inserted to separate text\n    from different block nodes. If `leafText` is given, it'll be\n    inserted for every non-text leaf node encountered, otherwise\n    [`leafText`](https://prosemirror.net/docs/ref/#model.NodeSpec^leafText) will be used.\n    */\n    textBetween(from, to, blockSeparator, leafText) {\n        return this.content.textBetween(from, to, blockSeparator, leafText);\n    }\n    /**\n    Returns this node's first child, or `null` if there are no\n    children.\n    */\n    get firstChild() { return this.content.firstChild; }\n    /**\n    Returns this node's last child, or `null` if there are no\n    children.\n    */\n    get lastChild() { return this.content.lastChild; }\n    /**\n    Test whether two nodes represent the same piece of document.\n    */\n    eq(other) {\n        return this == other || (this.sameMarkup(other) && this.content.eq(other.content));\n    }\n    /**\n    Compare the markup (type, attributes, and marks) of this node to\n    those of another. Returns `true` if both have the same markup.\n    */\n    sameMarkup(other) {\n        return this.hasMarkup(other.type, other.attrs, other.marks);\n    }\n    /**\n    Check whether this node's markup correspond to the given type,\n    attributes, and marks.\n    */\n    hasMarkup(type, attrs, marks) {\n        return this.type == type &&\n            compareDeep(this.attrs, attrs || type.defaultAttrs || emptyAttrs) &&\n            Mark.sameSet(this.marks, marks || Mark.none);\n    }\n    /**\n    Create a new node with the same markup as this node, containing\n    the given content (or empty, if no content is given).\n    */\n    copy(content = null) {\n        if (content == this.content)\n            return this;\n        return new Node(this.type, this.attrs, content, this.marks);\n    }\n    /**\n    Create a copy of this node, with the given set of marks instead\n    of the node's own marks.\n    */\n    mark(marks) {\n        return marks == this.marks ? this : new Node(this.type, this.attrs, this.content, marks);\n    }\n    /**\n    Create a copy of this node with only the content between the\n    given positions. If `to` is not given, it defaults to the end of\n    the node.\n    */\n    cut(from, to = this.content.size) {\n        if (from == 0 && to == this.content.size)\n            return this;\n        return this.copy(this.content.cut(from, to));\n    }\n    /**\n    Cut out the part of the document between the given positions, and\n    return it as a `Slice` object.\n    */\n    slice(from, to = this.content.size, includeParents = false) {\n        if (from == to)\n            return Slice.empty;\n        let $from = this.resolve(from), $to = this.resolve(to);\n        let depth = includeParents ? 0 : $from.sharedDepth(to);\n        let start = $from.start(depth), node = $from.node(depth);\n        let content = node.content.cut($from.pos - start, $to.pos - start);\n        return new Slice(content, $from.depth - depth, $to.depth - depth);\n    }\n    /**\n    Replace the part of the document between the given positions with\n    the given slice. The slice must 'fit', meaning its open sides\n    must be able to connect to the surrounding content, and its\n    content nodes must be valid children for the node they are placed\n    into. If any of this is violated, an error of type\n    [`ReplaceError`](https://prosemirror.net/docs/ref/#model.ReplaceError) is thrown.\n    */\n    replace(from, to, slice) {\n        return replace(this.resolve(from), this.resolve(to), slice);\n    }\n    /**\n    Find the node directly after the given position.\n    */\n    nodeAt(pos) {\n        for (let node = this;;) {\n            let { index, offset } = node.content.findIndex(pos);\n            node = node.maybeChild(index);\n            if (!node)\n                return null;\n            if (offset == pos || node.isText)\n                return node;\n            pos -= offset + 1;\n        }\n    }\n    /**\n    Find the (direct) child node after the given offset, if any,\n    and return it along with its index and offset relative to this\n    node.\n    */\n    childAfter(pos) {\n        let { index, offset } = this.content.findIndex(pos);\n        return { node: this.content.maybeChild(index), index, offset };\n    }\n    /**\n    Find the (direct) child node before the given offset, if any,\n    and return it along with its index and offset relative to this\n    node.\n    */\n    childBefore(pos) {\n        if (pos == 0)\n            return { node: null, index: 0, offset: 0 };\n        let { index, offset } = this.content.findIndex(pos);\n        if (offset < pos)\n            return { node: this.content.child(index), index, offset };\n        let node = this.content.child(index - 1);\n        return { node, index: index - 1, offset: offset - node.nodeSize };\n    }\n    /**\n    Resolve the given position in the document, returning an\n    [object](https://prosemirror.net/docs/ref/#model.ResolvedPos) with information about its context.\n    */\n    resolve(pos) { return ResolvedPos.resolveCached(this, pos); }\n    /**\n    @internal\n    */\n    resolveNoCache(pos) { return ResolvedPos.resolve(this, pos); }\n    /**\n    Test whether a given mark or mark type occurs in this document\n    between the two given positions.\n    */\n    rangeHasMark(from, to, type) {\n        let found = false;\n        if (to > from)\n            this.nodesBetween(from, to, node => {\n                if (type.isInSet(node.marks))\n                    found = true;\n                return !found;\n            });\n        return found;\n    }\n    /**\n    True when this is a block (non-inline node)\n    */\n    get isBlock() { return this.type.isBlock; }\n    /**\n    True when this is a textblock node, a block node with inline\n    content.\n    */\n    get isTextblock() { return this.type.isTextblock; }\n    /**\n    True when this node allows inline content.\n    */\n    get inlineContent() { return this.type.inlineContent; }\n    /**\n    True when this is an inline node (a text node or a node that can\n    appear among text).\n    */\n    get isInline() { return this.type.isInline; }\n    /**\n    True when this is a text node.\n    */\n    get isText() { return this.type.isText; }\n    /**\n    True when this is a leaf node.\n    */\n    get isLeaf() { return this.type.isLeaf; }\n    /**\n    True when this is an atom, i.e. when it does not have directly\n    editable content. This is usually the same as `isLeaf`, but can\n    be configured with the [`atom` property](https://prosemirror.net/docs/ref/#model.NodeSpec.atom)\n    on a node's spec (typically used when the node is displayed as\n    an uneditable [node view](https://prosemirror.net/docs/ref/#view.NodeView)).\n    */\n    get isAtom() { return this.type.isAtom; }\n    /**\n    Return a string representation of this node for debugging\n    purposes.\n    */\n    toString() {\n        if (this.type.spec.toDebugString)\n            return this.type.spec.toDebugString(this);\n        let name = this.type.name;\n        if (this.content.size)\n            name += \"(\" + this.content.toStringInner() + \")\";\n        return wrapMarks(this.marks, name);\n    }\n    /**\n    Get the content match in this node at the given index.\n    */\n    contentMatchAt(index) {\n        let match = this.type.contentMatch.matchFragment(this.content, 0, index);\n        if (!match)\n            throw new Error(\"Called contentMatchAt on a node with invalid content\");\n        return match;\n    }\n    /**\n    Test whether replacing the range between `from` and `to` (by\n    child index) with the given replacement fragment (which defaults\n    to the empty fragment) would leave the node's content valid. You\n    can optionally pass `start` and `end` indices into the\n    replacement fragment.\n    */\n    canReplace(from, to, replacement = Fragment.empty, start = 0, end = replacement.childCount) {\n        let one = this.contentMatchAt(from).matchFragment(replacement, start, end);\n        let two = one && one.matchFragment(this.content, to);\n        if (!two || !two.validEnd)\n            return false;\n        for (let i = start; i < end; i++)\n            if (!this.type.allowsMarks(replacement.child(i).marks))\n                return false;\n        return true;\n    }\n    /**\n    Test whether replacing the range `from` to `to` (by index) with\n    a node of the given type would leave the node's content valid.\n    */\n    canReplaceWith(from, to, type, marks) {\n        if (marks && !this.type.allowsMarks(marks))\n            return false;\n        let start = this.contentMatchAt(from).matchType(type);\n        let end = start && start.matchFragment(this.content, to);\n        return end ? end.validEnd : false;\n    }\n    /**\n    Test whether the given node's content could be appended to this\n    node. If that node is empty, this will only return true if there\n    is at least one node type that can appear in both nodes (to avoid\n    merging completely incompatible nodes).\n    */\n    canAppend(other) {\n        if (other.content.size)\n            return this.canReplace(this.childCount, this.childCount, other.content);\n        else\n            return this.type.compatibleContent(other.type);\n    }\n    /**\n    Check whether this node and its descendants conform to the\n    schema, and raise error when they do not.\n    */\n    check() {\n        if (!this.type.validContent(this.content))\n            throw new RangeError(`Invalid content for node ${this.type.name}: ${this.content.toString().slice(0, 50)}`);\n        let copy = Mark.none;\n        for (let i = 0; i < this.marks.length; i++)\n            copy = this.marks[i].addToSet(copy);\n        if (!Mark.sameSet(copy, this.marks))\n            throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(m => m.type.name)}`);\n        this.content.forEach(node => node.check());\n    }\n    /**\n    Return a JSON-serializeable representation of this node.\n    */\n    toJSON() {\n        let obj = { type: this.type.name };\n        for (let _ in this.attrs) {\n            obj.attrs = this.attrs;\n            break;\n        }\n        if (this.content.size)\n            obj.content = this.content.toJSON();\n        if (this.marks.length)\n            obj.marks = this.marks.map(n => n.toJSON());\n        return obj;\n    }\n    /**\n    Deserialize a node from its JSON representation.\n    */\n    static fromJSON(schema, json) {\n        if (!json)\n            throw new RangeError(\"Invalid input for Node.fromJSON\");\n        let marks = null;\n        if (json.marks) {\n            if (!Array.isArray(json.marks))\n                throw new RangeError(\"Invalid mark data for Node.fromJSON\");\n            marks = json.marks.map(schema.markFromJSON);\n        }\n        if (json.type == \"text\") {\n            if (typeof json.text != \"string\")\n                throw new RangeError(\"Invalid text node in JSON\");\n            return schema.text(json.text, marks);\n        }\n        let content = Fragment.fromJSON(schema, json.content);\n        return schema.nodeType(json.type).create(json.attrs, content, marks);\n    }\n}\nNode.prototype.text = undefined;\nclass TextNode extends Node {\n    /**\n    @internal\n    */\n    constructor(type, attrs, content, marks) {\n        super(type, attrs, null, marks);\n        if (!content)\n            throw new RangeError(\"Empty text nodes are not allowed\");\n        this.text = content;\n    }\n    toString() {\n        if (this.type.spec.toDebugString)\n            return this.type.spec.toDebugString(this);\n        return wrapMarks(this.marks, JSON.stringify(this.text));\n    }\n    get textContent() { return this.text; }\n    textBetween(from, to) { return this.text.slice(from, to); }\n    get nodeSize() { return this.text.length; }\n    mark(marks) {\n        return marks == this.marks ? this : new TextNode(this.type, this.attrs, this.text, marks);\n    }\n    withText(text) {\n        if (text == this.text)\n            return this;\n        return new TextNode(this.type, this.attrs, text, this.marks);\n    }\n    cut(from = 0, to = this.text.length) {\n        if (from == 0 && to == this.text.length)\n            return this;\n        return this.withText(this.text.slice(from, to));\n    }\n    eq(other) {\n        return this.sameMarkup(other) && this.text == other.text;\n    }\n    toJSON() {\n        let base = super.toJSON();\n        base.text = this.text;\n        return base;\n    }\n}\nfunction wrapMarks(marks, str) {\n    for (let i = marks.length - 1; i >= 0; i--)\n        str = marks[i].type.name + \"(\" + str + \")\";\n    return str;\n}\n\n/**\nInstances of this class represent a match state of a node type's\n[content expression](https://prosemirror.net/docs/ref/#model.NodeSpec.content), and can be used to\nfind out whether further content matches here, and whether a given\nposition is a valid end of the node.\n*/\nclass ContentMatch {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    True when this match state represents a valid end of the node.\n    */\n    validEnd) {\n        this.validEnd = validEnd;\n        /**\n        @internal\n        */\n        this.next = [];\n        /**\n        @internal\n        */\n        this.wrapCache = [];\n    }\n    /**\n    @internal\n    */\n    static parse(string, nodeTypes) {\n        let stream = new TokenStream(string, nodeTypes);\n        if (stream.next == null)\n            return ContentMatch.empty;\n        let expr = parseExpr(stream);\n        if (stream.next)\n            stream.err(\"Unexpected trailing text\");\n        let match = dfa(nfa(expr));\n        checkForDeadEnds(match, stream);\n        return match;\n    }\n    /**\n    Match a node type, returning a match after that node if\n    successful.\n    */\n    matchType(type) {\n        for (let i = 0; i < this.next.length; i++)\n            if (this.next[i].type == type)\n                return this.next[i].next;\n        return null;\n    }\n    /**\n    Try to match a fragment. Returns the resulting match when\n    successful.\n    */\n    matchFragment(frag, start = 0, end = frag.childCount) {\n        let cur = this;\n        for (let i = start; cur && i < end; i++)\n            cur = cur.matchType(frag.child(i).type);\n        return cur;\n    }\n    /**\n    @internal\n    */\n    get inlineContent() {\n        return this.next.length && this.next[0].type.isInline;\n    }\n    /**\n    Get the first matching node type at this match position that can\n    be generated.\n    */\n    get defaultType() {\n        for (let i = 0; i < this.next.length; i++) {\n            let { type } = this.next[i];\n            if (!(type.isText || type.hasRequiredAttrs()))\n                return type;\n        }\n        return null;\n    }\n    /**\n    @internal\n    */\n    compatible(other) {\n        for (let i = 0; i < this.next.length; i++)\n            for (let j = 0; j < other.next.length; j++)\n                if (this.next[i].type == other.next[j].type)\n                    return true;\n        return false;\n    }\n    /**\n    Try to match the given fragment, and if that fails, see if it can\n    be made to match by inserting nodes in front of it. When\n    successful, return a fragment of inserted nodes (which may be\n    empty if nothing had to be inserted). When `toEnd` is true, only\n    return a fragment if the resulting match goes to the end of the\n    content expression.\n    */\n    fillBefore(after, toEnd = false, startIndex = 0) {\n        let seen = [this];\n        function search(match, types) {\n            let finished = match.matchFragment(after, startIndex);\n            if (finished && (!toEnd || finished.validEnd))\n                return Fragment.from(types.map(tp => tp.createAndFill()));\n            for (let i = 0; i < match.next.length; i++) {\n                let { type, next } = match.next[i];\n                if (!(type.isText || type.hasRequiredAttrs()) && seen.indexOf(next) == -1) {\n                    seen.push(next);\n                    let found = search(next, types.concat(type));\n                    if (found)\n                        return found;\n                }\n            }\n            return null;\n        }\n        return search(this, []);\n    }\n    /**\n    Find a set of wrapping node types that would allow a node of the\n    given type to appear at this position. The result may be empty\n    (when it fits directly) and will be null when no such wrapping\n    exists.\n    */\n    findWrapping(target) {\n        for (let i = 0; i < this.wrapCache.length; i += 2)\n            if (this.wrapCache[i] == target)\n                return this.wrapCache[i + 1];\n        let computed = this.computeWrapping(target);\n        this.wrapCache.push(target, computed);\n        return computed;\n    }\n    /**\n    @internal\n    */\n    computeWrapping(target) {\n        let seen = Object.create(null), active = [{ match: this, type: null, via: null }];\n        while (active.length) {\n            let current = active.shift(), match = current.match;\n            if (match.matchType(target)) {\n                let result = [];\n                for (let obj = current; obj.type; obj = obj.via)\n                    result.push(obj.type);\n                return result.reverse();\n            }\n            for (let i = 0; i < match.next.length; i++) {\n                let { type, next } = match.next[i];\n                if (!type.isLeaf && !type.hasRequiredAttrs() && !(type.name in seen) && (!current.type || next.validEnd)) {\n                    active.push({ match: type.contentMatch, type, via: current });\n                    seen[type.name] = true;\n                }\n            }\n        }\n        return null;\n    }\n    /**\n    The number of outgoing edges this node has in the finite\n    automaton that describes the content expression.\n    */\n    get edgeCount() {\n        return this.next.length;\n    }\n    /**\n    Get the _n_th outgoing edge from this node in the finite\n    automaton that describes the content expression.\n    */\n    edge(n) {\n        if (n >= this.next.length)\n            throw new RangeError(`There's no ${n}th edge in this content match`);\n        return this.next[n];\n    }\n    /**\n    @internal\n    */\n    toString() {\n        let seen = [];\n        function scan(m) {\n            seen.push(m);\n            for (let i = 0; i < m.next.length; i++)\n                if (seen.indexOf(m.next[i].next) == -1)\n                    scan(m.next[i].next);\n        }\n        scan(this);\n        return seen.map((m, i) => {\n            let out = i + (m.validEnd ? \"*\" : \" \") + \" \";\n            for (let i = 0; i < m.next.length; i++)\n                out += (i ? \", \" : \"\") + m.next[i].type.name + \"->\" + seen.indexOf(m.next[i].next);\n            return out;\n        }).join(\"\\n\");\n    }\n}\n/**\n@internal\n*/\nContentMatch.empty = new ContentMatch(true);\nclass TokenStream {\n    constructor(string, nodeTypes) {\n        this.string = string;\n        this.nodeTypes = nodeTypes;\n        this.inline = null;\n        this.pos = 0;\n        this.tokens = string.split(/\\s*(?=\\b|\\W|$)/);\n        if (this.tokens[this.tokens.length - 1] == \"\")\n            this.tokens.pop();\n        if (this.tokens[0] == \"\")\n            this.tokens.shift();\n    }\n    get next() { return this.tokens[this.pos]; }\n    eat(tok) { return this.next == tok && (this.pos++ || true); }\n    err(str) { throw new SyntaxError(str + \" (in content expression '\" + this.string + \"')\"); }\n}\nfunction parseExpr(stream) {\n    let exprs = [];\n    do {\n        exprs.push(parseExprSeq(stream));\n    } while (stream.eat(\"|\"));\n    return exprs.length == 1 ? exprs[0] : { type: \"choice\", exprs };\n}\nfunction parseExprSeq(stream) {\n    let exprs = [];\n    do {\n        exprs.push(parseExprSubscript(stream));\n    } while (stream.next && stream.next != \")\" && stream.next != \"|\");\n    return exprs.length == 1 ? exprs[0] : { type: \"seq\", exprs };\n}\nfunction parseExprSubscript(stream) {\n    let expr = parseExprAtom(stream);\n    for (;;) {\n        if (stream.eat(\"+\"))\n            expr = { type: \"plus\", expr };\n        else if (stream.eat(\"*\"))\n            expr = { type: \"star\", expr };\n        else if (stream.eat(\"?\"))\n            expr = { type: \"opt\", expr };\n        else if (stream.eat(\"{\"))\n            expr = parseExprRange(stream, expr);\n        else\n            break;\n    }\n    return expr;\n}\nfunction parseNum(stream) {\n    if (/\\D/.test(stream.next))\n        stream.err(\"Expected number, got '\" + stream.next + \"'\");\n    let result = Number(stream.next);\n    stream.pos++;\n    return result;\n}\nfunction parseExprRange(stream, expr) {\n    let min = parseNum(stream), max = min;\n    if (stream.eat(\",\")) {\n        if (stream.next != \"}\")\n            max = parseNum(stream);\n        else\n            max = -1;\n    }\n    if (!stream.eat(\"}\"))\n        stream.err(\"Unclosed braced range\");\n    return { type: \"range\", min, max, expr };\n}\nfunction resolveName(stream, name) {\n    let types = stream.nodeTypes, type = types[name];\n    if (type)\n        return [type];\n    let result = [];\n    for (let typeName in types) {\n        let type = types[typeName];\n        if (type.groups.indexOf(name) > -1)\n            result.push(type);\n    }\n    if (result.length == 0)\n        stream.err(\"No node type or group '\" + name + \"' found\");\n    return result;\n}\nfunction parseExprAtom(stream) {\n    if (stream.eat(\"(\")) {\n        let expr = parseExpr(stream);\n        if (!stream.eat(\")\"))\n            stream.err(\"Missing closing paren\");\n        return expr;\n    }\n    else if (!/\\W/.test(stream.next)) {\n        let exprs = resolveName(stream, stream.next).map(type => {\n            if (stream.inline == null)\n                stream.inline = type.isInline;\n            else if (stream.inline != type.isInline)\n                stream.err(\"Mixing inline and block content\");\n            return { type: \"name\", value: type };\n        });\n        stream.pos++;\n        return exprs.length == 1 ? exprs[0] : { type: \"choice\", exprs };\n    }\n    else {\n        stream.err(\"Unexpected token '\" + stream.next + \"'\");\n    }\n}\n/**\nConstruct an NFA from an expression as returned by the parser. The\nNFA is represented as an array of states, which are themselves\narrays of edges, which are `{term, to}` objects. The first state is\nthe entry state and the last node is the success state.\n\nNote that unlike typical NFAs, the edge ordering in this one is\nsignificant, in that it is used to contruct filler content when\nnecessary.\n*/\nfunction nfa(expr) {\n    let nfa = [[]];\n    connect(compile(expr, 0), node());\n    return nfa;\n    function node() { return nfa.push([]) - 1; }\n    function edge(from, to, term) {\n        let edge = { term, to };\n        nfa[from].push(edge);\n        return edge;\n    }\n    function connect(edges, to) {\n        edges.forEach(edge => edge.to = to);\n    }\n    function compile(expr, from) {\n        if (expr.type == \"choice\") {\n            return expr.exprs.reduce((out, expr) => out.concat(compile(expr, from)), []);\n        }\n        else if (expr.type == \"seq\") {\n            for (let i = 0;; i++) {\n                let next = compile(expr.exprs[i], from);\n                if (i == expr.exprs.length - 1)\n                    return next;\n                connect(next, from = node());\n            }\n        }\n        else if (expr.type == \"star\") {\n            let loop = node();\n            edge(from, loop);\n            connect(compile(expr.expr, loop), loop);\n            return [edge(loop)];\n        }\n        else if (expr.type == \"plus\") {\n            let loop = node();\n            connect(compile(expr.expr, from), loop);\n            connect(compile(expr.expr, loop), loop);\n            return [edge(loop)];\n        }\n        else if (expr.type == \"opt\") {\n            return [edge(from)].concat(compile(expr.expr, from));\n        }\n        else if (expr.type == \"range\") {\n            let cur = from;\n            for (let i = 0; i < expr.min; i++) {\n                let next = node();\n                connect(compile(expr.expr, cur), next);\n                cur = next;\n            }\n            if (expr.max == -1) {\n                connect(compile(expr.expr, cur), cur);\n            }\n            else {\n                for (let i = expr.min; i < expr.max; i++) {\n                    let next = node();\n                    edge(cur, next);\n                    connect(compile(expr.expr, cur), next);\n                    cur = next;\n                }\n            }\n            return [edge(cur)];\n        }\n        else if (expr.type == \"name\") {\n            return [edge(from, undefined, expr.value)];\n        }\n        else {\n            throw new Error(\"Unknown expr type\");\n        }\n    }\n}\nfunction cmp(a, b) { return b - a; }\n// Get the set of nodes reachable by null edges from `node`. Omit\n// nodes with only a single null-out-edge, since they may lead to\n// needless duplicated nodes.\nfunction nullFrom(nfa, node) {\n    let result = [];\n    scan(node);\n    return result.sort(cmp);\n    function scan(node) {\n        let edges = nfa[node];\n        if (edges.length == 1 && !edges[0].term)\n            return scan(edges[0].to);\n        result.push(node);\n        for (let i = 0; i < edges.length; i++) {\n            let { term, to } = edges[i];\n            if (!term && result.indexOf(to) == -1)\n                scan(to);\n        }\n    }\n}\n// Compiles an NFA as produced by `nfa` into a DFA, modeled as a set\n// of state objects (`ContentMatch` instances) with transitions\n// between them.\nfunction dfa(nfa) {\n    let labeled = Object.create(null);\n    return explore(nullFrom(nfa, 0));\n    function explore(states) {\n        let out = [];\n        states.forEach(node => {\n            nfa[node].forEach(({ term, to }) => {\n                if (!term)\n                    return;\n                let set;\n                for (let i = 0; i < out.length; i++)\n                    if (out[i][0] == term)\n                        set = out[i][1];\n                nullFrom(nfa, to).forEach(node => {\n                    if (!set)\n                        out.push([term, set = []]);\n                    if (set.indexOf(node) == -1)\n                        set.push(node);\n                });\n            });\n        });\n        let state = labeled[states.join(\",\")] = new ContentMatch(states.indexOf(nfa.length - 1) > -1);\n        for (let i = 0; i < out.length; i++) {\n            let states = out[i][1].sort(cmp);\n            state.next.push({ type: out[i][0], next: labeled[states.join(\",\")] || explore(states) });\n        }\n        return state;\n    }\n}\nfunction checkForDeadEnds(match, stream) {\n    for (let i = 0, work = [match]; i < work.length; i++) {\n        let state = work[i], dead = !state.validEnd, nodes = [];\n        for (let j = 0; j < state.next.length; j++) {\n            let { type, next } = state.next[j];\n            nodes.push(type.name);\n            if (dead && !(type.isText || type.hasRequiredAttrs()))\n                dead = false;\n            if (work.indexOf(next) == -1)\n                work.push(next);\n        }\n        if (dead)\n            stream.err(\"Only non-generatable nodes (\" + nodes.join(\", \") + \") in a required position (see https://prosemirror.net/docs/guide/#generatable)\");\n    }\n}\n\n// For node types where all attrs have a default value (or which don't\n// have any attributes), build up a single reusable default attribute\n// object, and use it for all nodes that don't specify specific\n// attributes.\nfunction defaultAttrs(attrs) {\n    let defaults = Object.create(null);\n    for (let attrName in attrs) {\n        let attr = attrs[attrName];\n        if (!attr.hasDefault)\n            return null;\n        defaults[attrName] = attr.default;\n    }\n    return defaults;\n}\nfunction computeAttrs(attrs, value) {\n    let built = Object.create(null);\n    for (let name in attrs) {\n        let given = value && value[name];\n        if (given === undefined) {\n            let attr = attrs[name];\n            if (attr.hasDefault)\n                given = attr.default;\n            else\n                throw new RangeError(\"No value supplied for attribute \" + name);\n        }\n        built[name] = given;\n    }\n    return built;\n}\nfunction initAttrs(attrs) {\n    let result = Object.create(null);\n    if (attrs)\n        for (let name in attrs)\n            result[name] = new Attribute(attrs[name]);\n    return result;\n}\n/**\nNode types are objects allocated once per `Schema` and used to\n[tag](https://prosemirror.net/docs/ref/#model.Node.type) `Node` instances. They contain information\nabout the node type, such as its name and what kind of node it\nrepresents.\n*/\nclass NodeType {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The name the node type has in this schema.\n    */\n    name, \n    /**\n    A link back to the `Schema` the node type belongs to.\n    */\n    schema, \n    /**\n    The spec that this type is based on\n    */\n    spec) {\n        this.name = name;\n        this.schema = schema;\n        this.spec = spec;\n        /**\n        The set of marks allowed in this node. `null` means all marks\n        are allowed.\n        */\n        this.markSet = null;\n        this.groups = spec.group ? spec.group.split(\" \") : [];\n        this.attrs = initAttrs(spec.attrs);\n        this.defaultAttrs = defaultAttrs(this.attrs);\n        this.contentMatch = null;\n        this.inlineContent = null;\n        this.isBlock = !(spec.inline || name == \"text\");\n        this.isText = name == \"text\";\n    }\n    /**\n    True if this is an inline type.\n    */\n    get isInline() { return !this.isBlock; }\n    /**\n    True if this is a textblock type, a block that contains inline\n    content.\n    */\n    get isTextblock() { return this.isBlock && this.inlineContent; }\n    /**\n    True for node types that allow no content.\n    */\n    get isLeaf() { return this.contentMatch == ContentMatch.empty; }\n    /**\n    True when this node is an atom, i.e. when it does not have\n    directly editable content.\n    */\n    get isAtom() { return this.isLeaf || !!this.spec.atom; }\n    /**\n    The node type's [whitespace](https://prosemirror.net/docs/ref/#model.NodeSpec.whitespace) option.\n    */\n    get whitespace() {\n        return this.spec.whitespace || (this.spec.code ? \"pre\" : \"normal\");\n    }\n    /**\n    Tells you whether this node type has any required attributes.\n    */\n    hasRequiredAttrs() {\n        for (let n in this.attrs)\n            if (this.attrs[n].isRequired)\n                return true;\n        return false;\n    }\n    /**\n    Indicates whether this node allows some of the same content as\n    the given node type.\n    */\n    compatibleContent(other) {\n        return this == other || this.contentMatch.compatible(other.contentMatch);\n    }\n    /**\n    @internal\n    */\n    computeAttrs(attrs) {\n        if (!attrs && this.defaultAttrs)\n            return this.defaultAttrs;\n        else\n            return computeAttrs(this.attrs, attrs);\n    }\n    /**\n    Create a `Node` of this type. The given attributes are\n    checked and defaulted (you can pass `null` to use the type's\n    defaults entirely, if no required attributes exist). `content`\n    may be a `Fragment`, a node, an array of nodes, or\n    `null`. Similarly `marks` may be `null` to default to the empty\n    set of marks.\n    */\n    create(attrs = null, content, marks) {\n        if (this.isText)\n            throw new Error(\"NodeType.create can't construct text nodes\");\n        return new Node(this, this.computeAttrs(attrs), Fragment.from(content), Mark.setFrom(marks));\n    }\n    /**\n    Like [`create`](https://prosemirror.net/docs/ref/#model.NodeType.create), but check the given content\n    against the node type's content restrictions, and throw an error\n    if it doesn't match.\n    */\n    createChecked(attrs = null, content, marks) {\n        content = Fragment.from(content);\n        if (!this.validContent(content))\n            throw new RangeError(\"Invalid content for node \" + this.name);\n        return new Node(this, this.computeAttrs(attrs), content, Mark.setFrom(marks));\n    }\n    /**\n    Like [`create`](https://prosemirror.net/docs/ref/#model.NodeType.create), but see if it is\n    necessary to add nodes to the start or end of the given fragment\n    to make it fit the node. If no fitting wrapping can be found,\n    return null. Note that, due to the fact that required nodes can\n    always be created, this will always succeed if you pass null or\n    `Fragment.empty` as content.\n    */\n    createAndFill(attrs = null, content, marks) {\n        attrs = this.computeAttrs(attrs);\n        content = Fragment.from(content);\n        if (content.size) {\n            let before = this.contentMatch.fillBefore(content);\n            if (!before)\n                return null;\n            content = before.append(content);\n        }\n        let matched = this.contentMatch.matchFragment(content);\n        let after = matched && matched.fillBefore(Fragment.empty, true);\n        if (!after)\n            return null;\n        return new Node(this, attrs, content.append(after), Mark.setFrom(marks));\n    }\n    /**\n    Returns true if the given fragment is valid content for this node\n    type with the given attributes.\n    */\n    validContent(content) {\n        let result = this.contentMatch.matchFragment(content);\n        if (!result || !result.validEnd)\n            return false;\n        for (let i = 0; i < content.childCount; i++)\n            if (!this.allowsMarks(content.child(i).marks))\n                return false;\n        return true;\n    }\n    /**\n    Check whether the given mark type is allowed in this node.\n    */\n    allowsMarkType(markType) {\n        return this.markSet == null || this.markSet.indexOf(markType) > -1;\n    }\n    /**\n    Test whether the given set of marks are allowed in this node.\n    */\n    allowsMarks(marks) {\n        if (this.markSet == null)\n            return true;\n        for (let i = 0; i < marks.length; i++)\n            if (!this.allowsMarkType(marks[i].type))\n                return false;\n        return true;\n    }\n    /**\n    Removes the marks that are not allowed in this node from the given set.\n    */\n    allowedMarks(marks) {\n        if (this.markSet == null)\n            return marks;\n        let copy;\n        for (let i = 0; i < marks.length; i++) {\n            if (!this.allowsMarkType(marks[i].type)) {\n                if (!copy)\n                    copy = marks.slice(0, i);\n            }\n            else if (copy) {\n                copy.push(marks[i]);\n            }\n        }\n        return !copy ? marks : copy.length ? copy : Mark.none;\n    }\n    /**\n    @internal\n    */\n    static compile(nodes, schema) {\n        let result = Object.create(null);\n        nodes.forEach((name, spec) => result[name] = new NodeType(name, schema, spec));\n        let topType = schema.spec.topNode || \"doc\";\n        if (!result[topType])\n            throw new RangeError(\"Schema is missing its top node type ('\" + topType + \"')\");\n        if (!result.text)\n            throw new RangeError(\"Every schema needs a 'text' type\");\n        for (let _ in result.text.attrs)\n            throw new RangeError(\"The text node type should not have attributes\");\n        return result;\n    }\n}\n// Attribute descriptors\nclass Attribute {\n    constructor(options) {\n        this.hasDefault = Object.prototype.hasOwnProperty.call(options, \"default\");\n        this.default = options.default;\n    }\n    get isRequired() {\n        return !this.hasDefault;\n    }\n}\n// Marks\n/**\nLike nodes, marks (which are associated with nodes to signify\nthings like emphasis or being part of a link) are\n[tagged](https://prosemirror.net/docs/ref/#model.Mark.type) with type objects, which are\ninstantiated once per `Schema`.\n*/\nclass MarkType {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The name of the mark type.\n    */\n    name, \n    /**\n    @internal\n    */\n    rank, \n    /**\n    The schema that this mark type instance is part of.\n    */\n    schema, \n    /**\n    The spec on which the type is based.\n    */\n    spec) {\n        this.name = name;\n        this.rank = rank;\n        this.schema = schema;\n        this.spec = spec;\n        this.attrs = initAttrs(spec.attrs);\n        this.excluded = null;\n        let defaults = defaultAttrs(this.attrs);\n        this.instance = defaults ? new Mark(this, defaults) : null;\n    }\n    /**\n    Create a mark of this type. `attrs` may be `null` or an object\n    containing only some of the mark's attributes. The others, if\n    they have defaults, will be added.\n    */\n    create(attrs = null) {\n        if (!attrs && this.instance)\n            return this.instance;\n        return new Mark(this, computeAttrs(this.attrs, attrs));\n    }\n    /**\n    @internal\n    */\n    static compile(marks, schema) {\n        let result = Object.create(null), rank = 0;\n        marks.forEach((name, spec) => result[name] = new MarkType(name, rank++, schema, spec));\n        return result;\n    }\n    /**\n    When there is a mark of this type in the given set, a new set\n    without it is returned. Otherwise, the input set is returned.\n    */\n    removeFromSet(set) {\n        for (var i = 0; i < set.length; i++)\n            if (set[i].type == this) {\n                set = set.slice(0, i).concat(set.slice(i + 1));\n                i--;\n            }\n        return set;\n    }\n    /**\n    Tests whether there is a mark of this type in the given set.\n    */\n    isInSet(set) {\n        for (let i = 0; i < set.length; i++)\n            if (set[i].type == this)\n                return set[i];\n    }\n    /**\n    Queries whether a given mark type is\n    [excluded](https://prosemirror.net/docs/ref/#model.MarkSpec.excludes) by this one.\n    */\n    excludes(other) {\n        return this.excluded.indexOf(other) > -1;\n    }\n}\n/**\nA document schema. Holds [node](https://prosemirror.net/docs/ref/#model.NodeType) and [mark\ntype](https://prosemirror.net/docs/ref/#model.MarkType) objects for the nodes and marks that may\noccur in conforming documents, and provides functionality for\ncreating and deserializing such documents.\n\nWhen given, the type parameters provide the names of the nodes and\nmarks in this schema.\n*/\nclass Schema {\n    /**\n    Construct a schema from a schema [specification](https://prosemirror.net/docs/ref/#model.SchemaSpec).\n    */\n    constructor(spec) {\n        /**\n        An object for storing whatever values modules may want to\n        compute and cache per schema. (If you want to store something\n        in it, try to use property names unlikely to clash.)\n        */\n        this.cached = Object.create(null);\n        this.spec = {\n            nodes: OrderedMap.from(spec.nodes),\n            marks: OrderedMap.from(spec.marks || {}),\n            topNode: spec.topNode\n        };\n        this.nodes = NodeType.compile(this.spec.nodes, this);\n        this.marks = MarkType.compile(this.spec.marks, this);\n        let contentExprCache = Object.create(null);\n        for (let prop in this.nodes) {\n            if (prop in this.marks)\n                throw new RangeError(prop + \" can not be both a node and a mark\");\n            let type = this.nodes[prop], contentExpr = type.spec.content || \"\", markExpr = type.spec.marks;\n            type.contentMatch = contentExprCache[contentExpr] ||\n                (contentExprCache[contentExpr] = ContentMatch.parse(contentExpr, this.nodes));\n            type.inlineContent = type.contentMatch.inlineContent;\n            type.markSet = markExpr == \"_\" ? null :\n                markExpr ? gatherMarks(this, markExpr.split(\" \")) :\n                    markExpr == \"\" || !type.inlineContent ? [] : null;\n        }\n        for (let prop in this.marks) {\n            let type = this.marks[prop], excl = type.spec.excludes;\n            type.excluded = excl == null ? [type] : excl == \"\" ? [] : gatherMarks(this, excl.split(\" \"));\n        }\n        this.nodeFromJSON = this.nodeFromJSON.bind(this);\n        this.markFromJSON = this.markFromJSON.bind(this);\n        this.topNodeType = this.nodes[this.spec.topNode || \"doc\"];\n        this.cached.wrappings = Object.create(null);\n    }\n    /**\n    Create a node in this schema. The `type` may be a string or a\n    `NodeType` instance. Attributes will be extended with defaults,\n    `content` may be a `Fragment`, `null`, a `Node`, or an array of\n    nodes.\n    */\n    node(type, attrs = null, content, marks) {\n        if (typeof type == \"string\")\n            type = this.nodeType(type);\n        else if (!(type instanceof NodeType))\n            throw new RangeError(\"Invalid node type: \" + type);\n        else if (type.schema != this)\n            throw new RangeError(\"Node type from different schema used (\" + type.name + \")\");\n        return type.createChecked(attrs, content, marks);\n    }\n    /**\n    Create a text node in the schema. Empty text nodes are not\n    allowed.\n    */\n    text(text, marks) {\n        let type = this.nodes.text;\n        return new TextNode(type, type.defaultAttrs, text, Mark.setFrom(marks));\n    }\n    /**\n    Create a mark with the given type and attributes.\n    */\n    mark(type, attrs) {\n        if (typeof type == \"string\")\n            type = this.marks[type];\n        return type.create(attrs);\n    }\n    /**\n    Deserialize a node from its JSON representation. This method is\n    bound.\n    */\n    nodeFromJSON(json) {\n        return Node.fromJSON(this, json);\n    }\n    /**\n    Deserialize a mark from its JSON representation. This method is\n    bound.\n    */\n    markFromJSON(json) {\n        return Mark.fromJSON(this, json);\n    }\n    /**\n    @internal\n    */\n    nodeType(name) {\n        let found = this.nodes[name];\n        if (!found)\n            throw new RangeError(\"Unknown node type: \" + name);\n        return found;\n    }\n}\nfunction gatherMarks(schema, marks) {\n    let found = [];\n    for (let i = 0; i < marks.length; i++) {\n        let name = marks[i], mark = schema.marks[name], ok = mark;\n        if (mark) {\n            found.push(mark);\n        }\n        else {\n            for (let prop in schema.marks) {\n                let mark = schema.marks[prop];\n                if (name == \"_\" || (mark.spec.group && mark.spec.group.split(\" \").indexOf(name) > -1))\n                    found.push(ok = mark);\n            }\n        }\n        if (!ok)\n            throw new SyntaxError(\"Unknown mark type: '\" + marks[i] + \"'\");\n    }\n    return found;\n}\n\n/**\nA DOM parser represents a strategy for parsing DOM content into a\nProseMirror document conforming to a given schema. Its behavior is\ndefined by an array of [rules](https://prosemirror.net/docs/ref/#model.ParseRule).\n*/\nclass DOMParser {\n    /**\n    Create a parser that targets the given schema, using the given\n    parsing rules.\n    */\n    constructor(\n    /**\n    The schema into which the parser parses.\n    */\n    schema, \n    /**\n    The set of [parse rules](https://prosemirror.net/docs/ref/#model.ParseRule) that the parser\n    uses, in order of precedence.\n    */\n    rules) {\n        this.schema = schema;\n        this.rules = rules;\n        /**\n        @internal\n        */\n        this.tags = [];\n        /**\n        @internal\n        */\n        this.styles = [];\n        rules.forEach(rule => {\n            if (rule.tag)\n                this.tags.push(rule);\n            else if (rule.style)\n                this.styles.push(rule);\n        });\n        // Only normalize list elements when lists in the schema can't directly contain themselves\n        this.normalizeLists = !this.tags.some(r => {\n            if (!/^(ul|ol)\\b/.test(r.tag) || !r.node)\n                return false;\n            let node = schema.nodes[r.node];\n            return node.contentMatch.matchType(node);\n        });\n    }\n    /**\n    Parse a document from the content of a DOM node.\n    */\n    parse(dom, options = {}) {\n        let context = new ParseContext(this, options, false);\n        context.addAll(dom, options.from, options.to);\n        return context.finish();\n    }\n    /**\n    Parses the content of the given DOM node, like\n    [`parse`](https://prosemirror.net/docs/ref/#model.DOMParser.parse), and takes the same set of\n    options. But unlike that method, which produces a whole node,\n    this one returns a slice that is open at the sides, meaning that\n    the schema constraints aren't applied to the start of nodes to\n    the left of the input and the end of nodes at the end.\n    */\n    parseSlice(dom, options = {}) {\n        let context = new ParseContext(this, options, true);\n        context.addAll(dom, options.from, options.to);\n        return Slice.maxOpen(context.finish());\n    }\n    /**\n    @internal\n    */\n    matchTag(dom, context, after) {\n        for (let i = after ? this.tags.indexOf(after) + 1 : 0; i < this.tags.length; i++) {\n            let rule = this.tags[i];\n            if (matches(dom, rule.tag) &&\n                (rule.namespace === undefined || dom.namespaceURI == rule.namespace) &&\n                (!rule.context || context.matchesContext(rule.context))) {\n                if (rule.getAttrs) {\n                    let result = rule.getAttrs(dom);\n                    if (result === false)\n                        continue;\n                    rule.attrs = result || undefined;\n                }\n                return rule;\n            }\n        }\n    }\n    /**\n    @internal\n    */\n    matchStyle(prop, value, context, after) {\n        for (let i = after ? this.styles.indexOf(after) + 1 : 0; i < this.styles.length; i++) {\n            let rule = this.styles[i], style = rule.style;\n            if (style.indexOf(prop) != 0 ||\n                rule.context && !context.matchesContext(rule.context) ||\n                // Test that the style string either precisely matches the prop,\n                // or has an '=' sign after the prop, followed by the given\n                // value.\n                style.length > prop.length &&\n                    (style.charCodeAt(prop.length) != 61 || style.slice(prop.length + 1) != value))\n                continue;\n            if (rule.getAttrs) {\n                let result = rule.getAttrs(value);\n                if (result === false)\n                    continue;\n                rule.attrs = result || undefined;\n            }\n            return rule;\n        }\n    }\n    /**\n    @internal\n    */\n    static schemaRules(schema) {\n        let result = [];\n        function insert(rule) {\n            let priority = rule.priority == null ? 50 : rule.priority, i = 0;\n            for (; i < result.length; i++) {\n                let next = result[i], nextPriority = next.priority == null ? 50 : next.priority;\n                if (nextPriority < priority)\n                    break;\n            }\n            result.splice(i, 0, rule);\n        }\n        for (let name in schema.marks) {\n            let rules = schema.marks[name].spec.parseDOM;\n            if (rules)\n                rules.forEach(rule => {\n                    insert(rule = copy(rule));\n                    rule.mark = name;\n                });\n        }\n        for (let name in schema.nodes) {\n            let rules = schema.nodes[name].spec.parseDOM;\n            if (rules)\n                rules.forEach(rule => {\n                    insert(rule = copy(rule));\n                    rule.node = name;\n                });\n        }\n        return result;\n    }\n    /**\n    Construct a DOM parser using the parsing rules listed in a\n    schema's [node specs](https://prosemirror.net/docs/ref/#model.NodeSpec.parseDOM), reordered by\n    [priority](https://prosemirror.net/docs/ref/#model.ParseRule.priority).\n    */\n    static fromSchema(schema) {\n        return schema.cached.domParser ||\n            (schema.cached.domParser = new DOMParser(schema, DOMParser.schemaRules(schema)));\n    }\n}\nconst blockTags = {\n    address: true, article: true, aside: true, blockquote: true, canvas: true,\n    dd: true, div: true, dl: true, fieldset: true, figcaption: true, figure: true,\n    footer: true, form: true, h1: true, h2: true, h3: true, h4: true, h5: true,\n    h6: true, header: true, hgroup: true, hr: true, li: true, noscript: true, ol: true,\n    output: true, p: true, pre: true, section: true, table: true, tfoot: true, ul: true\n};\nconst ignoreTags = {\n    head: true, noscript: true, object: true, script: true, style: true, title: true\n};\nconst listTags = { ol: true, ul: true };\n// Using a bitfield for node context options\nconst OPT_PRESERVE_WS = 1, OPT_PRESERVE_WS_FULL = 2, OPT_OPEN_LEFT = 4;\nfunction wsOptionsFor(type, preserveWhitespace, base) {\n    if (preserveWhitespace != null)\n        return (preserveWhitespace ? OPT_PRESERVE_WS : 0) |\n            (preserveWhitespace === \"full\" ? OPT_PRESERVE_WS_FULL : 0);\n    return type && type.whitespace == \"pre\" ? OPT_PRESERVE_WS | OPT_PRESERVE_WS_FULL : base & ~OPT_OPEN_LEFT;\n}\nclass NodeContext {\n    constructor(type, attrs, \n    // Marks applied to this node itself\n    marks, \n    // Marks that can't apply here, but will be used in children if possible\n    pendingMarks, solid, match, options) {\n        this.type = type;\n        this.attrs = attrs;\n        this.marks = marks;\n        this.pendingMarks = pendingMarks;\n        this.solid = solid;\n        this.options = options;\n        this.content = [];\n        // Marks applied to the node's children\n        this.activeMarks = Mark.none;\n        // Nested Marks with same type\n        this.stashMarks = [];\n        this.match = match || (options & OPT_OPEN_LEFT ? null : type.contentMatch);\n    }\n    findWrapping(node) {\n        if (!this.match) {\n            if (!this.type)\n                return [];\n            let fill = this.type.contentMatch.fillBefore(Fragment.from(node));\n            if (fill) {\n                this.match = this.type.contentMatch.matchFragment(fill);\n            }\n            else {\n                let start = this.type.contentMatch, wrap;\n                if (wrap = start.findWrapping(node.type)) {\n                    this.match = start;\n                    return wrap;\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        return this.match.findWrapping(node.type);\n    }\n    finish(openEnd) {\n        if (!(this.options & OPT_PRESERVE_WS)) { // Strip trailing whitespace\n            let last = this.content[this.content.length - 1], m;\n            if (last && last.isText && (m = /[ \\t\\r\\n\\u000c]+$/.exec(last.text))) {\n                let text = last;\n                if (last.text.length == m[0].length)\n                    this.content.pop();\n                else\n                    this.content[this.content.length - 1] = text.withText(text.text.slice(0, text.text.length - m[0].length));\n            }\n        }\n        let content = Fragment.from(this.content);\n        if (!openEnd && this.match)\n            content = content.append(this.match.fillBefore(Fragment.empty, true));\n        return this.type ? this.type.create(this.attrs, content, this.marks) : content;\n    }\n    popFromStashMark(mark) {\n        for (let i = this.stashMarks.length - 1; i >= 0; i--)\n            if (mark.eq(this.stashMarks[i]))\n                return this.stashMarks.splice(i, 1)[0];\n    }\n    applyPending(nextType) {\n        for (let i = 0, pending = this.pendingMarks; i < pending.length; i++) {\n            let mark = pending[i];\n            if ((this.type ? this.type.allowsMarkType(mark.type) : markMayApply(mark.type, nextType)) &&\n                !mark.isInSet(this.activeMarks)) {\n                this.activeMarks = mark.addToSet(this.activeMarks);\n                this.pendingMarks = mark.removeFromSet(this.pendingMarks);\n            }\n        }\n    }\n    inlineContext(node) {\n        if (this.type)\n            return this.type.inlineContent;\n        if (this.content.length)\n            return this.content[0].isInline;\n        return node.parentNode && !blockTags.hasOwnProperty(node.parentNode.nodeName.toLowerCase());\n    }\n}\nclass ParseContext {\n    constructor(\n    // The parser we are using.\n    parser, \n    // The options passed to this parse.\n    options, isOpen) {\n        this.parser = parser;\n        this.options = options;\n        this.isOpen = isOpen;\n        this.open = 0;\n        let topNode = options.topNode, topContext;\n        let topOptions = wsOptionsFor(null, options.preserveWhitespace, 0) | (isOpen ? OPT_OPEN_LEFT : 0);\n        if (topNode)\n            topContext = new NodeContext(topNode.type, topNode.attrs, Mark.none, Mark.none, true, options.topMatch || topNode.type.contentMatch, topOptions);\n        else if (isOpen)\n            topContext = new NodeContext(null, null, Mark.none, Mark.none, true, null, topOptions);\n        else\n            topContext = new NodeContext(parser.schema.topNodeType, null, Mark.none, Mark.none, true, null, topOptions);\n        this.nodes = [topContext];\n        this.find = options.findPositions;\n        this.needsBlock = false;\n    }\n    get top() {\n        return this.nodes[this.open];\n    }\n    // Add a DOM node to the content. Text is inserted as text node,\n    // otherwise, the node is passed to `addElement` or, if it has a\n    // `style` attribute, `addElementWithStyles`.\n    addDOM(dom) {\n        if (dom.nodeType == 3) {\n            this.addTextNode(dom);\n        }\n        else if (dom.nodeType == 1) {\n            let style = dom.getAttribute(\"style\");\n            let marks = style ? this.readStyles(parseStyles(style)) : null, top = this.top;\n            if (marks != null)\n                for (let i = 0; i < marks.length; i++)\n                    this.addPendingMark(marks[i]);\n            this.addElement(dom);\n            if (marks != null)\n                for (let i = 0; i < marks.length; i++)\n                    this.removePendingMark(marks[i], top);\n        }\n    }\n    addTextNode(dom) {\n        let value = dom.nodeValue;\n        let top = this.top;\n        if (top.options & OPT_PRESERVE_WS_FULL ||\n            top.inlineContext(dom) ||\n            /[^ \\t\\r\\n\\u000c]/.test(value)) {\n            if (!(top.options & OPT_PRESERVE_WS)) {\n                value = value.replace(/[ \\t\\r\\n\\u000c]+/g, \" \");\n                // If this starts with whitespace, and there is no node before it, or\n                // a hard break, or a text node that ends with whitespace, strip the\n                // leading space.\n                if (/^[ \\t\\r\\n\\u000c]/.test(value) && this.open == this.nodes.length - 1) {\n                    let nodeBefore = top.content[top.content.length - 1];\n                    let domNodeBefore = dom.previousSibling;\n                    if (!nodeBefore ||\n                        (domNodeBefore && domNodeBefore.nodeName == 'BR') ||\n                        (nodeBefore.isText && /[ \\t\\r\\n\\u000c]$/.test(nodeBefore.text)))\n                        value = value.slice(1);\n                }\n            }\n            else if (!(top.options & OPT_PRESERVE_WS_FULL)) {\n                value = value.replace(/\\r?\\n|\\r/g, \" \");\n            }\n            else {\n                value = value.replace(/\\r\\n?/g, \"\\n\");\n            }\n            if (value)\n                this.insertNode(this.parser.schema.text(value));\n            this.findInText(dom);\n        }\n        else {\n            this.findInside(dom);\n        }\n    }\n    // Try to find a handler for the given tag and use that to parse. If\n    // none is found, the element's content nodes are added directly.\n    addElement(dom, matchAfter) {\n        let name = dom.nodeName.toLowerCase(), ruleID;\n        if (listTags.hasOwnProperty(name) && this.parser.normalizeLists)\n            normalizeList(dom);\n        let rule = (this.options.ruleFromNode && this.options.ruleFromNode(dom)) ||\n            (ruleID = this.parser.matchTag(dom, this, matchAfter));\n        if (rule ? rule.ignore : ignoreTags.hasOwnProperty(name)) {\n            this.findInside(dom);\n            this.ignoreFallback(dom);\n        }\n        else if (!rule || rule.skip || rule.closeParent) {\n            if (rule && rule.closeParent)\n                this.open = Math.max(0, this.open - 1);\n            else if (rule && rule.skip.nodeType)\n                dom = rule.skip;\n            let sync, top = this.top, oldNeedsBlock = this.needsBlock;\n            if (blockTags.hasOwnProperty(name)) {\n                sync = true;\n                if (!top.type)\n                    this.needsBlock = true;\n            }\n            else if (!dom.firstChild) {\n                this.leafFallback(dom);\n                return;\n            }\n            this.addAll(dom);\n            if (sync)\n                this.sync(top);\n            this.needsBlock = oldNeedsBlock;\n        }\n        else {\n            this.addElementByRule(dom, rule, rule.consuming === false ? ruleID : undefined);\n        }\n    }\n    // Called for leaf DOM nodes that would otherwise be ignored\n    leafFallback(dom) {\n        if (dom.nodeName == \"BR\" && this.top.type && this.top.type.inlineContent)\n            this.addTextNode(dom.ownerDocument.createTextNode(\"\\n\"));\n    }\n    // Called for ignored nodes\n    ignoreFallback(dom) {\n        // Ignored BR nodes should at least create an inline context\n        if (dom.nodeName == \"BR\" && (!this.top.type || !this.top.type.inlineContent))\n            this.findPlace(this.parser.schema.text(\"-\"));\n    }\n    // Run any style parser associated with the node's styles. Either\n    // return an array of marks, or null to indicate some of the styles\n    // had a rule with `ignore` set.\n    readStyles(styles) {\n        let marks = Mark.none;\n        style: for (let i = 0; i < styles.length; i += 2) {\n            for (let after = undefined;;) {\n                let rule = this.parser.matchStyle(styles[i], styles[i + 1], this, after);\n                if (!rule)\n                    continue style;\n                if (rule.ignore)\n                    return null;\n                marks = this.parser.schema.marks[rule.mark].create(rule.attrs).addToSet(marks);\n                if (rule.consuming === false)\n                    after = rule;\n                else\n                    break;\n            }\n        }\n        return marks;\n    }\n    // Look up a handler for the given node. If none are found, return\n    // false. Otherwise, apply it, use its return value to drive the way\n    // the node's content is wrapped, and return true.\n    addElementByRule(dom, rule, continueAfter) {\n        let sync, nodeType, mark;\n        if (rule.node) {\n            nodeType = this.parser.schema.nodes[rule.node];\n            if (!nodeType.isLeaf) {\n                sync = this.enter(nodeType, rule.attrs || null, rule.preserveWhitespace);\n            }\n            else if (!this.insertNode(nodeType.create(rule.attrs))) {\n                this.leafFallback(dom);\n            }\n        }\n        else {\n            let markType = this.parser.schema.marks[rule.mark];\n            mark = markType.create(rule.attrs);\n            this.addPendingMark(mark);\n        }\n        let startIn = this.top;\n        if (nodeType && nodeType.isLeaf) {\n            this.findInside(dom);\n        }\n        else if (continueAfter) {\n            this.addElement(dom, continueAfter);\n        }\n        else if (rule.getContent) {\n            this.findInside(dom);\n            rule.getContent(dom, this.parser.schema).forEach(node => this.insertNode(node));\n        }\n        else {\n            let contentDOM = dom;\n            if (typeof rule.contentElement == \"string\")\n                contentDOM = dom.querySelector(rule.contentElement);\n            else if (typeof rule.contentElement == \"function\")\n                contentDOM = rule.contentElement(dom);\n            else if (rule.contentElement)\n                contentDOM = rule.contentElement;\n            this.findAround(dom, contentDOM, true);\n            this.addAll(contentDOM);\n        }\n        if (sync && this.sync(startIn))\n            this.open--;\n        if (mark)\n            this.removePendingMark(mark, startIn);\n    }\n    // Add all child nodes between `startIndex` and `endIndex` (or the\n    // whole node, if not given). If `sync` is passed, use it to\n    // synchronize after every block element.\n    addAll(parent, startIndex, endIndex) {\n        let index = startIndex || 0;\n        for (let dom = startIndex ? parent.childNodes[startIndex] : parent.firstChild, end = endIndex == null ? null : parent.childNodes[endIndex]; dom != end; dom = dom.nextSibling, ++index) {\n            this.findAtPoint(parent, index);\n            this.addDOM(dom);\n        }\n        this.findAtPoint(parent, index);\n    }\n    // Try to find a way to fit the given node type into the current\n    // context. May add intermediate wrappers and/or leave non-solid\n    // nodes that we're in.\n    findPlace(node) {\n        let route, sync;\n        for (let depth = this.open; depth >= 0; depth--) {\n            let cx = this.nodes[depth];\n            let found = cx.findWrapping(node);\n            if (found && (!route || route.length > found.length)) {\n                route = found;\n                sync = cx;\n                if (!found.length)\n                    break;\n            }\n            if (cx.solid)\n                break;\n        }\n        if (!route)\n            return false;\n        this.sync(sync);\n        for (let i = 0; i < route.length; i++)\n            this.enterInner(route[i], null, false);\n        return true;\n    }\n    // Try to insert the given node, adjusting the context when needed.\n    insertNode(node) {\n        if (node.isInline && this.needsBlock && !this.top.type) {\n            let block = this.textblockFromContext();\n            if (block)\n                this.enterInner(block);\n        }\n        if (this.findPlace(node)) {\n            this.closeExtra();\n            let top = this.top;\n            top.applyPending(node.type);\n            if (top.match)\n                top.match = top.match.matchType(node.type);\n            let marks = top.activeMarks;\n            for (let i = 0; i < node.marks.length; i++)\n                if (!top.type || top.type.allowsMarkType(node.marks[i].type))\n                    marks = node.marks[i].addToSet(marks);\n            top.content.push(node.mark(marks));\n            return true;\n        }\n        return false;\n    }\n    // Try to start a node of the given type, adjusting the context when\n    // necessary.\n    enter(type, attrs, preserveWS) {\n        let ok = this.findPlace(type.create(attrs));\n        if (ok)\n            this.enterInner(type, attrs, true, preserveWS);\n        return ok;\n    }\n    // Open a node of the given type\n    enterInner(type, attrs = null, solid = false, preserveWS) {\n        this.closeExtra();\n        let top = this.top;\n        top.applyPending(type);\n        top.match = top.match && top.match.matchType(type);\n        let options = wsOptionsFor(type, preserveWS, top.options);\n        if ((top.options & OPT_OPEN_LEFT) && top.content.length == 0)\n            options |= OPT_OPEN_LEFT;\n        this.nodes.push(new NodeContext(type, attrs, top.activeMarks, top.pendingMarks, solid, null, options));\n        this.open++;\n    }\n    // Make sure all nodes above this.open are finished and added to\n    // their parents\n    closeExtra(openEnd = false) {\n        let i = this.nodes.length - 1;\n        if (i > this.open) {\n            for (; i > this.open; i--)\n                this.nodes[i - 1].content.push(this.nodes[i].finish(openEnd));\n            this.nodes.length = this.open + 1;\n        }\n    }\n    finish() {\n        this.open = 0;\n        this.closeExtra(this.isOpen);\n        return this.nodes[0].finish(this.isOpen || this.options.topOpen);\n    }\n    sync(to) {\n        for (let i = this.open; i >= 0; i--)\n            if (this.nodes[i] == to) {\n                this.open = i;\n                return true;\n            }\n        return false;\n    }\n    get currentPos() {\n        this.closeExtra();\n        let pos = 0;\n        for (let i = this.open; i >= 0; i--) {\n            let content = this.nodes[i].content;\n            for (let j = content.length - 1; j >= 0; j--)\n                pos += content[j].nodeSize;\n            if (i)\n                pos++;\n        }\n        return pos;\n    }\n    findAtPoint(parent, offset) {\n        if (this.find)\n            for (let i = 0; i < this.find.length; i++) {\n                if (this.find[i].node == parent && this.find[i].offset == offset)\n                    this.find[i].pos = this.currentPos;\n            }\n    }\n    findInside(parent) {\n        if (this.find)\n            for (let i = 0; i < this.find.length; i++) {\n                if (this.find[i].pos == null && parent.nodeType == 1 && parent.contains(this.find[i].node))\n                    this.find[i].pos = this.currentPos;\n            }\n    }\n    findAround(parent, content, before) {\n        if (parent != content && this.find)\n            for (let i = 0; i < this.find.length; i++) {\n                if (this.find[i].pos == null && parent.nodeType == 1 && parent.contains(this.find[i].node)) {\n                    let pos = content.compareDocumentPosition(this.find[i].node);\n                    if (pos & (before ? 2 : 4))\n                        this.find[i].pos = this.currentPos;\n                }\n            }\n    }\n    findInText(textNode) {\n        if (this.find)\n            for (let i = 0; i < this.find.length; i++) {\n                if (this.find[i].node == textNode)\n                    this.find[i].pos = this.currentPos - (textNode.nodeValue.length - this.find[i].offset);\n            }\n    }\n    // Determines whether the given context string matches this context.\n    matchesContext(context) {\n        if (context.indexOf(\"|\") > -1)\n            return context.split(/\\s*\\|\\s*/).some(this.matchesContext, this);\n        let parts = context.split(\"/\");\n        let option = this.options.context;\n        let useRoot = !this.isOpen && (!option || option.parent.type == this.nodes[0].type);\n        let minDepth = -(option ? option.depth + 1 : 0) + (useRoot ? 0 : 1);\n        let match = (i, depth) => {\n            for (; i >= 0; i--) {\n                let part = parts[i];\n                if (part == \"\") {\n                    if (i == parts.length - 1 || i == 0)\n                        continue;\n                    for (; depth >= minDepth; depth--)\n                        if (match(i - 1, depth))\n                            return true;\n                    return false;\n                }\n                else {\n                    let next = depth > 0 || (depth == 0 && useRoot) ? this.nodes[depth].type\n                        : option && depth >= minDepth ? option.node(depth - minDepth).type\n                            : null;\n                    if (!next || (next.name != part && next.groups.indexOf(part) == -1))\n                        return false;\n                    depth--;\n                }\n            }\n            return true;\n        };\n        return match(parts.length - 1, this.open);\n    }\n    textblockFromContext() {\n        let $context = this.options.context;\n        if ($context)\n            for (let d = $context.depth; d >= 0; d--) {\n                let deflt = $context.node(d).contentMatchAt($context.indexAfter(d)).defaultType;\n                if (deflt && deflt.isTextblock && deflt.defaultAttrs)\n                    return deflt;\n            }\n        for (let name in this.parser.schema.nodes) {\n            let type = this.parser.schema.nodes[name];\n            if (type.isTextblock && type.defaultAttrs)\n                return type;\n        }\n    }\n    addPendingMark(mark) {\n        let found = findSameMarkInSet(mark, this.top.pendingMarks);\n        if (found)\n            this.top.stashMarks.push(found);\n        this.top.pendingMarks = mark.addToSet(this.top.pendingMarks);\n    }\n    removePendingMark(mark, upto) {\n        for (let depth = this.open; depth >= 0; depth--) {\n            let level = this.nodes[depth];\n            let found = level.pendingMarks.lastIndexOf(mark);\n            if (found > -1) {\n                level.pendingMarks = mark.removeFromSet(level.pendingMarks);\n            }\n            else {\n                level.activeMarks = mark.removeFromSet(level.activeMarks);\n                let stashMark = level.popFromStashMark(mark);\n                if (stashMark && level.type && level.type.allowsMarkType(stashMark.type))\n                    level.activeMarks = stashMark.addToSet(level.activeMarks);\n            }\n            if (level == upto)\n                break;\n        }\n    }\n}\n// Kludge to work around directly nested list nodes produced by some\n// tools and allowed by browsers to mean that the nested list is\n// actually part of the list item above it.\nfunction normalizeList(dom) {\n    for (let child = dom.firstChild, prevItem = null; child; child = child.nextSibling) {\n        let name = child.nodeType == 1 ? child.nodeName.toLowerCase() : null;\n        if (name && listTags.hasOwnProperty(name) && prevItem) {\n            prevItem.appendChild(child);\n            child = prevItem;\n        }\n        else if (name == \"li\") {\n            prevItem = child;\n        }\n        else if (name) {\n            prevItem = null;\n        }\n    }\n}\n// Apply a CSS selector.\nfunction matches(dom, selector) {\n    return (dom.matches || dom.msMatchesSelector || dom.webkitMatchesSelector || dom.mozMatchesSelector).call(dom, selector);\n}\n// Tokenize a style attribute into property/value pairs.\nfunction parseStyles(style) {\n    let re = /\\s*([\\w-]+)\\s*:\\s*([^;]+)/g, m, result = [];\n    while (m = re.exec(style))\n        result.push(m[1], m[2].trim());\n    return result;\n}\nfunction copy(obj) {\n    let copy = {};\n    for (let prop in obj)\n        copy[prop] = obj[prop];\n    return copy;\n}\n// Used when finding a mark at the top level of a fragment parse.\n// Checks whether it would be reasonable to apply a given mark type to\n// a given node, by looking at the way the mark occurs in the schema.\nfunction markMayApply(markType, nodeType) {\n    let nodes = nodeType.schema.nodes;\n    for (let name in nodes) {\n        let parent = nodes[name];\n        if (!parent.allowsMarkType(markType))\n            continue;\n        let seen = [], scan = (match) => {\n            seen.push(match);\n            for (let i = 0; i < match.edgeCount; i++) {\n                let { type, next } = match.edge(i);\n                if (type == nodeType)\n                    return true;\n                if (seen.indexOf(next) < 0 && scan(next))\n                    return true;\n            }\n        };\n        if (scan(parent.contentMatch))\n            return true;\n    }\n}\nfunction findSameMarkInSet(mark, set) {\n    for (let i = 0; i < set.length; i++) {\n        if (mark.eq(set[i]))\n            return set[i];\n    }\n}\n\n/**\nA DOM serializer knows how to convert ProseMirror nodes and\nmarks of various types to DOM nodes.\n*/\nclass DOMSerializer {\n    /**\n    Create a serializer. `nodes` should map node names to functions\n    that take a node and return a description of the corresponding\n    DOM. `marks` does the same for mark names, but also gets an\n    argument that tells it whether the mark's content is block or\n    inline content (for typical use, it'll always be inline). A mark\n    serializer may be `null` to indicate that marks of that type\n    should not be serialized.\n    */\n    constructor(\n    /**\n    The node serialization functions.\n    */\n    nodes, \n    /**\n    The mark serialization functions.\n    */\n    marks) {\n        this.nodes = nodes;\n        this.marks = marks;\n    }\n    /**\n    Serialize the content of this fragment to a DOM fragment. When\n    not in the browser, the `document` option, containing a DOM\n    document, should be passed so that the serializer can create\n    nodes.\n    */\n    serializeFragment(fragment, options = {}, target) {\n        if (!target)\n            target = doc(options).createDocumentFragment();\n        let top = target, active = [];\n        fragment.forEach(node => {\n            if (active.length || node.marks.length) {\n                let keep = 0, rendered = 0;\n                while (keep < active.length && rendered < node.marks.length) {\n                    let next = node.marks[rendered];\n                    if (!this.marks[next.type.name]) {\n                        rendered++;\n                        continue;\n                    }\n                    if (!next.eq(active[keep][0]) || next.type.spec.spanning === false)\n                        break;\n                    keep++;\n                    rendered++;\n                }\n                while (keep < active.length)\n                    top = active.pop()[1];\n                while (rendered < node.marks.length) {\n                    let add = node.marks[rendered++];\n                    let markDOM = this.serializeMark(add, node.isInline, options);\n                    if (markDOM) {\n                        active.push([add, top]);\n                        top.appendChild(markDOM.dom);\n                        top = markDOM.contentDOM || markDOM.dom;\n                    }\n                }\n            }\n            top.appendChild(this.serializeNodeInner(node, options));\n        });\n        return target;\n    }\n    /**\n    @internal\n    */\n    serializeNodeInner(node, options) {\n        let { dom, contentDOM } = DOMSerializer.renderSpec(doc(options), this.nodes[node.type.name](node));\n        if (contentDOM) {\n            if (node.isLeaf)\n                throw new RangeError(\"Content hole not allowed in a leaf node spec\");\n            this.serializeFragment(node.content, options, contentDOM);\n        }\n        return dom;\n    }\n    /**\n    Serialize this node to a DOM node. This can be useful when you\n    need to serialize a part of a document, as opposed to the whole\n    document. To serialize a whole document, use\n    [`serializeFragment`](https://prosemirror.net/docs/ref/#model.DOMSerializer.serializeFragment) on\n    its [content](https://prosemirror.net/docs/ref/#model.Node.content).\n    */\n    serializeNode(node, options = {}) {\n        let dom = this.serializeNodeInner(node, options);\n        for (let i = node.marks.length - 1; i >= 0; i--) {\n            let wrap = this.serializeMark(node.marks[i], node.isInline, options);\n            if (wrap) {\n                (wrap.contentDOM || wrap.dom).appendChild(dom);\n                dom = wrap.dom;\n            }\n        }\n        return dom;\n    }\n    /**\n    @internal\n    */\n    serializeMark(mark, inline, options = {}) {\n        let toDOM = this.marks[mark.type.name];\n        return toDOM && DOMSerializer.renderSpec(doc(options), toDOM(mark, inline));\n    }\n    /**\n    Render an [output spec](https://prosemirror.net/docs/ref/#model.DOMOutputSpec) to a DOM node. If\n    the spec has a hole (zero) in it, `contentDOM` will point at the\n    node with the hole.\n    */\n    static renderSpec(doc, structure, xmlNS = null) {\n        if (typeof structure == \"string\")\n            return { dom: doc.createTextNode(structure) };\n        if (structure.nodeType != null)\n            return { dom: structure };\n        if (structure.dom && structure.dom.nodeType != null)\n            return structure;\n        let tagName = structure[0], space = tagName.indexOf(\" \");\n        if (space > 0) {\n            xmlNS = tagName.slice(0, space);\n            tagName = tagName.slice(space + 1);\n        }\n        let contentDOM;\n        let dom = (xmlNS ? doc.createElementNS(xmlNS, tagName) : doc.createElement(tagName));\n        let attrs = structure[1], start = 1;\n        if (attrs && typeof attrs == \"object\" && attrs.nodeType == null && !Array.isArray(attrs)) {\n            start = 2;\n            for (let name in attrs)\n                if (attrs[name] != null) {\n                    let space = name.indexOf(\" \");\n                    if (space > 0)\n                        dom.setAttributeNS(name.slice(0, space), name.slice(space + 1), attrs[name]);\n                    else\n                        dom.setAttribute(name, attrs[name]);\n                }\n        }\n        for (let i = start; i < structure.length; i++) {\n            let child = structure[i];\n            if (child === 0) {\n                if (i < structure.length - 1 || i > start)\n                    throw new RangeError(\"Content hole must be the only child of its parent node\");\n                return { dom, contentDOM: dom };\n            }\n            else {\n                let { dom: inner, contentDOM: innerContent } = DOMSerializer.renderSpec(doc, child, xmlNS);\n                dom.appendChild(inner);\n                if (innerContent) {\n                    if (contentDOM)\n                        throw new RangeError(\"Multiple content holes\");\n                    contentDOM = innerContent;\n                }\n            }\n        }\n        return { dom, contentDOM };\n    }\n    /**\n    Build a serializer using the [`toDOM`](https://prosemirror.net/docs/ref/#model.NodeSpec.toDOM)\n    properties in a schema's node and mark specs.\n    */\n    static fromSchema(schema) {\n        return schema.cached.domSerializer ||\n            (schema.cached.domSerializer = new DOMSerializer(this.nodesFromSchema(schema), this.marksFromSchema(schema)));\n    }\n    /**\n    Gather the serializers in a schema's node specs into an object.\n    This can be useful as a base to build a custom serializer from.\n    */\n    static nodesFromSchema(schema) {\n        let result = gatherToDOM(schema.nodes);\n        if (!result.text)\n            result.text = node => node.text;\n        return result;\n    }\n    /**\n    Gather the serializers in a schema's mark specs into an object.\n    */\n    static marksFromSchema(schema) {\n        return gatherToDOM(schema.marks);\n    }\n}\nfunction gatherToDOM(obj) {\n    let result = {};\n    for (let name in obj) {\n        let toDOM = obj[name].spec.toDOM;\n        if (toDOM)\n            result[name] = toDOM;\n    }\n    return result;\n}\nfunction doc(options) {\n    return options.document || window.document;\n}\n\nexport { ContentMatch, DOMParser, DOMSerializer, Fragment, Mark, MarkType, Node, NodeRange, NodeType, ReplaceError, ResolvedPos, Schema, Slice };\n","import { ReplaceError, Slice, Fragment, MarkType } from 'prosemirror-model';\n\n// Recovery values encode a range index and an offset. They are\n// represented as numbers, because tons of them will be created when\n// mapping, for example, a large number of decorations. The number's\n// lower 16 bits provide the index, the remaining bits the offset.\n//\n// Note: We intentionally don't use bit shift operators to en- and\n// decode these, since those clip to 32 bits, which we might in rare\n// cases want to overflow. A 64-bit float can represent 48-bit\n// integers precisely.\nconst lower16 = 0xffff;\nconst factor16 = Math.pow(2, 16);\nfunction makeRecover(index, offset) { return index + offset * factor16; }\nfunction recoverIndex(value) { return value & lower16; }\nfunction recoverOffset(value) { return (value - (value & lower16)) / factor16; }\nconst DEL_BEFORE = 1, DEL_AFTER = 2, DEL_ACROSS = 4, DEL_SIDE = 8;\n/**\nAn object representing a mapped position with extra\ninformation.\n*/\nclass MapResult {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The mapped version of the position.\n    */\n    pos, \n    /**\n    @internal\n    */\n    delInfo, \n    /**\n    @internal\n    */\n    recover) {\n        this.pos = pos;\n        this.delInfo = delInfo;\n        this.recover = recover;\n    }\n    /**\n    Tells you whether the position was deleted, that is, whether the\n    step removed the token on the side queried (via the `assoc`)\n    argument from the document.\n    */\n    get deleted() { return (this.delInfo & DEL_SIDE) > 0; }\n    /**\n    Tells you whether the token before the mapped position was deleted.\n    */\n    get deletedBefore() { return (this.delInfo & (DEL_BEFORE | DEL_ACROSS)) > 0; }\n    /**\n    True when the token after the mapped position was deleted.\n    */\n    get deletedAfter() { return (this.delInfo & (DEL_AFTER | DEL_ACROSS)) > 0; }\n    /**\n    Tells whether any of the steps mapped through deletes across the\n    position (including both the token before and after the\n    position).\n    */\n    get deletedAcross() { return (this.delInfo & DEL_ACROSS) > 0; }\n}\n/**\nA map describing the deletions and insertions made by a step, which\ncan be used to find the correspondence between positions in the\npre-step version of a document and the same position in the\npost-step version.\n*/\nclass StepMap {\n    /**\n    Create a position map. The modifications to the document are\n    represented as an array of numbers, in which each group of three\n    represents a modified chunk as `[start, oldSize, newSize]`.\n    */\n    constructor(\n    /**\n    @internal\n    */\n    ranges, \n    /**\n    @internal\n    */\n    inverted = false) {\n        this.ranges = ranges;\n        this.inverted = inverted;\n        if (!ranges.length && StepMap.empty)\n            return StepMap.empty;\n    }\n    /**\n    @internal\n    */\n    recover(value) {\n        let diff = 0, index = recoverIndex(value);\n        if (!this.inverted)\n            for (let i = 0; i < index; i++)\n                diff += this.ranges[i * 3 + 2] - this.ranges[i * 3 + 1];\n        return this.ranges[index * 3] + diff + recoverOffset(value);\n    }\n    mapResult(pos, assoc = 1) { return this._map(pos, assoc, false); }\n    map(pos, assoc = 1) { return this._map(pos, assoc, true); }\n    /**\n    @internal\n    */\n    _map(pos, assoc, simple) {\n        let diff = 0, oldIndex = this.inverted ? 2 : 1, newIndex = this.inverted ? 1 : 2;\n        for (let i = 0; i < this.ranges.length; i += 3) {\n            let start = this.ranges[i] - (this.inverted ? diff : 0);\n            if (start > pos)\n                break;\n            let oldSize = this.ranges[i + oldIndex], newSize = this.ranges[i + newIndex], end = start + oldSize;\n            if (pos <= end) {\n                let side = !oldSize ? assoc : pos == start ? -1 : pos == end ? 1 : assoc;\n                let result = start + diff + (side < 0 ? 0 : newSize);\n                if (simple)\n                    return result;\n                let recover = pos == (assoc < 0 ? start : end) ? null : makeRecover(i / 3, pos - start);\n                let del = pos == start ? DEL_AFTER : pos == end ? DEL_BEFORE : DEL_ACROSS;\n                if (assoc < 0 ? pos != start : pos != end)\n                    del |= DEL_SIDE;\n                return new MapResult(result, del, recover);\n            }\n            diff += newSize - oldSize;\n        }\n        return simple ? pos + diff : new MapResult(pos + diff, 0, null);\n    }\n    /**\n    @internal\n    */\n    touches(pos, recover) {\n        let diff = 0, index = recoverIndex(recover);\n        let oldIndex = this.inverted ? 2 : 1, newIndex = this.inverted ? 1 : 2;\n        for (let i = 0; i < this.ranges.length; i += 3) {\n            let start = this.ranges[i] - (this.inverted ? diff : 0);\n            if (start > pos)\n                break;\n            let oldSize = this.ranges[i + oldIndex], end = start + oldSize;\n            if (pos <= end && i == index * 3)\n                return true;\n            diff += this.ranges[i + newIndex] - oldSize;\n        }\n        return false;\n    }\n    /**\n    Calls the given function on each of the changed ranges included in\n    this map.\n    */\n    forEach(f) {\n        let oldIndex = this.inverted ? 2 : 1, newIndex = this.inverted ? 1 : 2;\n        for (let i = 0, diff = 0; i < this.ranges.length; i += 3) {\n            let start = this.ranges[i], oldStart = start - (this.inverted ? diff : 0), newStart = start + (this.inverted ? 0 : diff);\n            let oldSize = this.ranges[i + oldIndex], newSize = this.ranges[i + newIndex];\n            f(oldStart, oldStart + oldSize, newStart, newStart + newSize);\n            diff += newSize - oldSize;\n        }\n    }\n    /**\n    Create an inverted version of this map. The result can be used to\n    map positions in the post-step document to the pre-step document.\n    */\n    invert() {\n        return new StepMap(this.ranges, !this.inverted);\n    }\n    /**\n    @internal\n    */\n    toString() {\n        return (this.inverted ? \"-\" : \"\") + JSON.stringify(this.ranges);\n    }\n    /**\n    Create a map that moves all positions by offset `n` (which may be\n    negative). This can be useful when applying steps meant for a\n    sub-document to a larger document, or vice-versa.\n    */\n    static offset(n) {\n        return n == 0 ? StepMap.empty : new StepMap(n < 0 ? [0, -n, 0] : [0, 0, n]);\n    }\n}\n/**\nA StepMap that contains no changed ranges.\n*/\nStepMap.empty = new StepMap([]);\n/**\nA mapping represents a pipeline of zero or more [step\nmaps](https://prosemirror.net/docs/ref/#transform.StepMap). It has special provisions for losslessly\nhandling mapping positions through a series of steps in which some\nsteps are inverted versions of earlier steps. (This comes up when\n[rebasing](/docs/guide/#transform.rebasing) steps for\ncollaboration or history management.)\n*/\nclass Mapping {\n    /**\n    Create a new mapping with the given position maps.\n    */\n    constructor(\n    /**\n    The step maps in this mapping.\n    */\n    maps = [], \n    /**\n    @internal\n    */\n    mirror, \n    /**\n    The starting position in the `maps` array, used when `map` or\n    `mapResult` is called.\n    */\n    from = 0, \n    /**\n    The end position in the `maps` array.\n    */\n    to = maps.length) {\n        this.maps = maps;\n        this.mirror = mirror;\n        this.from = from;\n        this.to = to;\n    }\n    /**\n    Create a mapping that maps only through a part of this one.\n    */\n    slice(from = 0, to = this.maps.length) {\n        return new Mapping(this.maps, this.mirror, from, to);\n    }\n    /**\n    @internal\n    */\n    copy() {\n        return new Mapping(this.maps.slice(), this.mirror && this.mirror.slice(), this.from, this.to);\n    }\n    /**\n    Add a step map to the end of this mapping. If `mirrors` is\n    given, it should be the index of the step map that is the mirror\n    image of this one.\n    */\n    appendMap(map, mirrors) {\n        this.to = this.maps.push(map);\n        if (mirrors != null)\n            this.setMirror(this.maps.length - 1, mirrors);\n    }\n    /**\n    Add all the step maps in a given mapping to this one (preserving\n    mirroring information).\n    */\n    appendMapping(mapping) {\n        for (let i = 0, startSize = this.maps.length; i < mapping.maps.length; i++) {\n            let mirr = mapping.getMirror(i);\n            this.appendMap(mapping.maps[i], mirr != null && mirr < i ? startSize + mirr : undefined);\n        }\n    }\n    /**\n    Finds the offset of the step map that mirrors the map at the\n    given offset, in this mapping (as per the second argument to\n    `appendMap`).\n    */\n    getMirror(n) {\n        if (this.mirror)\n            for (let i = 0; i < this.mirror.length; i++)\n                if (this.mirror[i] == n)\n                    return this.mirror[i + (i % 2 ? -1 : 1)];\n    }\n    /**\n    @internal\n    */\n    setMirror(n, m) {\n        if (!this.mirror)\n            this.mirror = [];\n        this.mirror.push(n, m);\n    }\n    /**\n    Append the inverse of the given mapping to this one.\n    */\n    appendMappingInverted(mapping) {\n        for (let i = mapping.maps.length - 1, totalSize = this.maps.length + mapping.maps.length; i >= 0; i--) {\n            let mirr = mapping.getMirror(i);\n            this.appendMap(mapping.maps[i].invert(), mirr != null && mirr > i ? totalSize - mirr - 1 : undefined);\n        }\n    }\n    /**\n    Create an inverted version of this mapping.\n    */\n    invert() {\n        let inverse = new Mapping;\n        inverse.appendMappingInverted(this);\n        return inverse;\n    }\n    /**\n    Map a position through this mapping.\n    */\n    map(pos, assoc = 1) {\n        if (this.mirror)\n            return this._map(pos, assoc, true);\n        for (let i = this.from; i < this.to; i++)\n            pos = this.maps[i].map(pos, assoc);\n        return pos;\n    }\n    /**\n    Map a position through this mapping, returning a mapping\n    result.\n    */\n    mapResult(pos, assoc = 1) { return this._map(pos, assoc, false); }\n    /**\n    @internal\n    */\n    _map(pos, assoc, simple) {\n        let delInfo = 0;\n        for (let i = this.from; i < this.to; i++) {\n            let map = this.maps[i], result = map.mapResult(pos, assoc);\n            if (result.recover != null) {\n                let corr = this.getMirror(i);\n                if (corr != null && corr > i && corr < this.to) {\n                    i = corr;\n                    pos = this.maps[corr].recover(result.recover);\n                    continue;\n                }\n            }\n            delInfo |= result.delInfo;\n            pos = result.pos;\n        }\n        return simple ? pos : new MapResult(pos, delInfo, null);\n    }\n}\n\nconst stepsByID = Object.create(null);\n/**\nA step object represents an atomic change. It generally applies\nonly to the document it was created for, since the positions\nstored in it will only make sense for that document.\n\nNew steps are defined by creating classes that extend `Step`,\noverriding the `apply`, `invert`, `map`, `getMap` and `fromJSON`\nmethods, and registering your class with a unique\nJSON-serialization identifier using\n[`Step.jsonID`](https://prosemirror.net/docs/ref/#transform.Step^jsonID).\n*/\nclass Step {\n    /**\n    Get the step map that represents the changes made by this step,\n    and which can be used to transform between positions in the old\n    and the new document.\n    */\n    getMap() { return StepMap.empty; }\n    /**\n    Try to merge this step with another one, to be applied directly\n    after it. Returns the merged step when possible, null if the\n    steps can't be merged.\n    */\n    merge(other) { return null; }\n    /**\n    Deserialize a step from its JSON representation. Will call\n    through to the step class' own implementation of this method.\n    */\n    static fromJSON(schema, json) {\n        if (!json || !json.stepType)\n            throw new RangeError(\"Invalid input for Step.fromJSON\");\n        let type = stepsByID[json.stepType];\n        if (!type)\n            throw new RangeError(`No step type ${json.stepType} defined`);\n        return type.fromJSON(schema, json);\n    }\n    /**\n    To be able to serialize steps to JSON, each step needs a string\n    ID to attach to its JSON representation. Use this method to\n    register an ID for your step classes. Try to pick something\n    that's unlikely to clash with steps from other modules.\n    */\n    static jsonID(id, stepClass) {\n        if (id in stepsByID)\n            throw new RangeError(\"Duplicate use of step JSON ID \" + id);\n        stepsByID[id] = stepClass;\n        stepClass.prototype.jsonID = id;\n        return stepClass;\n    }\n}\n/**\nThe result of [applying](https://prosemirror.net/docs/ref/#transform.Step.apply) a step. Contains either a\nnew document or a failure value.\n*/\nclass StepResult {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The transformed document, if successful.\n    */\n    doc, \n    /**\n    The failure message, if unsuccessful.\n    */\n    failed) {\n        this.doc = doc;\n        this.failed = failed;\n    }\n    /**\n    Create a successful step result.\n    */\n    static ok(doc) { return new StepResult(doc, null); }\n    /**\n    Create a failed step result.\n    */\n    static fail(message) { return new StepResult(null, message); }\n    /**\n    Call [`Node.replace`](https://prosemirror.net/docs/ref/#model.Node.replace) with the given\n    arguments. Create a successful result if it succeeds, and a\n    failed one if it throws a `ReplaceError`.\n    */\n    static fromReplace(doc, from, to, slice) {\n        try {\n            return StepResult.ok(doc.replace(from, to, slice));\n        }\n        catch (e) {\n            if (e instanceof ReplaceError)\n                return StepResult.fail(e.message);\n            throw e;\n        }\n    }\n}\n\nfunction mapFragment(fragment, f, parent) {\n    let mapped = [];\n    for (let i = 0; i < fragment.childCount; i++) {\n        let child = fragment.child(i);\n        if (child.content.size)\n            child = child.copy(mapFragment(child.content, f, child));\n        if (child.isInline)\n            child = f(child, parent, i);\n        mapped.push(child);\n    }\n    return Fragment.fromArray(mapped);\n}\n/**\nAdd a mark to all inline content between two positions.\n*/\nclass AddMarkStep extends Step {\n    /**\n    Create a mark step.\n    */\n    constructor(\n    /**\n    The start of the marked range.\n    */\n    from, \n    /**\n    The end of the marked range.\n    */\n    to, \n    /**\n    The mark to add.\n    */\n    mark) {\n        super();\n        this.from = from;\n        this.to = to;\n        this.mark = mark;\n    }\n    apply(doc) {\n        let oldSlice = doc.slice(this.from, this.to), $from = doc.resolve(this.from);\n        let parent = $from.node($from.sharedDepth(this.to));\n        let slice = new Slice(mapFragment(oldSlice.content, (node, parent) => {\n            if (!node.isAtom || !parent.type.allowsMarkType(this.mark.type))\n                return node;\n            return node.mark(this.mark.addToSet(node.marks));\n        }, parent), oldSlice.openStart, oldSlice.openEnd);\n        return StepResult.fromReplace(doc, this.from, this.to, slice);\n    }\n    invert() {\n        return new RemoveMarkStep(this.from, this.to, this.mark);\n    }\n    map(mapping) {\n        let from = mapping.mapResult(this.from, 1), to = mapping.mapResult(this.to, -1);\n        if (from.deleted && to.deleted || from.pos >= to.pos)\n            return null;\n        return new AddMarkStep(from.pos, to.pos, this.mark);\n    }\n    merge(other) {\n        if (other instanceof AddMarkStep &&\n            other.mark.eq(this.mark) &&\n            this.from <= other.to && this.to >= other.from)\n            return new AddMarkStep(Math.min(this.from, other.from), Math.max(this.to, other.to), this.mark);\n        return null;\n    }\n    toJSON() {\n        return { stepType: \"addMark\", mark: this.mark.toJSON(),\n            from: this.from, to: this.to };\n    }\n    /**\n    @internal\n    */\n    static fromJSON(schema, json) {\n        if (typeof json.from != \"number\" || typeof json.to != \"number\")\n            throw new RangeError(\"Invalid input for AddMarkStep.fromJSON\");\n        return new AddMarkStep(json.from, json.to, schema.markFromJSON(json.mark));\n    }\n}\nStep.jsonID(\"addMark\", AddMarkStep);\n/**\nRemove a mark from all inline content between two positions.\n*/\nclass RemoveMarkStep extends Step {\n    /**\n    Create a mark-removing step.\n    */\n    constructor(\n    /**\n    The start of the unmarked range.\n    */\n    from, \n    /**\n    The end of the unmarked range.\n    */\n    to, \n    /**\n    The mark to remove.\n    */\n    mark) {\n        super();\n        this.from = from;\n        this.to = to;\n        this.mark = mark;\n    }\n    apply(doc) {\n        let oldSlice = doc.slice(this.from, this.to);\n        let slice = new Slice(mapFragment(oldSlice.content, node => {\n            return node.mark(this.mark.removeFromSet(node.marks));\n        }, doc), oldSlice.openStart, oldSlice.openEnd);\n        return StepResult.fromReplace(doc, this.from, this.to, slice);\n    }\n    invert() {\n        return new AddMarkStep(this.from, this.to, this.mark);\n    }\n    map(mapping) {\n        let from = mapping.mapResult(this.from, 1), to = mapping.mapResult(this.to, -1);\n        if (from.deleted && to.deleted || from.pos >= to.pos)\n            return null;\n        return new RemoveMarkStep(from.pos, to.pos, this.mark);\n    }\n    merge(other) {\n        if (other instanceof RemoveMarkStep &&\n            other.mark.eq(this.mark) &&\n            this.from <= other.to && this.to >= other.from)\n            return new RemoveMarkStep(Math.min(this.from, other.from), Math.max(this.to, other.to), this.mark);\n        return null;\n    }\n    toJSON() {\n        return { stepType: \"removeMark\", mark: this.mark.toJSON(),\n            from: this.from, to: this.to };\n    }\n    /**\n    @internal\n    */\n    static fromJSON(schema, json) {\n        if (typeof json.from != \"number\" || typeof json.to != \"number\")\n            throw new RangeError(\"Invalid input for RemoveMarkStep.fromJSON\");\n        return new RemoveMarkStep(json.from, json.to, schema.markFromJSON(json.mark));\n    }\n}\nStep.jsonID(\"removeMark\", RemoveMarkStep);\n\n/**\nReplace a part of the document with a slice of new content.\n*/\nclass ReplaceStep extends Step {\n    /**\n    The given `slice` should fit the 'gap' between `from` and\n    `to`the depths must line up, and the surrounding nodes must be\n    able to be joined with the open sides of the slice. When\n    `structure` is true, the step will fail if the content between\n    from and to is not just a sequence of closing and then opening\n    tokens (this is to guard against rebased replace steps\n    overwriting something they weren't supposed to).\n    */\n    constructor(\n    /**\n    The start position of the replaced range.\n    */\n    from, \n    /**\n    The end position of the replaced range.\n    */\n    to, \n    /**\n    The slice to insert.\n    */\n    slice, \n    /**\n    @internal\n    */\n    structure = false) {\n        super();\n        this.from = from;\n        this.to = to;\n        this.slice = slice;\n        this.structure = structure;\n    }\n    apply(doc) {\n        if (this.structure && contentBetween(doc, this.from, this.to))\n            return StepResult.fail(\"Structure replace would overwrite content\");\n        return StepResult.fromReplace(doc, this.from, this.to, this.slice);\n    }\n    getMap() {\n        return new StepMap([this.from, this.to - this.from, this.slice.size]);\n    }\n    invert(doc) {\n        return new ReplaceStep(this.from, this.from + this.slice.size, doc.slice(this.from, this.to));\n    }\n    map(mapping) {\n        let from = mapping.mapResult(this.from, 1), to = mapping.mapResult(this.to, -1);\n        if (from.deletedAcross && to.deletedAcross)\n            return null;\n        return new ReplaceStep(from.pos, Math.max(from.pos, to.pos), this.slice);\n    }\n    merge(other) {\n        if (!(other instanceof ReplaceStep) || other.structure || this.structure)\n            return null;\n        if (this.from + this.slice.size == other.from && !this.slice.openEnd && !other.slice.openStart) {\n            let slice = this.slice.size + other.slice.size == 0 ? Slice.empty\n                : new Slice(this.slice.content.append(other.slice.content), this.slice.openStart, other.slice.openEnd);\n            return new ReplaceStep(this.from, this.to + (other.to - other.from), slice, this.structure);\n        }\n        else if (other.to == this.from && !this.slice.openStart && !other.slice.openEnd) {\n            let slice = this.slice.size + other.slice.size == 0 ? Slice.empty\n                : new Slice(other.slice.content.append(this.slice.content), other.slice.openStart, this.slice.openEnd);\n            return new ReplaceStep(other.from, this.to, slice, this.structure);\n        }\n        else {\n            return null;\n        }\n    }\n    toJSON() {\n        let json = { stepType: \"replace\", from: this.from, to: this.to };\n        if (this.slice.size)\n            json.slice = this.slice.toJSON();\n        if (this.structure)\n            json.structure = true;\n        return json;\n    }\n    /**\n    @internal\n    */\n    static fromJSON(schema, json) {\n        if (typeof json.from != \"number\" || typeof json.to != \"number\")\n            throw new RangeError(\"Invalid input for ReplaceStep.fromJSON\");\n        return new ReplaceStep(json.from, json.to, Slice.fromJSON(schema, json.slice), !!json.structure);\n    }\n}\nStep.jsonID(\"replace\", ReplaceStep);\n/**\nReplace a part of the document with a slice of content, but\npreserve a range of the replaced content by moving it into the\nslice.\n*/\nclass ReplaceAroundStep extends Step {\n    /**\n    Create a replace-around step with the given range and gap.\n    `insert` should be the point in the slice into which the content\n    of the gap should be moved. `structure` has the same meaning as\n    it has in the [`ReplaceStep`](https://prosemirror.net/docs/ref/#transform.ReplaceStep) class.\n    */\n    constructor(\n    /**\n    The start position of the replaced range.\n    */\n    from, \n    /**\n    The end position of the replaced range.\n    */\n    to, \n    /**\n    The start of preserved range.\n    */\n    gapFrom, \n    /**\n    The end of preserved range.\n    */\n    gapTo, \n    /**\n    The slice to insert.\n    */\n    slice, \n    /**\n    The position in the slice where the preserved range should be\n    inserted.\n    */\n    insert, \n    /**\n    @internal\n    */\n    structure = false) {\n        super();\n        this.from = from;\n        this.to = to;\n        this.gapFrom = gapFrom;\n        this.gapTo = gapTo;\n        this.slice = slice;\n        this.insert = insert;\n        this.structure = structure;\n    }\n    apply(doc) {\n        if (this.structure && (contentBetween(doc, this.from, this.gapFrom) ||\n            contentBetween(doc, this.gapTo, this.to)))\n            return StepResult.fail(\"Structure gap-replace would overwrite content\");\n        let gap = doc.slice(this.gapFrom, this.gapTo);\n        if (gap.openStart || gap.openEnd)\n            return StepResult.fail(\"Gap is not a flat range\");\n        let inserted = this.slice.insertAt(this.insert, gap.content);\n        if (!inserted)\n            return StepResult.fail(\"Content does not fit in gap\");\n        return StepResult.fromReplace(doc, this.from, this.to, inserted);\n    }\n    getMap() {\n        return new StepMap([this.from, this.gapFrom - this.from, this.insert,\n            this.gapTo, this.to - this.gapTo, this.slice.size - this.insert]);\n    }\n    invert(doc) {\n        let gap = this.gapTo - this.gapFrom;\n        return new ReplaceAroundStep(this.from, this.from + this.slice.size + gap, this.from + this.insert, this.from + this.insert + gap, doc.slice(this.from, this.to).removeBetween(this.gapFrom - this.from, this.gapTo - this.from), this.gapFrom - this.from, this.structure);\n    }\n    map(mapping) {\n        let from = mapping.mapResult(this.from, 1), to = mapping.mapResult(this.to, -1);\n        let gapFrom = mapping.map(this.gapFrom, -1), gapTo = mapping.map(this.gapTo, 1);\n        if ((from.deletedAcross && to.deletedAcross) || gapFrom < from.pos || gapTo > to.pos)\n            return null;\n        return new ReplaceAroundStep(from.pos, to.pos, gapFrom, gapTo, this.slice, this.insert, this.structure);\n    }\n    toJSON() {\n        let json = { stepType: \"replaceAround\", from: this.from, to: this.to,\n            gapFrom: this.gapFrom, gapTo: this.gapTo, insert: this.insert };\n        if (this.slice.size)\n            json.slice = this.slice.toJSON();\n        if (this.structure)\n            json.structure = true;\n        return json;\n    }\n    /**\n    @internal\n    */\n    static fromJSON(schema, json) {\n        if (typeof json.from != \"number\" || typeof json.to != \"number\" ||\n            typeof json.gapFrom != \"number\" || typeof json.gapTo != \"number\" || typeof json.insert != \"number\")\n            throw new RangeError(\"Invalid input for ReplaceAroundStep.fromJSON\");\n        return new ReplaceAroundStep(json.from, json.to, json.gapFrom, json.gapTo, Slice.fromJSON(schema, json.slice), json.insert, !!json.structure);\n    }\n}\nStep.jsonID(\"replaceAround\", ReplaceAroundStep);\nfunction contentBetween(doc, from, to) {\n    let $from = doc.resolve(from), dist = to - from, depth = $from.depth;\n    while (dist > 0 && depth > 0 && $from.indexAfter(depth) == $from.node(depth).childCount) {\n        depth--;\n        dist--;\n    }\n    if (dist > 0) {\n        let next = $from.node(depth).maybeChild($from.indexAfter(depth));\n        while (dist > 0) {\n            if (!next || next.isLeaf)\n                return true;\n            next = next.firstChild;\n            dist--;\n        }\n    }\n    return false;\n}\n\nfunction addMark(tr, from, to, mark) {\n    let removed = [], added = [];\n    let removing, adding;\n    tr.doc.nodesBetween(from, to, (node, pos, parent) => {\n        if (!node.isInline)\n            return;\n        let marks = node.marks;\n        if (!mark.isInSet(marks) && parent.type.allowsMarkType(mark.type)) {\n            let start = Math.max(pos, from), end = Math.min(pos + node.nodeSize, to);\n            let newSet = mark.addToSet(marks);\n            for (let i = 0; i < marks.length; i++) {\n                if (!marks[i].isInSet(newSet)) {\n                    if (removing && removing.to == start && removing.mark.eq(marks[i]))\n                        removing.to = end;\n                    else\n                        removed.push(removing = new RemoveMarkStep(start, end, marks[i]));\n                }\n            }\n            if (adding && adding.to == start)\n                adding.to = end;\n            else\n                added.push(adding = new AddMarkStep(start, end, mark));\n        }\n    });\n    removed.forEach(s => tr.step(s));\n    added.forEach(s => tr.step(s));\n}\nfunction removeMark(tr, from, to, mark) {\n    let matched = [], step = 0;\n    tr.doc.nodesBetween(from, to, (node, pos) => {\n        if (!node.isInline)\n            return;\n        step++;\n        let toRemove = null;\n        if (mark instanceof MarkType) {\n            let set = node.marks, found;\n            while (found = mark.isInSet(set)) {\n                (toRemove || (toRemove = [])).push(found);\n                set = found.removeFromSet(set);\n            }\n        }\n        else if (mark) {\n            if (mark.isInSet(node.marks))\n                toRemove = [mark];\n        }\n        else {\n            toRemove = node.marks;\n        }\n        if (toRemove && toRemove.length) {\n            let end = Math.min(pos + node.nodeSize, to);\n            for (let i = 0; i < toRemove.length; i++) {\n                let style = toRemove[i], found;\n                for (let j = 0; j < matched.length; j++) {\n                    let m = matched[j];\n                    if (m.step == step - 1 && style.eq(matched[j].style))\n                        found = m;\n                }\n                if (found) {\n                    found.to = end;\n                    found.step = step;\n                }\n                else {\n                    matched.push({ style, from: Math.max(pos, from), to: end, step });\n                }\n            }\n        }\n    });\n    matched.forEach(m => tr.step(new RemoveMarkStep(m.from, m.to, m.style)));\n}\nfunction clearIncompatible(tr, pos, parentType, match = parentType.contentMatch) {\n    let node = tr.doc.nodeAt(pos);\n    let delSteps = [], cur = pos + 1;\n    for (let i = 0; i < node.childCount; i++) {\n        let child = node.child(i), end = cur + child.nodeSize;\n        let allowed = match.matchType(child.type);\n        if (!allowed) {\n            delSteps.push(new ReplaceStep(cur, end, Slice.empty));\n        }\n        else {\n            match = allowed;\n            for (let j = 0; j < child.marks.length; j++)\n                if (!parentType.allowsMarkType(child.marks[j].type))\n                    tr.step(new RemoveMarkStep(cur, end, child.marks[j]));\n        }\n        cur = end;\n    }\n    if (!match.validEnd) {\n        let fill = match.fillBefore(Fragment.empty, true);\n        tr.replace(cur, cur, new Slice(fill, 0, 0));\n    }\n    for (let i = delSteps.length - 1; i >= 0; i--)\n        tr.step(delSteps[i]);\n}\n\nfunction canCut(node, start, end) {\n    return (start == 0 || node.canReplace(start, node.childCount)) &&\n        (end == node.childCount || node.canReplace(0, end));\n}\n/**\nTry to find a target depth to which the content in the given range\ncan be lifted. Will not go across\n[isolating](https://prosemirror.net/docs/ref/#model.NodeSpec.isolating) parent nodes.\n*/\nfunction liftTarget(range) {\n    let parent = range.parent;\n    let content = parent.content.cutByIndex(range.startIndex, range.endIndex);\n    for (let depth = range.depth;; --depth) {\n        let node = range.$from.node(depth);\n        let index = range.$from.index(depth), endIndex = range.$to.indexAfter(depth);\n        if (depth < range.depth && node.canReplace(index, endIndex, content))\n            return depth;\n        if (depth == 0 || node.type.spec.isolating || !canCut(node, index, endIndex))\n            break;\n    }\n    return null;\n}\nfunction lift(tr, range, target) {\n    let { $from, $to, depth } = range;\n    let gapStart = $from.before(depth + 1), gapEnd = $to.after(depth + 1);\n    let start = gapStart, end = gapEnd;\n    let before = Fragment.empty, openStart = 0;\n    for (let d = depth, splitting = false; d > target; d--)\n        if (splitting || $from.index(d) > 0) {\n            splitting = true;\n            before = Fragment.from($from.node(d).copy(before));\n            openStart++;\n        }\n        else {\n            start--;\n        }\n    let after = Fragment.empty, openEnd = 0;\n    for (let d = depth, splitting = false; d > target; d--)\n        if (splitting || $to.after(d + 1) < $to.end(d)) {\n            splitting = true;\n            after = Fragment.from($to.node(d).copy(after));\n            openEnd++;\n        }\n        else {\n            end++;\n        }\n    tr.step(new ReplaceAroundStep(start, end, gapStart, gapEnd, new Slice(before.append(after), openStart, openEnd), before.size - openStart, true));\n}\n/**\nTry to find a valid way to wrap the content in the given range in a\nnode of the given type. May introduce extra nodes around and inside\nthe wrapper node, if necessary. Returns null if no valid wrapping\ncould be found. When `innerRange` is given, that range's content is\nused as the content to fit into the wrapping, instead of the\ncontent of `range`.\n*/\nfunction findWrapping(range, nodeType, attrs = null, innerRange = range) {\n    let around = findWrappingOutside(range, nodeType);\n    let inner = around && findWrappingInside(innerRange, nodeType);\n    if (!inner)\n        return null;\n    return around.map(withAttrs)\n        .concat({ type: nodeType, attrs }).concat(inner.map(withAttrs));\n}\nfunction withAttrs(type) { return { type, attrs: null }; }\nfunction findWrappingOutside(range, type) {\n    let { parent, startIndex, endIndex } = range;\n    let around = parent.contentMatchAt(startIndex).findWrapping(type);\n    if (!around)\n        return null;\n    let outer = around.length ? around[0] : type;\n    return parent.canReplaceWith(startIndex, endIndex, outer) ? around : null;\n}\nfunction findWrappingInside(range, type) {\n    let { parent, startIndex, endIndex } = range;\n    let inner = parent.child(startIndex);\n    let inside = type.contentMatch.findWrapping(inner.type);\n    if (!inside)\n        return null;\n    let lastType = inside.length ? inside[inside.length - 1] : type;\n    let innerMatch = lastType.contentMatch;\n    for (let i = startIndex; innerMatch && i < endIndex; i++)\n        innerMatch = innerMatch.matchType(parent.child(i).type);\n    if (!innerMatch || !innerMatch.validEnd)\n        return null;\n    return inside;\n}\nfunction wrap(tr, range, wrappers) {\n    let content = Fragment.empty;\n    for (let i = wrappers.length - 1; i >= 0; i--) {\n        if (content.size) {\n            let match = wrappers[i].type.contentMatch.matchFragment(content);\n            if (!match || !match.validEnd)\n                throw new RangeError(\"Wrapper type given to Transform.wrap does not form valid content of its parent wrapper\");\n        }\n        content = Fragment.from(wrappers[i].type.create(wrappers[i].attrs, content));\n    }\n    let start = range.start, end = range.end;\n    tr.step(new ReplaceAroundStep(start, end, start, end, new Slice(content, 0, 0), wrappers.length, true));\n}\nfunction setBlockType(tr, from, to, type, attrs) {\n    if (!type.isTextblock)\n        throw new RangeError(\"Type given to setBlockType should be a textblock\");\n    let mapFrom = tr.steps.length;\n    tr.doc.nodesBetween(from, to, (node, pos) => {\n        if (node.isTextblock && !node.hasMarkup(type, attrs) && canChangeType(tr.doc, tr.mapping.slice(mapFrom).map(pos), type)) {\n            // Ensure all markup that isn't allowed in the new node type is cleared\n            tr.clearIncompatible(tr.mapping.slice(mapFrom).map(pos, 1), type);\n            let mapping = tr.mapping.slice(mapFrom);\n            let startM = mapping.map(pos, 1), endM = mapping.map(pos + node.nodeSize, 1);\n            tr.step(new ReplaceAroundStep(startM, endM, startM + 1, endM - 1, new Slice(Fragment.from(type.create(attrs, null, node.marks)), 0, 0), 1, true));\n            return false;\n        }\n    });\n}\nfunction canChangeType(doc, pos, type) {\n    let $pos = doc.resolve(pos), index = $pos.index();\n    return $pos.parent.canReplaceWith(index, index + 1, type);\n}\n/**\nChange the type, attributes, and/or marks of the node at `pos`.\nWhen `type` isn't given, the existing node type is preserved,\n*/\nfunction setNodeMarkup(tr, pos, type, attrs, marks) {\n    let node = tr.doc.nodeAt(pos);\n    if (!node)\n        throw new RangeError(\"No node at given position\");\n    if (!type)\n        type = node.type;\n    let newNode = type.create(attrs, null, marks || node.marks);\n    if (node.isLeaf)\n        return tr.replaceWith(pos, pos + node.nodeSize, newNode);\n    if (!type.validContent(node.content))\n        throw new RangeError(\"Invalid content for node type \" + type.name);\n    tr.step(new ReplaceAroundStep(pos, pos + node.nodeSize, pos + 1, pos + node.nodeSize - 1, new Slice(Fragment.from(newNode), 0, 0), 1, true));\n}\n/**\nCheck whether splitting at the given position is allowed.\n*/\nfunction canSplit(doc, pos, depth = 1, typesAfter) {\n    let $pos = doc.resolve(pos), base = $pos.depth - depth;\n    let innerType = (typesAfter && typesAfter[typesAfter.length - 1]) || $pos.parent;\n    if (base < 0 || $pos.parent.type.spec.isolating ||\n        !$pos.parent.canReplace($pos.index(), $pos.parent.childCount) ||\n        !innerType.type.validContent($pos.parent.content.cutByIndex($pos.index(), $pos.parent.childCount)))\n        return false;\n    for (let d = $pos.depth - 1, i = depth - 2; d > base; d--, i--) {\n        let node = $pos.node(d), index = $pos.index(d);\n        if (node.type.spec.isolating)\n            return false;\n        let rest = node.content.cutByIndex(index, node.childCount);\n        let after = (typesAfter && typesAfter[i]) || node;\n        if (after != node)\n            rest = rest.replaceChild(0, after.type.create(after.attrs));\n        if (!node.canReplace(index + 1, node.childCount) || !after.type.validContent(rest))\n            return false;\n    }\n    let index = $pos.indexAfter(base);\n    let baseType = typesAfter && typesAfter[0];\n    return $pos.node(base).canReplaceWith(index, index, baseType ? baseType.type : $pos.node(base + 1).type);\n}\nfunction split(tr, pos, depth = 1, typesAfter) {\n    let $pos = tr.doc.resolve(pos), before = Fragment.empty, after = Fragment.empty;\n    for (let d = $pos.depth, e = $pos.depth - depth, i = depth - 1; d > e; d--, i--) {\n        before = Fragment.from($pos.node(d).copy(before));\n        let typeAfter = typesAfter && typesAfter[i];\n        after = Fragment.from(typeAfter ? typeAfter.type.create(typeAfter.attrs, after) : $pos.node(d).copy(after));\n    }\n    tr.step(new ReplaceStep(pos, pos, new Slice(before.append(after), depth, depth), true));\n}\n/**\nTest whether the blocks before and after a given position can be\njoined.\n*/\nfunction canJoin(doc, pos) {\n    let $pos = doc.resolve(pos), index = $pos.index();\n    return joinable($pos.nodeBefore, $pos.nodeAfter) &&\n        $pos.parent.canReplace(index, index + 1);\n}\nfunction joinable(a, b) {\n    return !!(a && b && !a.isLeaf && a.canAppend(b));\n}\n/**\nFind an ancestor of the given position that can be joined to the\nblock before (or after if `dir` is positive). Returns the joinable\npoint, if any.\n*/\nfunction joinPoint(doc, pos, dir = -1) {\n    let $pos = doc.resolve(pos);\n    for (let d = $pos.depth;; d--) {\n        let before, after, index = $pos.index(d);\n        if (d == $pos.depth) {\n            before = $pos.nodeBefore;\n            after = $pos.nodeAfter;\n        }\n        else if (dir > 0) {\n            before = $pos.node(d + 1);\n            index++;\n            after = $pos.node(d).maybeChild(index);\n        }\n        else {\n            before = $pos.node(d).maybeChild(index - 1);\n            after = $pos.node(d + 1);\n        }\n        if (before && !before.isTextblock && joinable(before, after) &&\n            $pos.node(d).canReplace(index, index + 1))\n            return pos;\n        if (d == 0)\n            break;\n        pos = dir < 0 ? $pos.before(d) : $pos.after(d);\n    }\n}\nfunction join(tr, pos, depth) {\n    let step = new ReplaceStep(pos - depth, pos + depth, Slice.empty, true);\n    tr.step(step);\n}\n/**\nTry to find a point where a node of the given type can be inserted\nnear `pos`, by searching up the node hierarchy when `pos` itself\nisn't a valid place but is at the start or end of a node. Return\nnull if no position was found.\n*/\nfunction insertPoint(doc, pos, nodeType) {\n    let $pos = doc.resolve(pos);\n    if ($pos.parent.canReplaceWith($pos.index(), $pos.index(), nodeType))\n        return pos;\n    if ($pos.parentOffset == 0)\n        for (let d = $pos.depth - 1; d >= 0; d--) {\n            let index = $pos.index(d);\n            if ($pos.node(d).canReplaceWith(index, index, nodeType))\n                return $pos.before(d + 1);\n            if (index > 0)\n                return null;\n        }\n    if ($pos.parentOffset == $pos.parent.content.size)\n        for (let d = $pos.depth - 1; d >= 0; d--) {\n            let index = $pos.indexAfter(d);\n            if ($pos.node(d).canReplaceWith(index, index, nodeType))\n                return $pos.after(d + 1);\n            if (index < $pos.node(d).childCount)\n                return null;\n        }\n    return null;\n}\n/**\nFinds a position at or around the given position where the given\nslice can be inserted. Will look at parent nodes' nearest boundary\nand try there, even if the original position wasn't directly at the\nstart or end of that node. Returns null when no position was found.\n*/\nfunction dropPoint(doc, pos, slice) {\n    let $pos = doc.resolve(pos);\n    if (!slice.content.size)\n        return pos;\n    let content = slice.content;\n    for (let i = 0; i < slice.openStart; i++)\n        content = content.firstChild.content;\n    for (let pass = 1; pass <= (slice.openStart == 0 && slice.size ? 2 : 1); pass++) {\n        for (let d = $pos.depth; d >= 0; d--) {\n            let bias = d == $pos.depth ? 0 : $pos.pos <= ($pos.start(d + 1) + $pos.end(d + 1)) / 2 ? -1 : 1;\n            let insertPos = $pos.index(d) + (bias > 0 ? 1 : 0);\n            let parent = $pos.node(d), fits = false;\n            if (pass == 1) {\n                fits = parent.canReplace(insertPos, insertPos, content);\n            }\n            else {\n                let wrapping = parent.contentMatchAt(insertPos).findWrapping(content.firstChild.type);\n                fits = wrapping && parent.canReplaceWith(insertPos, insertPos, wrapping[0]);\n            }\n            if (fits)\n                return bias == 0 ? $pos.pos : bias < 0 ? $pos.before(d + 1) : $pos.after(d + 1);\n        }\n    }\n    return null;\n}\n\n/**\nFit a slice into a given position in the document, producing a\n[step](https://prosemirror.net/docs/ref/#transform.Step) that inserts it. Will return null if\nthere's no meaningful way to insert the slice here, or inserting it\nwould be a no-op (an empty slice over an empty range).\n*/\nfunction replaceStep(doc, from, to = from, slice = Slice.empty) {\n    if (from == to && !slice.size)\n        return null;\n    let $from = doc.resolve(from), $to = doc.resolve(to);\n    // Optimization -- avoid work if it's obvious that it's not needed.\n    if (fitsTrivially($from, $to, slice))\n        return new ReplaceStep(from, to, slice);\n    return new Fitter($from, $to, slice).fit();\n}\nfunction fitsTrivially($from, $to, slice) {\n    return !slice.openStart && !slice.openEnd && $from.start() == $to.start() &&\n        $from.parent.canReplace($from.index(), $to.index(), slice.content);\n}\n// Algorithm for 'placing' the elements of a slice into a gap:\n//\n// We consider the content of each node that is open to the left to be\n// independently placeable. I.e. in <p(\"foo\"), p(\"bar\")>, when the\n// paragraph on the left is open, \"foo\" can be placed (somewhere on\n// the left side of the replacement gap) independently from p(\"bar\").\n//\n// This class tracks the state of the placement progress in the\n// following properties:\n//\n//  - `frontier` holds a stack of `{type, match}` objects that\n//    represent the open side of the replacement. It starts at\n//    `$from`, then moves forward as content is placed, and is finally\n//    reconciled with `$to`.\n//\n//  - `unplaced` is a slice that represents the content that hasn't\n//    been placed yet.\n//\n//  - `placed` is a fragment of placed content. Its open-start value\n//    is implicit in `$from`, and its open-end value in `frontier`.\nclass Fitter {\n    constructor($from, $to, unplaced) {\n        this.$from = $from;\n        this.$to = $to;\n        this.unplaced = unplaced;\n        this.frontier = [];\n        this.placed = Fragment.empty;\n        for (let i = 0; i <= $from.depth; i++) {\n            let node = $from.node(i);\n            this.frontier.push({\n                type: node.type,\n                match: node.contentMatchAt($from.indexAfter(i))\n            });\n        }\n        for (let i = $from.depth; i > 0; i--)\n            this.placed = Fragment.from($from.node(i).copy(this.placed));\n    }\n    get depth() { return this.frontier.length - 1; }\n    fit() {\n        // As long as there's unplaced content, try to place some of it.\n        // If that fails, either increase the open score of the unplaced\n        // slice, or drop nodes from it, and then try again.\n        while (this.unplaced.size) {\n            let fit = this.findFittable();\n            if (fit)\n                this.placeNodes(fit);\n            else\n                this.openMore() || this.dropNode();\n        }\n        // When there's inline content directly after the frontier _and_\n        // directly after `this.$to`, we must generate a `ReplaceAround`\n        // step that pulls that content into the node after the frontier.\n        // That means the fitting must be done to the end of the textblock\n        // node after `this.$to`, not `this.$to` itself.\n        let moveInline = this.mustMoveInline(), placedSize = this.placed.size - this.depth - this.$from.depth;\n        let $from = this.$from, $to = this.close(moveInline < 0 ? this.$to : $from.doc.resolve(moveInline));\n        if (!$to)\n            return null;\n        // If closing to `$to` succeeded, create a step\n        let content = this.placed, openStart = $from.depth, openEnd = $to.depth;\n        while (openStart && openEnd && content.childCount == 1) { // Normalize by dropping open parent nodes\n            content = content.firstChild.content;\n            openStart--;\n            openEnd--;\n        }\n        let slice = new Slice(content, openStart, openEnd);\n        if (moveInline > -1)\n            return new ReplaceAroundStep($from.pos, moveInline, this.$to.pos, this.$to.end(), slice, placedSize);\n        if (slice.size || $from.pos != this.$to.pos) // Don't generate no-op steps\n            return new ReplaceStep($from.pos, $to.pos, slice);\n        return null;\n    }\n    // Find a position on the start spine of `this.unplaced` that has\n    // content that can be moved somewhere on the frontier. Returns two\n    // depths, one for the slice and one for the frontier.\n    findFittable() {\n        // Only try wrapping nodes (pass 2) after finding a place without\n        // wrapping failed.\n        for (let pass = 1; pass <= 2; pass++) {\n            for (let sliceDepth = this.unplaced.openStart; sliceDepth >= 0; sliceDepth--) {\n                let fragment, parent = null;\n                if (sliceDepth) {\n                    parent = contentAt(this.unplaced.content, sliceDepth - 1).firstChild;\n                    fragment = parent.content;\n                }\n                else {\n                    fragment = this.unplaced.content;\n                }\n                let first = fragment.firstChild;\n                for (let frontierDepth = this.depth; frontierDepth >= 0; frontierDepth--) {\n                    let { type, match } = this.frontier[frontierDepth], wrap, inject = null;\n                    // In pass 1, if the next node matches, or there is no next\n                    // node but the parents look compatible, we've found a\n                    // place.\n                    if (pass == 1 && (first ? match.matchType(first.type) || (inject = match.fillBefore(Fragment.from(first), false))\n                        : parent && type.compatibleContent(parent.type)))\n                        return { sliceDepth, frontierDepth, parent, inject };\n                    // In pass 2, look for a set of wrapping nodes that make\n                    // `first` fit here.\n                    else if (pass == 2 && first && (wrap = match.findWrapping(first.type)))\n                        return { sliceDepth, frontierDepth, parent, wrap };\n                    // Don't continue looking further up if the parent node\n                    // would fit here.\n                    if (parent && match.matchType(parent.type))\n                        break;\n                }\n            }\n        }\n    }\n    openMore() {\n        let { content, openStart, openEnd } = this.unplaced;\n        let inner = contentAt(content, openStart);\n        if (!inner.childCount || inner.firstChild.isLeaf)\n            return false;\n        this.unplaced = new Slice(content, openStart + 1, Math.max(openEnd, inner.size + openStart >= content.size - openEnd ? openStart + 1 : 0));\n        return true;\n    }\n    dropNode() {\n        let { content, openStart, openEnd } = this.unplaced;\n        let inner = contentAt(content, openStart);\n        if (inner.childCount <= 1 && openStart > 0) {\n            let openAtEnd = content.size - openStart <= openStart + inner.size;\n            this.unplaced = new Slice(dropFromFragment(content, openStart - 1, 1), openStart - 1, openAtEnd ? openStart - 1 : openEnd);\n        }\n        else {\n            this.unplaced = new Slice(dropFromFragment(content, openStart, 1), openStart, openEnd);\n        }\n    }\n    // Move content from the unplaced slice at `sliceDepth` to the\n    // frontier node at `frontierDepth`. Close that frontier node when\n    // applicable.\n    placeNodes({ sliceDepth, frontierDepth, parent, inject, wrap }) {\n        while (this.depth > frontierDepth)\n            this.closeFrontierNode();\n        if (wrap)\n            for (let i = 0; i < wrap.length; i++)\n                this.openFrontierNode(wrap[i]);\n        let slice = this.unplaced, fragment = parent ? parent.content : slice.content;\n        let openStart = slice.openStart - sliceDepth;\n        let taken = 0, add = [];\n        let { match, type } = this.frontier[frontierDepth];\n        if (inject) {\n            for (let i = 0; i < inject.childCount; i++)\n                add.push(inject.child(i));\n            match = match.matchFragment(inject);\n        }\n        // Computes the amount of (end) open nodes at the end of the\n        // fragment. When 0, the parent is open, but no more. When\n        // negative, nothing is open.\n        let openEndCount = (fragment.size + sliceDepth) - (slice.content.size - slice.openEnd);\n        // Scan over the fragment, fitting as many child nodes as\n        // possible.\n        while (taken < fragment.childCount) {\n            let next = fragment.child(taken), matches = match.matchType(next.type);\n            if (!matches)\n                break;\n            taken++;\n            if (taken > 1 || openStart == 0 || next.content.size) { // Drop empty open nodes\n                match = matches;\n                add.push(closeNodeStart(next.mark(type.allowedMarks(next.marks)), taken == 1 ? openStart : 0, taken == fragment.childCount ? openEndCount : -1));\n            }\n        }\n        let toEnd = taken == fragment.childCount;\n        if (!toEnd)\n            openEndCount = -1;\n        this.placed = addToFragment(this.placed, frontierDepth, Fragment.from(add));\n        this.frontier[frontierDepth].match = match;\n        // If the parent types match, and the entire node was moved, and\n        // it's not open, close this frontier node right away.\n        if (toEnd && openEndCount < 0 && parent && parent.type == this.frontier[this.depth].type && this.frontier.length > 1)\n            this.closeFrontierNode();\n        // Add new frontier nodes for any open nodes at the end.\n        for (let i = 0, cur = fragment; i < openEndCount; i++) {\n            let node = cur.lastChild;\n            this.frontier.push({ type: node.type, match: node.contentMatchAt(node.childCount) });\n            cur = node.content;\n        }\n        // Update `this.unplaced`. Drop the entire node from which we\n        // placed it we got to its end, otherwise just drop the placed\n        // nodes.\n        this.unplaced = !toEnd ? new Slice(dropFromFragment(slice.content, sliceDepth, taken), slice.openStart, slice.openEnd)\n            : sliceDepth == 0 ? Slice.empty\n                : new Slice(dropFromFragment(slice.content, sliceDepth - 1, 1), sliceDepth - 1, openEndCount < 0 ? slice.openEnd : sliceDepth - 1);\n    }\n    mustMoveInline() {\n        if (!this.$to.parent.isTextblock)\n            return -1;\n        let top = this.frontier[this.depth], level;\n        if (!top.type.isTextblock || !contentAfterFits(this.$to, this.$to.depth, top.type, top.match, false) ||\n            (this.$to.depth == this.depth && (level = this.findCloseLevel(this.$to)) && level.depth == this.depth))\n            return -1;\n        let { depth } = this.$to, after = this.$to.after(depth);\n        while (depth > 1 && after == this.$to.end(--depth))\n            ++after;\n        return after;\n    }\n    findCloseLevel($to) {\n        scan: for (let i = Math.min(this.depth, $to.depth); i >= 0; i--) {\n            let { match, type } = this.frontier[i];\n            let dropInner = i < $to.depth && $to.end(i + 1) == $to.pos + ($to.depth - (i + 1));\n            let fit = contentAfterFits($to, i, type, match, dropInner);\n            if (!fit)\n                continue;\n            for (let d = i - 1; d >= 0; d--) {\n                let { match, type } = this.frontier[d];\n                let matches = contentAfterFits($to, d, type, match, true);\n                if (!matches || matches.childCount)\n                    continue scan;\n            }\n            return { depth: i, fit, move: dropInner ? $to.doc.resolve($to.after(i + 1)) : $to };\n        }\n    }\n    close($to) {\n        let close = this.findCloseLevel($to);\n        if (!close)\n            return null;\n        while (this.depth > close.depth)\n            this.closeFrontierNode();\n        if (close.fit.childCount)\n            this.placed = addToFragment(this.placed, close.depth, close.fit);\n        $to = close.move;\n        for (let d = close.depth + 1; d <= $to.depth; d++) {\n            let node = $to.node(d), add = node.type.contentMatch.fillBefore(node.content, true, $to.index(d));\n            this.openFrontierNode(node.type, node.attrs, add);\n        }\n        return $to;\n    }\n    openFrontierNode(type, attrs = null, content) {\n        let top = this.frontier[this.depth];\n        top.match = top.match.matchType(type);\n        this.placed = addToFragment(this.placed, this.depth, Fragment.from(type.create(attrs, content)));\n        this.frontier.push({ type, match: type.contentMatch });\n    }\n    closeFrontierNode() {\n        let open = this.frontier.pop();\n        let add = open.match.fillBefore(Fragment.empty, true);\n        if (add.childCount)\n            this.placed = addToFragment(this.placed, this.frontier.length, add);\n    }\n}\nfunction dropFromFragment(fragment, depth, count) {\n    if (depth == 0)\n        return fragment.cutByIndex(count, fragment.childCount);\n    return fragment.replaceChild(0, fragment.firstChild.copy(dropFromFragment(fragment.firstChild.content, depth - 1, count)));\n}\nfunction addToFragment(fragment, depth, content) {\n    if (depth == 0)\n        return fragment.append(content);\n    return fragment.replaceChild(fragment.childCount - 1, fragment.lastChild.copy(addToFragment(fragment.lastChild.content, depth - 1, content)));\n}\nfunction contentAt(fragment, depth) {\n    for (let i = 0; i < depth; i++)\n        fragment = fragment.firstChild.content;\n    return fragment;\n}\nfunction closeNodeStart(node, openStart, openEnd) {\n    if (openStart <= 0)\n        return node;\n    let frag = node.content;\n    if (openStart > 1)\n        frag = frag.replaceChild(0, closeNodeStart(frag.firstChild, openStart - 1, frag.childCount == 1 ? openEnd - 1 : 0));\n    if (openStart > 0) {\n        frag = node.type.contentMatch.fillBefore(frag).append(frag);\n        if (openEnd <= 0)\n            frag = frag.append(node.type.contentMatch.matchFragment(frag).fillBefore(Fragment.empty, true));\n    }\n    return node.copy(frag);\n}\nfunction contentAfterFits($to, depth, type, match, open) {\n    let node = $to.node(depth), index = open ? $to.indexAfter(depth) : $to.index(depth);\n    if (index == node.childCount && !type.compatibleContent(node.type))\n        return null;\n    let fit = match.fillBefore(node.content, true, index);\n    return fit && !invalidMarks(type, node.content, index) ? fit : null;\n}\nfunction invalidMarks(type, fragment, start) {\n    for (let i = start; i < fragment.childCount; i++)\n        if (!type.allowsMarks(fragment.child(i).marks))\n            return true;\n    return false;\n}\nfunction definesContent(type) {\n    return type.spec.defining || type.spec.definingForContent;\n}\nfunction replaceRange(tr, from, to, slice) {\n    if (!slice.size)\n        return tr.deleteRange(from, to);\n    let $from = tr.doc.resolve(from), $to = tr.doc.resolve(to);\n    if (fitsTrivially($from, $to, slice))\n        return tr.step(new ReplaceStep(from, to, slice));\n    let targetDepths = coveredDepths($from, tr.doc.resolve(to));\n    // Can't replace the whole document, so remove 0 if it's present\n    if (targetDepths[targetDepths.length - 1] == 0)\n        targetDepths.pop();\n    // Negative numbers represent not expansion over the whole node at\n    // that depth, but replacing from $from.before(-D) to $to.pos.\n    let preferredTarget = -($from.depth + 1);\n    targetDepths.unshift(preferredTarget);\n    // This loop picks a preferred target depth, if one of the covering\n    // depths is not outside of a defining node, and adds negative\n    // depths for any depth that has $from at its start and does not\n    // cross a defining node.\n    for (let d = $from.depth, pos = $from.pos - 1; d > 0; d--, pos--) {\n        let spec = $from.node(d).type.spec;\n        if (spec.defining || spec.definingAsContext || spec.isolating)\n            break;\n        if (targetDepths.indexOf(d) > -1)\n            preferredTarget = d;\n        else if ($from.before(d) == pos)\n            targetDepths.splice(1, 0, -d);\n    }\n    // Try to fit each possible depth of the slice into each possible\n    // target depth, starting with the preferred depths.\n    let preferredTargetIndex = targetDepths.indexOf(preferredTarget);\n    let leftNodes = [], preferredDepth = slice.openStart;\n    for (let content = slice.content, i = 0;; i++) {\n        let node = content.firstChild;\n        leftNodes.push(node);\n        if (i == slice.openStart)\n            break;\n        content = node.content;\n    }\n    // Back up preferredDepth to cover defining textblocks directly\n    // above it, possibly skipping a non-defining textblock.\n    for (let d = preferredDepth - 1; d >= 0; d--) {\n        let type = leftNodes[d].type, def = definesContent(type);\n        if (def && $from.node(preferredTargetIndex).type != type)\n            preferredDepth = d;\n        else if (def || !type.isTextblock)\n            break;\n    }\n    for (let j = slice.openStart; j >= 0; j--) {\n        let openDepth = (j + preferredDepth + 1) % (slice.openStart + 1);\n        let insert = leftNodes[openDepth];\n        if (!insert)\n            continue;\n        for (let i = 0; i < targetDepths.length; i++) {\n            // Loop over possible expansion levels, starting with the\n            // preferred one\n            let targetDepth = targetDepths[(i + preferredTargetIndex) % targetDepths.length], expand = true;\n            if (targetDepth < 0) {\n                expand = false;\n                targetDepth = -targetDepth;\n            }\n            let parent = $from.node(targetDepth - 1), index = $from.index(targetDepth - 1);\n            if (parent.canReplaceWith(index, index, insert.type, insert.marks))\n                return tr.replace($from.before(targetDepth), expand ? $to.after(targetDepth) : to, new Slice(closeFragment(slice.content, 0, slice.openStart, openDepth), openDepth, slice.openEnd));\n        }\n    }\n    let startSteps = tr.steps.length;\n    for (let i = targetDepths.length - 1; i >= 0; i--) {\n        tr.replace(from, to, slice);\n        if (tr.steps.length > startSteps)\n            break;\n        let depth = targetDepths[i];\n        if (depth < 0)\n            continue;\n        from = $from.before(depth);\n        to = $to.after(depth);\n    }\n}\nfunction closeFragment(fragment, depth, oldOpen, newOpen, parent) {\n    if (depth < oldOpen) {\n        let first = fragment.firstChild;\n        fragment = fragment.replaceChild(0, first.copy(closeFragment(first.content, depth + 1, oldOpen, newOpen, first)));\n    }\n    if (depth > newOpen) {\n        let match = parent.contentMatchAt(0);\n        let start = match.fillBefore(fragment).append(fragment);\n        fragment = start.append(match.matchFragment(start).fillBefore(Fragment.empty, true));\n    }\n    return fragment;\n}\nfunction replaceRangeWith(tr, from, to, node) {\n    if (!node.isInline && from == to && tr.doc.resolve(from).parent.content.size) {\n        let point = insertPoint(tr.doc, from, node.type);\n        if (point != null)\n            from = to = point;\n    }\n    tr.replaceRange(from, to, new Slice(Fragment.from(node), 0, 0));\n}\nfunction deleteRange(tr, from, to) {\n    let $from = tr.doc.resolve(from), $to = tr.doc.resolve(to);\n    let covered = coveredDepths($from, $to);\n    for (let i = 0; i < covered.length; i++) {\n        let depth = covered[i], last = i == covered.length - 1;\n        if ((last && depth == 0) || $from.node(depth).type.contentMatch.validEnd)\n            return tr.delete($from.start(depth), $to.end(depth));\n        if (depth > 0 && (last || $from.node(depth - 1).canReplace($from.index(depth - 1), $to.indexAfter(depth - 1))))\n            return tr.delete($from.before(depth), $to.after(depth));\n    }\n    for (let d = 1; d <= $from.depth && d <= $to.depth; d++) {\n        if (from - $from.start(d) == $from.depth - d && to > $from.end(d) && $to.end(d) - to != $to.depth - d)\n            return tr.delete($from.before(d), to);\n    }\n    tr.delete(from, to);\n}\n// Returns an array of all depths for which $from - $to spans the\n// whole content of the nodes at that depth.\nfunction coveredDepths($from, $to) {\n    let result = [], minDepth = Math.min($from.depth, $to.depth);\n    for (let d = minDepth; d >= 0; d--) {\n        let start = $from.start(d);\n        if (start < $from.pos - ($from.depth - d) ||\n            $to.end(d) > $to.pos + ($to.depth - d) ||\n            $from.node(d).type.spec.isolating ||\n            $to.node(d).type.spec.isolating)\n            break;\n        if (start == $to.start(d) ||\n            (d == $from.depth && d == $to.depth && $from.parent.inlineContent && $to.parent.inlineContent &&\n                d && $to.start(d - 1) == start - 1))\n            result.push(d);\n    }\n    return result;\n}\n\n/**\n@internal\n*/\nlet TransformError = class extends Error {\n};\nTransformError = function TransformError(message) {\n    let err = Error.call(this, message);\n    err.__proto__ = TransformError.prototype;\n    return err;\n};\nTransformError.prototype = Object.create(Error.prototype);\nTransformError.prototype.constructor = TransformError;\nTransformError.prototype.name = \"TransformError\";\n/**\nAbstraction to build up and track an array of\n[steps](https://prosemirror.net/docs/ref/#transform.Step) representing a document transformation.\n\nMost transforming methods return the `Transform` object itself, so\nthat they can be chained.\n*/\nclass Transform {\n    /**\n    Create a transform that starts with the given document.\n    */\n    constructor(\n    /**\n    The current document (the result of applying the steps in the\n    transform).\n    */\n    doc) {\n        this.doc = doc;\n        /**\n        The steps in this transform.\n        */\n        this.steps = [];\n        /**\n        The documents before each of the steps.\n        */\n        this.docs = [];\n        /**\n        A mapping with the maps for each of the steps in this transform.\n        */\n        this.mapping = new Mapping;\n    }\n    /**\n    The starting document.\n    */\n    get before() { return this.docs.length ? this.docs[0] : this.doc; }\n    /**\n    Apply a new step in this transform, saving the result. Throws an\n    error when the step fails.\n    */\n    step(step) {\n        let result = this.maybeStep(step);\n        if (result.failed)\n            throw new TransformError(result.failed);\n        return this;\n    }\n    /**\n    Try to apply a step in this transformation, ignoring it if it\n    fails. Returns the step result.\n    */\n    maybeStep(step) {\n        let result = step.apply(this.doc);\n        if (!result.failed)\n            this.addStep(step, result.doc);\n        return result;\n    }\n    /**\n    True when the document has been changed (when there are any\n    steps).\n    */\n    get docChanged() {\n        return this.steps.length > 0;\n    }\n    /**\n    @internal\n    */\n    addStep(step, doc) {\n        this.docs.push(this.doc);\n        this.steps.push(step);\n        this.mapping.appendMap(step.getMap());\n        this.doc = doc;\n    }\n    /**\n    Replace the part of the document between `from` and `to` with the\n    given `slice`.\n    */\n    replace(from, to = from, slice = Slice.empty) {\n        let step = replaceStep(this.doc, from, to, slice);\n        if (step)\n            this.step(step);\n        return this;\n    }\n    /**\n    Replace the given range with the given content, which may be a\n    fragment, node, or array of nodes.\n    */\n    replaceWith(from, to, content) {\n        return this.replace(from, to, new Slice(Fragment.from(content), 0, 0));\n    }\n    /**\n    Delete the content between the given positions.\n    */\n    delete(from, to) {\n        return this.replace(from, to, Slice.empty);\n    }\n    /**\n    Insert the given content at the given position.\n    */\n    insert(pos, content) {\n        return this.replaceWith(pos, pos, content);\n    }\n    /**\n    Replace a range of the document with a given slice, using\n    `from`, `to`, and the slice's\n    [`openStart`](https://prosemirror.net/docs/ref/#model.Slice.openStart) property as hints, rather\n    than fixed start and end points. This method may grow the\n    replaced area or close open nodes in the slice in order to get a\n    fit that is more in line with WYSIWYG expectations, by dropping\n    fully covered parent nodes of the replaced region when they are\n    marked [non-defining as\n    context](https://prosemirror.net/docs/ref/#model.NodeSpec.definingAsContext), or including an\n    open parent node from the slice that _is_ marked as [defining\n    its content](https://prosemirror.net/docs/ref/#model.NodeSpec.definingForContent).\n    \n    This is the method, for example, to handle paste. The similar\n    [`replace`](https://prosemirror.net/docs/ref/#transform.Transform.replace) method is a more\n    primitive tool which will _not_ move the start and end of its given\n    range, and is useful in situations where you need more precise\n    control over what happens.\n    */\n    replaceRange(from, to, slice) {\n        replaceRange(this, from, to, slice);\n        return this;\n    }\n    /**\n    Replace the given range with a node, but use `from` and `to` as\n    hints, rather than precise positions. When from and to are the same\n    and are at the start or end of a parent node in which the given\n    node doesn't fit, this method may _move_ them out towards a parent\n    that does allow the given node to be placed. When the given range\n    completely covers a parent node, this method may completely replace\n    that parent node.\n    */\n    replaceRangeWith(from, to, node) {\n        replaceRangeWith(this, from, to, node);\n        return this;\n    }\n    /**\n    Delete the given range, expanding it to cover fully covered\n    parent nodes until a valid replace is found.\n    */\n    deleteRange(from, to) {\n        deleteRange(this, from, to);\n        return this;\n    }\n    /**\n    Split the content in the given range off from its parent, if there\n    is sibling content before or after it, and move it up the tree to\n    the depth specified by `target`. You'll probably want to use\n    [`liftTarget`](https://prosemirror.net/docs/ref/#transform.liftTarget) to compute `target`, to make\n    sure the lift is valid.\n    */\n    lift(range, target) {\n        lift(this, range, target);\n        return this;\n    }\n    /**\n    Join the blocks around the given position. If depth is 2, their\n    last and first siblings are also joined, and so on.\n    */\n    join(pos, depth = 1) {\n        join(this, pos, depth);\n        return this;\n    }\n    /**\n    Wrap the given [range](https://prosemirror.net/docs/ref/#model.NodeRange) in the given set of wrappers.\n    The wrappers are assumed to be valid in this position, and should\n    probably be computed with [`findWrapping`](https://prosemirror.net/docs/ref/#transform.findWrapping).\n    */\n    wrap(range, wrappers) {\n        wrap(this, range, wrappers);\n        return this;\n    }\n    /**\n    Set the type of all textblocks (partly) between `from` and `to` to\n    the given node type with the given attributes.\n    */\n    setBlockType(from, to = from, type, attrs = null) {\n        setBlockType(this, from, to, type, attrs);\n        return this;\n    }\n    /**\n    Change the type, attributes, and/or marks of the node at `pos`.\n    When `type` isn't given, the existing node type is preserved,\n    */\n    setNodeMarkup(pos, type, attrs = null, marks = []) {\n        setNodeMarkup(this, pos, type, attrs, marks);\n        return this;\n    }\n    /**\n    Split the node at the given position, and optionally, if `depth` is\n    greater than one, any number of nodes above that. By default, the\n    parts split off will inherit the node type of the original node.\n    This can be changed by passing an array of types and attributes to\n    use after the split.\n    */\n    split(pos, depth = 1, typesAfter) {\n        split(this, pos, depth, typesAfter);\n        return this;\n    }\n    /**\n    Add the given mark to the inline content between `from` and `to`.\n    */\n    addMark(from, to, mark) {\n        addMark(this, from, to, mark);\n        return this;\n    }\n    /**\n    Remove marks from inline nodes between `from` and `to`. When\n    `mark` is a single mark, remove precisely that mark. When it is\n    a mark type, remove all marks of that type. When it is null,\n    remove all marks of any type.\n    */\n    removeMark(from, to, mark) {\n        removeMark(this, from, to, mark);\n        return this;\n    }\n    /**\n    Removes all marks and nodes from the content of the node at\n    `pos` that don't match the given new parent node type. Accepts\n    an optional starting [content match](https://prosemirror.net/docs/ref/#model.ContentMatch) as\n    third argument.\n    */\n    clearIncompatible(pos, parentType, match) {\n        clearIncompatible(this, pos, parentType, match);\n        return this;\n    }\n}\n\nexport { AddMarkStep, MapResult, Mapping, RemoveMarkStep, ReplaceAroundStep, ReplaceStep, Step, StepMap, StepResult, Transform, TransformError, canJoin, canSplit, dropPoint, findWrapping, insertPoint, joinPoint, liftTarget, replaceStep };\n","import { Slice, Fragment, Mark, Node } from 'prosemirror-model';\nimport { ReplaceStep, ReplaceAroundStep, Transform } from 'prosemirror-transform';\n\nconst classesById = Object.create(null);\n/**\nSuperclass for editor selections. Every selection type should\nextend this. Should not be instantiated directly.\n*/\nclass Selection {\n    /**\n    Initialize a selection with the head and anchor and ranges. If no\n    ranges are given, constructs a single range across `$anchor` and\n    `$head`.\n    */\n    constructor(\n    /**\n    The resolved anchor of the selection (the side that stays in\n    place when the selection is modified).\n    */\n    $anchor, \n    /**\n    The resolved head of the selection (the side that moves when\n    the selection is modified).\n    */\n    $head, ranges) {\n        this.$anchor = $anchor;\n        this.$head = $head;\n        this.ranges = ranges || [new SelectionRange($anchor.min($head), $anchor.max($head))];\n    }\n    /**\n    The selection's anchor, as an unresolved position.\n    */\n    get anchor() { return this.$anchor.pos; }\n    /**\n    The selection's head.\n    */\n    get head() { return this.$head.pos; }\n    /**\n    The lower bound of the selection's main range.\n    */\n    get from() { return this.$from.pos; }\n    /**\n    The upper bound of the selection's main range.\n    */\n    get to() { return this.$to.pos; }\n    /**\n    The resolved lower  bound of the selection's main range.\n    */\n    get $from() {\n        return this.ranges[0].$from;\n    }\n    /**\n    The resolved upper bound of the selection's main range.\n    */\n    get $to() {\n        return this.ranges[0].$to;\n    }\n    /**\n    Indicates whether the selection contains any content.\n    */\n    get empty() {\n        let ranges = this.ranges;\n        for (let i = 0; i < ranges.length; i++)\n            if (ranges[i].$from.pos != ranges[i].$to.pos)\n                return false;\n        return true;\n    }\n    /**\n    Get the content of this selection as a slice.\n    */\n    content() {\n        return this.$from.doc.slice(this.from, this.to, true);\n    }\n    /**\n    Replace the selection with a slice or, if no slice is given,\n    delete the selection. Will append to the given transaction.\n    */\n    replace(tr, content = Slice.empty) {\n        // Put the new selection at the position after the inserted\n        // content. When that ended in an inline node, search backwards,\n        // to get the position after that node. If not, search forward.\n        let lastNode = content.content.lastChild, lastParent = null;\n        for (let i = 0; i < content.openEnd; i++) {\n            lastParent = lastNode;\n            lastNode = lastNode.lastChild;\n        }\n        let mapFrom = tr.steps.length, ranges = this.ranges;\n        for (let i = 0; i < ranges.length; i++) {\n            let { $from, $to } = ranges[i], mapping = tr.mapping.slice(mapFrom);\n            tr.replaceRange(mapping.map($from.pos), mapping.map($to.pos), i ? Slice.empty : content);\n            if (i == 0)\n                selectionToInsertionEnd(tr, mapFrom, (lastNode ? lastNode.isInline : lastParent && lastParent.isTextblock) ? -1 : 1);\n        }\n    }\n    /**\n    Replace the selection with the given node, appending the changes\n    to the given transaction.\n    */\n    replaceWith(tr, node) {\n        let mapFrom = tr.steps.length, ranges = this.ranges;\n        for (let i = 0; i < ranges.length; i++) {\n            let { $from, $to } = ranges[i], mapping = tr.mapping.slice(mapFrom);\n            let from = mapping.map($from.pos), to = mapping.map($to.pos);\n            if (i) {\n                tr.deleteRange(from, to);\n            }\n            else {\n                tr.replaceRangeWith(from, to, node);\n                selectionToInsertionEnd(tr, mapFrom, node.isInline ? -1 : 1);\n            }\n        }\n    }\n    /**\n    Find a valid cursor or leaf node selection starting at the given\n    position and searching back if `dir` is negative, and forward if\n    positive. When `textOnly` is true, only consider cursor\n    selections. Will return null when no valid selection position is\n    found.\n    */\n    static findFrom($pos, dir, textOnly = false) {\n        let inner = $pos.parent.inlineContent ? new TextSelection($pos)\n            : findSelectionIn($pos.node(0), $pos.parent, $pos.pos, $pos.index(), dir, textOnly);\n        if (inner)\n            return inner;\n        for (let depth = $pos.depth - 1; depth >= 0; depth--) {\n            let found = dir < 0\n                ? findSelectionIn($pos.node(0), $pos.node(depth), $pos.before(depth + 1), $pos.index(depth), dir, textOnly)\n                : findSelectionIn($pos.node(0), $pos.node(depth), $pos.after(depth + 1), $pos.index(depth) + 1, dir, textOnly);\n            if (found)\n                return found;\n        }\n        return null;\n    }\n    /**\n    Find a valid cursor or leaf node selection near the given\n    position. Searches forward first by default, but if `bias` is\n    negative, it will search backwards first.\n    */\n    static near($pos, bias = 1) {\n        return this.findFrom($pos, bias) || this.findFrom($pos, -bias) || new AllSelection($pos.node(0));\n    }\n    /**\n    Find the cursor or leaf node selection closest to the start of\n    the given document. Will return an\n    [`AllSelection`](https://prosemirror.net/docs/ref/#state.AllSelection) if no valid position\n    exists.\n    */\n    static atStart(doc) {\n        return findSelectionIn(doc, doc, 0, 0, 1) || new AllSelection(doc);\n    }\n    /**\n    Find the cursor or leaf node selection closest to the end of the\n    given document.\n    */\n    static atEnd(doc) {\n        return findSelectionIn(doc, doc, doc.content.size, doc.childCount, -1) || new AllSelection(doc);\n    }\n    /**\n    Deserialize the JSON representation of a selection. Must be\n    implemented for custom classes (as a static class method).\n    */\n    static fromJSON(doc, json) {\n        if (!json || !json.type)\n            throw new RangeError(\"Invalid input for Selection.fromJSON\");\n        let cls = classesById[json.type];\n        if (!cls)\n            throw new RangeError(`No selection type ${json.type} defined`);\n        return cls.fromJSON(doc, json);\n    }\n    /**\n    To be able to deserialize selections from JSON, custom selection\n    classes must register themselves with an ID string, so that they\n    can be disambiguated. Try to pick something that's unlikely to\n    clash with classes from other modules.\n    */\n    static jsonID(id, selectionClass) {\n        if (id in classesById)\n            throw new RangeError(\"Duplicate use of selection JSON ID \" + id);\n        classesById[id] = selectionClass;\n        selectionClass.prototype.jsonID = id;\n        return selectionClass;\n    }\n    /**\n    Get a [bookmark](https://prosemirror.net/docs/ref/#state.SelectionBookmark) for this selection,\n    which is a value that can be mapped without having access to a\n    current document, and later resolved to a real selection for a\n    given document again. (This is used mostly by the history to\n    track and restore old selections.) The default implementation of\n    this method just converts the selection to a text selection and\n    returns the bookmark for that.\n    */\n    getBookmark() {\n        return TextSelection.between(this.$anchor, this.$head).getBookmark();\n    }\n}\nSelection.prototype.visible = true;\n/**\nRepresents a selected range in a document.\n*/\nclass SelectionRange {\n    /**\n    Create a range.\n    */\n    constructor(\n    /**\n    The lower bound of the range.\n    */\n    $from, \n    /**\n    The upper bound of the range.\n    */\n    $to) {\n        this.$from = $from;\n        this.$to = $to;\n    }\n}\nlet warnedAboutTextSelection = false;\nfunction checkTextSelection($pos) {\n    if (!warnedAboutTextSelection && !$pos.parent.inlineContent) {\n        warnedAboutTextSelection = true;\n        console[\"warn\"](\"TextSelection endpoint not pointing into a node with inline content (\" + $pos.parent.type.name + \")\");\n    }\n}\n/**\nA text selection represents a classical editor selection, with a\nhead (the moving side) and anchor (immobile side), both of which\npoint into textblock nodes. It can be empty (a regular cursor\nposition).\n*/\nclass TextSelection extends Selection {\n    /**\n    Construct a text selection between the given points.\n    */\n    constructor($anchor, $head = $anchor) {\n        checkTextSelection($anchor);\n        checkTextSelection($head);\n        super($anchor, $head);\n    }\n    /**\n    Returns a resolved position if this is a cursor selection (an\n    empty text selection), and null otherwise.\n    */\n    get $cursor() { return this.$anchor.pos == this.$head.pos ? this.$head : null; }\n    map(doc, mapping) {\n        let $head = doc.resolve(mapping.map(this.head));\n        if (!$head.parent.inlineContent)\n            return Selection.near($head);\n        let $anchor = doc.resolve(mapping.map(this.anchor));\n        return new TextSelection($anchor.parent.inlineContent ? $anchor : $head, $head);\n    }\n    replace(tr, content = Slice.empty) {\n        super.replace(tr, content);\n        if (content == Slice.empty) {\n            let marks = this.$from.marksAcross(this.$to);\n            if (marks)\n                tr.ensureMarks(marks);\n        }\n    }\n    eq(other) {\n        return other instanceof TextSelection && other.anchor == this.anchor && other.head == this.head;\n    }\n    getBookmark() {\n        return new TextBookmark(this.anchor, this.head);\n    }\n    toJSON() {\n        return { type: \"text\", anchor: this.anchor, head: this.head };\n    }\n    /**\n    @internal\n    */\n    static fromJSON(doc, json) {\n        if (typeof json.anchor != \"number\" || typeof json.head != \"number\")\n            throw new RangeError(\"Invalid input for TextSelection.fromJSON\");\n        return new TextSelection(doc.resolve(json.anchor), doc.resolve(json.head));\n    }\n    /**\n    Create a text selection from non-resolved positions.\n    */\n    static create(doc, anchor, head = anchor) {\n        let $anchor = doc.resolve(anchor);\n        return new this($anchor, head == anchor ? $anchor : doc.resolve(head));\n    }\n    /**\n    Return a text selection that spans the given positions or, if\n    they aren't text positions, find a text selection near them.\n    `bias` determines whether the method searches forward (default)\n    or backwards (negative number) first. Will fall back to calling\n    [`Selection.near`](https://prosemirror.net/docs/ref/#state.Selection^near) when the document\n    doesn't contain a valid text position.\n    */\n    static between($anchor, $head, bias) {\n        let dPos = $anchor.pos - $head.pos;\n        if (!bias || dPos)\n            bias = dPos >= 0 ? 1 : -1;\n        if (!$head.parent.inlineContent) {\n            let found = Selection.findFrom($head, bias, true) || Selection.findFrom($head, -bias, true);\n            if (found)\n                $head = found.$head;\n            else\n                return Selection.near($head, bias);\n        }\n        if (!$anchor.parent.inlineContent) {\n            if (dPos == 0) {\n                $anchor = $head;\n            }\n            else {\n                $anchor = (Selection.findFrom($anchor, -bias, true) || Selection.findFrom($anchor, bias, true)).$anchor;\n                if (($anchor.pos < $head.pos) != (dPos < 0))\n                    $anchor = $head;\n            }\n        }\n        return new TextSelection($anchor, $head);\n    }\n}\nSelection.jsonID(\"text\", TextSelection);\nclass TextBookmark {\n    constructor(anchor, head) {\n        this.anchor = anchor;\n        this.head = head;\n    }\n    map(mapping) {\n        return new TextBookmark(mapping.map(this.anchor), mapping.map(this.head));\n    }\n    resolve(doc) {\n        return TextSelection.between(doc.resolve(this.anchor), doc.resolve(this.head));\n    }\n}\n/**\nA node selection is a selection that points at a single node. All\nnodes marked [selectable](https://prosemirror.net/docs/ref/#model.NodeSpec.selectable) can be the\ntarget of a node selection. In such a selection, `from` and `to`\npoint directly before and after the selected node, `anchor` equals\n`from`, and `head` equals `to`..\n*/\nclass NodeSelection extends Selection {\n    /**\n    Create a node selection. Does not verify the validity of its\n    argument.\n    */\n    constructor($pos) {\n        let node = $pos.nodeAfter;\n        let $end = $pos.node(0).resolve($pos.pos + node.nodeSize);\n        super($pos, $end);\n        this.node = node;\n    }\n    map(doc, mapping) {\n        let { deleted, pos } = mapping.mapResult(this.anchor);\n        let $pos = doc.resolve(pos);\n        if (deleted)\n            return Selection.near($pos);\n        return new NodeSelection($pos);\n    }\n    content() {\n        return new Slice(Fragment.from(this.node), 0, 0);\n    }\n    eq(other) {\n        return other instanceof NodeSelection && other.anchor == this.anchor;\n    }\n    toJSON() {\n        return { type: \"node\", anchor: this.anchor };\n    }\n    getBookmark() { return new NodeBookmark(this.anchor); }\n    /**\n    @internal\n    */\n    static fromJSON(doc, json) {\n        if (typeof json.anchor != \"number\")\n            throw new RangeError(\"Invalid input for NodeSelection.fromJSON\");\n        return new NodeSelection(doc.resolve(json.anchor));\n    }\n    /**\n    Create a node selection from non-resolved positions.\n    */\n    static create(doc, from) {\n        return new NodeSelection(doc.resolve(from));\n    }\n    /**\n    Determines whether the given node may be selected as a node\n    selection.\n    */\n    static isSelectable(node) {\n        return !node.isText && node.type.spec.selectable !== false;\n    }\n}\nNodeSelection.prototype.visible = false;\nSelection.jsonID(\"node\", NodeSelection);\nclass NodeBookmark {\n    constructor(anchor) {\n        this.anchor = anchor;\n    }\n    map(mapping) {\n        let { deleted, pos } = mapping.mapResult(this.anchor);\n        return deleted ? new TextBookmark(pos, pos) : new NodeBookmark(pos);\n    }\n    resolve(doc) {\n        let $pos = doc.resolve(this.anchor), node = $pos.nodeAfter;\n        if (node && NodeSelection.isSelectable(node))\n            return new NodeSelection($pos);\n        return Selection.near($pos);\n    }\n}\n/**\nA selection type that represents selecting the whole document\n(which can not necessarily be expressed with a text selection, when\nthere are for example leaf block nodes at the start or end of the\ndocument).\n*/\nclass AllSelection extends Selection {\n    /**\n    Create an all-selection over the given document.\n    */\n    constructor(doc) {\n        super(doc.resolve(0), doc.resolve(doc.content.size));\n    }\n    replace(tr, content = Slice.empty) {\n        if (content == Slice.empty) {\n            tr.delete(0, tr.doc.content.size);\n            let sel = Selection.atStart(tr.doc);\n            if (!sel.eq(tr.selection))\n                tr.setSelection(sel);\n        }\n        else {\n            super.replace(tr, content);\n        }\n    }\n    toJSON() { return { type: \"all\" }; }\n    /**\n    @internal\n    */\n    static fromJSON(doc) { return new AllSelection(doc); }\n    map(doc) { return new AllSelection(doc); }\n    eq(other) { return other instanceof AllSelection; }\n    getBookmark() { return AllBookmark; }\n}\nSelection.jsonID(\"all\", AllSelection);\nconst AllBookmark = {\n    map() { return this; },\n    resolve(doc) { return new AllSelection(doc); }\n};\n// FIXME we'll need some awareness of text direction when scanning for selections\n// Try to find a selection inside the given node. `pos` points at the\n// position where the search starts. When `text` is true, only return\n// text selections.\nfunction findSelectionIn(doc, node, pos, index, dir, text = false) {\n    if (node.inlineContent)\n        return TextSelection.create(doc, pos);\n    for (let i = index - (dir > 0 ? 0 : 1); dir > 0 ? i < node.childCount : i >= 0; i += dir) {\n        let child = node.child(i);\n        if (!child.isAtom) {\n            let inner = findSelectionIn(doc, child, pos + dir, dir < 0 ? child.childCount : 0, dir, text);\n            if (inner)\n                return inner;\n        }\n        else if (!text && NodeSelection.isSelectable(child)) {\n            return NodeSelection.create(doc, pos - (dir < 0 ? child.nodeSize : 0));\n        }\n        pos += child.nodeSize * dir;\n    }\n    return null;\n}\nfunction selectionToInsertionEnd(tr, startLen, bias) {\n    let last = tr.steps.length - 1;\n    if (last < startLen)\n        return;\n    let step = tr.steps[last];\n    if (!(step instanceof ReplaceStep || step instanceof ReplaceAroundStep))\n        return;\n    let map = tr.mapping.maps[last], end;\n    map.forEach((_from, _to, _newFrom, newTo) => { if (end == null)\n        end = newTo; });\n    tr.setSelection(Selection.near(tr.doc.resolve(end), bias));\n}\n\nconst UPDATED_SEL = 1, UPDATED_MARKS = 2, UPDATED_SCROLL = 4;\n/**\nAn editor state transaction, which can be applied to a state to\ncreate an updated state. Use\n[`EditorState.tr`](https://prosemirror.net/docs/ref/#state.EditorState.tr) to create an instance.\n\nTransactions track changes to the document (they are a subclass of\n[`Transform`](https://prosemirror.net/docs/ref/#transform.Transform)), but also other state changes,\nlike selection updates and adjustments of the set of [stored\nmarks](https://prosemirror.net/docs/ref/#state.EditorState.storedMarks). In addition, you can store\nmetadata properties in a transaction, which are extra pieces of\ninformation that client code or plugins can use to describe what a\ntransaction represents, so that they can update their [own\nstate](https://prosemirror.net/docs/ref/#state.StateField) accordingly.\n\nThe [editor view](https://prosemirror.net/docs/ref/#view.EditorView) uses a few metadata properties:\nit will attach a property `\"pointer\"` with the value `true` to\nselection transactions directly caused by mouse or touch input, and\na `\"uiEvent\"` property of that may be `\"paste\"`, `\"cut\"`, or `\"drop\"`.\n*/\nclass Transaction extends Transform {\n    /**\n    @internal\n    */\n    constructor(state) {\n        super(state.doc);\n        // The step count for which the current selection is valid.\n        this.curSelectionFor = 0;\n        // Bitfield to track which aspects of the state were updated by\n        // this transaction.\n        this.updated = 0;\n        // Object used to store metadata properties for the transaction.\n        this.meta = Object.create(null);\n        this.time = Date.now();\n        this.curSelection = state.selection;\n        this.storedMarks = state.storedMarks;\n    }\n    /**\n    The transaction's current selection. This defaults to the editor\n    selection [mapped](https://prosemirror.net/docs/ref/#state.Selection.map) through the steps in the\n    transaction, but can be overwritten with\n    [`setSelection`](https://prosemirror.net/docs/ref/#state.Transaction.setSelection).\n    */\n    get selection() {\n        if (this.curSelectionFor < this.steps.length) {\n            this.curSelection = this.curSelection.map(this.doc, this.mapping.slice(this.curSelectionFor));\n            this.curSelectionFor = this.steps.length;\n        }\n        return this.curSelection;\n    }\n    /**\n    Update the transaction's current selection. Will determine the\n    selection that the editor gets when the transaction is applied.\n    */\n    setSelection(selection) {\n        if (selection.$from.doc != this.doc)\n            throw new RangeError(\"Selection passed to setSelection must point at the current document\");\n        this.curSelection = selection;\n        this.curSelectionFor = this.steps.length;\n        this.updated = (this.updated | UPDATED_SEL) & ~UPDATED_MARKS;\n        this.storedMarks = null;\n        return this;\n    }\n    /**\n    Whether the selection was explicitly updated by this transaction.\n    */\n    get selectionSet() {\n        return (this.updated & UPDATED_SEL) > 0;\n    }\n    /**\n    Set the current stored marks.\n    */\n    setStoredMarks(marks) {\n        this.storedMarks = marks;\n        this.updated |= UPDATED_MARKS;\n        return this;\n    }\n    /**\n    Make sure the current stored marks or, if that is null, the marks\n    at the selection, match the given set of marks. Does nothing if\n    this is already the case.\n    */\n    ensureMarks(marks) {\n        if (!Mark.sameSet(this.storedMarks || this.selection.$from.marks(), marks))\n            this.setStoredMarks(marks);\n        return this;\n    }\n    /**\n    Add a mark to the set of stored marks.\n    */\n    addStoredMark(mark) {\n        return this.ensureMarks(mark.addToSet(this.storedMarks || this.selection.$head.marks()));\n    }\n    /**\n    Remove a mark or mark type from the set of stored marks.\n    */\n    removeStoredMark(mark) {\n        return this.ensureMarks(mark.removeFromSet(this.storedMarks || this.selection.$head.marks()));\n    }\n    /**\n    Whether the stored marks were explicitly set for this transaction.\n    */\n    get storedMarksSet() {\n        return (this.updated & UPDATED_MARKS) > 0;\n    }\n    /**\n    @internal\n    */\n    addStep(step, doc) {\n        super.addStep(step, doc);\n        this.updated = this.updated & ~UPDATED_MARKS;\n        this.storedMarks = null;\n    }\n    /**\n    Update the timestamp for the transaction.\n    */\n    setTime(time) {\n        this.time = time;\n        return this;\n    }\n    /**\n    Replace the current selection with the given slice.\n    */\n    replaceSelection(slice) {\n        this.selection.replace(this, slice);\n        return this;\n    }\n    /**\n    Replace the selection with the given node. When `inheritMarks` is\n    true and the content is inline, it inherits the marks from the\n    place where it is inserted.\n    */\n    replaceSelectionWith(node, inheritMarks = true) {\n        let selection = this.selection;\n        if (inheritMarks)\n            node = node.mark(this.storedMarks || (selection.empty ? selection.$from.marks() : (selection.$from.marksAcross(selection.$to) || Mark.none)));\n        selection.replaceWith(this, node);\n        return this;\n    }\n    /**\n    Delete the selection.\n    */\n    deleteSelection() {\n        this.selection.replace(this);\n        return this;\n    }\n    /**\n    Replace the given range, or the selection if no range is given,\n    with a text node containing the given string.\n    */\n    insertText(text, from, to) {\n        let schema = this.doc.type.schema;\n        if (from == null) {\n            if (!text)\n                return this.deleteSelection();\n            return this.replaceSelectionWith(schema.text(text), true);\n        }\n        else {\n            if (to == null)\n                to = from;\n            to = to == null ? from : to;\n            if (!text)\n                return this.deleteRange(from, to);\n            let marks = this.storedMarks;\n            if (!marks) {\n                let $from = this.doc.resolve(from);\n                marks = to == from ? $from.marks() : $from.marksAcross(this.doc.resolve(to));\n            }\n            this.replaceRangeWith(from, to, schema.text(text, marks));\n            if (!this.selection.empty)\n                this.setSelection(Selection.near(this.selection.$to));\n            return this;\n        }\n    }\n    /**\n    Store a metadata property in this transaction, keyed either by\n    name or by plugin.\n    */\n    setMeta(key, value) {\n        this.meta[typeof key == \"string\" ? key : key.key] = value;\n        return this;\n    }\n    /**\n    Retrieve a metadata property for a given name or plugin.\n    */\n    getMeta(key) {\n        return this.meta[typeof key == \"string\" ? key : key.key];\n    }\n    /**\n    Returns true if this transaction doesn't contain any metadata,\n    and can thus safely be extended.\n    */\n    get isGeneric() {\n        for (let _ in this.meta)\n            return false;\n        return true;\n    }\n    /**\n    Indicate that the editor should scroll the selection into view\n    when updated to the state produced by this transaction.\n    */\n    scrollIntoView() {\n        this.updated |= UPDATED_SCROLL;\n        return this;\n    }\n    /**\n    True when this transaction has had `scrollIntoView` called on it.\n    */\n    get scrolledIntoView() {\n        return (this.updated & UPDATED_SCROLL) > 0;\n    }\n}\n\nfunction bind(f, self) {\n    return !self || !f ? f : f.bind(self);\n}\nclass FieldDesc {\n    constructor(name, desc, self) {\n        this.name = name;\n        this.init = bind(desc.init, self);\n        this.apply = bind(desc.apply, self);\n    }\n}\nconst baseFields = [\n    new FieldDesc(\"doc\", {\n        init(config) { return config.doc || config.schema.topNodeType.createAndFill(); },\n        apply(tr) { return tr.doc; }\n    }),\n    new FieldDesc(\"selection\", {\n        init(config, instance) { return config.selection || Selection.atStart(instance.doc); },\n        apply(tr) { return tr.selection; }\n    }),\n    new FieldDesc(\"storedMarks\", {\n        init(config) { return config.storedMarks || null; },\n        apply(tr, _marks, _old, state) { return state.selection.$cursor ? tr.storedMarks : null; }\n    }),\n    new FieldDesc(\"scrollToSelection\", {\n        init() { return 0; },\n        apply(tr, prev) { return tr.scrolledIntoView ? prev + 1 : prev; }\n    })\n];\n// Object wrapping the part of a state object that stays the same\n// across transactions. Stored in the state's `config` property.\nclass Configuration {\n    constructor(schema, plugins) {\n        this.schema = schema;\n        this.plugins = [];\n        this.pluginsByKey = Object.create(null);\n        this.fields = baseFields.slice();\n        if (plugins)\n            plugins.forEach(plugin => {\n                if (this.pluginsByKey[plugin.key])\n                    throw new RangeError(\"Adding different instances of a keyed plugin (\" + plugin.key + \")\");\n                this.plugins.push(plugin);\n                this.pluginsByKey[plugin.key] = plugin;\n                if (plugin.spec.state)\n                    this.fields.push(new FieldDesc(plugin.key, plugin.spec.state, plugin));\n            });\n    }\n}\n/**\nThe state of a ProseMirror editor is represented by an object of\nthis type. A state is a persistent data structureit isn't\nupdated, but rather a new state value is computed from an old one\nusing the [`apply`](https://prosemirror.net/docs/ref/#state.EditorState.apply) method.\n\nA state holds a number of built-in fields, and plugins can\n[define](https://prosemirror.net/docs/ref/#state.PluginSpec.state) additional fields.\n*/\nclass EditorState {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    @internal\n    */\n    config) {\n        this.config = config;\n    }\n    /**\n    The schema of the state's document.\n    */\n    get schema() {\n        return this.config.schema;\n    }\n    /**\n    The plugins that are active in this state.\n    */\n    get plugins() {\n        return this.config.plugins;\n    }\n    /**\n    Apply the given transaction to produce a new state.\n    */\n    apply(tr) {\n        return this.applyTransaction(tr).state;\n    }\n    /**\n    @ignore\n    */\n    filterTransaction(tr, ignore = -1) {\n        for (let i = 0; i < this.config.plugins.length; i++)\n            if (i != ignore) {\n                let plugin = this.config.plugins[i];\n                if (plugin.spec.filterTransaction && !plugin.spec.filterTransaction.call(plugin, tr, this))\n                    return false;\n            }\n        return true;\n    }\n    /**\n    Verbose variant of [`apply`](https://prosemirror.net/docs/ref/#state.EditorState.apply) that\n    returns the precise transactions that were applied (which might\n    be influenced by the [transaction\n    hooks](https://prosemirror.net/docs/ref/#state.PluginSpec.filterTransaction) of\n    plugins) along with the new state.\n    */\n    applyTransaction(rootTr) {\n        if (!this.filterTransaction(rootTr))\n            return { state: this, transactions: [] };\n        let trs = [rootTr], newState = this.applyInner(rootTr), seen = null;\n        // This loop repeatedly gives plugins a chance to respond to\n        // transactions as new transactions are added, making sure to only\n        // pass the transactions the plugin did not see before.\n        for (;;) {\n            let haveNew = false;\n            for (let i = 0; i < this.config.plugins.length; i++) {\n                let plugin = this.config.plugins[i];\n                if (plugin.spec.appendTransaction) {\n                    let n = seen ? seen[i].n : 0, oldState = seen ? seen[i].state : this;\n                    let tr = n < trs.length &&\n                        plugin.spec.appendTransaction.call(plugin, n ? trs.slice(n) : trs, oldState, newState);\n                    if (tr && newState.filterTransaction(tr, i)) {\n                        tr.setMeta(\"appendedTransaction\", rootTr);\n                        if (!seen) {\n                            seen = [];\n                            for (let j = 0; j < this.config.plugins.length; j++)\n                                seen.push(j < i ? { state: newState, n: trs.length } : { state: this, n: 0 });\n                        }\n                        trs.push(tr);\n                        newState = newState.applyInner(tr);\n                        haveNew = true;\n                    }\n                    if (seen)\n                        seen[i] = { state: newState, n: trs.length };\n                }\n            }\n            if (!haveNew)\n                return { state: newState, transactions: trs };\n        }\n    }\n    /**\n    @internal\n    */\n    applyInner(tr) {\n        if (!tr.before.eq(this.doc))\n            throw new RangeError(\"Applying a mismatched transaction\");\n        let newInstance = new EditorState(this.config), fields = this.config.fields;\n        for (let i = 0; i < fields.length; i++) {\n            let field = fields[i];\n            newInstance[field.name] = field.apply(tr, this[field.name], this, newInstance);\n        }\n        return newInstance;\n    }\n    /**\n    Start a [transaction](https://prosemirror.net/docs/ref/#state.Transaction) from this state.\n    */\n    get tr() { return new Transaction(this); }\n    /**\n    Create a new state.\n    */\n    static create(config) {\n        let $config = new Configuration(config.doc ? config.doc.type.schema : config.schema, config.plugins);\n        let instance = new EditorState($config);\n        for (let i = 0; i < $config.fields.length; i++)\n            instance[$config.fields[i].name] = $config.fields[i].init(config, instance);\n        return instance;\n    }\n    /**\n    Create a new state based on this one, but with an adjusted set\n    of active plugins. State fields that exist in both sets of\n    plugins are kept unchanged. Those that no longer exist are\n    dropped, and those that are new are initialized using their\n    [`init`](https://prosemirror.net/docs/ref/#state.StateField.init) method, passing in the new\n    configuration object..\n    */\n    reconfigure(config) {\n        let $config = new Configuration(this.schema, config.plugins);\n        let fields = $config.fields, instance = new EditorState($config);\n        for (let i = 0; i < fields.length; i++) {\n            let name = fields[i].name;\n            instance[name] = this.hasOwnProperty(name) ? this[name] : fields[i].init(config, instance);\n        }\n        return instance;\n    }\n    /**\n    Serialize this state to JSON. If you want to serialize the state\n    of plugins, pass an object mapping property names to use in the\n    resulting JSON object to plugin objects. The argument may also be\n    a string or number, in which case it is ignored, to support the\n    way `JSON.stringify` calls `toString` methods.\n    */\n    toJSON(pluginFields) {\n        let result = { doc: this.doc.toJSON(), selection: this.selection.toJSON() };\n        if (this.storedMarks)\n            result.storedMarks = this.storedMarks.map(m => m.toJSON());\n        if (pluginFields && typeof pluginFields == 'object')\n            for (let prop in pluginFields) {\n                if (prop == \"doc\" || prop == \"selection\")\n                    throw new RangeError(\"The JSON fields `doc` and `selection` are reserved\");\n                let plugin = pluginFields[prop], state = plugin.spec.state;\n                if (state && state.toJSON)\n                    result[prop] = state.toJSON.call(plugin, this[plugin.key]);\n            }\n        return result;\n    }\n    /**\n    Deserialize a JSON representation of a state. `config` should\n    have at least a `schema` field, and should contain array of\n    plugins to initialize the state with. `pluginFields` can be used\n    to deserialize the state of plugins, by associating plugin\n    instances with the property names they use in the JSON object.\n    */\n    static fromJSON(config, json, pluginFields) {\n        if (!json)\n            throw new RangeError(\"Invalid input for EditorState.fromJSON\");\n        if (!config.schema)\n            throw new RangeError(\"Required config field 'schema' missing\");\n        let $config = new Configuration(config.schema, config.plugins);\n        let instance = new EditorState($config);\n        $config.fields.forEach(field => {\n            if (field.name == \"doc\") {\n                instance.doc = Node.fromJSON(config.schema, json.doc);\n            }\n            else if (field.name == \"selection\") {\n                instance.selection = Selection.fromJSON(instance.doc, json.selection);\n            }\n            else if (field.name == \"storedMarks\") {\n                if (json.storedMarks)\n                    instance.storedMarks = json.storedMarks.map(config.schema.markFromJSON);\n            }\n            else {\n                if (pluginFields)\n                    for (let prop in pluginFields) {\n                        let plugin = pluginFields[prop], state = plugin.spec.state;\n                        if (plugin.key == field.name && state && state.fromJSON &&\n                            Object.prototype.hasOwnProperty.call(json, prop)) {\n                            instance[field.name] = state.fromJSON.call(plugin, config, json[prop], instance);\n                            return;\n                        }\n                    }\n                instance[field.name] = field.init(config, instance);\n            }\n        });\n        return instance;\n    }\n}\n\nfunction bindProps(obj, self, target) {\n    for (let prop in obj) {\n        let val = obj[prop];\n        if (val instanceof Function)\n            val = val.bind(self);\n        else if (prop == \"handleDOMEvents\")\n            val = bindProps(val, self, {});\n        target[prop] = val;\n    }\n    return target;\n}\n/**\nPlugins bundle functionality that can be added to an editor.\nThey are part of the [editor state](https://prosemirror.net/docs/ref/#state.EditorState) and\nmay influence that state and the view that contains it.\n*/\nclass Plugin {\n    /**\n    Create a plugin.\n    */\n    constructor(\n    /**\n    The plugin's [spec object](https://prosemirror.net/docs/ref/#state.PluginSpec).\n    */\n    spec) {\n        this.spec = spec;\n        /**\n        The [props](https://prosemirror.net/docs/ref/#view.EditorProps) exported by this plugin.\n        */\n        this.props = {};\n        if (spec.props)\n            bindProps(spec.props, this, this.props);\n        this.key = spec.key ? spec.key.key : createKey(\"plugin\");\n    }\n    /**\n    Extract the plugin's state field from an editor state.\n    */\n    getState(state) { return state[this.key]; }\n}\nconst keys = Object.create(null);\nfunction createKey(name) {\n    if (name in keys)\n        return name + \"$\" + ++keys[name];\n    keys[name] = 0;\n    return name + \"$\";\n}\n/**\nA key is used to [tag](https://prosemirror.net/docs/ref/#state.PluginSpec.key) plugins in a way\nthat makes it possible to find them, given an editor state.\nAssigning a key does mean only one plugin of that type can be\nactive in a state.\n*/\nclass PluginKey {\n    /**\n    Create a plugin key.\n    */\n    constructor(name = \"key\") { this.key = createKey(name); }\n    /**\n    Get the active plugin with this key, if any, from an editor\n    state.\n    */\n    get(state) { return state.config.pluginsByKey[this.key]; }\n    /**\n    Get the plugin's state from an editor state.\n    */\n    getState(state) { return state[this.key]; }\n}\n\nexport { AllSelection, EditorState, NodeSelection, Plugin, PluginKey, Selection, SelectionRange, TextSelection, Transaction };\n","import { TextSelection, NodeSelection, Selection, AllSelection } from 'prosemirror-state';\nimport { DOMSerializer, Fragment, Mark, Slice, DOMParser } from 'prosemirror-model';\nimport { dropPoint } from 'prosemirror-transform';\n\nconst nav = typeof navigator != \"undefined\" ? navigator : null;\nconst doc = typeof document != \"undefined\" ? document : null;\nconst agent = (nav && nav.userAgent) || \"\";\nconst ie_edge = /Edge\\/(\\d+)/.exec(agent);\nconst ie_upto10 = /MSIE \\d/.exec(agent);\nconst ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(agent);\nconst ie = !!(ie_upto10 || ie_11up || ie_edge);\nconst ie_version = ie_upto10 ? document.documentMode : ie_11up ? +ie_11up[1] : ie_edge ? +ie_edge[1] : 0;\nconst gecko = !ie && /gecko\\/(\\d+)/i.test(agent);\ngecko && +(/Firefox\\/(\\d+)/.exec(agent) || [0, 0])[1];\nconst _chrome = !ie && /Chrome\\/(\\d+)/.exec(agent);\nconst chrome = !!_chrome;\nconst chrome_version = _chrome ? +_chrome[1] : 0;\nconst safari = !ie && !!nav && /Apple Computer/.test(nav.vendor);\n// Is true for both iOS and iPadOS for convenience\nconst ios = safari && (/Mobile\\/\\w+/.test(agent) || !!nav && nav.maxTouchPoints > 2);\nconst mac = ios || (nav ? /Mac/.test(nav.platform) : false);\nconst android = /Android \\d/.test(agent);\nconst webkit = !!doc && \"webkitFontSmoothing\" in doc.documentElement.style;\nconst webkit_version = webkit ? +(/\\bAppleWebKit\\/(\\d+)/.exec(navigator.userAgent) || [0, 0])[1] : 0;\n\nconst domIndex = function (node) {\n    for (var index = 0;; index++) {\n        node = node.previousSibling;\n        if (!node)\n            return index;\n    }\n};\nconst parentNode = function (node) {\n    let parent = node.assignedSlot || node.parentNode;\n    return parent && parent.nodeType == 11 ? parent.host : parent;\n};\nlet reusedRange = null;\n// Note that this will always return the same range, because DOM range\n// objects are every expensive, and keep slowing down subsequent DOM\n// updates, for some reason.\nconst textRange = function (node, from, to) {\n    let range = reusedRange || (reusedRange = document.createRange());\n    range.setEnd(node, to == null ? node.nodeValue.length : to);\n    range.setStart(node, from || 0);\n    return range;\n};\n// Scans forward and backward through DOM positions equivalent to the\n// given one to see if the two are in the same place (i.e. after a\n// text node vs at the end of that text node)\nconst isEquivalentPosition = function (node, off, targetNode, targetOff) {\n    return targetNode && (scanFor(node, off, targetNode, targetOff, -1) ||\n        scanFor(node, off, targetNode, targetOff, 1));\n};\nconst atomElements = /^(img|br|input|textarea|hr)$/i;\nfunction scanFor(node, off, targetNode, targetOff, dir) {\n    for (;;) {\n        if (node == targetNode && off == targetOff)\n            return true;\n        if (off == (dir < 0 ? 0 : nodeSize(node))) {\n            let parent = node.parentNode;\n            if (!parent || parent.nodeType != 1 || hasBlockDesc(node) || atomElements.test(node.nodeName) ||\n                node.contentEditable == \"false\")\n                return false;\n            off = domIndex(node) + (dir < 0 ? 0 : 1);\n            node = parent;\n        }\n        else if (node.nodeType == 1) {\n            node = node.childNodes[off + (dir < 0 ? -1 : 0)];\n            if (node.contentEditable == \"false\")\n                return false;\n            off = dir < 0 ? nodeSize(node) : 0;\n        }\n        else {\n            return false;\n        }\n    }\n}\nfunction nodeSize(node) {\n    return node.nodeType == 3 ? node.nodeValue.length : node.childNodes.length;\n}\nfunction isOnEdge(node, offset, parent) {\n    for (let atStart = offset == 0, atEnd = offset == nodeSize(node); atStart || atEnd;) {\n        if (node == parent)\n            return true;\n        let index = domIndex(node);\n        node = node.parentNode;\n        if (!node)\n            return false;\n        atStart = atStart && index == 0;\n        atEnd = atEnd && index == nodeSize(node);\n    }\n}\nfunction hasBlockDesc(dom) {\n    let desc;\n    for (let cur = dom; cur; cur = cur.parentNode)\n        if (desc = cur.pmViewDesc)\n            break;\n    return desc && desc.node && desc.node.isBlock && (desc.dom == dom || desc.contentDOM == dom);\n}\n// Work around Chrome issue https://bugs.chromium.org/p/chromium/issues/detail?id=447523\n// (isCollapsed inappropriately returns true in shadow dom)\nconst selectionCollapsed = function (domSel) {\n    let collapsed = domSel.isCollapsed;\n    if (collapsed && chrome && domSel.rangeCount && !domSel.getRangeAt(0).collapsed)\n        collapsed = false;\n    return collapsed;\n};\nfunction keyEvent(keyCode, key) {\n    let event = document.createEvent(\"Event\");\n    event.initEvent(\"keydown\", true, true);\n    event.keyCode = keyCode;\n    event.key = event.code = key;\n    return event;\n}\n\nfunction windowRect(doc) {\n    return { left: 0, right: doc.documentElement.clientWidth,\n        top: 0, bottom: doc.documentElement.clientHeight };\n}\nfunction getSide(value, side) {\n    return typeof value == \"number\" ? value : value[side];\n}\nfunction clientRect(node) {\n    let rect = node.getBoundingClientRect();\n    // Adjust for elements with style \"transform: scale()\"\n    let scaleX = (rect.width / node.offsetWidth) || 1;\n    let scaleY = (rect.height / node.offsetHeight) || 1;\n    // Make sure scrollbar width isn't included in the rectangle\n    return { left: rect.left, right: rect.left + node.clientWidth * scaleX,\n        top: rect.top, bottom: rect.top + node.clientHeight * scaleY };\n}\nfunction scrollRectIntoView(view, rect, startDOM) {\n    let scrollThreshold = view.someProp(\"scrollThreshold\") || 0, scrollMargin = view.someProp(\"scrollMargin\") || 5;\n    let doc = view.dom.ownerDocument;\n    for (let parent = startDOM || view.dom;; parent = parentNode(parent)) {\n        if (!parent)\n            break;\n        if (parent.nodeType != 1)\n            continue;\n        let elt = parent;\n        let atTop = elt == doc.body;\n        let bounding = atTop ? windowRect(doc) : clientRect(elt);\n        let moveX = 0, moveY = 0;\n        if (rect.top < bounding.top + getSide(scrollThreshold, \"top\"))\n            moveY = -(bounding.top - rect.top + getSide(scrollMargin, \"top\"));\n        else if (rect.bottom > bounding.bottom - getSide(scrollThreshold, \"bottom\"))\n            moveY = rect.bottom - bounding.bottom + getSide(scrollMargin, \"bottom\");\n        if (rect.left < bounding.left + getSide(scrollThreshold, \"left\"))\n            moveX = -(bounding.left - rect.left + getSide(scrollMargin, \"left\"));\n        else if (rect.right > bounding.right - getSide(scrollThreshold, \"right\"))\n            moveX = rect.right - bounding.right + getSide(scrollMargin, \"right\");\n        if (moveX || moveY) {\n            if (atTop) {\n                doc.defaultView.scrollBy(moveX, moveY);\n            }\n            else {\n                let startX = elt.scrollLeft, startY = elt.scrollTop;\n                if (moveY)\n                    elt.scrollTop += moveY;\n                if (moveX)\n                    elt.scrollLeft += moveX;\n                let dX = elt.scrollLeft - startX, dY = elt.scrollTop - startY;\n                rect = { left: rect.left - dX, top: rect.top - dY, right: rect.right - dX, bottom: rect.bottom - dY };\n            }\n        }\n        if (atTop)\n            break;\n    }\n}\n// Store the scroll position of the editor's parent nodes, along with\n// the top position of an element near the top of the editor, which\n// will be used to make sure the visible viewport remains stable even\n// when the size of the content above changes.\nfunction storeScrollPos(view) {\n    let rect = view.dom.getBoundingClientRect(), startY = Math.max(0, rect.top);\n    let refDOM, refTop;\n    for (let x = (rect.left + rect.right) / 2, y = startY + 1; y < Math.min(innerHeight, rect.bottom); y += 5) {\n        let dom = view.root.elementFromPoint(x, y);\n        if (!dom || dom == view.dom || !view.dom.contains(dom))\n            continue;\n        let localRect = dom.getBoundingClientRect();\n        if (localRect.top >= startY - 20) {\n            refDOM = dom;\n            refTop = localRect.top;\n            break;\n        }\n    }\n    return { refDOM: refDOM, refTop: refTop, stack: scrollStack(view.dom) };\n}\nfunction scrollStack(dom) {\n    let stack = [], doc = dom.ownerDocument;\n    for (let cur = dom; cur; cur = parentNode(cur)) {\n        stack.push({ dom: cur, top: cur.scrollTop, left: cur.scrollLeft });\n        if (dom == doc)\n            break;\n    }\n    return stack;\n}\n// Reset the scroll position of the editor's parent nodes to that what\n// it was before, when storeScrollPos was called.\nfunction resetScrollPos({ refDOM, refTop, stack }) {\n    let newRefTop = refDOM ? refDOM.getBoundingClientRect().top : 0;\n    restoreScrollStack(stack, newRefTop == 0 ? 0 : newRefTop - refTop);\n}\nfunction restoreScrollStack(stack, dTop) {\n    for (let i = 0; i < stack.length; i++) {\n        let { dom, top, left } = stack[i];\n        if (dom.scrollTop != top + dTop)\n            dom.scrollTop = top + dTop;\n        if (dom.scrollLeft != left)\n            dom.scrollLeft = left;\n    }\n}\nlet preventScrollSupported = null;\n// Feature-detects support for .focus({preventScroll: true}), and uses\n// a fallback kludge when not supported.\nfunction focusPreventScroll(dom) {\n    if (dom.setActive)\n        return dom.setActive(); // in IE\n    if (preventScrollSupported)\n        return dom.focus(preventScrollSupported);\n    let stored = scrollStack(dom);\n    dom.focus(preventScrollSupported == null ? {\n        get preventScroll() {\n            preventScrollSupported = { preventScroll: true };\n            return true;\n        }\n    } : undefined);\n    if (!preventScrollSupported) {\n        preventScrollSupported = false;\n        restoreScrollStack(stored, 0);\n    }\n}\nfunction findOffsetInNode(node, coords) {\n    let closest, dxClosest = 2e8, coordsClosest, offset = 0;\n    let rowBot = coords.top, rowTop = coords.top;\n    for (let child = node.firstChild, childIndex = 0; child; child = child.nextSibling, childIndex++) {\n        let rects;\n        if (child.nodeType == 1)\n            rects = child.getClientRects();\n        else if (child.nodeType == 3)\n            rects = textRange(child).getClientRects();\n        else\n            continue;\n        for (let i = 0; i < rects.length; i++) {\n            let rect = rects[i];\n            if (rect.top <= rowBot && rect.bottom >= rowTop) {\n                rowBot = Math.max(rect.bottom, rowBot);\n                rowTop = Math.min(rect.top, rowTop);\n                let dx = rect.left > coords.left ? rect.left - coords.left\n                    : rect.right < coords.left ? coords.left - rect.right : 0;\n                if (dx < dxClosest) {\n                    closest = child;\n                    dxClosest = dx;\n                    coordsClosest = dx && closest.nodeType == 3 ? {\n                        left: rect.right < coords.left ? rect.right : rect.left,\n                        top: coords.top\n                    } : coords;\n                    if (child.nodeType == 1 && dx)\n                        offset = childIndex + (coords.left >= (rect.left + rect.right) / 2 ? 1 : 0);\n                    continue;\n                }\n            }\n            if (!closest && (coords.left >= rect.right && coords.top >= rect.top ||\n                coords.left >= rect.left && coords.top >= rect.bottom))\n                offset = childIndex + 1;\n        }\n    }\n    if (closest && closest.nodeType == 3)\n        return findOffsetInText(closest, coordsClosest);\n    if (!closest || (dxClosest && closest.nodeType == 1))\n        return { node, offset };\n    return findOffsetInNode(closest, coordsClosest);\n}\nfunction findOffsetInText(node, coords) {\n    let len = node.nodeValue.length;\n    let range = document.createRange();\n    for (let i = 0; i < len; i++) {\n        range.setEnd(node, i + 1);\n        range.setStart(node, i);\n        let rect = singleRect(range, 1);\n        if (rect.top == rect.bottom)\n            continue;\n        if (inRect(coords, rect))\n            return { node, offset: i + (coords.left >= (rect.left + rect.right) / 2 ? 1 : 0) };\n    }\n    return { node, offset: 0 };\n}\nfunction inRect(coords, rect) {\n    return coords.left >= rect.left - 1 && coords.left <= rect.right + 1 &&\n        coords.top >= rect.top - 1 && coords.top <= rect.bottom + 1;\n}\nfunction targetKludge(dom, coords) {\n    let parent = dom.parentNode;\n    if (parent && /^li$/i.test(parent.nodeName) && coords.left < dom.getBoundingClientRect().left)\n        return parent;\n    return dom;\n}\nfunction posFromElement(view, elt, coords) {\n    let { node, offset } = findOffsetInNode(elt, coords), bias = -1;\n    if (node.nodeType == 1 && !node.firstChild) {\n        let rect = node.getBoundingClientRect();\n        bias = rect.left != rect.right && coords.left > (rect.left + rect.right) / 2 ? 1 : -1;\n    }\n    return view.docView.posFromDOM(node, offset, bias);\n}\nfunction posFromCaret(view, node, offset, coords) {\n    // Browser (in caretPosition/RangeFromPoint) will agressively\n    // normalize towards nearby inline nodes. Since we are interested in\n    // positions between block nodes too, we first walk up the hierarchy\n    // of nodes to see if there are block nodes that the coordinates\n    // fall outside of. If so, we take the position before/after that\n    // block. If not, we call `posFromDOM` on the raw node/offset.\n    let outside = -1;\n    for (let cur = node;;) {\n        if (cur == view.dom)\n            break;\n        let desc = view.docView.nearestDesc(cur, true);\n        if (!desc)\n            return null;\n        if (desc.node.isBlock && desc.parent) {\n            let rect = desc.dom.getBoundingClientRect();\n            if (rect.left > coords.left || rect.top > coords.top)\n                outside = desc.posBefore;\n            else if (rect.right < coords.left || rect.bottom < coords.top)\n                outside = desc.posAfter;\n            else\n                break;\n        }\n        cur = desc.dom.parentNode;\n    }\n    return outside > -1 ? outside : view.docView.posFromDOM(node, offset, 1);\n}\nfunction elementFromPoint(element, coords, box) {\n    let len = element.childNodes.length;\n    if (len && box.top < box.bottom) {\n        for (let startI = Math.max(0, Math.min(len - 1, Math.floor(len * (coords.top - box.top) / (box.bottom - box.top)) - 2)), i = startI;;) {\n            let child = element.childNodes[i];\n            if (child.nodeType == 1) {\n                let rects = child.getClientRects();\n                for (let j = 0; j < rects.length; j++) {\n                    let rect = rects[j];\n                    if (inRect(coords, rect))\n                        return elementFromPoint(child, coords, rect);\n                }\n            }\n            if ((i = (i + 1) % len) == startI)\n                break;\n        }\n    }\n    return element;\n}\n// Given an x,y position on the editor, get the position in the document.\nfunction posAtCoords(view, coords) {\n    let doc = view.dom.ownerDocument, node, offset = 0;\n    if (doc.caretPositionFromPoint) {\n        try { // Firefox throws for this call in hard-to-predict circumstances (#994)\n            let pos = doc.caretPositionFromPoint(coords.left, coords.top);\n            if (pos)\n                ({ offsetNode: node, offset } = pos);\n        }\n        catch (_) { }\n    }\n    if (!node && doc.caretRangeFromPoint) {\n        let range = doc.caretRangeFromPoint(coords.left, coords.top);\n        if (range)\n            ({ startContainer: node, startOffset: offset } = range);\n    }\n    let elt = (view.root.elementFromPoint ? view.root : doc)\n        .elementFromPoint(coords.left, coords.top + 1);\n    let pos;\n    if (!elt || !view.dom.contains(elt.nodeType != 1 ? elt.parentNode : elt)) {\n        let box = view.dom.getBoundingClientRect();\n        if (!inRect(coords, box))\n            return null;\n        elt = elementFromPoint(view.dom, coords, box);\n        if (!elt)\n            return null;\n    }\n    // Safari's caretRangeFromPoint returns nonsense when on a draggable element\n    if (safari) {\n        for (let p = elt; node && p; p = parentNode(p))\n            if (p.draggable)\n                node = undefined;\n    }\n    elt = targetKludge(elt, coords);\n    if (node) {\n        if (gecko && node.nodeType == 1) {\n            // Firefox will sometimes return offsets into <input> nodes, which\n            // have no actual children, from caretPositionFromPoint (#953)\n            offset = Math.min(offset, node.childNodes.length);\n            // It'll also move the returned position before image nodes,\n            // even if those are behind it.\n            if (offset < node.childNodes.length) {\n                let next = node.childNodes[offset], box;\n                if (next.nodeName == \"IMG\" && (box = next.getBoundingClientRect()).right <= coords.left &&\n                    box.bottom > coords.top)\n                    offset++;\n            }\n        }\n        // Suspiciously specific kludge to work around caret*FromPoint\n        // never returning a position at the end of the document\n        if (node == view.dom && offset == node.childNodes.length - 1 && node.lastChild.nodeType == 1 &&\n            coords.top > node.lastChild.getBoundingClientRect().bottom)\n            pos = view.state.doc.content.size;\n        // Ignore positions directly after a BR, since caret*FromPoint\n        // 'round up' positions that would be more accurately placed\n        // before the BR node.\n        else if (offset == 0 || node.nodeType != 1 || node.childNodes[offset - 1].nodeName != \"BR\")\n            pos = posFromCaret(view, node, offset, coords);\n    }\n    if (pos == null)\n        pos = posFromElement(view, elt, coords);\n    let desc = view.docView.nearestDesc(elt, true);\n    return { pos, inside: desc ? desc.posAtStart - desc.border : -1 };\n}\nfunction singleRect(target, bias) {\n    let rects = target.getClientRects();\n    return !rects.length ? target.getBoundingClientRect() : rects[bias < 0 ? 0 : rects.length - 1];\n}\nconst BIDI = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n// Given a position in the document model, get a bounding box of the\n// character at that position, relative to the window.\nfunction coordsAtPos(view, pos, side) {\n    let { node, offset } = view.docView.domFromPos(pos, side < 0 ? -1 : 1);\n    let supportEmptyRange = webkit || gecko;\n    if (node.nodeType == 3) {\n        // These browsers support querying empty text ranges. Prefer that in\n        // bidi context or when at the end of a node.\n        if (supportEmptyRange && (BIDI.test(node.nodeValue) || (side < 0 ? !offset : offset == node.nodeValue.length))) {\n            let rect = singleRect(textRange(node, offset, offset), side);\n            // Firefox returns bad results (the position before the space)\n            // when querying a position directly after line-broken\n            // whitespace. Detect this situation and and kludge around it\n            if (gecko && offset && /\\s/.test(node.nodeValue[offset - 1]) && offset < node.nodeValue.length) {\n                let rectBefore = singleRect(textRange(node, offset - 1, offset - 1), -1);\n                if (rectBefore.top == rect.top) {\n                    let rectAfter = singleRect(textRange(node, offset, offset + 1), -1);\n                    if (rectAfter.top != rect.top)\n                        return flattenV(rectAfter, rectAfter.left < rectBefore.left);\n                }\n            }\n            return rect;\n        }\n        else {\n            let from = offset, to = offset, takeSide = side < 0 ? 1 : -1;\n            if (side < 0 && !offset) {\n                to++;\n                takeSide = -1;\n            }\n            else if (side >= 0 && offset == node.nodeValue.length) {\n                from--;\n                takeSide = 1;\n            }\n            else if (side < 0) {\n                from--;\n            }\n            else {\n                to++;\n            }\n            return flattenV(singleRect(textRange(node, from, to), takeSide), takeSide < 0);\n        }\n    }\n    // Return a horizontal line in block context\n    if (!view.state.doc.resolve(pos).parent.inlineContent) {\n        if (offset && (side < 0 || offset == nodeSize(node))) {\n            let before = node.childNodes[offset - 1];\n            if (before.nodeType == 1)\n                return flattenH(before.getBoundingClientRect(), false);\n        }\n        if (offset < nodeSize(node)) {\n            let after = node.childNodes[offset];\n            if (after.nodeType == 1)\n                return flattenH(after.getBoundingClientRect(), true);\n        }\n        return flattenH(node.getBoundingClientRect(), side >= 0);\n    }\n    // Inline, not in text node (this is not Bidi-safe)\n    if (offset && (side < 0 || offset == nodeSize(node))) {\n        let before = node.childNodes[offset - 1];\n        let target = before.nodeType == 3 ? textRange(before, nodeSize(before) - (supportEmptyRange ? 0 : 1))\n            // BR nodes tend to only return the rectangle before them.\n            // Only use them if they are the last element in their parent\n            : before.nodeType == 1 && (before.nodeName != \"BR\" || !before.nextSibling) ? before : null;\n        if (target)\n            return flattenV(singleRect(target, 1), false);\n    }\n    if (offset < nodeSize(node)) {\n        let after = node.childNodes[offset];\n        while (after.pmViewDesc && after.pmViewDesc.ignoreForCoords)\n            after = after.nextSibling;\n        let target = !after ? null : after.nodeType == 3 ? textRange(after, 0, (supportEmptyRange ? 0 : 1))\n            : after.nodeType == 1 ? after : null;\n        if (target)\n            return flattenV(singleRect(target, -1), true);\n    }\n    // All else failed, just try to get a rectangle for the target node\n    return flattenV(singleRect(node.nodeType == 3 ? textRange(node) : node, -side), side >= 0);\n}\nfunction flattenV(rect, left) {\n    if (rect.width == 0)\n        return rect;\n    let x = left ? rect.left : rect.right;\n    return { top: rect.top, bottom: rect.bottom, left: x, right: x };\n}\nfunction flattenH(rect, top) {\n    if (rect.height == 0)\n        return rect;\n    let y = top ? rect.top : rect.bottom;\n    return { top: y, bottom: y, left: rect.left, right: rect.right };\n}\nfunction withFlushedState(view, state, f) {\n    let viewState = view.state, active = view.root.activeElement;\n    if (viewState != state)\n        view.updateState(state);\n    if (active != view.dom)\n        view.focus();\n    try {\n        return f();\n    }\n    finally {\n        if (viewState != state)\n            view.updateState(viewState);\n        if (active != view.dom && active)\n            active.focus();\n    }\n}\n// Whether vertical position motion in a given direction\n// from a position would leave a text block.\nfunction endOfTextblockVertical(view, state, dir) {\n    let sel = state.selection;\n    let $pos = dir == \"up\" ? sel.$from : sel.$to;\n    return withFlushedState(view, state, () => {\n        let { node: dom } = view.docView.domFromPos($pos.pos, dir == \"up\" ? -1 : 1);\n        for (;;) {\n            let nearest = view.docView.nearestDesc(dom, true);\n            if (!nearest)\n                break;\n            if (nearest.node.isBlock) {\n                dom = nearest.dom;\n                break;\n            }\n            dom = nearest.dom.parentNode;\n        }\n        let coords = coordsAtPos(view, $pos.pos, 1);\n        for (let child = dom.firstChild; child; child = child.nextSibling) {\n            let boxes;\n            if (child.nodeType == 1)\n                boxes = child.getClientRects();\n            else if (child.nodeType == 3)\n                boxes = textRange(child, 0, child.nodeValue.length).getClientRects();\n            else\n                continue;\n            for (let i = 0; i < boxes.length; i++) {\n                let box = boxes[i];\n                if (box.bottom > box.top + 1 &&\n                    (dir == \"up\" ? coords.top - box.top > (box.bottom - coords.top) * 2\n                        : box.bottom - coords.bottom > (coords.bottom - box.top) * 2))\n                    return false;\n            }\n        }\n        return true;\n    });\n}\nconst maybeRTL = /[\\u0590-\\u08ac]/;\nfunction endOfTextblockHorizontal(view, state, dir) {\n    let { $head } = state.selection;\n    if (!$head.parent.isTextblock)\n        return false;\n    let offset = $head.parentOffset, atStart = !offset, atEnd = offset == $head.parent.content.size;\n    let sel = view.domSelection();\n    // If the textblock is all LTR, or the browser doesn't support\n    // Selection.modify (Edge), fall back to a primitive approach\n    if (!maybeRTL.test($head.parent.textContent) || !sel.modify)\n        return dir == \"left\" || dir == \"backward\" ? atStart : atEnd;\n    return withFlushedState(view, state, () => {\n        // This is a huge hack, but appears to be the best we can\n        // currently do: use `Selection.modify` to move the selection by\n        // one character, and see if that moves the cursor out of the\n        // textblock (or doesn't move it at all, when at the start/end of\n        // the document).\n        let oldRange = sel.getRangeAt(0), oldNode = sel.focusNode, oldOff = sel.focusOffset;\n        let oldBidiLevel = sel.caretBidiLevel // Only for Firefox\n        ;\n        sel.modify(\"move\", dir, \"character\");\n        let parentDOM = $head.depth ? view.docView.domAfterPos($head.before()) : view.dom;\n        let result = !parentDOM.contains(sel.focusNode.nodeType == 1 ? sel.focusNode : sel.focusNode.parentNode) ||\n            (oldNode == sel.focusNode && oldOff == sel.focusOffset);\n        // Restore the previous selection\n        sel.removeAllRanges();\n        sel.addRange(oldRange);\n        if (oldBidiLevel != null)\n            sel.caretBidiLevel = oldBidiLevel;\n        return result;\n    });\n}\nlet cachedState = null;\nlet cachedDir = null;\nlet cachedResult = false;\nfunction endOfTextblock(view, state, dir) {\n    if (cachedState == state && cachedDir == dir)\n        return cachedResult;\n    cachedState = state;\n    cachedDir = dir;\n    return cachedResult = dir == \"up\" || dir == \"down\"\n        ? endOfTextblockVertical(view, state, dir)\n        : endOfTextblockHorizontal(view, state, dir);\n}\n\n// View descriptions are data structures that describe the DOM that is\n// used to represent the editor's content. They are used for:\n//\n// - Incremental redrawing when the document changes\n//\n// - Figuring out what part of the document a given DOM position\n//   corresponds to\n//\n// - Wiring in custom implementations of the editing interface for a\n//   given node\n//\n// They form a doubly-linked mutable tree, starting at `view.docView`.\nconst NOT_DIRTY = 0, CHILD_DIRTY = 1, CONTENT_DIRTY = 2, NODE_DIRTY = 3;\n// Superclass for the various kinds of descriptions. Defines their\n// basic structure and shared methods.\nclass ViewDesc {\n    constructor(parent, children, dom, \n    // This is the node that holds the child views. It may be null for\n    // descs that don't have children.\n    contentDOM) {\n        this.parent = parent;\n        this.children = children;\n        this.dom = dom;\n        this.contentDOM = contentDOM;\n        this.dirty = NOT_DIRTY;\n        // An expando property on the DOM node provides a link back to its\n        // description.\n        dom.pmViewDesc = this;\n    }\n    // Used to check whether a given description corresponds to a\n    // widget/mark/node.\n    matchesWidget(widget) { return false; }\n    matchesMark(mark) { return false; }\n    matchesNode(node, outerDeco, innerDeco) { return false; }\n    matchesHack(nodeName) { return false; }\n    // When parsing in-editor content (in domchange.js), we allow\n    // descriptions to determine the parse rules that should be used to\n    // parse them.\n    parseRule() { return null; }\n    // Used by the editor's event handler to ignore events that come\n    // from certain descs.\n    stopEvent(event) { return false; }\n    // The size of the content represented by this desc.\n    get size() {\n        let size = 0;\n        for (let i = 0; i < this.children.length; i++)\n            size += this.children[i].size;\n        return size;\n    }\n    // For block nodes, this represents the space taken up by their\n    // start/end tokens.\n    get border() { return 0; }\n    destroy() {\n        this.parent = undefined;\n        if (this.dom.pmViewDesc == this)\n            this.dom.pmViewDesc = undefined;\n        for (let i = 0; i < this.children.length; i++)\n            this.children[i].destroy();\n    }\n    posBeforeChild(child) {\n        for (let i = 0, pos = this.posAtStart;; i++) {\n            let cur = this.children[i];\n            if (cur == child)\n                return pos;\n            pos += cur.size;\n        }\n    }\n    get posBefore() {\n        return this.parent.posBeforeChild(this);\n    }\n    get posAtStart() {\n        return this.parent ? this.parent.posBeforeChild(this) + this.border : 0;\n    }\n    get posAfter() {\n        return this.posBefore + this.size;\n    }\n    get posAtEnd() {\n        return this.posAtStart + this.size - 2 * this.border;\n    }\n    localPosFromDOM(dom, offset, bias) {\n        // If the DOM position is in the content, use the child desc after\n        // it to figure out a position.\n        if (this.contentDOM && this.contentDOM.contains(dom.nodeType == 1 ? dom : dom.parentNode)) {\n            if (bias < 0) {\n                let domBefore, desc;\n                if (dom == this.contentDOM) {\n                    domBefore = dom.childNodes[offset - 1];\n                }\n                else {\n                    while (dom.parentNode != this.contentDOM)\n                        dom = dom.parentNode;\n                    domBefore = dom.previousSibling;\n                }\n                while (domBefore && !((desc = domBefore.pmViewDesc) && desc.parent == this))\n                    domBefore = domBefore.previousSibling;\n                return domBefore ? this.posBeforeChild(desc) + desc.size : this.posAtStart;\n            }\n            else {\n                let domAfter, desc;\n                if (dom == this.contentDOM) {\n                    domAfter = dom.childNodes[offset];\n                }\n                else {\n                    while (dom.parentNode != this.contentDOM)\n                        dom = dom.parentNode;\n                    domAfter = dom.nextSibling;\n                }\n                while (domAfter && !((desc = domAfter.pmViewDesc) && desc.parent == this))\n                    domAfter = domAfter.nextSibling;\n                return domAfter ? this.posBeforeChild(desc) : this.posAtEnd;\n            }\n        }\n        // Otherwise, use various heuristics, falling back on the bias\n        // parameter, to determine whether to return the position at the\n        // start or at the end of this view desc.\n        let atEnd;\n        if (dom == this.dom && this.contentDOM) {\n            atEnd = offset > domIndex(this.contentDOM);\n        }\n        else if (this.contentDOM && this.contentDOM != this.dom && this.dom.contains(this.contentDOM)) {\n            atEnd = dom.compareDocumentPosition(this.contentDOM) & 2;\n        }\n        else if (this.dom.firstChild) {\n            if (offset == 0)\n                for (let search = dom;; search = search.parentNode) {\n                    if (search == this.dom) {\n                        atEnd = false;\n                        break;\n                    }\n                    if (search.previousSibling)\n                        break;\n                }\n            if (atEnd == null && offset == dom.childNodes.length)\n                for (let search = dom;; search = search.parentNode) {\n                    if (search == this.dom) {\n                        atEnd = true;\n                        break;\n                    }\n                    if (search.nextSibling)\n                        break;\n                }\n        }\n        return (atEnd == null ? bias > 0 : atEnd) ? this.posAtEnd : this.posAtStart;\n    }\n    // Scan up the dom finding the first desc that is a descendant of\n    // this one.\n    nearestDesc(dom, onlyNodes = false) {\n        for (let first = true, cur = dom; cur; cur = cur.parentNode) {\n            let desc = this.getDesc(cur), nodeDOM;\n            if (desc && (!onlyNodes || desc.node)) {\n                // If dom is outside of this desc's nodeDOM, don't count it.\n                if (first && (nodeDOM = desc.nodeDOM) &&\n                    !(nodeDOM.nodeType == 1 ? nodeDOM.contains(dom.nodeType == 1 ? dom : dom.parentNode) : nodeDOM == dom))\n                    first = false;\n                else\n                    return desc;\n            }\n        }\n    }\n    getDesc(dom) {\n        let desc = dom.pmViewDesc;\n        for (let cur = desc; cur; cur = cur.parent)\n            if (cur == this)\n                return desc;\n    }\n    posFromDOM(dom, offset, bias) {\n        for (let scan = dom; scan; scan = scan.parentNode) {\n            let desc = this.getDesc(scan);\n            if (desc)\n                return desc.localPosFromDOM(dom, offset, bias);\n        }\n        return -1;\n    }\n    // Find the desc for the node after the given pos, if any. (When a\n    // parent node overrode rendering, there might not be one.)\n    descAt(pos) {\n        for (let i = 0, offset = 0; i < this.children.length; i++) {\n            let child = this.children[i], end = offset + child.size;\n            if (offset == pos && end != offset) {\n                while (!child.border && child.children.length)\n                    child = child.children[0];\n                return child;\n            }\n            if (pos < end)\n                return child.descAt(pos - offset - child.border);\n            offset = end;\n        }\n    }\n    domFromPos(pos, side) {\n        if (!this.contentDOM)\n            return { node: this.dom, offset: 0 };\n        // First find the position in the child array\n        let i = 0, offset = 0;\n        for (let curPos = 0; i < this.children.length; i++) {\n            let child = this.children[i], end = curPos + child.size;\n            if (end > pos || child instanceof TrailingHackViewDesc) {\n                offset = pos - curPos;\n                break;\n            }\n            curPos = end;\n        }\n        // If this points into the middle of a child, call through\n        if (offset)\n            return this.children[i].domFromPos(offset - this.children[i].border, side);\n        // Go back if there were any zero-length widgets with side >= 0 before this point\n        for (let prev; i && !(prev = this.children[i - 1]).size && prev instanceof WidgetViewDesc && prev.side >= 0; i--) { }\n        // Scan towards the first useable node\n        if (side <= 0) {\n            let prev, enter = true;\n            for (;; i--, enter = false) {\n                prev = i ? this.children[i - 1] : null;\n                if (!prev || prev.dom.parentNode == this.contentDOM)\n                    break;\n            }\n            if (prev && side && enter && !prev.border && !prev.domAtom)\n                return prev.domFromPos(prev.size, side);\n            return { node: this.contentDOM, offset: prev ? domIndex(prev.dom) + 1 : 0 };\n        }\n        else {\n            let next, enter = true;\n            for (;; i++, enter = false) {\n                next = i < this.children.length ? this.children[i] : null;\n                if (!next || next.dom.parentNode == this.contentDOM)\n                    break;\n            }\n            if (next && enter && !next.border && !next.domAtom)\n                return next.domFromPos(0, side);\n            return { node: this.contentDOM, offset: next ? domIndex(next.dom) : this.contentDOM.childNodes.length };\n        }\n    }\n    // Used to find a DOM range in a single parent for a given changed\n    // range.\n    parseRange(from, to, base = 0) {\n        if (this.children.length == 0)\n            return { node: this.contentDOM, from, to, fromOffset: 0, toOffset: this.contentDOM.childNodes.length };\n        let fromOffset = -1, toOffset = -1;\n        for (let offset = base, i = 0;; i++) {\n            let child = this.children[i], end = offset + child.size;\n            if (fromOffset == -1 && from <= end) {\n                let childBase = offset + child.border;\n                // FIXME maybe descend mark views to parse a narrower range?\n                if (from >= childBase && to <= end - child.border && child.node &&\n                    child.contentDOM && this.contentDOM.contains(child.contentDOM))\n                    return child.parseRange(from, to, childBase);\n                from = offset;\n                for (let j = i; j > 0; j--) {\n                    let prev = this.children[j - 1];\n                    if (prev.size && prev.dom.parentNode == this.contentDOM && !prev.emptyChildAt(1)) {\n                        fromOffset = domIndex(prev.dom) + 1;\n                        break;\n                    }\n                    from -= prev.size;\n                }\n                if (fromOffset == -1)\n                    fromOffset = 0;\n            }\n            if (fromOffset > -1 && (end > to || i == this.children.length - 1)) {\n                to = end;\n                for (let j = i + 1; j < this.children.length; j++) {\n                    let next = this.children[j];\n                    if (next.size && next.dom.parentNode == this.contentDOM && !next.emptyChildAt(-1)) {\n                        toOffset = domIndex(next.dom);\n                        break;\n                    }\n                    to += next.size;\n                }\n                if (toOffset == -1)\n                    toOffset = this.contentDOM.childNodes.length;\n                break;\n            }\n            offset = end;\n        }\n        return { node: this.contentDOM, from, to, fromOffset, toOffset };\n    }\n    emptyChildAt(side) {\n        if (this.border || !this.contentDOM || !this.children.length)\n            return false;\n        let child = this.children[side < 0 ? 0 : this.children.length - 1];\n        return child.size == 0 || child.emptyChildAt(side);\n    }\n    domAfterPos(pos) {\n        let { node, offset } = this.domFromPos(pos, 0);\n        if (node.nodeType != 1 || offset == node.childNodes.length)\n            throw new RangeError(\"No node after pos \" + pos);\n        return node.childNodes[offset];\n    }\n    // View descs are responsible for setting any selection that falls\n    // entirely inside of them, so that custom implementations can do\n    // custom things with the selection. Note that this falls apart when\n    // a selection starts in such a node and ends in another, in which\n    // case we just use whatever domFromPos produces as a best effort.\n    setSelection(anchor, head, root, force = false) {\n        // If the selection falls entirely in a child, give it to that child\n        let from = Math.min(anchor, head), to = Math.max(anchor, head);\n        for (let i = 0, offset = 0; i < this.children.length; i++) {\n            let child = this.children[i], end = offset + child.size;\n            if (from > offset && to < end)\n                return child.setSelection(anchor - offset - child.border, head - offset - child.border, root, force);\n            offset = end;\n        }\n        let anchorDOM = this.domFromPos(anchor, anchor ? -1 : 1);\n        let headDOM = head == anchor ? anchorDOM : this.domFromPos(head, head ? -1 : 1);\n        let domSel = root.getSelection();\n        let brKludge = false;\n        // On Firefox, using Selection.collapse to put the cursor after a\n        // BR node for some reason doesn't always work (#1073). On Safari,\n        // the cursor sometimes inexplicable visually lags behind its\n        // reported position in such situations (#1092).\n        if ((gecko || safari) && anchor == head) {\n            let { node, offset } = anchorDOM;\n            if (node.nodeType == 3) {\n                brKludge = !!(offset && node.nodeValue[offset - 1] == \"\\n\");\n                // Issue #1128\n                if (brKludge && offset == node.nodeValue.length) {\n                    for (let scan = node, after; scan; scan = scan.parentNode) {\n                        if (after = scan.nextSibling) {\n                            if (after.nodeName == \"BR\")\n                                anchorDOM = headDOM = { node: after.parentNode, offset: domIndex(after) + 1 };\n                            break;\n                        }\n                        let desc = scan.pmViewDesc;\n                        if (desc && desc.node && desc.node.isBlock)\n                            break;\n                    }\n                }\n            }\n            else {\n                let prev = node.childNodes[offset - 1];\n                brKludge = prev && (prev.nodeName == \"BR\" || prev.contentEditable == \"false\");\n            }\n        }\n        // Firefox can act strangely when the selection is in front of an\n        // uneditable node. See #1163 and https://bugzilla.mozilla.org/show_bug.cgi?id=1709536\n        if (gecko && domSel.focusNode && domSel.focusNode != headDOM.node && domSel.focusNode.nodeType == 1) {\n            let after = domSel.focusNode.childNodes[domSel.focusOffset];\n            if (after && after.contentEditable == \"false\")\n                force = true;\n        }\n        if (!(force || brKludge && safari) &&\n            isEquivalentPosition(anchorDOM.node, anchorDOM.offset, domSel.anchorNode, domSel.anchorOffset) &&\n            isEquivalentPosition(headDOM.node, headDOM.offset, domSel.focusNode, domSel.focusOffset))\n            return;\n        // Selection.extend can be used to create an 'inverted' selection\n        // (one where the focus is before the anchor), but not all\n        // browsers support it yet.\n        let domSelExtended = false;\n        if ((domSel.extend || anchor == head) && !brKludge) {\n            domSel.collapse(anchorDOM.node, anchorDOM.offset);\n            try {\n                if (anchor != head)\n                    domSel.extend(headDOM.node, headDOM.offset);\n                domSelExtended = true;\n            }\n            catch (err) {\n                // In some cases with Chrome the selection is empty after calling\n                // collapse, even when it should be valid. This appears to be a bug, but\n                // it is difficult to isolate. If this happens fallback to the old path\n                // without using extend.\n                if (!(err instanceof DOMException))\n                    throw err;\n                // declare global: DOMException\n            }\n        }\n        if (!domSelExtended) {\n            if (anchor > head) {\n                let tmp = anchorDOM;\n                anchorDOM = headDOM;\n                headDOM = tmp;\n            }\n            let range = document.createRange();\n            range.setEnd(headDOM.node, headDOM.offset);\n            range.setStart(anchorDOM.node, anchorDOM.offset);\n            domSel.removeAllRanges();\n            domSel.addRange(range);\n        }\n    }\n    ignoreMutation(mutation) {\n        return !this.contentDOM && mutation.type != \"selection\";\n    }\n    get contentLost() {\n        return this.contentDOM && this.contentDOM != this.dom && !this.dom.contains(this.contentDOM);\n    }\n    // Remove a subtree of the element tree that has been touched\n    // by a DOM change, so that the next update will redraw it.\n    markDirty(from, to) {\n        for (let offset = 0, i = 0; i < this.children.length; i++) {\n            let child = this.children[i], end = offset + child.size;\n            if (offset == end ? from <= end && to >= offset : from < end && to > offset) {\n                let startInside = offset + child.border, endInside = end - child.border;\n                if (from >= startInside && to <= endInside) {\n                    this.dirty = from == offset || to == end ? CONTENT_DIRTY : CHILD_DIRTY;\n                    if (from == startInside && to == endInside &&\n                        (child.contentLost || child.dom.parentNode != this.contentDOM))\n                        child.dirty = NODE_DIRTY;\n                    else\n                        child.markDirty(from - startInside, to - startInside);\n                    return;\n                }\n                else {\n                    child.dirty = child.dom == child.contentDOM && child.dom.parentNode == this.contentDOM && !child.children.length\n                        ? CONTENT_DIRTY : NODE_DIRTY;\n                }\n            }\n            offset = end;\n        }\n        this.dirty = CONTENT_DIRTY;\n    }\n    markParentsDirty() {\n        let level = 1;\n        for (let node = this.parent; node; node = node.parent, level++) {\n            let dirty = level == 1 ? CONTENT_DIRTY : CHILD_DIRTY;\n            if (node.dirty < dirty)\n                node.dirty = dirty;\n        }\n    }\n    get domAtom() { return false; }\n    get ignoreForCoords() { return false; }\n}\n// A widget desc represents a widget decoration, which is a DOM node\n// drawn between the document nodes.\nclass WidgetViewDesc extends ViewDesc {\n    constructor(parent, widget, view, pos) {\n        let self, dom = widget.type.toDOM;\n        if (typeof dom == \"function\")\n            dom = dom(view, () => {\n                if (!self)\n                    return pos;\n                if (self.parent)\n                    return self.parent.posBeforeChild(self);\n            });\n        if (!widget.type.spec.raw) {\n            if (dom.nodeType != 1) {\n                let wrap = document.createElement(\"span\");\n                wrap.appendChild(dom);\n                dom = wrap;\n            }\n            dom.contentEditable = \"false\";\n            dom.classList.add(\"ProseMirror-widget\");\n        }\n        super(parent, [], dom, null);\n        this.widget = widget;\n        this.widget = widget;\n        self = this;\n    }\n    matchesWidget(widget) {\n        return this.dirty == NOT_DIRTY && widget.type.eq(this.widget.type);\n    }\n    parseRule() { return { ignore: true }; }\n    stopEvent(event) {\n        let stop = this.widget.spec.stopEvent;\n        return stop ? stop(event) : false;\n    }\n    ignoreMutation(mutation) {\n        return mutation.type != \"selection\" || this.widget.spec.ignoreSelection;\n    }\n    destroy() {\n        this.widget.type.destroy(this.dom);\n        super.destroy();\n    }\n    get domAtom() { return true; }\n    get side() { return this.widget.type.side; }\n}\nclass CompositionViewDesc extends ViewDesc {\n    constructor(parent, dom, textDOM, text) {\n        super(parent, [], dom, null);\n        this.textDOM = textDOM;\n        this.text = text;\n    }\n    get size() { return this.text.length; }\n    localPosFromDOM(dom, offset) {\n        if (dom != this.textDOM)\n            return this.posAtStart + (offset ? this.size : 0);\n        return this.posAtStart + offset;\n    }\n    domFromPos(pos) {\n        return { node: this.textDOM, offset: pos };\n    }\n    ignoreMutation(mut) {\n        return mut.type === 'characterData' && mut.target.nodeValue == mut.oldValue;\n    }\n}\n// A mark desc represents a mark. May have multiple children,\n// depending on how the mark is split. Note that marks are drawn using\n// a fixed nesting order, for simplicity and predictability, so in\n// some cases they will be split more often than would appear\n// necessary.\nclass MarkViewDesc extends ViewDesc {\n    constructor(parent, mark, dom, contentDOM) {\n        super(parent, [], dom, contentDOM);\n        this.mark = mark;\n    }\n    static create(parent, mark, inline, view) {\n        let custom = view.nodeViews[mark.type.name];\n        let spec = custom && custom(mark, view, inline);\n        if (!spec || !spec.dom)\n            spec = DOMSerializer.renderSpec(document, mark.type.spec.toDOM(mark, inline));\n        return new MarkViewDesc(parent, mark, spec.dom, spec.contentDOM || spec.dom);\n    }\n    parseRule() {\n        if ((this.dirty & NODE_DIRTY) || this.mark.type.spec.reparseInView)\n            return null;\n        return { mark: this.mark.type.name, attrs: this.mark.attrs, contentElement: this.contentDOM || undefined };\n    }\n    matchesMark(mark) { return this.dirty != NODE_DIRTY && this.mark.eq(mark); }\n    markDirty(from, to) {\n        super.markDirty(from, to);\n        // Move dirty info to nearest node view\n        if (this.dirty != NOT_DIRTY) {\n            let parent = this.parent;\n            while (!parent.node)\n                parent = parent.parent;\n            if (parent.dirty < this.dirty)\n                parent.dirty = this.dirty;\n            this.dirty = NOT_DIRTY;\n        }\n    }\n    slice(from, to, view) {\n        let copy = MarkViewDesc.create(this.parent, this.mark, true, view);\n        let nodes = this.children, size = this.size;\n        if (to < size)\n            nodes = replaceNodes(nodes, to, size, view);\n        if (from > 0)\n            nodes = replaceNodes(nodes, 0, from, view);\n        for (let i = 0; i < nodes.length; i++)\n            nodes[i].parent = copy;\n        copy.children = nodes;\n        return copy;\n    }\n}\n// Node view descs are the main, most common type of view desc, and\n// correspond to an actual node in the document. Unlike mark descs,\n// they populate their child array themselves.\nclass NodeViewDesc extends ViewDesc {\n    constructor(parent, node, outerDeco, innerDeco, dom, contentDOM, nodeDOM, view, pos) {\n        super(parent, [], dom, contentDOM);\n        this.node = node;\n        this.outerDeco = outerDeco;\n        this.innerDeco = innerDeco;\n        this.nodeDOM = nodeDOM;\n        if (contentDOM)\n            this.updateChildren(view, pos);\n    }\n    // By default, a node is rendered using the `toDOM` method from the\n    // node type spec. But client code can use the `nodeViews` spec to\n    // supply a custom node view, which can influence various aspects of\n    // the way the node works.\n    //\n    // (Using subclassing for this was intentionally decided against,\n    // since it'd require exposing a whole slew of finicky\n    // implementation details to the user code that they probably will\n    // never need.)\n    static create(parent, node, outerDeco, innerDeco, view, pos) {\n        let custom = view.nodeViews[node.type.name], descObj;\n        let spec = custom && custom(node, view, () => {\n            // (This is a function that allows the custom view to find its\n            // own position)\n            if (!descObj)\n                return pos;\n            if (descObj.parent)\n                return descObj.parent.posBeforeChild(descObj);\n        }, outerDeco, innerDeco);\n        let dom = spec && spec.dom, contentDOM = spec && spec.contentDOM;\n        if (node.isText) {\n            if (!dom)\n                dom = document.createTextNode(node.text);\n            else if (dom.nodeType != 3)\n                throw new RangeError(\"Text must be rendered as a DOM text node\");\n        }\n        else if (!dom) {\n            ({ dom, contentDOM } = DOMSerializer.renderSpec(document, node.type.spec.toDOM(node)));\n        }\n        if (!contentDOM && !node.isText && dom.nodeName != \"BR\") { // Chrome gets confused by <br contenteditable=false>\n            if (!dom.hasAttribute(\"contenteditable\"))\n                dom.contentEditable = \"false\";\n            if (node.type.spec.draggable)\n                dom.draggable = true;\n        }\n        let nodeDOM = dom;\n        dom = applyOuterDeco(dom, outerDeco, node);\n        if (spec)\n            return descObj = new CustomNodeViewDesc(parent, node, outerDeco, innerDeco, dom, contentDOM || null, nodeDOM, spec, view, pos + 1);\n        else if (node.isText)\n            return new TextViewDesc(parent, node, outerDeco, innerDeco, dom, nodeDOM, view);\n        else\n            return new NodeViewDesc(parent, node, outerDeco, innerDeco, dom, contentDOM || null, nodeDOM, view, pos + 1);\n    }\n    parseRule() {\n        // Experimental kludge to allow opt-in re-parsing of nodes\n        if (this.node.type.spec.reparseInView)\n            return null;\n        // FIXME the assumption that this can always return the current\n        // attrs means that if the user somehow manages to change the\n        // attrs in the dom, that won't be picked up. Not entirely sure\n        // whether this is a problem\n        let rule = { node: this.node.type.name, attrs: this.node.attrs };\n        if (this.node.type.whitespace == \"pre\")\n            rule.preserveWhitespace = \"full\";\n        if (!this.contentDOM) {\n            rule.getContent = () => this.node.content;\n        }\n        else if (!this.contentLost) {\n            rule.contentElement = this.contentDOM;\n        }\n        else {\n            // Chrome likes to randomly recreate parent nodes when\n            // backspacing things. When that happens, this tries to find the\n            // new parent.\n            for (let i = this.children.length - 1; i >= 0; i--) {\n                let child = this.children[i];\n                if (this.dom.contains(child.dom.parentNode)) {\n                    rule.contentElement = child.dom.parentNode;\n                    break;\n                }\n            }\n            if (!rule.contentElement)\n                rule.getContent = () => Fragment.empty;\n        }\n        return rule;\n    }\n    matchesNode(node, outerDeco, innerDeco) {\n        return this.dirty == NOT_DIRTY && node.eq(this.node) &&\n            sameOuterDeco(outerDeco, this.outerDeco) && innerDeco.eq(this.innerDeco);\n    }\n    get size() { return this.node.nodeSize; }\n    get border() { return this.node.isLeaf ? 0 : 1; }\n    // Syncs `this.children` to match `this.node.content` and the local\n    // decorations, possibly introducing nesting for marks. Then, in a\n    // separate step, syncs the DOM inside `this.contentDOM` to\n    // `this.children`.\n    updateChildren(view, pos) {\n        let inline = this.node.inlineContent, off = pos;\n        let composition = view.composing ? this.localCompositionInfo(view, pos) : null;\n        let localComposition = composition && composition.pos > -1 ? composition : null;\n        let compositionInChild = composition && composition.pos < 0;\n        let updater = new ViewTreeUpdater(this, localComposition && localComposition.node);\n        iterDeco(this.node, this.innerDeco, (widget, i, insideNode) => {\n            if (widget.spec.marks)\n                updater.syncToMarks(widget.spec.marks, inline, view);\n            else if (widget.type.side >= 0 && !insideNode)\n                updater.syncToMarks(i == this.node.childCount ? Mark.none : this.node.child(i).marks, inline, view);\n            // If the next node is a desc matching this widget, reuse it,\n            // otherwise insert the widget as a new view desc.\n            updater.placeWidget(widget, view, off);\n        }, (child, outerDeco, innerDeco, i) => {\n            // Make sure the wrapping mark descs match the node's marks.\n            updater.syncToMarks(child.marks, inline, view);\n            // Try several strategies for drawing this node\n            let compIndex;\n            if (updater.findNodeMatch(child, outerDeco, innerDeco, i)) ;\n            else if (compositionInChild && view.state.selection.from > off &&\n                view.state.selection.to < off + child.nodeSize &&\n                (compIndex = updater.findIndexWithChild(composition.node)) > -1 &&\n                updater.updateNodeAt(child, outerDeco, innerDeco, compIndex, view)) ;\n            else if (updater.updateNextNode(child, outerDeco, innerDeco, view, i)) ;\n            else {\n                // Add it as a new view\n                updater.addNode(child, outerDeco, innerDeco, view, off);\n            }\n            off += child.nodeSize;\n        });\n        // Drop all remaining descs after the current position.\n        updater.syncToMarks([], inline, view);\n        if (this.node.isTextblock)\n            updater.addTextblockHacks();\n        updater.destroyRest();\n        // Sync the DOM if anything changed\n        if (updater.changed || this.dirty == CONTENT_DIRTY) {\n            // May have to protect focused DOM from being changed if a composition is active\n            if (localComposition)\n                this.protectLocalComposition(view, localComposition);\n            renderDescs(this.contentDOM, this.children, view);\n            if (ios)\n                iosHacks(this.dom);\n        }\n    }\n    localCompositionInfo(view, pos) {\n        // Only do something if both the selection and a focused text node\n        // are inside of this node\n        let { from, to } = view.state.selection;\n        if (!(view.state.selection instanceof TextSelection) || from < pos || to > pos + this.node.content.size)\n            return null;\n        let sel = view.domSelection();\n        let textNode = nearbyTextNode(sel.focusNode, sel.focusOffset);\n        if (!textNode || !this.dom.contains(textNode.parentNode))\n            return null;\n        if (this.node.inlineContent) {\n            // Find the text in the focused node in the node, stop if it's not\n            // there (may have been modified through other means, in which\n            // case it should overwritten)\n            let text = textNode.nodeValue;\n            let textPos = findTextInFragment(this.node.content, text, from - pos, to - pos);\n            return textPos < 0 ? null : { node: textNode, pos: textPos, text };\n        }\n        else {\n            return { node: textNode, pos: -1, text: \"\" };\n        }\n    }\n    protectLocalComposition(view, { node, pos, text }) {\n        // The node is already part of a local view desc, leave it there\n        if (this.getDesc(node))\n            return;\n        // Create a composition view for the orphaned nodes\n        let topNode = node;\n        for (;; topNode = topNode.parentNode) {\n            if (topNode.parentNode == this.contentDOM)\n                break;\n            while (topNode.previousSibling)\n                topNode.parentNode.removeChild(topNode.previousSibling);\n            while (topNode.nextSibling)\n                topNode.parentNode.removeChild(topNode.nextSibling);\n            if (topNode.pmViewDesc)\n                topNode.pmViewDesc = undefined;\n        }\n        let desc = new CompositionViewDesc(this, topNode, node, text);\n        view.input.compositionNodes.push(desc);\n        // Patch up this.children to contain the composition view\n        this.children = replaceNodes(this.children, pos, pos + text.length, view, desc);\n    }\n    // If this desc must be updated to match the given node decoration,\n    // do so and return true.\n    update(node, outerDeco, innerDeco, view) {\n        if (this.dirty == NODE_DIRTY ||\n            !node.sameMarkup(this.node))\n            return false;\n        this.updateInner(node, outerDeco, innerDeco, view);\n        return true;\n    }\n    updateInner(node, outerDeco, innerDeco, view) {\n        this.updateOuterDeco(outerDeco);\n        this.node = node;\n        this.innerDeco = innerDeco;\n        if (this.contentDOM)\n            this.updateChildren(view, this.posAtStart);\n        this.dirty = NOT_DIRTY;\n    }\n    updateOuterDeco(outerDeco) {\n        if (sameOuterDeco(outerDeco, this.outerDeco))\n            return;\n        let needsWrap = this.nodeDOM.nodeType != 1;\n        let oldDOM = this.dom;\n        this.dom = patchOuterDeco(this.dom, this.nodeDOM, computeOuterDeco(this.outerDeco, this.node, needsWrap), computeOuterDeco(outerDeco, this.node, needsWrap));\n        if (this.dom != oldDOM) {\n            oldDOM.pmViewDesc = undefined;\n            this.dom.pmViewDesc = this;\n        }\n        this.outerDeco = outerDeco;\n    }\n    // Mark this node as being the selected node.\n    selectNode() {\n        if (this.nodeDOM.nodeType == 1)\n            this.nodeDOM.classList.add(\"ProseMirror-selectednode\");\n        if (this.contentDOM || !this.node.type.spec.draggable)\n            this.dom.draggable = true;\n    }\n    // Remove selected node marking from this node.\n    deselectNode() {\n        if (this.nodeDOM.nodeType == 1)\n            this.nodeDOM.classList.remove(\"ProseMirror-selectednode\");\n        if (this.contentDOM || !this.node.type.spec.draggable)\n            this.dom.removeAttribute(\"draggable\");\n    }\n    get domAtom() { return this.node.isAtom; }\n}\n// Create a view desc for the top-level document node, to be exported\n// and used by the view class.\nfunction docViewDesc(doc, outerDeco, innerDeco, dom, view) {\n    applyOuterDeco(dom, outerDeco, doc);\n    return new NodeViewDesc(undefined, doc, outerDeco, innerDeco, dom, dom, dom, view, 0);\n}\nclass TextViewDesc extends NodeViewDesc {\n    constructor(parent, node, outerDeco, innerDeco, dom, nodeDOM, view) {\n        super(parent, node, outerDeco, innerDeco, dom, null, nodeDOM, view, 0);\n    }\n    parseRule() {\n        let skip = this.nodeDOM.parentNode;\n        while (skip && skip != this.dom && !skip.pmIsDeco)\n            skip = skip.parentNode;\n        return { skip: (skip || true) };\n    }\n    update(node, outerDeco, innerDeco, view) {\n        if (this.dirty == NODE_DIRTY || (this.dirty != NOT_DIRTY && !this.inParent()) ||\n            !node.sameMarkup(this.node))\n            return false;\n        this.updateOuterDeco(outerDeco);\n        if ((this.dirty != NOT_DIRTY || node.text != this.node.text) && node.text != this.nodeDOM.nodeValue) {\n            this.nodeDOM.nodeValue = node.text;\n            if (view.trackWrites == this.nodeDOM)\n                view.trackWrites = null;\n        }\n        this.node = node;\n        this.dirty = NOT_DIRTY;\n        return true;\n    }\n    inParent() {\n        let parentDOM = this.parent.contentDOM;\n        for (let n = this.nodeDOM; n; n = n.parentNode)\n            if (n == parentDOM)\n                return true;\n        return false;\n    }\n    domFromPos(pos) {\n        return { node: this.nodeDOM, offset: pos };\n    }\n    localPosFromDOM(dom, offset, bias) {\n        if (dom == this.nodeDOM)\n            return this.posAtStart + Math.min(offset, this.node.text.length);\n        return super.localPosFromDOM(dom, offset, bias);\n    }\n    ignoreMutation(mutation) {\n        return mutation.type != \"characterData\" && mutation.type != \"selection\";\n    }\n    slice(from, to, view) {\n        let node = this.node.cut(from, to), dom = document.createTextNode(node.text);\n        return new TextViewDesc(this.parent, node, this.outerDeco, this.innerDeco, dom, dom, view);\n    }\n    markDirty(from, to) {\n        super.markDirty(from, to);\n        if (this.dom != this.nodeDOM && (from == 0 || to == this.nodeDOM.nodeValue.length))\n            this.dirty = NODE_DIRTY;\n    }\n    get domAtom() { return false; }\n}\n// A dummy desc used to tag trailing BR or IMG nodes created to work\n// around contentEditable terribleness.\nclass TrailingHackViewDesc extends ViewDesc {\n    parseRule() { return { ignore: true }; }\n    matchesHack(nodeName) { return this.dirty == NOT_DIRTY && this.dom.nodeName == nodeName; }\n    get domAtom() { return true; }\n    get ignoreForCoords() { return this.dom.nodeName == \"IMG\"; }\n}\n// A separate subclass is used for customized node views, so that the\n// extra checks only have to be made for nodes that are actually\n// customized.\nclass CustomNodeViewDesc extends NodeViewDesc {\n    constructor(parent, node, outerDeco, innerDeco, dom, contentDOM, nodeDOM, spec, view, pos) {\n        super(parent, node, outerDeco, innerDeco, dom, contentDOM, nodeDOM, view, pos);\n        this.spec = spec;\n    }\n    // A custom `update` method gets to decide whether the update goes\n    // through. If it does, and there's a `contentDOM` node, our logic\n    // updates the children.\n    update(node, outerDeco, innerDeco, view) {\n        if (this.dirty == NODE_DIRTY)\n            return false;\n        if (this.spec.update) {\n            let result = this.spec.update(node, outerDeco, innerDeco);\n            if (result)\n                this.updateInner(node, outerDeco, innerDeco, view);\n            return result;\n        }\n        else if (!this.contentDOM && !node.isLeaf) {\n            return false;\n        }\n        else {\n            return super.update(node, outerDeco, innerDeco, view);\n        }\n    }\n    selectNode() {\n        this.spec.selectNode ? this.spec.selectNode() : super.selectNode();\n    }\n    deselectNode() {\n        this.spec.deselectNode ? this.spec.deselectNode() : super.deselectNode();\n    }\n    setSelection(anchor, head, root, force) {\n        this.spec.setSelection ? this.spec.setSelection(anchor, head, root)\n            : super.setSelection(anchor, head, root, force);\n    }\n    destroy() {\n        if (this.spec.destroy)\n            this.spec.destroy();\n        super.destroy();\n    }\n    stopEvent(event) {\n        return this.spec.stopEvent ? this.spec.stopEvent(event) : false;\n    }\n    ignoreMutation(mutation) {\n        return this.spec.ignoreMutation ? this.spec.ignoreMutation(mutation) : super.ignoreMutation(mutation);\n    }\n}\n// Sync the content of the given DOM node with the nodes associated\n// with the given array of view descs, recursing into mark descs\n// because this should sync the subtree for a whole node at a time.\nfunction renderDescs(parentDOM, descs, view) {\n    let dom = parentDOM.firstChild, written = false;\n    for (let i = 0; i < descs.length; i++) {\n        let desc = descs[i], childDOM = desc.dom;\n        if (childDOM.parentNode == parentDOM) {\n            while (childDOM != dom) {\n                dom = rm(dom);\n                written = true;\n            }\n            dom = dom.nextSibling;\n        }\n        else {\n            written = true;\n            parentDOM.insertBefore(childDOM, dom);\n        }\n        if (desc instanceof MarkViewDesc) {\n            let pos = dom ? dom.previousSibling : parentDOM.lastChild;\n            renderDescs(desc.contentDOM, desc.children, view);\n            dom = pos ? pos.nextSibling : parentDOM.firstChild;\n        }\n    }\n    while (dom) {\n        dom = rm(dom);\n        written = true;\n    }\n    if (written && view.trackWrites == parentDOM)\n        view.trackWrites = null;\n}\nconst OuterDecoLevel = function (nodeName) {\n    if (nodeName)\n        this.nodeName = nodeName;\n};\nOuterDecoLevel.prototype = Object.create(null);\nconst noDeco = [new OuterDecoLevel];\nfunction computeOuterDeco(outerDeco, node, needsWrap) {\n    if (outerDeco.length == 0)\n        return noDeco;\n    let top = needsWrap ? noDeco[0] : new OuterDecoLevel, result = [top];\n    for (let i = 0; i < outerDeco.length; i++) {\n        let attrs = outerDeco[i].type.attrs;\n        if (!attrs)\n            continue;\n        if (attrs.nodeName)\n            result.push(top = new OuterDecoLevel(attrs.nodeName));\n        for (let name in attrs) {\n            let val = attrs[name];\n            if (val == null)\n                continue;\n            if (needsWrap && result.length == 1)\n                result.push(top = new OuterDecoLevel(node.isInline ? \"span\" : \"div\"));\n            if (name == \"class\")\n                top.class = (top.class ? top.class + \" \" : \"\") + val;\n            else if (name == \"style\")\n                top.style = (top.style ? top.style + \";\" : \"\") + val;\n            else if (name != \"nodeName\")\n                top[name] = val;\n        }\n    }\n    return result;\n}\nfunction patchOuterDeco(outerDOM, nodeDOM, prevComputed, curComputed) {\n    // Shortcut for trivial case\n    if (prevComputed == noDeco && curComputed == noDeco)\n        return nodeDOM;\n    let curDOM = nodeDOM;\n    for (let i = 0; i < curComputed.length; i++) {\n        let deco = curComputed[i], prev = prevComputed[i];\n        if (i) {\n            let parent;\n            if (prev && prev.nodeName == deco.nodeName && curDOM != outerDOM &&\n                (parent = curDOM.parentNode) && parent.nodeName.toLowerCase() == deco.nodeName) {\n                curDOM = parent;\n            }\n            else {\n                parent = document.createElement(deco.nodeName);\n                parent.pmIsDeco = true;\n                parent.appendChild(curDOM);\n                prev = noDeco[0];\n                curDOM = parent;\n            }\n        }\n        patchAttributes(curDOM, prev || noDeco[0], deco);\n    }\n    return curDOM;\n}\nfunction patchAttributes(dom, prev, cur) {\n    for (let name in prev)\n        if (name != \"class\" && name != \"style\" && name != \"nodeName\" && !(name in cur))\n            dom.removeAttribute(name);\n    for (let name in cur)\n        if (name != \"class\" && name != \"style\" && name != \"nodeName\" && cur[name] != prev[name])\n            dom.setAttribute(name, cur[name]);\n    if (prev.class != cur.class) {\n        let prevList = prev.class ? prev.class.split(\" \").filter(Boolean) : [];\n        let curList = cur.class ? cur.class.split(\" \").filter(Boolean) : [];\n        for (let i = 0; i < prevList.length; i++)\n            if (curList.indexOf(prevList[i]) == -1)\n                dom.classList.remove(prevList[i]);\n        for (let i = 0; i < curList.length; i++)\n            if (prevList.indexOf(curList[i]) == -1)\n                dom.classList.add(curList[i]);\n        if (dom.classList.length == 0)\n            dom.removeAttribute(\"class\");\n    }\n    if (prev.style != cur.style) {\n        if (prev.style) {\n            let prop = /\\s*([\\w\\-\\xa1-\\uffff]+)\\s*:(?:\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|\\(.*?\\)|[^;])*/g, m;\n            while (m = prop.exec(prev.style))\n                dom.style.removeProperty(m[1]);\n        }\n        if (cur.style)\n            dom.style.cssText += cur.style;\n    }\n}\nfunction applyOuterDeco(dom, deco, node) {\n    return patchOuterDeco(dom, dom, noDeco, computeOuterDeco(deco, node, dom.nodeType != 1));\n}\nfunction sameOuterDeco(a, b) {\n    if (a.length != b.length)\n        return false;\n    for (let i = 0; i < a.length; i++)\n        if (!a[i].type.eq(b[i].type))\n            return false;\n    return true;\n}\n// Remove a DOM node and return its next sibling.\nfunction rm(dom) {\n    let next = dom.nextSibling;\n    dom.parentNode.removeChild(dom);\n    return next;\n}\n// Helper class for incrementally updating a tree of mark descs and\n// the widget and node descs inside of them.\nclass ViewTreeUpdater {\n    constructor(top, lock) {\n        this.lock = lock;\n        // Index into `this.top`'s child array, represents the current\n        // update position.\n        this.index = 0;\n        // When entering a mark, the current top and index are pushed\n        // onto this.\n        this.stack = [];\n        // Tracks whether anything was changed\n        this.changed = false;\n        this.top = top;\n        this.preMatch = preMatch(top.node.content, top);\n    }\n    // Destroy and remove the children between the given indices in\n    // `this.top`.\n    destroyBetween(start, end) {\n        if (start == end)\n            return;\n        for (let i = start; i < end; i++)\n            this.top.children[i].destroy();\n        this.top.children.splice(start, end - start);\n        this.changed = true;\n    }\n    // Destroy all remaining children in `this.top`.\n    destroyRest() {\n        this.destroyBetween(this.index, this.top.children.length);\n    }\n    // Sync the current stack of mark descs with the given array of\n    // marks, reusing existing mark descs when possible.\n    syncToMarks(marks, inline, view) {\n        let keep = 0, depth = this.stack.length >> 1;\n        let maxKeep = Math.min(depth, marks.length);\n        while (keep < maxKeep &&\n            (keep == depth - 1 ? this.top : this.stack[(keep + 1) << 1])\n                .matchesMark(marks[keep]) && marks[keep].type.spec.spanning !== false)\n            keep++;\n        while (keep < depth) {\n            this.destroyRest();\n            this.top.dirty = NOT_DIRTY;\n            this.index = this.stack.pop();\n            this.top = this.stack.pop();\n            depth--;\n        }\n        while (depth < marks.length) {\n            this.stack.push(this.top, this.index + 1);\n            let found = -1;\n            for (let i = this.index; i < Math.min(this.index + 3, this.top.children.length); i++) {\n                if (this.top.children[i].matchesMark(marks[depth])) {\n                    found = i;\n                    break;\n                }\n            }\n            if (found > -1) {\n                if (found > this.index) {\n                    this.changed = true;\n                    this.destroyBetween(this.index, found);\n                }\n                this.top = this.top.children[this.index];\n            }\n            else {\n                let markDesc = MarkViewDesc.create(this.top, marks[depth], inline, view);\n                this.top.children.splice(this.index, 0, markDesc);\n                this.top = markDesc;\n                this.changed = true;\n            }\n            this.index = 0;\n            depth++;\n        }\n    }\n    // Try to find a node desc matching the given data. Skip over it and\n    // return true when successful.\n    findNodeMatch(node, outerDeco, innerDeco, index) {\n        let found = -1, targetDesc;\n        if (index >= this.preMatch.index &&\n            (targetDesc = this.preMatch.matches[index - this.preMatch.index]).parent == this.top &&\n            targetDesc.matchesNode(node, outerDeco, innerDeco)) {\n            found = this.top.children.indexOf(targetDesc, this.index);\n        }\n        else {\n            for (let i = this.index, e = Math.min(this.top.children.length, i + 5); i < e; i++) {\n                let child = this.top.children[i];\n                if (child.matchesNode(node, outerDeco, innerDeco) && !this.preMatch.matched.has(child)) {\n                    found = i;\n                    break;\n                }\n            }\n        }\n        if (found < 0)\n            return false;\n        this.destroyBetween(this.index, found);\n        this.index++;\n        return true;\n    }\n    updateNodeAt(node, outerDeco, innerDeco, index, view) {\n        let child = this.top.children[index];\n        if (child.dirty == NODE_DIRTY && child.dom == child.contentDOM)\n            child.dirty = CONTENT_DIRTY;\n        if (!child.update(node, outerDeco, innerDeco, view))\n            return false;\n        this.destroyBetween(this.index, index);\n        this.index = index + 1;\n        return true;\n    }\n    findIndexWithChild(domNode) {\n        for (;;) {\n            let parent = domNode.parentNode;\n            if (!parent)\n                return -1;\n            if (parent == this.top.contentDOM) {\n                let desc = domNode.pmViewDesc;\n                if (desc)\n                    for (let i = this.index; i < this.top.children.length; i++) {\n                        if (this.top.children[i] == desc)\n                            return i;\n                    }\n                return -1;\n            }\n            domNode = parent;\n        }\n    }\n    // Try to update the next node, if any, to the given data. Checks\n    // pre-matches to avoid overwriting nodes that could still be used.\n    updateNextNode(node, outerDeco, innerDeco, view, index) {\n        for (let i = this.index; i < this.top.children.length; i++) {\n            let next = this.top.children[i];\n            if (next instanceof NodeViewDesc) {\n                let preMatch = this.preMatch.matched.get(next);\n                if (preMatch != null && preMatch != index)\n                    return false;\n                let nextDOM = next.dom;\n                // Can't update if nextDOM is or contains this.lock, except if\n                // it's a text node whose content already matches the new text\n                // and whose decorations match the new ones.\n                let locked = this.lock && (nextDOM == this.lock || nextDOM.nodeType == 1 && nextDOM.contains(this.lock.parentNode)) &&\n                    !(node.isText && next.node && next.node.isText && next.nodeDOM.nodeValue == node.text &&\n                        next.dirty != NODE_DIRTY && sameOuterDeco(outerDeco, next.outerDeco));\n                if (!locked && next.update(node, outerDeco, innerDeco, view)) {\n                    this.destroyBetween(this.index, i);\n                    if (next.dom != nextDOM)\n                        this.changed = true;\n                    this.index++;\n                    return true;\n                }\n                break;\n            }\n        }\n        return false;\n    }\n    // Insert the node as a newly created node desc.\n    addNode(node, outerDeco, innerDeco, view, pos) {\n        this.top.children.splice(this.index++, 0, NodeViewDesc.create(this.top, node, outerDeco, innerDeco, view, pos));\n        this.changed = true;\n    }\n    placeWidget(widget, view, pos) {\n        let next = this.index < this.top.children.length ? this.top.children[this.index] : null;\n        if (next && next.matchesWidget(widget) &&\n            (widget == next.widget || !next.widget.type.toDOM.parentNode)) {\n            this.index++;\n        }\n        else {\n            let desc = new WidgetViewDesc(this.top, widget, view, pos);\n            this.top.children.splice(this.index++, 0, desc);\n            this.changed = true;\n        }\n    }\n    // Make sure a textblock looks and behaves correctly in\n    // contentEditable.\n    addTextblockHacks() {\n        let lastChild = this.top.children[this.index - 1], parent = this.top;\n        while (lastChild instanceof MarkViewDesc) {\n            parent = lastChild;\n            lastChild = parent.children[parent.children.length - 1];\n        }\n        if (!lastChild || // Empty textblock\n            !(lastChild instanceof TextViewDesc) ||\n            /\\n$/.test(lastChild.node.text)) {\n            // Avoid bugs in Safari's cursor drawing (#1165) and Chrome's mouse selection (#1152)\n            if ((safari || chrome) && lastChild && lastChild.dom.contentEditable == \"false\")\n                this.addHackNode(\"IMG\", parent);\n            this.addHackNode(\"BR\", this.top);\n        }\n    }\n    addHackNode(nodeName, parent) {\n        if (parent == this.top && this.index < parent.children.length && parent.children[this.index].matchesHack(nodeName)) {\n            this.index++;\n        }\n        else {\n            let dom = document.createElement(nodeName);\n            if (nodeName == \"IMG\") {\n                dom.className = \"ProseMirror-separator\";\n                dom.alt = \"\";\n            }\n            if (nodeName == \"BR\")\n                dom.className = \"ProseMirror-trailingBreak\";\n            let hack = new TrailingHackViewDesc(this.top, [], dom, null);\n            if (parent != this.top)\n                parent.children.push(hack);\n            else\n                parent.children.splice(this.index++, 0, hack);\n            this.changed = true;\n        }\n    }\n}\n// Iterate from the end of the fragment and array of descs to find\n// directly matching ones, in order to avoid overeagerly reusing those\n// for other nodes. Returns the fragment index of the first node that\n// is part of the sequence of matched nodes at the end of the\n// fragment.\nfunction preMatch(frag, parentDesc) {\n    let curDesc = parentDesc, descI = curDesc.children.length;\n    let fI = frag.childCount, matched = new Map, matches = [];\n    outer: while (fI > 0) {\n        let desc;\n        for (;;) {\n            if (descI) {\n                let next = curDesc.children[descI - 1];\n                if (next instanceof MarkViewDesc) {\n                    curDesc = next;\n                    descI = next.children.length;\n                }\n                else {\n                    desc = next;\n                    descI--;\n                    break;\n                }\n            }\n            else if (curDesc == parentDesc) {\n                break outer;\n            }\n            else {\n                // FIXME\n                descI = curDesc.parent.children.indexOf(curDesc);\n                curDesc = curDesc.parent;\n            }\n        }\n        let node = desc.node;\n        if (!node)\n            continue;\n        if (node != frag.child(fI - 1))\n            break;\n        --fI;\n        matched.set(desc, fI);\n        matches.push(desc);\n    }\n    return { index: fI, matched, matches: matches.reverse() };\n}\nfunction compareSide(a, b) {\n    return a.type.side - b.type.side;\n}\n// This function abstracts iterating over the nodes and decorations in\n// a fragment. Calls `onNode` for each node, with its local and child\n// decorations. Splits text nodes when there is a decoration starting\n// or ending inside of them. Calls `onWidget` for each widget.\nfunction iterDeco(parent, deco, onWidget, onNode) {\n    let locals = deco.locals(parent), offset = 0;\n    // Simple, cheap variant for when there are no local decorations\n    if (locals.length == 0) {\n        for (let i = 0; i < parent.childCount; i++) {\n            let child = parent.child(i);\n            onNode(child, locals, deco.forChild(offset, child), i);\n            offset += child.nodeSize;\n        }\n        return;\n    }\n    let decoIndex = 0, active = [], restNode = null;\n    for (let parentIndex = 0;;) {\n        if (decoIndex < locals.length && locals[decoIndex].to == offset) {\n            let widget = locals[decoIndex++], widgets;\n            while (decoIndex < locals.length && locals[decoIndex].to == offset)\n                (widgets || (widgets = [widget])).push(locals[decoIndex++]);\n            if (widgets) {\n                widgets.sort(compareSide);\n                for (let i = 0; i < widgets.length; i++)\n                    onWidget(widgets[i], parentIndex, !!restNode);\n            }\n            else {\n                onWidget(widget, parentIndex, !!restNode);\n            }\n        }\n        let child, index;\n        if (restNode) {\n            index = -1;\n            child = restNode;\n            restNode = null;\n        }\n        else if (parentIndex < parent.childCount) {\n            index = parentIndex;\n            child = parent.child(parentIndex++);\n        }\n        else {\n            break;\n        }\n        for (let i = 0; i < active.length; i++)\n            if (active[i].to <= offset)\n                active.splice(i--, 1);\n        while (decoIndex < locals.length && locals[decoIndex].from <= offset && locals[decoIndex].to > offset)\n            active.push(locals[decoIndex++]);\n        let end = offset + child.nodeSize;\n        if (child.isText) {\n            let cutAt = end;\n            if (decoIndex < locals.length && locals[decoIndex].from < cutAt)\n                cutAt = locals[decoIndex].from;\n            for (let i = 0; i < active.length; i++)\n                if (active[i].to < cutAt)\n                    cutAt = active[i].to;\n            if (cutAt < end) {\n                restNode = child.cut(cutAt - offset);\n                child = child.cut(0, cutAt - offset);\n                end = cutAt;\n                index = -1;\n            }\n        }\n        let outerDeco = child.isInline && !child.isLeaf ? active.filter(d => !d.inline) : active.slice();\n        onNode(child, outerDeco, deco.forChild(offset, child), index);\n        offset = end;\n    }\n}\n// List markers in Mobile Safari will mysteriously disappear\n// sometimes. This works around that.\nfunction iosHacks(dom) {\n    if (dom.nodeName == \"UL\" || dom.nodeName == \"OL\") {\n        let oldCSS = dom.style.cssText;\n        dom.style.cssText = oldCSS + \"; list-style: square !important\";\n        window.getComputedStyle(dom).listStyle;\n        dom.style.cssText = oldCSS;\n    }\n}\nfunction nearbyTextNode(node, offset) {\n    for (;;) {\n        if (node.nodeType == 3)\n            return node;\n        if (node.nodeType == 1 && offset > 0) {\n            if (node.childNodes.length > offset && node.childNodes[offset].nodeType == 3)\n                return node.childNodes[offset];\n            node = node.childNodes[offset - 1];\n            offset = nodeSize(node);\n        }\n        else if (node.nodeType == 1 && offset < node.childNodes.length) {\n            node = node.childNodes[offset];\n            offset = 0;\n        }\n        else {\n            return null;\n        }\n    }\n}\n// Find a piece of text in an inline fragment, overlapping from-to\nfunction findTextInFragment(frag, text, from, to) {\n    for (let i = 0, pos = 0; i < frag.childCount && pos <= to;) {\n        let child = frag.child(i++), childStart = pos;\n        pos += child.nodeSize;\n        if (!child.isText)\n            continue;\n        let str = child.text;\n        while (i < frag.childCount) {\n            let next = frag.child(i++);\n            pos += next.nodeSize;\n            if (!next.isText)\n                break;\n            str += next.text;\n        }\n        if (pos >= from) {\n            let found = childStart < to ? str.lastIndexOf(text, to - childStart - 1) : -1;\n            if (found >= 0 && found + text.length + childStart >= from)\n                return childStart + found;\n            if (from == to && str.length >= (to + text.length) - childStart &&\n                str.slice(to - childStart, to - childStart + text.length) == text)\n                return to;\n        }\n    }\n    return -1;\n}\n// Replace range from-to in an array of view descs with replacement\n// (may be null to just delete). This goes very much against the grain\n// of the rest of this code, which tends to create nodes with the\n// right shape in one go, rather than messing with them after\n// creation, but is necessary in the composition hack.\nfunction replaceNodes(nodes, from, to, view, replacement) {\n    let result = [];\n    for (let i = 0, off = 0; i < nodes.length; i++) {\n        let child = nodes[i], start = off, end = off += child.size;\n        if (start >= to || end <= from) {\n            result.push(child);\n        }\n        else {\n            if (start < from)\n                result.push(child.slice(0, from - start, view));\n            if (replacement) {\n                result.push(replacement);\n                replacement = undefined;\n            }\n            if (end > to)\n                result.push(child.slice(to - start, child.size, view));\n        }\n    }\n    return result;\n}\n\nfunction selectionFromDOM(view, origin = null) {\n    let domSel = view.domSelection(), doc = view.state.doc;\n    if (!domSel.focusNode)\n        return null;\n    let nearestDesc = view.docView.nearestDesc(domSel.focusNode), inWidget = nearestDesc && nearestDesc.size == 0;\n    let head = view.docView.posFromDOM(domSel.focusNode, domSel.focusOffset, 1);\n    if (head < 0)\n        return null;\n    let $head = doc.resolve(head), $anchor, selection;\n    if (selectionCollapsed(domSel)) {\n        $anchor = $head;\n        while (nearestDesc && !nearestDesc.node)\n            nearestDesc = nearestDesc.parent;\n        let nearestDescNode = nearestDesc.node;\n        if (nearestDesc && nearestDescNode.isAtom && NodeSelection.isSelectable(nearestDescNode) && nearestDesc.parent\n            && !(nearestDescNode.isInline && isOnEdge(domSel.focusNode, domSel.focusOffset, nearestDesc.dom))) {\n            let pos = nearestDesc.posBefore;\n            selection = new NodeSelection(head == pos ? $head : doc.resolve(pos));\n        }\n    }\n    else {\n        let anchor = view.docView.posFromDOM(domSel.anchorNode, domSel.anchorOffset, 1);\n        if (anchor < 0)\n            return null;\n        $anchor = doc.resolve(anchor);\n    }\n    if (!selection) {\n        let bias = origin == \"pointer\" || (view.state.selection.head < $head.pos && !inWidget) ? 1 : -1;\n        selection = selectionBetween(view, $anchor, $head, bias);\n    }\n    return selection;\n}\nfunction editorOwnsSelection(view) {\n    return view.editable ? view.hasFocus() :\n        hasSelection(view) && document.activeElement && document.activeElement.contains(view.dom);\n}\nfunction selectionToDOM(view, force = false) {\n    let sel = view.state.selection;\n    syncNodeSelection(view, sel);\n    if (!editorOwnsSelection(view))\n        return;\n    // The delayed drag selection causes issues with Cell Selections\n    // in Safari. And the drag selection delay is to workarond issues\n    // which only present in Chrome.\n    if (!force && view.input.mouseDown && view.input.mouseDown.allowDefault && chrome) {\n        let domSel = view.domSelection(), curSel = view.domObserver.currentSelection;\n        if (domSel.anchorNode && curSel.anchorNode &&\n            isEquivalentPosition(domSel.anchorNode, domSel.anchorOffset, curSel.anchorNode, curSel.anchorOffset)) {\n            view.input.mouseDown.delayedSelectionSync = true;\n            view.domObserver.setCurSelection();\n            return;\n        }\n    }\n    view.domObserver.disconnectSelection();\n    if (view.cursorWrapper) {\n        selectCursorWrapper(view);\n    }\n    else {\n        let { anchor, head } = sel, resetEditableFrom, resetEditableTo;\n        if (brokenSelectBetweenUneditable && !(sel instanceof TextSelection)) {\n            if (!sel.$from.parent.inlineContent)\n                resetEditableFrom = temporarilyEditableNear(view, sel.from);\n            if (!sel.empty && !sel.$from.parent.inlineContent)\n                resetEditableTo = temporarilyEditableNear(view, sel.to);\n        }\n        view.docView.setSelection(anchor, head, view.root, force);\n        if (brokenSelectBetweenUneditable) {\n            if (resetEditableFrom)\n                resetEditable(resetEditableFrom);\n            if (resetEditableTo)\n                resetEditable(resetEditableTo);\n        }\n        if (sel.visible) {\n            view.dom.classList.remove(\"ProseMirror-hideselection\");\n        }\n        else {\n            view.dom.classList.add(\"ProseMirror-hideselection\");\n            if (\"onselectionchange\" in document)\n                removeClassOnSelectionChange(view);\n        }\n    }\n    view.domObserver.setCurSelection();\n    view.domObserver.connectSelection();\n}\n// Kludge to work around Webkit not allowing a selection to start/end\n// between non-editable block nodes. We briefly make something\n// editable, set the selection, then set it uneditable again.\nconst brokenSelectBetweenUneditable = safari || chrome && chrome_version < 63;\nfunction temporarilyEditableNear(view, pos) {\n    let { node, offset } = view.docView.domFromPos(pos, 0);\n    let after = offset < node.childNodes.length ? node.childNodes[offset] : null;\n    let before = offset ? node.childNodes[offset - 1] : null;\n    if (safari && after && after.contentEditable == \"false\")\n        return setEditable(after);\n    if ((!after || after.contentEditable == \"false\") &&\n        (!before || before.contentEditable == \"false\")) {\n        if (after)\n            return setEditable(after);\n        else if (before)\n            return setEditable(before);\n    }\n}\nfunction setEditable(element) {\n    element.contentEditable = \"true\";\n    if (safari && element.draggable) {\n        element.draggable = false;\n        element.wasDraggable = true;\n    }\n    return element;\n}\nfunction resetEditable(element) {\n    element.contentEditable = \"false\";\n    if (element.wasDraggable) {\n        element.draggable = true;\n        element.wasDraggable = null;\n    }\n}\nfunction removeClassOnSelectionChange(view) {\n    let doc = view.dom.ownerDocument;\n    doc.removeEventListener(\"selectionchange\", view.input.hideSelectionGuard);\n    let domSel = view.domSelection();\n    let node = domSel.anchorNode, offset = domSel.anchorOffset;\n    doc.addEventListener(\"selectionchange\", view.input.hideSelectionGuard = () => {\n        if (domSel.anchorNode != node || domSel.anchorOffset != offset) {\n            doc.removeEventListener(\"selectionchange\", view.input.hideSelectionGuard);\n            setTimeout(() => {\n                if (!editorOwnsSelection(view) || view.state.selection.visible)\n                    view.dom.classList.remove(\"ProseMirror-hideselection\");\n            }, 20);\n        }\n    });\n}\nfunction selectCursorWrapper(view) {\n    let domSel = view.domSelection(), range = document.createRange();\n    let node = view.cursorWrapper.dom, img = node.nodeName == \"IMG\";\n    if (img)\n        range.setEnd(node.parentNode, domIndex(node) + 1);\n    else\n        range.setEnd(node, 0);\n    range.collapse(false);\n    domSel.removeAllRanges();\n    domSel.addRange(range);\n    // Kludge to kill 'control selection' in IE11 when selecting an\n    // invisible cursor wrapper, since that would result in those weird\n    // resize handles and a selection that considers the absolutely\n    // positioned wrapper, rather than the root editable node, the\n    // focused element.\n    if (!img && !view.state.selection.visible && ie && ie_version <= 11) {\n        node.disabled = true;\n        node.disabled = false;\n    }\n}\nfunction syncNodeSelection(view, sel) {\n    if (sel instanceof NodeSelection) {\n        let desc = view.docView.descAt(sel.from);\n        if (desc != view.lastSelectedViewDesc) {\n            clearNodeSelection(view);\n            if (desc)\n                desc.selectNode();\n            view.lastSelectedViewDesc = desc;\n        }\n    }\n    else {\n        clearNodeSelection(view);\n    }\n}\n// Clear all DOM statefulness of the last node selection.\nfunction clearNodeSelection(view) {\n    if (view.lastSelectedViewDesc) {\n        if (view.lastSelectedViewDesc.parent)\n            view.lastSelectedViewDesc.deselectNode();\n        view.lastSelectedViewDesc = undefined;\n    }\n}\nfunction selectionBetween(view, $anchor, $head, bias) {\n    return view.someProp(\"createSelectionBetween\", f => f(view, $anchor, $head))\n        || TextSelection.between($anchor, $head, bias);\n}\nfunction hasFocusAndSelection(view) {\n    if (view.editable && view.root.activeElement != view.dom)\n        return false;\n    return hasSelection(view);\n}\nfunction hasSelection(view) {\n    let sel = view.domSelection();\n    if (!sel.anchorNode)\n        return false;\n    try {\n        // Firefox will raise 'permission denied' errors when accessing\n        // properties of `sel.anchorNode` when it's in a generated CSS\n        // element.\n        return view.dom.contains(sel.anchorNode.nodeType == 3 ? sel.anchorNode.parentNode : sel.anchorNode) &&\n            (view.editable || view.dom.contains(sel.focusNode.nodeType == 3 ? sel.focusNode.parentNode : sel.focusNode));\n    }\n    catch (_) {\n        return false;\n    }\n}\nfunction anchorInRightPlace(view) {\n    let anchorDOM = view.docView.domFromPos(view.state.selection.anchor, 0);\n    let domSel = view.domSelection();\n    return isEquivalentPosition(anchorDOM.node, anchorDOM.offset, domSel.anchorNode, domSel.anchorOffset);\n}\n\nfunction moveSelectionBlock(state, dir) {\n    let { $anchor, $head } = state.selection;\n    let $side = dir > 0 ? $anchor.max($head) : $anchor.min($head);\n    let $start = !$side.parent.inlineContent ? $side : $side.depth ? state.doc.resolve(dir > 0 ? $side.after() : $side.before()) : null;\n    return $start && Selection.findFrom($start, dir);\n}\nfunction apply(view, sel) {\n    view.dispatch(view.state.tr.setSelection(sel).scrollIntoView());\n    return true;\n}\nfunction selectHorizontally(view, dir, mods) {\n    let sel = view.state.selection;\n    if (sel instanceof TextSelection) {\n        if (!sel.empty || mods.indexOf(\"s\") > -1) {\n            return false;\n        }\n        else if (view.endOfTextblock(dir > 0 ? \"right\" : \"left\")) {\n            let next = moveSelectionBlock(view.state, dir);\n            if (next && (next instanceof NodeSelection))\n                return apply(view, next);\n            return false;\n        }\n        else if (!(mac && mods.indexOf(\"m\") > -1)) {\n            let $head = sel.$head, node = $head.textOffset ? null : dir < 0 ? $head.nodeBefore : $head.nodeAfter, desc;\n            if (!node || node.isText)\n                return false;\n            let nodePos = dir < 0 ? $head.pos - node.nodeSize : $head.pos;\n            if (!(node.isAtom || (desc = view.docView.descAt(nodePos)) && !desc.contentDOM))\n                return false;\n            if (NodeSelection.isSelectable(node)) {\n                return apply(view, new NodeSelection(dir < 0 ? view.state.doc.resolve($head.pos - node.nodeSize) : $head));\n            }\n            else if (webkit) {\n                // Chrome and Safari will introduce extra pointless cursor\n                // positions around inline uneditable nodes, so we have to\n                // take over and move the cursor past them (#937)\n                return apply(view, new TextSelection(view.state.doc.resolve(dir < 0 ? nodePos : nodePos + node.nodeSize)));\n            }\n            else {\n                return false;\n            }\n        }\n    }\n    else if (sel instanceof NodeSelection && sel.node.isInline) {\n        return apply(view, new TextSelection(dir > 0 ? sel.$to : sel.$from));\n    }\n    else {\n        let next = moveSelectionBlock(view.state, dir);\n        if (next)\n            return apply(view, next);\n        return false;\n    }\n}\nfunction nodeLen(node) {\n    return node.nodeType == 3 ? node.nodeValue.length : node.childNodes.length;\n}\nfunction isIgnorable(dom) {\n    let desc = dom.pmViewDesc;\n    return desc && desc.size == 0 && (dom.nextSibling || dom.nodeName != \"BR\");\n}\n// Make sure the cursor isn't directly after one or more ignored\n// nodes, which will confuse the browser's cursor motion logic.\nfunction skipIgnoredNodesLeft(view) {\n    let sel = view.domSelection();\n    let node = sel.focusNode, offset = sel.focusOffset;\n    if (!node)\n        return;\n    let moveNode, moveOffset, force = false;\n    // Gecko will do odd things when the selection is directly in front\n    // of a non-editable node, so in that case, move it into the next\n    // node if possible. Issue prosemirror/prosemirror#832.\n    if (gecko && node.nodeType == 1 && offset < nodeLen(node) && isIgnorable(node.childNodes[offset]))\n        force = true;\n    for (;;) {\n        if (offset > 0) {\n            if (node.nodeType != 1) {\n                break;\n            }\n            else {\n                let before = node.childNodes[offset - 1];\n                if (isIgnorable(before)) {\n                    moveNode = node;\n                    moveOffset = --offset;\n                }\n                else if (before.nodeType == 3) {\n                    node = before;\n                    offset = node.nodeValue.length;\n                }\n                else\n                    break;\n            }\n        }\n        else if (isBlockNode(node)) {\n            break;\n        }\n        else {\n            let prev = node.previousSibling;\n            while (prev && isIgnorable(prev)) {\n                moveNode = node.parentNode;\n                moveOffset = domIndex(prev);\n                prev = prev.previousSibling;\n            }\n            if (!prev) {\n                node = node.parentNode;\n                if (node == view.dom)\n                    break;\n                offset = 0;\n            }\n            else {\n                node = prev;\n                offset = nodeLen(node);\n            }\n        }\n    }\n    if (force)\n        setSelFocus(view, sel, node, offset);\n    else if (moveNode)\n        setSelFocus(view, sel, moveNode, moveOffset);\n}\n// Make sure the cursor isn't directly before one or more ignored\n// nodes.\nfunction skipIgnoredNodesRight(view) {\n    let sel = view.domSelection();\n    let node = sel.focusNode, offset = sel.focusOffset;\n    if (!node)\n        return;\n    let len = nodeLen(node);\n    let moveNode, moveOffset;\n    for (;;) {\n        if (offset < len) {\n            if (node.nodeType != 1)\n                break;\n            let after = node.childNodes[offset];\n            if (isIgnorable(after)) {\n                moveNode = node;\n                moveOffset = ++offset;\n            }\n            else\n                break;\n        }\n        else if (isBlockNode(node)) {\n            break;\n        }\n        else {\n            let next = node.nextSibling;\n            while (next && isIgnorable(next)) {\n                moveNode = next.parentNode;\n                moveOffset = domIndex(next) + 1;\n                next = next.nextSibling;\n            }\n            if (!next) {\n                node = node.parentNode;\n                if (node == view.dom)\n                    break;\n                offset = len = 0;\n            }\n            else {\n                node = next;\n                offset = 0;\n                len = nodeLen(node);\n            }\n        }\n    }\n    if (moveNode)\n        setSelFocus(view, sel, moveNode, moveOffset);\n}\nfunction isBlockNode(dom) {\n    let desc = dom.pmViewDesc;\n    return desc && desc.node && desc.node.isBlock;\n}\nfunction setSelFocus(view, sel, node, offset) {\n    if (selectionCollapsed(sel)) {\n        let range = document.createRange();\n        range.setEnd(node, offset);\n        range.setStart(node, offset);\n        sel.removeAllRanges();\n        sel.addRange(range);\n    }\n    else if (sel.extend) {\n        sel.extend(node, offset);\n    }\n    view.domObserver.setCurSelection();\n    let { state } = view;\n    // If no state update ends up happening, reset the selection.\n    setTimeout(() => {\n        if (view.state == state)\n            selectionToDOM(view);\n    }, 50);\n}\n// Check whether vertical selection motion would involve node\n// selections. If so, apply it (if not, the result is left to the\n// browser)\nfunction selectVertically(view, dir, mods) {\n    let sel = view.state.selection;\n    if (sel instanceof TextSelection && !sel.empty || mods.indexOf(\"s\") > -1)\n        return false;\n    if (mac && mods.indexOf(\"m\") > -1)\n        return false;\n    let { $from, $to } = sel;\n    if (!$from.parent.inlineContent || view.endOfTextblock(dir < 0 ? \"up\" : \"down\")) {\n        let next = moveSelectionBlock(view.state, dir);\n        if (next && (next instanceof NodeSelection))\n            return apply(view, next);\n    }\n    if (!$from.parent.inlineContent) {\n        let side = dir < 0 ? $from : $to;\n        let beyond = sel instanceof AllSelection ? Selection.near(side, dir) : Selection.findFrom(side, dir);\n        return beyond ? apply(view, beyond) : false;\n    }\n    return false;\n}\nfunction stopNativeHorizontalDelete(view, dir) {\n    if (!(view.state.selection instanceof TextSelection))\n        return true;\n    let { $head, $anchor, empty } = view.state.selection;\n    if (!$head.sameParent($anchor))\n        return true;\n    if (!empty)\n        return false;\n    if (view.endOfTextblock(dir > 0 ? \"forward\" : \"backward\"))\n        return true;\n    let nextNode = !$head.textOffset && (dir < 0 ? $head.nodeBefore : $head.nodeAfter);\n    if (nextNode && !nextNode.isText) {\n        let tr = view.state.tr;\n        if (dir < 0)\n            tr.delete($head.pos - nextNode.nodeSize, $head.pos);\n        else\n            tr.delete($head.pos, $head.pos + nextNode.nodeSize);\n        view.dispatch(tr);\n        return true;\n    }\n    return false;\n}\nfunction switchEditable(view, node, state) {\n    view.domObserver.stop();\n    node.contentEditable = state;\n    view.domObserver.start();\n}\n// Issue #867 / #1090 / https://bugs.chromium.org/p/chromium/issues/detail?id=903821\n// In which Safari (and at some point in the past, Chrome) does really\n// wrong things when the down arrow is pressed when the cursor is\n// directly at the start of a textblock and has an uneditable node\n// after it\nfunction safariDownArrowBug(view) {\n    if (!safari || view.state.selection.$head.parentOffset > 0)\n        return false;\n    let { focusNode, focusOffset } = view.domSelection();\n    if (focusNode && focusNode.nodeType == 1 && focusOffset == 0 &&\n        focusNode.firstChild && focusNode.firstChild.contentEditable == \"false\") {\n        let child = focusNode.firstChild;\n        switchEditable(view, child, \"true\");\n        setTimeout(() => switchEditable(view, child, \"false\"), 20);\n    }\n    return false;\n}\n// A backdrop key mapping used to make sure we always suppress keys\n// that have a dangerous default effect, even if the commands they are\n// bound to return false, and to make sure that cursor-motion keys\n// find a cursor (as opposed to a node selection) when pressed. For\n// cursor-motion keys, the code in the handlers also takes care of\n// block selections.\nfunction getMods(event) {\n    let result = \"\";\n    if (event.ctrlKey)\n        result += \"c\";\n    if (event.metaKey)\n        result += \"m\";\n    if (event.altKey)\n        result += \"a\";\n    if (event.shiftKey)\n        result += \"s\";\n    return result;\n}\nfunction captureKeyDown(view, event) {\n    let code = event.keyCode, mods = getMods(event);\n    if (code == 8 || (mac && code == 72 && mods == \"c\")) { // Backspace, Ctrl-h on Mac\n        return stopNativeHorizontalDelete(view, -1) || skipIgnoredNodesLeft(view);\n    }\n    else if (code == 46 || (mac && code == 68 && mods == \"c\")) { // Delete, Ctrl-d on Mac\n        return stopNativeHorizontalDelete(view, 1) || skipIgnoredNodesRight(view);\n    }\n    else if (code == 13 || code == 27) { // Enter, Esc\n        return true;\n    }\n    else if (code == 37 || (mac && code == 66 && mods == \"c\")) { // Left arrow, Ctrl-b on Mac\n        return selectHorizontally(view, -1, mods) || skipIgnoredNodesLeft(view);\n    }\n    else if (code == 39 || (mac && code == 70 && mods == \"c\")) { // Right arrow, Ctrl-f on Mac\n        return selectHorizontally(view, 1, mods) || skipIgnoredNodesRight(view);\n    }\n    else if (code == 38 || (mac && code == 80 && mods == \"c\")) { // Up arrow, Ctrl-p on Mac\n        return selectVertically(view, -1, mods) || skipIgnoredNodesLeft(view);\n    }\n    else if (code == 40 || (mac && code == 78 && mods == \"c\")) { // Down arrow, Ctrl-n on Mac\n        return safariDownArrowBug(view) || selectVertically(view, 1, mods) || skipIgnoredNodesRight(view);\n    }\n    else if (mods == (mac ? \"m\" : \"c\") &&\n        (code == 66 || code == 73 || code == 89 || code == 90)) { // Mod-[biyz]\n        return true;\n    }\n    return false;\n}\n\nfunction serializeForClipboard(view, slice) {\n    let context = [], { content, openStart, openEnd } = slice;\n    while (openStart > 1 && openEnd > 1 && content.childCount == 1 && content.firstChild.childCount == 1) {\n        openStart--;\n        openEnd--;\n        let node = content.firstChild;\n        context.push(node.type.name, node.attrs != node.type.defaultAttrs ? node.attrs : null);\n        content = node.content;\n    }\n    let serializer = view.someProp(\"clipboardSerializer\") || DOMSerializer.fromSchema(view.state.schema);\n    let doc = detachedDoc(), wrap = doc.createElement(\"div\");\n    wrap.appendChild(serializer.serializeFragment(content, { document: doc }));\n    let firstChild = wrap.firstChild, needsWrap, wrappers = 0;\n    while (firstChild && firstChild.nodeType == 1 && (needsWrap = wrapMap[firstChild.nodeName.toLowerCase()])) {\n        for (let i = needsWrap.length - 1; i >= 0; i--) {\n            let wrapper = doc.createElement(needsWrap[i]);\n            while (wrap.firstChild)\n                wrapper.appendChild(wrap.firstChild);\n            wrap.appendChild(wrapper);\n            wrappers++;\n        }\n        firstChild = wrap.firstChild;\n    }\n    if (firstChild && firstChild.nodeType == 1)\n        firstChild.setAttribute(\"data-pm-slice\", `${openStart} ${openEnd}${wrappers ? ` -${wrappers}` : \"\"} ${JSON.stringify(context)}`);\n    let text = view.someProp(\"clipboardTextSerializer\", f => f(slice)) ||\n        slice.content.textBetween(0, slice.content.size, \"\\n\\n\");\n    return { dom: wrap, text };\n}\n// Read a slice of content from the clipboard (or drop data).\nfunction parseFromClipboard(view, text, html, plainText, $context) {\n    let inCode = $context.parent.type.spec.code;\n    let dom, slice;\n    if (!html && !text)\n        return null;\n    let asText = text && (plainText || inCode || !html);\n    if (asText) {\n        view.someProp(\"transformPastedText\", f => { text = f(text, inCode || plainText); });\n        if (inCode)\n            return text ? new Slice(Fragment.from(view.state.schema.text(text.replace(/\\r\\n?/g, \"\\n\"))), 0, 0) : Slice.empty;\n        let parsed = view.someProp(\"clipboardTextParser\", f => f(text, $context, plainText));\n        if (parsed) {\n            slice = parsed;\n        }\n        else {\n            let marks = $context.marks();\n            let { schema } = view.state, serializer = DOMSerializer.fromSchema(schema);\n            dom = document.createElement(\"div\");\n            text.split(/(?:\\r\\n?|\\n)+/).forEach(block => {\n                let p = dom.appendChild(document.createElement(\"p\"));\n                if (block)\n                    p.appendChild(serializer.serializeNode(schema.text(block, marks)));\n            });\n        }\n    }\n    else {\n        view.someProp(\"transformPastedHTML\", f => { html = f(html); });\n        dom = readHTML(html);\n        if (webkit)\n            restoreReplacedSpaces(dom);\n    }\n    let contextNode = dom && dom.querySelector(\"[data-pm-slice]\");\n    let sliceData = contextNode && /^(\\d+) (\\d+)(?: -(\\d+))? (.*)/.exec(contextNode.getAttribute(\"data-pm-slice\") || \"\");\n    if (sliceData && sliceData[3])\n        for (let i = +sliceData[3]; i > 0 && dom.firstChild; i--)\n            dom = dom.firstChild;\n    if (!slice) {\n        let parser = view.someProp(\"clipboardParser\") || view.someProp(\"domParser\") || DOMParser.fromSchema(view.state.schema);\n        slice = parser.parseSlice(dom, {\n            preserveWhitespace: !!(asText || sliceData),\n            context: $context,\n            ruleFromNode(dom) {\n                if (dom.nodeName == \"BR\" && !dom.nextSibling &&\n                    dom.parentNode && !inlineParents.test(dom.parentNode.nodeName))\n                    return { ignore: true };\n                return null;\n            }\n        });\n    }\n    if (sliceData) {\n        slice = addContext(closeSlice(slice, +sliceData[1], +sliceData[2]), sliceData[4]);\n    }\n    else { // HTML wasn't created by ProseMirror. Make sure top-level siblings are coherent\n        slice = Slice.maxOpen(normalizeSiblings(slice.content, $context), true);\n        if (slice.openStart || slice.openEnd) {\n            let openStart = 0, openEnd = 0;\n            for (let node = slice.content.firstChild; openStart < slice.openStart && !node.type.spec.isolating; openStart++, node = node.firstChild) { }\n            for (let node = slice.content.lastChild; openEnd < slice.openEnd && !node.type.spec.isolating; openEnd++, node = node.lastChild) { }\n            slice = closeSlice(slice, openStart, openEnd);\n        }\n    }\n    view.someProp(\"transformPasted\", f => { slice = f(slice); });\n    return slice;\n}\nconst inlineParents = /^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;\n// Takes a slice parsed with parseSlice, which means there hasn't been\n// any content-expression checking done on the top nodes, tries to\n// find a parent node in the current context that might fit the nodes,\n// and if successful, rebuilds the slice so that it fits into that parent.\n//\n// This addresses the problem that Transform.replace expects a\n// coherent slice, and will fail to place a set of siblings that don't\n// fit anywhere in the schema.\nfunction normalizeSiblings(fragment, $context) {\n    if (fragment.childCount < 2)\n        return fragment;\n    for (let d = $context.depth; d >= 0; d--) {\n        let parent = $context.node(d);\n        let match = parent.contentMatchAt($context.index(d));\n        let lastWrap, result = [];\n        fragment.forEach(node => {\n            if (!result)\n                return;\n            let wrap = match.findWrapping(node.type), inLast;\n            if (!wrap)\n                return result = null;\n            if (inLast = result.length && lastWrap.length && addToSibling(wrap, lastWrap, node, result[result.length - 1], 0)) {\n                result[result.length - 1] = inLast;\n            }\n            else {\n                if (result.length)\n                    result[result.length - 1] = closeRight(result[result.length - 1], lastWrap.length);\n                let wrapped = withWrappers(node, wrap);\n                result.push(wrapped);\n                match = match.matchType(wrapped.type);\n                lastWrap = wrap;\n            }\n        });\n        if (result)\n            return Fragment.from(result);\n    }\n    return fragment;\n}\nfunction withWrappers(node, wrap, from = 0) {\n    for (let i = wrap.length - 1; i >= from; i--)\n        node = wrap[i].create(null, Fragment.from(node));\n    return node;\n}\n// Used to group adjacent nodes wrapped in similar parents by\n// normalizeSiblings into the same parent node\nfunction addToSibling(wrap, lastWrap, node, sibling, depth) {\n    if (depth < wrap.length && depth < lastWrap.length && wrap[depth] == lastWrap[depth]) {\n        let inner = addToSibling(wrap, lastWrap, node, sibling.lastChild, depth + 1);\n        if (inner)\n            return sibling.copy(sibling.content.replaceChild(sibling.childCount - 1, inner));\n        let match = sibling.contentMatchAt(sibling.childCount);\n        if (match.matchType(depth == wrap.length - 1 ? node.type : wrap[depth + 1]))\n            return sibling.copy(sibling.content.append(Fragment.from(withWrappers(node, wrap, depth + 1))));\n    }\n}\nfunction closeRight(node, depth) {\n    if (depth == 0)\n        return node;\n    let fragment = node.content.replaceChild(node.childCount - 1, closeRight(node.lastChild, depth - 1));\n    let fill = node.contentMatchAt(node.childCount).fillBefore(Fragment.empty, true);\n    return node.copy(fragment.append(fill));\n}\nfunction closeRange(fragment, side, from, to, depth, openEnd) {\n    let node = side < 0 ? fragment.firstChild : fragment.lastChild, inner = node.content;\n    if (depth < to - 1)\n        inner = closeRange(inner, side, from, to, depth + 1, openEnd);\n    if (depth >= from)\n        inner = side < 0 ? node.contentMatchAt(0).fillBefore(inner, fragment.childCount > 1 || openEnd <= depth).append(inner)\n            : inner.append(node.contentMatchAt(node.childCount).fillBefore(Fragment.empty, true));\n    return fragment.replaceChild(side < 0 ? 0 : fragment.childCount - 1, node.copy(inner));\n}\nfunction closeSlice(slice, openStart, openEnd) {\n    if (openStart < slice.openStart)\n        slice = new Slice(closeRange(slice.content, -1, openStart, slice.openStart, 0, slice.openEnd), openStart, slice.openEnd);\n    if (openEnd < slice.openEnd)\n        slice = new Slice(closeRange(slice.content, 1, openEnd, slice.openEnd, 0, 0), slice.openStart, openEnd);\n    return slice;\n}\n// Trick from jQuery -- some elements must be wrapped in other\n// elements for innerHTML to work. I.e. if you do `div.innerHTML =\n// \"<td>..</td>\"` the table cells are ignored.\nconst wrapMap = {\n    thead: [\"table\"],\n    tbody: [\"table\"],\n    tfoot: [\"table\"],\n    caption: [\"table\"],\n    colgroup: [\"table\"],\n    col: [\"table\", \"colgroup\"],\n    tr: [\"table\", \"tbody\"],\n    td: [\"table\", \"tbody\", \"tr\"],\n    th: [\"table\", \"tbody\", \"tr\"]\n};\nlet _detachedDoc = null;\nfunction detachedDoc() {\n    return _detachedDoc || (_detachedDoc = document.implementation.createHTMLDocument(\"title\"));\n}\nfunction readHTML(html) {\n    let metas = /^(\\s*<meta [^>]*>)*/.exec(html);\n    if (metas)\n        html = html.slice(metas[0].length);\n    let elt = detachedDoc().createElement(\"div\");\n    let firstTag = /<([a-z][^>\\s]+)/i.exec(html), wrap;\n    if (wrap = firstTag && wrapMap[firstTag[1].toLowerCase()])\n        html = wrap.map(n => \"<\" + n + \">\").join(\"\") + html + wrap.map(n => \"</\" + n + \">\").reverse().join(\"\");\n    elt.innerHTML = html;\n    if (wrap)\n        for (let i = 0; i < wrap.length; i++)\n            elt = elt.querySelector(wrap[i]) || elt;\n    return elt;\n}\n// Webkit browsers do some hard-to-predict replacement of regular\n// spaces with non-breaking spaces when putting content on the\n// clipboard. This tries to convert such non-breaking spaces (which\n// will be wrapped in a plain span on Chrome, a span with class\n// Apple-converted-space on Safari) back to regular spaces.\nfunction restoreReplacedSpaces(dom) {\n    let nodes = dom.querySelectorAll(chrome ? \"span:not([class]):not([style])\" : \"span.Apple-converted-space\");\n    for (let i = 0; i < nodes.length; i++) {\n        let node = nodes[i];\n        if (node.childNodes.length == 1 && node.textContent == \"\\u00a0\" && node.parentNode)\n            node.parentNode.replaceChild(dom.ownerDocument.createTextNode(\" \"), node);\n    }\n}\nfunction addContext(slice, context) {\n    if (!slice.size)\n        return slice;\n    let schema = slice.content.firstChild.type.schema, array;\n    try {\n        array = JSON.parse(context);\n    }\n    catch (e) {\n        return slice;\n    }\n    let { content, openStart, openEnd } = slice;\n    for (let i = array.length - 2; i >= 0; i -= 2) {\n        let type = schema.nodes[array[i]];\n        if (!type || type.hasRequiredAttrs())\n            break;\n        content = Fragment.from(type.create(array[i + 1], content));\n        openStart++;\n        openEnd++;\n    }\n    return new Slice(content, openStart, openEnd);\n}\n\n// A collection of DOM events that occur within the editor, and callback functions\n// to invoke when the event fires.\nconst handlers = {};\nlet editHandlers = {};\nclass InputState {\n    constructor() {\n        this.shiftKey = false;\n        this.mouseDown = null;\n        this.lastKeyCode = null;\n        this.lastKeyCodeTime = 0;\n        this.lastClick = { time: 0, x: 0, y: 0, type: \"\" };\n        this.lastSelectionOrigin = null;\n        this.lastSelectionTime = 0;\n        this.lastIOSEnter = 0;\n        this.lastIOSEnterFallbackTimeout = -1;\n        this.lastAndroidDelete = 0;\n        this.composing = false;\n        this.composingTimeout = -1;\n        this.compositionNodes = [];\n        this.compositionEndedAt = -2e8;\n        this.domChangeCount = 0;\n        this.eventHandlers = Object.create(null);\n        this.hideSelectionGuard = null;\n    }\n}\nfunction initInput(view) {\n    for (let event in handlers) {\n        let handler = handlers[event];\n        view.dom.addEventListener(event, view.input.eventHandlers[event] = (event) => {\n            if (eventBelongsToView(view, event) && !runCustomHandler(view, event) &&\n                (view.editable || !(event.type in editHandlers)))\n                handler(view, event);\n        });\n    }\n    // On Safari, for reasons beyond my understanding, adding an input\n    // event handler makes an issue where the composition vanishes when\n    // you press enter go away.\n    if (safari)\n        view.dom.addEventListener(\"input\", () => null);\n    ensureListeners(view);\n}\nfunction setSelectionOrigin(view, origin) {\n    view.input.lastSelectionOrigin = origin;\n    view.input.lastSelectionTime = Date.now();\n}\nfunction destroyInput(view) {\n    view.domObserver.stop();\n    for (let type in view.input.eventHandlers)\n        view.dom.removeEventListener(type, view.input.eventHandlers[type]);\n    clearTimeout(view.input.composingTimeout);\n    clearTimeout(view.input.lastIOSEnterFallbackTimeout);\n}\nfunction ensureListeners(view) {\n    view.someProp(\"handleDOMEvents\", currentHandlers => {\n        for (let type in currentHandlers)\n            if (!view.input.eventHandlers[type])\n                view.dom.addEventListener(type, view.input.eventHandlers[type] = event => runCustomHandler(view, event));\n    });\n}\nfunction runCustomHandler(view, event) {\n    return view.someProp(\"handleDOMEvents\", handlers => {\n        let handler = handlers[event.type];\n        return handler ? handler(view, event) || event.defaultPrevented : false;\n    });\n}\nfunction eventBelongsToView(view, event) {\n    if (!event.bubbles)\n        return true;\n    if (event.defaultPrevented)\n        return false;\n    for (let node = event.target; node != view.dom; node = node.parentNode)\n        if (!node || node.nodeType == 11 ||\n            (node.pmViewDesc && node.pmViewDesc.stopEvent(event)))\n            return false;\n    return true;\n}\nfunction dispatchEvent(view, event) {\n    if (!runCustomHandler(view, event) && handlers[event.type] &&\n        (view.editable || !(event.type in editHandlers)))\n        handlers[event.type](view, event);\n}\neditHandlers.keydown = (view, _event) => {\n    let event = _event;\n    view.input.shiftKey = event.keyCode == 16 || event.shiftKey;\n    if (inOrNearComposition(view, event))\n        return;\n    view.input.lastKeyCode = event.keyCode;\n    view.input.lastKeyCodeTime = Date.now();\n    // Suppress enter key events on Chrome Android, because those tend\n    // to be part of a confused sequence of composition events fired,\n    // and handling them eagerly tends to corrupt the input.\n    if (android && chrome && event.keyCode == 13)\n        return;\n    if (event.keyCode != 229)\n        view.domObserver.forceFlush();\n    // On iOS, if we preventDefault enter key presses, the virtual\n    // keyboard gets confused. So the hack here is to set a flag that\n    // makes the DOM change code recognize that what just happens should\n    // be replaced by whatever the Enter key handlers do.\n    if (ios && event.keyCode == 13 && !event.ctrlKey && !event.altKey && !event.metaKey) {\n        let now = Date.now();\n        view.input.lastIOSEnter = now;\n        view.input.lastIOSEnterFallbackTimeout = setTimeout(() => {\n            if (view.input.lastIOSEnter == now) {\n                view.someProp(\"handleKeyDown\", f => f(view, keyEvent(13, \"Enter\")));\n                view.input.lastIOSEnter = 0;\n            }\n        }, 200);\n    }\n    else if (view.someProp(\"handleKeyDown\", f => f(view, event)) || captureKeyDown(view, event)) {\n        event.preventDefault();\n    }\n    else {\n        setSelectionOrigin(view, \"key\");\n    }\n};\neditHandlers.keyup = (view, event) => {\n    if (event.keyCode == 16)\n        view.input.shiftKey = false;\n};\neditHandlers.keypress = (view, _event) => {\n    let event = _event;\n    if (inOrNearComposition(view, event) || !event.charCode ||\n        event.ctrlKey && !event.altKey || mac && event.metaKey)\n        return;\n    if (view.someProp(\"handleKeyPress\", f => f(view, event))) {\n        event.preventDefault();\n        return;\n    }\n    let sel = view.state.selection;\n    if (!(sel instanceof TextSelection) || !sel.$from.sameParent(sel.$to)) {\n        let text = String.fromCharCode(event.charCode);\n        if (!view.someProp(\"handleTextInput\", f => f(view, sel.$from.pos, sel.$to.pos, text)))\n            view.dispatch(view.state.tr.insertText(text).scrollIntoView());\n        event.preventDefault();\n    }\n};\nfunction eventCoords(event) { return { left: event.clientX, top: event.clientY }; }\nfunction isNear(event, click) {\n    let dx = click.x - event.clientX, dy = click.y - event.clientY;\n    return dx * dx + dy * dy < 100;\n}\nfunction runHandlerOnContext(view, propName, pos, inside, event) {\n    if (inside == -1)\n        return false;\n    let $pos = view.state.doc.resolve(inside);\n    for (let i = $pos.depth + 1; i > 0; i--) {\n        if (view.someProp(propName, f => i > $pos.depth ? f(view, pos, $pos.nodeAfter, $pos.before(i), event, true)\n            : f(view, pos, $pos.node(i), $pos.before(i), event, false)))\n            return true;\n    }\n    return false;\n}\nfunction updateSelection(view, selection, origin) {\n    if (!view.focused)\n        view.focus();\n    let tr = view.state.tr.setSelection(selection);\n    if (origin == \"pointer\")\n        tr.setMeta(\"pointer\", true);\n    view.dispatch(tr);\n}\nfunction selectClickedLeaf(view, inside) {\n    if (inside == -1)\n        return false;\n    let $pos = view.state.doc.resolve(inside), node = $pos.nodeAfter;\n    if (node && node.isAtom && NodeSelection.isSelectable(node)) {\n        updateSelection(view, new NodeSelection($pos), \"pointer\");\n        return true;\n    }\n    return false;\n}\nfunction selectClickedNode(view, inside) {\n    if (inside == -1)\n        return false;\n    let sel = view.state.selection, selectedNode, selectAt;\n    if (sel instanceof NodeSelection)\n        selectedNode = sel.node;\n    let $pos = view.state.doc.resolve(inside);\n    for (let i = $pos.depth + 1; i > 0; i--) {\n        let node = i > $pos.depth ? $pos.nodeAfter : $pos.node(i);\n        if (NodeSelection.isSelectable(node)) {\n            if (selectedNode && sel.$from.depth > 0 &&\n                i >= sel.$from.depth && $pos.before(sel.$from.depth + 1) == sel.$from.pos)\n                selectAt = $pos.before(sel.$from.depth);\n            else\n                selectAt = $pos.before(i);\n            break;\n        }\n    }\n    if (selectAt != null) {\n        updateSelection(view, NodeSelection.create(view.state.doc, selectAt), \"pointer\");\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nfunction handleSingleClick(view, pos, inside, event, selectNode) {\n    return runHandlerOnContext(view, \"handleClickOn\", pos, inside, event) ||\n        view.someProp(\"handleClick\", f => f(view, pos, event)) ||\n        (selectNode ? selectClickedNode(view, inside) : selectClickedLeaf(view, inside));\n}\nfunction handleDoubleClick(view, pos, inside, event) {\n    return runHandlerOnContext(view, \"handleDoubleClickOn\", pos, inside, event) ||\n        view.someProp(\"handleDoubleClick\", f => f(view, pos, event));\n}\nfunction handleTripleClick(view, pos, inside, event) {\n    return runHandlerOnContext(view, \"handleTripleClickOn\", pos, inside, event) ||\n        view.someProp(\"handleTripleClick\", f => f(view, pos, event)) ||\n        defaultTripleClick(view, inside, event);\n}\nfunction defaultTripleClick(view, inside, event) {\n    if (event.button != 0)\n        return false;\n    let doc = view.state.doc;\n    if (inside == -1) {\n        if (doc.inlineContent) {\n            updateSelection(view, TextSelection.create(doc, 0, doc.content.size), \"pointer\");\n            return true;\n        }\n        return false;\n    }\n    let $pos = doc.resolve(inside);\n    for (let i = $pos.depth + 1; i > 0; i--) {\n        let node = i > $pos.depth ? $pos.nodeAfter : $pos.node(i);\n        let nodePos = $pos.before(i);\n        if (node.inlineContent)\n            updateSelection(view, TextSelection.create(doc, nodePos + 1, nodePos + 1 + node.content.size), \"pointer\");\n        else if (NodeSelection.isSelectable(node))\n            updateSelection(view, NodeSelection.create(doc, nodePos), \"pointer\");\n        else\n            continue;\n        return true;\n    }\n}\nfunction forceDOMFlush(view) {\n    return endComposition(view);\n}\nconst selectNodeModifier = mac ? \"metaKey\" : \"ctrlKey\";\nhandlers.mousedown = (view, _event) => {\n    let event = _event;\n    view.input.shiftKey = event.shiftKey;\n    let flushed = forceDOMFlush(view);\n    let now = Date.now(), type = \"singleClick\";\n    if (now - view.input.lastClick.time < 500 && isNear(event, view.input.lastClick) && !event[selectNodeModifier]) {\n        if (view.input.lastClick.type == \"singleClick\")\n            type = \"doubleClick\";\n        else if (view.input.lastClick.type == \"doubleClick\")\n            type = \"tripleClick\";\n    }\n    view.input.lastClick = { time: now, x: event.clientX, y: event.clientY, type };\n    let pos = view.posAtCoords(eventCoords(event));\n    if (!pos)\n        return;\n    if (type == \"singleClick\") {\n        if (view.input.mouseDown)\n            view.input.mouseDown.done();\n        view.input.mouseDown = new MouseDown(view, pos, event, !!flushed);\n    }\n    else if ((type == \"doubleClick\" ? handleDoubleClick : handleTripleClick)(view, pos.pos, pos.inside, event)) {\n        event.preventDefault();\n    }\n    else {\n        setSelectionOrigin(view, \"pointer\");\n    }\n};\nclass MouseDown {\n    constructor(view, pos, event, flushed) {\n        this.view = view;\n        this.pos = pos;\n        this.event = event;\n        this.flushed = flushed;\n        this.delayedSelectionSync = false;\n        this.mightDrag = null;\n        this.startDoc = view.state.doc;\n        this.selectNode = !!event[selectNodeModifier];\n        this.allowDefault = event.shiftKey;\n        let targetNode, targetPos;\n        if (pos.inside > -1) {\n            targetNode = view.state.doc.nodeAt(pos.inside);\n            targetPos = pos.inside;\n        }\n        else {\n            let $pos = view.state.doc.resolve(pos.pos);\n            targetNode = $pos.parent;\n            targetPos = $pos.depth ? $pos.before() : 0;\n        }\n        const target = flushed ? null : event.target;\n        const targetDesc = target ? view.docView.nearestDesc(target, true) : null;\n        this.target = targetDesc ? targetDesc.dom : null;\n        let { selection } = view.state;\n        if (event.button == 0 &&\n            targetNode.type.spec.draggable && targetNode.type.spec.selectable !== false ||\n            selection instanceof NodeSelection && selection.from <= targetPos && selection.to > targetPos)\n            this.mightDrag = {\n                node: targetNode,\n                pos: targetPos,\n                addAttr: !!(this.target && !this.target.draggable),\n                setUneditable: !!(this.target && gecko && !this.target.hasAttribute(\"contentEditable\"))\n            };\n        if (this.target && this.mightDrag && (this.mightDrag.addAttr || this.mightDrag.setUneditable)) {\n            this.view.domObserver.stop();\n            if (this.mightDrag.addAttr)\n                this.target.draggable = true;\n            if (this.mightDrag.setUneditable)\n                setTimeout(() => {\n                    if (this.view.input.mouseDown == this)\n                        this.target.setAttribute(\"contentEditable\", \"false\");\n                }, 20);\n            this.view.domObserver.start();\n        }\n        view.root.addEventListener(\"mouseup\", this.up = this.up.bind(this));\n        view.root.addEventListener(\"mousemove\", this.move = this.move.bind(this));\n        setSelectionOrigin(view, \"pointer\");\n    }\n    done() {\n        this.view.root.removeEventListener(\"mouseup\", this.up);\n        this.view.root.removeEventListener(\"mousemove\", this.move);\n        if (this.mightDrag && this.target) {\n            this.view.domObserver.stop();\n            if (this.mightDrag.addAttr)\n                this.target.removeAttribute(\"draggable\");\n            if (this.mightDrag.setUneditable)\n                this.target.removeAttribute(\"contentEditable\");\n            this.view.domObserver.start();\n        }\n        if (this.delayedSelectionSync)\n            setTimeout(() => selectionToDOM(this.view));\n        this.view.input.mouseDown = null;\n    }\n    up(event) {\n        this.done();\n        if (!this.view.dom.contains(event.target))\n            return;\n        let pos = this.pos;\n        if (this.view.state.doc != this.startDoc)\n            pos = this.view.posAtCoords(eventCoords(event));\n        if (this.allowDefault || !pos) {\n            setSelectionOrigin(this.view, \"pointer\");\n        }\n        else if (handleSingleClick(this.view, pos.pos, pos.inside, event, this.selectNode)) {\n            event.preventDefault();\n        }\n        else if (event.button == 0 &&\n            (this.flushed ||\n                // Safari ignores clicks on draggable elements\n                (safari && this.mightDrag && !this.mightDrag.node.isAtom) ||\n                // Chrome will sometimes treat a node selection as a\n                // cursor, but still report that the node is selected\n                // when asked through getSelection. You'll then get a\n                // situation where clicking at the point where that\n                // (hidden) cursor is doesn't change the selection, and\n                // thus doesn't get a reaction from ProseMirror. This\n                // works around that.\n                (chrome && !(this.view.state.selection instanceof TextSelection) &&\n                    Math.min(Math.abs(pos.pos - this.view.state.selection.from), Math.abs(pos.pos - this.view.state.selection.to)) <= 2))) {\n            updateSelection(this.view, Selection.near(this.view.state.doc.resolve(pos.pos)), \"pointer\");\n            event.preventDefault();\n        }\n        else {\n            setSelectionOrigin(this.view, \"pointer\");\n        }\n    }\n    move(event) {\n        if (!this.allowDefault && (Math.abs(this.event.x - event.clientX) > 4 ||\n            Math.abs(this.event.y - event.clientY) > 4))\n            this.allowDefault = true;\n        setSelectionOrigin(this.view, \"pointer\");\n        if (event.buttons == 0)\n            this.done();\n    }\n}\nhandlers.touchdown = view => {\n    forceDOMFlush(view);\n    setSelectionOrigin(view, \"pointer\");\n};\nhandlers.contextmenu = view => forceDOMFlush(view);\nfunction inOrNearComposition(view, event) {\n    if (view.composing)\n        return true;\n    // See https://www.stum.de/2016/06/24/handling-ime-events-in-javascript/.\n    // On Japanese input method editors (IMEs), the Enter key is used to confirm character\n    // selection. On Safari, when Enter is pressed, compositionend and keydown events are\n    // emitted. The keydown event triggers newline insertion, which we don't want.\n    // This method returns true if the keydown event should be ignored.\n    // We only ignore it once, as pressing Enter a second time *should* insert a newline.\n    // Furthermore, the keydown event timestamp must be close to the compositionEndedAt timestamp.\n    // This guards against the case where compositionend is triggered without the keyboard\n    // (e.g. character confirmation may be done with the mouse), and keydown is triggered\n    // afterwards- we wouldn't want to ignore the keydown event in this case.\n    if (safari && Math.abs(event.timeStamp - view.input.compositionEndedAt) < 500) {\n        view.input.compositionEndedAt = -2e8;\n        return true;\n    }\n    return false;\n}\n// Drop active composition after 5 seconds of inactivity on Android\nconst timeoutComposition = android ? 5000 : -1;\neditHandlers.compositionstart = editHandlers.compositionupdate = view => {\n    if (!view.composing) {\n        view.domObserver.flush();\n        let { state } = view, $pos = state.selection.$from;\n        if (state.selection.empty &&\n            (state.storedMarks ||\n                (!$pos.textOffset && $pos.parentOffset && $pos.nodeBefore.marks.some(m => m.type.spec.inclusive === false)))) {\n            // Need to wrap the cursor in mark nodes different from the ones in the DOM context\n            view.markCursor = view.state.storedMarks || $pos.marks();\n            endComposition(view, true);\n            view.markCursor = null;\n        }\n        else {\n            endComposition(view);\n            // In firefox, if the cursor is after but outside a marked node,\n            // the inserted text won't inherit the marks. So this moves it\n            // inside if necessary.\n            if (gecko && state.selection.empty && $pos.parentOffset && !$pos.textOffset && $pos.nodeBefore.marks.length) {\n                let sel = view.domSelection();\n                for (let node = sel.focusNode, offset = sel.focusOffset; node && node.nodeType == 1 && offset != 0;) {\n                    let before = offset < 0 ? node.lastChild : node.childNodes[offset - 1];\n                    if (!before)\n                        break;\n                    if (before.nodeType == 3) {\n                        sel.collapse(before, before.nodeValue.length);\n                        break;\n                    }\n                    else {\n                        node = before;\n                        offset = -1;\n                    }\n                }\n            }\n        }\n        view.input.composing = true;\n    }\n    scheduleComposeEnd(view, timeoutComposition);\n};\neditHandlers.compositionend = (view, event) => {\n    if (view.composing) {\n        view.input.composing = false;\n        view.input.compositionEndedAt = event.timeStamp;\n        scheduleComposeEnd(view, 20);\n    }\n};\nfunction scheduleComposeEnd(view, delay) {\n    clearTimeout(view.input.composingTimeout);\n    if (delay > -1)\n        view.input.composingTimeout = setTimeout(() => endComposition(view), delay);\n}\nfunction clearComposition(view) {\n    if (view.composing) {\n        view.input.composing = false;\n        view.input.compositionEndedAt = timestampFromCustomEvent();\n    }\n    while (view.input.compositionNodes.length > 0)\n        view.input.compositionNodes.pop().markParentsDirty();\n}\nfunction timestampFromCustomEvent() {\n    let event = document.createEvent(\"Event\");\n    event.initEvent(\"event\", true, true);\n    return event.timeStamp;\n}\n/**\n@internal\n*/\nfunction endComposition(view, forceUpdate = false) {\n    if (android && view.domObserver.flushingSoon >= 0)\n        return;\n    view.domObserver.forceFlush();\n    clearComposition(view);\n    if (forceUpdate || view.docView && view.docView.dirty) {\n        let sel = selectionFromDOM(view);\n        if (sel && !sel.eq(view.state.selection))\n            view.dispatch(view.state.tr.setSelection(sel));\n        else\n            view.updateState(view.state);\n        return true;\n    }\n    return false;\n}\nfunction captureCopy(view, dom) {\n    // The extra wrapper is somehow necessary on IE/Edge to prevent the\n    // content from being mangled when it is put onto the clipboard\n    if (!view.dom.parentNode)\n        return;\n    let wrap = view.dom.parentNode.appendChild(document.createElement(\"div\"));\n    wrap.appendChild(dom);\n    wrap.style.cssText = \"position: fixed; left: -10000px; top: 10px\";\n    let sel = getSelection(), range = document.createRange();\n    range.selectNodeContents(dom);\n    // Done because IE will fire a selectionchange moving the selection\n    // to its start when removeAllRanges is called and the editor still\n    // has focus (which will mess up the editor's selection state).\n    view.dom.blur();\n    sel.removeAllRanges();\n    sel.addRange(range);\n    setTimeout(() => {\n        if (wrap.parentNode)\n            wrap.parentNode.removeChild(wrap);\n        view.focus();\n    }, 50);\n}\n// This is very crude, but unfortunately both these browsers _pretend_\n// that they have a clipboard APIall the objects and methods are\n// there, they just don't work, and they are hard to test.\nconst brokenClipboardAPI = (ie && ie_version < 15) ||\n    (ios && webkit_version < 604);\nhandlers.copy = editHandlers.cut = (view, _event) => {\n    let event = _event;\n    let sel = view.state.selection, cut = event.type == \"cut\";\n    if (sel.empty)\n        return;\n    // IE and Edge's clipboard interface is completely broken\n    let data = brokenClipboardAPI ? null : event.clipboardData;\n    let slice = sel.content(), { dom, text } = serializeForClipboard(view, slice);\n    if (data) {\n        event.preventDefault();\n        data.clearData();\n        data.setData(\"text/html\", dom.innerHTML);\n        data.setData(\"text/plain\", text);\n    }\n    else {\n        captureCopy(view, dom);\n    }\n    if (cut)\n        view.dispatch(view.state.tr.deleteSelection().scrollIntoView().setMeta(\"uiEvent\", \"cut\"));\n};\nfunction sliceSingleNode(slice) {\n    return slice.openStart == 0 && slice.openEnd == 0 && slice.content.childCount == 1 ? slice.content.firstChild : null;\n}\nfunction capturePaste(view, event) {\n    if (!view.dom.parentNode)\n        return;\n    let plainText = view.input.shiftKey || view.state.selection.$from.parent.type.spec.code;\n    let target = view.dom.parentNode.appendChild(document.createElement(plainText ? \"textarea\" : \"div\"));\n    if (!plainText)\n        target.contentEditable = \"true\";\n    target.style.cssText = \"position: fixed; left: -10000px; top: 10px\";\n    target.focus();\n    setTimeout(() => {\n        view.focus();\n        if (target.parentNode)\n            target.parentNode.removeChild(target);\n        if (plainText)\n            doPaste(view, target.value, null, event);\n        else\n            doPaste(view, target.textContent, target.innerHTML, event);\n    }, 50);\n}\nfunction doPaste(view, text, html, event) {\n    let slice = parseFromClipboard(view, text, html, view.input.shiftKey, view.state.selection.$from);\n    if (view.someProp(\"handlePaste\", f => f(view, event, slice || Slice.empty)))\n        return true;\n    if (!slice)\n        return false;\n    let singleNode = sliceSingleNode(slice);\n    let tr = singleNode\n        ? view.state.tr.replaceSelectionWith(singleNode, view.input.shiftKey)\n        : view.state.tr.replaceSelection(slice);\n    view.dispatch(tr.scrollIntoView().setMeta(\"paste\", true).setMeta(\"uiEvent\", \"paste\"));\n    return true;\n}\neditHandlers.paste = (view, _event) => {\n    let event = _event;\n    // Handling paste from JavaScript during composition is very poorly\n    // handled by browsers, so as a dodgy but preferable kludge, we just\n    // let the browser do its native thing there, except on Android,\n    // where the editor is almost always composing.\n    if (view.composing && !android)\n        return;\n    let data = brokenClipboardAPI ? null : event.clipboardData;\n    if (data && doPaste(view, data.getData(\"text/plain\"), data.getData(\"text/html\"), event))\n        event.preventDefault();\n    else\n        capturePaste(view, event);\n};\nclass Dragging {\n    constructor(slice, move) {\n        this.slice = slice;\n        this.move = move;\n    }\n}\nconst dragCopyModifier = mac ? \"altKey\" : \"ctrlKey\";\nhandlers.dragstart = (view, _event) => {\n    let event = _event;\n    let mouseDown = view.input.mouseDown;\n    if (mouseDown)\n        mouseDown.done();\n    if (!event.dataTransfer)\n        return;\n    let sel = view.state.selection;\n    let pos = sel.empty ? null : view.posAtCoords(eventCoords(event));\n    if (pos && pos.pos >= sel.from && pos.pos <= (sel instanceof NodeSelection ? sel.to - 1 : sel.to)) ;\n    else if (mouseDown && mouseDown.mightDrag) {\n        view.dispatch(view.state.tr.setSelection(NodeSelection.create(view.state.doc, mouseDown.mightDrag.pos)));\n    }\n    else if (event.target && event.target.nodeType == 1) {\n        let desc = view.docView.nearestDesc(event.target, true);\n        if (desc && desc.node.type.spec.draggable && desc != view.docView)\n            view.dispatch(view.state.tr.setSelection(NodeSelection.create(view.state.doc, desc.posBefore)));\n    }\n    let slice = view.state.selection.content(), { dom, text } = serializeForClipboard(view, slice);\n    event.dataTransfer.clearData();\n    event.dataTransfer.setData(brokenClipboardAPI ? \"Text\" : \"text/html\", dom.innerHTML);\n    // See https://github.com/ProseMirror/prosemirror/issues/1156\n    event.dataTransfer.effectAllowed = \"copyMove\";\n    if (!brokenClipboardAPI)\n        event.dataTransfer.setData(\"text/plain\", text);\n    view.dragging = new Dragging(slice, !event[dragCopyModifier]);\n};\nhandlers.dragend = view => {\n    let dragging = view.dragging;\n    window.setTimeout(() => {\n        if (view.dragging == dragging)\n            view.dragging = null;\n    }, 50);\n};\neditHandlers.dragover = editHandlers.dragenter = (_, e) => e.preventDefault();\neditHandlers.drop = (view, _event) => {\n    let event = _event;\n    let dragging = view.dragging;\n    view.dragging = null;\n    if (!event.dataTransfer)\n        return;\n    let eventPos = view.posAtCoords(eventCoords(event));\n    if (!eventPos)\n        return;\n    let $mouse = view.state.doc.resolve(eventPos.pos);\n    if (!$mouse)\n        return;\n    let slice = dragging && dragging.slice;\n    if (slice) {\n        view.someProp(\"transformPasted\", f => { slice = f(slice); });\n    }\n    else {\n        slice = parseFromClipboard(view, event.dataTransfer.getData(brokenClipboardAPI ? \"Text\" : \"text/plain\"), brokenClipboardAPI ? null : event.dataTransfer.getData(\"text/html\"), false, $mouse);\n    }\n    let move = !!(dragging && !event[dragCopyModifier]);\n    if (view.someProp(\"handleDrop\", f => f(view, event, slice || Slice.empty, move))) {\n        event.preventDefault();\n        return;\n    }\n    if (!slice)\n        return;\n    event.preventDefault();\n    let insertPos = slice ? dropPoint(view.state.doc, $mouse.pos, slice) : $mouse.pos;\n    if (insertPos == null)\n        insertPos = $mouse.pos;\n    let tr = view.state.tr;\n    if (move)\n        tr.deleteSelection();\n    let pos = tr.mapping.map(insertPos);\n    let isNode = slice.openStart == 0 && slice.openEnd == 0 && slice.content.childCount == 1;\n    let beforeInsert = tr.doc;\n    if (isNode)\n        tr.replaceRangeWith(pos, pos, slice.content.firstChild);\n    else\n        tr.replaceRange(pos, pos, slice);\n    if (tr.doc.eq(beforeInsert))\n        return;\n    let $pos = tr.doc.resolve(pos);\n    if (isNode && NodeSelection.isSelectable(slice.content.firstChild) &&\n        $pos.nodeAfter && $pos.nodeAfter.sameMarkup(slice.content.firstChild)) {\n        tr.setSelection(new NodeSelection($pos));\n    }\n    else {\n        let end = tr.mapping.map(insertPos);\n        tr.mapping.maps[tr.mapping.maps.length - 1].forEach((_from, _to, _newFrom, newTo) => end = newTo);\n        tr.setSelection(selectionBetween(view, $pos, tr.doc.resolve(end)));\n    }\n    view.focus();\n    view.dispatch(tr.setMeta(\"uiEvent\", \"drop\"));\n};\nhandlers.focus = view => {\n    if (!view.focused) {\n        view.domObserver.stop();\n        view.dom.classList.add(\"ProseMirror-focused\");\n        view.domObserver.start();\n        view.focused = true;\n        setTimeout(() => {\n            if (view.docView && view.hasFocus() && !view.domObserver.currentSelection.eq(view.domSelection()))\n                selectionToDOM(view);\n        }, 20);\n    }\n};\nhandlers.blur = (view, _event) => {\n    let event = _event;\n    if (view.focused) {\n        view.domObserver.stop();\n        view.dom.classList.remove(\"ProseMirror-focused\");\n        view.domObserver.start();\n        if (event.relatedTarget && view.dom.contains(event.relatedTarget))\n            view.domObserver.currentSelection.clear();\n        view.focused = false;\n    }\n};\nhandlers.beforeinput = (view, _event) => {\n    let event = _event;\n    // We should probably do more with beforeinput events, but support\n    // is so spotty that I'm still waiting to see where they are going.\n    // Very specific hack to deal with backspace sometimes failing on\n    // Chrome Android when after an uneditable node.\n    if (chrome && android && event.inputType == \"deleteContentBackward\") {\n        view.domObserver.flushSoon();\n        let { domChangeCount } = view.input;\n        setTimeout(() => {\n            if (view.input.domChangeCount != domChangeCount)\n                return; // Event already had some effect\n            // This bug tends to close the virtual keyboard, so we refocus\n            view.dom.blur();\n            view.focus();\n            if (view.someProp(\"handleKeyDown\", f => f(view, keyEvent(8, \"Backspace\"))))\n                return;\n            let { $cursor } = view.state.selection;\n            // Crude approximation of backspace behavior when no command handled it\n            if ($cursor && $cursor.pos > 0)\n                view.dispatch(view.state.tr.delete($cursor.pos - 1, $cursor.pos).scrollIntoView());\n        }, 50);\n    }\n};\n// Make sure all handlers get registered\nfor (let prop in editHandlers)\n    handlers[prop] = editHandlers[prop];\n\nfunction compareObjs(a, b) {\n    if (a == b)\n        return true;\n    for (let p in a)\n        if (a[p] !== b[p])\n            return false;\n    for (let p in b)\n        if (!(p in a))\n            return false;\n    return true;\n}\nclass WidgetType {\n    constructor(toDOM, spec) {\n        this.toDOM = toDOM;\n        this.spec = spec || noSpec;\n        this.side = this.spec.side || 0;\n    }\n    map(mapping, span, offset, oldOffset) {\n        let { pos, deleted } = mapping.mapResult(span.from + oldOffset, this.side < 0 ? -1 : 1);\n        return deleted ? null : new Decoration(pos - offset, pos - offset, this);\n    }\n    valid() { return true; }\n    eq(other) {\n        return this == other ||\n            (other instanceof WidgetType &&\n                (this.spec.key && this.spec.key == other.spec.key ||\n                    this.toDOM == other.toDOM && compareObjs(this.spec, other.spec)));\n    }\n    destroy(node) {\n        if (this.spec.destroy)\n            this.spec.destroy(node);\n    }\n}\nclass InlineType {\n    constructor(attrs, spec) {\n        this.attrs = attrs;\n        this.spec = spec || noSpec;\n    }\n    map(mapping, span, offset, oldOffset) {\n        let from = mapping.map(span.from + oldOffset, this.spec.inclusiveStart ? -1 : 1) - offset;\n        let to = mapping.map(span.to + oldOffset, this.spec.inclusiveEnd ? 1 : -1) - offset;\n        return from >= to ? null : new Decoration(from, to, this);\n    }\n    valid(_, span) { return span.from < span.to; }\n    eq(other) {\n        return this == other ||\n            (other instanceof InlineType && compareObjs(this.attrs, other.attrs) &&\n                compareObjs(this.spec, other.spec));\n    }\n    static is(span) { return span.type instanceof InlineType; }\n    destroy() { }\n}\nclass NodeType {\n    constructor(attrs, spec) {\n        this.attrs = attrs;\n        this.spec = spec || noSpec;\n    }\n    map(mapping, span, offset, oldOffset) {\n        let from = mapping.mapResult(span.from + oldOffset, 1);\n        if (from.deleted)\n            return null;\n        let to = mapping.mapResult(span.to + oldOffset, -1);\n        if (to.deleted || to.pos <= from.pos)\n            return null;\n        return new Decoration(from.pos - offset, to.pos - offset, this);\n    }\n    valid(node, span) {\n        let { index, offset } = node.content.findIndex(span.from), child;\n        return offset == span.from && !(child = node.child(index)).isText && offset + child.nodeSize == span.to;\n    }\n    eq(other) {\n        return this == other ||\n            (other instanceof NodeType && compareObjs(this.attrs, other.attrs) &&\n                compareObjs(this.spec, other.spec));\n    }\n    destroy() { }\n}\n/**\nDecoration objects can be provided to the view through the\n[`decorations` prop](https://prosemirror.net/docs/ref/#view.EditorProps.decorations). They come in\nseveral variantssee the static members of this class for details.\n*/\nclass Decoration {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The start position of the decoration.\n    */\n    from, \n    /**\n    The end position. Will be the same as `from` for [widget\n    decorations](https://prosemirror.net/docs/ref/#view.Decoration^widget).\n    */\n    to, \n    /**\n    @internal\n    */\n    type) {\n        this.from = from;\n        this.to = to;\n        this.type = type;\n    }\n    /**\n    @internal\n    */\n    copy(from, to) {\n        return new Decoration(from, to, this.type);\n    }\n    /**\n    @internal\n    */\n    eq(other, offset = 0) {\n        return this.type.eq(other.type) && this.from + offset == other.from && this.to + offset == other.to;\n    }\n    /**\n    @internal\n    */\n    map(mapping, offset, oldOffset) {\n        return this.type.map(mapping, this, offset, oldOffset);\n    }\n    /**\n    Creates a widget decoration, which is a DOM node that's shown in\n    the document at the given position. It is recommended that you\n    delay rendering the widget by passing a function that will be\n    called when the widget is actually drawn in a view, but you can\n    also directly pass a DOM node. `getPos` can be used to find the\n    widget's current document position.\n    */\n    static widget(pos, toDOM, spec) {\n        return new Decoration(pos, pos, new WidgetType(toDOM, spec));\n    }\n    /**\n    Creates an inline decoration, which adds the given attributes to\n    each inline node between `from` and `to`.\n    */\n    static inline(from, to, attrs, spec) {\n        return new Decoration(from, to, new InlineType(attrs, spec));\n    }\n    /**\n    Creates a node decoration. `from` and `to` should point precisely\n    before and after a node in the document. That node, and only that\n    node, will receive the given attributes.\n    */\n    static node(from, to, attrs, spec) {\n        return new Decoration(from, to, new NodeType(attrs, spec));\n    }\n    /**\n    The spec provided when creating this decoration. Can be useful\n    if you've stored extra information in that object.\n    */\n    get spec() { return this.type.spec; }\n    /**\n    @internal\n    */\n    get inline() { return this.type instanceof InlineType; }\n}\nconst none = [], noSpec = {};\n/**\nA collection of [decorations](https://prosemirror.net/docs/ref/#view.Decoration), organized in such\na way that the drawing algorithm can efficiently use and compare\nthem. This is a persistent data structureit is not modified,\nupdates create a new value.\n*/\nclass DecorationSet {\n    /**\n    @internal\n    */\n    constructor(local, children) {\n        this.local = local.length ? local : none;\n        this.children = children.length ? children : none;\n    }\n    /**\n    Create a set of decorations, using the structure of the given\n    document.\n    */\n    static create(doc, decorations) {\n        return decorations.length ? buildTree(decorations, doc, 0, noSpec) : empty;\n    }\n    /**\n    Find all decorations in this set which touch the given range\n    (including decorations that start or end directly at the\n    boundaries) and match the given predicate on their spec. When\n    `start` and `end` are omitted, all decorations in the set are\n    considered. When `predicate` isn't given, all decorations are\n    assumed to match.\n    */\n    find(start, end, predicate) {\n        let result = [];\n        this.findInner(start == null ? 0 : start, end == null ? 1e9 : end, result, 0, predicate);\n        return result;\n    }\n    findInner(start, end, result, offset, predicate) {\n        for (let i = 0; i < this.local.length; i++) {\n            let span = this.local[i];\n            if (span.from <= end && span.to >= start && (!predicate || predicate(span.spec)))\n                result.push(span.copy(span.from + offset, span.to + offset));\n        }\n        for (let i = 0; i < this.children.length; i += 3) {\n            if (this.children[i] < end && this.children[i + 1] > start) {\n                let childOff = this.children[i] + 1;\n                this.children[i + 2].findInner(start - childOff, end - childOff, result, offset + childOff, predicate);\n            }\n        }\n    }\n    /**\n    Map the set of decorations in response to a change in the\n    document.\n    */\n    map(mapping, doc, options) {\n        if (this == empty || mapping.maps.length == 0)\n            return this;\n        return this.mapInner(mapping, doc, 0, 0, options || noSpec);\n    }\n    /**\n    @internal\n    */\n    mapInner(mapping, node, offset, oldOffset, options) {\n        let newLocal;\n        for (let i = 0; i < this.local.length; i++) {\n            let mapped = this.local[i].map(mapping, offset, oldOffset);\n            if (mapped && mapped.type.valid(node, mapped))\n                (newLocal || (newLocal = [])).push(mapped);\n            else if (options.onRemove)\n                options.onRemove(this.local[i].spec);\n        }\n        if (this.children.length)\n            return mapChildren(this.children, newLocal || [], mapping, node, offset, oldOffset, options);\n        else\n            return newLocal ? new DecorationSet(newLocal.sort(byPos), none) : empty;\n    }\n    /**\n    Add the given array of decorations to the ones in the set,\n    producing a new set. Needs access to the current document to\n    create the appropriate tree structure.\n    */\n    add(doc, decorations) {\n        if (!decorations.length)\n            return this;\n        if (this == empty)\n            return DecorationSet.create(doc, decorations);\n        return this.addInner(doc, decorations, 0);\n    }\n    addInner(doc, decorations, offset) {\n        let children, childIndex = 0;\n        doc.forEach((childNode, childOffset) => {\n            let baseOffset = childOffset + offset, found;\n            if (!(found = takeSpansForNode(decorations, childNode, baseOffset)))\n                return;\n            if (!children)\n                children = this.children.slice();\n            while (childIndex < children.length && children[childIndex] < childOffset)\n                childIndex += 3;\n            if (children[childIndex] == childOffset)\n                children[childIndex + 2] = children[childIndex + 2].addInner(childNode, found, baseOffset + 1);\n            else\n                children.splice(childIndex, 0, childOffset, childOffset + childNode.nodeSize, buildTree(found, childNode, baseOffset + 1, noSpec));\n            childIndex += 3;\n        });\n        let local = moveSpans(childIndex ? withoutNulls(decorations) : decorations, -offset);\n        for (let i = 0; i < local.length; i++)\n            if (!local[i].type.valid(doc, local[i]))\n                local.splice(i--, 1);\n        return new DecorationSet(local.length ? this.local.concat(local).sort(byPos) : this.local, children || this.children);\n    }\n    /**\n    Create a new set that contains the decorations in this set, minus\n    the ones in the given array.\n    */\n    remove(decorations) {\n        if (decorations.length == 0 || this == empty)\n            return this;\n        return this.removeInner(decorations, 0);\n    }\n    removeInner(decorations, offset) {\n        let children = this.children, local = this.local;\n        for (let i = 0; i < children.length; i += 3) {\n            let found;\n            let from = children[i] + offset, to = children[i + 1] + offset;\n            for (let j = 0, span; j < decorations.length; j++)\n                if (span = decorations[j]) {\n                    if (span.from > from && span.to < to) {\n                        decorations[j] = null;\n                        (found || (found = [])).push(span);\n                    }\n                }\n            if (!found)\n                continue;\n            if (children == this.children)\n                children = this.children.slice();\n            let removed = children[i + 2].removeInner(found, from + 1);\n            if (removed != empty) {\n                children[i + 2] = removed;\n            }\n            else {\n                children.splice(i, 3);\n                i -= 3;\n            }\n        }\n        if (local.length)\n            for (let i = 0, span; i < decorations.length; i++)\n                if (span = decorations[i]) {\n                    for (let j = 0; j < local.length; j++)\n                        if (local[j].eq(span, offset)) {\n                            if (local == this.local)\n                                local = this.local.slice();\n                            local.splice(j--, 1);\n                        }\n                }\n        if (children == this.children && local == this.local)\n            return this;\n        return local.length || children.length ? new DecorationSet(local, children) : empty;\n    }\n    /**\n    @internal\n    */\n    forChild(offset, node) {\n        if (this == empty)\n            return this;\n        if (node.isLeaf)\n            return DecorationSet.empty;\n        let child, local;\n        for (let i = 0; i < this.children.length; i += 3)\n            if (this.children[i] >= offset) {\n                if (this.children[i] == offset)\n                    child = this.children[i + 2];\n                break;\n            }\n        let start = offset + 1, end = start + node.content.size;\n        for (let i = 0; i < this.local.length; i++) {\n            let dec = this.local[i];\n            if (dec.from < end && dec.to > start && (dec.type instanceof InlineType)) {\n                let from = Math.max(start, dec.from) - start, to = Math.min(end, dec.to) - start;\n                if (from < to)\n                    (local || (local = [])).push(dec.copy(from, to));\n            }\n        }\n        if (local) {\n            let localSet = new DecorationSet(local.sort(byPos), none);\n            return child ? new DecorationGroup([localSet, child]) : localSet;\n        }\n        return child || empty;\n    }\n    /**\n    @internal\n    */\n    eq(other) {\n        if (this == other)\n            return true;\n        if (!(other instanceof DecorationSet) ||\n            this.local.length != other.local.length ||\n            this.children.length != other.children.length)\n            return false;\n        for (let i = 0; i < this.local.length; i++)\n            if (!this.local[i].eq(other.local[i]))\n                return false;\n        for (let i = 0; i < this.children.length; i += 3)\n            if (this.children[i] != other.children[i] ||\n                this.children[i + 1] != other.children[i + 1] ||\n                !this.children[i + 2].eq(other.children[i + 2]))\n                return false;\n        return true;\n    }\n    /**\n    @internal\n    */\n    locals(node) {\n        return removeOverlap(this.localsInner(node));\n    }\n    /**\n    @internal\n    */\n    localsInner(node) {\n        if (this == empty)\n            return none;\n        if (node.inlineContent || !this.local.some(InlineType.is))\n            return this.local;\n        let result = [];\n        for (let i = 0; i < this.local.length; i++) {\n            if (!(this.local[i].type instanceof InlineType))\n                result.push(this.local[i]);\n        }\n        return result;\n    }\n}\n/**\nThe empty set of decorations.\n*/\nDecorationSet.empty = new DecorationSet([], []);\n/**\n@internal\n*/\nDecorationSet.removeOverlap = removeOverlap;\nconst empty = DecorationSet.empty;\n// An abstraction that allows the code dealing with decorations to\n// treat multiple DecorationSet objects as if it were a single object\n// with (a subset of) the same interface.\nclass DecorationGroup {\n    constructor(members) {\n        this.members = members;\n    }\n    map(mapping, doc) {\n        const mappedDecos = this.members.map(member => member.map(mapping, doc, noSpec));\n        return DecorationGroup.from(mappedDecos);\n    }\n    forChild(offset, child) {\n        if (child.isLeaf)\n            return DecorationSet.empty;\n        let found = [];\n        for (let i = 0; i < this.members.length; i++) {\n            let result = this.members[i].forChild(offset, child);\n            if (result == empty)\n                continue;\n            if (result instanceof DecorationGroup)\n                found = found.concat(result.members);\n            else\n                found.push(result);\n        }\n        return DecorationGroup.from(found);\n    }\n    eq(other) {\n        if (!(other instanceof DecorationGroup) ||\n            other.members.length != this.members.length)\n            return false;\n        for (let i = 0; i < this.members.length; i++)\n            if (!this.members[i].eq(other.members[i]))\n                return false;\n        return true;\n    }\n    locals(node) {\n        let result, sorted = true;\n        for (let i = 0; i < this.members.length; i++) {\n            let locals = this.members[i].localsInner(node);\n            if (!locals.length)\n                continue;\n            if (!result) {\n                result = locals;\n            }\n            else {\n                if (sorted) {\n                    result = result.slice();\n                    sorted = false;\n                }\n                for (let j = 0; j < locals.length; j++)\n                    result.push(locals[j]);\n            }\n        }\n        return result ? removeOverlap(sorted ? result : result.sort(byPos)) : none;\n    }\n    // Create a group for the given array of decoration sets, or return\n    // a single set when possible.\n    static from(members) {\n        switch (members.length) {\n            case 0: return empty;\n            case 1: return members[0];\n            default: return new DecorationGroup(members);\n        }\n    }\n}\nfunction mapChildren(oldChildren, newLocal, mapping, node, offset, oldOffset, options) {\n    let children = oldChildren.slice();\n    // Mark the children that are directly touched by changes, and\n    // move those that are after the changes.\n    let shift = (oldStart, oldEnd, newStart, newEnd) => {\n        for (let i = 0; i < children.length; i += 3) {\n            let end = children[i + 1], dSize;\n            if (end < 0 || oldStart > end + oldOffset)\n                continue;\n            let start = children[i] + oldOffset;\n            if (oldEnd >= start) {\n                children[i + 1] = oldStart <= start ? -2 : -1;\n            }\n            else if (newStart >= offset && (dSize = (newEnd - newStart) - (oldEnd - oldStart))) {\n                children[i] += dSize;\n                children[i + 1] += dSize;\n            }\n        }\n    };\n    for (let i = 0; i < mapping.maps.length; i++)\n        mapping.maps[i].forEach(shift);\n    // Find the child nodes that still correspond to a single node,\n    // recursively call mapInner on them and update their positions.\n    let mustRebuild = false;\n    for (let i = 0; i < children.length; i += 3)\n        if (children[i + 1] < 0) { // Touched nodes\n            if (children[i + 1] == -2) {\n                mustRebuild = true;\n                children[i + 1] = -1;\n                continue;\n            }\n            let from = mapping.map(oldChildren[i] + oldOffset), fromLocal = from - offset;\n            if (fromLocal < 0 || fromLocal >= node.content.size) {\n                mustRebuild = true;\n                continue;\n            }\n            // Must read oldChildren because children was tagged with -1\n            let to = mapping.map(oldChildren[i + 1] + oldOffset, -1), toLocal = to - offset;\n            let { index, offset: childOffset } = node.content.findIndex(fromLocal);\n            let childNode = node.maybeChild(index);\n            if (childNode && childOffset == fromLocal && childOffset + childNode.nodeSize == toLocal) {\n                let mapped = children[i + 2]\n                    .mapInner(mapping, childNode, from + 1, oldChildren[i] + oldOffset + 1, options);\n                if (mapped != empty) {\n                    children[i] = fromLocal;\n                    children[i + 1] = toLocal;\n                    children[i + 2] = mapped;\n                }\n                else {\n                    children[i + 1] = -2;\n                    mustRebuild = true;\n                }\n            }\n            else {\n                mustRebuild = true;\n            }\n        }\n    // Remaining children must be collected and rebuilt into the appropriate structure\n    if (mustRebuild) {\n        let decorations = mapAndGatherRemainingDecorations(children, oldChildren, newLocal, mapping, offset, oldOffset, options);\n        let built = buildTree(decorations, node, 0, options);\n        newLocal = built.local;\n        for (let i = 0; i < children.length; i += 3)\n            if (children[i + 1] < 0) {\n                children.splice(i, 3);\n                i -= 3;\n            }\n        for (let i = 0, j = 0; i < built.children.length; i += 3) {\n            let from = built.children[i];\n            while (j < children.length && children[j] < from)\n                j += 3;\n            children.splice(j, 0, built.children[i], built.children[i + 1], built.children[i + 2]);\n        }\n    }\n    return new DecorationSet(newLocal.sort(byPos), children);\n}\nfunction moveSpans(spans, offset) {\n    if (!offset || !spans.length)\n        return spans;\n    let result = [];\n    for (let i = 0; i < spans.length; i++) {\n        let span = spans[i];\n        result.push(new Decoration(span.from + offset, span.to + offset, span.type));\n    }\n    return result;\n}\nfunction mapAndGatherRemainingDecorations(children, oldChildren, decorations, mapping, offset, oldOffset, options) {\n    // Gather all decorations from the remaining marked children\n    function gather(set, oldOffset) {\n        for (let i = 0; i < set.local.length; i++) {\n            let mapped = set.local[i].map(mapping, offset, oldOffset);\n            if (mapped)\n                decorations.push(mapped);\n            else if (options.onRemove)\n                options.onRemove(set.local[i].spec);\n        }\n        for (let i = 0; i < set.children.length; i += 3)\n            gather(set.children[i + 2], set.children[i] + oldOffset + 1);\n    }\n    for (let i = 0; i < children.length; i += 3)\n        if (children[i + 1] == -1)\n            gather(children[i + 2], oldChildren[i] + oldOffset + 1);\n    return decorations;\n}\nfunction takeSpansForNode(spans, node, offset) {\n    if (node.isLeaf)\n        return null;\n    let end = offset + node.nodeSize, found = null;\n    for (let i = 0, span; i < spans.length; i++) {\n        if ((span = spans[i]) && span.from > offset && span.to < end) {\n            (found || (found = [])).push(span);\n            spans[i] = null;\n        }\n    }\n    return found;\n}\nfunction withoutNulls(array) {\n    let result = [];\n    for (let i = 0; i < array.length; i++)\n        if (array[i] != null)\n            result.push(array[i]);\n    return result;\n}\n// Build up a tree that corresponds to a set of decorations. `offset`\n// is a base offset that should be subtracted from the `from` and `to`\n// positions in the spans (so that we don't have to allocate new spans\n// for recursive calls).\nfunction buildTree(spans, node, offset, options) {\n    let children = [], hasNulls = false;\n    node.forEach((childNode, localStart) => {\n        let found = takeSpansForNode(spans, childNode, localStart + offset);\n        if (found) {\n            hasNulls = true;\n            let subtree = buildTree(found, childNode, offset + localStart + 1, options);\n            if (subtree != empty)\n                children.push(localStart, localStart + childNode.nodeSize, subtree);\n        }\n    });\n    let locals = moveSpans(hasNulls ? withoutNulls(spans) : spans, -offset).sort(byPos);\n    for (let i = 0; i < locals.length; i++)\n        if (!locals[i].type.valid(node, locals[i])) {\n            if (options.onRemove)\n                options.onRemove(locals[i].spec);\n            locals.splice(i--, 1);\n        }\n    return locals.length || children.length ? new DecorationSet(locals, children) : empty;\n}\n// Used to sort decorations so that ones with a low start position\n// come first, and within a set with the same start position, those\n// with an smaller end position come first.\nfunction byPos(a, b) {\n    return a.from - b.from || a.to - b.to;\n}\n// Scan a sorted array of decorations for partially overlapping spans,\n// and split those so that only fully overlapping spans are left (to\n// make subsequent rendering easier). Will return the input array if\n// no partially overlapping spans are found (the common case).\nfunction removeOverlap(spans) {\n    let working = spans;\n    for (let i = 0; i < working.length - 1; i++) {\n        let span = working[i];\n        if (span.from != span.to)\n            for (let j = i + 1; j < working.length; j++) {\n                let next = working[j];\n                if (next.from == span.from) {\n                    if (next.to != span.to) {\n                        if (working == spans)\n                            working = spans.slice();\n                        // Followed by a partially overlapping larger span. Split that\n                        // span.\n                        working[j] = next.copy(next.from, span.to);\n                        insertAhead(working, j + 1, next.copy(span.to, next.to));\n                    }\n                    continue;\n                }\n                else {\n                    if (next.from < span.to) {\n                        if (working == spans)\n                            working = spans.slice();\n                        // The end of this one overlaps with a subsequent span. Split\n                        // this one.\n                        working[i] = span.copy(span.from, next.from);\n                        insertAhead(working, j, span.copy(next.from, span.to));\n                    }\n                    break;\n                }\n            }\n    }\n    return working;\n}\nfunction insertAhead(array, i, deco) {\n    while (i < array.length && byPos(deco, array[i]) > 0)\n        i++;\n    array.splice(i, 0, deco);\n}\n// Get the decorations associated with the current props of a view.\nfunction viewDecorations(view) {\n    let found = [];\n    view.someProp(\"decorations\", f => {\n        let result = f(view.state);\n        if (result && result != empty)\n            found.push(result);\n    });\n    if (view.cursorWrapper)\n        found.push(DecorationSet.create(view.state.doc, [view.cursorWrapper.deco]));\n    return DecorationGroup.from(found);\n}\n\nconst observeOptions = {\n    childList: true,\n    characterData: true,\n    characterDataOldValue: true,\n    attributes: true,\n    attributeOldValue: true,\n    subtree: true\n};\n// IE11 has very broken mutation observers, so we also listen to DOMCharacterDataModified\nconst useCharData = ie && ie_version <= 11;\nclass SelectionState {\n    constructor() {\n        this.anchorNode = null;\n        this.anchorOffset = 0;\n        this.focusNode = null;\n        this.focusOffset = 0;\n    }\n    set(sel) {\n        this.anchorNode = sel.anchorNode;\n        this.anchorOffset = sel.anchorOffset;\n        this.focusNode = sel.focusNode;\n        this.focusOffset = sel.focusOffset;\n    }\n    clear() {\n        this.anchorNode = this.focusNode = null;\n    }\n    eq(sel) {\n        return sel.anchorNode == this.anchorNode && sel.anchorOffset == this.anchorOffset &&\n            sel.focusNode == this.focusNode && sel.focusOffset == this.focusOffset;\n    }\n}\nclass DOMObserver {\n    constructor(view, handleDOMChange) {\n        this.view = view;\n        this.handleDOMChange = handleDOMChange;\n        this.queue = [];\n        this.flushingSoon = -1;\n        this.observer = null;\n        this.currentSelection = new SelectionState;\n        this.onCharData = null;\n        this.suppressingSelectionUpdates = false;\n        this.observer = window.MutationObserver &&\n            new window.MutationObserver(mutations => {\n                for (let i = 0; i < mutations.length; i++)\n                    this.queue.push(mutations[i]);\n                // IE11 will sometimes (on backspacing out a single character\n                // text node after a BR node) call the observer callback\n                // before actually updating the DOM, which will cause\n                // ProseMirror to miss the change (see #930)\n                if (ie && ie_version <= 11 && mutations.some(m => m.type == \"childList\" && m.removedNodes.length ||\n                    m.type == \"characterData\" && m.oldValue.length > m.target.nodeValue.length))\n                    this.flushSoon();\n                else\n                    this.flush();\n            });\n        if (useCharData) {\n            this.onCharData = e => {\n                this.queue.push({ target: e.target, type: \"characterData\", oldValue: e.prevValue });\n                this.flushSoon();\n            };\n        }\n        this.onSelectionChange = this.onSelectionChange.bind(this);\n    }\n    flushSoon() {\n        if (this.flushingSoon < 0)\n            this.flushingSoon = window.setTimeout(() => { this.flushingSoon = -1; this.flush(); }, 20);\n    }\n    forceFlush() {\n        if (this.flushingSoon > -1) {\n            window.clearTimeout(this.flushingSoon);\n            this.flushingSoon = -1;\n            this.flush();\n        }\n    }\n    start() {\n        if (this.observer)\n            this.observer.observe(this.view.dom, observeOptions);\n        if (this.onCharData)\n            this.view.dom.addEventListener(\"DOMCharacterDataModified\", this.onCharData);\n        this.connectSelection();\n    }\n    stop() {\n        if (this.observer) {\n            let take = this.observer.takeRecords();\n            if (take.length) {\n                for (let i = 0; i < take.length; i++)\n                    this.queue.push(take[i]);\n                window.setTimeout(() => this.flush(), 20);\n            }\n            this.observer.disconnect();\n        }\n        if (this.onCharData)\n            this.view.dom.removeEventListener(\"DOMCharacterDataModified\", this.onCharData);\n        this.disconnectSelection();\n    }\n    connectSelection() {\n        this.view.dom.ownerDocument.addEventListener(\"selectionchange\", this.onSelectionChange);\n    }\n    disconnectSelection() {\n        this.view.dom.ownerDocument.removeEventListener(\"selectionchange\", this.onSelectionChange);\n    }\n    suppressSelectionUpdates() {\n        this.suppressingSelectionUpdates = true;\n        setTimeout(() => this.suppressingSelectionUpdates = false, 50);\n    }\n    onSelectionChange() {\n        if (!hasFocusAndSelection(this.view))\n            return;\n        if (this.suppressingSelectionUpdates)\n            return selectionToDOM(this.view);\n        // Deletions on IE11 fire their events in the wrong order, giving\n        // us a selection change event before the DOM changes are\n        // reported.\n        if (ie && ie_version <= 11 && !this.view.state.selection.empty) {\n            let sel = this.view.domSelection();\n            // Selection.isCollapsed isn't reliable on IE\n            if (sel.focusNode && isEquivalentPosition(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset))\n                return this.flushSoon();\n        }\n        this.flush();\n    }\n    setCurSelection() {\n        this.currentSelection.set(this.view.domSelection());\n    }\n    ignoreSelectionChange(sel) {\n        if (sel.rangeCount == 0)\n            return true;\n        let container = sel.getRangeAt(0).commonAncestorContainer;\n        let desc = this.view.docView.nearestDesc(container);\n        if (desc && desc.ignoreMutation({\n            type: \"selection\",\n            target: container.nodeType == 3 ? container.parentNode : container\n        })) {\n            this.setCurSelection();\n            return true;\n        }\n    }\n    flush() {\n        if (!this.view.docView || this.flushingSoon > -1)\n            return;\n        let mutations = this.observer ? this.observer.takeRecords() : [];\n        if (this.queue.length) {\n            mutations = this.queue.concat(mutations);\n            this.queue.length = 0;\n        }\n        let sel = this.view.domSelection();\n        let newSel = !this.suppressingSelectionUpdates && !this.currentSelection.eq(sel) && hasFocusAndSelection(this.view) && !this.ignoreSelectionChange(sel);\n        let from = -1, to = -1, typeOver = false, added = [];\n        if (this.view.editable) {\n            for (let i = 0; i < mutations.length; i++) {\n                let result = this.registerMutation(mutations[i], added);\n                if (result) {\n                    from = from < 0 ? result.from : Math.min(result.from, from);\n                    to = to < 0 ? result.to : Math.max(result.to, to);\n                    if (result.typeOver)\n                        typeOver = true;\n                }\n            }\n        }\n        if (gecko && added.length > 1) {\n            let brs = added.filter(n => n.nodeName == \"BR\");\n            if (brs.length == 2) {\n                let a = brs[0], b = brs[1];\n                if (a.parentNode && a.parentNode.parentNode == b.parentNode)\n                    b.remove();\n                else\n                    a.remove();\n            }\n        }\n        if (from > -1 || newSel) {\n            if (from > -1) {\n                this.view.docView.markDirty(from, to);\n                checkCSS(this.view);\n            }\n            this.handleDOMChange(from, to, typeOver, added);\n            if (this.view.docView && this.view.docView.dirty)\n                this.view.updateState(this.view.state);\n            else if (!this.currentSelection.eq(sel))\n                selectionToDOM(this.view);\n            this.currentSelection.set(sel);\n        }\n    }\n    registerMutation(mut, added) {\n        // Ignore mutations inside nodes that were already noted as inserted\n        if (added.indexOf(mut.target) > -1)\n            return null;\n        let desc = this.view.docView.nearestDesc(mut.target);\n        if (mut.type == \"attributes\" &&\n            (desc == this.view.docView || mut.attributeName == \"contenteditable\" ||\n                // Firefox sometimes fires spurious events for null/empty styles\n                (mut.attributeName == \"style\" && !mut.oldValue && !mut.target.getAttribute(\"style\"))))\n            return null;\n        if (!desc || desc.ignoreMutation(mut))\n            return null;\n        if (mut.type == \"childList\") {\n            for (let i = 0; i < mut.addedNodes.length; i++)\n                added.push(mut.addedNodes[i]);\n            if (desc.contentDOM && desc.contentDOM != desc.dom && !desc.contentDOM.contains(mut.target))\n                return { from: desc.posBefore, to: desc.posAfter };\n            let prev = mut.previousSibling, next = mut.nextSibling;\n            if (ie && ie_version <= 11 && mut.addedNodes.length) {\n                // IE11 gives us incorrect next/prev siblings for some\n                // insertions, so if there are added nodes, recompute those\n                for (let i = 0; i < mut.addedNodes.length; i++) {\n                    let { previousSibling, nextSibling } = mut.addedNodes[i];\n                    if (!previousSibling || Array.prototype.indexOf.call(mut.addedNodes, previousSibling) < 0)\n                        prev = previousSibling;\n                    if (!nextSibling || Array.prototype.indexOf.call(mut.addedNodes, nextSibling) < 0)\n                        next = nextSibling;\n                }\n            }\n            let fromOffset = prev && prev.parentNode == mut.target\n                ? domIndex(prev) + 1 : 0;\n            let from = desc.localPosFromDOM(mut.target, fromOffset, -1);\n            let toOffset = next && next.parentNode == mut.target\n                ? domIndex(next) : mut.target.childNodes.length;\n            let to = desc.localPosFromDOM(mut.target, toOffset, 1);\n            return { from, to };\n        }\n        else if (mut.type == \"attributes\") {\n            return { from: desc.posAtStart - desc.border, to: desc.posAtEnd + desc.border };\n        }\n        else { // \"characterData\"\n            return {\n                from: desc.posAtStart,\n                to: desc.posAtEnd,\n                // An event was generated for a text change that didn't change\n                // any text. Mark the dom change to fall back to assuming the\n                // selection was typed over with an identical value if it can't\n                // find another change.\n                typeOver: mut.target.nodeValue == mut.oldValue\n            };\n        }\n    }\n}\nlet cssChecked = false;\nfunction checkCSS(view) {\n    if (cssChecked)\n        return;\n    cssChecked = true;\n    if (getComputedStyle(view.dom).whiteSpace == \"normal\")\n        console[\"warn\"](\"ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.\");\n}\n\n// Note that all referencing and parsing is done with the\n// start-of-operation selection and document, since that's the one\n// that the DOM represents. If any changes came in in the meantime,\n// the modification is mapped over those before it is applied, in\n// readDOMChange.\nfunction parseBetween(view, from_, to_) {\n    let { node: parent, fromOffset, toOffset, from, to } = view.docView.parseRange(from_, to_);\n    let domSel = view.domSelection();\n    let find;\n    let anchor = domSel.anchorNode;\n    if (anchor && view.dom.contains(anchor.nodeType == 1 ? anchor : anchor.parentNode)) {\n        find = [{ node: anchor, offset: domSel.anchorOffset }];\n        if (!selectionCollapsed(domSel))\n            find.push({ node: domSel.focusNode, offset: domSel.focusOffset });\n    }\n    // Work around issue in Chrome where backspacing sometimes replaces\n    // the deleted content with a random BR node (issues #799, #831)\n    if (chrome && view.input.lastKeyCode === 8) {\n        for (let off = toOffset; off > fromOffset; off--) {\n            let node = parent.childNodes[off - 1], desc = node.pmViewDesc;\n            if (node.nodeName == \"BR\" && !desc) {\n                toOffset = off;\n                break;\n            }\n            if (!desc || desc.size)\n                break;\n        }\n    }\n    let startDoc = view.state.doc;\n    let parser = view.someProp(\"domParser\") || DOMParser.fromSchema(view.state.schema);\n    let $from = startDoc.resolve(from);\n    let sel = null, doc = parser.parse(parent, {\n        topNode: $from.parent,\n        topMatch: $from.parent.contentMatchAt($from.index()),\n        topOpen: true,\n        from: fromOffset,\n        to: toOffset,\n        preserveWhitespace: $from.parent.type.whitespace == \"pre\" ? \"full\" : true,\n        findPositions: find,\n        ruleFromNode,\n        context: $from\n    });\n    if (find && find[0].pos != null) {\n        let anchor = find[0].pos, head = find[1] && find[1].pos;\n        if (head == null)\n            head = anchor;\n        sel = { anchor: anchor + from, head: head + from };\n    }\n    return { doc, sel, from, to };\n}\nfunction ruleFromNode(dom) {\n    let desc = dom.pmViewDesc;\n    if (desc) {\n        return desc.parseRule();\n    }\n    else if (dom.nodeName == \"BR\" && dom.parentNode) {\n        // Safari replaces the list item or table cell with a BR\n        // directly in the list node (?!) if you delete the last\n        // character in a list item or table cell (#708, #862)\n        if (safari && /^(ul|ol)$/i.test(dom.parentNode.nodeName)) {\n            let skip = document.createElement(\"div\");\n            skip.appendChild(document.createElement(\"li\"));\n            return { skip };\n        }\n        else if (dom.parentNode.lastChild == dom || safari && /^(tr|table)$/i.test(dom.parentNode.nodeName)) {\n            return { ignore: true };\n        }\n    }\n    else if (dom.nodeName == \"IMG\" && dom.getAttribute(\"mark-placeholder\")) {\n        return { ignore: true };\n    }\n    return null;\n}\nfunction readDOMChange(view, from, to, typeOver, addedNodes) {\n    if (from < 0) {\n        let origin = view.input.lastSelectionTime > Date.now() - 50 ? view.input.lastSelectionOrigin : null;\n        let newSel = selectionFromDOM(view, origin);\n        if (newSel && !view.state.selection.eq(newSel)) {\n            let tr = view.state.tr.setSelection(newSel);\n            if (origin == \"pointer\")\n                tr.setMeta(\"pointer\", true);\n            else if (origin == \"key\")\n                tr.scrollIntoView();\n            view.dispatch(tr);\n        }\n        return;\n    }\n    let $before = view.state.doc.resolve(from);\n    let shared = $before.sharedDepth(to);\n    from = $before.before(shared + 1);\n    to = view.state.doc.resolve(to).after(shared + 1);\n    let sel = view.state.selection;\n    let parse = parseBetween(view, from, to);\n    // Chrome sometimes leaves the cursor before the inserted text when\n    // composing after a cursor wrapper. This moves it forward.\n    if (chrome && view.cursorWrapper && parse.sel && parse.sel.anchor == view.cursorWrapper.deco.from) {\n        let text = view.cursorWrapper.deco.type.toDOM.nextSibling;\n        let size = text && text.nodeValue ? text.nodeValue.length : 1;\n        parse.sel = { anchor: parse.sel.anchor + size, head: parse.sel.anchor + size };\n    }\n    let doc = view.state.doc, compare = doc.slice(parse.from, parse.to);\n    let preferredPos, preferredSide;\n    // Prefer anchoring to end when Backspace is pressed\n    if (view.input.lastKeyCode === 8 && Date.now() - 100 < view.input.lastKeyCodeTime) {\n        preferredPos = view.state.selection.to;\n        preferredSide = \"end\";\n    }\n    else {\n        preferredPos = view.state.selection.from;\n        preferredSide = \"start\";\n    }\n    view.input.lastKeyCode = null;\n    let change = findDiff(compare.content, parse.doc.content, parse.from, preferredPos, preferredSide);\n    if ((ios && view.input.lastIOSEnter > Date.now() - 225 || android) &&\n        addedNodes.some(n => n.nodeName == \"DIV\" || n.nodeName == \"P\") &&\n        (!change || change.endA >= change.endB) &&\n        view.someProp(\"handleKeyDown\", f => f(view, keyEvent(13, \"Enter\")))) {\n        view.input.lastIOSEnter = 0;\n        return;\n    }\n    if (!change) {\n        if (typeOver && sel instanceof TextSelection && !sel.empty && sel.$head.sameParent(sel.$anchor) &&\n            !view.composing && !(parse.sel && parse.sel.anchor != parse.sel.head)) {\n            change = { start: sel.from, endA: sel.to, endB: sel.to };\n        }\n        else {\n            if (parse.sel) {\n                let sel = resolveSelection(view, view.state.doc, parse.sel);\n                if (sel && !sel.eq(view.state.selection))\n                    view.dispatch(view.state.tr.setSelection(sel));\n            }\n            return;\n        }\n    }\n    view.input.domChangeCount++;\n    // Handle the case where overwriting a selection by typing matches\n    // the start or end of the selected content, creating a change\n    // that's smaller than what was actually overwritten.\n    if (view.state.selection.from < view.state.selection.to &&\n        change.start == change.endB &&\n        view.state.selection instanceof TextSelection) {\n        if (change.start > view.state.selection.from && change.start <= view.state.selection.from + 2 &&\n            view.state.selection.from >= parse.from) {\n            change.start = view.state.selection.from;\n        }\n        else if (change.endA < view.state.selection.to && change.endA >= view.state.selection.to - 2 &&\n            view.state.selection.to <= parse.to) {\n            change.endB += (view.state.selection.to - change.endA);\n            change.endA = view.state.selection.to;\n        }\n    }\n    // IE11 will insert a non-breaking space _ahead_ of the space after\n    // the cursor space when adding a space before another space. When\n    // that happened, adjust the change to cover the space instead.\n    if (ie && ie_version <= 11 && change.endB == change.start + 1 &&\n        change.endA == change.start && change.start > parse.from &&\n        parse.doc.textBetween(change.start - parse.from - 1, change.start - parse.from + 1) == \" \\u00a0\") {\n        change.start--;\n        change.endA--;\n        change.endB--;\n    }\n    let $from = parse.doc.resolveNoCache(change.start - parse.from);\n    let $to = parse.doc.resolveNoCache(change.endB - parse.from);\n    let $fromA = doc.resolve(change.start);\n    let inlineChange = $from.sameParent($to) && $from.parent.inlineContent && $fromA.end() >= change.endA;\n    let nextSel;\n    // If this looks like the effect of pressing Enter (or was recorded\n    // as being an iOS enter press), just dispatch an Enter key instead.\n    if (((ios && view.input.lastIOSEnter > Date.now() - 225 &&\n        (!inlineChange || addedNodes.some(n => n.nodeName == \"DIV\" || n.nodeName == \"P\"))) ||\n        (!inlineChange && $from.pos < parse.doc.content.size &&\n            (nextSel = Selection.findFrom(parse.doc.resolve($from.pos + 1), 1, true)) &&\n            nextSel.head == $to.pos)) &&\n        view.someProp(\"handleKeyDown\", f => f(view, keyEvent(13, \"Enter\")))) {\n        view.input.lastIOSEnter = 0;\n        return;\n    }\n    // Same for backspace\n    if (view.state.selection.anchor > change.start &&\n        looksLikeJoin(doc, change.start, change.endA, $from, $to) &&\n        view.someProp(\"handleKeyDown\", f => f(view, keyEvent(8, \"Backspace\")))) {\n        if (android && chrome)\n            view.domObserver.suppressSelectionUpdates(); // #820\n        return;\n    }\n    // Chrome Android will occasionally, during composition, delete the\n    // entire composition and then immediately insert it again. This is\n    // used to detect that situation.\n    if (chrome && android && change.endB == change.start)\n        view.input.lastAndroidDelete = Date.now();\n    // This tries to detect Android virtual keyboard\n    // enter-and-pick-suggestion action. That sometimes (see issue\n    // #1059) first fires a DOM mutation, before moving the selection to\n    // the newly created block. And then, because ProseMirror cleans up\n    // the DOM selection, it gives up moving the selection entirely,\n    // leaving the cursor in the wrong place. When that happens, we drop\n    // the new paragraph from the initial change, and fire a simulated\n    // enter key afterwards.\n    if (android && !inlineChange && $from.start() != $to.start() && $to.parentOffset == 0 && $from.depth == $to.depth &&\n        parse.sel && parse.sel.anchor == parse.sel.head && parse.sel.head == change.endA) {\n        change.endB -= 2;\n        $to = parse.doc.resolveNoCache(change.endB - parse.from);\n        setTimeout(() => {\n            view.someProp(\"handleKeyDown\", function (f) { return f(view, keyEvent(13, \"Enter\")); });\n        }, 20);\n    }\n    let chFrom = change.start, chTo = change.endA;\n    let tr, storedMarks, markChange;\n    if (inlineChange) {\n        if ($from.pos == $to.pos) { // Deletion\n            // IE11 sometimes weirdly moves the DOM selection around after\n            // backspacing out the first element in a textblock\n            if (ie && ie_version <= 11 && $from.parentOffset == 0) {\n                view.domObserver.suppressSelectionUpdates();\n                setTimeout(() => selectionToDOM(view), 20);\n            }\n            tr = view.state.tr.delete(chFrom, chTo);\n            storedMarks = doc.resolve(change.start).marksAcross(doc.resolve(change.endA));\n        }\n        else if ( // Adding or removing a mark\n        change.endA == change.endB &&\n            (markChange = isMarkChange($from.parent.content.cut($from.parentOffset, $to.parentOffset), $fromA.parent.content.cut($fromA.parentOffset, change.endA - $fromA.start())))) {\n            tr = view.state.tr;\n            if (markChange.type == \"add\")\n                tr.addMark(chFrom, chTo, markChange.mark);\n            else\n                tr.removeMark(chFrom, chTo, markChange.mark);\n        }\n        else if ($from.parent.child($from.index()).isText && $from.index() == $to.index() - ($to.textOffset ? 0 : 1)) {\n            // Both positions in the same text node -- simply insert text\n            let text = $from.parent.textBetween($from.parentOffset, $to.parentOffset);\n            if (view.someProp(\"handleTextInput\", f => f(view, chFrom, chTo, text)))\n                return;\n            tr = view.state.tr.insertText(text, chFrom, chTo);\n        }\n    }\n    if (!tr)\n        tr = view.state.tr.replace(chFrom, chTo, parse.doc.slice(change.start - parse.from, change.endB - parse.from));\n    if (parse.sel) {\n        let sel = resolveSelection(view, tr.doc, parse.sel);\n        // Chrome Android will sometimes, during composition, report the\n        // selection in the wrong place. If it looks like that is\n        // happening, don't update the selection.\n        // Edge just doesn't move the cursor forward when you start typing\n        // in an empty block or between br nodes.\n        if (sel && !(chrome && android && view.composing && sel.empty &&\n            (change.start != change.endB || view.input.lastAndroidDelete < Date.now() - 100) &&\n            (sel.head == chFrom || sel.head == tr.mapping.map(chTo) - 1) ||\n            ie && sel.empty && sel.head == chFrom))\n            tr.setSelection(sel);\n    }\n    if (storedMarks)\n        tr.ensureMarks(storedMarks);\n    view.dispatch(tr.scrollIntoView());\n}\nfunction resolveSelection(view, doc, parsedSel) {\n    if (Math.max(parsedSel.anchor, parsedSel.head) > doc.content.size)\n        return null;\n    return selectionBetween(view, doc.resolve(parsedSel.anchor), doc.resolve(parsedSel.head));\n}\n// Given two same-length, non-empty fragments of inline content,\n// determine whether the first could be created from the second by\n// removing or adding a single mark type.\nfunction isMarkChange(cur, prev) {\n    let curMarks = cur.firstChild.marks, prevMarks = prev.firstChild.marks;\n    let added = curMarks, removed = prevMarks, type, mark, update;\n    for (let i = 0; i < prevMarks.length; i++)\n        added = prevMarks[i].removeFromSet(added);\n    for (let i = 0; i < curMarks.length; i++)\n        removed = curMarks[i].removeFromSet(removed);\n    if (added.length == 1 && removed.length == 0) {\n        mark = added[0];\n        type = \"add\";\n        update = (node) => node.mark(mark.addToSet(node.marks));\n    }\n    else if (added.length == 0 && removed.length == 1) {\n        mark = removed[0];\n        type = \"remove\";\n        update = (node) => node.mark(mark.removeFromSet(node.marks));\n    }\n    else {\n        return null;\n    }\n    let updated = [];\n    for (let i = 0; i < prev.childCount; i++)\n        updated.push(update(prev.child(i)));\n    if (Fragment.from(updated).eq(cur))\n        return { mark, type };\n}\nfunction looksLikeJoin(old, start, end, $newStart, $newEnd) {\n    if (!$newStart.parent.isTextblock ||\n        // The content must have shrunk\n        end - start <= $newEnd.pos - $newStart.pos ||\n        // newEnd must point directly at or after the end of the block that newStart points into\n        skipClosingAndOpening($newStart, true, false) < $newEnd.pos)\n        return false;\n    let $start = old.resolve(start);\n    // Start must be at the end of a block\n    if ($start.parentOffset < $start.parent.content.size || !$start.parent.isTextblock)\n        return false;\n    let $next = old.resolve(skipClosingAndOpening($start, true, true));\n    // The next textblock must start before end and end near it\n    if (!$next.parent.isTextblock || $next.pos > end ||\n        skipClosingAndOpening($next, true, false) < end)\n        return false;\n    // The fragments after the join point must match\n    return $newStart.parent.content.cut($newStart.parentOffset).eq($next.parent.content);\n}\nfunction skipClosingAndOpening($pos, fromEnd, mayOpen) {\n    let depth = $pos.depth, end = fromEnd ? $pos.end() : $pos.pos;\n    while (depth > 0 && (fromEnd || $pos.indexAfter(depth) == $pos.node(depth).childCount)) {\n        depth--;\n        end++;\n        fromEnd = false;\n    }\n    if (mayOpen) {\n        let next = $pos.node(depth).maybeChild($pos.indexAfter(depth));\n        while (next && !next.isLeaf) {\n            next = next.firstChild;\n            end++;\n        }\n    }\n    return end;\n}\nfunction findDiff(a, b, pos, preferredPos, preferredSide) {\n    let start = a.findDiffStart(b, pos);\n    if (start == null)\n        return null;\n    let { a: endA, b: endB } = a.findDiffEnd(b, pos + a.size, pos + b.size);\n    if (preferredSide == \"end\") {\n        let adjust = Math.max(0, start - Math.min(endA, endB));\n        preferredPos -= endA + adjust - start;\n    }\n    if (endA < start && a.size < b.size) {\n        let move = preferredPos <= start && preferredPos >= endA ? start - preferredPos : 0;\n        start -= move;\n        endB = start + (endB - endA);\n        endA = start;\n    }\n    else if (endB < start) {\n        let move = preferredPos <= start && preferredPos >= endB ? start - preferredPos : 0;\n        start -= move;\n        endA = start + (endA - endB);\n        endB = start;\n    }\n    return { start, endA, endB };\n}\n\n/**\n@internal\n*/\nconst __serializeForClipboard = serializeForClipboard;\n/**\n@internal\n*/\nconst __parseFromClipboard = parseFromClipboard;\n/**\n@internal\n*/\nconst __endComposition = endComposition;\n/**\nAn editor view manages the DOM structure that represents an\neditable document. Its state and behavior are determined by its\n[props](https://prosemirror.net/docs/ref/#view.DirectEditorProps).\n*/\nclass EditorView {\n    /**\n    Create a view. `place` may be a DOM node that the editor should\n    be appended to, a function that will place it into the document,\n    or an object whose `mount` property holds the node to use as the\n    document container. If it is `null`, the editor will not be\n    added to the document.\n    */\n    constructor(place, props) {\n        this._root = null;\n        /**\n        @internal\n        */\n        this.focused = false;\n        /**\n        Kludge used to work around a Chrome bug @internal\n        */\n        this.trackWrites = null;\n        this.mounted = false;\n        /**\n        @internal\n        */\n        this.markCursor = null;\n        /**\n        @internal\n        */\n        this.cursorWrapper = null;\n        /**\n        @internal\n        */\n        this.lastSelectedViewDesc = undefined;\n        /**\n        @internal\n        */\n        this.input = new InputState;\n        this.prevDirectPlugins = [];\n        this.pluginViews = [];\n        /**\n        When editor content is being dragged, this object contains\n        information about the dragged slice and whether it is being\n        copied or moved. At any other time, it is null.\n        */\n        this.dragging = null;\n        this._props = props;\n        this.state = props.state;\n        this.directPlugins = props.plugins || [];\n        this.directPlugins.forEach(checkStateComponent);\n        this.dispatch = this.dispatch.bind(this);\n        this.dom = (place && place.mount) || document.createElement(\"div\");\n        if (place) {\n            if (place.appendChild)\n                place.appendChild(this.dom);\n            else if (typeof place == \"function\")\n                place(this.dom);\n            else if (place.mount)\n                this.mounted = true;\n        }\n        this.editable = getEditable(this);\n        updateCursorWrapper(this);\n        this.nodeViews = buildNodeViews(this);\n        this.docView = docViewDesc(this.state.doc, computeDocDeco(this), viewDecorations(this), this.dom, this);\n        this.domObserver = new DOMObserver(this, (from, to, typeOver, added) => readDOMChange(this, from, to, typeOver, added));\n        this.domObserver.start();\n        initInput(this);\n        this.updatePluginViews();\n    }\n    /**\n    Holds `true` when a\n    [composition](https://w3c.github.io/uievents/#events-compositionevents)\n    is active.\n    */\n    get composing() { return this.input.composing; }\n    /**\n    The view's current [props](https://prosemirror.net/docs/ref/#view.EditorProps).\n    */\n    get props() {\n        if (this._props.state != this.state) {\n            let prev = this._props;\n            this._props = {};\n            for (let name in prev)\n                this._props[name] = prev[name];\n            this._props.state = this.state;\n        }\n        return this._props;\n    }\n    /**\n    Update the view's props. Will immediately cause an update to\n    the DOM.\n    */\n    update(props) {\n        if (props.handleDOMEvents != this._props.handleDOMEvents)\n            ensureListeners(this);\n        this._props = props;\n        if (props.plugins) {\n            props.plugins.forEach(checkStateComponent);\n            this.directPlugins = props.plugins;\n        }\n        this.updateStateInner(props.state, true);\n    }\n    /**\n    Update the view by updating existing props object with the object\n    given as argument. Equivalent to `view.update(Object.assign({},\n    view.props, props))`.\n    */\n    setProps(props) {\n        let updated = {};\n        for (let name in this._props)\n            updated[name] = this._props[name];\n        updated.state = this.state;\n        for (let name in props)\n            updated[name] = props[name];\n        this.update(updated);\n    }\n    /**\n    Update the editor's `state` prop, without touching any of the\n    other props.\n    */\n    updateState(state) {\n        this.updateStateInner(state, this.state.plugins != state.plugins);\n    }\n    updateStateInner(state, reconfigured) {\n        let prev = this.state, redraw = false, updateSel = false;\n        // When stored marks are added, stop composition, so that they can\n        // be displayed.\n        if (state.storedMarks && this.composing) {\n            clearComposition(this);\n            updateSel = true;\n        }\n        this.state = state;\n        if (reconfigured) {\n            let nodeViews = buildNodeViews(this);\n            if (changedNodeViews(nodeViews, this.nodeViews)) {\n                this.nodeViews = nodeViews;\n                redraw = true;\n            }\n            ensureListeners(this);\n        }\n        this.editable = getEditable(this);\n        updateCursorWrapper(this);\n        let innerDeco = viewDecorations(this), outerDeco = computeDocDeco(this);\n        let scroll = reconfigured ? \"reset\"\n            : state.scrollToSelection > prev.scrollToSelection ? \"to selection\" : \"preserve\";\n        let updateDoc = redraw || !this.docView.matchesNode(state.doc, outerDeco, innerDeco);\n        if (updateDoc || !state.selection.eq(prev.selection))\n            updateSel = true;\n        let oldScrollPos = scroll == \"preserve\" && updateSel && this.dom.style.overflowAnchor == null && storeScrollPos(this);\n        if (updateSel) {\n            this.domObserver.stop();\n            // Work around an issue in Chrome, IE, and Edge where changing\n            // the DOM around an active selection puts it into a broken\n            // state where the thing the user sees differs from the\n            // selection reported by the Selection object (#710, #973,\n            // #1011, #1013, #1035).\n            let forceSelUpdate = updateDoc && (ie || chrome) && !this.composing &&\n                !prev.selection.empty && !state.selection.empty && selectionContextChanged(prev.selection, state.selection);\n            if (updateDoc) {\n                // If the node that the selection points into is written to,\n                // Chrome sometimes starts misreporting the selection, so this\n                // tracks that and forces a selection reset when our update\n                // did write to the node.\n                let chromeKludge = chrome ? (this.trackWrites = this.domSelection().focusNode) : null;\n                if (redraw || !this.docView.update(state.doc, outerDeco, innerDeco, this)) {\n                    this.docView.updateOuterDeco([]);\n                    this.docView.destroy();\n                    this.docView = docViewDesc(state.doc, outerDeco, innerDeco, this.dom, this);\n                }\n                if (chromeKludge && !this.trackWrites)\n                    forceSelUpdate = true;\n            }\n            // Work around for an issue where an update arriving right between\n            // a DOM selection change and the \"selectionchange\" event for it\n            // can cause a spurious DOM selection update, disrupting mouse\n            // drag selection.\n            if (forceSelUpdate ||\n                !(this.input.mouseDown && this.domObserver.currentSelection.eq(this.domSelection()) && anchorInRightPlace(this))) {\n                selectionToDOM(this, forceSelUpdate);\n            }\n            else {\n                syncNodeSelection(this, state.selection);\n                this.domObserver.setCurSelection();\n            }\n            this.domObserver.start();\n        }\n        this.updatePluginViews(prev);\n        if (scroll == \"reset\") {\n            this.dom.scrollTop = 0;\n        }\n        else if (scroll == \"to selection\") {\n            let startDOM = this.domSelection().focusNode;\n            if (this.someProp(\"handleScrollToSelection\", f => f(this))) ;\n            else if (state.selection instanceof NodeSelection) {\n                let target = this.docView.domAfterPos(state.selection.from);\n                if (target.nodeType == 1)\n                    scrollRectIntoView(this, target.getBoundingClientRect(), startDOM);\n            }\n            else {\n                scrollRectIntoView(this, this.coordsAtPos(state.selection.head, 1), startDOM);\n            }\n        }\n        else if (oldScrollPos) {\n            resetScrollPos(oldScrollPos);\n        }\n    }\n    destroyPluginViews() {\n        let view;\n        while (view = this.pluginViews.pop())\n            if (view.destroy)\n                view.destroy();\n    }\n    updatePluginViews(prevState) {\n        if (!prevState || prevState.plugins != this.state.plugins || this.directPlugins != this.prevDirectPlugins) {\n            this.prevDirectPlugins = this.directPlugins;\n            this.destroyPluginViews();\n            for (let i = 0; i < this.directPlugins.length; i++) {\n                let plugin = this.directPlugins[i];\n                if (plugin.spec.view)\n                    this.pluginViews.push(plugin.spec.view(this));\n            }\n            for (let i = 0; i < this.state.plugins.length; i++) {\n                let plugin = this.state.plugins[i];\n                if (plugin.spec.view)\n                    this.pluginViews.push(plugin.spec.view(this));\n            }\n        }\n        else {\n            for (let i = 0; i < this.pluginViews.length; i++) {\n                let pluginView = this.pluginViews[i];\n                if (pluginView.update)\n                    pluginView.update(this, prevState);\n            }\n        }\n    }\n    someProp(propName, f) {\n        let prop = this._props && this._props[propName], value;\n        if (prop != null && (value = f ? f(prop) : prop))\n            return value;\n        for (let i = 0; i < this.directPlugins.length; i++) {\n            let prop = this.directPlugins[i].props[propName];\n            if (prop != null && (value = f ? f(prop) : prop))\n                return value;\n        }\n        let plugins = this.state.plugins;\n        if (plugins)\n            for (let i = 0; i < plugins.length; i++) {\n                let prop = plugins[i].props[propName];\n                if (prop != null && (value = f ? f(prop) : prop))\n                    return value;\n            }\n    }\n    /**\n    Query whether the view has focus.\n    */\n    hasFocus() {\n        return this.root.activeElement == this.dom;\n    }\n    /**\n    Focus the editor.\n    */\n    focus() {\n        this.domObserver.stop();\n        if (this.editable)\n            focusPreventScroll(this.dom);\n        selectionToDOM(this);\n        this.domObserver.start();\n    }\n    /**\n    Get the document root in which the editor exists. This will\n    usually be the top-level `document`, but might be a [shadow\n    DOM](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Shadow_DOM)\n    root if the editor is inside one.\n    */\n    get root() {\n        let cached = this._root;\n        if (cached == null)\n            for (let search = this.dom.parentNode; search; search = search.parentNode) {\n                if (search.nodeType == 9 || (search.nodeType == 11 && search.host)) {\n                    if (!search.getSelection)\n                        Object.getPrototypeOf(search).getSelection = () => search.ownerDocument.getSelection();\n                    return this._root = search;\n                }\n            }\n        return cached || document;\n    }\n    /**\n    Given a pair of viewport coordinates, return the document\n    position that corresponds to them. May return null if the given\n    coordinates aren't inside of the editor. When an object is\n    returned, its `pos` property is the position nearest to the\n    coordinates, and its `inside` property holds the position of the\n    inner node that the position falls inside of, or -1 if it is at\n    the top level, not in any node.\n    */\n    posAtCoords(coords) {\n        return posAtCoords(this, coords);\n    }\n    /**\n    Returns the viewport rectangle at a given document position.\n    `left` and `right` will be the same number, as this returns a\n    flat cursor-ish rectangle. If the position is between two things\n    that aren't directly adjacent, `side` determines which element\n    is used. When < 0, the element before the position is used,\n    otherwise the element after.\n    */\n    coordsAtPos(pos, side = 1) {\n        return coordsAtPos(this, pos, side);\n    }\n    /**\n    Find the DOM position that corresponds to the given document\n    position. When `side` is negative, find the position as close as\n    possible to the content before the position. When positive,\n    prefer positions close to the content after the position. When\n    zero, prefer as shallow a position as possible.\n    \n    Note that you should **not** mutate the editor's internal DOM,\n    only inspect it (and even that is usually not necessary).\n    */\n    domAtPos(pos, side = 0) {\n        return this.docView.domFromPos(pos, side);\n    }\n    /**\n    Find the DOM node that represents the document node after the\n    given position. May return `null` when the position doesn't point\n    in front of a node or if the node is inside an opaque node view.\n    \n    This is intended to be able to call things like\n    `getBoundingClientRect` on that DOM node. Do **not** mutate the\n    editor DOM directly, or add styling this way, since that will be\n    immediately overriden by the editor as it redraws the node.\n    */\n    nodeDOM(pos) {\n        let desc = this.docView.descAt(pos);\n        return desc ? desc.nodeDOM : null;\n    }\n    /**\n    Find the document position that corresponds to a given DOM\n    position. (Whenever possible, it is preferable to inspect the\n    document structure directly, rather than poking around in the\n    DOM, but sometimesfor example when interpreting an event\n    targetyou don't have a choice.)\n    \n    The `bias` parameter can be used to influence which side of a DOM\n    node to use when the position is inside a leaf node.\n    */\n    posAtDOM(node, offset, bias = -1) {\n        let pos = this.docView.posFromDOM(node, offset, bias);\n        if (pos == null)\n            throw new RangeError(\"DOM position not inside the editor\");\n        return pos;\n    }\n    /**\n    Find out whether the selection is at the end of a textblock when\n    moving in a given direction. When, for example, given `\"left\"`,\n    it will return true if moving left from the current cursor\n    position would leave that position's parent textblock. Will apply\n    to the view's current state by default, but it is possible to\n    pass a different state.\n    */\n    endOfTextblock(dir, state) {\n        return endOfTextblock(this, state || this.state, dir);\n    }\n    /**\n    Removes the editor from the DOM and destroys all [node\n    views](https://prosemirror.net/docs/ref/#view.NodeView).\n    */\n    destroy() {\n        if (!this.docView)\n            return;\n        destroyInput(this);\n        this.destroyPluginViews();\n        if (this.mounted) {\n            this.docView.update(this.state.doc, [], viewDecorations(this), this);\n            this.dom.textContent = \"\";\n        }\n        else if (this.dom.parentNode) {\n            this.dom.parentNode.removeChild(this.dom);\n        }\n        this.docView.destroy();\n        this.docView = null;\n    }\n    /**\n    This is true when the view has been\n    [destroyed](https://prosemirror.net/docs/ref/#view.EditorView.destroy) (and thus should not be\n    used anymore).\n    */\n    get isDestroyed() {\n        return this.docView == null;\n    }\n    /**\n    Used for testing.\n    */\n    dispatchEvent(event) {\n        return dispatchEvent(this, event);\n    }\n    /**\n    Dispatch a transaction. Will call\n    [`dispatchTransaction`](https://prosemirror.net/docs/ref/#view.DirectEditorProps.dispatchTransaction)\n    when given, and otherwise defaults to applying the transaction to\n    the current state and calling\n    [`updateState`](https://prosemirror.net/docs/ref/#view.EditorView.updateState) with the result.\n    This method is bound to the view instance, so that it can be\n    easily passed around.\n    */\n    dispatch(tr) {\n        let dispatchTransaction = this._props.dispatchTransaction;\n        if (dispatchTransaction)\n            dispatchTransaction.call(this, tr);\n        else\n            this.updateState(this.state.apply(tr));\n    }\n    /**\n    @internal\n    */\n    domSelection() {\n        return this.root.getSelection();\n    }\n}\nfunction computeDocDeco(view) {\n    let attrs = Object.create(null);\n    attrs.class = \"ProseMirror\";\n    attrs.contenteditable = String(view.editable);\n    attrs.translate = \"no\";\n    view.someProp(\"attributes\", value => {\n        if (typeof value == \"function\")\n            value = value(view.state);\n        if (value)\n            for (let attr in value) {\n                if (attr == \"class\")\n                    attrs.class += \" \" + value[attr];\n                if (attr == \"style\") {\n                    attrs.style = (attrs.style ? attrs.style + \";\" : \"\") + value[attr];\n                }\n                else if (!attrs[attr] && attr != \"contenteditable\" && attr != \"nodeName\")\n                    attrs[attr] = String(value[attr]);\n            }\n    });\n    return [Decoration.node(0, view.state.doc.content.size, attrs)];\n}\nfunction updateCursorWrapper(view) {\n    if (view.markCursor) {\n        let dom = document.createElement(\"img\");\n        dom.className = \"ProseMirror-separator\";\n        dom.setAttribute(\"mark-placeholder\", \"true\");\n        dom.setAttribute(\"alt\", \"\");\n        view.cursorWrapper = { dom, deco: Decoration.widget(view.state.selection.head, dom, { raw: true, marks: view.markCursor }) };\n    }\n    else {\n        view.cursorWrapper = null;\n    }\n}\nfunction getEditable(view) {\n    return !view.someProp(\"editable\", value => value(view.state) === false);\n}\nfunction selectionContextChanged(sel1, sel2) {\n    let depth = Math.min(sel1.$anchor.sharedDepth(sel1.head), sel2.$anchor.sharedDepth(sel2.head));\n    return sel1.$anchor.start(depth) != sel2.$anchor.start(depth);\n}\nfunction buildNodeViews(view) {\n    let result = Object.create(null);\n    function add(obj) {\n        for (let prop in obj)\n            if (!Object.prototype.hasOwnProperty.call(result, prop))\n                result[prop] = obj[prop];\n    }\n    view.someProp(\"nodeViews\", add);\n    view.someProp(\"markViews\", add);\n    return result;\n}\nfunction changedNodeViews(a, b) {\n    let nA = 0, nB = 0;\n    for (let prop in a) {\n        if (a[prop] != b[prop])\n            return true;\n        nA++;\n    }\n    for (let _ in b)\n        nB++;\n    return nA != nB;\n}\nfunction checkStateComponent(plugin) {\n    if (plugin.spec.state || plugin.spec.filterTransaction || plugin.spec.appendTransaction)\n        throw new RangeError(\"Plugins passed directly to the view must not have a state component\");\n}\n\nexport { Decoration, DecorationSet, EditorView, __endComposition, __parseFromClipboard, __serializeForClipboard };\n","export var base = {\n  8: \"Backspace\",\n  9: \"Tab\",\n  10: \"Enter\",\n  12: \"NumLock\",\n  13: \"Enter\",\n  16: \"Shift\",\n  17: \"Control\",\n  18: \"Alt\",\n  20: \"CapsLock\",\n  27: \"Escape\",\n  32: \" \",\n  33: \"PageUp\",\n  34: \"PageDown\",\n  35: \"End\",\n  36: \"Home\",\n  37: \"ArrowLeft\",\n  38: \"ArrowUp\",\n  39: \"ArrowRight\",\n  40: \"ArrowDown\",\n  44: \"PrintScreen\",\n  45: \"Insert\",\n  46: \"Delete\",\n  59: \";\",\n  61: \"=\",\n  91: \"Meta\",\n  92: \"Meta\",\n  106: \"*\",\n  107: \"+\",\n  108: \",\",\n  109: \"-\",\n  110: \".\",\n  111: \"/\",\n  144: \"NumLock\",\n  145: \"ScrollLock\",\n  160: \"Shift\",\n  161: \"Shift\",\n  162: \"Control\",\n  163: \"Control\",\n  164: \"Alt\",\n  165: \"Alt\",\n  173: \"-\",\n  186: \";\",\n  187: \"=\",\n  188: \",\",\n  189: \"-\",\n  190: \".\",\n  191: \"/\",\n  192: \"`\",\n  219: \"[\",\n  220: \"\\\\\",\n  221: \"]\",\n  222: \"'\",\n  229: \"q\"\n}\n\nexport var shift = {\n  48: \")\",\n  49: \"!\",\n  50: \"@\",\n  51: \"#\",\n  52: \"$\",\n  53: \"%\",\n  54: \"^\",\n  55: \"&\",\n  56: \"*\",\n  57: \"(\",\n  59: \":\",\n  61: \"+\",\n  173: \"_\",\n  186: \":\",\n  187: \"+\",\n  188: \"<\",\n  189: \"_\",\n  190: \">\",\n  191: \"?\",\n  192: \"~\",\n  219: \"{\",\n  220: \"|\",\n  221: \"}\",\n  222: \"\\\"\",\n  229: \"Q\"\n}\n\nvar chrome = typeof navigator != \"undefined\" && /Chrome\\/(\\d+)/.exec(navigator.userAgent)\nvar safari = typeof navigator != \"undefined\" && /Apple Computer/.test(navigator.vendor)\nvar gecko = typeof navigator != \"undefined\" && /Gecko\\/\\d+/.test(navigator.userAgent)\nvar mac = typeof navigator != \"undefined\" && /Mac/.test(navigator.platform)\nvar ie = typeof navigator != \"undefined\" && /MSIE \\d|Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(navigator.userAgent)\nvar brokenModifierNames = chrome && (mac || +chrome[1] < 57) || gecko && mac\n\n// Fill in the digit keys\nfor (var i = 0; i < 10; i++) base[48 + i] = base[96 + i] = String(i)\n\n// The function keys\nfor (var i = 1; i <= 24; i++) base[i + 111] = \"F\" + i\n\n// And the alphabetic keys\nfor (var i = 65; i <= 90; i++) {\n  base[i] = String.fromCharCode(i + 32)\n  shift[i] = String.fromCharCode(i)\n}\n\n// For each code that doesn't have a shift-equivalent, copy the base name\nfor (var code in base) if (!shift.hasOwnProperty(code)) shift[code] = base[code]\n\nexport function keyName(event) {\n  // Don't trust event.key in Chrome when there are modifiers until\n  // they fix https://bugs.chromium.org/p/chromium/issues/detail?id=633838\n  var ignoreKey = brokenModifierNames && (event.ctrlKey || event.altKey || event.metaKey) ||\n    (safari || ie) && event.shiftKey && event.key && event.key.length == 1\n  var name = (!ignoreKey && event.key) ||\n    (event.shiftKey ? shift : base)[event.keyCode] ||\n    event.key || \"Unidentified\"\n  // Edge sometimes produces wrong names (Issue #3)\n  if (name == \"Esc\") name = \"Escape\"\n  if (name == \"Del\") name = \"Delete\"\n  // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/8860571/\n  if (name == \"Left\") name = \"ArrowLeft\"\n  if (name == \"Up\") name = \"ArrowUp\"\n  if (name == \"Right\") name = \"ArrowRight\"\n  if (name == \"Down\") name = \"ArrowDown\"\n  return name\n}\n","import { keyName, base } from 'w3c-keyname';\nimport { Plugin } from 'prosemirror-state';\n\nconst mac = typeof navigator != \"undefined\" ? /Mac|iP(hone|[oa]d)/.test(navigator.platform) : false;\nfunction normalizeKeyName(name) {\n    let parts = name.split(/-(?!$)/), result = parts[parts.length - 1];\n    if (result == \"Space\")\n        result = \" \";\n    let alt, ctrl, shift, meta;\n    for (let i = 0; i < parts.length - 1; i++) {\n        let mod = parts[i];\n        if (/^(cmd|meta|m)$/i.test(mod))\n            meta = true;\n        else if (/^a(lt)?$/i.test(mod))\n            alt = true;\n        else if (/^(c|ctrl|control)$/i.test(mod))\n            ctrl = true;\n        else if (/^s(hift)?$/i.test(mod))\n            shift = true;\n        else if (/^mod$/i.test(mod)) {\n            if (mac)\n                meta = true;\n            else\n                ctrl = true;\n        }\n        else\n            throw new Error(\"Unrecognized modifier name: \" + mod);\n    }\n    if (alt)\n        result = \"Alt-\" + result;\n    if (ctrl)\n        result = \"Ctrl-\" + result;\n    if (meta)\n        result = \"Meta-\" + result;\n    if (shift)\n        result = \"Shift-\" + result;\n    return result;\n}\nfunction normalize(map) {\n    let copy = Object.create(null);\n    for (let prop in map)\n        copy[normalizeKeyName(prop)] = map[prop];\n    return copy;\n}\nfunction modifiers(name, event, shift) {\n    if (event.altKey)\n        name = \"Alt-\" + name;\n    if (event.ctrlKey)\n        name = \"Ctrl-\" + name;\n    if (event.metaKey)\n        name = \"Meta-\" + name;\n    if (shift !== false && event.shiftKey)\n        name = \"Shift-\" + name;\n    return name;\n}\n/**\nCreate a keymap plugin for the given set of bindings.\n\nBindings should map key names to [command](https://prosemirror.net/docs/ref/#commands)-style\nfunctions, which will be called with `(EditorState, dispatch,\nEditorView)` arguments, and should return true when they've handled\nthe key. Note that the view argument isn't part of the command\nprotocol, but can be used as an escape hatch if a binding needs to\ndirectly interact with the UI.\n\nKey names may be strings like `\"Shift-Ctrl-Enter\"`a key\nidentifier prefixed with zero or more modifiers. Key identifiers\nare based on the strings that can appear in\n[`KeyEvent.key`](https:developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key).\nUse lowercase letters to refer to letter keys (or uppercase letters\nif you want shift to be held). You may use `\"Space\"` as an alias\nfor the `\" \"` name.\n\nModifiers can be given in any order. `Shift-` (or `s-`), `Alt-` (or\n`a-`), `Ctrl-` (or `c-` or `Control-`) and `Cmd-` (or `m-` or\n`Meta-`) are recognized. For characters that are created by holding\nshift, the `Shift-` prefix is implied, and should not be added\nexplicitly.\n\nYou can use `Mod-` as a shorthand for `Cmd-` on Mac and `Ctrl-` on\nother platforms.\n\nYou can add multiple keymap plugins to an editor. The order in\nwhich they appear determines their precedence (the ones early in\nthe array get to dispatch first).\n*/\nfunction keymap(bindings) {\n    return new Plugin({ props: { handleKeyDown: keydownHandler(bindings) } });\n}\n/**\nGiven a set of bindings (using the same format as\n[`keymap`](https://prosemirror.net/docs/ref/#keymap.keymap)), return a [keydown\nhandler](https://prosemirror.net/docs/ref/#view.EditorProps.handleKeyDown) that handles them.\n*/\nfunction keydownHandler(bindings) {\n    let map = normalize(bindings);\n    return function (view, event) {\n        let name = keyName(event), isChar = name.length == 1 && name != \" \", baseName;\n        let direct = map[modifiers(name, event, !isChar)];\n        if (direct && direct(view.state, view.dispatch, view))\n            return true;\n        if (isChar && (event.shiftKey || event.altKey || event.metaKey || name.charCodeAt(0) > 127) &&\n            (baseName = base[event.keyCode]) && baseName != name) {\n            // Try falling back to the keyCode when there's a modifier\n            // active or the character produced isn't ASCII, and our table\n            // produces a different name from the the keyCode. See #668,\n            // #1060\n            let fromCode = map[modifiers(baseName, event, true)];\n            if (fromCode && fromCode(view.state, view.dispatch, view))\n                return true;\n        }\n        else if (isChar && event.shiftKey) {\n            // Otherwise, if shift is active, also try the binding with the\n            // Shift- prefix enabled. See #997\n            let withShift = map[modifiers(name, event, true)];\n            if (withShift && withShift(view.state, view.dispatch, view))\n                return true;\n        }\n        return false;\n    };\n}\n\nexport { keydownHandler, keymap };\n","import { liftTarget, replaceStep, canJoin, joinPoint, canSplit, ReplaceAroundStep, findWrapping } from 'prosemirror-transform';\nimport { Slice, Fragment } from 'prosemirror-model';\nimport { NodeSelection, Selection, AllSelection, TextSelection } from 'prosemirror-state';\n\n/**\nDelete the selection, if there is one.\n*/\nconst deleteSelection = (state, dispatch) => {\n    if (state.selection.empty)\n        return false;\n    if (dispatch)\n        dispatch(state.tr.deleteSelection().scrollIntoView());\n    return true;\n};\n/**\nIf the selection is empty and at the start of a textblock, try to\nreduce the distance between that block and the one before itif\nthere's a block directly before it that can be joined, join them.\nIf not, try to move the selected block closer to the next one in\nthe document structure by lifting it out of its parent or moving it\ninto a parent of the previous block. Will use the view for accurate\n(bidi-aware) start-of-textblock detection if given.\n*/\nconst joinBackward = (state, dispatch, view) => {\n    let { $cursor } = state.selection;\n    if (!$cursor || (view ? !view.endOfTextblock(\"backward\", state)\n        : $cursor.parentOffset > 0))\n        return false;\n    let $cut = findCutBefore($cursor);\n    // If there is no node before this, try to lift\n    if (!$cut) {\n        let range = $cursor.blockRange(), target = range && liftTarget(range);\n        if (target == null)\n            return false;\n        if (dispatch)\n            dispatch(state.tr.lift(range, target).scrollIntoView());\n        return true;\n    }\n    let before = $cut.nodeBefore;\n    // Apply the joining algorithm\n    if (!before.type.spec.isolating && deleteBarrier(state, $cut, dispatch))\n        return true;\n    // If the node below has no content and the node above is\n    // selectable, delete the node below and select the one above.\n    if ($cursor.parent.content.size == 0 &&\n        (textblockAt(before, \"end\") || NodeSelection.isSelectable(before))) {\n        let delStep = replaceStep(state.doc, $cursor.before(), $cursor.after(), Slice.empty);\n        if (delStep && delStep.slice.size < delStep.to - delStep.from) {\n            if (dispatch) {\n                let tr = state.tr.step(delStep);\n                tr.setSelection(textblockAt(before, \"end\") ? Selection.findFrom(tr.doc.resolve(tr.mapping.map($cut.pos, -1)), -1)\n                    : NodeSelection.create(tr.doc, $cut.pos - before.nodeSize));\n                dispatch(tr.scrollIntoView());\n            }\n            return true;\n        }\n    }\n    // If the node before is an atom, delete it\n    if (before.isAtom && $cut.depth == $cursor.depth - 1) {\n        if (dispatch)\n            dispatch(state.tr.delete($cut.pos - before.nodeSize, $cut.pos).scrollIntoView());\n        return true;\n    }\n    return false;\n};\nfunction textblockAt(node, side, only = false) {\n    for (let scan = node; scan; scan = (side == \"start\" ? scan.firstChild : scan.lastChild)) {\n        if (scan.isTextblock)\n            return true;\n        if (only && scan.childCount != 1)\n            return false;\n    }\n    return false;\n}\n/**\nWhen the selection is empty and at the start of a textblock, select\nthe node before that textblock, if possible. This is intended to be\nbound to keys like backspace, after\n[`joinBackward`](https://prosemirror.net/docs/ref/#commands.joinBackward) or other deleting\ncommands, as a fall-back behavior when the schema doesn't allow\ndeletion at the selected point.\n*/\nconst selectNodeBackward = (state, dispatch, view) => {\n    let { $head, empty } = state.selection, $cut = $head;\n    if (!empty)\n        return false;\n    if ($head.parent.isTextblock) {\n        if (view ? !view.endOfTextblock(\"backward\", state) : $head.parentOffset > 0)\n            return false;\n        $cut = findCutBefore($head);\n    }\n    let node = $cut && $cut.nodeBefore;\n    if (!node || !NodeSelection.isSelectable(node))\n        return false;\n    if (dispatch)\n        dispatch(state.tr.setSelection(NodeSelection.create(state.doc, $cut.pos - node.nodeSize)).scrollIntoView());\n    return true;\n};\nfunction findCutBefore($pos) {\n    if (!$pos.parent.type.spec.isolating)\n        for (let i = $pos.depth - 1; i >= 0; i--) {\n            if ($pos.index(i) > 0)\n                return $pos.doc.resolve($pos.before(i + 1));\n            if ($pos.node(i).type.spec.isolating)\n                break;\n        }\n    return null;\n}\n/**\nIf the selection is empty and the cursor is at the end of a\ntextblock, try to reduce or remove the boundary between that block\nand the one after it, either by joining them or by moving the other\nblock closer to this one in the tree structure. Will use the view\nfor accurate start-of-textblock detection if given.\n*/\nconst joinForward = (state, dispatch, view) => {\n    let { $cursor } = state.selection;\n    if (!$cursor || (view ? !view.endOfTextblock(\"forward\", state)\n        : $cursor.parentOffset < $cursor.parent.content.size))\n        return false;\n    let $cut = findCutAfter($cursor);\n    // If there is no node after this, there's nothing to do\n    if (!$cut)\n        return false;\n    let after = $cut.nodeAfter;\n    // Try the joining algorithm\n    if (deleteBarrier(state, $cut, dispatch))\n        return true;\n    // If the node above has no content and the node below is\n    // selectable, delete the node above and select the one below.\n    if ($cursor.parent.content.size == 0 &&\n        (textblockAt(after, \"start\") || NodeSelection.isSelectable(after))) {\n        let delStep = replaceStep(state.doc, $cursor.before(), $cursor.after(), Slice.empty);\n        if (delStep && delStep.slice.size < delStep.to - delStep.from) {\n            if (dispatch) {\n                let tr = state.tr.step(delStep);\n                tr.setSelection(textblockAt(after, \"start\") ? Selection.findFrom(tr.doc.resolve(tr.mapping.map($cut.pos)), 1)\n                    : NodeSelection.create(tr.doc, tr.mapping.map($cut.pos)));\n                dispatch(tr.scrollIntoView());\n            }\n            return true;\n        }\n    }\n    // If the next node is an atom, delete it\n    if (after.isAtom && $cut.depth == $cursor.depth - 1) {\n        if (dispatch)\n            dispatch(state.tr.delete($cut.pos, $cut.pos + after.nodeSize).scrollIntoView());\n        return true;\n    }\n    return false;\n};\n/**\nWhen the selection is empty and at the end of a textblock, select\nthe node coming after that textblock, if possible. This is intended\nto be bound to keys like delete, after\n[`joinForward`](https://prosemirror.net/docs/ref/#commands.joinForward) and similar deleting\ncommands, to provide a fall-back behavior when the schema doesn't\nallow deletion at the selected point.\n*/\nconst selectNodeForward = (state, dispatch, view) => {\n    let { $head, empty } = state.selection, $cut = $head;\n    if (!empty)\n        return false;\n    if ($head.parent.isTextblock) {\n        if (view ? !view.endOfTextblock(\"forward\", state) : $head.parentOffset < $head.parent.content.size)\n            return false;\n        $cut = findCutAfter($head);\n    }\n    let node = $cut && $cut.nodeAfter;\n    if (!node || !NodeSelection.isSelectable(node))\n        return false;\n    if (dispatch)\n        dispatch(state.tr.setSelection(NodeSelection.create(state.doc, $cut.pos)).scrollIntoView());\n    return true;\n};\nfunction findCutAfter($pos) {\n    if (!$pos.parent.type.spec.isolating)\n        for (let i = $pos.depth - 1; i >= 0; i--) {\n            let parent = $pos.node(i);\n            if ($pos.index(i) + 1 < parent.childCount)\n                return $pos.doc.resolve($pos.after(i + 1));\n            if (parent.type.spec.isolating)\n                break;\n        }\n    return null;\n}\n/**\nJoin the selected block or, if there is a text selection, the\nclosest ancestor block of the selection that can be joined, with\nthe sibling above it.\n*/\nconst joinUp = (state, dispatch) => {\n    let sel = state.selection, nodeSel = sel instanceof NodeSelection, point;\n    if (nodeSel) {\n        if (sel.node.isTextblock || !canJoin(state.doc, sel.from))\n            return false;\n        point = sel.from;\n    }\n    else {\n        point = joinPoint(state.doc, sel.from, -1);\n        if (point == null)\n            return false;\n    }\n    if (dispatch) {\n        let tr = state.tr.join(point);\n        if (nodeSel)\n            tr.setSelection(NodeSelection.create(tr.doc, point - state.doc.resolve(point).nodeBefore.nodeSize));\n        dispatch(tr.scrollIntoView());\n    }\n    return true;\n};\n/**\nJoin the selected block, or the closest ancestor of the selection\nthat can be joined, with the sibling after it.\n*/\nconst joinDown = (state, dispatch) => {\n    let sel = state.selection, point;\n    if (sel instanceof NodeSelection) {\n        if (sel.node.isTextblock || !canJoin(state.doc, sel.to))\n            return false;\n        point = sel.to;\n    }\n    else {\n        point = joinPoint(state.doc, sel.to, 1);\n        if (point == null)\n            return false;\n    }\n    if (dispatch)\n        dispatch(state.tr.join(point).scrollIntoView());\n    return true;\n};\n/**\nLift the selected block, or the closest ancestor block of the\nselection that can be lifted, out of its parent node.\n*/\nconst lift = (state, dispatch) => {\n    let { $from, $to } = state.selection;\n    let range = $from.blockRange($to), target = range && liftTarget(range);\n    if (target == null)\n        return false;\n    if (dispatch)\n        dispatch(state.tr.lift(range, target).scrollIntoView());\n    return true;\n};\n/**\nIf the selection is in a node whose type has a truthy\n[`code`](https://prosemirror.net/docs/ref/#model.NodeSpec.code) property in its spec, replace the\nselection with a newline character.\n*/\nconst newlineInCode = (state, dispatch) => {\n    let { $head, $anchor } = state.selection;\n    if (!$head.parent.type.spec.code || !$head.sameParent($anchor))\n        return false;\n    if (dispatch)\n        dispatch(state.tr.insertText(\"\\n\").scrollIntoView());\n    return true;\n};\nfunction defaultBlockAt(match) {\n    for (let i = 0; i < match.edgeCount; i++) {\n        let { type } = match.edge(i);\n        if (type.isTextblock && !type.hasRequiredAttrs())\n            return type;\n    }\n    return null;\n}\n/**\nWhen the selection is in a node with a truthy\n[`code`](https://prosemirror.net/docs/ref/#model.NodeSpec.code) property in its spec, create a\ndefault block after the code block, and move the cursor there.\n*/\nconst exitCode = (state, dispatch) => {\n    let { $head, $anchor } = state.selection;\n    if (!$head.parent.type.spec.code || !$head.sameParent($anchor))\n        return false;\n    let above = $head.node(-1), after = $head.indexAfter(-1), type = defaultBlockAt(above.contentMatchAt(after));\n    if (!type || !above.canReplaceWith(after, after, type))\n        return false;\n    if (dispatch) {\n        let pos = $head.after(), tr = state.tr.replaceWith(pos, pos, type.createAndFill());\n        tr.setSelection(Selection.near(tr.doc.resolve(pos), 1));\n        dispatch(tr.scrollIntoView());\n    }\n    return true;\n};\n/**\nIf a block node is selected, create an empty paragraph before (if\nit is its parent's first child) or after it.\n*/\nconst createParagraphNear = (state, dispatch) => {\n    let sel = state.selection, { $from, $to } = sel;\n    if (sel instanceof AllSelection || $from.parent.inlineContent || $to.parent.inlineContent)\n        return false;\n    let type = defaultBlockAt($to.parent.contentMatchAt($to.indexAfter()));\n    if (!type || !type.isTextblock)\n        return false;\n    if (dispatch) {\n        let side = (!$from.parentOffset && $to.index() < $to.parent.childCount ? $from : $to).pos;\n        let tr = state.tr.insert(side, type.createAndFill());\n        tr.setSelection(TextSelection.create(tr.doc, side + 1));\n        dispatch(tr.scrollIntoView());\n    }\n    return true;\n};\n/**\nIf the cursor is in an empty textblock that can be lifted, lift the\nblock.\n*/\nconst liftEmptyBlock = (state, dispatch) => {\n    let { $cursor } = state.selection;\n    if (!$cursor || $cursor.parent.content.size)\n        return false;\n    if ($cursor.depth > 1 && $cursor.after() != $cursor.end(-1)) {\n        let before = $cursor.before();\n        if (canSplit(state.doc, before)) {\n            if (dispatch)\n                dispatch(state.tr.split(before).scrollIntoView());\n            return true;\n        }\n    }\n    let range = $cursor.blockRange(), target = range && liftTarget(range);\n    if (target == null)\n        return false;\n    if (dispatch)\n        dispatch(state.tr.lift(range, target).scrollIntoView());\n    return true;\n};\n/**\nSplit the parent block of the selection. If the selection is a text\nselection, also delete its content.\n*/\nconst splitBlock = (state, dispatch) => {\n    let { $from, $to } = state.selection;\n    if (state.selection instanceof NodeSelection && state.selection.node.isBlock) {\n        if (!$from.parentOffset || !canSplit(state.doc, $from.pos))\n            return false;\n        if (dispatch)\n            dispatch(state.tr.split($from.pos).scrollIntoView());\n        return true;\n    }\n    if (!$from.parent.isBlock)\n        return false;\n    if (dispatch) {\n        let atEnd = $to.parentOffset == $to.parent.content.size;\n        let tr = state.tr;\n        if (state.selection instanceof TextSelection || state.selection instanceof AllSelection)\n            tr.deleteSelection();\n        let deflt = $from.depth == 0 ? null : defaultBlockAt($from.node(-1).contentMatchAt($from.indexAfter(-1)));\n        let types = atEnd && deflt ? [{ type: deflt }] : undefined;\n        let can = canSplit(tr.doc, tr.mapping.map($from.pos), 1, types);\n        if (!types && !can && canSplit(tr.doc, tr.mapping.map($from.pos), 1, deflt ? [{ type: deflt }] : undefined)) {\n            if (deflt)\n                types = [{ type: deflt }];\n            can = true;\n        }\n        if (can) {\n            tr.split(tr.mapping.map($from.pos), 1, types);\n            if (!atEnd && !$from.parentOffset && $from.parent.type != deflt) {\n                let first = tr.mapping.map($from.before()), $first = tr.doc.resolve(first);\n                if (deflt && $from.node(-1).canReplaceWith($first.index(), $first.index() + 1, deflt))\n                    tr.setNodeMarkup(tr.mapping.map($from.before()), deflt);\n            }\n        }\n        dispatch(tr.scrollIntoView());\n    }\n    return true;\n};\n/**\nActs like [`splitBlock`](https://prosemirror.net/docs/ref/#commands.splitBlock), but without\nresetting the set of active marks at the cursor.\n*/\nconst splitBlockKeepMarks = (state, dispatch) => {\n    return splitBlock(state, dispatch && (tr => {\n        let marks = state.storedMarks || (state.selection.$to.parentOffset && state.selection.$from.marks());\n        if (marks)\n            tr.ensureMarks(marks);\n        dispatch(tr);\n    }));\n};\n/**\nMove the selection to the node wrapping the current selection, if\nany. (Will not select the document node.)\n*/\nconst selectParentNode = (state, dispatch) => {\n    let { $from, to } = state.selection, pos;\n    let same = $from.sharedDepth(to);\n    if (same == 0)\n        return false;\n    pos = $from.before(same);\n    if (dispatch)\n        dispatch(state.tr.setSelection(NodeSelection.create(state.doc, pos)));\n    return true;\n};\n/**\nSelect the whole document.\n*/\nconst selectAll = (state, dispatch) => {\n    if (dispatch)\n        dispatch(state.tr.setSelection(new AllSelection(state.doc)));\n    return true;\n};\nfunction joinMaybeClear(state, $pos, dispatch) {\n    let before = $pos.nodeBefore, after = $pos.nodeAfter, index = $pos.index();\n    if (!before || !after || !before.type.compatibleContent(after.type))\n        return false;\n    if (!before.content.size && $pos.parent.canReplace(index - 1, index)) {\n        if (dispatch)\n            dispatch(state.tr.delete($pos.pos - before.nodeSize, $pos.pos).scrollIntoView());\n        return true;\n    }\n    if (!$pos.parent.canReplace(index, index + 1) || !(after.isTextblock || canJoin(state.doc, $pos.pos)))\n        return false;\n    if (dispatch)\n        dispatch(state.tr\n            .clearIncompatible($pos.pos, before.type, before.contentMatchAt(before.childCount))\n            .join($pos.pos)\n            .scrollIntoView());\n    return true;\n}\nfunction deleteBarrier(state, $cut, dispatch) {\n    let before = $cut.nodeBefore, after = $cut.nodeAfter, conn, match;\n    if (before.type.spec.isolating || after.type.spec.isolating)\n        return false;\n    if (joinMaybeClear(state, $cut, dispatch))\n        return true;\n    let canDelAfter = $cut.parent.canReplace($cut.index(), $cut.index() + 1);\n    if (canDelAfter &&\n        (conn = (match = before.contentMatchAt(before.childCount)).findWrapping(after.type)) &&\n        match.matchType(conn[0] || after.type).validEnd) {\n        if (dispatch) {\n            let end = $cut.pos + after.nodeSize, wrap = Fragment.empty;\n            for (let i = conn.length - 1; i >= 0; i--)\n                wrap = Fragment.from(conn[i].create(null, wrap));\n            wrap = Fragment.from(before.copy(wrap));\n            let tr = state.tr.step(new ReplaceAroundStep($cut.pos - 1, end, $cut.pos, end, new Slice(wrap, 1, 0), conn.length, true));\n            let joinAt = end + 2 * conn.length;\n            if (canJoin(tr.doc, joinAt))\n                tr.join(joinAt);\n            dispatch(tr.scrollIntoView());\n        }\n        return true;\n    }\n    let selAfter = Selection.findFrom($cut, 1);\n    let range = selAfter && selAfter.$from.blockRange(selAfter.$to), target = range && liftTarget(range);\n    if (target != null && target >= $cut.depth) {\n        if (dispatch)\n            dispatch(state.tr.lift(range, target).scrollIntoView());\n        return true;\n    }\n    if (canDelAfter && textblockAt(after, \"start\", true) && textblockAt(before, \"end\")) {\n        let at = before, wrap = [];\n        for (;;) {\n            wrap.push(at);\n            if (at.isTextblock)\n                break;\n            at = at.lastChild;\n        }\n        let afterText = after, afterDepth = 1;\n        for (; !afterText.isTextblock; afterText = afterText.firstChild)\n            afterDepth++;\n        if (at.canReplace(at.childCount, at.childCount, afterText.content)) {\n            if (dispatch) {\n                let end = Fragment.empty;\n                for (let i = wrap.length - 1; i >= 0; i--)\n                    end = Fragment.from(wrap[i].copy(end));\n                let tr = state.tr.step(new ReplaceAroundStep($cut.pos - wrap.length, $cut.pos + after.nodeSize, $cut.pos + afterDepth, $cut.pos + after.nodeSize - afterDepth, new Slice(end, wrap.length, 0), 0, true));\n                dispatch(tr.scrollIntoView());\n            }\n            return true;\n        }\n    }\n    return false;\n}\nfunction selectTextblockSide(side) {\n    return function (state, dispatch) {\n        let sel = state.selection, $pos = side < 0 ? sel.$from : sel.$to;\n        let depth = $pos.depth;\n        while ($pos.node(depth).isInline) {\n            if (!depth)\n                return false;\n            depth--;\n        }\n        if (!$pos.node(depth).isTextblock)\n            return false;\n        if (dispatch)\n            dispatch(state.tr.setSelection(TextSelection.create(state.doc, side < 0 ? $pos.start(depth) : $pos.end(depth))));\n        return true;\n    };\n}\n/**\nMoves the cursor to the start of current text block.\n*/\nconst selectTextblockStart = selectTextblockSide(-1);\n/**\nMoves the cursor to the end of current text block.\n*/\nconst selectTextblockEnd = selectTextblockSide(1);\n// Parameterized commands\n/**\nWrap the selection in a node of the given type with the given\nattributes.\n*/\nfunction wrapIn(nodeType, attrs = null) {\n    return function (state, dispatch) {\n        let { $from, $to } = state.selection;\n        let range = $from.blockRange($to), wrapping = range && findWrapping(range, nodeType, attrs);\n        if (!wrapping)\n            return false;\n        if (dispatch)\n            dispatch(state.tr.wrap(range, wrapping).scrollIntoView());\n        return true;\n    };\n}\n/**\nReturns a command that tries to set the selected textblocks to the\ngiven node type with the given attributes.\n*/\nfunction setBlockType(nodeType, attrs = null) {\n    return function (state, dispatch) {\n        let { from, to } = state.selection;\n        let applicable = false;\n        state.doc.nodesBetween(from, to, (node, pos) => {\n            if (applicable)\n                return false;\n            if (!node.isTextblock || node.hasMarkup(nodeType, attrs))\n                return;\n            if (node.type == nodeType) {\n                applicable = true;\n            }\n            else {\n                let $pos = state.doc.resolve(pos), index = $pos.index();\n                applicable = $pos.parent.canReplaceWith(index, index + 1, nodeType);\n            }\n        });\n        if (!applicable)\n            return false;\n        if (dispatch)\n            dispatch(state.tr.setBlockType(from, to, nodeType, attrs).scrollIntoView());\n        return true;\n    };\n}\nfunction markApplies(doc, ranges, type) {\n    for (let i = 0; i < ranges.length; i++) {\n        let { $from, $to } = ranges[i];\n        let can = $from.depth == 0 ? doc.type.allowsMarkType(type) : false;\n        doc.nodesBetween($from.pos, $to.pos, node => {\n            if (can)\n                return false;\n            can = node.inlineContent && node.type.allowsMarkType(type);\n        });\n        if (can)\n            return true;\n    }\n    return false;\n}\n/**\nCreate a command function that toggles the given mark with the\ngiven attributes. Will return `false` when the current selection\ndoesn't support that mark. This will remove the mark if any marks\nof that type exist in the selection, or add it otherwise. If the\nselection is empty, this applies to the [stored\nmarks](https://prosemirror.net/docs/ref/#state.EditorState.storedMarks) instead of a range of the\ndocument.\n*/\nfunction toggleMark(markType, attrs = null) {\n    return function (state, dispatch) {\n        let { empty, $cursor, ranges } = state.selection;\n        if ((empty && !$cursor) || !markApplies(state.doc, ranges, markType))\n            return false;\n        if (dispatch) {\n            if ($cursor) {\n                if (markType.isInSet(state.storedMarks || $cursor.marks()))\n                    dispatch(state.tr.removeStoredMark(markType));\n                else\n                    dispatch(state.tr.addStoredMark(markType.create(attrs)));\n            }\n            else {\n                let has = false, tr = state.tr;\n                for (let i = 0; !has && i < ranges.length; i++) {\n                    let { $from, $to } = ranges[i];\n                    has = state.doc.rangeHasMark($from.pos, $to.pos, markType);\n                }\n                for (let i = 0; i < ranges.length; i++) {\n                    let { $from, $to } = ranges[i];\n                    if (has) {\n                        tr.removeMark($from.pos, $to.pos, markType);\n                    }\n                    else {\n                        let from = $from.pos, to = $to.pos, start = $from.nodeAfter, end = $to.nodeBefore;\n                        let spaceStart = start && start.isText ? /^\\s*/.exec(start.text)[0].length : 0;\n                        let spaceEnd = end && end.isText ? /\\s*$/.exec(end.text)[0].length : 0;\n                        if (from + spaceStart < to) {\n                            from += spaceStart;\n                            to -= spaceEnd;\n                        }\n                        tr.addMark(from, to, markType.create(attrs));\n                    }\n                }\n                dispatch(tr.scrollIntoView());\n            }\n        }\n        return true;\n    };\n}\nfunction wrapDispatchForJoin(dispatch, isJoinable) {\n    return (tr) => {\n        if (!tr.isGeneric)\n            return dispatch(tr);\n        let ranges = [];\n        for (let i = 0; i < tr.mapping.maps.length; i++) {\n            let map = tr.mapping.maps[i];\n            for (let j = 0; j < ranges.length; j++)\n                ranges[j] = map.map(ranges[j]);\n            map.forEach((_s, _e, from, to) => ranges.push(from, to));\n        }\n        // Figure out which joinable points exist inside those ranges,\n        // by checking all node boundaries in their parent nodes.\n        let joinable = [];\n        for (let i = 0; i < ranges.length; i += 2) {\n            let from = ranges[i], to = ranges[i + 1];\n            let $from = tr.doc.resolve(from), depth = $from.sharedDepth(to), parent = $from.node(depth);\n            for (let index = $from.indexAfter(depth), pos = $from.after(depth + 1); pos <= to; ++index) {\n                let after = parent.maybeChild(index);\n                if (!after)\n                    break;\n                if (index && joinable.indexOf(pos) == -1) {\n                    let before = parent.child(index - 1);\n                    if (before.type == after.type && isJoinable(before, after))\n                        joinable.push(pos);\n                }\n                pos += after.nodeSize;\n            }\n        }\n        // Join the joinable points\n        joinable.sort((a, b) => a - b);\n        for (let i = joinable.length - 1; i >= 0; i--) {\n            if (canJoin(tr.doc, joinable[i]))\n                tr.join(joinable[i]);\n        }\n        dispatch(tr);\n    };\n}\n/**\nWrap a command so that, when it produces a transform that causes\ntwo joinable nodes to end up next to each other, those are joined.\nNodes are considered joinable when they are of the same type and\nwhen the `isJoinable` predicate returns true for them or, if an\narray of strings was passed, if their node type name is in that\narray.\n*/\nfunction autoJoin(command, isJoinable) {\n    let canJoin = Array.isArray(isJoinable) ? (node) => isJoinable.indexOf(node.type.name) > -1\n        : isJoinable;\n    return (state, dispatch, view) => command(state, dispatch && wrapDispatchForJoin(dispatch, canJoin), view);\n}\n/**\nCombine a number of command functions into a single function (which\ncalls them one by one until one returns true).\n*/\nfunction chainCommands(...commands) {\n    return function (state, dispatch, view) {\n        for (let i = 0; i < commands.length; i++)\n            if (commands[i](state, dispatch, view))\n                return true;\n        return false;\n    };\n}\nlet backspace = chainCommands(deleteSelection, joinBackward, selectNodeBackward);\nlet del = chainCommands(deleteSelection, joinForward, selectNodeForward);\n/**\nA basic keymap containing bindings not specific to any schema.\nBinds the following keys (when multiple commands are listed, they\nare chained with [`chainCommands`](https://prosemirror.net/docs/ref/#commands.chainCommands)):\n\n* **Enter** to `newlineInCode`, `createParagraphNear`, `liftEmptyBlock`, `splitBlock`\n* **Mod-Enter** to `exitCode`\n* **Backspace** and **Mod-Backspace** to `deleteSelection`, `joinBackward`, `selectNodeBackward`\n* **Delete** and **Mod-Delete** to `deleteSelection`, `joinForward`, `selectNodeForward`\n* **Mod-Delete** to `deleteSelection`, `joinForward`, `selectNodeForward`\n* **Mod-a** to `selectAll`\n*/\nconst pcBaseKeymap = {\n    \"Enter\": chainCommands(newlineInCode, createParagraphNear, liftEmptyBlock, splitBlock),\n    \"Mod-Enter\": exitCode,\n    \"Backspace\": backspace,\n    \"Mod-Backspace\": backspace,\n    \"Shift-Backspace\": backspace,\n    \"Delete\": del,\n    \"Mod-Delete\": del,\n    \"Mod-a\": selectAll\n};\n/**\nA copy of `pcBaseKeymap` that also binds **Ctrl-h** like Backspace,\n**Ctrl-d** like Delete, **Alt-Backspace** like Ctrl-Backspace, and\n**Ctrl-Alt-Backspace**, **Alt-Delete**, and **Alt-d** like\nCtrl-Delete.\n*/\nconst macBaseKeymap = {\n    \"Ctrl-h\": pcBaseKeymap[\"Backspace\"],\n    \"Alt-Backspace\": pcBaseKeymap[\"Mod-Backspace\"],\n    \"Ctrl-d\": pcBaseKeymap[\"Delete\"],\n    \"Ctrl-Alt-Backspace\": pcBaseKeymap[\"Mod-Delete\"],\n    \"Alt-Delete\": pcBaseKeymap[\"Mod-Delete\"],\n    \"Alt-d\": pcBaseKeymap[\"Mod-Delete\"],\n    \"Ctrl-a\": selectTextblockStart,\n    \"Ctrl-e\": selectTextblockEnd\n};\nfor (let key in pcBaseKeymap)\n    macBaseKeymap[key] = pcBaseKeymap[key];\nconst mac = typeof navigator != \"undefined\" ? /Mac|iP(hone|[oa]d)/.test(navigator.platform)\n    // @ts-ignore\n    : typeof os != \"undefined\" && os.platform ? os.platform() == \"darwin\" : false;\n/**\nDepending on the detected platform, this will hold\n[`pcBasekeymap`](https://prosemirror.net/docs/ref/#commands.pcBaseKeymap) or\n[`macBaseKeymap`](https://prosemirror.net/docs/ref/#commands.macBaseKeymap).\n*/\nconst baseKeymap = mac ? macBaseKeymap : pcBaseKeymap;\n\nexport { autoJoin, baseKeymap, chainCommands, createParagraphNear, deleteSelection, exitCode, joinBackward, joinDown, joinForward, joinUp, lift, liftEmptyBlock, macBaseKeymap, newlineInCode, pcBaseKeymap, selectAll, selectNodeBackward, selectNodeForward, selectParentNode, selectTextblockEnd, selectTextblockStart, setBlockType, splitBlock, splitBlockKeepMarks, toggleMark, wrapIn };\n","import { findWrapping, ReplaceAroundStep, canSplit, liftTarget } from 'prosemirror-transform';\nimport { NodeRange, Fragment, Slice } from 'prosemirror-model';\nimport { Selection } from 'prosemirror-state';\n\nconst olDOM = [\"ol\", 0], ulDOM = [\"ul\", 0], liDOM = [\"li\", 0];\n/**\nAn ordered list [node spec](https://prosemirror.net/docs/ref/#model.NodeSpec). Has a single\nattribute, `order`, which determines the number at which the list\nstarts counting, and defaults to 1. Represented as an `<ol>`\nelement.\n*/\nconst orderedList = {\n    attrs: { order: { default: 1 } },\n    parseDOM: [{ tag: \"ol\", getAttrs(dom) {\n                return { order: dom.hasAttribute(\"start\") ? +dom.getAttribute(\"start\") : 1 };\n            } }],\n    toDOM(node) {\n        return node.attrs.order == 1 ? olDOM : [\"ol\", { start: node.attrs.order }, 0];\n    }\n};\n/**\nA bullet list node spec, represented in the DOM as `<ul>`.\n*/\nconst bulletList = {\n    parseDOM: [{ tag: \"ul\" }],\n    toDOM() { return ulDOM; }\n};\n/**\nA list item (`<li>`) spec.\n*/\nconst listItem = {\n    parseDOM: [{ tag: \"li\" }],\n    toDOM() { return liDOM; },\n    defining: true\n};\nfunction add(obj, props) {\n    let copy = {};\n    for (let prop in obj)\n        copy[prop] = obj[prop];\n    for (let prop in props)\n        copy[prop] = props[prop];\n    return copy;\n}\n/**\nConvenience function for adding list-related node types to a map\nspecifying the nodes for a schema. Adds\n[`orderedList`](https://prosemirror.net/docs/ref/#schema-list.orderedList) as `\"ordered_list\"`,\n[`bulletList`](https://prosemirror.net/docs/ref/#schema-list.bulletList) as `\"bullet_list\"`, and\n[`listItem`](https://prosemirror.net/docs/ref/#schema-list.listItem) as `\"list_item\"`.\n\n`itemContent` determines the content expression for the list items.\nIf you want the commands defined in this module to apply to your\nlist structure, it should have a shape like `\"paragraph block*\"` or\n`\"paragraph (ordered_list | bullet_list)*\"`. `listGroup` can be\ngiven to assign a group name to the list node types, for example\n`\"block\"`.\n*/\nfunction addListNodes(nodes, itemContent, listGroup) {\n    return nodes.append({\n        ordered_list: add(orderedList, { content: \"list_item+\", group: listGroup }),\n        bullet_list: add(bulletList, { content: \"list_item+\", group: listGroup }),\n        list_item: add(listItem, { content: itemContent })\n    });\n}\n/**\nReturns a command function that wraps the selection in a list with\nthe given type an attributes. If `dispatch` is null, only return a\nvalue to indicate whether this is possible, but don't actually\nperform the change.\n*/\nfunction wrapInList(listType, attrs = null) {\n    return function (state, dispatch) {\n        let { $from, $to } = state.selection;\n        let range = $from.blockRange($to), doJoin = false, outerRange = range;\n        if (!range)\n            return false;\n        // This is at the top of an existing list item\n        if (range.depth >= 2 && $from.node(range.depth - 1).type.compatibleContent(listType) && range.startIndex == 0) {\n            // Don't do anything if this is the top of the list\n            if ($from.index(range.depth - 1) == 0)\n                return false;\n            let $insert = state.doc.resolve(range.start - 2);\n            outerRange = new NodeRange($insert, $insert, range.depth);\n            if (range.endIndex < range.parent.childCount)\n                range = new NodeRange($from, state.doc.resolve($to.end(range.depth)), range.depth);\n            doJoin = true;\n        }\n        let wrap = findWrapping(outerRange, listType, attrs, range);\n        if (!wrap)\n            return false;\n        if (dispatch)\n            dispatch(doWrapInList(state.tr, range, wrap, doJoin, listType).scrollIntoView());\n        return true;\n    };\n}\nfunction doWrapInList(tr, range, wrappers, joinBefore, listType) {\n    let content = Fragment.empty;\n    for (let i = wrappers.length - 1; i >= 0; i--)\n        content = Fragment.from(wrappers[i].type.create(wrappers[i].attrs, content));\n    tr.step(new ReplaceAroundStep(range.start - (joinBefore ? 2 : 0), range.end, range.start, range.end, new Slice(content, 0, 0), wrappers.length, true));\n    let found = 0;\n    for (let i = 0; i < wrappers.length; i++)\n        if (wrappers[i].type == listType)\n            found = i + 1;\n    let splitDepth = wrappers.length - found;\n    let splitPos = range.start + wrappers.length - (joinBefore ? 2 : 0), parent = range.parent;\n    for (let i = range.startIndex, e = range.endIndex, first = true; i < e; i++, first = false) {\n        if (!first && canSplit(tr.doc, splitPos, splitDepth)) {\n            tr.split(splitPos, splitDepth);\n            splitPos += 2 * splitDepth;\n        }\n        splitPos += parent.child(i).nodeSize;\n    }\n    return tr;\n}\n/**\nBuild a command that splits a non-empty textblock at the top level\nof a list item by also splitting that list item.\n*/\nfunction splitListItem(itemType) {\n    return function (state, dispatch) {\n        let { $from, $to, node } = state.selection;\n        if ((node && node.isBlock) || $from.depth < 2 || !$from.sameParent($to))\n            return false;\n        let grandParent = $from.node(-1);\n        if (grandParent.type != itemType)\n            return false;\n        if ($from.parent.content.size == 0 && $from.node(-1).childCount == $from.indexAfter(-1)) {\n            // In an empty block. If this is a nested list, the wrapping\n            // list item should be split. Otherwise, bail out and let next\n            // command handle lifting.\n            if ($from.depth == 3 || $from.node(-3).type != itemType ||\n                $from.index(-2) != $from.node(-2).childCount - 1)\n                return false;\n            if (dispatch) {\n                let wrap = Fragment.empty;\n                let depthBefore = $from.index(-1) ? 1 : $from.index(-2) ? 2 : 3;\n                // Build a fragment containing empty versions of the structure\n                // from the outer list item to the parent node of the cursor\n                for (let d = $from.depth - depthBefore; d >= $from.depth - 3; d--)\n                    wrap = Fragment.from($from.node(d).copy(wrap));\n                let depthAfter = $from.indexAfter(-1) < $from.node(-2).childCount ? 1\n                    : $from.indexAfter(-2) < $from.node(-3).childCount ? 2 : 3;\n                // Add a second list item with an empty default start node\n                wrap = wrap.append(Fragment.from(itemType.createAndFill()));\n                let start = $from.before($from.depth - (depthBefore - 1));\n                let tr = state.tr.replace(start, $from.after(-depthAfter), new Slice(wrap, 4 - depthBefore, 0));\n                let sel = -1;\n                tr.doc.nodesBetween(start, tr.doc.content.size, (node, pos) => {\n                    if (sel > -1)\n                        return false;\n                    if (node.isTextblock && node.content.size == 0)\n                        sel = pos + 1;\n                });\n                if (sel > -1)\n                    tr.setSelection(Selection.near(tr.doc.resolve(sel)));\n                dispatch(tr.scrollIntoView());\n            }\n            return true;\n        }\n        let nextType = $to.pos == $from.end() ? grandParent.contentMatchAt(0).defaultType : null;\n        let tr = state.tr.delete($from.pos, $to.pos);\n        let types = nextType ? [null, { type: nextType }] : undefined;\n        if (!canSplit(tr.doc, $from.pos, 2, types))\n            return false;\n        if (dispatch)\n            dispatch(tr.split($from.pos, 2, types).scrollIntoView());\n        return true;\n    };\n}\n/**\nCreate a command to lift the list item around the selection up into\na wrapping list.\n*/\nfunction liftListItem(itemType) {\n    return function (state, dispatch) {\n        let { $from, $to } = state.selection;\n        let range = $from.blockRange($to, node => node.childCount > 0 && node.firstChild.type == itemType);\n        if (!range)\n            return false;\n        if (!dispatch)\n            return true;\n        if ($from.node(range.depth - 1).type == itemType) // Inside a parent list\n            return liftToOuterList(state, dispatch, itemType, range);\n        else // Outer list node\n            return liftOutOfList(state, dispatch, range);\n    };\n}\nfunction liftToOuterList(state, dispatch, itemType, range) {\n    let tr = state.tr, end = range.end, endOfList = range.$to.end(range.depth);\n    if (end < endOfList) {\n        // There are siblings after the lifted items, which must become\n        // children of the last item\n        tr.step(new ReplaceAroundStep(end - 1, endOfList, end, endOfList, new Slice(Fragment.from(itemType.create(null, range.parent.copy())), 1, 0), 1, true));\n        range = new NodeRange(tr.doc.resolve(range.$from.pos), tr.doc.resolve(endOfList), range.depth);\n    }\n    dispatch(tr.lift(range, liftTarget(range)).scrollIntoView());\n    return true;\n}\nfunction liftOutOfList(state, dispatch, range) {\n    let tr = state.tr, list = range.parent;\n    // Merge the list items into a single big item\n    for (let pos = range.end, i = range.endIndex - 1, e = range.startIndex; i > e; i--) {\n        pos -= list.child(i).nodeSize;\n        tr.delete(pos - 1, pos + 1);\n    }\n    let $start = tr.doc.resolve(range.start), item = $start.nodeAfter;\n    if (tr.mapping.map(range.end) != range.start + $start.nodeAfter.nodeSize)\n        return false;\n    let atStart = range.startIndex == 0, atEnd = range.endIndex == list.childCount;\n    let parent = $start.node(-1), indexBefore = $start.index(-1);\n    if (!parent.canReplace(indexBefore + (atStart ? 0 : 1), indexBefore + 1, item.content.append(atEnd ? Fragment.empty : Fragment.from(list))))\n        return false;\n    let start = $start.pos, end = start + item.nodeSize;\n    // Strip off the surrounding list. At the sides where we're not at\n    // the end of the list, the existing list is closed. At sides where\n    // this is the end, it is overwritten to its end.\n    tr.step(new ReplaceAroundStep(start - (atStart ? 1 : 0), end + (atEnd ? 1 : 0), start + 1, end - 1, new Slice((atStart ? Fragment.empty : Fragment.from(list.copy(Fragment.empty)))\n        .append(atEnd ? Fragment.empty : Fragment.from(list.copy(Fragment.empty))), atStart ? 0 : 1, atEnd ? 0 : 1), atStart ? 0 : 1));\n    dispatch(tr.scrollIntoView());\n    return true;\n}\n/**\nCreate a command to sink the list item around the selection down\ninto an inner list.\n*/\nfunction sinkListItem(itemType) {\n    return function (state, dispatch) {\n        let { $from, $to } = state.selection;\n        let range = $from.blockRange($to, node => node.childCount > 0 && node.firstChild.type == itemType);\n        if (!range)\n            return false;\n        let startIndex = range.startIndex;\n        if (startIndex == 0)\n            return false;\n        let parent = range.parent, nodeBefore = parent.child(startIndex - 1);\n        if (nodeBefore.type != itemType)\n            return false;\n        if (dispatch) {\n            let nestedBefore = nodeBefore.lastChild && nodeBefore.lastChild.type == parent.type;\n            let inner = Fragment.from(nestedBefore ? itemType.create() : null);\n            let slice = new Slice(Fragment.from(itemType.create(null, Fragment.from(parent.type.create(null, inner)))), nestedBefore ? 3 : 1, 0);\n            let before = range.start, after = range.end;\n            dispatch(state.tr.step(new ReplaceAroundStep(before - (nestedBefore ? 3 : 1), after, before, after, slice, 1, true))\n                .scrollIntoView());\n        }\n        return true;\n    };\n}\n\nexport { addListNodes, bulletList, liftListItem, listItem, orderedList, sinkListItem, splitListItem, wrapInList };\n","import { Plugin, PluginKey, TextSelection, Selection, NodeSelection, EditorState } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { keymap } from 'prosemirror-keymap';\nimport { Schema, Fragment, DOMParser, Slice, DOMSerializer, Node as Node$1 } from 'prosemirror-model';\nimport { liftTarget, ReplaceStep, ReplaceAroundStep, canSplit, canJoin, Transform, findWrapping } from 'prosemirror-transform';\nimport { createParagraphNear as createParagraphNear$1, deleteSelection as deleteSelection$1, exitCode as exitCode$1, joinBackward as joinBackward$1, joinForward as joinForward$1, lift as lift$1, liftEmptyBlock as liftEmptyBlock$1, newlineInCode as newlineInCode$1, selectNodeBackward as selectNodeBackward$1, selectNodeForward as selectNodeForward$1, selectParentNode as selectParentNode$1, selectTextblockEnd as selectTextblockEnd$1, selectTextblockStart as selectTextblockStart$1, setBlockType, wrapIn as wrapIn$1 } from 'prosemirror-commands';\nimport { liftListItem as liftListItem$1, sinkListItem as sinkListItem$1, wrapInList as wrapInList$1 } from 'prosemirror-schema-list';\n\nfunction createChainableState(config) {\r\n    const { state, transaction } = config;\r\n    let { selection } = transaction;\r\n    let { doc } = transaction;\r\n    let { storedMarks } = transaction;\r\n    return {\r\n        ...state,\r\n        apply: state.apply.bind(state),\r\n        applyTransaction: state.applyTransaction.bind(state),\r\n        filterTransaction: state.filterTransaction,\r\n        plugins: state.plugins,\r\n        schema: state.schema,\r\n        reconfigure: state.reconfigure.bind(state),\r\n        toJSON: state.toJSON.bind(state),\r\n        get storedMarks() {\r\n            return storedMarks;\r\n        },\r\n        get selection() {\r\n            return selection;\r\n        },\r\n        get doc() {\r\n            return doc;\r\n        },\r\n        get tr() {\r\n            selection = transaction.selection;\r\n            doc = transaction.doc;\r\n            storedMarks = transaction.storedMarks;\r\n            return transaction;\r\n        },\r\n    };\r\n}\n\nclass CommandManager {\r\n    constructor(props) {\r\n        this.editor = props.editor;\r\n        this.rawCommands = this.editor.extensionManager.commands;\r\n        this.customState = props.state;\r\n    }\r\n    get hasCustomState() {\r\n        return !!this.customState;\r\n    }\r\n    get state() {\r\n        return this.customState || this.editor.state;\r\n    }\r\n    get commands() {\r\n        const { rawCommands, editor, state } = this;\r\n        const { view } = editor;\r\n        const { tr } = state;\r\n        const props = this.buildProps(tr);\r\n        return Object.fromEntries(Object\r\n            .entries(rawCommands)\r\n            .map(([name, command]) => {\r\n            const method = (...args) => {\r\n                const callback = command(...args)(props);\r\n                if (!tr.getMeta('preventDispatch') && !this.hasCustomState) {\r\n                    view.dispatch(tr);\r\n                }\r\n                return callback;\r\n            };\r\n            return [name, method];\r\n        }));\r\n    }\r\n    get chain() {\r\n        return () => this.createChain();\r\n    }\r\n    get can() {\r\n        return () => this.createCan();\r\n    }\r\n    createChain(startTr, shouldDispatch = true) {\r\n        const { rawCommands, editor, state } = this;\r\n        const { view } = editor;\r\n        const callbacks = [];\r\n        const hasStartTransaction = !!startTr;\r\n        const tr = startTr || state.tr;\r\n        const run = () => {\r\n            if (!hasStartTransaction\r\n                && shouldDispatch\r\n                && !tr.getMeta('preventDispatch')\r\n                && !this.hasCustomState) {\r\n                view.dispatch(tr);\r\n            }\r\n            return callbacks.every(callback => callback === true);\r\n        };\r\n        const chain = {\r\n            ...Object.fromEntries(Object.entries(rawCommands).map(([name, command]) => {\r\n                const chainedCommand = (...args) => {\r\n                    const props = this.buildProps(tr, shouldDispatch);\r\n                    const callback = command(...args)(props);\r\n                    callbacks.push(callback);\r\n                    return chain;\r\n                };\r\n                return [name, chainedCommand];\r\n            })),\r\n            run,\r\n        };\r\n        return chain;\r\n    }\r\n    createCan(startTr) {\r\n        const { rawCommands, state } = this;\r\n        const dispatch = undefined;\r\n        const tr = startTr || state.tr;\r\n        const props = this.buildProps(tr, dispatch);\r\n        const formattedCommands = Object.fromEntries(Object\r\n            .entries(rawCommands)\r\n            .map(([name, command]) => {\r\n            return [name, (...args) => command(...args)({ ...props, dispatch })];\r\n        }));\r\n        return {\r\n            ...formattedCommands,\r\n            chain: () => this.createChain(tr, dispatch),\r\n        };\r\n    }\r\n    buildProps(tr, shouldDispatch = true) {\r\n        const { rawCommands, editor, state } = this;\r\n        const { view } = editor;\r\n        if (state.storedMarks) {\r\n            tr.setStoredMarks(state.storedMarks);\r\n        }\r\n        const props = {\r\n            tr,\r\n            editor,\r\n            view,\r\n            state: createChainableState({\r\n                state,\r\n                transaction: tr,\r\n            }),\r\n            dispatch: shouldDispatch\r\n                ? () => undefined\r\n                : undefined,\r\n            chain: () => this.createChain(tr),\r\n            can: () => this.createCan(tr),\r\n            get commands() {\r\n                return Object.fromEntries(Object\r\n                    .entries(rawCommands)\r\n                    .map(([name, command]) => {\r\n                    return [name, (...args) => command(...args)(props)];\r\n                }));\r\n            },\r\n        };\r\n        return props;\r\n    }\r\n}\n\nclass EventEmitter {\r\n    constructor() {\r\n        this.callbacks = {};\r\n    }\r\n    on(event, fn) {\r\n        if (!this.callbacks[event]) {\r\n            this.callbacks[event] = [];\r\n        }\r\n        this.callbacks[event].push(fn);\r\n        return this;\r\n    }\r\n    emit(event, ...args) {\r\n        const callbacks = this.callbacks[event];\r\n        if (callbacks) {\r\n            callbacks.forEach(callback => callback.apply(this, args));\r\n        }\r\n        return this;\r\n    }\r\n    off(event, fn) {\r\n        const callbacks = this.callbacks[event];\r\n        if (callbacks) {\r\n            if (fn) {\r\n                this.callbacks[event] = callbacks.filter(callback => callback !== fn);\r\n            }\r\n            else {\r\n                delete this.callbacks[event];\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n    removeAllListeners() {\r\n        this.callbacks = {};\r\n    }\r\n}\n\nfunction getExtensionField(extension, field, context) {\r\n    if (extension.config[field] === undefined && extension.parent) {\r\n        return getExtensionField(extension.parent, field, context);\r\n    }\r\n    if (typeof extension.config[field] === 'function') {\r\n        const value = extension.config[field].bind({\r\n            ...context,\r\n            parent: extension.parent\r\n                ? getExtensionField(extension.parent, field, context)\r\n                : null,\r\n        });\r\n        return value;\r\n    }\r\n    return extension.config[field];\r\n}\n\nfunction splitExtensions(extensions) {\r\n    const baseExtensions = extensions.filter(extension => extension.type === 'extension');\r\n    const nodeExtensions = extensions.filter(extension => extension.type === 'node');\r\n    const markExtensions = extensions.filter(extension => extension.type === 'mark');\r\n    return {\r\n        baseExtensions,\r\n        nodeExtensions,\r\n        markExtensions,\r\n    };\r\n}\n\n/**\r\n * Get a list of all extension attributes defined in `addAttribute` and `addGlobalAttribute`.\r\n * @param extensions List of extensions\r\n */\r\nfunction getAttributesFromExtensions(extensions) {\r\n    const extensionAttributes = [];\r\n    const { nodeExtensions, markExtensions } = splitExtensions(extensions);\r\n    const nodeAndMarkExtensions = [...nodeExtensions, ...markExtensions];\r\n    const defaultAttribute = {\r\n        default: null,\r\n        rendered: true,\r\n        renderHTML: null,\r\n        parseHTML: null,\r\n        keepOnSplit: true,\r\n        isRequired: false,\r\n    };\r\n    extensions.forEach(extension => {\r\n        const context = {\r\n            name: extension.name,\r\n            options: extension.options,\r\n            storage: extension.storage,\r\n        };\r\n        const addGlobalAttributes = getExtensionField(extension, 'addGlobalAttributes', context);\r\n        if (!addGlobalAttributes) {\r\n            return;\r\n        }\r\n        // TODO: remove `as GlobalAttributes`\r\n        const globalAttributes = addGlobalAttributes();\r\n        globalAttributes.forEach(globalAttribute => {\r\n            globalAttribute.types.forEach(type => {\r\n                Object\r\n                    .entries(globalAttribute.attributes)\r\n                    .forEach(([name, attribute]) => {\r\n                    extensionAttributes.push({\r\n                        type,\r\n                        name,\r\n                        attribute: {\r\n                            ...defaultAttribute,\r\n                            ...attribute,\r\n                        },\r\n                    });\r\n                });\r\n            });\r\n        });\r\n    });\r\n    nodeAndMarkExtensions.forEach(extension => {\r\n        const context = {\r\n            name: extension.name,\r\n            options: extension.options,\r\n            storage: extension.storage,\r\n        };\r\n        const addAttributes = getExtensionField(extension, 'addAttributes', context);\r\n        if (!addAttributes) {\r\n            return;\r\n        }\r\n        // TODO: remove `as Attributes`\r\n        const attributes = addAttributes();\r\n        Object\r\n            .entries(attributes)\r\n            .forEach(([name, attribute]) => {\r\n            const mergedAttr = {\r\n                ...defaultAttribute,\r\n                ...attribute,\r\n            };\r\n            if (attribute.isRequired && attribute.default === undefined) {\r\n                delete mergedAttr.default;\r\n            }\r\n            extensionAttributes.push({\r\n                type: extension.name,\r\n                name,\r\n                attribute: mergedAttr,\r\n            });\r\n        });\r\n    });\r\n    return extensionAttributes;\r\n}\n\nfunction getNodeType(nameOrType, schema) {\r\n    if (typeof nameOrType === 'string') {\r\n        if (!schema.nodes[nameOrType]) {\r\n            throw Error(`There is no node type named '${nameOrType}'. Maybe you forgot to add the extension?`);\r\n        }\r\n        return schema.nodes[nameOrType];\r\n    }\r\n    return nameOrType;\r\n}\n\nfunction mergeAttributes(...objects) {\r\n    return objects\r\n        .filter(item => !!item)\r\n        .reduce((items, item) => {\r\n        const mergedAttributes = { ...items };\r\n        Object.entries(item).forEach(([key, value]) => {\r\n            const exists = mergedAttributes[key];\r\n            if (!exists) {\r\n                mergedAttributes[key] = value;\r\n                return;\r\n            }\r\n            if (key === 'class') {\r\n                mergedAttributes[key] = [mergedAttributes[key], value].join(' ');\r\n            }\r\n            else if (key === 'style') {\r\n                mergedAttributes[key] = [mergedAttributes[key], value].join('; ');\r\n            }\r\n            else {\r\n                mergedAttributes[key] = value;\r\n            }\r\n        });\r\n        return mergedAttributes;\r\n    }, {});\r\n}\n\nfunction getRenderedAttributes(nodeOrMark, extensionAttributes) {\r\n    return extensionAttributes\r\n        .filter(item => item.attribute.rendered)\r\n        .map(item => {\r\n        if (!item.attribute.renderHTML) {\r\n            return {\r\n                [item.name]: nodeOrMark.attrs[item.name],\r\n            };\r\n        }\r\n        return item.attribute.renderHTML(nodeOrMark.attrs) || {};\r\n    })\r\n        .reduce((attributes, attribute) => mergeAttributes(attributes, attribute), {});\r\n}\n\nfunction isFunction(value) {\r\n    return typeof value === 'function';\r\n}\n\n/**\r\n * Optionally calls `value` as a function.\r\n * Otherwise it is returned directly.\r\n * @param value Function or any value.\r\n * @param context Optional context to bind to function.\r\n * @param props Optional props to pass to function.\r\n */\r\nfunction callOrReturn(value, context = undefined, ...props) {\r\n    if (isFunction(value)) {\r\n        if (context) {\r\n            return value.bind(context)(...props);\r\n        }\r\n        return value(...props);\r\n    }\r\n    return value;\r\n}\n\nfunction isEmptyObject(value = {}) {\r\n    return Object.keys(value).length === 0 && value.constructor === Object;\r\n}\n\nfunction fromString(value) {\r\n    if (typeof value !== 'string') {\r\n        return value;\r\n    }\r\n    if (value.match(/^[+-]?(?:\\d*\\.)?\\d+$/)) {\r\n        return Number(value);\r\n    }\r\n    if (value === 'true') {\r\n        return true;\r\n    }\r\n    if (value === 'false') {\r\n        return false;\r\n    }\r\n    return value;\r\n}\n\n/**\r\n * This function merges extension attributes into parserule attributes (`attrs` or `getAttrs`).\r\n * Cancels when `getAttrs` returned `false`.\r\n * @param parseRule ProseMirror ParseRule\r\n * @param extensionAttributes List of attributes to inject\r\n */\r\nfunction injectExtensionAttributesToParseRule(parseRule, extensionAttributes) {\r\n    if (parseRule.style) {\r\n        return parseRule;\r\n    }\r\n    return {\r\n        ...parseRule,\r\n        getAttrs: node => {\r\n            const oldAttributes = parseRule.getAttrs\r\n                ? parseRule.getAttrs(node)\r\n                : parseRule.attrs;\r\n            if (oldAttributes === false) {\r\n                return false;\r\n            }\r\n            const newAttributes = extensionAttributes.reduce((items, item) => {\r\n                const value = item.attribute.parseHTML\r\n                    ? item.attribute.parseHTML(node)\r\n                    : fromString(node.getAttribute(item.name));\r\n                if (value === null || value === undefined) {\r\n                    return items;\r\n                }\r\n                return {\r\n                    ...items,\r\n                    [item.name]: value,\r\n                };\r\n            }, {});\r\n            return { ...oldAttributes, ...newAttributes };\r\n        },\r\n    };\r\n}\n\nfunction cleanUpSchemaItem(data) {\r\n    return Object.fromEntries(Object.entries(data).filter(([key, value]) => {\r\n        if (key === 'attrs' && isEmptyObject(value)) {\r\n            return false;\r\n        }\r\n        return value !== null && value !== undefined;\r\n    }));\r\n}\r\nfunction getSchemaByResolvedExtensions(extensions) {\r\n    var _a;\r\n    const allAttributes = getAttributesFromExtensions(extensions);\r\n    const { nodeExtensions, markExtensions } = splitExtensions(extensions);\r\n    const topNode = (_a = nodeExtensions.find(extension => getExtensionField(extension, 'topNode'))) === null || _a === void 0 ? void 0 : _a.name;\r\n    const nodes = Object.fromEntries(nodeExtensions.map(extension => {\r\n        const extensionAttributes = allAttributes.filter(attribute => attribute.type === extension.name);\r\n        const context = {\r\n            name: extension.name,\r\n            options: extension.options,\r\n            storage: extension.storage,\r\n        };\r\n        const extraNodeFields = extensions.reduce((fields, e) => {\r\n            const extendNodeSchema = getExtensionField(e, 'extendNodeSchema', context);\r\n            return {\r\n                ...fields,\r\n                ...(extendNodeSchema ? extendNodeSchema(extension) : {}),\r\n            };\r\n        }, {});\r\n        const schema = cleanUpSchemaItem({\r\n            ...extraNodeFields,\r\n            content: callOrReturn(getExtensionField(extension, 'content', context)),\r\n            marks: callOrReturn(getExtensionField(extension, 'marks', context)),\r\n            group: callOrReturn(getExtensionField(extension, 'group', context)),\r\n            inline: callOrReturn(getExtensionField(extension, 'inline', context)),\r\n            atom: callOrReturn(getExtensionField(extension, 'atom', context)),\r\n            selectable: callOrReturn(getExtensionField(extension, 'selectable', context)),\r\n            draggable: callOrReturn(getExtensionField(extension, 'draggable', context)),\r\n            code: callOrReturn(getExtensionField(extension, 'code', context)),\r\n            defining: callOrReturn(getExtensionField(extension, 'defining', context)),\r\n            isolating: callOrReturn(getExtensionField(extension, 'isolating', context)),\r\n            attrs: Object.fromEntries(extensionAttributes.map(extensionAttribute => {\r\n                var _a;\r\n                return [extensionAttribute.name, { default: (_a = extensionAttribute === null || extensionAttribute === void 0 ? void 0 : extensionAttribute.attribute) === null || _a === void 0 ? void 0 : _a.default }];\r\n            })),\r\n        });\r\n        const parseHTML = callOrReturn(getExtensionField(extension, 'parseHTML', context));\r\n        if (parseHTML) {\r\n            schema.parseDOM = parseHTML\r\n                .map(parseRule => injectExtensionAttributesToParseRule(parseRule, extensionAttributes));\r\n        }\r\n        const renderHTML = getExtensionField(extension, 'renderHTML', context);\r\n        if (renderHTML) {\r\n            schema.toDOM = node => renderHTML({\r\n                node,\r\n                HTMLAttributes: getRenderedAttributes(node, extensionAttributes),\r\n            });\r\n        }\r\n        const renderText = getExtensionField(extension, 'renderText', context);\r\n        if (renderText) {\r\n            schema.toText = renderText;\r\n        }\r\n        return [extension.name, schema];\r\n    }));\r\n    const marks = Object.fromEntries(markExtensions.map(extension => {\r\n        const extensionAttributes = allAttributes.filter(attribute => attribute.type === extension.name);\r\n        const context = {\r\n            name: extension.name,\r\n            options: extension.options,\r\n            storage: extension.storage,\r\n        };\r\n        const extraMarkFields = extensions.reduce((fields, e) => {\r\n            const extendMarkSchema = getExtensionField(e, 'extendMarkSchema', context);\r\n            return {\r\n                ...fields,\r\n                ...(extendMarkSchema ? extendMarkSchema(extension) : {}),\r\n            };\r\n        }, {});\r\n        const schema = cleanUpSchemaItem({\r\n            ...extraMarkFields,\r\n            inclusive: callOrReturn(getExtensionField(extension, 'inclusive', context)),\r\n            excludes: callOrReturn(getExtensionField(extension, 'excludes', context)),\r\n            group: callOrReturn(getExtensionField(extension, 'group', context)),\r\n            spanning: callOrReturn(getExtensionField(extension, 'spanning', context)),\r\n            code: callOrReturn(getExtensionField(extension, 'code', context)),\r\n            attrs: Object.fromEntries(extensionAttributes.map(extensionAttribute => {\r\n                var _a;\r\n                return [extensionAttribute.name, { default: (_a = extensionAttribute === null || extensionAttribute === void 0 ? void 0 : extensionAttribute.attribute) === null || _a === void 0 ? void 0 : _a.default }];\r\n            })),\r\n        });\r\n        const parseHTML = callOrReturn(getExtensionField(extension, 'parseHTML', context));\r\n        if (parseHTML) {\r\n            schema.parseDOM = parseHTML\r\n                .map(parseRule => injectExtensionAttributesToParseRule(parseRule, extensionAttributes));\r\n        }\r\n        const renderHTML = getExtensionField(extension, 'renderHTML', context);\r\n        if (renderHTML) {\r\n            schema.toDOM = mark => renderHTML({\r\n                mark,\r\n                HTMLAttributes: getRenderedAttributes(mark, extensionAttributes),\r\n            });\r\n        }\r\n        return [extension.name, schema];\r\n    }));\r\n    return new Schema({\r\n        topNode,\r\n        nodes,\r\n        marks,\r\n    });\r\n}\n\nfunction getSchemaTypeByName(name, schema) {\r\n    return schema.nodes[name] || schema.marks[name] || null;\r\n}\n\nfunction isExtensionRulesEnabled(extension, enabled) {\r\n    if (Array.isArray(enabled)) {\r\n        return enabled.some(enabledExtension => {\r\n            const name = typeof enabledExtension === 'string'\r\n                ? enabledExtension\r\n                : enabledExtension.name;\r\n            return name === extension.name;\r\n        });\r\n    }\r\n    return enabled;\r\n}\n\nconst getTextContentFromNodes = ($from, maxMatch = 500) => {\r\n    let textBefore = '';\r\n    $from.parent.nodesBetween(Math.max(0, $from.parentOffset - maxMatch), $from.parentOffset, (node, pos, parent, index) => {\r\n        var _a, _b, _c;\r\n        textBefore += ((_b = (_a = node.type.spec).toText) === null || _b === void 0 ? void 0 : _b.call(_a, {\r\n            node, pos, parent, index,\r\n        })) || ((_c = $from.nodeBefore) === null || _c === void 0 ? void 0 : _c.text) || '%leaf%';\r\n    });\r\n    return textBefore;\r\n};\n\nfunction isRegExp(value) {\r\n    return Object.prototype.toString.call(value) === '[object RegExp]';\r\n}\n\nclass InputRule {\r\n    constructor(config) {\r\n        this.find = config.find;\r\n        this.handler = config.handler;\r\n    }\r\n}\r\nconst inputRuleMatcherHandler = (text, find) => {\r\n    if (isRegExp(find)) {\r\n        return find.exec(text);\r\n    }\r\n    const inputRuleMatch = find(text);\r\n    if (!inputRuleMatch) {\r\n        return null;\r\n    }\r\n    const result = [];\r\n    result.push(inputRuleMatch.text);\r\n    result.index = inputRuleMatch.index;\r\n    result.input = text;\r\n    result.data = inputRuleMatch.data;\r\n    if (inputRuleMatch.replaceWith) {\r\n        if (!inputRuleMatch.text.includes(inputRuleMatch.replaceWith)) {\r\n            console.warn('[tiptap warn]: \"inputRuleMatch.replaceWith\" must be part of \"inputRuleMatch.text\".');\r\n        }\r\n        result.push(inputRuleMatch.replaceWith);\r\n    }\r\n    return result;\r\n};\r\nfunction run$1(config) {\r\n    var _a;\r\n    const { editor, from, to, text, rules, plugin, } = config;\r\n    const { view } = editor;\r\n    if (view.composing) {\r\n        return false;\r\n    }\r\n    const $from = view.state.doc.resolve(from);\r\n    if (\r\n    // check for code node\r\n    $from.parent.type.spec.code\r\n        // check for code mark\r\n        || !!((_a = ($from.nodeBefore || $from.nodeAfter)) === null || _a === void 0 ? void 0 : _a.marks.find(mark => mark.type.spec.code))) {\r\n        return false;\r\n    }\r\n    let matched = false;\r\n    const textBefore = getTextContentFromNodes($from) + text;\r\n    rules.forEach(rule => {\r\n        if (matched) {\r\n            return;\r\n        }\r\n        const match = inputRuleMatcherHandler(textBefore, rule.find);\r\n        if (!match) {\r\n            return;\r\n        }\r\n        const tr = view.state.tr;\r\n        const state = createChainableState({\r\n            state: view.state,\r\n            transaction: tr,\r\n        });\r\n        const range = {\r\n            from: from - (match[0].length - text.length),\r\n            to,\r\n        };\r\n        const { commands, chain, can } = new CommandManager({\r\n            editor,\r\n            state,\r\n        });\r\n        const handler = rule.handler({\r\n            state,\r\n            range,\r\n            match,\r\n            commands,\r\n            chain,\r\n            can,\r\n        });\r\n        // stop if there are no changes\r\n        if (handler === null || !tr.steps.length) {\r\n            return;\r\n        }\r\n        // store transform as meta data\r\n        // so we can undo input rules within the `undoInputRules` command\r\n        tr.setMeta(plugin, {\r\n            transform: tr,\r\n            from,\r\n            to,\r\n            text,\r\n        });\r\n        view.dispatch(tr);\r\n        matched = true;\r\n    });\r\n    return matched;\r\n}\r\n/**\r\n * Create an input rules plugin. When enabled, it will cause text\r\n * input that matches any of the given rules to trigger the rules\r\n * action.\r\n */\r\nfunction inputRulesPlugin(props) {\r\n    const { editor, rules } = props;\r\n    const plugin = new Plugin({\r\n        state: {\r\n            init() {\r\n                return null;\r\n            },\r\n            apply(tr, prev) {\r\n                const stored = tr.getMeta(plugin);\r\n                if (stored) {\r\n                    return stored;\r\n                }\r\n                return tr.selectionSet || tr.docChanged\r\n                    ? null\r\n                    : prev;\r\n            },\r\n        },\r\n        props: {\r\n            handleTextInput(view, from, to, text) {\r\n                return run$1({\r\n                    editor,\r\n                    from,\r\n                    to,\r\n                    text,\r\n                    rules,\r\n                    plugin,\r\n                });\r\n            },\r\n            handleDOMEvents: {\r\n                compositionend: view => {\r\n                    setTimeout(() => {\r\n                        const { $cursor } = view.state.selection;\r\n                        if ($cursor) {\r\n                            run$1({\r\n                                editor,\r\n                                from: $cursor.pos,\r\n                                to: $cursor.pos,\r\n                                text: '',\r\n                                rules,\r\n                                plugin,\r\n                            });\r\n                        }\r\n                    });\r\n                    return false;\r\n                },\r\n            },\r\n            // add support for input rules to trigger on enter\r\n            // this is useful for example for code blocks\r\n            handleKeyDown(view, event) {\r\n                if (event.key !== 'Enter') {\r\n                    return false;\r\n                }\r\n                const { $cursor } = view.state.selection;\r\n                if ($cursor) {\r\n                    return run$1({\r\n                        editor,\r\n                        from: $cursor.pos,\r\n                        to: $cursor.pos,\r\n                        text: '\\n',\r\n                        rules,\r\n                        plugin,\r\n                    });\r\n                }\r\n                return false;\r\n            },\r\n        },\r\n        // @ts-ignore\r\n        isInputRules: true,\r\n    });\r\n    return plugin;\r\n}\n\nfunction isNumber(value) {\r\n    return typeof value === 'number';\r\n}\n\nclass PasteRule {\r\n    constructor(config) {\r\n        this.find = config.find;\r\n        this.handler = config.handler;\r\n    }\r\n}\r\nconst pasteRuleMatcherHandler = (text, find) => {\r\n    if (isRegExp(find)) {\r\n        return [...text.matchAll(find)];\r\n    }\r\n    const matches = find(text);\r\n    if (!matches) {\r\n        return [];\r\n    }\r\n    return matches.map(pasteRuleMatch => {\r\n        const result = [];\r\n        result.push(pasteRuleMatch.text);\r\n        result.index = pasteRuleMatch.index;\r\n        result.input = text;\r\n        result.data = pasteRuleMatch.data;\r\n        if (pasteRuleMatch.replaceWith) {\r\n            if (!pasteRuleMatch.text.includes(pasteRuleMatch.replaceWith)) {\r\n                console.warn('[tiptap warn]: \"pasteRuleMatch.replaceWith\" must be part of \"pasteRuleMatch.text\".');\r\n            }\r\n            result.push(pasteRuleMatch.replaceWith);\r\n        }\r\n        return result;\r\n    });\r\n};\r\nfunction run(config) {\r\n    const { editor, state, from, to, rule, } = config;\r\n    const { commands, chain, can } = new CommandManager({\r\n        editor,\r\n        state,\r\n    });\r\n    const handlers = [];\r\n    state.doc.nodesBetween(from, to, (node, pos) => {\r\n        if (!node.isTextblock || node.type.spec.code) {\r\n            return;\r\n        }\r\n        const resolvedFrom = Math.max(from, pos);\r\n        const resolvedTo = Math.min(to, pos + node.content.size);\r\n        const textToMatch = node.textBetween(resolvedFrom - pos, resolvedTo - pos, undefined, '\\ufffc');\r\n        const matches = pasteRuleMatcherHandler(textToMatch, rule.find);\r\n        matches.forEach(match => {\r\n            if (match.index === undefined) {\r\n                return;\r\n            }\r\n            const start = resolvedFrom + match.index + 1;\r\n            const end = start + match[0].length;\r\n            const range = {\r\n                from: state.tr.mapping.map(start),\r\n                to: state.tr.mapping.map(end),\r\n            };\r\n            const handler = rule.handler({\r\n                state,\r\n                range,\r\n                match,\r\n                commands,\r\n                chain,\r\n                can,\r\n            });\r\n            handlers.push(handler);\r\n        });\r\n    });\r\n    const success = handlers.every(handler => handler !== null);\r\n    return success;\r\n}\r\n/**\r\n * Create an paste rules plugin. When enabled, it will cause pasted\r\n * text that matches any of the given rules to trigger the rules\r\n * action.\r\n */\r\nfunction pasteRulesPlugin(props) {\r\n    const { editor, rules } = props;\r\n    let dragSourceElement = null;\r\n    let isPastedFromProseMirror = false;\r\n    let isDroppedFromProseMirror = false;\r\n    const plugins = rules.map(rule => {\r\n        return new Plugin({\r\n            // we register a global drag handler to track the current drag source element\r\n            view(view) {\r\n                const handleDragstart = (event) => {\r\n                    var _a;\r\n                    dragSourceElement = ((_a = view.dom.parentElement) === null || _a === void 0 ? void 0 : _a.contains(event.target))\r\n                        ? view.dom.parentElement\r\n                        : null;\r\n                };\r\n                window.addEventListener('dragstart', handleDragstart);\r\n                return {\r\n                    destroy() {\r\n                        window.removeEventListener('dragstart', handleDragstart);\r\n                    },\r\n                };\r\n            },\r\n            props: {\r\n                handleDOMEvents: {\r\n                    drop: view => {\r\n                        isDroppedFromProseMirror = dragSourceElement === view.dom.parentElement;\r\n                        return false;\r\n                    },\r\n                    paste: (view, event) => {\r\n                        var _a;\r\n                        const html = (_a = event.clipboardData) === null || _a === void 0 ? void 0 : _a.getData('text/html');\r\n                        isPastedFromProseMirror = !!(html === null || html === void 0 ? void 0 : html.includes('data-pm-slice'));\r\n                        return false;\r\n                    },\r\n                },\r\n            },\r\n            appendTransaction: (transactions, oldState, state) => {\r\n                const transaction = transactions[0];\r\n                const isPaste = transaction.getMeta('uiEvent') === 'paste' && !isPastedFromProseMirror;\r\n                const isDrop = transaction.getMeta('uiEvent') === 'drop' && !isDroppedFromProseMirror;\r\n                if (!isPaste && !isDrop) {\r\n                    return;\r\n                }\r\n                // stop if there is no changed range\r\n                const from = oldState.doc.content.findDiffStart(state.doc.content);\r\n                const to = oldState.doc.content.findDiffEnd(state.doc.content);\r\n                if (!isNumber(from) || !to || from === to.b) {\r\n                    return;\r\n                }\r\n                // build a chainable state\r\n                // so we can use a single transaction for all paste rules\r\n                const tr = state.tr;\r\n                const chainableState = createChainableState({\r\n                    state,\r\n                    transaction: tr,\r\n                });\r\n                const handler = run({\r\n                    editor,\r\n                    state: chainableState,\r\n                    from: Math.max(from - 1, 0),\r\n                    to: to.b,\r\n                    rule,\r\n                });\r\n                // stop if there are no changes\r\n                if (!handler || !tr.steps.length) {\r\n                    return;\r\n                }\r\n                return tr;\r\n            },\r\n        });\r\n    });\r\n    return plugins;\r\n}\n\nfunction findDuplicates(items) {\r\n    const filtered = items.filter((el, index) => items.indexOf(el) !== index);\r\n    return [...new Set(filtered)];\r\n}\n\nclass ExtensionManager {\r\n    constructor(extensions, editor) {\r\n        this.splittableMarks = [];\r\n        this.editor = editor;\r\n        this.extensions = ExtensionManager.resolve(extensions);\r\n        this.schema = getSchemaByResolvedExtensions(this.extensions);\r\n        this.extensions.forEach(extension => {\r\n            var _a;\r\n            // store extension storage in editor\r\n            this.editor.extensionStorage[extension.name] = extension.storage;\r\n            const context = {\r\n                name: extension.name,\r\n                options: extension.options,\r\n                storage: extension.storage,\r\n                editor: this.editor,\r\n                type: getSchemaTypeByName(extension.name, this.schema),\r\n            };\r\n            if (extension.type === 'mark') {\r\n                const keepOnSplit = (_a = callOrReturn(getExtensionField(extension, 'keepOnSplit', context))) !== null && _a !== void 0 ? _a : true;\r\n                if (keepOnSplit) {\r\n                    this.splittableMarks.push(extension.name);\r\n                }\r\n            }\r\n            const onBeforeCreate = getExtensionField(extension, 'onBeforeCreate', context);\r\n            if (onBeforeCreate) {\r\n                this.editor.on('beforeCreate', onBeforeCreate);\r\n            }\r\n            const onCreate = getExtensionField(extension, 'onCreate', context);\r\n            if (onCreate) {\r\n                this.editor.on('create', onCreate);\r\n            }\r\n            const onUpdate = getExtensionField(extension, 'onUpdate', context);\r\n            if (onUpdate) {\r\n                this.editor.on('update', onUpdate);\r\n            }\r\n            const onSelectionUpdate = getExtensionField(extension, 'onSelectionUpdate', context);\r\n            if (onSelectionUpdate) {\r\n                this.editor.on('selectionUpdate', onSelectionUpdate);\r\n            }\r\n            const onTransaction = getExtensionField(extension, 'onTransaction', context);\r\n            if (onTransaction) {\r\n                this.editor.on('transaction', onTransaction);\r\n            }\r\n            const onFocus = getExtensionField(extension, 'onFocus', context);\r\n            if (onFocus) {\r\n                this.editor.on('focus', onFocus);\r\n            }\r\n            const onBlur = getExtensionField(extension, 'onBlur', context);\r\n            if (onBlur) {\r\n                this.editor.on('blur', onBlur);\r\n            }\r\n            const onDestroy = getExtensionField(extension, 'onDestroy', context);\r\n            if (onDestroy) {\r\n                this.editor.on('destroy', onDestroy);\r\n            }\r\n        });\r\n    }\r\n    static resolve(extensions) {\r\n        const resolvedExtensions = ExtensionManager.sort(ExtensionManager.flatten(extensions));\r\n        const duplicatedNames = findDuplicates(resolvedExtensions.map(extension => extension.name));\r\n        if (duplicatedNames.length) {\r\n            console.warn(`[tiptap warn]: Duplicate extension names found: [${duplicatedNames.map(item => `'${item}'`).join(', ')}]. This can lead to issues.`);\r\n        }\r\n        return resolvedExtensions;\r\n    }\r\n    static flatten(extensions) {\r\n        return extensions\r\n            .map(extension => {\r\n            const context = {\r\n                name: extension.name,\r\n                options: extension.options,\r\n                storage: extension.storage,\r\n            };\r\n            const addExtensions = getExtensionField(extension, 'addExtensions', context);\r\n            if (addExtensions) {\r\n                return [\r\n                    extension,\r\n                    ...this.flatten(addExtensions()),\r\n                ];\r\n            }\r\n            return extension;\r\n        })\r\n            // `Infinity` will break TypeScript so we set a number that is probably high enough\r\n            .flat(10);\r\n    }\r\n    static sort(extensions) {\r\n        const defaultPriority = 100;\r\n        return extensions.sort((a, b) => {\r\n            const priorityA = getExtensionField(a, 'priority') || defaultPriority;\r\n            const priorityB = getExtensionField(b, 'priority') || defaultPriority;\r\n            if (priorityA > priorityB) {\r\n                return -1;\r\n            }\r\n            if (priorityA < priorityB) {\r\n                return 1;\r\n            }\r\n            return 0;\r\n        });\r\n    }\r\n    get commands() {\r\n        return this.extensions.reduce((commands, extension) => {\r\n            const context = {\r\n                name: extension.name,\r\n                options: extension.options,\r\n                storage: extension.storage,\r\n                editor: this.editor,\r\n                type: getSchemaTypeByName(extension.name, this.schema),\r\n            };\r\n            const addCommands = getExtensionField(extension, 'addCommands', context);\r\n            if (!addCommands) {\r\n                return commands;\r\n            }\r\n            return {\r\n                ...commands,\r\n                ...addCommands(),\r\n            };\r\n        }, {});\r\n    }\r\n    get plugins() {\r\n        const { editor } = this;\r\n        // With ProseMirror, first plugins within an array are executed first.\r\n        // In tiptap, we provide the ability to override plugins,\r\n        // so it feels more natural to run plugins at the end of an array first.\r\n        // Thats why we have to reverse the `extensions` array and sort again\r\n        // based on the `priority` option.\r\n        const extensions = ExtensionManager.sort([...this.extensions].reverse());\r\n        const inputRules = [];\r\n        const pasteRules = [];\r\n        const allPlugins = extensions\r\n            .map(extension => {\r\n            const context = {\r\n                name: extension.name,\r\n                options: extension.options,\r\n                storage: extension.storage,\r\n                editor,\r\n                type: getSchemaTypeByName(extension.name, this.schema),\r\n            };\r\n            const plugins = [];\r\n            const addKeyboardShortcuts = getExtensionField(extension, 'addKeyboardShortcuts', context);\r\n            if (addKeyboardShortcuts) {\r\n                const bindings = Object.fromEntries(Object\r\n                    .entries(addKeyboardShortcuts())\r\n                    .map(([shortcut, method]) => {\r\n                    return [shortcut, () => method({ editor })];\r\n                }));\r\n                const keyMapPlugin = keymap(bindings);\r\n                plugins.push(keyMapPlugin);\r\n            }\r\n            const addInputRules = getExtensionField(extension, 'addInputRules', context);\r\n            if (isExtensionRulesEnabled(extension, editor.options.enableInputRules) && addInputRules) {\r\n                inputRules.push(...addInputRules());\r\n            }\r\n            const addPasteRules = getExtensionField(extension, 'addPasteRules', context);\r\n            if (isExtensionRulesEnabled(extension, editor.options.enablePasteRules) && addPasteRules) {\r\n                pasteRules.push(...addPasteRules());\r\n            }\r\n            const addProseMirrorPlugins = getExtensionField(extension, 'addProseMirrorPlugins', context);\r\n            if (addProseMirrorPlugins) {\r\n                const proseMirrorPlugins = addProseMirrorPlugins();\r\n                plugins.push(...proseMirrorPlugins);\r\n            }\r\n            return plugins;\r\n        })\r\n            .flat();\r\n        return [\r\n            inputRulesPlugin({\r\n                editor,\r\n                rules: inputRules,\r\n            }),\r\n            ...pasteRulesPlugin({\r\n                editor,\r\n                rules: pasteRules,\r\n            }),\r\n            ...allPlugins,\r\n        ];\r\n    }\r\n    get attributes() {\r\n        return getAttributesFromExtensions(this.extensions);\r\n    }\r\n    get nodeViews() {\r\n        const { editor } = this;\r\n        const { nodeExtensions } = splitExtensions(this.extensions);\r\n        return Object.fromEntries(nodeExtensions\r\n            .filter(extension => !!getExtensionField(extension, 'addNodeView'))\r\n            .map(extension => {\r\n            const extensionAttributes = this.attributes.filter(attribute => attribute.type === extension.name);\r\n            const context = {\r\n                name: extension.name,\r\n                options: extension.options,\r\n                storage: extension.storage,\r\n                editor,\r\n                type: getNodeType(extension.name, this.schema),\r\n            };\r\n            const addNodeView = getExtensionField(extension, 'addNodeView', context);\r\n            if (!addNodeView) {\r\n                return [];\r\n            }\r\n            const nodeview = (node, view, getPos, decorations) => {\r\n                const HTMLAttributes = getRenderedAttributes(node, extensionAttributes);\r\n                return addNodeView()({\r\n                    editor,\r\n                    node,\r\n                    getPos,\r\n                    decorations,\r\n                    HTMLAttributes,\r\n                    extension,\r\n                });\r\n            };\r\n            return [extension.name, nodeview];\r\n        }));\r\n    }\r\n}\n\n// see: https://github.com/mesqueeb/is-what/blob/88d6e4ca92fb2baab6003c54e02eedf4e729e5ab/src/index.ts\r\nfunction getType(value) {\r\n    return Object.prototype.toString.call(value).slice(8, -1);\r\n}\r\nfunction isPlainObject(value) {\r\n    if (getType(value) !== 'Object') {\r\n        return false;\r\n    }\r\n    return value.constructor === Object && Object.getPrototypeOf(value) === Object.prototype;\r\n}\n\nfunction mergeDeep(target, source) {\r\n    const output = { ...target };\r\n    if (isPlainObject(target) && isPlainObject(source)) {\r\n        Object.keys(source).forEach(key => {\r\n            if (isPlainObject(source[key])) {\r\n                if (!(key in target)) {\r\n                    Object.assign(output, { [key]: source[key] });\r\n                }\r\n                else {\r\n                    output[key] = mergeDeep(target[key], source[key]);\r\n                }\r\n            }\r\n            else {\r\n                Object.assign(output, { [key]: source[key] });\r\n            }\r\n        });\r\n    }\r\n    return output;\r\n}\n\nclass Extension {\r\n    constructor(config = {}) {\r\n        this.type = 'extension';\r\n        this.name = 'extension';\r\n        this.parent = null;\r\n        this.child = null;\r\n        this.config = {\r\n            name: this.name,\r\n            defaultOptions: {},\r\n        };\r\n        this.config = {\r\n            ...this.config,\r\n            ...config,\r\n        };\r\n        this.name = this.config.name;\r\n        if (config.defaultOptions) {\r\n            console.warn(`[tiptap warn]: BREAKING CHANGE: \"defaultOptions\" is deprecated. Please use \"addOptions\" instead. Found in extension: \"${this.name}\".`);\r\n        }\r\n        // TODO: remove `addOptions` fallback\r\n        this.options = this.config.defaultOptions;\r\n        if (this.config.addOptions) {\r\n            this.options = callOrReturn(getExtensionField(this, 'addOptions', {\r\n                name: this.name,\r\n            }));\r\n        }\r\n        this.storage = callOrReturn(getExtensionField(this, 'addStorage', {\r\n            name: this.name,\r\n            options: this.options,\r\n        })) || {};\r\n    }\r\n    static create(config = {}) {\r\n        return new Extension(config);\r\n    }\r\n    configure(options = {}) {\r\n        // return a new instance so we can use the same extension\r\n        // with different calls of `configure`\r\n        const extension = this.extend();\r\n        extension.options = mergeDeep(this.options, options);\r\n        extension.storage = callOrReturn(getExtensionField(extension, 'addStorage', {\r\n            name: extension.name,\r\n            options: extension.options,\r\n        }));\r\n        return extension;\r\n    }\r\n    extend(extendedConfig = {}) {\r\n        const extension = new Extension(extendedConfig);\r\n        extension.parent = this;\r\n        this.child = extension;\r\n        extension.name = extendedConfig.name\r\n            ? extendedConfig.name\r\n            : extension.parent.name;\r\n        if (extendedConfig.defaultOptions) {\r\n            console.warn(`[tiptap warn]: BREAKING CHANGE: \"defaultOptions\" is deprecated. Please use \"addOptions\" instead. Found in extension: \"${extension.name}\".`);\r\n        }\r\n        extension.options = callOrReturn(getExtensionField(extension, 'addOptions', {\r\n            name: extension.name,\r\n        }));\r\n        extension.storage = callOrReturn(getExtensionField(extension, 'addStorage', {\r\n            name: extension.name,\r\n            options: extension.options,\r\n        }));\r\n        return extension;\r\n    }\r\n}\n\nfunction getTextBetween(startNode, range, options) {\r\n    const { from, to } = range;\r\n    const { blockSeparator = '\\n\\n', textSerializers = {}, } = options || {};\r\n    let text = '';\r\n    let separated = true;\r\n    startNode.nodesBetween(from, to, (node, pos, parent, index) => {\r\n        var _a;\r\n        const textSerializer = textSerializers === null || textSerializers === void 0 ? void 0 : textSerializers[node.type.name];\r\n        if (textSerializer) {\r\n            if (node.isBlock && !separated) {\r\n                text += blockSeparator;\r\n                separated = true;\r\n            }\r\n            if (parent) {\r\n                text += textSerializer({\r\n                    node,\r\n                    pos,\r\n                    parent,\r\n                    index,\r\n                    range,\r\n                });\r\n            }\r\n        }\r\n        else if (node.isText) {\r\n            text += (_a = node === null || node === void 0 ? void 0 : node.text) === null || _a === void 0 ? void 0 : _a.slice(Math.max(from, pos) - pos, to - pos); // eslint-disable-line\r\n            separated = false;\r\n        }\r\n        else if (node.isBlock && !separated) {\r\n            text += blockSeparator;\r\n            separated = true;\r\n        }\r\n    });\r\n    return text;\r\n}\n\nfunction getTextSerializersFromSchema(schema) {\r\n    return Object.fromEntries(Object\r\n        .entries(schema.nodes)\r\n        .filter(([, node]) => node.spec.toText)\r\n        .map(([name, node]) => [name, node.spec.toText]));\r\n}\n\nconst ClipboardTextSerializer = Extension.create({\r\n    name: 'clipboardTextSerializer',\r\n    addProseMirrorPlugins() {\r\n        return [\r\n            new Plugin({\r\n                key: new PluginKey('clipboardTextSerializer'),\r\n                props: {\r\n                    clipboardTextSerializer: () => {\r\n                        const { editor } = this;\r\n                        const { state, schema } = editor;\r\n                        const { doc, selection } = state;\r\n                        const { ranges } = selection;\r\n                        const from = Math.min(...ranges.map(range => range.$from.pos));\r\n                        const to = Math.max(...ranges.map(range => range.$to.pos));\r\n                        const textSerializers = getTextSerializersFromSchema(schema);\r\n                        const range = { from, to };\r\n                        return getTextBetween(doc, range, {\r\n                            textSerializers,\r\n                        });\r\n                    },\r\n                },\r\n            }),\r\n        ];\r\n    },\r\n});\n\nconst blur = () => ({ editor, view }) => {\r\n    requestAnimationFrame(() => {\r\n        var _a;\r\n        if (!editor.isDestroyed) {\r\n            view.dom.blur();\r\n            // Browsers should remove the caret on blur but safari does not.\r\n            // See: https://github.com/ueberdosis/tiptap/issues/2405\r\n            (_a = window === null || window === void 0 ? void 0 : window.getSelection()) === null || _a === void 0 ? void 0 : _a.removeAllRanges();\r\n        }\r\n    });\r\n    return true;\r\n};\n\nconst clearContent = (emitUpdate = false) => ({ commands }) => {\r\n    return commands.setContent('', emitUpdate);\r\n};\n\nconst clearNodes = () => ({ state, tr, dispatch }) => {\r\n    const { selection } = tr;\r\n    const { ranges } = selection;\r\n    if (!dispatch) {\r\n        return true;\r\n    }\r\n    ranges.forEach(({ $from, $to }) => {\r\n        state.doc.nodesBetween($from.pos, $to.pos, (node, pos) => {\r\n            if (node.type.isText) {\r\n                return;\r\n            }\r\n            const { doc, mapping } = tr;\r\n            const $mappedFrom = doc.resolve(mapping.map(pos));\r\n            const $mappedTo = doc.resolve(mapping.map(pos + node.nodeSize));\r\n            const nodeRange = $mappedFrom.blockRange($mappedTo);\r\n            if (!nodeRange) {\r\n                return;\r\n            }\r\n            const targetLiftDepth = liftTarget(nodeRange);\r\n            if (node.type.isTextblock) {\r\n                const { defaultType } = $mappedFrom.parent.contentMatchAt($mappedFrom.index());\r\n                tr.setNodeMarkup(nodeRange.start, defaultType);\r\n            }\r\n            if (targetLiftDepth || targetLiftDepth === 0) {\r\n                tr.lift(nodeRange, targetLiftDepth);\r\n            }\r\n        });\r\n    });\r\n    return true;\r\n};\n\nconst command = fn => props => {\r\n    return fn(props);\r\n};\n\nconst createParagraphNear = () => ({ state, dispatch }) => {\r\n    return createParagraphNear$1(state, dispatch);\r\n};\n\nconst deleteNode = typeOrName => ({ tr, state, dispatch }) => {\r\n    const type = getNodeType(typeOrName, state.schema);\r\n    const $pos = tr.selection.$anchor;\r\n    for (let depth = $pos.depth; depth > 0; depth -= 1) {\r\n        const node = $pos.node(depth);\r\n        if (node.type === type) {\r\n            if (dispatch) {\r\n                const from = $pos.before(depth);\r\n                const to = $pos.after(depth);\r\n                tr.delete(from, to).scrollIntoView();\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n};\n\nconst deleteRange = range => ({ tr, dispatch }) => {\r\n    const { from, to } = range;\r\n    if (dispatch) {\r\n        tr.delete(from, to);\r\n    }\r\n    return true;\r\n};\n\nconst deleteSelection = () => ({ state, dispatch }) => {\r\n    return deleteSelection$1(state, dispatch);\r\n};\n\nconst enter = () => ({ commands }) => {\r\n    return commands.keyboardShortcut('Enter');\r\n};\n\nconst exitCode = () => ({ state, dispatch }) => {\r\n    return exitCode$1(state, dispatch);\r\n};\n\n/**\r\n * Check if object1 includes object2\r\n * @param object1 Object\r\n * @param object2 Object\r\n */\r\nfunction objectIncludes(object1, object2, options = { strict: true }) {\r\n    const keys = Object.keys(object2);\r\n    if (!keys.length) {\r\n        return true;\r\n    }\r\n    return keys.every(key => {\r\n        if (options.strict) {\r\n            return object2[key] === object1[key];\r\n        }\r\n        if (isRegExp(object2[key])) {\r\n            return object2[key].test(object1[key]);\r\n        }\r\n        return object2[key] === object1[key];\r\n    });\r\n}\n\nfunction findMarkInSet(marks, type, attributes = {}) {\r\n    return marks.find(item => {\r\n        return item.type === type && objectIncludes(item.attrs, attributes);\r\n    });\r\n}\r\nfunction isMarkInSet(marks, type, attributes = {}) {\r\n    return !!findMarkInSet(marks, type, attributes);\r\n}\r\nfunction getMarkRange($pos, type, attributes = {}) {\r\n    if (!$pos || !type) {\r\n        return;\r\n    }\r\n    let start = $pos.parent.childAfter($pos.parentOffset);\r\n    if ($pos.parentOffset === start.offset && start.offset !== 0) {\r\n        start = $pos.parent.childBefore($pos.parentOffset);\r\n    }\r\n    if (!start.node) {\r\n        return;\r\n    }\r\n    const mark = findMarkInSet([...start.node.marks], type, attributes);\r\n    if (!mark) {\r\n        return;\r\n    }\r\n    let startIndex = start.index;\r\n    let startPos = $pos.start() + start.offset;\r\n    let endIndex = startIndex + 1;\r\n    let endPos = startPos + start.node.nodeSize;\r\n    findMarkInSet([...start.node.marks], type, attributes);\r\n    while (startIndex > 0 && mark.isInSet($pos.parent.child(startIndex - 1).marks)) {\r\n        startIndex -= 1;\r\n        startPos -= $pos.parent.child(startIndex).nodeSize;\r\n    }\r\n    while (endIndex < $pos.parent.childCount\r\n        && isMarkInSet([...$pos.parent.child(endIndex).marks], type, attributes)) {\r\n        endPos += $pos.parent.child(endIndex).nodeSize;\r\n        endIndex += 1;\r\n    }\r\n    return {\r\n        from: startPos,\r\n        to: endPos,\r\n    };\r\n}\n\nfunction getMarkType(nameOrType, schema) {\r\n    if (typeof nameOrType === 'string') {\r\n        if (!schema.marks[nameOrType]) {\r\n            throw Error(`There is no mark type named '${nameOrType}'. Maybe you forgot to add the extension?`);\r\n        }\r\n        return schema.marks[nameOrType];\r\n    }\r\n    return nameOrType;\r\n}\n\nconst extendMarkRange = (typeOrName, attributes = {}) => ({ tr, state, dispatch }) => {\r\n    const type = getMarkType(typeOrName, state.schema);\r\n    const { doc, selection } = tr;\r\n    const { $from, from, to } = selection;\r\n    if (dispatch) {\r\n        const range = getMarkRange($from, type, attributes);\r\n        if (range && range.from <= from && range.to >= to) {\r\n            const newSelection = TextSelection.create(doc, range.from, range.to);\r\n            tr.setSelection(newSelection);\r\n        }\r\n    }\r\n    return true;\r\n};\n\nconst first = commands => props => {\r\n    const items = typeof commands === 'function'\r\n        ? commands(props)\r\n        : commands;\r\n    for (let i = 0; i < items.length; i += 1) {\r\n        if (items[i](props)) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n};\n\nfunction isClass(value) {\r\n    var _a;\r\n    if (((_a = value.constructor) === null || _a === void 0 ? void 0 : _a.toString().substring(0, 5)) !== 'class') {\r\n        return false;\r\n    }\r\n    return true;\r\n}\n\nfunction isObject(value) {\r\n    return (value\r\n        && typeof value === 'object'\r\n        && !Array.isArray(value)\r\n        && !isClass(value));\r\n}\n\nfunction isTextSelection(value) {\r\n    return isObject(value) && value instanceof TextSelection;\r\n}\n\nfunction minMax(value = 0, min = 0, max = 0) {\r\n    return Math.min(Math.max(value, min), max);\r\n}\n\nfunction resolveFocusPosition(doc, position = null) {\r\n    if (!position) {\r\n        return null;\r\n    }\r\n    const selectionAtStart = Selection.atStart(doc);\r\n    const selectionAtEnd = Selection.atEnd(doc);\r\n    if (position === 'start' || position === true) {\r\n        return selectionAtStart;\r\n    }\r\n    if (position === 'end') {\r\n        return selectionAtEnd;\r\n    }\r\n    const minPos = selectionAtStart.from;\r\n    const maxPos = selectionAtEnd.to;\r\n    if (position === 'all') {\r\n        return TextSelection.create(doc, minMax(0, minPos, maxPos), minMax(doc.content.size, minPos, maxPos));\r\n    }\r\n    return TextSelection.create(doc, minMax(position, minPos, maxPos), minMax(position, minPos, maxPos));\r\n}\n\nfunction isiOS() {\r\n    return [\r\n        'iPad Simulator',\r\n        'iPhone Simulator',\r\n        'iPod Simulator',\r\n        'iPad',\r\n        'iPhone',\r\n        'iPod',\r\n    ].includes(navigator.platform)\r\n        // iPad on iOS 13 detection\r\n        || (navigator.userAgent.includes('Mac') && 'ontouchend' in document);\r\n}\n\nconst focus = (position = null, options = {}) => ({ editor, view, tr, dispatch, }) => {\r\n    options = {\r\n        scrollIntoView: true,\r\n        ...options,\r\n    };\r\n    const delayedFocus = () => {\r\n        // focus within `requestAnimationFrame` breaks focus on iOS\r\n        // so we have to call this\r\n        if (isiOS()) {\r\n            view.dom.focus();\r\n        }\r\n        // For React we have to focus asynchronously. Otherwise wild things happen.\r\n        // see: https://github.com/ueberdosis/tiptap/issues/1520\r\n        requestAnimationFrame(() => {\r\n            if (!editor.isDestroyed) {\r\n                view.focus();\r\n                if (options === null || options === void 0 ? void 0 : options.scrollIntoView) {\r\n                    editor.commands.scrollIntoView();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    if ((view.hasFocus() && position === null) || position === false) {\r\n        return true;\r\n    }\r\n    // we dont try to resolve a NodeSelection or CellSelection\r\n    if (dispatch && position === null && !isTextSelection(editor.state.selection)) {\r\n        delayedFocus();\r\n        return true;\r\n    }\r\n    // pass through tr.doc instead of editor.state.doc\r\n    // since transactions could change the editors state before this command has been run\r\n    const selection = resolveFocusPosition(tr.doc, position) || editor.state.selection;\r\n    const isSameSelection = editor.state.selection.eq(selection);\r\n    if (dispatch) {\r\n        if (!isSameSelection) {\r\n            tr.setSelection(selection);\r\n        }\r\n        // `tr.setSelection` resets the stored marks\r\n        // so well restore them if the selection is the same as before\r\n        if (isSameSelection && tr.storedMarks) {\r\n            tr.setStoredMarks(tr.storedMarks);\r\n        }\r\n        delayedFocus();\r\n    }\r\n    return true;\r\n};\n\nconst forEach = (items, fn) => props => {\r\n    return items.every((item, index) => fn(item, { ...props, index }));\r\n};\n\nconst insertContent = (value, options) => ({ tr, commands }) => {\r\n    return commands.insertContentAt({ from: tr.selection.from, to: tr.selection.to }, value, options);\r\n};\n\nfunction elementFromString(value) {\r\n    // add a wrapper to preserve leading and trailing whitespace\r\n    const wrappedValue = `<body>${value}</body>`;\r\n    return new window.DOMParser().parseFromString(wrappedValue, 'text/html').body;\r\n}\n\nfunction createNodeFromContent(content, schema, options) {\r\n    options = {\r\n        slice: true,\r\n        parseOptions: {},\r\n        ...options,\r\n    };\r\n    if (typeof content === 'object' && content !== null) {\r\n        try {\r\n            if (Array.isArray(content)) {\r\n                return Fragment.fromArray(content.map(item => schema.nodeFromJSON(item)));\r\n            }\r\n            return schema.nodeFromJSON(content);\r\n        }\r\n        catch (error) {\r\n            console.warn('[tiptap warn]: Invalid content.', 'Passed value:', content, 'Error:', error);\r\n            return createNodeFromContent('', schema, options);\r\n        }\r\n    }\r\n    if (typeof content === 'string') {\r\n        const parser = DOMParser.fromSchema(schema);\r\n        return options.slice\r\n            ? parser.parseSlice(elementFromString(content), options.parseOptions).content\r\n            : parser.parse(elementFromString(content), options.parseOptions);\r\n    }\r\n    return createNodeFromContent('', schema, options);\r\n}\n\n// source: https://github.com/ProseMirror/prosemirror-state/blob/master/src/selection.js#L466\r\nfunction selectionToInsertionEnd(tr, startLen, bias) {\r\n    const last = tr.steps.length - 1;\r\n    if (last < startLen) {\r\n        return;\r\n    }\r\n    const step = tr.steps[last];\r\n    if (!(step instanceof ReplaceStep || step instanceof ReplaceAroundStep)) {\r\n        return;\r\n    }\r\n    const map = tr.mapping.maps[last];\r\n    let end = 0;\r\n    map.forEach((_from, _to, _newFrom, newTo) => {\r\n        if (end === 0) {\r\n            end = newTo;\r\n        }\r\n    });\r\n    tr.setSelection(Selection.near(tr.doc.resolve(end), bias));\r\n}\n\nconst isFragment = (nodeOrFragment) => {\r\n    return nodeOrFragment.toString().startsWith('<');\r\n};\r\nconst insertContentAt = (position, value, options) => ({ tr, dispatch, editor }) => {\r\n    if (dispatch) {\r\n        options = {\r\n            parseOptions: {},\r\n            updateSelection: true,\r\n            ...options,\r\n        };\r\n        const content = createNodeFromContent(value, editor.schema, {\r\n            parseOptions: {\r\n                preserveWhitespace: 'full',\r\n                ...options.parseOptions,\r\n            },\r\n        });\r\n        // dont dispatch an empty fragment because this can lead to strange errors\r\n        if (content.toString() === '<>') {\r\n            return true;\r\n        }\r\n        let { from, to } = typeof position === 'number'\r\n            ? { from: position, to: position }\r\n            : position;\r\n        let isOnlyTextContent = true;\r\n        let isOnlyBlockContent = true;\r\n        const nodes = isFragment(content)\r\n            ? content\r\n            : [content];\r\n        nodes.forEach(node => {\r\n            // check if added node is valid\r\n            node.check();\r\n            isOnlyTextContent = isOnlyTextContent\r\n                ? node.isText && node.marks.length === 0\r\n                : false;\r\n            isOnlyBlockContent = isOnlyBlockContent\r\n                ? node.isBlock\r\n                : false;\r\n        });\r\n        // check if we can replace the wrapping node by\r\n        // the newly inserted content\r\n        // example:\r\n        // replace an empty paragraph by an inserted image\r\n        // instead of inserting the image below the paragraph\r\n        if (from === to && isOnlyBlockContent) {\r\n            const { parent } = tr.doc.resolve(from);\r\n            const isEmptyTextBlock = parent.isTextblock\r\n                && !parent.type.spec.code\r\n                && !parent.childCount;\r\n            if (isEmptyTextBlock) {\r\n                from -= 1;\r\n                to += 1;\r\n            }\r\n        }\r\n        // if there is only plain text we have to use `insertText`\r\n        // because this will keep the current marks\r\n        if (isOnlyTextContent) {\r\n            tr.insertText(value, from, to);\r\n        }\r\n        else {\r\n            tr.replaceWith(from, to, content);\r\n        }\r\n        // set cursor at end of inserted content\r\n        if (options.updateSelection) {\r\n            selectionToInsertionEnd(tr, tr.steps.length - 1, -1);\r\n        }\r\n    }\r\n    return true;\r\n};\n\nconst joinBackward = () => ({ state, dispatch }) => {\r\n    return joinBackward$1(state, dispatch);\r\n};\n\nconst joinForward = () => ({ state, dispatch }) => {\r\n    return joinForward$1(state, dispatch);\r\n};\n\nfunction isMacOS() {\r\n    return typeof navigator !== 'undefined'\r\n        ? /Mac/.test(navigator.platform)\r\n        : false;\r\n}\n\nfunction normalizeKeyName(name) {\r\n    const parts = name.split(/-(?!$)/);\r\n    let result = parts[parts.length - 1];\r\n    if (result === 'Space') {\r\n        result = ' ';\r\n    }\r\n    let alt;\r\n    let ctrl;\r\n    let shift;\r\n    let meta;\r\n    for (let i = 0; i < parts.length - 1; i += 1) {\r\n        const mod = parts[i];\r\n        if (/^(cmd|meta|m)$/i.test(mod)) {\r\n            meta = true;\r\n        }\r\n        else if (/^a(lt)?$/i.test(mod)) {\r\n            alt = true;\r\n        }\r\n        else if (/^(c|ctrl|control)$/i.test(mod)) {\r\n            ctrl = true;\r\n        }\r\n        else if (/^s(hift)?$/i.test(mod)) {\r\n            shift = true;\r\n        }\r\n        else if (/^mod$/i.test(mod)) {\r\n            if (isiOS() || isMacOS()) {\r\n                meta = true;\r\n            }\r\n            else {\r\n                ctrl = true;\r\n            }\r\n        }\r\n        else {\r\n            throw new Error(`Unrecognized modifier name: ${mod}`);\r\n        }\r\n    }\r\n    if (alt) {\r\n        result = `Alt-${result}`;\r\n    }\r\n    if (ctrl) {\r\n        result = `Ctrl-${result}`;\r\n    }\r\n    if (meta) {\r\n        result = `Meta-${result}`;\r\n    }\r\n    if (shift) {\r\n        result = `Shift-${result}`;\r\n    }\r\n    return result;\r\n}\r\nconst keyboardShortcut = name => ({ editor, view, tr, dispatch, }) => {\r\n    const keys = normalizeKeyName(name).split(/-(?!$)/);\r\n    const key = keys.find(item => !['Alt', 'Ctrl', 'Meta', 'Shift'].includes(item));\r\n    const event = new KeyboardEvent('keydown', {\r\n        key: key === 'Space'\r\n            ? ' '\r\n            : key,\r\n        altKey: keys.includes('Alt'),\r\n        ctrlKey: keys.includes('Ctrl'),\r\n        metaKey: keys.includes('Meta'),\r\n        shiftKey: keys.includes('Shift'),\r\n        bubbles: true,\r\n        cancelable: true,\r\n    });\r\n    const capturedTransaction = editor.captureTransaction(() => {\r\n        view.someProp('handleKeyDown', f => f(view, event));\r\n    });\r\n    capturedTransaction === null || capturedTransaction === void 0 ? void 0 : capturedTransaction.steps.forEach(step => {\r\n        const newStep = step.map(tr.mapping);\r\n        if (newStep && dispatch) {\r\n            tr.maybeStep(newStep);\r\n        }\r\n    });\r\n    return true;\r\n};\n\nfunction isNodeActive(state, typeOrName, attributes = {}) {\r\n    const { from, to, empty } = state.selection;\r\n    const type = typeOrName\r\n        ? getNodeType(typeOrName, state.schema)\r\n        : null;\r\n    const nodeRanges = [];\r\n    state.doc.nodesBetween(from, to, (node, pos) => {\r\n        if (node.isText) {\r\n            return;\r\n        }\r\n        const relativeFrom = Math.max(from, pos);\r\n        const relativeTo = Math.min(to, pos + node.nodeSize);\r\n        nodeRanges.push({\r\n            node,\r\n            from: relativeFrom,\r\n            to: relativeTo,\r\n        });\r\n    });\r\n    const selectionRange = to - from;\r\n    const matchedNodeRanges = nodeRanges\r\n        .filter(nodeRange => {\r\n        if (!type) {\r\n            return true;\r\n        }\r\n        return type.name === nodeRange.node.type.name;\r\n    })\r\n        .filter(nodeRange => objectIncludes(nodeRange.node.attrs, attributes, { strict: false }));\r\n    if (empty) {\r\n        return !!matchedNodeRanges.length;\r\n    }\r\n    const range = matchedNodeRanges\r\n        .reduce((sum, nodeRange) => sum + nodeRange.to - nodeRange.from, 0);\r\n    return range >= selectionRange;\r\n}\n\nconst lift = (typeOrName, attributes = {}) => ({ state, dispatch }) => {\r\n    const type = getNodeType(typeOrName, state.schema);\r\n    const isActive = isNodeActive(state, type, attributes);\r\n    if (!isActive) {\r\n        return false;\r\n    }\r\n    return lift$1(state, dispatch);\r\n};\n\nconst liftEmptyBlock = () => ({ state, dispatch }) => {\r\n    return liftEmptyBlock$1(state, dispatch);\r\n};\n\nconst liftListItem = typeOrName => ({ state, dispatch }) => {\r\n    const type = getNodeType(typeOrName, state.schema);\r\n    return liftListItem$1(type)(state, dispatch);\r\n};\n\nconst newlineInCode = () => ({ state, dispatch }) => {\r\n    return newlineInCode$1(state, dispatch);\r\n};\n\nfunction getSchemaTypeNameByName(name, schema) {\r\n    if (schema.nodes[name]) {\r\n        return 'node';\r\n    }\r\n    if (schema.marks[name]) {\r\n        return 'mark';\r\n    }\r\n    return null;\r\n}\n\n/**\r\n * Remove a property or an array of properties from an object\r\n * @param obj Object\r\n * @param key Key to remove\r\n */\r\nfunction deleteProps(obj, propOrProps) {\r\n    const props = typeof propOrProps === 'string'\r\n        ? [propOrProps]\r\n        : propOrProps;\r\n    return Object\r\n        .keys(obj)\r\n        .reduce((newObj, prop) => {\r\n        if (!props.includes(prop)) {\r\n            newObj[prop] = obj[prop];\r\n        }\r\n        return newObj;\r\n    }, {});\r\n}\n\nconst resetAttributes = (typeOrName, attributes) => ({ tr, state, dispatch }) => {\r\n    let nodeType = null;\r\n    let markType = null;\r\n    const schemaType = getSchemaTypeNameByName(typeof typeOrName === 'string'\r\n        ? typeOrName\r\n        : typeOrName.name, state.schema);\r\n    if (!schemaType) {\r\n        return false;\r\n    }\r\n    if (schemaType === 'node') {\r\n        nodeType = getNodeType(typeOrName, state.schema);\r\n    }\r\n    if (schemaType === 'mark') {\r\n        markType = getMarkType(typeOrName, state.schema);\r\n    }\r\n    if (dispatch) {\r\n        tr.selection.ranges.forEach(range => {\r\n            state.doc.nodesBetween(range.$from.pos, range.$to.pos, (node, pos) => {\r\n                if (nodeType && nodeType === node.type) {\r\n                    tr.setNodeMarkup(pos, undefined, deleteProps(node.attrs, attributes));\r\n                }\r\n                if (markType && node.marks.length) {\r\n                    node.marks.forEach(mark => {\r\n                        if (markType === mark.type) {\r\n                            tr.addMark(pos, pos + node.nodeSize, markType.create(deleteProps(mark.attrs, attributes)));\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n    return true;\r\n};\n\nconst scrollIntoView = () => ({ tr, dispatch }) => {\r\n    if (dispatch) {\r\n        tr.scrollIntoView();\r\n    }\r\n    return true;\r\n};\n\nconst selectAll = () => ({ tr, commands }) => {\r\n    return commands.setTextSelection({\r\n        from: 0,\r\n        to: tr.doc.content.size,\r\n    });\r\n};\n\nconst selectNodeBackward = () => ({ state, dispatch }) => {\r\n    return selectNodeBackward$1(state, dispatch);\r\n};\n\nconst selectNodeForward = () => ({ state, dispatch }) => {\r\n    return selectNodeForward$1(state, dispatch);\r\n};\n\nconst selectParentNode = () => ({ state, dispatch }) => {\r\n    return selectParentNode$1(state, dispatch);\r\n};\n\n// @ts-ignore\r\nconst selectTextblockEnd = () => ({ state, dispatch }) => {\r\n    return selectTextblockEnd$1(state, dispatch);\r\n};\n\n// @ts-ignore\r\nconst selectTextblockStart = () => ({ state, dispatch }) => {\r\n    return selectTextblockStart$1(state, dispatch);\r\n};\n\nfunction createDocument(content, schema, parseOptions = {}) {\r\n    return createNodeFromContent(content, schema, { slice: false, parseOptions });\r\n}\n\nconst setContent = (content, emitUpdate = false, parseOptions = {}) => ({ tr, editor, dispatch }) => {\r\n    const { doc } = tr;\r\n    const document = createDocument(content, editor.schema, parseOptions);\r\n    if (dispatch) {\r\n        tr.replaceWith(0, doc.content.size, document)\r\n            .setMeta('preventUpdate', !emitUpdate);\r\n    }\r\n    return true;\r\n};\n\nfunction getMarkAttributes(state, typeOrName) {\r\n    const type = getMarkType(typeOrName, state.schema);\r\n    const { from, to, empty } = state.selection;\r\n    const marks = [];\r\n    if (empty) {\r\n        if (state.storedMarks) {\r\n            marks.push(...state.storedMarks);\r\n        }\r\n        marks.push(...state.selection.$head.marks());\r\n    }\r\n    else {\r\n        state.doc.nodesBetween(from, to, node => {\r\n            marks.push(...node.marks);\r\n        });\r\n    }\r\n    const mark = marks.find(markItem => markItem.type.name === type.name);\r\n    if (!mark) {\r\n        return {};\r\n    }\r\n    return { ...mark.attrs };\r\n}\n\nconst setMark = (typeOrName, attributes = {}) => ({ tr, state, dispatch }) => {\r\n    const { selection } = tr;\r\n    const { empty, ranges } = selection;\r\n    const type = getMarkType(typeOrName, state.schema);\r\n    if (dispatch) {\r\n        if (empty) {\r\n            const oldAttributes = getMarkAttributes(state, type);\r\n            tr.addStoredMark(type.create({\r\n                ...oldAttributes,\r\n                ...attributes,\r\n            }));\r\n        }\r\n        else {\r\n            ranges.forEach(range => {\r\n                const from = range.$from.pos;\r\n                const to = range.$to.pos;\r\n                state.doc.nodesBetween(from, to, (node, pos) => {\r\n                    const trimmedFrom = Math.max(pos, from);\r\n                    const trimmedTo = Math.min(pos + node.nodeSize, to);\r\n                    const someHasMark = node.marks.find(mark => mark.type === type);\r\n                    // if there is already a mark of this type\r\n                    // we know that we have to merge its attributes\r\n                    // otherwise we add a fresh new mark\r\n                    if (someHasMark) {\r\n                        node.marks.forEach(mark => {\r\n                            if (type === mark.type) {\r\n                                tr.addMark(trimmedFrom, trimmedTo, type.create({\r\n                                    ...mark.attrs,\r\n                                    ...attributes,\r\n                                }));\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        tr.addMark(trimmedFrom, trimmedTo, type.create(attributes));\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n    return true;\r\n};\n\nconst setMeta = (key, value) => ({ tr }) => {\r\n    tr.setMeta(key, value);\r\n    return true;\r\n};\n\nconst setNode = (typeOrName, attributes = {}) => ({ state, dispatch, chain }) => {\r\n    const type = getNodeType(typeOrName, state.schema);\r\n    // TODO: use a fallback like insertContent?\r\n    if (!type.isTextblock) {\r\n        console.warn('[tiptap warn]: Currently \"setNode()\" only supports text block nodes.');\r\n        return false;\r\n    }\r\n    return chain()\r\n        // try to convert node to default node if needed\r\n        .command(({ commands }) => {\r\n        const canSetBlock = setBlockType(type, attributes)(state);\r\n        if (canSetBlock) {\r\n            return true;\r\n        }\r\n        return commands.clearNodes();\r\n    })\r\n        .command(({ state: updatedState }) => {\r\n        return setBlockType(type, attributes)(updatedState, dispatch);\r\n    })\r\n        .run();\r\n};\n\nconst setNodeSelection = position => ({ tr, dispatch }) => {\r\n    if (dispatch) {\r\n        const { doc } = tr;\r\n        const minPos = Selection.atStart(doc).from;\r\n        const maxPos = Selection.atEnd(doc).to;\r\n        const resolvedPos = minMax(position, minPos, maxPos);\r\n        const selection = NodeSelection.create(doc, resolvedPos);\r\n        tr.setSelection(selection);\r\n    }\r\n    return true;\r\n};\n\nconst setTextSelection = position => ({ tr, dispatch }) => {\r\n    if (dispatch) {\r\n        const { doc } = tr;\r\n        const { from, to } = typeof position === 'number'\r\n            ? { from: position, to: position }\r\n            : position;\r\n        const minPos = TextSelection.atStart(doc).from;\r\n        const maxPos = TextSelection.atEnd(doc).to;\r\n        const resolvedFrom = minMax(from, minPos, maxPos);\r\n        const resolvedEnd = minMax(to, minPos, maxPos);\r\n        const selection = TextSelection.create(doc, resolvedFrom, resolvedEnd);\r\n        tr.setSelection(selection);\r\n    }\r\n    return true;\r\n};\n\nconst sinkListItem = typeOrName => ({ state, dispatch }) => {\r\n    const type = getNodeType(typeOrName, state.schema);\r\n    return sinkListItem$1(type)(state, dispatch);\r\n};\n\nfunction getSplittedAttributes(extensionAttributes, typeName, attributes) {\r\n    return Object.fromEntries(Object\r\n        .entries(attributes)\r\n        .filter(([name]) => {\r\n        const extensionAttribute = extensionAttributes.find(item => {\r\n            return item.type === typeName && item.name === name;\r\n        });\r\n        if (!extensionAttribute) {\r\n            return false;\r\n        }\r\n        return extensionAttribute.attribute.keepOnSplit;\r\n    }));\r\n}\n\nfunction defaultBlockAt$1(match) {\r\n    for (let i = 0; i < match.edgeCount; i += 1) {\r\n        const { type } = match.edge(i);\r\n        if (type.isTextblock && !type.hasRequiredAttrs()) {\r\n            return type;\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction ensureMarks(state, splittableMarks) {\r\n    const marks = state.storedMarks\r\n        || (state.selection.$to.parentOffset && state.selection.$from.marks());\r\n    if (marks) {\r\n        const filteredMarks = marks.filter(mark => splittableMarks === null || splittableMarks === void 0 ? void 0 : splittableMarks.includes(mark.type.name));\r\n        state.tr.ensureMarks(filteredMarks);\r\n    }\r\n}\r\nconst splitBlock = ({ keepMarks = true } = {}) => ({ tr, state, dispatch, editor, }) => {\r\n    const { selection, doc } = tr;\r\n    const { $from, $to } = selection;\r\n    const extensionAttributes = editor.extensionManager.attributes;\r\n    const newAttributes = getSplittedAttributes(extensionAttributes, $from.node().type.name, $from.node().attrs);\r\n    if (selection instanceof NodeSelection && selection.node.isBlock) {\r\n        if (!$from.parentOffset || !canSplit(doc, $from.pos)) {\r\n            return false;\r\n        }\r\n        if (dispatch) {\r\n            if (keepMarks) {\r\n                ensureMarks(state, editor.extensionManager.splittableMarks);\r\n            }\r\n            tr.split($from.pos).scrollIntoView();\r\n        }\r\n        return true;\r\n    }\r\n    if (!$from.parent.isBlock) {\r\n        return false;\r\n    }\r\n    if (dispatch) {\r\n        const atEnd = $to.parentOffset === $to.parent.content.size;\r\n        if (selection instanceof TextSelection) {\r\n            tr.deleteSelection();\r\n        }\r\n        const deflt = $from.depth === 0\r\n            ? undefined\r\n            : defaultBlockAt$1($from.node(-1).contentMatchAt($from.indexAfter(-1)));\r\n        let types = atEnd && deflt\r\n            ? [{\r\n                    type: deflt,\r\n                    attrs: newAttributes,\r\n                }]\r\n            : undefined;\r\n        let can = canSplit(tr.doc, tr.mapping.map($from.pos), 1, types);\r\n        if (!types\r\n            && !can\r\n            && canSplit(tr.doc, tr.mapping.map($from.pos), 1, deflt ? [{ type: deflt }] : undefined)) {\r\n            can = true;\r\n            types = deflt\r\n                ? [{\r\n                        type: deflt,\r\n                        attrs: newAttributes,\r\n                    }]\r\n                : undefined;\r\n        }\r\n        if (can) {\r\n            tr.split(tr.mapping.map($from.pos), 1, types);\r\n            if (deflt\r\n                && !atEnd\r\n                && !$from.parentOffset\r\n                && $from.parent.type !== deflt) {\r\n                const first = tr.mapping.map($from.before());\r\n                const $first = tr.doc.resolve(first);\r\n                if ($from.node(-1).canReplaceWith($first.index(), $first.index() + 1, deflt)) {\r\n                    tr.setNodeMarkup(tr.mapping.map($from.before()), deflt);\r\n                }\r\n            }\r\n        }\r\n        if (keepMarks) {\r\n            ensureMarks(state, editor.extensionManager.splittableMarks);\r\n        }\r\n        tr.scrollIntoView();\r\n    }\r\n    return true;\r\n};\n\nconst splitListItem = typeOrName => ({ tr, state, dispatch, editor, }) => {\r\n    var _a;\r\n    const type = getNodeType(typeOrName, state.schema);\r\n    const { $from, $to } = state.selection;\r\n    // @ts-ignore\r\n    // eslint-disable-next-line\r\n    const node = state.selection.node;\r\n    if ((node && node.isBlock) || $from.depth < 2 || !$from.sameParent($to)) {\r\n        return false;\r\n    }\r\n    const grandParent = $from.node(-1);\r\n    if (grandParent.type !== type) {\r\n        return false;\r\n    }\r\n    const extensionAttributes = editor.extensionManager.attributes;\r\n    if ($from.parent.content.size === 0 && $from.node(-1).childCount === $from.indexAfter(-1)) {\r\n        // In an empty block. If this is a nested list, the wrapping\r\n        // list item should be split. Otherwise, bail out and let next\r\n        // command handle lifting.\r\n        if ($from.depth === 2\r\n            || $from.node(-3).type !== type\r\n            || $from.index(-2) !== $from.node(-2).childCount - 1) {\r\n            return false;\r\n        }\r\n        if (dispatch) {\r\n            let wrap = Fragment.empty;\r\n            // eslint-disable-next-line\r\n            const depthBefore = $from.index(-1)\r\n                ? 1\r\n                : $from.index(-2)\r\n                    ? 2\r\n                    : 3;\r\n            // Build a fragment containing empty versions of the structure\r\n            // from the outer list item to the parent node of the cursor\r\n            for (let d = $from.depth - depthBefore; d >= $from.depth - 3; d -= 1) {\r\n                wrap = Fragment.from($from.node(d).copy(wrap));\r\n            }\r\n            // eslint-disable-next-line\r\n            const depthAfter = $from.indexAfter(-1) < $from.node(-2).childCount\r\n                ? 1\r\n                : $from.indexAfter(-2) < $from.node(-3).childCount\r\n                    ? 2\r\n                    : 3;\r\n            // Add a second list item with an empty default start node\r\n            const newNextTypeAttributes = getSplittedAttributes(extensionAttributes, $from.node().type.name, $from.node().attrs);\r\n            const nextType = ((_a = type.contentMatch.defaultType) === null || _a === void 0 ? void 0 : _a.createAndFill(newNextTypeAttributes)) || undefined;\r\n            wrap = wrap.append(Fragment.from(type.createAndFill(null, nextType) || undefined));\r\n            const start = $from.before($from.depth - (depthBefore - 1));\r\n            tr.replace(start, $from.after(-depthAfter), new Slice(wrap, 4 - depthBefore, 0));\r\n            let sel = -1;\r\n            tr.doc.nodesBetween(start, tr.doc.content.size, (n, pos) => {\r\n                if (sel > -1) {\r\n                    return false;\r\n                }\r\n                if (n.isTextblock && n.content.size === 0) {\r\n                    sel = pos + 1;\r\n                }\r\n            });\r\n            if (sel > -1) {\r\n                tr.setSelection(TextSelection.near(tr.doc.resolve(sel)));\r\n            }\r\n            tr.scrollIntoView();\r\n        }\r\n        return true;\r\n    }\r\n    const nextType = $to.pos === $from.end()\r\n        ? grandParent.contentMatchAt(0).defaultType\r\n        : null;\r\n    const newTypeAttributes = getSplittedAttributes(extensionAttributes, grandParent.type.name, grandParent.attrs);\r\n    const newNextTypeAttributes = getSplittedAttributes(extensionAttributes, $from.node().type.name, $from.node().attrs);\r\n    tr.delete($from.pos, $to.pos);\r\n    const types = nextType\r\n        ? [{ type, attrs: newTypeAttributes }, { type: nextType, attrs: newNextTypeAttributes }]\r\n        : [{ type, attrs: newTypeAttributes }];\r\n    if (!canSplit(tr.doc, $from.pos, 2)) {\r\n        return false;\r\n    }\r\n    if (dispatch) {\r\n        tr.split($from.pos, 2, types).scrollIntoView();\r\n    }\r\n    return true;\r\n};\n\nfunction findParentNodeClosestToPos($pos, predicate) {\r\n    for (let i = $pos.depth; i > 0; i -= 1) {\r\n        const node = $pos.node(i);\r\n        if (predicate(node)) {\r\n            return {\r\n                pos: i > 0 ? $pos.before(i) : 0,\r\n                start: $pos.start(i),\r\n                depth: i,\r\n                node,\r\n            };\r\n        }\r\n    }\r\n}\n\nfunction findParentNode(predicate) {\r\n    return (selection) => findParentNodeClosestToPos(selection.$from, predicate);\r\n}\n\nfunction isList(name, extensions) {\r\n    const { nodeExtensions } = splitExtensions(extensions);\r\n    const extension = nodeExtensions.find(item => item.name === name);\r\n    if (!extension) {\r\n        return false;\r\n    }\r\n    const context = {\r\n        name: extension.name,\r\n        options: extension.options,\r\n        storage: extension.storage,\r\n    };\r\n    const group = callOrReturn(getExtensionField(extension, 'group', context));\r\n    if (typeof group !== 'string') {\r\n        return false;\r\n    }\r\n    return group.split(' ').includes('list');\r\n}\n\nconst joinListBackwards = (tr, listType) => {\r\n    const list = findParentNode(node => node.type === listType)(tr.selection);\r\n    if (!list) {\r\n        return true;\r\n    }\r\n    const before = tr.doc.resolve(Math.max(0, list.pos - 1)).before(list.depth);\r\n    if (before === undefined) {\r\n        return true;\r\n    }\r\n    const nodeBefore = tr.doc.nodeAt(before);\r\n    const canJoinBackwards = list.node.type === (nodeBefore === null || nodeBefore === void 0 ? void 0 : nodeBefore.type)\r\n        && canJoin(tr.doc, list.pos);\r\n    if (!canJoinBackwards) {\r\n        return true;\r\n    }\r\n    tr.join(list.pos);\r\n    return true;\r\n};\r\nconst joinListForwards = (tr, listType) => {\r\n    const list = findParentNode(node => node.type === listType)(tr.selection);\r\n    if (!list) {\r\n        return true;\r\n    }\r\n    const after = tr.doc.resolve(list.start).after(list.depth);\r\n    if (after === undefined) {\r\n        return true;\r\n    }\r\n    const nodeAfter = tr.doc.nodeAt(after);\r\n    const canJoinForwards = list.node.type === (nodeAfter === null || nodeAfter === void 0 ? void 0 : nodeAfter.type)\r\n        && canJoin(tr.doc, after);\r\n    if (!canJoinForwards) {\r\n        return true;\r\n    }\r\n    tr.join(after);\r\n    return true;\r\n};\r\nconst toggleList = (listTypeOrName, itemTypeOrName) => ({ editor, tr, state, dispatch, chain, commands, can, }) => {\r\n    const { extensions } = editor.extensionManager;\r\n    const listType = getNodeType(listTypeOrName, state.schema);\r\n    const itemType = getNodeType(itemTypeOrName, state.schema);\r\n    const { selection } = state;\r\n    const { $from, $to } = selection;\r\n    const range = $from.blockRange($to);\r\n    if (!range) {\r\n        return false;\r\n    }\r\n    const parentList = findParentNode(node => isList(node.type.name, extensions))(selection);\r\n    if (range.depth >= 1 && parentList && range.depth - parentList.depth <= 1) {\r\n        // remove list\r\n        if (parentList.node.type === listType) {\r\n            return commands.liftListItem(itemType);\r\n        }\r\n        // change list type\r\n        if (isList(parentList.node.type.name, extensions)\r\n            && listType.validContent(parentList.node.content)\r\n            && dispatch) {\r\n            return chain()\r\n                .command(() => {\r\n                tr.setNodeMarkup(parentList.pos, listType);\r\n                return true;\r\n            })\r\n                .command(() => joinListBackwards(tr, listType))\r\n                .command(() => joinListForwards(tr, listType))\r\n                .run();\r\n        }\r\n    }\r\n    return chain()\r\n        // try to convert node to default node if needed\r\n        .command(() => {\r\n        const canWrapInList = can().wrapInList(listType);\r\n        if (canWrapInList) {\r\n            return true;\r\n        }\r\n        return commands.clearNodes();\r\n    })\r\n        .wrapInList(listType)\r\n        .command(() => joinListBackwards(tr, listType))\r\n        .command(() => joinListForwards(tr, listType))\r\n        .run();\r\n};\n\nfunction isMarkActive(state, typeOrName, attributes = {}) {\r\n    const { empty, ranges } = state.selection;\r\n    const type = typeOrName\r\n        ? getMarkType(typeOrName, state.schema)\r\n        : null;\r\n    if (empty) {\r\n        return !!(state.storedMarks || state.selection.$from.marks())\r\n            .filter(mark => {\r\n            if (!type) {\r\n                return true;\r\n            }\r\n            return type.name === mark.type.name;\r\n        })\r\n            .find(mark => objectIncludes(mark.attrs, attributes, { strict: false }));\r\n    }\r\n    let selectionRange = 0;\r\n    const markRanges = [];\r\n    ranges.forEach(({ $from, $to }) => {\r\n        const from = $from.pos;\r\n        const to = $to.pos;\r\n        state.doc.nodesBetween(from, to, (node, pos) => {\r\n            if (!node.isText && !node.marks.length) {\r\n                return;\r\n            }\r\n            const relativeFrom = Math.max(from, pos);\r\n            const relativeTo = Math.min(to, pos + node.nodeSize);\r\n            const range = relativeTo - relativeFrom;\r\n            selectionRange += range;\r\n            markRanges.push(...node.marks.map(mark => ({\r\n                mark,\r\n                from: relativeFrom,\r\n                to: relativeTo,\r\n            })));\r\n        });\r\n    });\r\n    if (selectionRange === 0) {\r\n        return false;\r\n    }\r\n    // calculate range of matched mark\r\n    const matchedRange = markRanges\r\n        .filter(markRange => {\r\n        if (!type) {\r\n            return true;\r\n        }\r\n        return type.name === markRange.mark.type.name;\r\n    })\r\n        .filter(markRange => objectIncludes(markRange.mark.attrs, attributes, { strict: false }))\r\n        .reduce((sum, markRange) => sum + markRange.to - markRange.from, 0);\r\n    // calculate range of marks that excludes the searched mark\r\n    // for example `code` doesnt allow any other marks\r\n    const excludedRange = markRanges\r\n        .filter(markRange => {\r\n        if (!type) {\r\n            return true;\r\n        }\r\n        return markRange.mark.type !== type\r\n            && markRange.mark.type.excludes(type);\r\n    })\r\n        .reduce((sum, markRange) => sum + markRange.to - markRange.from, 0);\r\n    // we only include the result of `excludedRange`\r\n    // if there is a match at all\r\n    const range = matchedRange > 0\r\n        ? matchedRange + excludedRange\r\n        : matchedRange;\r\n    return range >= selectionRange;\r\n}\n\nconst toggleMark = (typeOrName, attributes = {}, options = {}) => ({ state, commands }) => {\r\n    const { extendEmptyMarkRange = false } = options;\r\n    const type = getMarkType(typeOrName, state.schema);\r\n    const isActive = isMarkActive(state, type, attributes);\r\n    if (isActive) {\r\n        return commands.unsetMark(type, { extendEmptyMarkRange });\r\n    }\r\n    return commands.setMark(type, attributes);\r\n};\n\nconst toggleNode = (typeOrName, toggleTypeOrName, attributes = {}) => ({ state, commands }) => {\r\n    const type = getNodeType(typeOrName, state.schema);\r\n    const toggleType = getNodeType(toggleTypeOrName, state.schema);\r\n    const isActive = isNodeActive(state, type, attributes);\r\n    if (isActive) {\r\n        return commands.setNode(toggleType);\r\n    }\r\n    return commands.setNode(type, attributes);\r\n};\n\nconst toggleWrap = (typeOrName, attributes = {}) => ({ state, commands }) => {\r\n    const type = getNodeType(typeOrName, state.schema);\r\n    const isActive = isNodeActive(state, type, attributes);\r\n    if (isActive) {\r\n        return commands.lift(type);\r\n    }\r\n    return commands.wrapIn(type, attributes);\r\n};\n\nconst undoInputRule = () => ({ state, dispatch }) => {\r\n    const plugins = state.plugins;\r\n    for (let i = 0; i < plugins.length; i += 1) {\r\n        const plugin = plugins[i];\r\n        let undoable;\r\n        // @ts-ignore\r\n        // eslint-disable-next-line\r\n        if (plugin.spec.isInputRules && (undoable = plugin.getState(state))) {\r\n            if (dispatch) {\r\n                const tr = state.tr;\r\n                const toUndo = undoable.transform;\r\n                for (let j = toUndo.steps.length - 1; j >= 0; j -= 1) {\r\n                    tr.step(toUndo.steps[j].invert(toUndo.docs[j]));\r\n                }\r\n                if (undoable.text) {\r\n                    const marks = tr.doc.resolve(undoable.from).marks();\r\n                    tr.replaceWith(undoable.from, undoable.to, state.schema.text(undoable.text, marks));\r\n                }\r\n                else {\r\n                    tr.delete(undoable.from, undoable.to);\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n};\n\nconst unsetAllMarks = () => ({ tr, dispatch }) => {\r\n    const { selection } = tr;\r\n    const { empty, ranges } = selection;\r\n    if (empty) {\r\n        return true;\r\n    }\r\n    if (dispatch) {\r\n        ranges.forEach(range => {\r\n            tr.removeMark(range.$from.pos, range.$to.pos);\r\n        });\r\n    }\r\n    return true;\r\n};\n\nconst unsetMark = (typeOrName, options = {}) => ({ tr, state, dispatch }) => {\r\n    var _a;\r\n    const { extendEmptyMarkRange = false } = options;\r\n    const { selection } = tr;\r\n    const type = getMarkType(typeOrName, state.schema);\r\n    const { $from, empty, ranges } = selection;\r\n    if (!dispatch) {\r\n        return true;\r\n    }\r\n    if (empty && extendEmptyMarkRange) {\r\n        let { from, to } = selection;\r\n        const attrs = (_a = $from.marks().find(mark => mark.type === type)) === null || _a === void 0 ? void 0 : _a.attrs;\r\n        const range = getMarkRange($from, type, attrs);\r\n        if (range) {\r\n            from = range.from;\r\n            to = range.to;\r\n        }\r\n        tr.removeMark(from, to, type);\r\n    }\r\n    else {\r\n        ranges.forEach(range => {\r\n            tr.removeMark(range.$from.pos, range.$to.pos, type);\r\n        });\r\n    }\r\n    tr.removeStoredMark(type);\r\n    return true;\r\n};\n\nconst updateAttributes = (typeOrName, attributes = {}) => ({ tr, state, dispatch }) => {\r\n    let nodeType = null;\r\n    let markType = null;\r\n    const schemaType = getSchemaTypeNameByName(typeof typeOrName === 'string'\r\n        ? typeOrName\r\n        : typeOrName.name, state.schema);\r\n    if (!schemaType) {\r\n        return false;\r\n    }\r\n    if (schemaType === 'node') {\r\n        nodeType = getNodeType(typeOrName, state.schema);\r\n    }\r\n    if (schemaType === 'mark') {\r\n        markType = getMarkType(typeOrName, state.schema);\r\n    }\r\n    if (dispatch) {\r\n        tr.selection.ranges.forEach(range => {\r\n            const from = range.$from.pos;\r\n            const to = range.$to.pos;\r\n            state.doc.nodesBetween(from, to, (node, pos) => {\r\n                if (nodeType && nodeType === node.type) {\r\n                    tr.setNodeMarkup(pos, undefined, {\r\n                        ...node.attrs,\r\n                        ...attributes,\r\n                    });\r\n                }\r\n                if (markType && node.marks.length) {\r\n                    node.marks.forEach(mark => {\r\n                        if (markType === mark.type) {\r\n                            const trimmedFrom = Math.max(pos, from);\r\n                            const trimmedTo = Math.min(pos + node.nodeSize, to);\r\n                            tr.addMark(trimmedFrom, trimmedTo, markType.create({\r\n                                ...mark.attrs,\r\n                                ...attributes,\r\n                            }));\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n    return true;\r\n};\n\nconst wrapIn = (typeOrName, attributes = {}) => ({ state, dispatch }) => {\r\n    const type = getNodeType(typeOrName, state.schema);\r\n    return wrapIn$1(type, attributes)(state, dispatch);\r\n};\n\nconst wrapInList = (typeOrName, attributes = {}) => ({ state, dispatch }) => {\r\n    const type = getNodeType(typeOrName, state.schema);\r\n    return wrapInList$1(type, attributes)(state, dispatch);\r\n};\n\nvar commands = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  blur: blur,\n  clearContent: clearContent,\n  clearNodes: clearNodes,\n  command: command,\n  createParagraphNear: createParagraphNear,\n  deleteNode: deleteNode,\n  deleteRange: deleteRange,\n  deleteSelection: deleteSelection,\n  enter: enter,\n  exitCode: exitCode,\n  extendMarkRange: extendMarkRange,\n  first: first,\n  focus: focus,\n  forEach: forEach,\n  insertContent: insertContent,\n  insertContentAt: insertContentAt,\n  joinBackward: joinBackward,\n  joinForward: joinForward,\n  keyboardShortcut: keyboardShortcut,\n  lift: lift,\n  liftEmptyBlock: liftEmptyBlock,\n  liftListItem: liftListItem,\n  newlineInCode: newlineInCode,\n  resetAttributes: resetAttributes,\n  scrollIntoView: scrollIntoView,\n  selectAll: selectAll,\n  selectNodeBackward: selectNodeBackward,\n  selectNodeForward: selectNodeForward,\n  selectParentNode: selectParentNode,\n  selectTextblockEnd: selectTextblockEnd,\n  selectTextblockStart: selectTextblockStart,\n  setContent: setContent,\n  setMark: setMark,\n  setMeta: setMeta,\n  setNode: setNode,\n  setNodeSelection: setNodeSelection,\n  setTextSelection: setTextSelection,\n  sinkListItem: sinkListItem,\n  splitBlock: splitBlock,\n  splitListItem: splitListItem,\n  toggleList: toggleList,\n  toggleMark: toggleMark,\n  toggleNode: toggleNode,\n  toggleWrap: toggleWrap,\n  undoInputRule: undoInputRule,\n  unsetAllMarks: unsetAllMarks,\n  unsetMark: unsetMark,\n  updateAttributes: updateAttributes,\n  wrapIn: wrapIn,\n  wrapInList: wrapInList\n});\n\nconst Commands = Extension.create({\r\n    name: 'commands',\r\n    addCommands() {\r\n        return {\r\n            ...commands,\r\n        };\r\n    },\r\n});\n\nconst Editable = Extension.create({\r\n    name: 'editable',\r\n    addProseMirrorPlugins() {\r\n        return [\r\n            new Plugin({\r\n                key: new PluginKey('editable'),\r\n                props: {\r\n                    editable: () => this.editor.options.editable,\r\n                },\r\n            }),\r\n        ];\r\n    },\r\n});\n\nconst FocusEvents = Extension.create({\r\n    name: 'focusEvents',\r\n    addProseMirrorPlugins() {\r\n        const { editor } = this;\r\n        return [\r\n            new Plugin({\r\n                key: new PluginKey('focusEvents'),\r\n                props: {\r\n                    handleDOMEvents: {\r\n                        focus: (view, event) => {\r\n                            editor.isFocused = true;\r\n                            const transaction = editor.state.tr\r\n                                .setMeta('focus', { event })\r\n                                .setMeta('addToHistory', false);\r\n                            view.dispatch(transaction);\r\n                            return false;\r\n                        },\r\n                        blur: (view, event) => {\r\n                            editor.isFocused = false;\r\n                            const transaction = editor.state.tr\r\n                                .setMeta('blur', { event })\r\n                                .setMeta('addToHistory', false);\r\n                            view.dispatch(transaction);\r\n                            return false;\r\n                        },\r\n                    },\r\n                },\r\n            }),\r\n        ];\r\n    },\r\n});\n\nconst Keymap = Extension.create({\r\n    name: 'keymap',\r\n    addKeyboardShortcuts() {\r\n        const handleBackspace = () => this.editor.commands.first(({ commands }) => [\r\n            () => commands.undoInputRule(),\r\n            // maybe convert first text block node to default node\r\n            () => commands.command(({ tr }) => {\r\n                const { selection, doc } = tr;\r\n                const { empty, $anchor } = selection;\r\n                const { pos, parent } = $anchor;\r\n                const isAtStart = Selection.atStart(doc).from === pos;\r\n                if (!empty\r\n                    || !isAtStart\r\n                    || !parent.type.isTextblock\r\n                    || parent.textContent.length) {\r\n                    return false;\r\n                }\r\n                return commands.clearNodes();\r\n            }),\r\n            () => commands.deleteSelection(),\r\n            () => commands.joinBackward(),\r\n            () => commands.selectNodeBackward(),\r\n        ]);\r\n        const handleDelete = () => this.editor.commands.first(({ commands }) => [\r\n            () => commands.deleteSelection(),\r\n            () => commands.joinForward(),\r\n            () => commands.selectNodeForward(),\r\n        ]);\r\n        const handleEnter = () => this.editor.commands.first(({ commands }) => [\r\n            () => commands.newlineInCode(),\r\n            () => commands.createParagraphNear(),\r\n            () => commands.liftEmptyBlock(),\r\n            () => commands.splitBlock(),\r\n        ]);\r\n        const baseKeymap = {\r\n            Enter: handleEnter,\r\n            'Mod-Enter': () => this.editor.commands.exitCode(),\r\n            Backspace: handleBackspace,\r\n            'Mod-Backspace': handleBackspace,\r\n            'Shift-Backspace': handleBackspace,\r\n            Delete: handleDelete,\r\n            'Mod-Delete': handleDelete,\r\n            'Mod-a': () => this.editor.commands.selectAll(),\r\n        };\r\n        const pcKeymap = {\r\n            ...baseKeymap,\r\n        };\r\n        const macKeymap = {\r\n            ...baseKeymap,\r\n            'Ctrl-h': handleBackspace,\r\n            'Alt-Backspace': handleBackspace,\r\n            'Ctrl-d': handleDelete,\r\n            'Ctrl-Alt-Backspace': handleDelete,\r\n            'Alt-Delete': handleDelete,\r\n            'Alt-d': handleDelete,\r\n            'Ctrl-a': () => this.editor.commands.selectTextblockStart(),\r\n            'Ctrl-e': () => this.editor.commands.selectTextblockEnd(),\r\n        };\r\n        if (isiOS() || isMacOS()) {\r\n            return macKeymap;\r\n        }\r\n        return pcKeymap;\r\n    },\r\n    addProseMirrorPlugins() {\r\n        return [\r\n            // With this plugin we check if the whole document was selected and deleted.\r\n            // In this case we will additionally call `clearNodes()` to convert e.g. a heading\r\n            // to a paragraph if necessary.\r\n            // This is an alternative to ProseMirror's `AllSelection`, which doesnt work well\r\n            // with many other commands.\r\n            new Plugin({\r\n                key: new PluginKey('clearDocument'),\r\n                appendTransaction: (transactions, oldState, newState) => {\r\n                    const docChanges = transactions.some(transaction => transaction.docChanged)\r\n                        && !oldState.doc.eq(newState.doc);\r\n                    if (!docChanges) {\r\n                        return;\r\n                    }\r\n                    const { empty, from, to } = oldState.selection;\r\n                    const allFrom = Selection.atStart(oldState.doc).from;\r\n                    const allEnd = Selection.atEnd(oldState.doc).to;\r\n                    const allWasSelected = from === allFrom && to === allEnd;\r\n                    const isEmpty = newState.doc.textBetween(0, newState.doc.content.size, ' ', ' ').length === 0;\r\n                    if (empty || !allWasSelected || !isEmpty) {\r\n                        return;\r\n                    }\r\n                    const tr = newState.tr;\r\n                    const state = createChainableState({\r\n                        state: newState,\r\n                        transaction: tr,\r\n                    });\r\n                    const { commands } = new CommandManager({\r\n                        editor: this.editor,\r\n                        state,\r\n                    });\r\n                    commands.clearNodes();\r\n                    if (!tr.steps.length) {\r\n                        return;\r\n                    }\r\n                    return tr;\r\n                },\r\n            }),\r\n        ];\r\n    },\r\n});\n\nconst Tabindex = Extension.create({\r\n    name: 'tabindex',\r\n    addProseMirrorPlugins() {\r\n        return [\r\n            new Plugin({\r\n                key: new PluginKey('tabindex'),\r\n                props: {\r\n                    attributes: this.editor.isEditable ? { tabindex: '0' } : {},\r\n                },\r\n            }),\r\n        ];\r\n    },\r\n});\n\nvar extensions = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ClipboardTextSerializer: ClipboardTextSerializer,\n  Commands: Commands,\n  Editable: Editable,\n  FocusEvents: FocusEvents,\n  Keymap: Keymap,\n  Tabindex: Tabindex\n});\n\nfunction getNodeAttributes(state, typeOrName) {\r\n    const type = getNodeType(typeOrName, state.schema);\r\n    const { from, to } = state.selection;\r\n    const nodes = [];\r\n    state.doc.nodesBetween(from, to, node => {\r\n        nodes.push(node);\r\n    });\r\n    const node = nodes\r\n        .reverse()\r\n        .find(nodeItem => nodeItem.type.name === type.name);\r\n    if (!node) {\r\n        return {};\r\n    }\r\n    return { ...node.attrs };\r\n}\n\nfunction getAttributes(state, typeOrName) {\r\n    const schemaType = getSchemaTypeNameByName(typeof typeOrName === 'string'\r\n        ? typeOrName\r\n        : typeOrName.name, state.schema);\r\n    if (schemaType === 'node') {\r\n        return getNodeAttributes(state, typeOrName);\r\n    }\r\n    if (schemaType === 'mark') {\r\n        return getMarkAttributes(state, typeOrName);\r\n    }\r\n    return {};\r\n}\n\nfunction getHTMLFromFragment(fragment, schema) {\r\n    const documentFragment = DOMSerializer\r\n        .fromSchema(schema)\r\n        .serializeFragment(fragment);\r\n    const temporaryDocument = document.implementation.createHTMLDocument();\r\n    const container = temporaryDocument.createElement('div');\r\n    container.appendChild(documentFragment);\r\n    return container.innerHTML;\r\n}\n\nfunction getText(node, options) {\r\n    const range = {\r\n        from: 0,\r\n        to: node.content.size,\r\n    };\r\n    return getTextBetween(node, range, options);\r\n}\n\nfunction isActive(state, name, attributes = {}) {\r\n    if (!name) {\r\n        return isNodeActive(state, null, attributes) || isMarkActive(state, null, attributes);\r\n    }\r\n    const schemaType = getSchemaTypeNameByName(name, state.schema);\r\n    if (schemaType === 'node') {\r\n        return isNodeActive(state, name, attributes);\r\n    }\r\n    if (schemaType === 'mark') {\r\n        return isMarkActive(state, name, attributes);\r\n    }\r\n    return false;\r\n}\n\nfunction isNodeEmpty(node) {\r\n    var _a;\r\n    const defaultContent = (_a = node.type.createAndFill()) === null || _a === void 0 ? void 0 : _a.toJSON();\r\n    const content = node.toJSON();\r\n    return JSON.stringify(defaultContent) === JSON.stringify(content);\r\n}\n\nconst style = `.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: \"liga\" 0; /* the above doesn't seem to work in Edge */\n}\n\n.ProseMirror [contenteditable=\"false\"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable=\"false\"] [contenteditable=\"true\"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 1px !important;\n  height: 1px !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: \"\";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}`;\n\nfunction createStyleTag(style, nonce) {\r\n    const tipTapStyleTag = document.querySelector('style[data-tiptap-style]');\r\n    if (tipTapStyleTag !== null) {\r\n        return tipTapStyleTag;\r\n    }\r\n    const styleNode = document.createElement('style');\r\n    if (nonce) {\r\n        styleNode.setAttribute('nonce', nonce);\r\n    }\r\n    styleNode.setAttribute('data-tiptap-style', '');\r\n    styleNode.innerHTML = style;\r\n    document.getElementsByTagName('head')[0].appendChild(styleNode);\r\n    return styleNode;\r\n}\n\nclass Editor extends EventEmitter {\r\n    constructor(options = {}) {\r\n        super();\r\n        this.isFocused = false;\r\n        this.extensionStorage = {};\r\n        this.options = {\r\n            element: document.createElement('div'),\r\n            content: '',\r\n            injectCSS: true,\r\n            injectNonce: undefined,\r\n            extensions: [],\r\n            autofocus: false,\r\n            editable: true,\r\n            editorProps: {},\r\n            parseOptions: {},\r\n            enableInputRules: true,\r\n            enablePasteRules: true,\r\n            enableCoreExtensions: true,\r\n            onBeforeCreate: () => null,\r\n            onCreate: () => null,\r\n            onUpdate: () => null,\r\n            onSelectionUpdate: () => null,\r\n            onTransaction: () => null,\r\n            onFocus: () => null,\r\n            onBlur: () => null,\r\n            onDestroy: () => null,\r\n        };\r\n        this.isCapturingTransaction = false;\r\n        this.capturedTransaction = null;\r\n        this.setOptions(options);\r\n        this.createExtensionManager();\r\n        this.createCommandManager();\r\n        this.createSchema();\r\n        this.on('beforeCreate', this.options.onBeforeCreate);\r\n        this.emit('beforeCreate', { editor: this });\r\n        this.createView();\r\n        this.injectCSS();\r\n        this.on('create', this.options.onCreate);\r\n        this.on('update', this.options.onUpdate);\r\n        this.on('selectionUpdate', this.options.onSelectionUpdate);\r\n        this.on('transaction', this.options.onTransaction);\r\n        this.on('focus', this.options.onFocus);\r\n        this.on('blur', this.options.onBlur);\r\n        this.on('destroy', this.options.onDestroy);\r\n        window.setTimeout(() => {\r\n            if (this.isDestroyed) {\r\n                return;\r\n            }\r\n            this.commands.focus(this.options.autofocus);\r\n            this.emit('create', { editor: this });\r\n        }, 0);\r\n    }\r\n    /**\r\n     * Returns the editor storage.\r\n     */\r\n    get storage() {\r\n        return this.extensionStorage;\r\n    }\r\n    /**\r\n     * An object of all registered commands.\r\n     */\r\n    get commands() {\r\n        return this.commandManager.commands;\r\n    }\r\n    /**\r\n     * Create a command chain to call multiple commands at once.\r\n     */\r\n    chain() {\r\n        return this.commandManager.chain();\r\n    }\r\n    /**\r\n     * Check if a command or a command chain can be executed. Without executing it.\r\n     */\r\n    can() {\r\n        return this.commandManager.can();\r\n    }\r\n    /**\r\n     * Inject CSS styles.\r\n     */\r\n    injectCSS() {\r\n        if (this.options.injectCSS && document) {\r\n            this.css = createStyleTag(style, this.options.injectNonce);\r\n        }\r\n    }\r\n    /**\r\n     * Update editor options.\r\n     *\r\n     * @param options A list of options\r\n     */\r\n    setOptions(options = {}) {\r\n        this.options = {\r\n            ...this.options,\r\n            ...options,\r\n        };\r\n        if (!this.view || !this.state || this.isDestroyed) {\r\n            return;\r\n        }\r\n        if (this.options.editorProps) {\r\n            this.view.setProps(this.options.editorProps);\r\n        }\r\n        this.view.updateState(this.state);\r\n    }\r\n    /**\r\n     * Update editable state of the editor.\r\n     */\r\n    setEditable(editable) {\r\n        this.setOptions({ editable });\r\n    }\r\n    /**\r\n     * Returns whether the editor is editable.\r\n     */\r\n    get isEditable() {\r\n        // since plugins are applied after creating the view\r\n        // `editable` is always `true` for one tick.\r\n        // thats why we also have to check for `options.editable`\r\n        return this.options.editable\r\n            && this.view\r\n            && this.view.editable;\r\n    }\r\n    /**\r\n     * Returns the editor state.\r\n     */\r\n    get state() {\r\n        return this.view.state;\r\n    }\r\n    /**\r\n     * Register a ProseMirror plugin.\r\n     *\r\n     * @param plugin A ProseMirror plugin\r\n     * @param handlePlugins Control how to merge the plugin into the existing plugins.\r\n     */\r\n    registerPlugin(plugin, handlePlugins) {\r\n        const plugins = isFunction(handlePlugins)\r\n            ? handlePlugins(plugin, [...this.state.plugins])\r\n            : [...this.state.plugins, plugin];\r\n        const state = this.state.reconfigure({ plugins });\r\n        this.view.updateState(state);\r\n    }\r\n    /**\r\n     * Unregister a ProseMirror plugin.\r\n     *\r\n     * @param nameOrPluginKey The plugins name\r\n     */\r\n    unregisterPlugin(nameOrPluginKey) {\r\n        if (this.isDestroyed) {\r\n            return;\r\n        }\r\n        const name = typeof nameOrPluginKey === 'string'\r\n            ? `${nameOrPluginKey}$`\r\n            // @ts-ignore\r\n            : nameOrPluginKey.key;\r\n        const state = this.state.reconfigure({\r\n            // @ts-ignore\r\n            plugins: this.state.plugins.filter(plugin => !plugin.key.startsWith(name)),\r\n        });\r\n        this.view.updateState(state);\r\n    }\r\n    /**\r\n     * Creates an extension manager.\r\n     */\r\n    createExtensionManager() {\r\n        const coreExtensions = this.options.enableCoreExtensions\r\n            ? Object.values(extensions)\r\n            : [];\r\n        const allExtensions = [...coreExtensions, ...this.options.extensions].filter(extension => {\r\n            return ['extension', 'node', 'mark'].includes(extension === null || extension === void 0 ? void 0 : extension.type);\r\n        });\r\n        this.extensionManager = new ExtensionManager(allExtensions, this);\r\n    }\r\n    /**\r\n     * Creates an command manager.\r\n     */\r\n    createCommandManager() {\r\n        this.commandManager = new CommandManager({\r\n            editor: this,\r\n        });\r\n    }\r\n    /**\r\n     * Creates a ProseMirror schema.\r\n     */\r\n    createSchema() {\r\n        this.schema = this.extensionManager.schema;\r\n    }\r\n    /**\r\n     * Creates a ProseMirror view.\r\n     */\r\n    createView() {\r\n        const doc = createDocument(this.options.content, this.schema, this.options.parseOptions);\r\n        const selection = resolveFocusPosition(doc, this.options.autofocus);\r\n        this.view = new EditorView(this.options.element, {\r\n            ...this.options.editorProps,\r\n            dispatchTransaction: this.dispatchTransaction.bind(this),\r\n            state: EditorState.create({\r\n                doc,\r\n                selection: selection || undefined,\r\n            }),\r\n        });\r\n        // `editor.view` is not yet available at this time.\r\n        // Therefore we will add all plugins and node views directly afterwards.\r\n        const newState = this.state.reconfigure({\r\n            plugins: this.extensionManager.plugins,\r\n        });\r\n        this.view.updateState(newState);\r\n        this.createNodeViews();\r\n        // Lets store the editor instance in the DOM element.\r\n        // So well have access to it for tests.\r\n        const dom = this.view.dom;\r\n        dom.editor = this;\r\n    }\r\n    /**\r\n     * Creates all node views.\r\n     */\r\n    createNodeViews() {\r\n        this.view.setProps({\r\n            nodeViews: this.extensionManager.nodeViews,\r\n        });\r\n    }\r\n    captureTransaction(fn) {\r\n        this.isCapturingTransaction = true;\r\n        fn();\r\n        this.isCapturingTransaction = false;\r\n        const tr = this.capturedTransaction;\r\n        this.capturedTransaction = null;\r\n        return tr;\r\n    }\r\n    /**\r\n     * The callback over which to send transactions (state updates) produced by the view.\r\n     *\r\n     * @param transaction An editor state transaction\r\n     */\r\n    dispatchTransaction(transaction) {\r\n        if (this.isCapturingTransaction) {\r\n            if (!this.capturedTransaction) {\r\n                this.capturedTransaction = transaction;\r\n                return;\r\n            }\r\n            transaction.steps.forEach(step => { var _a; return (_a = this.capturedTransaction) === null || _a === void 0 ? void 0 : _a.step(step); });\r\n            return;\r\n        }\r\n        const state = this.state.apply(transaction);\r\n        const selectionHasChanged = !this.state.selection.eq(state.selection);\r\n        this.view.updateState(state);\r\n        this.emit('transaction', {\r\n            editor: this,\r\n            transaction,\r\n        });\r\n        if (selectionHasChanged) {\r\n            this.emit('selectionUpdate', {\r\n                editor: this,\r\n                transaction,\r\n            });\r\n        }\r\n        const focus = transaction.getMeta('focus');\r\n        const blur = transaction.getMeta('blur');\r\n        if (focus) {\r\n            this.emit('focus', {\r\n                editor: this,\r\n                event: focus.event,\r\n                transaction,\r\n            });\r\n        }\r\n        if (blur) {\r\n            this.emit('blur', {\r\n                editor: this,\r\n                event: blur.event,\r\n                transaction,\r\n            });\r\n        }\r\n        if (!transaction.docChanged || transaction.getMeta('preventUpdate')) {\r\n            return;\r\n        }\r\n        this.emit('update', {\r\n            editor: this,\r\n            transaction,\r\n        });\r\n    }\r\n    /**\r\n     * Get attributes of the currently selected node or mark.\r\n     */\r\n    getAttributes(nameOrType) {\r\n        return getAttributes(this.state, nameOrType);\r\n    }\r\n    isActive(nameOrAttributes, attributesOrUndefined) {\r\n        const name = typeof nameOrAttributes === 'string'\r\n            ? nameOrAttributes\r\n            : null;\r\n        const attributes = typeof nameOrAttributes === 'string'\r\n            ? attributesOrUndefined\r\n            : nameOrAttributes;\r\n        return isActive(this.state, name, attributes);\r\n    }\r\n    /**\r\n     * Get the document as JSON.\r\n     */\r\n    getJSON() {\r\n        return this.state.doc.toJSON();\r\n    }\r\n    /**\r\n     * Get the document as HTML.\r\n     */\r\n    getHTML() {\r\n        return getHTMLFromFragment(this.state.doc.content, this.schema);\r\n    }\r\n    /**\r\n     * Get the document as text.\r\n     */\r\n    getText(options) {\r\n        const { blockSeparator = '\\n\\n', textSerializers = {}, } = options || {};\r\n        return getText(this.state.doc, {\r\n            blockSeparator,\r\n            textSerializers: {\r\n                ...textSerializers,\r\n                ...getTextSerializersFromSchema(this.schema),\r\n            },\r\n        });\r\n    }\r\n    /**\r\n     * Check if there is no content.\r\n     */\r\n    get isEmpty() {\r\n        return isNodeEmpty(this.state.doc);\r\n    }\r\n    /**\r\n     * Get the number of characters for the current document.\r\n     *\r\n     * @deprecated\r\n     */\r\n    getCharacterCount() {\r\n        console.warn('[tiptap warn]: \"editor.getCharacterCount()\" is deprecated. Please use \"editor.storage.characterCount.characters()\" instead.');\r\n        return this.state.doc.content.size - 2;\r\n    }\r\n    /**\r\n     * Destroy the editor.\r\n     */\r\n    destroy() {\r\n        this.emit('destroy');\r\n        if (this.view) {\r\n            this.view.destroy();\r\n        }\r\n        this.removeAllListeners();\r\n    }\r\n    /**\r\n     * Check if the editor is already destroyed.\r\n     */\r\n    get isDestroyed() {\r\n        var _a;\r\n        // @ts-ignore\r\n        return !((_a = this.view) === null || _a === void 0 ? void 0 : _a.docView);\r\n    }\r\n}\n\n/**\r\n * Returns a new `Transform` based on all steps of the passed transactions.\r\n */\r\nfunction combineTransactionSteps(oldDoc, transactions) {\r\n    const transform = new Transform(oldDoc);\r\n    transactions.forEach(transaction => {\r\n        transaction.steps.forEach(step => {\r\n            transform.step(step);\r\n        });\r\n    });\r\n    return transform;\r\n}\n\nfunction defaultBlockAt(match) {\r\n    for (let i = 0; i < match.edgeCount; i += 1) {\r\n        const { type } = match.edge(i);\r\n        if (type.isTextblock && !type.hasRequiredAttrs()) {\r\n            return type;\r\n        }\r\n    }\r\n    return null;\r\n}\n\nfunction findChildren(node, predicate) {\r\n    const nodesWithPos = [];\r\n    node.descendants((child, pos) => {\r\n        if (predicate(child)) {\r\n            nodesWithPos.push({\r\n                node: child,\r\n                pos,\r\n            });\r\n        }\r\n    });\r\n    return nodesWithPos;\r\n}\n\n/**\r\n * Same as `findChildren` but searches only within a `range`.\r\n */\r\nfunction findChildrenInRange(node, range, predicate) {\r\n    const nodesWithPos = [];\r\n    // if (range.from === range.to) {\r\n    //   const nodeAt = node.nodeAt(range.from)\r\n    //   if (nodeAt) {\r\n    //     nodesWithPos.push({\r\n    //       node: nodeAt,\r\n    //       pos: range.from,\r\n    //     })\r\n    //   }\r\n    // }\r\n    node.nodesBetween(range.from, range.to, (child, pos) => {\r\n        if (predicate(child)) {\r\n            nodesWithPos.push({\r\n                node: child,\r\n                pos,\r\n            });\r\n        }\r\n    });\r\n    return nodesWithPos;\r\n}\n\nfunction getSchema(extensions) {\r\n    const resolvedExtensions = ExtensionManager.resolve(extensions);\r\n    return getSchemaByResolvedExtensions(resolvedExtensions);\r\n}\n\nfunction generateHTML(doc, extensions) {\r\n    const schema = getSchema(extensions);\r\n    const contentNode = Node$1.fromJSON(schema, doc);\r\n    return getHTMLFromFragment(contentNode.content, schema);\r\n}\n\nfunction generateJSON(html, extensions) {\r\n    const schema = getSchema(extensions);\r\n    const dom = elementFromString(html);\r\n    return DOMParser.fromSchema(schema)\r\n        .parse(dom)\r\n        .toJSON();\r\n}\n\nfunction generateText(doc, extensions, options) {\r\n    const { blockSeparator = '\\n\\n', textSerializers = {}, } = options || {};\r\n    const schema = getSchema(extensions);\r\n    const contentNode = Node$1.fromJSON(schema, doc);\r\n    return getText(contentNode, {\r\n        blockSeparator,\r\n        textSerializers: {\r\n            ...textSerializers,\r\n            ...getTextSerializersFromSchema(schema),\r\n        },\r\n    });\r\n}\n\n/**\r\n * Removes duplicated values within an array.\r\n * Supports numbers, strings and objects.\r\n */\r\nfunction removeDuplicates(array, by = JSON.stringify) {\r\n    const seen = {};\r\n    return array.filter(item => {\r\n        const key = by(item);\r\n        return Object.prototype.hasOwnProperty.call(seen, key)\r\n            ? false\r\n            : (seen[key] = true);\r\n    });\r\n}\n\n/**\r\n * Removes duplicated ranges and ranges that are\r\n * fully captured by other ranges.\r\n */\r\nfunction simplifyChangedRanges(changes) {\r\n    const uniqueChanges = removeDuplicates(changes);\r\n    return uniqueChanges.length === 1\r\n        ? uniqueChanges\r\n        : uniqueChanges.filter((change, index) => {\r\n            const rest = uniqueChanges.filter((_, i) => i !== index);\r\n            return !rest.some(otherChange => {\r\n                return change.oldRange.from >= otherChange.oldRange.from\r\n                    && change.oldRange.to <= otherChange.oldRange.to\r\n                    && change.newRange.from >= otherChange.newRange.from\r\n                    && change.newRange.to <= otherChange.newRange.to;\r\n            });\r\n        });\r\n}\r\n/**\r\n * Returns a list of changed ranges\r\n * based on the first and last state of all steps.\r\n */\r\nfunction getChangedRanges(transform) {\r\n    const { mapping, steps } = transform;\r\n    const changes = [];\r\n    mapping.maps.forEach((stepMap, index) => {\r\n        const ranges = [];\r\n        // This accounts for step changes where no range was actually altered\r\n        // e.g. when setting a mark, node attribute, etc.\r\n        // @ts-ignore\r\n        if (!stepMap.ranges.length) {\r\n            const { from, to } = steps[index];\r\n            if (from === undefined || to === undefined) {\r\n                return;\r\n            }\r\n            ranges.push({ from, to });\r\n        }\r\n        else {\r\n            stepMap.forEach((from, to) => {\r\n                ranges.push({ from, to });\r\n            });\r\n        }\r\n        ranges.forEach(({ from, to }) => {\r\n            const newStart = mapping.slice(index).map(from, -1);\r\n            const newEnd = mapping.slice(index).map(to);\r\n            const oldStart = mapping.invert().map(newStart, -1);\r\n            const oldEnd = mapping.invert().map(newEnd);\r\n            changes.push({\r\n                oldRange: {\r\n                    from: oldStart,\r\n                    to: oldEnd,\r\n                },\r\n                newRange: {\r\n                    from: newStart,\r\n                    to: newEnd,\r\n                },\r\n            });\r\n        });\r\n    });\r\n    return simplifyChangedRanges(changes);\r\n}\n\nfunction getDebugJSON(node, startOffset = 0) {\r\n    const isTopNode = node.type === node.type.schema.topNodeType;\r\n    const increment = isTopNode ? 0 : 1;\r\n    const from = startOffset;\r\n    const to = from + node.nodeSize;\r\n    const marks = node.marks.map(mark => {\r\n        const output = {\r\n            type: mark.type.name,\r\n        };\r\n        if (Object.keys(mark.attrs).length) {\r\n            output.attrs = { ...mark.attrs };\r\n        }\r\n        return output;\r\n    });\r\n    const attrs = { ...node.attrs };\r\n    const output = {\r\n        type: node.type.name,\r\n        from,\r\n        to,\r\n    };\r\n    if (Object.keys(attrs).length) {\r\n        output.attrs = attrs;\r\n    }\r\n    if (marks.length) {\r\n        output.marks = marks;\r\n    }\r\n    if (node.content.childCount) {\r\n        output.content = [];\r\n        node.forEach((child, offset) => {\r\n            var _a;\r\n            (_a = output.content) === null || _a === void 0 ? void 0 : _a.push(getDebugJSON(child, startOffset + offset + increment));\r\n        });\r\n    }\r\n    if (node.text) {\r\n        output.text = node.text;\r\n    }\r\n    return output;\r\n}\n\nfunction getMarksBetween(from, to, doc) {\r\n    const marks = [];\r\n    // get all inclusive marks on empty selection\r\n    if (from === to) {\r\n        doc\r\n            .resolve(from)\r\n            .marks()\r\n            .forEach(mark => {\r\n            const $pos = doc.resolve(from - 1);\r\n            const range = getMarkRange($pos, mark.type);\r\n            if (!range) {\r\n                return;\r\n            }\r\n            marks.push({\r\n                mark,\r\n                ...range,\r\n            });\r\n        });\r\n    }\r\n    else {\r\n        doc.nodesBetween(from, to, (node, pos) => {\r\n            marks.push(...node.marks.map(mark => ({\r\n                from: pos,\r\n                to: pos + node.nodeSize,\r\n                mark,\r\n            })));\r\n        });\r\n    }\r\n    return marks;\r\n}\n\nfunction isNodeSelection(value) {\r\n    return isObject(value) && value instanceof NodeSelection;\r\n}\n\nfunction posToDOMRect(view, from, to) {\r\n    const minPos = 0;\r\n    const maxPos = view.state.doc.content.size;\r\n    const resolvedFrom = minMax(from, minPos, maxPos);\r\n    const resolvedEnd = minMax(to, minPos, maxPos);\r\n    const start = view.coordsAtPos(resolvedFrom);\r\n    const end = view.coordsAtPos(resolvedEnd, -1);\r\n    const top = Math.min(start.top, end.top);\r\n    const bottom = Math.max(start.bottom, end.bottom);\r\n    const left = Math.min(start.left, end.left);\r\n    const right = Math.max(start.right, end.right);\r\n    const width = right - left;\r\n    const height = bottom - top;\r\n    const x = left;\r\n    const y = top;\r\n    const data = {\r\n        top,\r\n        bottom,\r\n        left,\r\n        right,\r\n        width,\r\n        height,\r\n        x,\r\n        y,\r\n    };\r\n    return {\r\n        ...data,\r\n        toJSON: () => data,\r\n    };\r\n}\n\n/**\r\n * Build an input rule that adds a mark when the\r\n * matched text is typed into it.\r\n */\r\nfunction markInputRule(config) {\r\n    return new InputRule({\r\n        find: config.find,\r\n        handler: ({ state, range, match }) => {\r\n            const attributes = callOrReturn(config.getAttributes, undefined, match);\r\n            if (attributes === false || attributes === null) {\r\n                return null;\r\n            }\r\n            const { tr } = state;\r\n            const captureGroup = match[match.length - 1];\r\n            const fullMatch = match[0];\r\n            let markEnd = range.to;\r\n            if (captureGroup) {\r\n                const startSpaces = fullMatch.search(/\\S/);\r\n                const textStart = range.from + fullMatch.indexOf(captureGroup);\r\n                const textEnd = textStart + captureGroup.length;\r\n                const excludedMarks = getMarksBetween(range.from, range.to, state.doc)\r\n                    .filter(item => {\r\n                    // @ts-ignore\r\n                    const excluded = item.mark.type.excluded;\r\n                    return excluded.find(type => type === config.type && type !== item.mark.type);\r\n                })\r\n                    .filter(item => item.to > textStart);\r\n                if (excludedMarks.length) {\r\n                    return null;\r\n                }\r\n                if (textEnd < range.to) {\r\n                    tr.delete(textEnd, range.to);\r\n                }\r\n                if (textStart > range.from) {\r\n                    tr.delete(range.from + startSpaces, textStart);\r\n                }\r\n                markEnd = range.from + startSpaces + captureGroup.length;\r\n                tr.addMark(range.from + startSpaces, markEnd, config.type.create(attributes || {}));\r\n                tr.removeStoredMark(config.type);\r\n            }\r\n        },\r\n    });\r\n}\n\n/**\r\n * Build an input rule that adds a node when the\r\n * matched text is typed into it.\r\n */\r\nfunction nodeInputRule(config) {\r\n    return new InputRule({\r\n        find: config.find,\r\n        handler: ({ state, range, match }) => {\r\n            const attributes = callOrReturn(config.getAttributes, undefined, match) || {};\r\n            const { tr } = state;\r\n            const start = range.from;\r\n            let end = range.to;\r\n            if (match[1]) {\r\n                const offset = match[0].lastIndexOf(match[1]);\r\n                let matchStart = start + offset;\r\n                if (matchStart > end) {\r\n                    matchStart = end;\r\n                }\r\n                else {\r\n                    end = matchStart + match[1].length;\r\n                }\r\n                // insert last typed character\r\n                const lastChar = match[0][match[0].length - 1];\r\n                tr.insertText(lastChar, start + match[0].length - 1);\r\n                // insert node from input rule\r\n                tr.replaceWith(matchStart, end, config.type.create(attributes));\r\n            }\r\n            else if (match[0]) {\r\n                tr.replaceWith(start, end, config.type.create(attributes));\r\n            }\r\n        },\r\n    });\r\n}\n\n/**\r\n * Build an input rule that changes the type of a textblock when the\r\n * matched text is typed into it. When using a regular expresion youll\r\n * probably want the regexp to start with `^`, so that the pattern can\r\n * only occur at the start of a textblock.\r\n */\r\nfunction textblockTypeInputRule(config) {\r\n    return new InputRule({\r\n        find: config.find,\r\n        handler: ({ state, range, match }) => {\r\n            const $start = state.doc.resolve(range.from);\r\n            const attributes = callOrReturn(config.getAttributes, undefined, match) || {};\r\n            if (!$start.node(-1).canReplaceWith($start.index(-1), $start.indexAfter(-1), config.type)) {\r\n                return null;\r\n            }\r\n            state.tr\r\n                .delete(range.from, range.to)\r\n                .setBlockType(range.from, range.from, config.type, attributes);\r\n        },\r\n    });\r\n}\n\n/**\r\n * Build an input rule that replaces text when the\r\n * matched text is typed into it.\r\n */\r\nfunction textInputRule(config) {\r\n    return new InputRule({\r\n        find: config.find,\r\n        handler: ({ state, range, match }) => {\r\n            let insert = config.replace;\r\n            let start = range.from;\r\n            const end = range.to;\r\n            if (match[1]) {\r\n                const offset = match[0].lastIndexOf(match[1]);\r\n                insert += match[0].slice(offset + match[1].length);\r\n                start += offset;\r\n                const cutOff = start - end;\r\n                if (cutOff > 0) {\r\n                    insert = match[0].slice(offset - cutOff, offset) + insert;\r\n                    start = end;\r\n                }\r\n            }\r\n            state.tr.insertText(insert, start, end);\r\n        },\r\n    });\r\n}\n\n/**\r\n * Build an input rule for automatically wrapping a textblock when a\r\n * given string is typed. When using a regular expresion youll\r\n * probably want the regexp to start with `^`, so that the pattern can\r\n * only occur at the start of a textblock.\r\n *\r\n * `type` is the type of node to wrap in.\r\n *\r\n * By default, if theres a node with the same type above the newly\r\n * wrapped node, the rule will try to join those\r\n * two nodes. You can pass a join predicate, which takes a regular\r\n * expression match and the node before the wrapped node, and can\r\n * return a boolean to indicate whether a join should happen.\r\n */\r\nfunction wrappingInputRule(config) {\r\n    return new InputRule({\r\n        find: config.find,\r\n        handler: ({ state, range, match }) => {\r\n            const attributes = callOrReturn(config.getAttributes, undefined, match) || {};\r\n            const tr = state.tr.delete(range.from, range.to);\r\n            const $start = tr.doc.resolve(range.from);\r\n            const blockRange = $start.blockRange();\r\n            const wrapping = blockRange && findWrapping(blockRange, config.type, attributes);\r\n            if (!wrapping) {\r\n                return null;\r\n            }\r\n            tr.wrap(blockRange, wrapping);\r\n            const before = tr.doc.resolve(range.from - 1).nodeBefore;\r\n            if (before\r\n                && before.type === config.type\r\n                && canJoin(tr.doc, range.from - 1)\r\n                && (!config.joinPredicate || config.joinPredicate(match, before))) {\r\n                tr.join(range.from - 1);\r\n            }\r\n        },\r\n    });\r\n}\n\nclass Mark {\r\n    constructor(config = {}) {\r\n        this.type = 'mark';\r\n        this.name = 'mark';\r\n        this.parent = null;\r\n        this.child = null;\r\n        this.config = {\r\n            name: this.name,\r\n            defaultOptions: {},\r\n        };\r\n        this.config = {\r\n            ...this.config,\r\n            ...config,\r\n        };\r\n        this.name = this.config.name;\r\n        if (config.defaultOptions) {\r\n            console.warn(`[tiptap warn]: BREAKING CHANGE: \"defaultOptions\" is deprecated. Please use \"addOptions\" instead. Found in extension: \"${this.name}\".`);\r\n        }\r\n        // TODO: remove `addOptions` fallback\r\n        this.options = this.config.defaultOptions;\r\n        if (this.config.addOptions) {\r\n            this.options = callOrReturn(getExtensionField(this, 'addOptions', {\r\n                name: this.name,\r\n            }));\r\n        }\r\n        this.storage = callOrReturn(getExtensionField(this, 'addStorage', {\r\n            name: this.name,\r\n            options: this.options,\r\n        })) || {};\r\n    }\r\n    static create(config = {}) {\r\n        return new Mark(config);\r\n    }\r\n    configure(options = {}) {\r\n        // return a new instance so we can use the same extension\r\n        // with different calls of `configure`\r\n        const extension = this.extend();\r\n        extension.options = mergeDeep(this.options, options);\r\n        extension.storage = callOrReturn(getExtensionField(extension, 'addStorage', {\r\n            name: extension.name,\r\n            options: extension.options,\r\n        }));\r\n        return extension;\r\n    }\r\n    extend(extendedConfig = {}) {\r\n        const extension = new Mark(extendedConfig);\r\n        extension.parent = this;\r\n        this.child = extension;\r\n        extension.name = extendedConfig.name\r\n            ? extendedConfig.name\r\n            : extension.parent.name;\r\n        if (extendedConfig.defaultOptions) {\r\n            console.warn(`[tiptap warn]: BREAKING CHANGE: \"defaultOptions\" is deprecated. Please use \"addOptions\" instead. Found in extension: \"${extension.name}\".`);\r\n        }\r\n        extension.options = callOrReturn(getExtensionField(extension, 'addOptions', {\r\n            name: extension.name,\r\n        }));\r\n        extension.storage = callOrReturn(getExtensionField(extension, 'addStorage', {\r\n            name: extension.name,\r\n            options: extension.options,\r\n        }));\r\n        return extension;\r\n    }\r\n}\n\nclass Node {\r\n    constructor(config = {}) {\r\n        this.type = 'node';\r\n        this.name = 'node';\r\n        this.parent = null;\r\n        this.child = null;\r\n        this.config = {\r\n            name: this.name,\r\n            defaultOptions: {},\r\n        };\r\n        this.config = {\r\n            ...this.config,\r\n            ...config,\r\n        };\r\n        this.name = this.config.name;\r\n        if (config.defaultOptions) {\r\n            console.warn(`[tiptap warn]: BREAKING CHANGE: \"defaultOptions\" is deprecated. Please use \"addOptions\" instead. Found in extension: \"${this.name}\".`);\r\n        }\r\n        // TODO: remove `addOptions` fallback\r\n        this.options = this.config.defaultOptions;\r\n        if (this.config.addOptions) {\r\n            this.options = callOrReturn(getExtensionField(this, 'addOptions', {\r\n                name: this.name,\r\n            }));\r\n        }\r\n        this.storage = callOrReturn(getExtensionField(this, 'addStorage', {\r\n            name: this.name,\r\n            options: this.options,\r\n        })) || {};\r\n    }\r\n    static create(config = {}) {\r\n        return new Node(config);\r\n    }\r\n    configure(options = {}) {\r\n        // return a new instance so we can use the same extension\r\n        // with different calls of `configure`\r\n        const extension = this.extend();\r\n        extension.options = mergeDeep(this.options, options);\r\n        extension.storage = callOrReturn(getExtensionField(extension, 'addStorage', {\r\n            name: extension.name,\r\n            options: extension.options,\r\n        }));\r\n        return extension;\r\n    }\r\n    extend(extendedConfig = {}) {\r\n        const extension = new Node(extendedConfig);\r\n        extension.parent = this;\r\n        this.child = extension;\r\n        extension.name = extendedConfig.name\r\n            ? extendedConfig.name\r\n            : extension.parent.name;\r\n        if (extendedConfig.defaultOptions) {\r\n            console.warn(`[tiptap warn]: BREAKING CHANGE: \"defaultOptions\" is deprecated. Please use \"addOptions\" instead. Found in extension: \"${extension.name}\".`);\r\n        }\r\n        extension.options = callOrReturn(getExtensionField(extension, 'addOptions', {\r\n            name: extension.name,\r\n        }));\r\n        extension.storage = callOrReturn(getExtensionField(extension, 'addStorage', {\r\n            name: extension.name,\r\n            options: extension.options,\r\n        }));\r\n        return extension;\r\n    }\r\n}\n\nclass NodeView {\r\n    constructor(component, props, options) {\r\n        this.isDragging = false;\r\n        this.component = component;\r\n        this.editor = props.editor;\r\n        this.options = {\r\n            stopEvent: null,\r\n            ignoreMutation: null,\r\n            ...options,\r\n        };\r\n        this.extension = props.extension;\r\n        this.node = props.node;\r\n        this.decorations = props.decorations;\r\n        this.getPos = props.getPos;\r\n        this.mount();\r\n    }\r\n    mount() {\r\n        // eslint-disable-next-line\r\n        return;\r\n    }\r\n    get dom() {\r\n        return this.editor.view.dom;\r\n    }\r\n    get contentDOM() {\r\n        return null;\r\n    }\r\n    onDragStart(event) {\r\n        var _a, _b, _c, _d, _e, _f, _g;\r\n        const { view } = this.editor;\r\n        const target = event.target;\r\n        // get the drag handle element\r\n        // `closest` is not available for text nodes so we may have to use its parent\r\n        const dragHandle = target.nodeType === 3\r\n            ? (_a = target.parentElement) === null || _a === void 0 ? void 0 : _a.closest('[data-drag-handle]')\r\n            : target.closest('[data-drag-handle]');\r\n        if (!this.dom\r\n            || ((_b = this.contentDOM) === null || _b === void 0 ? void 0 : _b.contains(target))\r\n            || !dragHandle) {\r\n            return;\r\n        }\r\n        let x = 0;\r\n        let y = 0;\r\n        // calculate offset for drag element if we use a different drag handle element\r\n        if (this.dom !== dragHandle) {\r\n            const domBox = this.dom.getBoundingClientRect();\r\n            const handleBox = dragHandle.getBoundingClientRect();\r\n            // In React, we have to go through nativeEvent to reach offsetX/offsetY.\r\n            const offsetX = (_c = event.offsetX) !== null && _c !== void 0 ? _c : (_d = event.nativeEvent) === null || _d === void 0 ? void 0 : _d.offsetX;\r\n            const offsetY = (_e = event.offsetY) !== null && _e !== void 0 ? _e : (_f = event.nativeEvent) === null || _f === void 0 ? void 0 : _f.offsetY;\r\n            x = handleBox.x - domBox.x + offsetX;\r\n            y = handleBox.y - domBox.y + offsetY;\r\n        }\r\n        (_g = event.dataTransfer) === null || _g === void 0 ? void 0 : _g.setDragImage(this.dom, x, y);\r\n        // we need to tell ProseMirror that we want to move the whole node\r\n        // so we create a NodeSelection\r\n        const selection = NodeSelection.create(view.state.doc, this.getPos());\r\n        const transaction = view.state.tr.setSelection(selection);\r\n        view.dispatch(transaction);\r\n    }\r\n    stopEvent(event) {\r\n        var _a;\r\n        if (!this.dom) {\r\n            return false;\r\n        }\r\n        if (typeof this.options.stopEvent === 'function') {\r\n            return this.options.stopEvent({ event });\r\n        }\r\n        const target = event.target;\r\n        const isInElement = this.dom.contains(target) && !((_a = this.contentDOM) === null || _a === void 0 ? void 0 : _a.contains(target));\r\n        // any event from child nodes should be handled by ProseMirror\r\n        if (!isInElement) {\r\n            return false;\r\n        }\r\n        const isDropEvent = event.type === 'drop';\r\n        const isInput = ['INPUT', 'BUTTON', 'SELECT', 'TEXTAREA'].includes(target.tagName)\r\n            || target.isContentEditable;\r\n        // any input event within node views should be ignored by ProseMirror\r\n        if (isInput && !isDropEvent) {\r\n            return true;\r\n        }\r\n        const { isEditable } = this.editor;\r\n        const { isDragging } = this;\r\n        const isDraggable = !!this.node.type.spec.draggable;\r\n        const isSelectable = NodeSelection.isSelectable(this.node);\r\n        const isCopyEvent = event.type === 'copy';\r\n        const isPasteEvent = event.type === 'paste';\r\n        const isCutEvent = event.type === 'cut';\r\n        const isClickEvent = event.type === 'mousedown';\r\n        const isDragEvent = event.type.startsWith('drag');\r\n        // ProseMirror tries to drag selectable nodes\r\n        // even if `draggable` is set to `false`\r\n        // this fix prevents that\r\n        if (!isDraggable && isSelectable && isDragEvent) {\r\n            event.preventDefault();\r\n        }\r\n        if (isDraggable && isDragEvent && !isDragging) {\r\n            event.preventDefault();\r\n            return false;\r\n        }\r\n        // we have to store that dragging started\r\n        if (isDraggable && isEditable && !isDragging && isClickEvent) {\r\n            const dragHandle = target.closest('[data-drag-handle]');\r\n            const isValidDragHandle = dragHandle\r\n                && (this.dom === dragHandle || (this.dom.contains(dragHandle)));\r\n            if (isValidDragHandle) {\r\n                this.isDragging = true;\r\n                document.addEventListener('dragend', () => {\r\n                    this.isDragging = false;\r\n                }, { once: true });\r\n                document.addEventListener('mouseup', () => {\r\n                    this.isDragging = false;\r\n                }, { once: true });\r\n            }\r\n        }\r\n        // these events are handled by prosemirror\r\n        if (isDragging\r\n            || isDropEvent\r\n            || isCopyEvent\r\n            || isPasteEvent\r\n            || isCutEvent\r\n            || (isClickEvent && isSelectable)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    ignoreMutation(mutation) {\r\n        if (!this.dom || !this.contentDOM) {\r\n            return true;\r\n        }\r\n        if (typeof this.options.ignoreMutation === 'function') {\r\n            return this.options.ignoreMutation({ mutation });\r\n        }\r\n        // a leaf/atom node is like a black box for ProseMirror\r\n        // and should be fully handled by the node view\r\n        if (this.node.isLeaf || this.node.isAtom) {\r\n            return true;\r\n        }\r\n        // ProseMirror should handle any selections\r\n        if (mutation.type === 'selection') {\r\n            return false;\r\n        }\r\n        // try to prevent a bug on iOS that will break node views on enter\r\n        // this is because ProseMirror cant preventDispatch on enter\r\n        // this will lead to a re-render of the node view on enter\r\n        // see: https://github.com/ueberdosis/tiptap/issues/1214\r\n        if (this.dom.contains(mutation.target)\r\n            && mutation.type === 'childList'\r\n            && isiOS()\r\n            && this.editor.isFocused) {\r\n            const changedNodes = [\r\n                ...Array.from(mutation.addedNodes),\r\n                ...Array.from(mutation.removedNodes),\r\n            ];\r\n            // well check if every changed node is contentEditable\r\n            // to make sure its probably mutated by ProseMirror\r\n            if (changedNodes.every(node => node.isContentEditable)) {\r\n                return false;\r\n            }\r\n        }\r\n        // we will allow mutation contentDOM with attributes\r\n        // so we can for example adding classes within our node view\r\n        if (this.contentDOM === mutation.target && mutation.type === 'attributes') {\r\n            return true;\r\n        }\r\n        // ProseMirror should handle any changes within contentDOM\r\n        if (this.contentDOM.contains(mutation.target)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    updateAttributes(attributes) {\r\n        this.editor.commands.command(({ tr }) => {\r\n            const pos = this.getPos();\r\n            tr.setNodeMarkup(pos, undefined, {\r\n                ...this.node.attrs,\r\n                ...attributes,\r\n            });\r\n            return true;\r\n        });\r\n    }\r\n    deleteNode() {\r\n        const from = this.getPos();\r\n        const to = from + this.node.nodeSize;\r\n        this.editor.commands.deleteRange({ from, to });\r\n    }\r\n}\n\n/**\r\n * Build an paste rule that adds a mark when the\r\n * matched text is pasted into it.\r\n */\r\nfunction markPasteRule(config) {\r\n    return new PasteRule({\r\n        find: config.find,\r\n        handler: ({ state, range, match }) => {\r\n            const attributes = callOrReturn(config.getAttributes, undefined, match);\r\n            if (attributes === false || attributes === null) {\r\n                return null;\r\n            }\r\n            const { tr } = state;\r\n            const captureGroup = match[match.length - 1];\r\n            const fullMatch = match[0];\r\n            let markEnd = range.to;\r\n            if (captureGroup) {\r\n                const startSpaces = fullMatch.search(/\\S/);\r\n                const textStart = range.from + fullMatch.indexOf(captureGroup);\r\n                const textEnd = textStart + captureGroup.length;\r\n                const excludedMarks = getMarksBetween(range.from, range.to, state.doc)\r\n                    .filter(item => {\r\n                    // @ts-ignore\r\n                    const excluded = item.mark.type.excluded;\r\n                    return excluded.find(type => type === config.type && type !== item.mark.type);\r\n                })\r\n                    .filter(item => item.to > textStart);\r\n                if (excludedMarks.length) {\r\n                    return null;\r\n                }\r\n                if (textEnd < range.to) {\r\n                    tr.delete(textEnd, range.to);\r\n                }\r\n                if (textStart > range.from) {\r\n                    tr.delete(range.from + startSpaces, textStart);\r\n                }\r\n                markEnd = range.from + startSpaces + captureGroup.length;\r\n                tr.addMark(range.from + startSpaces, markEnd, config.type.create(attributes || {}));\r\n                tr.removeStoredMark(config.type);\r\n            }\r\n        },\r\n    });\r\n}\n\n// source: https://stackoverflow.com/a/6969486\r\nfunction escapeForRegEx(string) {\r\n    return string.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\r\n}\n\n/**\r\n * Build an paste rule that adds a node when the\r\n * matched text is pasted into it.\r\n */\r\nfunction nodePasteRule(config) {\r\n    return new PasteRule({\r\n        find: config.find,\r\n        handler({ match, chain, range }) {\r\n            const attributes = callOrReturn(config.getAttributes, undefined, match);\r\n            if (attributes === false || attributes === null) {\r\n                return null;\r\n            }\r\n            if (match.input) {\r\n                chain()\r\n                    .deleteRange(range)\r\n                    .insertContent({\r\n                    type: config.type.name,\r\n                    attrs: attributes,\r\n                });\r\n            }\r\n        },\r\n    });\r\n}\n\n/**\r\n * Build an paste rule that replaces text when the\r\n * matched text is pasted into it.\r\n */\r\nfunction textPasteRule(config) {\r\n    return new PasteRule({\r\n        find: config.find,\r\n        handler: ({ state, range, match }) => {\r\n            let insert = config.replace;\r\n            let start = range.from;\r\n            const end = range.to;\r\n            if (match[1]) {\r\n                const offset = match[0].lastIndexOf(match[1]);\r\n                insert += match[0].slice(offset + match[1].length);\r\n                start += offset;\r\n                const cutOff = start - end;\r\n                if (cutOff > 0) {\r\n                    insert = match[0].slice(offset - cutOff, offset) + insert;\r\n                    start = end;\r\n                }\r\n            }\r\n            state.tr.insertText(insert, start, end);\r\n        },\r\n    });\r\n}\n\nclass Tracker {\r\n    constructor(transaction) {\r\n        this.transaction = transaction;\r\n        this.currentStep = this.transaction.steps.length;\r\n    }\r\n    map(position) {\r\n        let deleted = false;\r\n        const mappedPosition = this.transaction.steps\r\n            .slice(this.currentStep)\r\n            .reduce((newPosition, step) => {\r\n            const mapResult = step\r\n                .getMap()\r\n                .mapResult(newPosition);\r\n            if (mapResult.deleted) {\r\n                deleted = true;\r\n            }\r\n            return mapResult.pos;\r\n        }, position);\r\n        return {\r\n            position: mappedPosition,\r\n            deleted,\r\n        };\r\n    }\r\n}\n\nexport { CommandManager, Editor, Extension, InputRule, Mark, Node, NodeView, PasteRule, Tracker, callOrReturn, combineTransactionSteps, defaultBlockAt, escapeForRegEx, extensions, findChildren, findChildrenInRange, findParentNode, findParentNodeClosestToPos, generateHTML, generateJSON, generateText, getAttributes, getChangedRanges, getDebugJSON, getExtensionField, getHTMLFromFragment, getMarkAttributes, getMarkRange, getMarkType, getMarksBetween, getNodeAttributes, getNodeType, getSchema, getText, getTextBetween, getTextContentFromNodes, getTextSerializersFromSchema, inputRulesPlugin, isActive, isList, isMarkActive, isNodeActive, isNodeEmpty, isNodeSelection, isTextSelection, markInputRule, markPasteRule, mergeAttributes, nodeInputRule, nodePasteRule, pasteRulesPlugin, posToDOMRect, textInputRule, textPasteRule, textblockTypeInputRule, wrappingInputRule };\n//# sourceMappingURL=tiptap-core.esm.js.map\n","import { Node, mergeAttributes, wrappingInputRule } from '@tiptap/core';\n\nconst inputRegex = /^\\s*>\\s$/;\r\nconst Blockquote = Node.create({\r\n    name: 'blockquote',\r\n    addOptions() {\r\n        return {\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    content: 'block+',\r\n    group: 'block',\r\n    defining: true,\r\n    parseHTML() {\r\n        return [\r\n            { tag: 'blockquote' },\r\n        ];\r\n    },\r\n    renderHTML({ HTMLAttributes }) {\r\n        return ['blockquote', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setBlockquote: () => ({ commands }) => {\r\n                return commands.wrapIn(this.name);\r\n            },\r\n            toggleBlockquote: () => ({ commands }) => {\r\n                return commands.toggleWrap(this.name);\r\n            },\r\n            unsetBlockquote: () => ({ commands }) => {\r\n                return commands.lift(this.name);\r\n            },\r\n        };\r\n    },\r\n    addKeyboardShortcuts() {\r\n        return {\r\n            'Mod-Shift-b': () => this.editor.commands.toggleBlockquote(),\r\n        };\r\n    },\r\n    addInputRules() {\r\n        return [\r\n            wrappingInputRule({\r\n                find: inputRegex,\r\n                type: this.type,\r\n            }),\r\n        ];\r\n    },\r\n});\n\nexport { Blockquote, Blockquote as default, inputRegex };\n//# sourceMappingURL=tiptap-extension-blockquote.esm.js.map\n","import { Mark, mergeAttributes, markInputRule, markPasteRule } from '@tiptap/core';\n\nconst starInputRegex = /(?:^|\\s)((?:\\*\\*)((?:[^*]+))(?:\\*\\*))$/;\r\nconst starPasteRegex = /(?:^|\\s)((?:\\*\\*)((?:[^*]+))(?:\\*\\*))/g;\r\nconst underscoreInputRegex = /(?:^|\\s)((?:__)((?:[^__]+))(?:__))$/;\r\nconst underscorePasteRegex = /(?:^|\\s)((?:__)((?:[^__]+))(?:__))/g;\r\nconst Bold = Mark.create({\r\n    name: 'bold',\r\n    addOptions() {\r\n        return {\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    parseHTML() {\r\n        return [\r\n            {\r\n                tag: 'strong',\r\n            },\r\n            {\r\n                tag: 'b',\r\n                getAttrs: node => node.style.fontWeight !== 'normal' && null,\r\n            },\r\n            {\r\n                style: 'font-weight',\r\n                getAttrs: value => /^(bold(er)?|[5-9]\\d{2,})$/.test(value) && null,\r\n            },\r\n        ];\r\n    },\r\n    renderHTML({ HTMLAttributes }) {\r\n        return ['strong', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setBold: () => ({ commands }) => {\r\n                return commands.setMark(this.name);\r\n            },\r\n            toggleBold: () => ({ commands }) => {\r\n                return commands.toggleMark(this.name);\r\n            },\r\n            unsetBold: () => ({ commands }) => {\r\n                return commands.unsetMark(this.name);\r\n            },\r\n        };\r\n    },\r\n    addKeyboardShortcuts() {\r\n        return {\r\n            'Mod-b': () => this.editor.commands.toggleBold(),\r\n            'Mod-B': () => this.editor.commands.toggleBold(),\r\n        };\r\n    },\r\n    addInputRules() {\r\n        return [\r\n            markInputRule({\r\n                find: starInputRegex,\r\n                type: this.type,\r\n            }),\r\n            markInputRule({\r\n                find: underscoreInputRegex,\r\n                type: this.type,\r\n            }),\r\n        ];\r\n    },\r\n    addPasteRules() {\r\n        return [\r\n            markPasteRule({\r\n                find: starPasteRegex,\r\n                type: this.type,\r\n            }),\r\n            markPasteRule({\r\n                find: underscorePasteRegex,\r\n                type: this.type,\r\n            }),\r\n        ];\r\n    },\r\n});\n\nexport { Bold, Bold as default, starInputRegex, starPasteRegex, underscoreInputRegex, underscorePasteRegex };\n//# sourceMappingURL=tiptap-extension-bold.esm.js.map\n","import { Node, mergeAttributes, wrappingInputRule } from '@tiptap/core';\n\nconst inputRegex = /^\\s*([-+*])\\s$/;\r\nconst BulletList = Node.create({\r\n    name: 'bulletList',\r\n    addOptions() {\r\n        return {\r\n            itemTypeName: 'listItem',\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    group: 'block list',\r\n    content() {\r\n        return `${this.options.itemTypeName}+`;\r\n    },\r\n    parseHTML() {\r\n        return [\r\n            { tag: 'ul' },\r\n        ];\r\n    },\r\n    renderHTML({ HTMLAttributes }) {\r\n        return ['ul', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            toggleBulletList: () => ({ commands }) => {\r\n                return commands.toggleList(this.name, this.options.itemTypeName);\r\n            },\r\n        };\r\n    },\r\n    addKeyboardShortcuts() {\r\n        return {\r\n            'Mod-Shift-8': () => this.editor.commands.toggleBulletList(),\r\n        };\r\n    },\r\n    addInputRules() {\r\n        return [\r\n            wrappingInputRule({\r\n                find: inputRegex,\r\n                type: this.type,\r\n            }),\r\n        ];\r\n    },\r\n});\n\nexport { BulletList, BulletList as default, inputRegex };\n//# sourceMappingURL=tiptap-extension-bullet-list.esm.js.map\n","import { Mark, mergeAttributes, markInputRule, markPasteRule } from '@tiptap/core';\n\nconst inputRegex = /(?:^|\\s)((?:`)((?:[^`]+))(?:`))$/;\r\nconst pasteRegex = /(?:^|\\s)((?:`)((?:[^`]+))(?:`))/g;\r\nconst Code = Mark.create({\r\n    name: 'code',\r\n    addOptions() {\r\n        return {\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    excludes: '_',\r\n    code: true,\r\n    parseHTML() {\r\n        return [\r\n            { tag: 'code' },\r\n        ];\r\n    },\r\n    renderHTML({ HTMLAttributes }) {\r\n        return ['code', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setCode: () => ({ commands }) => {\r\n                return commands.setMark(this.name);\r\n            },\r\n            toggleCode: () => ({ commands }) => {\r\n                return commands.toggleMark(this.name);\r\n            },\r\n            unsetCode: () => ({ commands }) => {\r\n                return commands.unsetMark(this.name);\r\n            },\r\n        };\r\n    },\r\n    addKeyboardShortcuts() {\r\n        return {\r\n            'Mod-e': () => this.editor.commands.toggleCode(),\r\n        };\r\n    },\r\n    addInputRules() {\r\n        return [\r\n            markInputRule({\r\n                find: inputRegex,\r\n                type: this.type,\r\n            }),\r\n        ];\r\n    },\r\n    addPasteRules() {\r\n        return [\r\n            markPasteRule({\r\n                find: pasteRegex,\r\n                type: this.type,\r\n            }),\r\n        ];\r\n    },\r\n});\n\nexport { Code, Code as default, inputRegex, pasteRegex };\n//# sourceMappingURL=tiptap-extension-code.esm.js.map\n","import { Node, mergeAttributes, textblockTypeInputRule } from '@tiptap/core';\nimport { Plugin, PluginKey, TextSelection } from 'prosemirror-state';\n\nconst backtickInputRegex = /^```([a-z]+)?[\\s\\n]$/;\r\nconst tildeInputRegex = /^~~~([a-z]+)?[\\s\\n]$/;\r\nconst CodeBlock = Node.create({\r\n    name: 'codeBlock',\r\n    addOptions() {\r\n        return {\r\n            languageClassPrefix: 'language-',\r\n            exitOnTripleEnter: true,\r\n            exitOnArrowDown: true,\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    content: 'text*',\r\n    marks: '',\r\n    group: 'block',\r\n    code: true,\r\n    defining: true,\r\n    addAttributes() {\r\n        return {\r\n            language: {\r\n                default: null,\r\n                parseHTML: element => {\r\n                    var _a;\r\n                    const { languageClassPrefix } = this.options;\r\n                    const classNames = [...((_a = element.firstElementChild) === null || _a === void 0 ? void 0 : _a.classList) || []];\r\n                    const languages = classNames\r\n                        .filter(className => className.startsWith(languageClassPrefix))\r\n                        .map(className => className.replace(languageClassPrefix, ''));\r\n                    const language = languages[0];\r\n                    if (!language) {\r\n                        return null;\r\n                    }\r\n                    return language;\r\n                },\r\n                rendered: false,\r\n            },\r\n        };\r\n    },\r\n    parseHTML() {\r\n        return [\r\n            {\r\n                tag: 'pre',\r\n                preserveWhitespace: 'full',\r\n            },\r\n        ];\r\n    },\r\n    renderHTML({ node, HTMLAttributes }) {\r\n        return [\r\n            'pre',\r\n            mergeAttributes(this.options.HTMLAttributes, HTMLAttributes),\r\n            [\r\n                'code',\r\n                {\r\n                    class: node.attrs.language\r\n                        ? this.options.languageClassPrefix + node.attrs.language\r\n                        : null,\r\n                },\r\n                0,\r\n            ],\r\n        ];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setCodeBlock: attributes => ({ commands }) => {\r\n                return commands.setNode(this.name, attributes);\r\n            },\r\n            toggleCodeBlock: attributes => ({ commands }) => {\r\n                return commands.toggleNode(this.name, 'paragraph', attributes);\r\n            },\r\n        };\r\n    },\r\n    addKeyboardShortcuts() {\r\n        return {\r\n            'Mod-Alt-c': () => this.editor.commands.toggleCodeBlock(),\r\n            // remove code block when at start of document or code block is empty\r\n            Backspace: () => {\r\n                const { empty, $anchor } = this.editor.state.selection;\r\n                const isAtStart = $anchor.pos === 1;\r\n                if (!empty || $anchor.parent.type.name !== this.name) {\r\n                    return false;\r\n                }\r\n                if (isAtStart || !$anchor.parent.textContent.length) {\r\n                    return this.editor.commands.clearNodes();\r\n                }\r\n                return false;\r\n            },\r\n            // exit node on triple enter\r\n            Enter: ({ editor }) => {\r\n                if (!this.options.exitOnTripleEnter) {\r\n                    return false;\r\n                }\r\n                const { state } = editor;\r\n                const { selection } = state;\r\n                const { $from, empty } = selection;\r\n                if (!empty || $from.parent.type !== this.type) {\r\n                    return false;\r\n                }\r\n                const isAtEnd = $from.parentOffset === $from.parent.nodeSize - 2;\r\n                const endsWithDoubleNewline = $from.parent.textContent.endsWith('\\n\\n');\r\n                if (!isAtEnd || !endsWithDoubleNewline) {\r\n                    return false;\r\n                }\r\n                return editor\r\n                    .chain()\r\n                    .command(({ tr }) => {\r\n                    tr.delete($from.pos - 2, $from.pos);\r\n                    return true;\r\n                })\r\n                    .exitCode()\r\n                    .run();\r\n            },\r\n            // exit node on arrow down\r\n            ArrowDown: ({ editor }) => {\r\n                if (!this.options.exitOnArrowDown) {\r\n                    return false;\r\n                }\r\n                const { state } = editor;\r\n                const { selection, doc } = state;\r\n                const { $from, empty } = selection;\r\n                if (!empty || $from.parent.type !== this.type) {\r\n                    return false;\r\n                }\r\n                const isAtEnd = $from.parentOffset === $from.parent.nodeSize - 2;\r\n                if (!isAtEnd) {\r\n                    return false;\r\n                }\r\n                const after = $from.after();\r\n                if (after === undefined) {\r\n                    return false;\r\n                }\r\n                const nodeAfter = doc.nodeAt(after);\r\n                if (nodeAfter) {\r\n                    return false;\r\n                }\r\n                return editor.commands.exitCode();\r\n            },\r\n        };\r\n    },\r\n    addInputRules() {\r\n        return [\r\n            textblockTypeInputRule({\r\n                find: backtickInputRegex,\r\n                type: this.type,\r\n                getAttributes: match => ({\r\n                    language: match[1],\r\n                }),\r\n            }),\r\n            textblockTypeInputRule({\r\n                find: tildeInputRegex,\r\n                type: this.type,\r\n                getAttributes: match => ({\r\n                    language: match[1],\r\n                }),\r\n            }),\r\n        ];\r\n    },\r\n    addProseMirrorPlugins() {\r\n        return [\r\n            // this plugin creates a code block for pasted content from VS Code\r\n            // we can also detect the copied code language\r\n            new Plugin({\r\n                key: new PluginKey('codeBlockVSCodeHandler'),\r\n                props: {\r\n                    handlePaste: (view, event) => {\r\n                        if (!event.clipboardData) {\r\n                            return false;\r\n                        }\r\n                        // dont create a new code block within code blocks\r\n                        if (this.editor.isActive(this.type.name)) {\r\n                            return false;\r\n                        }\r\n                        const text = event.clipboardData.getData('text/plain');\r\n                        const vscode = event.clipboardData.getData('vscode-editor-data');\r\n                        const vscodeData = vscode\r\n                            ? JSON.parse(vscode)\r\n                            : undefined;\r\n                        const language = vscodeData === null || vscodeData === void 0 ? void 0 : vscodeData.mode;\r\n                        if (!text || !language) {\r\n                            return false;\r\n                        }\r\n                        const { tr } = view.state;\r\n                        // create an empty code block\r\n                        tr.replaceSelectionWith(this.type.create({ language }));\r\n                        // put cursor inside the newly created code block\r\n                        tr.setSelection(TextSelection.near(tr.doc.resolve(Math.max(0, tr.selection.from - 2))));\r\n                        // add text to code block\r\n                        // strip carriage return chars from text pasted as code\r\n                        // see: https://github.com/ProseMirror/prosemirror-view/commit/a50a6bcceb4ce52ac8fcc6162488d8875613aacd\r\n                        tr.insertText(text.replace(/\\r\\n?/g, '\\n'));\r\n                        // store meta information\r\n                        // this is useful for other plugins that depends on the paste event\r\n                        // like the paste rule plugin\r\n                        tr.setMeta('paste', true);\r\n                        view.dispatch(tr);\r\n                        return true;\r\n                    },\r\n                },\r\n            }),\r\n        ];\r\n    },\r\n});\n\nexport { CodeBlock, backtickInputRegex, CodeBlock as default, tildeInputRegex };\n//# sourceMappingURL=tiptap-extension-code-block.esm.js.map\n","import { Node } from '@tiptap/core';\n\nconst Document = Node.create({\r\n    name: 'doc',\r\n    topNode: true,\r\n    content: 'block+',\r\n});\n\nexport { Document, Document as default };\n//# sourceMappingURL=tiptap-extension-document.esm.js.map\n","import { Plugin } from 'prosemirror-state';\nimport { dropPoint } from 'prosemirror-transform';\n\n/**\nCreate a plugin that, when added to a ProseMirror instance,\ncauses a decoration to show up at the drop position when something\nis dragged over the editor.\n\nNodes may add a `disableDropCursor` property to their spec to\ncontrol the showing of a drop cursor inside them. This may be a\nboolean or a function, which will be called with a view and a\nposition, and should return a boolean.\n*/\nfunction dropCursor(options = {}) {\n    return new Plugin({\n        view(editorView) { return new DropCursorView(editorView, options); }\n    });\n}\nclass DropCursorView {\n    constructor(editorView, options) {\n        this.editorView = editorView;\n        this.cursorPos = null;\n        this.element = null;\n        this.timeout = -1;\n        this.width = options.width || 1;\n        this.color = options.color || \"black\";\n        this.class = options.class;\n        this.handlers = [\"dragover\", \"dragend\", \"drop\", \"dragleave\"].map(name => {\n            let handler = (e) => { this[name](e); };\n            editorView.dom.addEventListener(name, handler);\n            return { name, handler };\n        });\n    }\n    destroy() {\n        this.handlers.forEach(({ name, handler }) => this.editorView.dom.removeEventListener(name, handler));\n    }\n    update(editorView, prevState) {\n        if (this.cursorPos != null && prevState.doc != editorView.state.doc) {\n            if (this.cursorPos > editorView.state.doc.content.size)\n                this.setCursor(null);\n            else\n                this.updateOverlay();\n        }\n    }\n    setCursor(pos) {\n        if (pos == this.cursorPos)\n            return;\n        this.cursorPos = pos;\n        if (pos == null) {\n            this.element.parentNode.removeChild(this.element);\n            this.element = null;\n        }\n        else {\n            this.updateOverlay();\n        }\n    }\n    updateOverlay() {\n        let $pos = this.editorView.state.doc.resolve(this.cursorPos), rect;\n        if (!$pos.parent.inlineContent) {\n            let before = $pos.nodeBefore, after = $pos.nodeAfter;\n            if (before || after) {\n                let nodeRect = this.editorView.nodeDOM(this.cursorPos - (before ? before.nodeSize : 0))\n                    .getBoundingClientRect();\n                let top = before ? nodeRect.bottom : nodeRect.top;\n                if (before && after)\n                    top = (top + this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top) / 2;\n                rect = { left: nodeRect.left, right: nodeRect.right, top: top - this.width / 2, bottom: top + this.width / 2 };\n            }\n        }\n        if (!rect) {\n            let coords = this.editorView.coordsAtPos(this.cursorPos);\n            rect = { left: coords.left - this.width / 2, right: coords.left + this.width / 2, top: coords.top, bottom: coords.bottom };\n        }\n        let parent = this.editorView.dom.offsetParent;\n        if (!this.element) {\n            this.element = parent.appendChild(document.createElement(\"div\"));\n            if (this.class)\n                this.element.className = this.class;\n            this.element.style.cssText = \"position: absolute; z-index: 50; pointer-events: none; background-color: \" + this.color;\n        }\n        let parentLeft, parentTop;\n        if (!parent || parent == document.body && getComputedStyle(parent).position == \"static\") {\n            parentLeft = -pageXOffset;\n            parentTop = -pageYOffset;\n        }\n        else {\n            let rect = parent.getBoundingClientRect();\n            parentLeft = rect.left - parent.scrollLeft;\n            parentTop = rect.top - parent.scrollTop;\n        }\n        this.element.style.left = (rect.left - parentLeft) + \"px\";\n        this.element.style.top = (rect.top - parentTop) + \"px\";\n        this.element.style.width = (rect.right - rect.left) + \"px\";\n        this.element.style.height = (rect.bottom - rect.top) + \"px\";\n    }\n    scheduleRemoval(timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = setTimeout(() => this.setCursor(null), timeout);\n    }\n    dragover(event) {\n        if (!this.editorView.editable)\n            return;\n        let pos = this.editorView.posAtCoords({ left: event.clientX, top: event.clientY });\n        let node = pos && pos.inside >= 0 && this.editorView.state.doc.nodeAt(pos.inside);\n        let disableDropCursor = node && node.type.spec.disableDropCursor;\n        let disabled = typeof disableDropCursor == \"function\" ? disableDropCursor(this.editorView, pos) : disableDropCursor;\n        if (pos && !disabled) {\n            let target = pos.pos;\n            if (this.editorView.dragging && this.editorView.dragging.slice) {\n                target = dropPoint(this.editorView.state.doc, target, this.editorView.dragging.slice);\n                if (target == null)\n                    return this.setCursor(null);\n            }\n            this.setCursor(target);\n            this.scheduleRemoval(5000);\n        }\n    }\n    dragend() {\n        this.scheduleRemoval(20);\n    }\n    drop() {\n        this.scheduleRemoval(20);\n    }\n    dragleave(event) {\n        if (event.target == this.editorView.dom || !this.editorView.dom.contains(event.relatedTarget))\n            this.setCursor(null);\n    }\n}\n\nexport { dropCursor };\n","import { Extension } from '@tiptap/core';\nimport { dropCursor } from 'prosemirror-dropcursor';\n\nconst Dropcursor = Extension.create({\r\n    name: 'dropCursor',\r\n    addOptions() {\r\n        return {\r\n            color: 'currentColor',\r\n            width: 1,\r\n            class: undefined,\r\n        };\r\n    },\r\n    addProseMirrorPlugins() {\r\n        return [\r\n            dropCursor(this.options),\r\n        ];\r\n    },\r\n});\n\nexport { Dropcursor, Dropcursor as default };\n//# sourceMappingURL=tiptap-extension-dropcursor.esm.js.map\n","import { TextSelection, NodeSelection, Selection, AllSelection } from 'prosemirror-state';\nimport { DOMSerializer, Fragment, Mark, Slice, DOMParser } from 'prosemirror-model';\nimport { dropPoint } from 'prosemirror-transform';\n\nconst nav = typeof navigator != \"undefined\" ? navigator : null;\nconst doc = typeof document != \"undefined\" ? document : null;\nconst agent = (nav && nav.userAgent) || \"\";\nconst ie_edge = /Edge\\/(\\d+)/.exec(agent);\nconst ie_upto10 = /MSIE \\d/.exec(agent);\nconst ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(agent);\nconst ie = !!(ie_upto10 || ie_11up || ie_edge);\nconst ie_version = ie_upto10 ? document.documentMode : ie_11up ? +ie_11up[1] : ie_edge ? +ie_edge[1] : 0;\nconst gecko = !ie && /gecko\\/(\\d+)/i.test(agent);\ngecko && +(/Firefox\\/(\\d+)/.exec(agent) || [0, 0])[1];\nconst _chrome = !ie && /Chrome\\/(\\d+)/.exec(agent);\nconst chrome = !!_chrome;\nconst chrome_version = _chrome ? +_chrome[1] : 0;\nconst safari = !ie && !!nav && /Apple Computer/.test(nav.vendor);\n// Is true for both iOS and iPadOS for convenience\nconst ios = safari && (/Mobile\\/\\w+/.test(agent) || !!nav && nav.maxTouchPoints > 2);\nconst mac = ios || (nav ? /Mac/.test(nav.platform) : false);\nconst android = /Android \\d/.test(agent);\nconst webkit = !!doc && \"webkitFontSmoothing\" in doc.documentElement.style;\nconst webkit_version = webkit ? +(/\\bAppleWebKit\\/(\\d+)/.exec(navigator.userAgent) || [0, 0])[1] : 0;\n\nconst domIndex = function (node) {\n    for (var index = 0;; index++) {\n        node = node.previousSibling;\n        if (!node)\n            return index;\n    }\n};\nconst parentNode = function (node) {\n    let parent = node.assignedSlot || node.parentNode;\n    return parent && parent.nodeType == 11 ? parent.host : parent;\n};\nlet reusedRange = null;\n// Note that this will always return the same range, because DOM range\n// objects are every expensive, and keep slowing down subsequent DOM\n// updates, for some reason.\nconst textRange = function (node, from, to) {\n    let range = reusedRange || (reusedRange = document.createRange());\n    range.setEnd(node, to == null ? node.nodeValue.length : to);\n    range.setStart(node, from || 0);\n    return range;\n};\n// Scans forward and backward through DOM positions equivalent to the\n// given one to see if the two are in the same place (i.e. after a\n// text node vs at the end of that text node)\nconst isEquivalentPosition = function (node, off, targetNode, targetOff) {\n    return targetNode && (scanFor(node, off, targetNode, targetOff, -1) ||\n        scanFor(node, off, targetNode, targetOff, 1));\n};\nconst atomElements = /^(img|br|input|textarea|hr)$/i;\nfunction scanFor(node, off, targetNode, targetOff, dir) {\n    for (;;) {\n        if (node == targetNode && off == targetOff)\n            return true;\n        if (off == (dir < 0 ? 0 : nodeSize(node))) {\n            let parent = node.parentNode;\n            if (!parent || parent.nodeType != 1 || hasBlockDesc(node) || atomElements.test(node.nodeName) ||\n                node.contentEditable == \"false\")\n                return false;\n            off = domIndex(node) + (dir < 0 ? 0 : 1);\n            node = parent;\n        }\n        else if (node.nodeType == 1) {\n            node = node.childNodes[off + (dir < 0 ? -1 : 0)];\n            if (node.contentEditable == \"false\")\n                return false;\n            off = dir < 0 ? nodeSize(node) : 0;\n        }\n        else {\n            return false;\n        }\n    }\n}\nfunction nodeSize(node) {\n    return node.nodeType == 3 ? node.nodeValue.length : node.childNodes.length;\n}\nfunction isOnEdge(node, offset, parent) {\n    for (let atStart = offset == 0, atEnd = offset == nodeSize(node); atStart || atEnd;) {\n        if (node == parent)\n            return true;\n        let index = domIndex(node);\n        node = node.parentNode;\n        if (!node)\n            return false;\n        atStart = atStart && index == 0;\n        atEnd = atEnd && index == nodeSize(node);\n    }\n}\nfunction hasBlockDesc(dom) {\n    let desc;\n    for (let cur = dom; cur; cur = cur.parentNode)\n        if (desc = cur.pmViewDesc)\n            break;\n    return desc && desc.node && desc.node.isBlock && (desc.dom == dom || desc.contentDOM == dom);\n}\n// Work around Chrome issue https://bugs.chromium.org/p/chromium/issues/detail?id=447523\n// (isCollapsed inappropriately returns true in shadow dom)\nconst selectionCollapsed = function (domSel) {\n    let collapsed = domSel.isCollapsed;\n    if (collapsed && chrome && domSel.rangeCount && !domSel.getRangeAt(0).collapsed)\n        collapsed = false;\n    return collapsed;\n};\nfunction keyEvent(keyCode, key) {\n    let event = document.createEvent(\"Event\");\n    event.initEvent(\"keydown\", true, true);\n    event.keyCode = keyCode;\n    event.key = event.code = key;\n    return event;\n}\n\nfunction windowRect(doc) {\n    return { left: 0, right: doc.documentElement.clientWidth,\n        top: 0, bottom: doc.documentElement.clientHeight };\n}\nfunction getSide(value, side) {\n    return typeof value == \"number\" ? value : value[side];\n}\nfunction clientRect(node) {\n    let rect = node.getBoundingClientRect();\n    // Adjust for elements with style \"transform: scale()\"\n    let scaleX = (rect.width / node.offsetWidth) || 1;\n    let scaleY = (rect.height / node.offsetHeight) || 1;\n    // Make sure scrollbar width isn't included in the rectangle\n    return { left: rect.left, right: rect.left + node.clientWidth * scaleX,\n        top: rect.top, bottom: rect.top + node.clientHeight * scaleY };\n}\nfunction scrollRectIntoView(view, rect, startDOM) {\n    let scrollThreshold = view.someProp(\"scrollThreshold\") || 0, scrollMargin = view.someProp(\"scrollMargin\") || 5;\n    let doc = view.dom.ownerDocument;\n    for (let parent = startDOM || view.dom;; parent = parentNode(parent)) {\n        if (!parent)\n            break;\n        if (parent.nodeType != 1)\n            continue;\n        let elt = parent;\n        let atTop = elt == doc.body;\n        let bounding = atTop ? windowRect(doc) : clientRect(elt);\n        let moveX = 0, moveY = 0;\n        if (rect.top < bounding.top + getSide(scrollThreshold, \"top\"))\n            moveY = -(bounding.top - rect.top + getSide(scrollMargin, \"top\"));\n        else if (rect.bottom > bounding.bottom - getSide(scrollThreshold, \"bottom\"))\n            moveY = rect.bottom - bounding.bottom + getSide(scrollMargin, \"bottom\");\n        if (rect.left < bounding.left + getSide(scrollThreshold, \"left\"))\n            moveX = -(bounding.left - rect.left + getSide(scrollMargin, \"left\"));\n        else if (rect.right > bounding.right - getSide(scrollThreshold, \"right\"))\n            moveX = rect.right - bounding.right + getSide(scrollMargin, \"right\");\n        if (moveX || moveY) {\n            if (atTop) {\n                doc.defaultView.scrollBy(moveX, moveY);\n            }\n            else {\n                let startX = elt.scrollLeft, startY = elt.scrollTop;\n                if (moveY)\n                    elt.scrollTop += moveY;\n                if (moveX)\n                    elt.scrollLeft += moveX;\n                let dX = elt.scrollLeft - startX, dY = elt.scrollTop - startY;\n                rect = { left: rect.left - dX, top: rect.top - dY, right: rect.right - dX, bottom: rect.bottom - dY };\n            }\n        }\n        if (atTop)\n            break;\n    }\n}\n// Store the scroll position of the editor's parent nodes, along with\n// the top position of an element near the top of the editor, which\n// will be used to make sure the visible viewport remains stable even\n// when the size of the content above changes.\nfunction storeScrollPos(view) {\n    let rect = view.dom.getBoundingClientRect(), startY = Math.max(0, rect.top);\n    let refDOM, refTop;\n    for (let x = (rect.left + rect.right) / 2, y = startY + 1; y < Math.min(innerHeight, rect.bottom); y += 5) {\n        let dom = view.root.elementFromPoint(x, y);\n        if (!dom || dom == view.dom || !view.dom.contains(dom))\n            continue;\n        let localRect = dom.getBoundingClientRect();\n        if (localRect.top >= startY - 20) {\n            refDOM = dom;\n            refTop = localRect.top;\n            break;\n        }\n    }\n    return { refDOM: refDOM, refTop: refTop, stack: scrollStack(view.dom) };\n}\nfunction scrollStack(dom) {\n    let stack = [], doc = dom.ownerDocument;\n    for (let cur = dom; cur; cur = parentNode(cur)) {\n        stack.push({ dom: cur, top: cur.scrollTop, left: cur.scrollLeft });\n        if (dom == doc)\n            break;\n    }\n    return stack;\n}\n// Reset the scroll position of the editor's parent nodes to that what\n// it was before, when storeScrollPos was called.\nfunction resetScrollPos({ refDOM, refTop, stack }) {\n    let newRefTop = refDOM ? refDOM.getBoundingClientRect().top : 0;\n    restoreScrollStack(stack, newRefTop == 0 ? 0 : newRefTop - refTop);\n}\nfunction restoreScrollStack(stack, dTop) {\n    for (let i = 0; i < stack.length; i++) {\n        let { dom, top, left } = stack[i];\n        if (dom.scrollTop != top + dTop)\n            dom.scrollTop = top + dTop;\n        if (dom.scrollLeft != left)\n            dom.scrollLeft = left;\n    }\n}\nlet preventScrollSupported = null;\n// Feature-detects support for .focus({preventScroll: true}), and uses\n// a fallback kludge when not supported.\nfunction focusPreventScroll(dom) {\n    if (dom.setActive)\n        return dom.setActive(); // in IE\n    if (preventScrollSupported)\n        return dom.focus(preventScrollSupported);\n    let stored = scrollStack(dom);\n    dom.focus(preventScrollSupported == null ? {\n        get preventScroll() {\n            preventScrollSupported = { preventScroll: true };\n            return true;\n        }\n    } : undefined);\n    if (!preventScrollSupported) {\n        preventScrollSupported = false;\n        restoreScrollStack(stored, 0);\n    }\n}\nfunction findOffsetInNode(node, coords) {\n    let closest, dxClosest = 2e8, coordsClosest, offset = 0;\n    let rowBot = coords.top, rowTop = coords.top;\n    for (let child = node.firstChild, childIndex = 0; child; child = child.nextSibling, childIndex++) {\n        let rects;\n        if (child.nodeType == 1)\n            rects = child.getClientRects();\n        else if (child.nodeType == 3)\n            rects = textRange(child).getClientRects();\n        else\n            continue;\n        for (let i = 0; i < rects.length; i++) {\n            let rect = rects[i];\n            if (rect.top <= rowBot && rect.bottom >= rowTop) {\n                rowBot = Math.max(rect.bottom, rowBot);\n                rowTop = Math.min(rect.top, rowTop);\n                let dx = rect.left > coords.left ? rect.left - coords.left\n                    : rect.right < coords.left ? coords.left - rect.right : 0;\n                if (dx < dxClosest) {\n                    closest = child;\n                    dxClosest = dx;\n                    coordsClosest = dx && closest.nodeType == 3 ? {\n                        left: rect.right < coords.left ? rect.right : rect.left,\n                        top: coords.top\n                    } : coords;\n                    if (child.nodeType == 1 && dx)\n                        offset = childIndex + (coords.left >= (rect.left + rect.right) / 2 ? 1 : 0);\n                    continue;\n                }\n            }\n            if (!closest && (coords.left >= rect.right && coords.top >= rect.top ||\n                coords.left >= rect.left && coords.top >= rect.bottom))\n                offset = childIndex + 1;\n        }\n    }\n    if (closest && closest.nodeType == 3)\n        return findOffsetInText(closest, coordsClosest);\n    if (!closest || (dxClosest && closest.nodeType == 1))\n        return { node, offset };\n    return findOffsetInNode(closest, coordsClosest);\n}\nfunction findOffsetInText(node, coords) {\n    let len = node.nodeValue.length;\n    let range = document.createRange();\n    for (let i = 0; i < len; i++) {\n        range.setEnd(node, i + 1);\n        range.setStart(node, i);\n        let rect = singleRect(range, 1);\n        if (rect.top == rect.bottom)\n            continue;\n        if (inRect(coords, rect))\n            return { node, offset: i + (coords.left >= (rect.left + rect.right) / 2 ? 1 : 0) };\n    }\n    return { node, offset: 0 };\n}\nfunction inRect(coords, rect) {\n    return coords.left >= rect.left - 1 && coords.left <= rect.right + 1 &&\n        coords.top >= rect.top - 1 && coords.top <= rect.bottom + 1;\n}\nfunction targetKludge(dom, coords) {\n    let parent = dom.parentNode;\n    if (parent && /^li$/i.test(parent.nodeName) && coords.left < dom.getBoundingClientRect().left)\n        return parent;\n    return dom;\n}\nfunction posFromElement(view, elt, coords) {\n    let { node, offset } = findOffsetInNode(elt, coords), bias = -1;\n    if (node.nodeType == 1 && !node.firstChild) {\n        let rect = node.getBoundingClientRect();\n        bias = rect.left != rect.right && coords.left > (rect.left + rect.right) / 2 ? 1 : -1;\n    }\n    return view.docView.posFromDOM(node, offset, bias);\n}\nfunction posFromCaret(view, node, offset, coords) {\n    // Browser (in caretPosition/RangeFromPoint) will agressively\n    // normalize towards nearby inline nodes. Since we are interested in\n    // positions between block nodes too, we first walk up the hierarchy\n    // of nodes to see if there are block nodes that the coordinates\n    // fall outside of. If so, we take the position before/after that\n    // block. If not, we call `posFromDOM` on the raw node/offset.\n    let outside = -1;\n    for (let cur = node;;) {\n        if (cur == view.dom)\n            break;\n        let desc = view.docView.nearestDesc(cur, true);\n        if (!desc)\n            return null;\n        if (desc.node.isBlock && desc.parent) {\n            let rect = desc.dom.getBoundingClientRect();\n            if (rect.left > coords.left || rect.top > coords.top)\n                outside = desc.posBefore;\n            else if (rect.right < coords.left || rect.bottom < coords.top)\n                outside = desc.posAfter;\n            else\n                break;\n        }\n        cur = desc.dom.parentNode;\n    }\n    return outside > -1 ? outside : view.docView.posFromDOM(node, offset, 1);\n}\nfunction elementFromPoint(element, coords, box) {\n    let len = element.childNodes.length;\n    if (len && box.top < box.bottom) {\n        for (let startI = Math.max(0, Math.min(len - 1, Math.floor(len * (coords.top - box.top) / (box.bottom - box.top)) - 2)), i = startI;;) {\n            let child = element.childNodes[i];\n            if (child.nodeType == 1) {\n                let rects = child.getClientRects();\n                for (let j = 0; j < rects.length; j++) {\n                    let rect = rects[j];\n                    if (inRect(coords, rect))\n                        return elementFromPoint(child, coords, rect);\n                }\n            }\n            if ((i = (i + 1) % len) == startI)\n                break;\n        }\n    }\n    return element;\n}\n// Given an x,y position on the editor, get the position in the document.\nfunction posAtCoords(view, coords) {\n    let doc = view.dom.ownerDocument, node, offset = 0;\n    if (doc.caretPositionFromPoint) {\n        try { // Firefox throws for this call in hard-to-predict circumstances (#994)\n            let pos = doc.caretPositionFromPoint(coords.left, coords.top);\n            if (pos)\n                ({ offsetNode: node, offset } = pos);\n        }\n        catch (_) { }\n    }\n    if (!node && doc.caretRangeFromPoint) {\n        let range = doc.caretRangeFromPoint(coords.left, coords.top);\n        if (range)\n            ({ startContainer: node, startOffset: offset } = range);\n    }\n    let elt = (view.root.elementFromPoint ? view.root : doc)\n        .elementFromPoint(coords.left, coords.top);\n    let pos;\n    if (!elt || !view.dom.contains(elt.nodeType != 1 ? elt.parentNode : elt)) {\n        let box = view.dom.getBoundingClientRect();\n        if (!inRect(coords, box))\n            return null;\n        elt = elementFromPoint(view.dom, coords, box);\n        if (!elt)\n            return null;\n    }\n    // Safari's caretRangeFromPoint returns nonsense when on a draggable element\n    if (safari) {\n        for (let p = elt; node && p; p = parentNode(p))\n            if (p.draggable)\n                node = undefined;\n    }\n    elt = targetKludge(elt, coords);\n    if (node) {\n        if (gecko && node.nodeType == 1) {\n            // Firefox will sometimes return offsets into <input> nodes, which\n            // have no actual children, from caretPositionFromPoint (#953)\n            offset = Math.min(offset, node.childNodes.length);\n            // It'll also move the returned position before image nodes,\n            // even if those are behind it.\n            if (offset < node.childNodes.length) {\n                let next = node.childNodes[offset], box;\n                if (next.nodeName == \"IMG\" && (box = next.getBoundingClientRect()).right <= coords.left &&\n                    box.bottom > coords.top)\n                    offset++;\n            }\n        }\n        // Suspiciously specific kludge to work around caret*FromPoint\n        // never returning a position at the end of the document\n        if (node == view.dom && offset == node.childNodes.length - 1 && node.lastChild.nodeType == 1 &&\n            coords.top > node.lastChild.getBoundingClientRect().bottom)\n            pos = view.state.doc.content.size;\n        // Ignore positions directly after a BR, since caret*FromPoint\n        // 'round up' positions that would be more accurately placed\n        // before the BR node.\n        else if (offset == 0 || node.nodeType != 1 || node.childNodes[offset - 1].nodeName != \"BR\")\n            pos = posFromCaret(view, node, offset, coords);\n    }\n    if (pos == null)\n        pos = posFromElement(view, elt, coords);\n    let desc = view.docView.nearestDesc(elt, true);\n    return { pos, inside: desc ? desc.posAtStart - desc.border : -1 };\n}\nfunction singleRect(target, bias) {\n    let rects = target.getClientRects();\n    return !rects.length ? target.getBoundingClientRect() : rects[bias < 0 ? 0 : rects.length - 1];\n}\nconst BIDI = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n// Given a position in the document model, get a bounding box of the\n// character at that position, relative to the window.\nfunction coordsAtPos(view, pos, side) {\n    let { node, offset, atom } = view.docView.domFromPos(pos, side < 0 ? -1 : 1);\n    let supportEmptyRange = webkit || gecko;\n    if (node.nodeType == 3) {\n        // These browsers support querying empty text ranges. Prefer that in\n        // bidi context or when at the end of a node.\n        if (supportEmptyRange && (BIDI.test(node.nodeValue) || (side < 0 ? !offset : offset == node.nodeValue.length))) {\n            let rect = singleRect(textRange(node, offset, offset), side);\n            // Firefox returns bad results (the position before the space)\n            // when querying a position directly after line-broken\n            // whitespace. Detect this situation and and kludge around it\n            if (gecko && offset && /\\s/.test(node.nodeValue[offset - 1]) && offset < node.nodeValue.length) {\n                let rectBefore = singleRect(textRange(node, offset - 1, offset - 1), -1);\n                if (rectBefore.top == rect.top) {\n                    let rectAfter = singleRect(textRange(node, offset, offset + 1), -1);\n                    if (rectAfter.top != rect.top)\n                        return flattenV(rectAfter, rectAfter.left < rectBefore.left);\n                }\n            }\n            return rect;\n        }\n        else {\n            let from = offset, to = offset, takeSide = side < 0 ? 1 : -1;\n            if (side < 0 && !offset) {\n                to++;\n                takeSide = -1;\n            }\n            else if (side >= 0 && offset == node.nodeValue.length) {\n                from--;\n                takeSide = 1;\n            }\n            else if (side < 0) {\n                from--;\n            }\n            else {\n                to++;\n            }\n            return flattenV(singleRect(textRange(node, from, to), takeSide), takeSide < 0);\n        }\n    }\n    let $dom = view.state.doc.resolve(pos - (atom || 0));\n    // Return a horizontal line in block context\n    if (!$dom.parent.inlineContent) {\n        if (atom == null && offset && (side < 0 || offset == nodeSize(node))) {\n            let before = node.childNodes[offset - 1];\n            if (before.nodeType == 1)\n                return flattenH(before.getBoundingClientRect(), false);\n        }\n        if (atom == null && offset < nodeSize(node)) {\n            let after = node.childNodes[offset];\n            if (after.nodeType == 1)\n                return flattenH(after.getBoundingClientRect(), true);\n        }\n        return flattenH(node.getBoundingClientRect(), side >= 0);\n    }\n    // Inline, not in text node (this is not Bidi-safe)\n    if (atom == null && offset && (side < 0 || offset == nodeSize(node))) {\n        let before = node.childNodes[offset - 1];\n        let target = before.nodeType == 3 ? textRange(before, nodeSize(before) - (supportEmptyRange ? 0 : 1))\n            // BR nodes tend to only return the rectangle before them.\n            // Only use them if they are the last element in their parent\n            : before.nodeType == 1 && (before.nodeName != \"BR\" || !before.nextSibling) ? before : null;\n        if (target)\n            return flattenV(singleRect(target, 1), false);\n    }\n    if (atom == null && offset < nodeSize(node)) {\n        let after = node.childNodes[offset];\n        while (after.pmViewDesc && after.pmViewDesc.ignoreForCoords)\n            after = after.nextSibling;\n        let target = !after ? null : after.nodeType == 3 ? textRange(after, 0, (supportEmptyRange ? 0 : 1))\n            : after.nodeType == 1 ? after : null;\n        if (target)\n            return flattenV(singleRect(target, -1), true);\n    }\n    // All else failed, just try to get a rectangle for the target node\n    return flattenV(singleRect(node.nodeType == 3 ? textRange(node) : node, -side), side >= 0);\n}\nfunction flattenV(rect, left) {\n    if (rect.width == 0)\n        return rect;\n    let x = left ? rect.left : rect.right;\n    return { top: rect.top, bottom: rect.bottom, left: x, right: x };\n}\nfunction flattenH(rect, top) {\n    if (rect.height == 0)\n        return rect;\n    let y = top ? rect.top : rect.bottom;\n    return { top: y, bottom: y, left: rect.left, right: rect.right };\n}\nfunction withFlushedState(view, state, f) {\n    let viewState = view.state, active = view.root.activeElement;\n    if (viewState != state)\n        view.updateState(state);\n    if (active != view.dom)\n        view.focus();\n    try {\n        return f();\n    }\n    finally {\n        if (viewState != state)\n            view.updateState(viewState);\n        if (active != view.dom && active)\n            active.focus();\n    }\n}\n// Whether vertical position motion in a given direction\n// from a position would leave a text block.\nfunction endOfTextblockVertical(view, state, dir) {\n    let sel = state.selection;\n    let $pos = dir == \"up\" ? sel.$from : sel.$to;\n    return withFlushedState(view, state, () => {\n        let { node: dom } = view.docView.domFromPos($pos.pos, dir == \"up\" ? -1 : 1);\n        for (;;) {\n            let nearest = view.docView.nearestDesc(dom, true);\n            if (!nearest)\n                break;\n            if (nearest.node.isBlock) {\n                dom = nearest.dom;\n                break;\n            }\n            dom = nearest.dom.parentNode;\n        }\n        let coords = coordsAtPos(view, $pos.pos, 1);\n        for (let child = dom.firstChild; child; child = child.nextSibling) {\n            let boxes;\n            if (child.nodeType == 1)\n                boxes = child.getClientRects();\n            else if (child.nodeType == 3)\n                boxes = textRange(child, 0, child.nodeValue.length).getClientRects();\n            else\n                continue;\n            for (let i = 0; i < boxes.length; i++) {\n                let box = boxes[i];\n                if (box.bottom > box.top + 1 &&\n                    (dir == \"up\" ? coords.top - box.top > (box.bottom - coords.top) * 2\n                        : box.bottom - coords.bottom > (coords.bottom - box.top) * 2))\n                    return false;\n            }\n        }\n        return true;\n    });\n}\nconst maybeRTL = /[\\u0590-\\u08ac]/;\nfunction endOfTextblockHorizontal(view, state, dir) {\n    let { $head } = state.selection;\n    if (!$head.parent.isTextblock)\n        return false;\n    let offset = $head.parentOffset, atStart = !offset, atEnd = offset == $head.parent.content.size;\n    let sel = view.domSelection();\n    // If the textblock is all LTR, or the browser doesn't support\n    // Selection.modify (Edge), fall back to a primitive approach\n    if (!maybeRTL.test($head.parent.textContent) || !sel.modify)\n        return dir == \"left\" || dir == \"backward\" ? atStart : atEnd;\n    return withFlushedState(view, state, () => {\n        // This is a huge hack, but appears to be the best we can\n        // currently do: use `Selection.modify` to move the selection by\n        // one character, and see if that moves the cursor out of the\n        // textblock (or doesn't move it at all, when at the start/end of\n        // the document).\n        let oldRange = sel.getRangeAt(0), oldNode = sel.focusNode, oldOff = sel.focusOffset;\n        let oldBidiLevel = sel.caretBidiLevel // Only for Firefox\n        ;\n        sel.modify(\"move\", dir, \"character\");\n        let parentDOM = $head.depth ? view.docView.domAfterPos($head.before()) : view.dom;\n        let result = !parentDOM.contains(sel.focusNode.nodeType == 1 ? sel.focusNode : sel.focusNode.parentNode) ||\n            (oldNode == sel.focusNode && oldOff == sel.focusOffset);\n        // Restore the previous selection\n        sel.removeAllRanges();\n        sel.addRange(oldRange);\n        if (oldBidiLevel != null)\n            sel.caretBidiLevel = oldBidiLevel;\n        return result;\n    });\n}\nlet cachedState = null;\nlet cachedDir = null;\nlet cachedResult = false;\nfunction endOfTextblock(view, state, dir) {\n    if (cachedState == state && cachedDir == dir)\n        return cachedResult;\n    cachedState = state;\n    cachedDir = dir;\n    return cachedResult = dir == \"up\" || dir == \"down\"\n        ? endOfTextblockVertical(view, state, dir)\n        : endOfTextblockHorizontal(view, state, dir);\n}\n\n// View descriptions are data structures that describe the DOM that is\n// used to represent the editor's content. They are used for:\n//\n// - Incremental redrawing when the document changes\n//\n// - Figuring out what part of the document a given DOM position\n//   corresponds to\n//\n// - Wiring in custom implementations of the editing interface for a\n//   given node\n//\n// They form a doubly-linked mutable tree, starting at `view.docView`.\nconst NOT_DIRTY = 0, CHILD_DIRTY = 1, CONTENT_DIRTY = 2, NODE_DIRTY = 3;\n// Superclass for the various kinds of descriptions. Defines their\n// basic structure and shared methods.\nclass ViewDesc {\n    constructor(parent, children, dom, \n    // This is the node that holds the child views. It may be null for\n    // descs that don't have children.\n    contentDOM) {\n        this.parent = parent;\n        this.children = children;\n        this.dom = dom;\n        this.contentDOM = contentDOM;\n        this.dirty = NOT_DIRTY;\n        // An expando property on the DOM node provides a link back to its\n        // description.\n        dom.pmViewDesc = this;\n    }\n    // Used to check whether a given description corresponds to a\n    // widget/mark/node.\n    matchesWidget(widget) { return false; }\n    matchesMark(mark) { return false; }\n    matchesNode(node, outerDeco, innerDeco) { return false; }\n    matchesHack(nodeName) { return false; }\n    // When parsing in-editor content (in domchange.js), we allow\n    // descriptions to determine the parse rules that should be used to\n    // parse them.\n    parseRule() { return null; }\n    // Used by the editor's event handler to ignore events that come\n    // from certain descs.\n    stopEvent(event) { return false; }\n    // The size of the content represented by this desc.\n    get size() {\n        let size = 0;\n        for (let i = 0; i < this.children.length; i++)\n            size += this.children[i].size;\n        return size;\n    }\n    // For block nodes, this represents the space taken up by their\n    // start/end tokens.\n    get border() { return 0; }\n    destroy() {\n        this.parent = undefined;\n        if (this.dom.pmViewDesc == this)\n            this.dom.pmViewDesc = undefined;\n        for (let i = 0; i < this.children.length; i++)\n            this.children[i].destroy();\n    }\n    posBeforeChild(child) {\n        for (let i = 0, pos = this.posAtStart;; i++) {\n            let cur = this.children[i];\n            if (cur == child)\n                return pos;\n            pos += cur.size;\n        }\n    }\n    get posBefore() {\n        return this.parent.posBeforeChild(this);\n    }\n    get posAtStart() {\n        return this.parent ? this.parent.posBeforeChild(this) + this.border : 0;\n    }\n    get posAfter() {\n        return this.posBefore + this.size;\n    }\n    get posAtEnd() {\n        return this.posAtStart + this.size - 2 * this.border;\n    }\n    localPosFromDOM(dom, offset, bias) {\n        // If the DOM position is in the content, use the child desc after\n        // it to figure out a position.\n        if (this.contentDOM && this.contentDOM.contains(dom.nodeType == 1 ? dom : dom.parentNode)) {\n            if (bias < 0) {\n                let domBefore, desc;\n                if (dom == this.contentDOM) {\n                    domBefore = dom.childNodes[offset - 1];\n                }\n                else {\n                    while (dom.parentNode != this.contentDOM)\n                        dom = dom.parentNode;\n                    domBefore = dom.previousSibling;\n                }\n                while (domBefore && !((desc = domBefore.pmViewDesc) && desc.parent == this))\n                    domBefore = domBefore.previousSibling;\n                return domBefore ? this.posBeforeChild(desc) + desc.size : this.posAtStart;\n            }\n            else {\n                let domAfter, desc;\n                if (dom == this.contentDOM) {\n                    domAfter = dom.childNodes[offset];\n                }\n                else {\n                    while (dom.parentNode != this.contentDOM)\n                        dom = dom.parentNode;\n                    domAfter = dom.nextSibling;\n                }\n                while (domAfter && !((desc = domAfter.pmViewDesc) && desc.parent == this))\n                    domAfter = domAfter.nextSibling;\n                return domAfter ? this.posBeforeChild(desc) : this.posAtEnd;\n            }\n        }\n        // Otherwise, use various heuristics, falling back on the bias\n        // parameter, to determine whether to return the position at the\n        // start or at the end of this view desc.\n        let atEnd;\n        if (dom == this.dom && this.contentDOM) {\n            atEnd = offset > domIndex(this.contentDOM);\n        }\n        else if (this.contentDOM && this.contentDOM != this.dom && this.dom.contains(this.contentDOM)) {\n            atEnd = dom.compareDocumentPosition(this.contentDOM) & 2;\n        }\n        else if (this.dom.firstChild) {\n            if (offset == 0)\n                for (let search = dom;; search = search.parentNode) {\n                    if (search == this.dom) {\n                        atEnd = false;\n                        break;\n                    }\n                    if (search.previousSibling)\n                        break;\n                }\n            if (atEnd == null && offset == dom.childNodes.length)\n                for (let search = dom;; search = search.parentNode) {\n                    if (search == this.dom) {\n                        atEnd = true;\n                        break;\n                    }\n                    if (search.nextSibling)\n                        break;\n                }\n        }\n        return (atEnd == null ? bias > 0 : atEnd) ? this.posAtEnd : this.posAtStart;\n    }\n    // Scan up the dom finding the first desc that is a descendant of\n    // this one.\n    nearestDesc(dom, onlyNodes = false) {\n        for (let first = true, cur = dom; cur; cur = cur.parentNode) {\n            let desc = this.getDesc(cur), nodeDOM;\n            if (desc && (!onlyNodes || desc.node)) {\n                // If dom is outside of this desc's nodeDOM, don't count it.\n                if (first && (nodeDOM = desc.nodeDOM) &&\n                    !(nodeDOM.nodeType == 1 ? nodeDOM.contains(dom.nodeType == 1 ? dom : dom.parentNode) : nodeDOM == dom))\n                    first = false;\n                else\n                    return desc;\n            }\n        }\n    }\n    getDesc(dom) {\n        let desc = dom.pmViewDesc;\n        for (let cur = desc; cur; cur = cur.parent)\n            if (cur == this)\n                return desc;\n    }\n    posFromDOM(dom, offset, bias) {\n        for (let scan = dom; scan; scan = scan.parentNode) {\n            let desc = this.getDesc(scan);\n            if (desc)\n                return desc.localPosFromDOM(dom, offset, bias);\n        }\n        return -1;\n    }\n    // Find the desc for the node after the given pos, if any. (When a\n    // parent node overrode rendering, there might not be one.)\n    descAt(pos) {\n        for (let i = 0, offset = 0; i < this.children.length; i++) {\n            let child = this.children[i], end = offset + child.size;\n            if (offset == pos && end != offset) {\n                while (!child.border && child.children.length)\n                    child = child.children[0];\n                return child;\n            }\n            if (pos < end)\n                return child.descAt(pos - offset - child.border);\n            offset = end;\n        }\n    }\n    domFromPos(pos, side) {\n        if (!this.contentDOM)\n            return { node: this.dom, offset: 0, atom: pos + 1 };\n        // First find the position in the child array\n        let i = 0, offset = 0;\n        for (let curPos = 0; i < this.children.length; i++) {\n            let child = this.children[i], end = curPos + child.size;\n            if (end > pos || child instanceof TrailingHackViewDesc) {\n                offset = pos - curPos;\n                break;\n            }\n            curPos = end;\n        }\n        // If this points into the middle of a child, call through\n        if (offset)\n            return this.children[i].domFromPos(offset - this.children[i].border, side);\n        // Go back if there were any zero-length widgets with side >= 0 before this point\n        for (let prev; i && !(prev = this.children[i - 1]).size && prev instanceof WidgetViewDesc && prev.side >= 0; i--) { }\n        // Scan towards the first useable node\n        if (side <= 0) {\n            let prev, enter = true;\n            for (;; i--, enter = false) {\n                prev = i ? this.children[i - 1] : null;\n                if (!prev || prev.dom.parentNode == this.contentDOM)\n                    break;\n            }\n            if (prev && side && enter && !prev.border && !prev.domAtom)\n                return prev.domFromPos(prev.size, side);\n            return { node: this.contentDOM, offset: prev ? domIndex(prev.dom) + 1 : 0 };\n        }\n        else {\n            let next, enter = true;\n            for (;; i++, enter = false) {\n                next = i < this.children.length ? this.children[i] : null;\n                if (!next || next.dom.parentNode == this.contentDOM)\n                    break;\n            }\n            if (next && enter && !next.border && !next.domAtom)\n                return next.domFromPos(0, side);\n            return { node: this.contentDOM, offset: next ? domIndex(next.dom) : this.contentDOM.childNodes.length };\n        }\n    }\n    // Used to find a DOM range in a single parent for a given changed\n    // range.\n    parseRange(from, to, base = 0) {\n        if (this.children.length == 0)\n            return { node: this.contentDOM, from, to, fromOffset: 0, toOffset: this.contentDOM.childNodes.length };\n        let fromOffset = -1, toOffset = -1;\n        for (let offset = base, i = 0;; i++) {\n            let child = this.children[i], end = offset + child.size;\n            if (fromOffset == -1 && from <= end) {\n                let childBase = offset + child.border;\n                // FIXME maybe descend mark views to parse a narrower range?\n                if (from >= childBase && to <= end - child.border && child.node &&\n                    child.contentDOM && this.contentDOM.contains(child.contentDOM))\n                    return child.parseRange(from, to, childBase);\n                from = offset;\n                for (let j = i; j > 0; j--) {\n                    let prev = this.children[j - 1];\n                    if (prev.size && prev.dom.parentNode == this.contentDOM && !prev.emptyChildAt(1)) {\n                        fromOffset = domIndex(prev.dom) + 1;\n                        break;\n                    }\n                    from -= prev.size;\n                }\n                if (fromOffset == -1)\n                    fromOffset = 0;\n            }\n            if (fromOffset > -1 && (end > to || i == this.children.length - 1)) {\n                to = end;\n                for (let j = i + 1; j < this.children.length; j++) {\n                    let next = this.children[j];\n                    if (next.size && next.dom.parentNode == this.contentDOM && !next.emptyChildAt(-1)) {\n                        toOffset = domIndex(next.dom);\n                        break;\n                    }\n                    to += next.size;\n                }\n                if (toOffset == -1)\n                    toOffset = this.contentDOM.childNodes.length;\n                break;\n            }\n            offset = end;\n        }\n        return { node: this.contentDOM, from, to, fromOffset, toOffset };\n    }\n    emptyChildAt(side) {\n        if (this.border || !this.contentDOM || !this.children.length)\n            return false;\n        let child = this.children[side < 0 ? 0 : this.children.length - 1];\n        return child.size == 0 || child.emptyChildAt(side);\n    }\n    domAfterPos(pos) {\n        let { node, offset } = this.domFromPos(pos, 0);\n        if (node.nodeType != 1 || offset == node.childNodes.length)\n            throw new RangeError(\"No node after pos \" + pos);\n        return node.childNodes[offset];\n    }\n    // View descs are responsible for setting any selection that falls\n    // entirely inside of them, so that custom implementations can do\n    // custom things with the selection. Note that this falls apart when\n    // a selection starts in such a node and ends in another, in which\n    // case we just use whatever domFromPos produces as a best effort.\n    setSelection(anchor, head, root, force = false) {\n        // If the selection falls entirely in a child, give it to that child\n        let from = Math.min(anchor, head), to = Math.max(anchor, head);\n        for (let i = 0, offset = 0; i < this.children.length; i++) {\n            let child = this.children[i], end = offset + child.size;\n            if (from > offset && to < end)\n                return child.setSelection(anchor - offset - child.border, head - offset - child.border, root, force);\n            offset = end;\n        }\n        let anchorDOM = this.domFromPos(anchor, anchor ? -1 : 1);\n        let headDOM = head == anchor ? anchorDOM : this.domFromPos(head, head ? -1 : 1);\n        let domSel = root.getSelection();\n        let brKludge = false;\n        // On Firefox, using Selection.collapse to put the cursor after a\n        // BR node for some reason doesn't always work (#1073). On Safari,\n        // the cursor sometimes inexplicable visually lags behind its\n        // reported position in such situations (#1092).\n        if ((gecko || safari) && anchor == head) {\n            let { node, offset } = anchorDOM;\n            if (node.nodeType == 3) {\n                brKludge = !!(offset && node.nodeValue[offset - 1] == \"\\n\");\n                // Issue #1128\n                if (brKludge && offset == node.nodeValue.length) {\n                    for (let scan = node, after; scan; scan = scan.parentNode) {\n                        if (after = scan.nextSibling) {\n                            if (after.nodeName == \"BR\")\n                                anchorDOM = headDOM = { node: after.parentNode, offset: domIndex(after) + 1 };\n                            break;\n                        }\n                        let desc = scan.pmViewDesc;\n                        if (desc && desc.node && desc.node.isBlock)\n                            break;\n                    }\n                }\n            }\n            else {\n                let prev = node.childNodes[offset - 1];\n                brKludge = prev && (prev.nodeName == \"BR\" || prev.contentEditable == \"false\");\n            }\n        }\n        // Firefox can act strangely when the selection is in front of an\n        // uneditable node. See #1163 and https://bugzilla.mozilla.org/show_bug.cgi?id=1709536\n        if (gecko && domSel.focusNode && domSel.focusNode != headDOM.node && domSel.focusNode.nodeType == 1) {\n            let after = domSel.focusNode.childNodes[domSel.focusOffset];\n            if (after && after.contentEditable == \"false\")\n                force = true;\n        }\n        if (!(force || brKludge && safari) &&\n            isEquivalentPosition(anchorDOM.node, anchorDOM.offset, domSel.anchorNode, domSel.anchorOffset) &&\n            isEquivalentPosition(headDOM.node, headDOM.offset, domSel.focusNode, domSel.focusOffset))\n            return;\n        // Selection.extend can be used to create an 'inverted' selection\n        // (one where the focus is before the anchor), but not all\n        // browsers support it yet.\n        let domSelExtended = false;\n        if ((domSel.extend || anchor == head) && !brKludge) {\n            domSel.collapse(anchorDOM.node, anchorDOM.offset);\n            try {\n                if (anchor != head)\n                    domSel.extend(headDOM.node, headDOM.offset);\n                domSelExtended = true;\n            }\n            catch (err) {\n                // In some cases with Chrome the selection is empty after calling\n                // collapse, even when it should be valid. This appears to be a bug, but\n                // it is difficult to isolate. If this happens fallback to the old path\n                // without using extend.\n                if (!(err instanceof DOMException))\n                    throw err;\n                // declare global: DOMException\n            }\n        }\n        if (!domSelExtended) {\n            if (anchor > head) {\n                let tmp = anchorDOM;\n                anchorDOM = headDOM;\n                headDOM = tmp;\n            }\n            let range = document.createRange();\n            range.setEnd(headDOM.node, headDOM.offset);\n            range.setStart(anchorDOM.node, anchorDOM.offset);\n            domSel.removeAllRanges();\n            domSel.addRange(range);\n        }\n    }\n    ignoreMutation(mutation) {\n        return !this.contentDOM && mutation.type != \"selection\";\n    }\n    get contentLost() {\n        return this.contentDOM && this.contentDOM != this.dom && !this.dom.contains(this.contentDOM);\n    }\n    // Remove a subtree of the element tree that has been touched\n    // by a DOM change, so that the next update will redraw it.\n    markDirty(from, to) {\n        for (let offset = 0, i = 0; i < this.children.length; i++) {\n            let child = this.children[i], end = offset + child.size;\n            if (offset == end ? from <= end && to >= offset : from < end && to > offset) {\n                let startInside = offset + child.border, endInside = end - child.border;\n                if (from >= startInside && to <= endInside) {\n                    this.dirty = from == offset || to == end ? CONTENT_DIRTY : CHILD_DIRTY;\n                    if (from == startInside && to == endInside &&\n                        (child.contentLost || child.dom.parentNode != this.contentDOM))\n                        child.dirty = NODE_DIRTY;\n                    else\n                        child.markDirty(from - startInside, to - startInside);\n                    return;\n                }\n                else {\n                    child.dirty = child.dom == child.contentDOM && child.dom.parentNode == this.contentDOM && !child.children.length\n                        ? CONTENT_DIRTY : NODE_DIRTY;\n                }\n            }\n            offset = end;\n        }\n        this.dirty = CONTENT_DIRTY;\n    }\n    markParentsDirty() {\n        let level = 1;\n        for (let node = this.parent; node; node = node.parent, level++) {\n            let dirty = level == 1 ? CONTENT_DIRTY : CHILD_DIRTY;\n            if (node.dirty < dirty)\n                node.dirty = dirty;\n        }\n    }\n    get domAtom() { return false; }\n    get ignoreForCoords() { return false; }\n}\n// A widget desc represents a widget decoration, which is a DOM node\n// drawn between the document nodes.\nclass WidgetViewDesc extends ViewDesc {\n    constructor(parent, widget, view, pos) {\n        let self, dom = widget.type.toDOM;\n        if (typeof dom == \"function\")\n            dom = dom(view, () => {\n                if (!self)\n                    return pos;\n                if (self.parent)\n                    return self.parent.posBeforeChild(self);\n            });\n        if (!widget.type.spec.raw) {\n            if (dom.nodeType != 1) {\n                let wrap = document.createElement(\"span\");\n                wrap.appendChild(dom);\n                dom = wrap;\n            }\n            dom.contentEditable = \"false\";\n            dom.classList.add(\"ProseMirror-widget\");\n        }\n        super(parent, [], dom, null);\n        this.widget = widget;\n        this.widget = widget;\n        self = this;\n    }\n    matchesWidget(widget) {\n        return this.dirty == NOT_DIRTY && widget.type.eq(this.widget.type);\n    }\n    parseRule() { return { ignore: true }; }\n    stopEvent(event) {\n        let stop = this.widget.spec.stopEvent;\n        return stop ? stop(event) : false;\n    }\n    ignoreMutation(mutation) {\n        return mutation.type != \"selection\" || this.widget.spec.ignoreSelection;\n    }\n    destroy() {\n        this.widget.type.destroy(this.dom);\n        super.destroy();\n    }\n    get domAtom() { return true; }\n    get side() { return this.widget.type.side; }\n}\nclass CompositionViewDesc extends ViewDesc {\n    constructor(parent, dom, textDOM, text) {\n        super(parent, [], dom, null);\n        this.textDOM = textDOM;\n        this.text = text;\n    }\n    get size() { return this.text.length; }\n    localPosFromDOM(dom, offset) {\n        if (dom != this.textDOM)\n            return this.posAtStart + (offset ? this.size : 0);\n        return this.posAtStart + offset;\n    }\n    domFromPos(pos) {\n        return { node: this.textDOM, offset: pos };\n    }\n    ignoreMutation(mut) {\n        return mut.type === 'characterData' && mut.target.nodeValue == mut.oldValue;\n    }\n}\n// A mark desc represents a mark. May have multiple children,\n// depending on how the mark is split. Note that marks are drawn using\n// a fixed nesting order, for simplicity and predictability, so in\n// some cases they will be split more often than would appear\n// necessary.\nclass MarkViewDesc extends ViewDesc {\n    constructor(parent, mark, dom, contentDOM) {\n        super(parent, [], dom, contentDOM);\n        this.mark = mark;\n    }\n    static create(parent, mark, inline, view) {\n        let custom = view.nodeViews[mark.type.name];\n        let spec = custom && custom(mark, view, inline);\n        if (!spec || !spec.dom)\n            spec = DOMSerializer.renderSpec(document, mark.type.spec.toDOM(mark, inline));\n        return new MarkViewDesc(parent, mark, spec.dom, spec.contentDOM || spec.dom);\n    }\n    parseRule() {\n        if ((this.dirty & NODE_DIRTY) || this.mark.type.spec.reparseInView)\n            return null;\n        return { mark: this.mark.type.name, attrs: this.mark.attrs, contentElement: this.contentDOM || undefined };\n    }\n    matchesMark(mark) { return this.dirty != NODE_DIRTY && this.mark.eq(mark); }\n    markDirty(from, to) {\n        super.markDirty(from, to);\n        // Move dirty info to nearest node view\n        if (this.dirty != NOT_DIRTY) {\n            let parent = this.parent;\n            while (!parent.node)\n                parent = parent.parent;\n            if (parent.dirty < this.dirty)\n                parent.dirty = this.dirty;\n            this.dirty = NOT_DIRTY;\n        }\n    }\n    slice(from, to, view) {\n        let copy = MarkViewDesc.create(this.parent, this.mark, true, view);\n        let nodes = this.children, size = this.size;\n        if (to < size)\n            nodes = replaceNodes(nodes, to, size, view);\n        if (from > 0)\n            nodes = replaceNodes(nodes, 0, from, view);\n        for (let i = 0; i < nodes.length; i++)\n            nodes[i].parent = copy;\n        copy.children = nodes;\n        return copy;\n    }\n}\n// Node view descs are the main, most common type of view desc, and\n// correspond to an actual node in the document. Unlike mark descs,\n// they populate their child array themselves.\nclass NodeViewDesc extends ViewDesc {\n    constructor(parent, node, outerDeco, innerDeco, dom, contentDOM, nodeDOM, view, pos) {\n        super(parent, [], dom, contentDOM);\n        this.node = node;\n        this.outerDeco = outerDeco;\n        this.innerDeco = innerDeco;\n        this.nodeDOM = nodeDOM;\n        if (contentDOM)\n            this.updateChildren(view, pos);\n    }\n    // By default, a node is rendered using the `toDOM` method from the\n    // node type spec. But client code can use the `nodeViews` spec to\n    // supply a custom node view, which can influence various aspects of\n    // the way the node works.\n    //\n    // (Using subclassing for this was intentionally decided against,\n    // since it'd require exposing a whole slew of finicky\n    // implementation details to the user code that they probably will\n    // never need.)\n    static create(parent, node, outerDeco, innerDeco, view, pos) {\n        let custom = view.nodeViews[node.type.name], descObj;\n        let spec = custom && custom(node, view, () => {\n            // (This is a function that allows the custom view to find its\n            // own position)\n            if (!descObj)\n                return pos;\n            if (descObj.parent)\n                return descObj.parent.posBeforeChild(descObj);\n        }, outerDeco, innerDeco);\n        let dom = spec && spec.dom, contentDOM = spec && spec.contentDOM;\n        if (node.isText) {\n            if (!dom)\n                dom = document.createTextNode(node.text);\n            else if (dom.nodeType != 3)\n                throw new RangeError(\"Text must be rendered as a DOM text node\");\n        }\n        else if (!dom) {\n            ({ dom, contentDOM } = DOMSerializer.renderSpec(document, node.type.spec.toDOM(node)));\n        }\n        if (!contentDOM && !node.isText && dom.nodeName != \"BR\") { // Chrome gets confused by <br contenteditable=false>\n            if (!dom.hasAttribute(\"contenteditable\"))\n                dom.contentEditable = \"false\";\n            if (node.type.spec.draggable)\n                dom.draggable = true;\n        }\n        let nodeDOM = dom;\n        dom = applyOuterDeco(dom, outerDeco, node);\n        if (spec)\n            return descObj = new CustomNodeViewDesc(parent, node, outerDeco, innerDeco, dom, contentDOM || null, nodeDOM, spec, view, pos + 1);\n        else if (node.isText)\n            return new TextViewDesc(parent, node, outerDeco, innerDeco, dom, nodeDOM, view);\n        else\n            return new NodeViewDesc(parent, node, outerDeco, innerDeco, dom, contentDOM || null, nodeDOM, view, pos + 1);\n    }\n    parseRule() {\n        // Experimental kludge to allow opt-in re-parsing of nodes\n        if (this.node.type.spec.reparseInView)\n            return null;\n        // FIXME the assumption that this can always return the current\n        // attrs means that if the user somehow manages to change the\n        // attrs in the dom, that won't be picked up. Not entirely sure\n        // whether this is a problem\n        let rule = { node: this.node.type.name, attrs: this.node.attrs };\n        if (this.node.type.whitespace == \"pre\")\n            rule.preserveWhitespace = \"full\";\n        if (!this.contentDOM) {\n            rule.getContent = () => this.node.content;\n        }\n        else if (!this.contentLost) {\n            rule.contentElement = this.contentDOM;\n        }\n        else {\n            // Chrome likes to randomly recreate parent nodes when\n            // backspacing things. When that happens, this tries to find the\n            // new parent.\n            for (let i = this.children.length - 1; i >= 0; i--) {\n                let child = this.children[i];\n                if (this.dom.contains(child.dom.parentNode)) {\n                    rule.contentElement = child.dom.parentNode;\n                    break;\n                }\n            }\n            if (!rule.contentElement)\n                rule.getContent = () => Fragment.empty;\n        }\n        return rule;\n    }\n    matchesNode(node, outerDeco, innerDeco) {\n        return this.dirty == NOT_DIRTY && node.eq(this.node) &&\n            sameOuterDeco(outerDeco, this.outerDeco) && innerDeco.eq(this.innerDeco);\n    }\n    get size() { return this.node.nodeSize; }\n    get border() { return this.node.isLeaf ? 0 : 1; }\n    // Syncs `this.children` to match `this.node.content` and the local\n    // decorations, possibly introducing nesting for marks. Then, in a\n    // separate step, syncs the DOM inside `this.contentDOM` to\n    // `this.children`.\n    updateChildren(view, pos) {\n        let inline = this.node.inlineContent, off = pos;\n        let composition = view.composing ? this.localCompositionInfo(view, pos) : null;\n        let localComposition = composition && composition.pos > -1 ? composition : null;\n        let compositionInChild = composition && composition.pos < 0;\n        let updater = new ViewTreeUpdater(this, localComposition && localComposition.node);\n        iterDeco(this.node, this.innerDeco, (widget, i, insideNode) => {\n            if (widget.spec.marks)\n                updater.syncToMarks(widget.spec.marks, inline, view);\n            else if (widget.type.side >= 0 && !insideNode)\n                updater.syncToMarks(i == this.node.childCount ? Mark.none : this.node.child(i).marks, inline, view);\n            // If the next node is a desc matching this widget, reuse it,\n            // otherwise insert the widget as a new view desc.\n            updater.placeWidget(widget, view, off);\n        }, (child, outerDeco, innerDeco, i) => {\n            // Make sure the wrapping mark descs match the node's marks.\n            updater.syncToMarks(child.marks, inline, view);\n            // Try several strategies for drawing this node\n            let compIndex;\n            if (updater.findNodeMatch(child, outerDeco, innerDeco, i)) ;\n            else if (compositionInChild && view.state.selection.from > off &&\n                view.state.selection.to < off + child.nodeSize &&\n                (compIndex = updater.findIndexWithChild(composition.node)) > -1 &&\n                updater.updateNodeAt(child, outerDeco, innerDeco, compIndex, view)) ;\n            else if (updater.updateNextNode(child, outerDeco, innerDeco, view, i)) ;\n            else {\n                // Add it as a new view\n                updater.addNode(child, outerDeco, innerDeco, view, off);\n            }\n            off += child.nodeSize;\n        });\n        // Drop all remaining descs after the current position.\n        updater.syncToMarks([], inline, view);\n        if (this.node.isTextblock)\n            updater.addTextblockHacks();\n        updater.destroyRest();\n        // Sync the DOM if anything changed\n        if (updater.changed || this.dirty == CONTENT_DIRTY) {\n            // May have to protect focused DOM from being changed if a composition is active\n            if (localComposition)\n                this.protectLocalComposition(view, localComposition);\n            renderDescs(this.contentDOM, this.children, view);\n            if (ios)\n                iosHacks(this.dom);\n        }\n    }\n    localCompositionInfo(view, pos) {\n        // Only do something if both the selection and a focused text node\n        // are inside of this node\n        let { from, to } = view.state.selection;\n        if (!(view.state.selection instanceof TextSelection) || from < pos || to > pos + this.node.content.size)\n            return null;\n        let sel = view.domSelection();\n        let textNode = nearbyTextNode(sel.focusNode, sel.focusOffset);\n        if (!textNode || !this.dom.contains(textNode.parentNode))\n            return null;\n        if (this.node.inlineContent) {\n            // Find the text in the focused node in the node, stop if it's not\n            // there (may have been modified through other means, in which\n            // case it should overwritten)\n            let text = textNode.nodeValue;\n            let textPos = findTextInFragment(this.node.content, text, from - pos, to - pos);\n            return textPos < 0 ? null : { node: textNode, pos: textPos, text };\n        }\n        else {\n            return { node: textNode, pos: -1, text: \"\" };\n        }\n    }\n    protectLocalComposition(view, { node, pos, text }) {\n        // The node is already part of a local view desc, leave it there\n        if (this.getDesc(node))\n            return;\n        // Create a composition view for the orphaned nodes\n        let topNode = node;\n        for (;; topNode = topNode.parentNode) {\n            if (topNode.parentNode == this.contentDOM)\n                break;\n            while (topNode.previousSibling)\n                topNode.parentNode.removeChild(topNode.previousSibling);\n            while (topNode.nextSibling)\n                topNode.parentNode.removeChild(topNode.nextSibling);\n            if (topNode.pmViewDesc)\n                topNode.pmViewDesc = undefined;\n        }\n        let desc = new CompositionViewDesc(this, topNode, node, text);\n        view.input.compositionNodes.push(desc);\n        // Patch up this.children to contain the composition view\n        this.children = replaceNodes(this.children, pos, pos + text.length, view, desc);\n    }\n    // If this desc must be updated to match the given node decoration,\n    // do so and return true.\n    update(node, outerDeco, innerDeco, view) {\n        if (this.dirty == NODE_DIRTY ||\n            !node.sameMarkup(this.node))\n            return false;\n        this.updateInner(node, outerDeco, innerDeco, view);\n        return true;\n    }\n    updateInner(node, outerDeco, innerDeco, view) {\n        this.updateOuterDeco(outerDeco);\n        this.node = node;\n        this.innerDeco = innerDeco;\n        if (this.contentDOM)\n            this.updateChildren(view, this.posAtStart);\n        this.dirty = NOT_DIRTY;\n    }\n    updateOuterDeco(outerDeco) {\n        if (sameOuterDeco(outerDeco, this.outerDeco))\n            return;\n        let needsWrap = this.nodeDOM.nodeType != 1;\n        let oldDOM = this.dom;\n        this.dom = patchOuterDeco(this.dom, this.nodeDOM, computeOuterDeco(this.outerDeco, this.node, needsWrap), computeOuterDeco(outerDeco, this.node, needsWrap));\n        if (this.dom != oldDOM) {\n            oldDOM.pmViewDesc = undefined;\n            this.dom.pmViewDesc = this;\n        }\n        this.outerDeco = outerDeco;\n    }\n    // Mark this node as being the selected node.\n    selectNode() {\n        if (this.nodeDOM.nodeType == 1)\n            this.nodeDOM.classList.add(\"ProseMirror-selectednode\");\n        if (this.contentDOM || !this.node.type.spec.draggable)\n            this.dom.draggable = true;\n    }\n    // Remove selected node marking from this node.\n    deselectNode() {\n        if (this.nodeDOM.nodeType == 1)\n            this.nodeDOM.classList.remove(\"ProseMirror-selectednode\");\n        if (this.contentDOM || !this.node.type.spec.draggable)\n            this.dom.removeAttribute(\"draggable\");\n    }\n    get domAtom() { return this.node.isAtom; }\n}\n// Create a view desc for the top-level document node, to be exported\n// and used by the view class.\nfunction docViewDesc(doc, outerDeco, innerDeco, dom, view) {\n    applyOuterDeco(dom, outerDeco, doc);\n    return new NodeViewDesc(undefined, doc, outerDeco, innerDeco, dom, dom, dom, view, 0);\n}\nclass TextViewDesc extends NodeViewDesc {\n    constructor(parent, node, outerDeco, innerDeco, dom, nodeDOM, view) {\n        super(parent, node, outerDeco, innerDeco, dom, null, nodeDOM, view, 0);\n    }\n    parseRule() {\n        let skip = this.nodeDOM.parentNode;\n        while (skip && skip != this.dom && !skip.pmIsDeco)\n            skip = skip.parentNode;\n        return { skip: (skip || true) };\n    }\n    update(node, outerDeco, innerDeco, view) {\n        if (this.dirty == NODE_DIRTY || (this.dirty != NOT_DIRTY && !this.inParent()) ||\n            !node.sameMarkup(this.node))\n            return false;\n        this.updateOuterDeco(outerDeco);\n        if ((this.dirty != NOT_DIRTY || node.text != this.node.text) && node.text != this.nodeDOM.nodeValue) {\n            this.nodeDOM.nodeValue = node.text;\n            if (view.trackWrites == this.nodeDOM)\n                view.trackWrites = null;\n        }\n        this.node = node;\n        this.dirty = NOT_DIRTY;\n        return true;\n    }\n    inParent() {\n        let parentDOM = this.parent.contentDOM;\n        for (let n = this.nodeDOM; n; n = n.parentNode)\n            if (n == parentDOM)\n                return true;\n        return false;\n    }\n    domFromPos(pos) {\n        return { node: this.nodeDOM, offset: pos };\n    }\n    localPosFromDOM(dom, offset, bias) {\n        if (dom == this.nodeDOM)\n            return this.posAtStart + Math.min(offset, this.node.text.length);\n        return super.localPosFromDOM(dom, offset, bias);\n    }\n    ignoreMutation(mutation) {\n        return mutation.type != \"characterData\" && mutation.type != \"selection\";\n    }\n    slice(from, to, view) {\n        let node = this.node.cut(from, to), dom = document.createTextNode(node.text);\n        return new TextViewDesc(this.parent, node, this.outerDeco, this.innerDeco, dom, dom, view);\n    }\n    markDirty(from, to) {\n        super.markDirty(from, to);\n        if (this.dom != this.nodeDOM && (from == 0 || to == this.nodeDOM.nodeValue.length))\n            this.dirty = NODE_DIRTY;\n    }\n    get domAtom() { return false; }\n}\n// A dummy desc used to tag trailing BR or IMG nodes created to work\n// around contentEditable terribleness.\nclass TrailingHackViewDesc extends ViewDesc {\n    parseRule() { return { ignore: true }; }\n    matchesHack(nodeName) { return this.dirty == NOT_DIRTY && this.dom.nodeName == nodeName; }\n    get domAtom() { return true; }\n    get ignoreForCoords() { return this.dom.nodeName == \"IMG\"; }\n}\n// A separate subclass is used for customized node views, so that the\n// extra checks only have to be made for nodes that are actually\n// customized.\nclass CustomNodeViewDesc extends NodeViewDesc {\n    constructor(parent, node, outerDeco, innerDeco, dom, contentDOM, nodeDOM, spec, view, pos) {\n        super(parent, node, outerDeco, innerDeco, dom, contentDOM, nodeDOM, view, pos);\n        this.spec = spec;\n    }\n    // A custom `update` method gets to decide whether the update goes\n    // through. If it does, and there's a `contentDOM` node, our logic\n    // updates the children.\n    update(node, outerDeco, innerDeco, view) {\n        if (this.dirty == NODE_DIRTY)\n            return false;\n        if (this.spec.update) {\n            let result = this.spec.update(node, outerDeco, innerDeco);\n            if (result)\n                this.updateInner(node, outerDeco, innerDeco, view);\n            return result;\n        }\n        else if (!this.contentDOM && !node.isLeaf) {\n            return false;\n        }\n        else {\n            return super.update(node, outerDeco, innerDeco, view);\n        }\n    }\n    selectNode() {\n        this.spec.selectNode ? this.spec.selectNode() : super.selectNode();\n    }\n    deselectNode() {\n        this.spec.deselectNode ? this.spec.deselectNode() : super.deselectNode();\n    }\n    setSelection(anchor, head, root, force) {\n        this.spec.setSelection ? this.spec.setSelection(anchor, head, root)\n            : super.setSelection(anchor, head, root, force);\n    }\n    destroy() {\n        if (this.spec.destroy)\n            this.spec.destroy();\n        super.destroy();\n    }\n    stopEvent(event) {\n        return this.spec.stopEvent ? this.spec.stopEvent(event) : false;\n    }\n    ignoreMutation(mutation) {\n        return this.spec.ignoreMutation ? this.spec.ignoreMutation(mutation) : super.ignoreMutation(mutation);\n    }\n}\n// Sync the content of the given DOM node with the nodes associated\n// with the given array of view descs, recursing into mark descs\n// because this should sync the subtree for a whole node at a time.\nfunction renderDescs(parentDOM, descs, view) {\n    let dom = parentDOM.firstChild, written = false;\n    for (let i = 0; i < descs.length; i++) {\n        let desc = descs[i], childDOM = desc.dom;\n        if (childDOM.parentNode == parentDOM) {\n            while (childDOM != dom) {\n                dom = rm(dom);\n                written = true;\n            }\n            dom = dom.nextSibling;\n        }\n        else {\n            written = true;\n            parentDOM.insertBefore(childDOM, dom);\n        }\n        if (desc instanceof MarkViewDesc) {\n            let pos = dom ? dom.previousSibling : parentDOM.lastChild;\n            renderDescs(desc.contentDOM, desc.children, view);\n            dom = pos ? pos.nextSibling : parentDOM.firstChild;\n        }\n    }\n    while (dom) {\n        dom = rm(dom);\n        written = true;\n    }\n    if (written && view.trackWrites == parentDOM)\n        view.trackWrites = null;\n}\nconst OuterDecoLevel = function (nodeName) {\n    if (nodeName)\n        this.nodeName = nodeName;\n};\nOuterDecoLevel.prototype = Object.create(null);\nconst noDeco = [new OuterDecoLevel];\nfunction computeOuterDeco(outerDeco, node, needsWrap) {\n    if (outerDeco.length == 0)\n        return noDeco;\n    let top = needsWrap ? noDeco[0] : new OuterDecoLevel, result = [top];\n    for (let i = 0; i < outerDeco.length; i++) {\n        let attrs = outerDeco[i].type.attrs;\n        if (!attrs)\n            continue;\n        if (attrs.nodeName)\n            result.push(top = new OuterDecoLevel(attrs.nodeName));\n        for (let name in attrs) {\n            let val = attrs[name];\n            if (val == null)\n                continue;\n            if (needsWrap && result.length == 1)\n                result.push(top = new OuterDecoLevel(node.isInline ? \"span\" : \"div\"));\n            if (name == \"class\")\n                top.class = (top.class ? top.class + \" \" : \"\") + val;\n            else if (name == \"style\")\n                top.style = (top.style ? top.style + \";\" : \"\") + val;\n            else if (name != \"nodeName\")\n                top[name] = val;\n        }\n    }\n    return result;\n}\nfunction patchOuterDeco(outerDOM, nodeDOM, prevComputed, curComputed) {\n    // Shortcut for trivial case\n    if (prevComputed == noDeco && curComputed == noDeco)\n        return nodeDOM;\n    let curDOM = nodeDOM;\n    for (let i = 0; i < curComputed.length; i++) {\n        let deco = curComputed[i], prev = prevComputed[i];\n        if (i) {\n            let parent;\n            if (prev && prev.nodeName == deco.nodeName && curDOM != outerDOM &&\n                (parent = curDOM.parentNode) && parent.nodeName.toLowerCase() == deco.nodeName) {\n                curDOM = parent;\n            }\n            else {\n                parent = document.createElement(deco.nodeName);\n                parent.pmIsDeco = true;\n                parent.appendChild(curDOM);\n                prev = noDeco[0];\n                curDOM = parent;\n            }\n        }\n        patchAttributes(curDOM, prev || noDeco[0], deco);\n    }\n    return curDOM;\n}\nfunction patchAttributes(dom, prev, cur) {\n    for (let name in prev)\n        if (name != \"class\" && name != \"style\" && name != \"nodeName\" && !(name in cur))\n            dom.removeAttribute(name);\n    for (let name in cur)\n        if (name != \"class\" && name != \"style\" && name != \"nodeName\" && cur[name] != prev[name])\n            dom.setAttribute(name, cur[name]);\n    if (prev.class != cur.class) {\n        let prevList = prev.class ? prev.class.split(\" \").filter(Boolean) : [];\n        let curList = cur.class ? cur.class.split(\" \").filter(Boolean) : [];\n        for (let i = 0; i < prevList.length; i++)\n            if (curList.indexOf(prevList[i]) == -1)\n                dom.classList.remove(prevList[i]);\n        for (let i = 0; i < curList.length; i++)\n            if (prevList.indexOf(curList[i]) == -1)\n                dom.classList.add(curList[i]);\n        if (dom.classList.length == 0)\n            dom.removeAttribute(\"class\");\n    }\n    if (prev.style != cur.style) {\n        if (prev.style) {\n            let prop = /\\s*([\\w\\-\\xa1-\\uffff]+)\\s*:(?:\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|\\(.*?\\)|[^;])*/g, m;\n            while (m = prop.exec(prev.style))\n                dom.style.removeProperty(m[1]);\n        }\n        if (cur.style)\n            dom.style.cssText += cur.style;\n    }\n}\nfunction applyOuterDeco(dom, deco, node) {\n    return patchOuterDeco(dom, dom, noDeco, computeOuterDeco(deco, node, dom.nodeType != 1));\n}\nfunction sameOuterDeco(a, b) {\n    if (a.length != b.length)\n        return false;\n    for (let i = 0; i < a.length; i++)\n        if (!a[i].type.eq(b[i].type))\n            return false;\n    return true;\n}\n// Remove a DOM node and return its next sibling.\nfunction rm(dom) {\n    let next = dom.nextSibling;\n    dom.parentNode.removeChild(dom);\n    return next;\n}\n// Helper class for incrementally updating a tree of mark descs and\n// the widget and node descs inside of them.\nclass ViewTreeUpdater {\n    constructor(top, lock) {\n        this.lock = lock;\n        // Index into `this.top`'s child array, represents the current\n        // update position.\n        this.index = 0;\n        // When entering a mark, the current top and index are pushed\n        // onto this.\n        this.stack = [];\n        // Tracks whether anything was changed\n        this.changed = false;\n        this.top = top;\n        this.preMatch = preMatch(top.node.content, top);\n    }\n    // Destroy and remove the children between the given indices in\n    // `this.top`.\n    destroyBetween(start, end) {\n        if (start == end)\n            return;\n        for (let i = start; i < end; i++)\n            this.top.children[i].destroy();\n        this.top.children.splice(start, end - start);\n        this.changed = true;\n    }\n    // Destroy all remaining children in `this.top`.\n    destroyRest() {\n        this.destroyBetween(this.index, this.top.children.length);\n    }\n    // Sync the current stack of mark descs with the given array of\n    // marks, reusing existing mark descs when possible.\n    syncToMarks(marks, inline, view) {\n        let keep = 0, depth = this.stack.length >> 1;\n        let maxKeep = Math.min(depth, marks.length);\n        while (keep < maxKeep &&\n            (keep == depth - 1 ? this.top : this.stack[(keep + 1) << 1])\n                .matchesMark(marks[keep]) && marks[keep].type.spec.spanning !== false)\n            keep++;\n        while (keep < depth) {\n            this.destroyRest();\n            this.top.dirty = NOT_DIRTY;\n            this.index = this.stack.pop();\n            this.top = this.stack.pop();\n            depth--;\n        }\n        while (depth < marks.length) {\n            this.stack.push(this.top, this.index + 1);\n            let found = -1;\n            for (let i = this.index; i < Math.min(this.index + 3, this.top.children.length); i++) {\n                if (this.top.children[i].matchesMark(marks[depth])) {\n                    found = i;\n                    break;\n                }\n            }\n            if (found > -1) {\n                if (found > this.index) {\n                    this.changed = true;\n                    this.destroyBetween(this.index, found);\n                }\n                this.top = this.top.children[this.index];\n            }\n            else {\n                let markDesc = MarkViewDesc.create(this.top, marks[depth], inline, view);\n                this.top.children.splice(this.index, 0, markDesc);\n                this.top = markDesc;\n                this.changed = true;\n            }\n            this.index = 0;\n            depth++;\n        }\n    }\n    // Try to find a node desc matching the given data. Skip over it and\n    // return true when successful.\n    findNodeMatch(node, outerDeco, innerDeco, index) {\n        let found = -1, targetDesc;\n        if (index >= this.preMatch.index &&\n            (targetDesc = this.preMatch.matches[index - this.preMatch.index]).parent == this.top &&\n            targetDesc.matchesNode(node, outerDeco, innerDeco)) {\n            found = this.top.children.indexOf(targetDesc, this.index);\n        }\n        else {\n            for (let i = this.index, e = Math.min(this.top.children.length, i + 5); i < e; i++) {\n                let child = this.top.children[i];\n                if (child.matchesNode(node, outerDeco, innerDeco) && !this.preMatch.matched.has(child)) {\n                    found = i;\n                    break;\n                }\n            }\n        }\n        if (found < 0)\n            return false;\n        this.destroyBetween(this.index, found);\n        this.index++;\n        return true;\n    }\n    updateNodeAt(node, outerDeco, innerDeco, index, view) {\n        let child = this.top.children[index];\n        if (child.dirty == NODE_DIRTY && child.dom == child.contentDOM)\n            child.dirty = CONTENT_DIRTY;\n        if (!child.update(node, outerDeco, innerDeco, view))\n            return false;\n        this.destroyBetween(this.index, index);\n        this.index++;\n        return true;\n    }\n    findIndexWithChild(domNode) {\n        for (;;) {\n            let parent = domNode.parentNode;\n            if (!parent)\n                return -1;\n            if (parent == this.top.contentDOM) {\n                let desc = domNode.pmViewDesc;\n                if (desc)\n                    for (let i = this.index; i < this.top.children.length; i++) {\n                        if (this.top.children[i] == desc)\n                            return i;\n                    }\n                return -1;\n            }\n            domNode = parent;\n        }\n    }\n    // Try to update the next node, if any, to the given data. Checks\n    // pre-matches to avoid overwriting nodes that could still be used.\n    updateNextNode(node, outerDeco, innerDeco, view, index) {\n        for (let i = this.index; i < this.top.children.length; i++) {\n            let next = this.top.children[i];\n            if (next instanceof NodeViewDesc) {\n                let preMatch = this.preMatch.matched.get(next);\n                if (preMatch != null && preMatch != index)\n                    return false;\n                let nextDOM = next.dom;\n                // Can't update if nextDOM is or contains this.lock, except if\n                // it's a text node whose content already matches the new text\n                // and whose decorations match the new ones.\n                let locked = this.lock && (nextDOM == this.lock || nextDOM.nodeType == 1 && nextDOM.contains(this.lock.parentNode)) &&\n                    !(node.isText && next.node && next.node.isText && next.nodeDOM.nodeValue == node.text &&\n                        next.dirty != NODE_DIRTY && sameOuterDeco(outerDeco, next.outerDeco));\n                if (!locked && next.update(node, outerDeco, innerDeco, view)) {\n                    this.destroyBetween(this.index, i);\n                    if (next.dom != nextDOM)\n                        this.changed = true;\n                    this.index++;\n                    return true;\n                }\n                break;\n            }\n        }\n        return false;\n    }\n    // Insert the node as a newly created node desc.\n    addNode(node, outerDeco, innerDeco, view, pos) {\n        this.top.children.splice(this.index++, 0, NodeViewDesc.create(this.top, node, outerDeco, innerDeco, view, pos));\n        this.changed = true;\n    }\n    placeWidget(widget, view, pos) {\n        let next = this.index < this.top.children.length ? this.top.children[this.index] : null;\n        if (next && next.matchesWidget(widget) &&\n            (widget == next.widget || !next.widget.type.toDOM.parentNode)) {\n            this.index++;\n        }\n        else {\n            let desc = new WidgetViewDesc(this.top, widget, view, pos);\n            this.top.children.splice(this.index++, 0, desc);\n            this.changed = true;\n        }\n    }\n    // Make sure a textblock looks and behaves correctly in\n    // contentEditable.\n    addTextblockHacks() {\n        let lastChild = this.top.children[this.index - 1], parent = this.top;\n        while (lastChild instanceof MarkViewDesc) {\n            parent = lastChild;\n            lastChild = parent.children[parent.children.length - 1];\n        }\n        if (!lastChild || // Empty textblock\n            !(lastChild instanceof TextViewDesc) ||\n            /\\n$/.test(lastChild.node.text)) {\n            // Avoid bugs in Safari's cursor drawing (#1165) and Chrome's mouse selection (#1152)\n            if ((safari || chrome) && lastChild && lastChild.dom.contentEditable == \"false\")\n                this.addHackNode(\"IMG\", parent);\n            this.addHackNode(\"BR\", this.top);\n        }\n    }\n    addHackNode(nodeName, parent) {\n        if (parent == this.top && this.index < parent.children.length && parent.children[this.index].matchesHack(nodeName)) {\n            this.index++;\n        }\n        else {\n            let dom = document.createElement(nodeName);\n            if (nodeName == \"IMG\") {\n                dom.className = \"ProseMirror-separator\";\n                dom.alt = \"\";\n            }\n            if (nodeName == \"BR\")\n                dom.className = \"ProseMirror-trailingBreak\";\n            let hack = new TrailingHackViewDesc(this.top, [], dom, null);\n            if (parent != this.top)\n                parent.children.push(hack);\n            else\n                parent.children.splice(this.index++, 0, hack);\n            this.changed = true;\n        }\n    }\n}\n// Iterate from the end of the fragment and array of descs to find\n// directly matching ones, in order to avoid overeagerly reusing those\n// for other nodes. Returns the fragment index of the first node that\n// is part of the sequence of matched nodes at the end of the\n// fragment.\nfunction preMatch(frag, parentDesc) {\n    let curDesc = parentDesc, descI = curDesc.children.length;\n    let fI = frag.childCount, matched = new Map, matches = [];\n    outer: while (fI > 0) {\n        let desc;\n        for (;;) {\n            if (descI) {\n                let next = curDesc.children[descI - 1];\n                if (next instanceof MarkViewDesc) {\n                    curDesc = next;\n                    descI = next.children.length;\n                }\n                else {\n                    desc = next;\n                    descI--;\n                    break;\n                }\n            }\n            else if (curDesc == parentDesc) {\n                break outer;\n            }\n            else {\n                // FIXME\n                descI = curDesc.parent.children.indexOf(curDesc);\n                curDesc = curDesc.parent;\n            }\n        }\n        let node = desc.node;\n        if (!node)\n            continue;\n        if (node != frag.child(fI - 1))\n            break;\n        --fI;\n        matched.set(desc, fI);\n        matches.push(desc);\n    }\n    return { index: fI, matched, matches: matches.reverse() };\n}\nfunction compareSide(a, b) {\n    return a.type.side - b.type.side;\n}\n// This function abstracts iterating over the nodes and decorations in\n// a fragment. Calls `onNode` for each node, with its local and child\n// decorations. Splits text nodes when there is a decoration starting\n// or ending inside of them. Calls `onWidget` for each widget.\nfunction iterDeco(parent, deco, onWidget, onNode) {\n    let locals = deco.locals(parent), offset = 0;\n    // Simple, cheap variant for when there are no local decorations\n    if (locals.length == 0) {\n        for (let i = 0; i < parent.childCount; i++) {\n            let child = parent.child(i);\n            onNode(child, locals, deco.forChild(offset, child), i);\n            offset += child.nodeSize;\n        }\n        return;\n    }\n    let decoIndex = 0, active = [], restNode = null;\n    for (let parentIndex = 0;;) {\n        if (decoIndex < locals.length && locals[decoIndex].to == offset) {\n            let widget = locals[decoIndex++], widgets;\n            while (decoIndex < locals.length && locals[decoIndex].to == offset)\n                (widgets || (widgets = [widget])).push(locals[decoIndex++]);\n            if (widgets) {\n                widgets.sort(compareSide);\n                for (let i = 0; i < widgets.length; i++)\n                    onWidget(widgets[i], parentIndex, !!restNode);\n            }\n            else {\n                onWidget(widget, parentIndex, !!restNode);\n            }\n        }\n        let child, index;\n        if (restNode) {\n            index = -1;\n            child = restNode;\n            restNode = null;\n        }\n        else if (parentIndex < parent.childCount) {\n            index = parentIndex;\n            child = parent.child(parentIndex++);\n        }\n        else {\n            break;\n        }\n        for (let i = 0; i < active.length; i++)\n            if (active[i].to <= offset)\n                active.splice(i--, 1);\n        while (decoIndex < locals.length && locals[decoIndex].from <= offset && locals[decoIndex].to > offset)\n            active.push(locals[decoIndex++]);\n        let end = offset + child.nodeSize;\n        if (child.isText) {\n            let cutAt = end;\n            if (decoIndex < locals.length && locals[decoIndex].from < cutAt)\n                cutAt = locals[decoIndex].from;\n            for (let i = 0; i < active.length; i++)\n                if (active[i].to < cutAt)\n                    cutAt = active[i].to;\n            if (cutAt < end) {\n                restNode = child.cut(cutAt - offset);\n                child = child.cut(0, cutAt - offset);\n                end = cutAt;\n                index = -1;\n            }\n        }\n        let outerDeco = child.isInline && !child.isLeaf ? active.filter(d => !d.inline) : active.slice();\n        onNode(child, outerDeco, deco.forChild(offset, child), index);\n        offset = end;\n    }\n}\n// List markers in Mobile Safari will mysteriously disappear\n// sometimes. This works around that.\nfunction iosHacks(dom) {\n    if (dom.nodeName == \"UL\" || dom.nodeName == \"OL\") {\n        let oldCSS = dom.style.cssText;\n        dom.style.cssText = oldCSS + \"; list-style: square !important\";\n        window.getComputedStyle(dom).listStyle;\n        dom.style.cssText = oldCSS;\n    }\n}\nfunction nearbyTextNode(node, offset) {\n    for (;;) {\n        if (node.nodeType == 3)\n            return node;\n        if (node.nodeType == 1 && offset > 0) {\n            if (node.childNodes.length > offset && node.childNodes[offset].nodeType == 3)\n                return node.childNodes[offset];\n            node = node.childNodes[offset - 1];\n            offset = nodeSize(node);\n        }\n        else if (node.nodeType == 1 && offset < node.childNodes.length) {\n            node = node.childNodes[offset];\n            offset = 0;\n        }\n        else {\n            return null;\n        }\n    }\n}\n// Find a piece of text in an inline fragment, overlapping from-to\nfunction findTextInFragment(frag, text, from, to) {\n    for (let i = 0, pos = 0; i < frag.childCount && pos <= to;) {\n        let child = frag.child(i++), childStart = pos;\n        pos += child.nodeSize;\n        if (!child.isText)\n            continue;\n        let str = child.text;\n        while (i < frag.childCount) {\n            let next = frag.child(i++);\n            pos += next.nodeSize;\n            if (!next.isText)\n                break;\n            str += next.text;\n        }\n        if (pos >= from) {\n            let found = childStart < to ? str.lastIndexOf(text, to - childStart - 1) : -1;\n            if (found >= 0 && found + text.length + childStart >= from)\n                return childStart + found;\n            if (from == to && str.length >= (to + text.length) - childStart &&\n                str.slice(to - childStart, to - childStart + text.length) == text)\n                return to;\n        }\n    }\n    return -1;\n}\n// Replace range from-to in an array of view descs with replacement\n// (may be null to just delete). This goes very much against the grain\n// of the rest of this code, which tends to create nodes with the\n// right shape in one go, rather than messing with them after\n// creation, but is necessary in the composition hack.\nfunction replaceNodes(nodes, from, to, view, replacement) {\n    let result = [];\n    for (let i = 0, off = 0; i < nodes.length; i++) {\n        let child = nodes[i], start = off, end = off += child.size;\n        if (start >= to || end <= from) {\n            result.push(child);\n        }\n        else {\n            if (start < from)\n                result.push(child.slice(0, from - start, view));\n            if (replacement) {\n                result.push(replacement);\n                replacement = undefined;\n            }\n            if (end > to)\n                result.push(child.slice(to - start, child.size, view));\n        }\n    }\n    return result;\n}\n\nfunction selectionFromDOM(view, origin = null) {\n    let domSel = view.domSelection(), doc = view.state.doc;\n    if (!domSel.focusNode)\n        return null;\n    let nearestDesc = view.docView.nearestDesc(domSel.focusNode), inWidget = nearestDesc && nearestDesc.size == 0;\n    let head = view.docView.posFromDOM(domSel.focusNode, domSel.focusOffset, 1);\n    if (head < 0)\n        return null;\n    let $head = doc.resolve(head), $anchor, selection;\n    if (selectionCollapsed(domSel)) {\n        $anchor = $head;\n        while (nearestDesc && !nearestDesc.node)\n            nearestDesc = nearestDesc.parent;\n        let nearestDescNode = nearestDesc.node;\n        if (nearestDesc && nearestDescNode.isAtom && NodeSelection.isSelectable(nearestDescNode) && nearestDesc.parent\n            && !(nearestDescNode.isInline && isOnEdge(domSel.focusNode, domSel.focusOffset, nearestDesc.dom))) {\n            let pos = nearestDesc.posBefore;\n            selection = new NodeSelection(head == pos ? $head : doc.resolve(pos));\n        }\n    }\n    else {\n        let anchor = view.docView.posFromDOM(domSel.anchorNode, domSel.anchorOffset, 1);\n        if (anchor < 0)\n            return null;\n        $anchor = doc.resolve(anchor);\n    }\n    if (!selection) {\n        let bias = origin == \"pointer\" || (view.state.selection.head < $head.pos && !inWidget) ? 1 : -1;\n        selection = selectionBetween(view, $anchor, $head, bias);\n    }\n    return selection;\n}\nfunction editorOwnsSelection(view) {\n    return view.editable ? view.hasFocus() :\n        hasSelection(view) && document.activeElement && document.activeElement.contains(view.dom);\n}\nfunction selectionToDOM(view, force = false) {\n    let sel = view.state.selection;\n    syncNodeSelection(view, sel);\n    if (!editorOwnsSelection(view))\n        return;\n    // The delayed drag selection causes issues with Cell Selections\n    // in Safari. And the drag selection delay is to workarond issues\n    // which only present in Chrome.\n    if (!force && view.input.mouseDown && view.input.mouseDown.allowDefault && chrome) {\n        let domSel = view.domSelection(), curSel = view.domObserver.currentSelection;\n        if (domSel.anchorNode && curSel.anchorNode &&\n            isEquivalentPosition(domSel.anchorNode, domSel.anchorOffset, curSel.anchorNode, curSel.anchorOffset)) {\n            view.input.mouseDown.delayedSelectionSync = true;\n            view.domObserver.setCurSelection();\n            return;\n        }\n    }\n    view.domObserver.disconnectSelection();\n    if (view.cursorWrapper) {\n        selectCursorWrapper(view);\n    }\n    else {\n        let { anchor, head } = sel, resetEditableFrom, resetEditableTo;\n        if (brokenSelectBetweenUneditable && !(sel instanceof TextSelection)) {\n            if (!sel.$from.parent.inlineContent)\n                resetEditableFrom = temporarilyEditableNear(view, sel.from);\n            if (!sel.empty && !sel.$from.parent.inlineContent)\n                resetEditableTo = temporarilyEditableNear(view, sel.to);\n        }\n        view.docView.setSelection(anchor, head, view.root, force);\n        if (brokenSelectBetweenUneditable) {\n            if (resetEditableFrom)\n                resetEditable(resetEditableFrom);\n            if (resetEditableTo)\n                resetEditable(resetEditableTo);\n        }\n        if (sel.visible) {\n            view.dom.classList.remove(\"ProseMirror-hideselection\");\n        }\n        else {\n            view.dom.classList.add(\"ProseMirror-hideselection\");\n            if (\"onselectionchange\" in document)\n                removeClassOnSelectionChange(view);\n        }\n    }\n    view.domObserver.setCurSelection();\n    view.domObserver.connectSelection();\n}\n// Kludge to work around Webkit not allowing a selection to start/end\n// between non-editable block nodes. We briefly make something\n// editable, set the selection, then set it uneditable again.\nconst brokenSelectBetweenUneditable = safari || chrome && chrome_version < 63;\nfunction temporarilyEditableNear(view, pos) {\n    let { node, offset } = view.docView.domFromPos(pos, 0);\n    let after = offset < node.childNodes.length ? node.childNodes[offset] : null;\n    let before = offset ? node.childNodes[offset - 1] : null;\n    if (safari && after && after.contentEditable == \"false\")\n        return setEditable(after);\n    if ((!after || after.contentEditable == \"false\") &&\n        (!before || before.contentEditable == \"false\")) {\n        if (after)\n            return setEditable(after);\n        else if (before)\n            return setEditable(before);\n    }\n}\nfunction setEditable(element) {\n    element.contentEditable = \"true\";\n    if (safari && element.draggable) {\n        element.draggable = false;\n        element.wasDraggable = true;\n    }\n    return element;\n}\nfunction resetEditable(element) {\n    element.contentEditable = \"false\";\n    if (element.wasDraggable) {\n        element.draggable = true;\n        element.wasDraggable = null;\n    }\n}\nfunction removeClassOnSelectionChange(view) {\n    let doc = view.dom.ownerDocument;\n    doc.removeEventListener(\"selectionchange\", view.input.hideSelectionGuard);\n    let domSel = view.domSelection();\n    let node = domSel.anchorNode, offset = domSel.anchorOffset;\n    doc.addEventListener(\"selectionchange\", view.input.hideSelectionGuard = () => {\n        if (domSel.anchorNode != node || domSel.anchorOffset != offset) {\n            doc.removeEventListener(\"selectionchange\", view.input.hideSelectionGuard);\n            setTimeout(() => {\n                if (!editorOwnsSelection(view) || view.state.selection.visible)\n                    view.dom.classList.remove(\"ProseMirror-hideselection\");\n            }, 20);\n        }\n    });\n}\nfunction selectCursorWrapper(view) {\n    let domSel = view.domSelection(), range = document.createRange();\n    let node = view.cursorWrapper.dom, img = node.nodeName == \"IMG\";\n    if (img)\n        range.setEnd(node.parentNode, domIndex(node) + 1);\n    else\n        range.setEnd(node, 0);\n    range.collapse(false);\n    domSel.removeAllRanges();\n    domSel.addRange(range);\n    // Kludge to kill 'control selection' in IE11 when selecting an\n    // invisible cursor wrapper, since that would result in those weird\n    // resize handles and a selection that considers the absolutely\n    // positioned wrapper, rather than the root editable node, the\n    // focused element.\n    if (!img && !view.state.selection.visible && ie && ie_version <= 11) {\n        node.disabled = true;\n        node.disabled = false;\n    }\n}\nfunction syncNodeSelection(view, sel) {\n    if (sel instanceof NodeSelection) {\n        let desc = view.docView.descAt(sel.from);\n        if (desc != view.lastSelectedViewDesc) {\n            clearNodeSelection(view);\n            if (desc)\n                desc.selectNode();\n            view.lastSelectedViewDesc = desc;\n        }\n    }\n    else {\n        clearNodeSelection(view);\n    }\n}\n// Clear all DOM statefulness of the last node selection.\nfunction clearNodeSelection(view) {\n    if (view.lastSelectedViewDesc) {\n        if (view.lastSelectedViewDesc.parent)\n            view.lastSelectedViewDesc.deselectNode();\n        view.lastSelectedViewDesc = undefined;\n    }\n}\nfunction selectionBetween(view, $anchor, $head, bias) {\n    return view.someProp(\"createSelectionBetween\", f => f(view, $anchor, $head))\n        || TextSelection.between($anchor, $head, bias);\n}\nfunction hasFocusAndSelection(view) {\n    if (view.editable && view.root.activeElement != view.dom)\n        return false;\n    return hasSelection(view);\n}\nfunction hasSelection(view) {\n    let sel = view.domSelection();\n    if (!sel.anchorNode)\n        return false;\n    try {\n        // Firefox will raise 'permission denied' errors when accessing\n        // properties of `sel.anchorNode` when it's in a generated CSS\n        // element.\n        return view.dom.contains(sel.anchorNode.nodeType == 3 ? sel.anchorNode.parentNode : sel.anchorNode) &&\n            (view.editable || view.dom.contains(sel.focusNode.nodeType == 3 ? sel.focusNode.parentNode : sel.focusNode));\n    }\n    catch (_) {\n        return false;\n    }\n}\nfunction anchorInRightPlace(view) {\n    let anchorDOM = view.docView.domFromPos(view.state.selection.anchor, 0);\n    let domSel = view.domSelection();\n    return isEquivalentPosition(anchorDOM.node, anchorDOM.offset, domSel.anchorNode, domSel.anchorOffset);\n}\n\nfunction moveSelectionBlock(state, dir) {\n    let { $anchor, $head } = state.selection;\n    let $side = dir > 0 ? $anchor.max($head) : $anchor.min($head);\n    let $start = !$side.parent.inlineContent ? $side : $side.depth ? state.doc.resolve(dir > 0 ? $side.after() : $side.before()) : null;\n    return $start && Selection.findFrom($start, dir);\n}\nfunction apply(view, sel) {\n    view.dispatch(view.state.tr.setSelection(sel).scrollIntoView());\n    return true;\n}\nfunction selectHorizontally(view, dir, mods) {\n    let sel = view.state.selection;\n    if (sel instanceof TextSelection) {\n        if (!sel.empty || mods.indexOf(\"s\") > -1) {\n            return false;\n        }\n        else if (view.endOfTextblock(dir > 0 ? \"right\" : \"left\")) {\n            let next = moveSelectionBlock(view.state, dir);\n            if (next && (next instanceof NodeSelection))\n                return apply(view, next);\n            return false;\n        }\n        else if (!(mac && mods.indexOf(\"m\") > -1)) {\n            let $head = sel.$head, node = $head.textOffset ? null : dir < 0 ? $head.nodeBefore : $head.nodeAfter, desc;\n            if (!node || node.isText)\n                return false;\n            let nodePos = dir < 0 ? $head.pos - node.nodeSize : $head.pos;\n            if (!(node.isAtom || (desc = view.docView.descAt(nodePos)) && !desc.contentDOM))\n                return false;\n            if (NodeSelection.isSelectable(node)) {\n                return apply(view, new NodeSelection(dir < 0 ? view.state.doc.resolve($head.pos - node.nodeSize) : $head));\n            }\n            else if (webkit) {\n                // Chrome and Safari will introduce extra pointless cursor\n                // positions around inline uneditable nodes, so we have to\n                // take over and move the cursor past them (#937)\n                return apply(view, new TextSelection(view.state.doc.resolve(dir < 0 ? nodePos : nodePos + node.nodeSize)));\n            }\n            else {\n                return false;\n            }\n        }\n    }\n    else if (sel instanceof NodeSelection && sel.node.isInline) {\n        return apply(view, new TextSelection(dir > 0 ? sel.$to : sel.$from));\n    }\n    else {\n        let next = moveSelectionBlock(view.state, dir);\n        if (next)\n            return apply(view, next);\n        return false;\n    }\n}\nfunction nodeLen(node) {\n    return node.nodeType == 3 ? node.nodeValue.length : node.childNodes.length;\n}\nfunction isIgnorable(dom) {\n    let desc = dom.pmViewDesc;\n    return desc && desc.size == 0 && (dom.nextSibling || dom.nodeName != \"BR\");\n}\n// Make sure the cursor isn't directly after one or more ignored\n// nodes, which will confuse the browser's cursor motion logic.\nfunction skipIgnoredNodesLeft(view) {\n    let sel = view.domSelection();\n    let node = sel.focusNode, offset = sel.focusOffset;\n    if (!node)\n        return;\n    let moveNode, moveOffset, force = false;\n    // Gecko will do odd things when the selection is directly in front\n    // of a non-editable node, so in that case, move it into the next\n    // node if possible. Issue prosemirror/prosemirror#832.\n    if (gecko && node.nodeType == 1 && offset < nodeLen(node) && isIgnorable(node.childNodes[offset]))\n        force = true;\n    for (;;) {\n        if (offset > 0) {\n            if (node.nodeType != 1) {\n                break;\n            }\n            else {\n                let before = node.childNodes[offset - 1];\n                if (isIgnorable(before)) {\n                    moveNode = node;\n                    moveOffset = --offset;\n                }\n                else if (before.nodeType == 3) {\n                    node = before;\n                    offset = node.nodeValue.length;\n                }\n                else\n                    break;\n            }\n        }\n        else if (isBlockNode(node)) {\n            break;\n        }\n        else {\n            let prev = node.previousSibling;\n            while (prev && isIgnorable(prev)) {\n                moveNode = node.parentNode;\n                moveOffset = domIndex(prev);\n                prev = prev.previousSibling;\n            }\n            if (!prev) {\n                node = node.parentNode;\n                if (node == view.dom)\n                    break;\n                offset = 0;\n            }\n            else {\n                node = prev;\n                offset = nodeLen(node);\n            }\n        }\n    }\n    if (force)\n        setSelFocus(view, sel, node, offset);\n    else if (moveNode)\n        setSelFocus(view, sel, moveNode, moveOffset);\n}\n// Make sure the cursor isn't directly before one or more ignored\n// nodes.\nfunction skipIgnoredNodesRight(view) {\n    let sel = view.domSelection();\n    let node = sel.focusNode, offset = sel.focusOffset;\n    if (!node)\n        return;\n    let len = nodeLen(node);\n    let moveNode, moveOffset;\n    for (;;) {\n        if (offset < len) {\n            if (node.nodeType != 1)\n                break;\n            let after = node.childNodes[offset];\n            if (isIgnorable(after)) {\n                moveNode = node;\n                moveOffset = ++offset;\n            }\n            else\n                break;\n        }\n        else if (isBlockNode(node)) {\n            break;\n        }\n        else {\n            let next = node.nextSibling;\n            while (next && isIgnorable(next)) {\n                moveNode = next.parentNode;\n                moveOffset = domIndex(next) + 1;\n                next = next.nextSibling;\n            }\n            if (!next) {\n                node = node.parentNode;\n                if (node == view.dom)\n                    break;\n                offset = len = 0;\n            }\n            else {\n                node = next;\n                offset = 0;\n                len = nodeLen(node);\n            }\n        }\n    }\n    if (moveNode)\n        setSelFocus(view, sel, moveNode, moveOffset);\n}\nfunction isBlockNode(dom) {\n    let desc = dom.pmViewDesc;\n    return desc && desc.node && desc.node.isBlock;\n}\nfunction setSelFocus(view, sel, node, offset) {\n    if (selectionCollapsed(sel)) {\n        let range = document.createRange();\n        range.setEnd(node, offset);\n        range.setStart(node, offset);\n        sel.removeAllRanges();\n        sel.addRange(range);\n    }\n    else if (sel.extend) {\n        sel.extend(node, offset);\n    }\n    view.domObserver.setCurSelection();\n    let { state } = view;\n    // If no state update ends up happening, reset the selection.\n    setTimeout(() => {\n        if (view.state == state)\n            selectionToDOM(view);\n    }, 50);\n}\n// Check whether vertical selection motion would involve node\n// selections. If so, apply it (if not, the result is left to the\n// browser)\nfunction selectVertically(view, dir, mods) {\n    let sel = view.state.selection;\n    if (sel instanceof TextSelection && !sel.empty || mods.indexOf(\"s\") > -1)\n        return false;\n    if (mac && mods.indexOf(\"m\") > -1)\n        return false;\n    let { $from, $to } = sel;\n    if (!$from.parent.inlineContent || view.endOfTextblock(dir < 0 ? \"up\" : \"down\")) {\n        let next = moveSelectionBlock(view.state, dir);\n        if (next && (next instanceof NodeSelection))\n            return apply(view, next);\n    }\n    if (!$from.parent.inlineContent) {\n        let side = dir < 0 ? $from : $to;\n        let beyond = sel instanceof AllSelection ? Selection.near(side, dir) : Selection.findFrom(side, dir);\n        return beyond ? apply(view, beyond) : false;\n    }\n    return false;\n}\nfunction stopNativeHorizontalDelete(view, dir) {\n    if (!(view.state.selection instanceof TextSelection))\n        return true;\n    let { $head, $anchor, empty } = view.state.selection;\n    if (!$head.sameParent($anchor))\n        return true;\n    if (!empty)\n        return false;\n    if (view.endOfTextblock(dir > 0 ? \"forward\" : \"backward\"))\n        return true;\n    let nextNode = !$head.textOffset && (dir < 0 ? $head.nodeBefore : $head.nodeAfter);\n    if (nextNode && !nextNode.isText) {\n        let tr = view.state.tr;\n        if (dir < 0)\n            tr.delete($head.pos - nextNode.nodeSize, $head.pos);\n        else\n            tr.delete($head.pos, $head.pos + nextNode.nodeSize);\n        view.dispatch(tr);\n        return true;\n    }\n    return false;\n}\nfunction switchEditable(view, node, state) {\n    view.domObserver.stop();\n    node.contentEditable = state;\n    view.domObserver.start();\n}\n// Issue #867 / #1090 / https://bugs.chromium.org/p/chromium/issues/detail?id=903821\n// In which Safari (and at some point in the past, Chrome) does really\n// wrong things when the down arrow is pressed when the cursor is\n// directly at the start of a textblock and has an uneditable node\n// after it\nfunction safariDownArrowBug(view) {\n    if (!safari || view.state.selection.$head.parentOffset > 0)\n        return false;\n    let { focusNode, focusOffset } = view.domSelection();\n    if (focusNode && focusNode.nodeType == 1 && focusOffset == 0 &&\n        focusNode.firstChild && focusNode.firstChild.contentEditable == \"false\") {\n        let child = focusNode.firstChild;\n        switchEditable(view, child, \"true\");\n        setTimeout(() => switchEditable(view, child, \"false\"), 20);\n    }\n    return false;\n}\n// A backdrop key mapping used to make sure we always suppress keys\n// that have a dangerous default effect, even if the commands they are\n// bound to return false, and to make sure that cursor-motion keys\n// find a cursor (as opposed to a node selection) when pressed. For\n// cursor-motion keys, the code in the handlers also takes care of\n// block selections.\nfunction getMods(event) {\n    let result = \"\";\n    if (event.ctrlKey)\n        result += \"c\";\n    if (event.metaKey)\n        result += \"m\";\n    if (event.altKey)\n        result += \"a\";\n    if (event.shiftKey)\n        result += \"s\";\n    return result;\n}\nfunction captureKeyDown(view, event) {\n    let code = event.keyCode, mods = getMods(event);\n    if (code == 8 || (mac && code == 72 && mods == \"c\")) { // Backspace, Ctrl-h on Mac\n        return stopNativeHorizontalDelete(view, -1) || skipIgnoredNodesLeft(view);\n    }\n    else if (code == 46 || (mac && code == 68 && mods == \"c\")) { // Delete, Ctrl-d on Mac\n        return stopNativeHorizontalDelete(view, 1) || skipIgnoredNodesRight(view);\n    }\n    else if (code == 13 || code == 27) { // Enter, Esc\n        return true;\n    }\n    else if (code == 37 || (mac && code == 66 && mods == \"c\")) { // Left arrow, Ctrl-b on Mac\n        return selectHorizontally(view, -1, mods) || skipIgnoredNodesLeft(view);\n    }\n    else if (code == 39 || (mac && code == 70 && mods == \"c\")) { // Right arrow, Ctrl-f on Mac\n        return selectHorizontally(view, 1, mods) || skipIgnoredNodesRight(view);\n    }\n    else if (code == 38 || (mac && code == 80 && mods == \"c\")) { // Up arrow, Ctrl-p on Mac\n        return selectVertically(view, -1, mods) || skipIgnoredNodesLeft(view);\n    }\n    else if (code == 40 || (mac && code == 78 && mods == \"c\")) { // Down arrow, Ctrl-n on Mac\n        return safariDownArrowBug(view) || selectVertically(view, 1, mods) || skipIgnoredNodesRight(view);\n    }\n    else if (mods == (mac ? \"m\" : \"c\") &&\n        (code == 66 || code == 73 || code == 89 || code == 90)) { // Mod-[biyz]\n        return true;\n    }\n    return false;\n}\n\nfunction serializeForClipboard(view, slice) {\n    let context = [], { content, openStart, openEnd } = slice;\n    while (openStart > 1 && openEnd > 1 && content.childCount == 1 && content.firstChild.childCount == 1) {\n        openStart--;\n        openEnd--;\n        let node = content.firstChild;\n        context.push(node.type.name, node.attrs != node.type.defaultAttrs ? node.attrs : null);\n        content = node.content;\n    }\n    let serializer = view.someProp(\"clipboardSerializer\") || DOMSerializer.fromSchema(view.state.schema);\n    let doc = detachedDoc(), wrap = doc.createElement(\"div\");\n    wrap.appendChild(serializer.serializeFragment(content, { document: doc }));\n    let firstChild = wrap.firstChild, needsWrap, wrappers = 0;\n    while (firstChild && firstChild.nodeType == 1 && (needsWrap = wrapMap[firstChild.nodeName.toLowerCase()])) {\n        for (let i = needsWrap.length - 1; i >= 0; i--) {\n            let wrapper = doc.createElement(needsWrap[i]);\n            while (wrap.firstChild)\n                wrapper.appendChild(wrap.firstChild);\n            wrap.appendChild(wrapper);\n            wrappers++;\n        }\n        firstChild = wrap.firstChild;\n    }\n    if (firstChild && firstChild.nodeType == 1)\n        firstChild.setAttribute(\"data-pm-slice\", `${openStart} ${openEnd}${wrappers ? ` -${wrappers}` : \"\"} ${JSON.stringify(context)}`);\n    let text = view.someProp(\"clipboardTextSerializer\", f => f(slice)) ||\n        slice.content.textBetween(0, slice.content.size, \"\\n\\n\");\n    return { dom: wrap, text };\n}\n// Read a slice of content from the clipboard (or drop data).\nfunction parseFromClipboard(view, text, html, plainText, $context) {\n    let inCode = $context.parent.type.spec.code;\n    let dom, slice;\n    if (!html && !text)\n        return null;\n    let asText = text && (plainText || inCode || !html);\n    if (asText) {\n        view.someProp(\"transformPastedText\", f => { text = f(text, inCode || plainText); });\n        if (inCode)\n            return text ? new Slice(Fragment.from(view.state.schema.text(text.replace(/\\r\\n?/g, \"\\n\"))), 0, 0) : Slice.empty;\n        let parsed = view.someProp(\"clipboardTextParser\", f => f(text, $context, plainText));\n        if (parsed) {\n            slice = parsed;\n        }\n        else {\n            let marks = $context.marks();\n            let { schema } = view.state, serializer = DOMSerializer.fromSchema(schema);\n            dom = document.createElement(\"div\");\n            text.split(/(?:\\r\\n?|\\n)+/).forEach(block => {\n                let p = dom.appendChild(document.createElement(\"p\"));\n                if (block)\n                    p.appendChild(serializer.serializeNode(schema.text(block, marks)));\n            });\n        }\n    }\n    else {\n        view.someProp(\"transformPastedHTML\", f => { html = f(html); });\n        dom = readHTML(html);\n        if (webkit)\n            restoreReplacedSpaces(dom);\n    }\n    let contextNode = dom && dom.querySelector(\"[data-pm-slice]\");\n    let sliceData = contextNode && /^(\\d+) (\\d+)(?: -(\\d+))? (.*)/.exec(contextNode.getAttribute(\"data-pm-slice\") || \"\");\n    if (sliceData && sliceData[3])\n        for (let i = +sliceData[3]; i > 0 && dom.firstChild; i--)\n            dom = dom.firstChild;\n    if (!slice) {\n        let parser = view.someProp(\"clipboardParser\") || view.someProp(\"domParser\") || DOMParser.fromSchema(view.state.schema);\n        slice = parser.parseSlice(dom, {\n            preserveWhitespace: !!(asText || sliceData),\n            context: $context,\n            ruleFromNode(dom) {\n                if (dom.nodeName == \"BR\" && !dom.nextSibling &&\n                    dom.parentNode && !inlineParents.test(dom.parentNode.nodeName))\n                    return { ignore: true };\n                return null;\n            }\n        });\n    }\n    if (sliceData) {\n        slice = addContext(closeSlice(slice, +sliceData[1], +sliceData[2]), sliceData[4]);\n    }\n    else { // HTML wasn't created by ProseMirror. Make sure top-level siblings are coherent\n        slice = Slice.maxOpen(normalizeSiblings(slice.content, $context), true);\n        if (slice.openStart || slice.openEnd) {\n            let openStart = 0, openEnd = 0;\n            for (let node = slice.content.firstChild; openStart < slice.openStart && !node.type.spec.isolating; openStart++, node = node.firstChild) { }\n            for (let node = slice.content.lastChild; openEnd < slice.openEnd && !node.type.spec.isolating; openEnd++, node = node.lastChild) { }\n            slice = closeSlice(slice, openStart, openEnd);\n        }\n    }\n    view.someProp(\"transformPasted\", f => { slice = f(slice); });\n    return slice;\n}\nconst inlineParents = /^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;\n// Takes a slice parsed with parseSlice, which means there hasn't been\n// any content-expression checking done on the top nodes, tries to\n// find a parent node in the current context that might fit the nodes,\n// and if successful, rebuilds the slice so that it fits into that parent.\n//\n// This addresses the problem that Transform.replace expects a\n// coherent slice, and will fail to place a set of siblings that don't\n// fit anywhere in the schema.\nfunction normalizeSiblings(fragment, $context) {\n    if (fragment.childCount < 2)\n        return fragment;\n    for (let d = $context.depth; d >= 0; d--) {\n        let parent = $context.node(d);\n        let match = parent.contentMatchAt($context.index(d));\n        let lastWrap, result = [];\n        fragment.forEach(node => {\n            if (!result)\n                return;\n            let wrap = match.findWrapping(node.type), inLast;\n            if (!wrap)\n                return result = null;\n            if (inLast = result.length && lastWrap.length && addToSibling(wrap, lastWrap, node, result[result.length - 1], 0)) {\n                result[result.length - 1] = inLast;\n            }\n            else {\n                if (result.length)\n                    result[result.length - 1] = closeRight(result[result.length - 1], lastWrap.length);\n                let wrapped = withWrappers(node, wrap);\n                result.push(wrapped);\n                match = match.matchType(wrapped.type);\n                lastWrap = wrap;\n            }\n        });\n        if (result)\n            return Fragment.from(result);\n    }\n    return fragment;\n}\nfunction withWrappers(node, wrap, from = 0) {\n    for (let i = wrap.length - 1; i >= from; i--)\n        node = wrap[i].create(null, Fragment.from(node));\n    return node;\n}\n// Used to group adjacent nodes wrapped in similar parents by\n// normalizeSiblings into the same parent node\nfunction addToSibling(wrap, lastWrap, node, sibling, depth) {\n    if (depth < wrap.length && depth < lastWrap.length && wrap[depth] == lastWrap[depth]) {\n        let inner = addToSibling(wrap, lastWrap, node, sibling.lastChild, depth + 1);\n        if (inner)\n            return sibling.copy(sibling.content.replaceChild(sibling.childCount - 1, inner));\n        let match = sibling.contentMatchAt(sibling.childCount);\n        if (match.matchType(depth == wrap.length - 1 ? node.type : wrap[depth + 1]))\n            return sibling.copy(sibling.content.append(Fragment.from(withWrappers(node, wrap, depth + 1))));\n    }\n}\nfunction closeRight(node, depth) {\n    if (depth == 0)\n        return node;\n    let fragment = node.content.replaceChild(node.childCount - 1, closeRight(node.lastChild, depth - 1));\n    let fill = node.contentMatchAt(node.childCount).fillBefore(Fragment.empty, true);\n    return node.copy(fragment.append(fill));\n}\nfunction closeRange(fragment, side, from, to, depth, openEnd) {\n    let node = side < 0 ? fragment.firstChild : fragment.lastChild, inner = node.content;\n    if (depth < to - 1)\n        inner = closeRange(inner, side, from, to, depth + 1, openEnd);\n    if (depth >= from)\n        inner = side < 0 ? node.contentMatchAt(0).fillBefore(inner, fragment.childCount > 1 || openEnd <= depth).append(inner)\n            : inner.append(node.contentMatchAt(node.childCount).fillBefore(Fragment.empty, true));\n    return fragment.replaceChild(side < 0 ? 0 : fragment.childCount - 1, node.copy(inner));\n}\nfunction closeSlice(slice, openStart, openEnd) {\n    if (openStart < slice.openStart)\n        slice = new Slice(closeRange(slice.content, -1, openStart, slice.openStart, 0, slice.openEnd), openStart, slice.openEnd);\n    if (openEnd < slice.openEnd)\n        slice = new Slice(closeRange(slice.content, 1, openEnd, slice.openEnd, 0, 0), slice.openStart, openEnd);\n    return slice;\n}\n// Trick from jQuery -- some elements must be wrapped in other\n// elements for innerHTML to work. I.e. if you do `div.innerHTML =\n// \"<td>..</td>\"` the table cells are ignored.\nconst wrapMap = {\n    thead: [\"table\"],\n    tbody: [\"table\"],\n    tfoot: [\"table\"],\n    caption: [\"table\"],\n    colgroup: [\"table\"],\n    col: [\"table\", \"colgroup\"],\n    tr: [\"table\", \"tbody\"],\n    td: [\"table\", \"tbody\", \"tr\"],\n    th: [\"table\", \"tbody\", \"tr\"]\n};\nlet _detachedDoc = null;\nfunction detachedDoc() {\n    return _detachedDoc || (_detachedDoc = document.implementation.createHTMLDocument(\"title\"));\n}\nfunction readHTML(html) {\n    let metas = /^(\\s*<meta [^>]*>)*/.exec(html);\n    if (metas)\n        html = html.slice(metas[0].length);\n    let elt = detachedDoc().createElement(\"div\");\n    let firstTag = /<([a-z][^>\\s]+)/i.exec(html), wrap;\n    if (wrap = firstTag && wrapMap[firstTag[1].toLowerCase()])\n        html = wrap.map(n => \"<\" + n + \">\").join(\"\") + html + wrap.map(n => \"</\" + n + \">\").reverse().join(\"\");\n    elt.innerHTML = html;\n    if (wrap)\n        for (let i = 0; i < wrap.length; i++)\n            elt = elt.querySelector(wrap[i]) || elt;\n    return elt;\n}\n// Webkit browsers do some hard-to-predict replacement of regular\n// spaces with non-breaking spaces when putting content on the\n// clipboard. This tries to convert such non-breaking spaces (which\n// will be wrapped in a plain span on Chrome, a span with class\n// Apple-converted-space on Safari) back to regular spaces.\nfunction restoreReplacedSpaces(dom) {\n    let nodes = dom.querySelectorAll(chrome ? \"span:not([class]):not([style])\" : \"span.Apple-converted-space\");\n    for (let i = 0; i < nodes.length; i++) {\n        let node = nodes[i];\n        if (node.childNodes.length == 1 && node.textContent == \"\\u00a0\" && node.parentNode)\n            node.parentNode.replaceChild(dom.ownerDocument.createTextNode(\" \"), node);\n    }\n}\nfunction addContext(slice, context) {\n    if (!slice.size)\n        return slice;\n    let schema = slice.content.firstChild.type.schema, array;\n    try {\n        array = JSON.parse(context);\n    }\n    catch (e) {\n        return slice;\n    }\n    let { content, openStart, openEnd } = slice;\n    for (let i = array.length - 2; i >= 0; i -= 2) {\n        let type = schema.nodes[array[i]];\n        if (!type || type.hasRequiredAttrs())\n            break;\n        content = Fragment.from(type.create(array[i + 1], content));\n        openStart++;\n        openEnd++;\n    }\n    return new Slice(content, openStart, openEnd);\n}\n\n// A collection of DOM events that occur within the editor, and callback functions\n// to invoke when the event fires.\nconst handlers = {};\nlet editHandlers = {};\nclass InputState {\n    constructor() {\n        this.shiftKey = false;\n        this.mouseDown = null;\n        this.lastKeyCode = null;\n        this.lastKeyCodeTime = 0;\n        this.lastClick = { time: 0, x: 0, y: 0, type: \"\" };\n        this.lastSelectionOrigin = null;\n        this.lastSelectionTime = 0;\n        this.lastIOSEnter = 0;\n        this.lastIOSEnterFallbackTimeout = -1;\n        this.lastAndroidDelete = 0;\n        this.composing = false;\n        this.composingTimeout = -1;\n        this.compositionNodes = [];\n        this.compositionEndedAt = -2e8;\n        this.domChangeCount = 0;\n        this.eventHandlers = Object.create(null);\n        this.hideSelectionGuard = null;\n    }\n}\nfunction initInput(view) {\n    for (let event in handlers) {\n        let handler = handlers[event];\n        view.dom.addEventListener(event, view.input.eventHandlers[event] = (event) => {\n            if (eventBelongsToView(view, event) && !runCustomHandler(view, event) &&\n                (view.editable || !(event.type in editHandlers)))\n                handler(view, event);\n        });\n    }\n    // On Safari, for reasons beyond my understanding, adding an input\n    // event handler makes an issue where the composition vanishes when\n    // you press enter go away.\n    if (safari)\n        view.dom.addEventListener(\"input\", () => null);\n    ensureListeners(view);\n}\nfunction setSelectionOrigin(view, origin) {\n    view.input.lastSelectionOrigin = origin;\n    view.input.lastSelectionTime = Date.now();\n}\nfunction destroyInput(view) {\n    view.domObserver.stop();\n    for (let type in view.input.eventHandlers)\n        view.dom.removeEventListener(type, view.input.eventHandlers[type]);\n    clearTimeout(view.input.composingTimeout);\n    clearTimeout(view.input.lastIOSEnterFallbackTimeout);\n}\nfunction ensureListeners(view) {\n    view.someProp(\"handleDOMEvents\", currentHandlers => {\n        for (let type in currentHandlers)\n            if (!view.input.eventHandlers[type])\n                view.dom.addEventListener(type, view.input.eventHandlers[type] = event => runCustomHandler(view, event));\n    });\n}\nfunction runCustomHandler(view, event) {\n    return view.someProp(\"handleDOMEvents\", handlers => {\n        let handler = handlers[event.type];\n        return handler ? handler(view, event) || event.defaultPrevented : false;\n    });\n}\nfunction eventBelongsToView(view, event) {\n    if (!event.bubbles)\n        return true;\n    if (event.defaultPrevented)\n        return false;\n    for (let node = event.target; node != view.dom; node = node.parentNode)\n        if (!node || node.nodeType == 11 ||\n            (node.pmViewDesc && node.pmViewDesc.stopEvent(event)))\n            return false;\n    return true;\n}\nfunction dispatchEvent(view, event) {\n    if (!runCustomHandler(view, event) && handlers[event.type] &&\n        (view.editable || !(event.type in editHandlers)))\n        handlers[event.type](view, event);\n}\neditHandlers.keydown = (view, _event) => {\n    let event = _event;\n    view.input.shiftKey = event.keyCode == 16 || event.shiftKey;\n    if (inOrNearComposition(view, event))\n        return;\n    view.input.lastKeyCode = event.keyCode;\n    view.input.lastKeyCodeTime = Date.now();\n    // Suppress enter key events on Chrome Android, because those tend\n    // to be part of a confused sequence of composition events fired,\n    // and handling them eagerly tends to corrupt the input.\n    if (android && chrome && event.keyCode == 13)\n        return;\n    if (event.keyCode != 229)\n        view.domObserver.forceFlush();\n    // On iOS, if we preventDefault enter key presses, the virtual\n    // keyboard gets confused. So the hack here is to set a flag that\n    // makes the DOM change code recognize that what just happens should\n    // be replaced by whatever the Enter key handlers do.\n    if (ios && event.keyCode == 13 && !event.ctrlKey && !event.altKey && !event.metaKey) {\n        let now = Date.now();\n        view.input.lastIOSEnter = now;\n        view.input.lastIOSEnterFallbackTimeout = setTimeout(() => {\n            if (view.input.lastIOSEnter == now) {\n                view.someProp(\"handleKeyDown\", f => f(view, keyEvent(13, \"Enter\")));\n                view.input.lastIOSEnter = 0;\n            }\n        }, 200);\n    }\n    else if (view.someProp(\"handleKeyDown\", f => f(view, event)) || captureKeyDown(view, event)) {\n        event.preventDefault();\n    }\n    else {\n        setSelectionOrigin(view, \"key\");\n    }\n};\neditHandlers.keyup = (view, event) => {\n    if (event.keyCode == 16)\n        view.input.shiftKey = false;\n};\neditHandlers.keypress = (view, _event) => {\n    let event = _event;\n    if (inOrNearComposition(view, event) || !event.charCode ||\n        event.ctrlKey && !event.altKey || mac && event.metaKey)\n        return;\n    if (view.someProp(\"handleKeyPress\", f => f(view, event))) {\n        event.preventDefault();\n        return;\n    }\n    let sel = view.state.selection;\n    if (!(sel instanceof TextSelection) || !sel.$from.sameParent(sel.$to)) {\n        let text = String.fromCharCode(event.charCode);\n        if (!view.someProp(\"handleTextInput\", f => f(view, sel.$from.pos, sel.$to.pos, text)))\n            view.dispatch(view.state.tr.insertText(text).scrollIntoView());\n        event.preventDefault();\n    }\n};\nfunction eventCoords(event) { return { left: event.clientX, top: event.clientY }; }\nfunction isNear(event, click) {\n    let dx = click.x - event.clientX, dy = click.y - event.clientY;\n    return dx * dx + dy * dy < 100;\n}\nfunction runHandlerOnContext(view, propName, pos, inside, event) {\n    if (inside == -1)\n        return false;\n    let $pos = view.state.doc.resolve(inside);\n    for (let i = $pos.depth + 1; i > 0; i--) {\n        if (view.someProp(propName, f => i > $pos.depth ? f(view, pos, $pos.nodeAfter, $pos.before(i), event, true)\n            : f(view, pos, $pos.node(i), $pos.before(i), event, false)))\n            return true;\n    }\n    return false;\n}\nfunction updateSelection(view, selection, origin) {\n    if (!view.focused)\n        view.focus();\n    let tr = view.state.tr.setSelection(selection);\n    if (origin == \"pointer\")\n        tr.setMeta(\"pointer\", true);\n    view.dispatch(tr);\n}\nfunction selectClickedLeaf(view, inside) {\n    if (inside == -1)\n        return false;\n    let $pos = view.state.doc.resolve(inside), node = $pos.nodeAfter;\n    if (node && node.isAtom && NodeSelection.isSelectable(node)) {\n        updateSelection(view, new NodeSelection($pos), \"pointer\");\n        return true;\n    }\n    return false;\n}\nfunction selectClickedNode(view, inside) {\n    if (inside == -1)\n        return false;\n    let sel = view.state.selection, selectedNode, selectAt;\n    if (sel instanceof NodeSelection)\n        selectedNode = sel.node;\n    let $pos = view.state.doc.resolve(inside);\n    for (let i = $pos.depth + 1; i > 0; i--) {\n        let node = i > $pos.depth ? $pos.nodeAfter : $pos.node(i);\n        if (NodeSelection.isSelectable(node)) {\n            if (selectedNode && sel.$from.depth > 0 &&\n                i >= sel.$from.depth && $pos.before(sel.$from.depth + 1) == sel.$from.pos)\n                selectAt = $pos.before(sel.$from.depth);\n            else\n                selectAt = $pos.before(i);\n            break;\n        }\n    }\n    if (selectAt != null) {\n        updateSelection(view, NodeSelection.create(view.state.doc, selectAt), \"pointer\");\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nfunction handleSingleClick(view, pos, inside, event, selectNode) {\n    return runHandlerOnContext(view, \"handleClickOn\", pos, inside, event) ||\n        view.someProp(\"handleClick\", f => f(view, pos, event)) ||\n        (selectNode ? selectClickedNode(view, inside) : selectClickedLeaf(view, inside));\n}\nfunction handleDoubleClick(view, pos, inside, event) {\n    return runHandlerOnContext(view, \"handleDoubleClickOn\", pos, inside, event) ||\n        view.someProp(\"handleDoubleClick\", f => f(view, pos, event));\n}\nfunction handleTripleClick(view, pos, inside, event) {\n    return runHandlerOnContext(view, \"handleTripleClickOn\", pos, inside, event) ||\n        view.someProp(\"handleTripleClick\", f => f(view, pos, event)) ||\n        defaultTripleClick(view, inside, event);\n}\nfunction defaultTripleClick(view, inside, event) {\n    if (event.button != 0)\n        return false;\n    let doc = view.state.doc;\n    if (inside == -1) {\n        if (doc.inlineContent) {\n            updateSelection(view, TextSelection.create(doc, 0, doc.content.size), \"pointer\");\n            return true;\n        }\n        return false;\n    }\n    let $pos = doc.resolve(inside);\n    for (let i = $pos.depth + 1; i > 0; i--) {\n        let node = i > $pos.depth ? $pos.nodeAfter : $pos.node(i);\n        let nodePos = $pos.before(i);\n        if (node.inlineContent)\n            updateSelection(view, TextSelection.create(doc, nodePos + 1, nodePos + 1 + node.content.size), \"pointer\");\n        else if (NodeSelection.isSelectable(node))\n            updateSelection(view, NodeSelection.create(doc, nodePos), \"pointer\");\n        else\n            continue;\n        return true;\n    }\n}\nfunction forceDOMFlush(view) {\n    return endComposition(view);\n}\nconst selectNodeModifier = mac ? \"metaKey\" : \"ctrlKey\";\nhandlers.mousedown = (view, _event) => {\n    let event = _event;\n    view.input.shiftKey = event.shiftKey;\n    let flushed = forceDOMFlush(view);\n    let now = Date.now(), type = \"singleClick\";\n    if (now - view.input.lastClick.time < 500 && isNear(event, view.input.lastClick) && !event[selectNodeModifier]) {\n        if (view.input.lastClick.type == \"singleClick\")\n            type = \"doubleClick\";\n        else if (view.input.lastClick.type == \"doubleClick\")\n            type = \"tripleClick\";\n    }\n    view.input.lastClick = { time: now, x: event.clientX, y: event.clientY, type };\n    let pos = view.posAtCoords(eventCoords(event));\n    if (!pos)\n        return;\n    if (type == \"singleClick\") {\n        if (view.input.mouseDown)\n            view.input.mouseDown.done();\n        view.input.mouseDown = new MouseDown(view, pos, event, !!flushed);\n    }\n    else if ((type == \"doubleClick\" ? handleDoubleClick : handleTripleClick)(view, pos.pos, pos.inside, event)) {\n        event.preventDefault();\n    }\n    else {\n        setSelectionOrigin(view, \"pointer\");\n    }\n};\nclass MouseDown {\n    constructor(view, pos, event, flushed) {\n        this.view = view;\n        this.pos = pos;\n        this.event = event;\n        this.flushed = flushed;\n        this.delayedSelectionSync = false;\n        this.mightDrag = null;\n        this.startDoc = view.state.doc;\n        this.selectNode = !!event[selectNodeModifier];\n        this.allowDefault = event.shiftKey;\n        let targetNode, targetPos;\n        if (pos.inside > -1) {\n            targetNode = view.state.doc.nodeAt(pos.inside);\n            targetPos = pos.inside;\n        }\n        else {\n            let $pos = view.state.doc.resolve(pos.pos);\n            targetNode = $pos.parent;\n            targetPos = $pos.depth ? $pos.before() : 0;\n        }\n        const target = flushed ? null : event.target;\n        const targetDesc = target ? view.docView.nearestDesc(target, true) : null;\n        this.target = targetDesc ? targetDesc.dom : null;\n        let { selection } = view.state;\n        if (event.button == 0 &&\n            targetNode.type.spec.draggable && targetNode.type.spec.selectable !== false ||\n            selection instanceof NodeSelection && selection.from <= targetPos && selection.to > targetPos)\n            this.mightDrag = {\n                node: targetNode,\n                pos: targetPos,\n                addAttr: !!(this.target && !this.target.draggable),\n                setUneditable: !!(this.target && gecko && !this.target.hasAttribute(\"contentEditable\"))\n            };\n        if (this.target && this.mightDrag && (this.mightDrag.addAttr || this.mightDrag.setUneditable)) {\n            this.view.domObserver.stop();\n            if (this.mightDrag.addAttr)\n                this.target.draggable = true;\n            if (this.mightDrag.setUneditable)\n                setTimeout(() => {\n                    if (this.view.input.mouseDown == this)\n                        this.target.setAttribute(\"contentEditable\", \"false\");\n                }, 20);\n            this.view.domObserver.start();\n        }\n        view.root.addEventListener(\"mouseup\", this.up = this.up.bind(this));\n        view.root.addEventListener(\"mousemove\", this.move = this.move.bind(this));\n        setSelectionOrigin(view, \"pointer\");\n    }\n    done() {\n        this.view.root.removeEventListener(\"mouseup\", this.up);\n        this.view.root.removeEventListener(\"mousemove\", this.move);\n        if (this.mightDrag && this.target) {\n            this.view.domObserver.stop();\n            if (this.mightDrag.addAttr)\n                this.target.removeAttribute(\"draggable\");\n            if (this.mightDrag.setUneditable)\n                this.target.removeAttribute(\"contentEditable\");\n            this.view.domObserver.start();\n        }\n        if (this.delayedSelectionSync)\n            setTimeout(() => selectionToDOM(this.view));\n        this.view.input.mouseDown = null;\n    }\n    up(event) {\n        this.done();\n        if (!this.view.dom.contains(event.target))\n            return;\n        let pos = this.pos;\n        if (this.view.state.doc != this.startDoc)\n            pos = this.view.posAtCoords(eventCoords(event));\n        if (this.allowDefault || !pos) {\n            setSelectionOrigin(this.view, \"pointer\");\n        }\n        else if (handleSingleClick(this.view, pos.pos, pos.inside, event, this.selectNode)) {\n            event.preventDefault();\n        }\n        else if (event.button == 0 &&\n            (this.flushed ||\n                // Safari ignores clicks on draggable elements\n                (safari && this.mightDrag && !this.mightDrag.node.isAtom) ||\n                // Chrome will sometimes treat a node selection as a\n                // cursor, but still report that the node is selected\n                // when asked through getSelection. You'll then get a\n                // situation where clicking at the point where that\n                // (hidden) cursor is doesn't change the selection, and\n                // thus doesn't get a reaction from ProseMirror. This\n                // works around that.\n                (chrome && !(this.view.state.selection instanceof TextSelection) &&\n                    Math.min(Math.abs(pos.pos - this.view.state.selection.from), Math.abs(pos.pos - this.view.state.selection.to)) <= 2))) {\n            updateSelection(this.view, Selection.near(this.view.state.doc.resolve(pos.pos)), \"pointer\");\n            event.preventDefault();\n        }\n        else {\n            setSelectionOrigin(this.view, \"pointer\");\n        }\n    }\n    move(event) {\n        if (!this.allowDefault && (Math.abs(this.event.x - event.clientX) > 4 ||\n            Math.abs(this.event.y - event.clientY) > 4))\n            this.allowDefault = true;\n        setSelectionOrigin(this.view, \"pointer\");\n        if (event.buttons == 0)\n            this.done();\n    }\n}\nhandlers.touchdown = view => {\n    forceDOMFlush(view);\n    setSelectionOrigin(view, \"pointer\");\n};\nhandlers.contextmenu = view => forceDOMFlush(view);\nfunction inOrNearComposition(view, event) {\n    if (view.composing)\n        return true;\n    // See https://www.stum.de/2016/06/24/handling-ime-events-in-javascript/.\n    // On Japanese input method editors (IMEs), the Enter key is used to confirm character\n    // selection. On Safari, when Enter is pressed, compositionend and keydown events are\n    // emitted. The keydown event triggers newline insertion, which we don't want.\n    // This method returns true if the keydown event should be ignored.\n    // We only ignore it once, as pressing Enter a second time *should* insert a newline.\n    // Furthermore, the keydown event timestamp must be close to the compositionEndedAt timestamp.\n    // This guards against the case where compositionend is triggered without the keyboard\n    // (e.g. character confirmation may be done with the mouse), and keydown is triggered\n    // afterwards- we wouldn't want to ignore the keydown event in this case.\n    if (safari && Math.abs(event.timeStamp - view.input.compositionEndedAt) < 500) {\n        view.input.compositionEndedAt = -2e8;\n        return true;\n    }\n    return false;\n}\n// Drop active composition after 5 seconds of inactivity on Android\nconst timeoutComposition = android ? 5000 : -1;\neditHandlers.compositionstart = editHandlers.compositionupdate = view => {\n    if (!view.composing) {\n        view.domObserver.flush();\n        let { state } = view, $pos = state.selection.$from;\n        if (state.selection.empty &&\n            (state.storedMarks ||\n                (!$pos.textOffset && $pos.parentOffset && $pos.nodeBefore.marks.some(m => m.type.spec.inclusive === false)))) {\n            // Need to wrap the cursor in mark nodes different from the ones in the DOM context\n            view.markCursor = view.state.storedMarks || $pos.marks();\n            endComposition(view, true);\n            view.markCursor = null;\n        }\n        else {\n            endComposition(view);\n            // In firefox, if the cursor is after but outside a marked node,\n            // the inserted text won't inherit the marks. So this moves it\n            // inside if necessary.\n            if (gecko && state.selection.empty && $pos.parentOffset && !$pos.textOffset && $pos.nodeBefore.marks.length) {\n                let sel = view.domSelection();\n                for (let node = sel.focusNode, offset = sel.focusOffset; node && node.nodeType == 1 && offset != 0;) {\n                    let before = offset < 0 ? node.lastChild : node.childNodes[offset - 1];\n                    if (!before)\n                        break;\n                    if (before.nodeType == 3) {\n                        sel.collapse(before, before.nodeValue.length);\n                        break;\n                    }\n                    else {\n                        node = before;\n                        offset = -1;\n                    }\n                }\n            }\n        }\n        view.input.composing = true;\n    }\n    scheduleComposeEnd(view, timeoutComposition);\n};\neditHandlers.compositionend = (view, event) => {\n    if (view.composing) {\n        view.input.composing = false;\n        view.input.compositionEndedAt = event.timeStamp;\n        scheduleComposeEnd(view, 20);\n    }\n};\nfunction scheduleComposeEnd(view, delay) {\n    clearTimeout(view.input.composingTimeout);\n    if (delay > -1)\n        view.input.composingTimeout = setTimeout(() => endComposition(view), delay);\n}\nfunction clearComposition(view) {\n    if (view.composing) {\n        view.input.composing = false;\n        view.input.compositionEndedAt = timestampFromCustomEvent();\n    }\n    while (view.input.compositionNodes.length > 0)\n        view.input.compositionNodes.pop().markParentsDirty();\n}\nfunction timestampFromCustomEvent() {\n    let event = document.createEvent(\"Event\");\n    event.initEvent(\"event\", true, true);\n    return event.timeStamp;\n}\n/**\n@internal\n*/\nfunction endComposition(view, forceUpdate = false) {\n    if (android && view.domObserver.flushingSoon >= 0)\n        return;\n    view.domObserver.forceFlush();\n    clearComposition(view);\n    if (forceUpdate || view.docView && view.docView.dirty) {\n        let sel = selectionFromDOM(view);\n        if (sel && !sel.eq(view.state.selection))\n            view.dispatch(view.state.tr.setSelection(sel));\n        else\n            view.updateState(view.state);\n        return true;\n    }\n    return false;\n}\nfunction captureCopy(view, dom) {\n    // The extra wrapper is somehow necessary on IE/Edge to prevent the\n    // content from being mangled when it is put onto the clipboard\n    if (!view.dom.parentNode)\n        return;\n    let wrap = view.dom.parentNode.appendChild(document.createElement(\"div\"));\n    wrap.appendChild(dom);\n    wrap.style.cssText = \"position: fixed; left: -10000px; top: 10px\";\n    let sel = getSelection(), range = document.createRange();\n    range.selectNodeContents(dom);\n    // Done because IE will fire a selectionchange moving the selection\n    // to its start when removeAllRanges is called and the editor still\n    // has focus (which will mess up the editor's selection state).\n    view.dom.blur();\n    sel.removeAllRanges();\n    sel.addRange(range);\n    setTimeout(() => {\n        if (wrap.parentNode)\n            wrap.parentNode.removeChild(wrap);\n        view.focus();\n    }, 50);\n}\n// This is very crude, but unfortunately both these browsers _pretend_\n// that they have a clipboard APIall the objects and methods are\n// there, they just don't work, and they are hard to test.\nconst brokenClipboardAPI = (ie && ie_version < 15) ||\n    (ios && webkit_version < 604);\nhandlers.copy = editHandlers.cut = (view, _event) => {\n    let event = _event;\n    let sel = view.state.selection, cut = event.type == \"cut\";\n    if (sel.empty)\n        return;\n    // IE and Edge's clipboard interface is completely broken\n    let data = brokenClipboardAPI ? null : event.clipboardData;\n    let slice = sel.content(), { dom, text } = serializeForClipboard(view, slice);\n    if (data) {\n        event.preventDefault();\n        data.clearData();\n        data.setData(\"text/html\", dom.innerHTML);\n        data.setData(\"text/plain\", text);\n    }\n    else {\n        captureCopy(view, dom);\n    }\n    if (cut)\n        view.dispatch(view.state.tr.deleteSelection().scrollIntoView().setMeta(\"uiEvent\", \"cut\"));\n};\nfunction sliceSingleNode(slice) {\n    return slice.openStart == 0 && slice.openEnd == 0 && slice.content.childCount == 1 ? slice.content.firstChild : null;\n}\nfunction capturePaste(view, event) {\n    if (!view.dom.parentNode)\n        return;\n    let plainText = view.input.shiftKey || view.state.selection.$from.parent.type.spec.code;\n    let target = view.dom.parentNode.appendChild(document.createElement(plainText ? \"textarea\" : \"div\"));\n    if (!plainText)\n        target.contentEditable = \"true\";\n    target.style.cssText = \"position: fixed; left: -10000px; top: 10px\";\n    target.focus();\n    setTimeout(() => {\n        view.focus();\n        if (target.parentNode)\n            target.parentNode.removeChild(target);\n        if (plainText)\n            doPaste(view, target.value, null, event);\n        else\n            doPaste(view, target.textContent, target.innerHTML, event);\n    }, 50);\n}\nfunction doPaste(view, text, html, event) {\n    let slice = parseFromClipboard(view, text, html, view.input.shiftKey, view.state.selection.$from);\n    if (view.someProp(\"handlePaste\", f => f(view, event, slice || Slice.empty)))\n        return true;\n    if (!slice)\n        return false;\n    let singleNode = sliceSingleNode(slice);\n    let tr = singleNode\n        ? view.state.tr.replaceSelectionWith(singleNode, view.input.shiftKey)\n        : view.state.tr.replaceSelection(slice);\n    view.dispatch(tr.scrollIntoView().setMeta(\"paste\", true).setMeta(\"uiEvent\", \"paste\"));\n    return true;\n}\neditHandlers.paste = (view, _event) => {\n    let event = _event;\n    // Handling paste from JavaScript during composition is very poorly\n    // handled by browsers, so as a dodgy but preferable kludge, we just\n    // let the browser do its native thing there, except on Android,\n    // where the editor is almost always composing.\n    if (view.composing && !android)\n        return;\n    let data = brokenClipboardAPI ? null : event.clipboardData;\n    if (data && doPaste(view, data.getData(\"text/plain\"), data.getData(\"text/html\"), event))\n        event.preventDefault();\n    else\n        capturePaste(view, event);\n};\nclass Dragging {\n    constructor(slice, move) {\n        this.slice = slice;\n        this.move = move;\n    }\n}\nconst dragCopyModifier = mac ? \"altKey\" : \"ctrlKey\";\nhandlers.dragstart = (view, _event) => {\n    let event = _event;\n    let mouseDown = view.input.mouseDown;\n    if (mouseDown)\n        mouseDown.done();\n    if (!event.dataTransfer)\n        return;\n    let sel = view.state.selection;\n    let pos = sel.empty ? null : view.posAtCoords(eventCoords(event));\n    if (pos && pos.pos >= sel.from && pos.pos <= (sel instanceof NodeSelection ? sel.to - 1 : sel.to)) ;\n    else if (mouseDown && mouseDown.mightDrag) {\n        view.dispatch(view.state.tr.setSelection(NodeSelection.create(view.state.doc, mouseDown.mightDrag.pos)));\n    }\n    else if (event.target && event.target.nodeType == 1) {\n        let desc = view.docView.nearestDesc(event.target, true);\n        if (desc && desc.node.type.spec.draggable && desc != view.docView)\n            view.dispatch(view.state.tr.setSelection(NodeSelection.create(view.state.doc, desc.posBefore)));\n    }\n    let slice = view.state.selection.content(), { dom, text } = serializeForClipboard(view, slice);\n    event.dataTransfer.clearData();\n    event.dataTransfer.setData(brokenClipboardAPI ? \"Text\" : \"text/html\", dom.innerHTML);\n    // See https://github.com/ProseMirror/prosemirror/issues/1156\n    event.dataTransfer.effectAllowed = \"copyMove\";\n    if (!brokenClipboardAPI)\n        event.dataTransfer.setData(\"text/plain\", text);\n    view.dragging = new Dragging(slice, !event[dragCopyModifier]);\n};\nhandlers.dragend = view => {\n    let dragging = view.dragging;\n    window.setTimeout(() => {\n        if (view.dragging == dragging)\n            view.dragging = null;\n    }, 50);\n};\neditHandlers.dragover = editHandlers.dragenter = (_, e) => e.preventDefault();\neditHandlers.drop = (view, _event) => {\n    let event = _event;\n    let dragging = view.dragging;\n    view.dragging = null;\n    if (!event.dataTransfer)\n        return;\n    let eventPos = view.posAtCoords(eventCoords(event));\n    if (!eventPos)\n        return;\n    let $mouse = view.state.doc.resolve(eventPos.pos);\n    if (!$mouse)\n        return;\n    let slice = dragging && dragging.slice;\n    if (slice) {\n        view.someProp(\"transformPasted\", f => { slice = f(slice); });\n    }\n    else {\n        slice = parseFromClipboard(view, event.dataTransfer.getData(brokenClipboardAPI ? \"Text\" : \"text/plain\"), brokenClipboardAPI ? null : event.dataTransfer.getData(\"text/html\"), false, $mouse);\n    }\n    let move = !!(dragging && !event[dragCopyModifier]);\n    if (view.someProp(\"handleDrop\", f => f(view, event, slice || Slice.empty, move))) {\n        event.preventDefault();\n        return;\n    }\n    if (!slice)\n        return;\n    event.preventDefault();\n    let insertPos = slice ? dropPoint(view.state.doc, $mouse.pos, slice) : $mouse.pos;\n    if (insertPos == null)\n        insertPos = $mouse.pos;\n    let tr = view.state.tr;\n    if (move)\n        tr.deleteSelection();\n    let pos = tr.mapping.map(insertPos);\n    let isNode = slice.openStart == 0 && slice.openEnd == 0 && slice.content.childCount == 1;\n    let beforeInsert = tr.doc;\n    if (isNode)\n        tr.replaceRangeWith(pos, pos, slice.content.firstChild);\n    else\n        tr.replaceRange(pos, pos, slice);\n    if (tr.doc.eq(beforeInsert))\n        return;\n    let $pos = tr.doc.resolve(pos);\n    if (isNode && NodeSelection.isSelectable(slice.content.firstChild) &&\n        $pos.nodeAfter && $pos.nodeAfter.sameMarkup(slice.content.firstChild)) {\n        tr.setSelection(new NodeSelection($pos));\n    }\n    else {\n        let end = tr.mapping.map(insertPos);\n        tr.mapping.maps[tr.mapping.maps.length - 1].forEach((_from, _to, _newFrom, newTo) => end = newTo);\n        tr.setSelection(selectionBetween(view, $pos, tr.doc.resolve(end)));\n    }\n    view.focus();\n    view.dispatch(tr.setMeta(\"uiEvent\", \"drop\"));\n};\nhandlers.focus = view => {\n    if (!view.focused) {\n        view.domObserver.stop();\n        view.dom.classList.add(\"ProseMirror-focused\");\n        view.domObserver.start();\n        view.focused = true;\n        setTimeout(() => {\n            if (view.docView && view.hasFocus() && !view.domObserver.currentSelection.eq(view.domSelection()))\n                selectionToDOM(view);\n        }, 20);\n    }\n};\nhandlers.blur = (view, _event) => {\n    let event = _event;\n    if (view.focused) {\n        view.domObserver.stop();\n        view.dom.classList.remove(\"ProseMirror-focused\");\n        view.domObserver.start();\n        if (event.relatedTarget && view.dom.contains(event.relatedTarget))\n            view.domObserver.currentSelection.clear();\n        view.focused = false;\n    }\n};\nhandlers.beforeinput = (view, _event) => {\n    let event = _event;\n    // We should probably do more with beforeinput events, but support\n    // is so spotty that I'm still waiting to see where they are going.\n    // Very specific hack to deal with backspace sometimes failing on\n    // Chrome Android when after an uneditable node.\n    if (chrome && android && event.inputType == \"deleteContentBackward\") {\n        view.domObserver.flushSoon();\n        let { domChangeCount } = view.input;\n        setTimeout(() => {\n            if (view.input.domChangeCount != domChangeCount)\n                return; // Event already had some effect\n            // This bug tends to close the virtual keyboard, so we refocus\n            view.dom.blur();\n            view.focus();\n            if (view.someProp(\"handleKeyDown\", f => f(view, keyEvent(8, \"Backspace\"))))\n                return;\n            let { $cursor } = view.state.selection;\n            // Crude approximation of backspace behavior when no command handled it\n            if ($cursor && $cursor.pos > 0)\n                view.dispatch(view.state.tr.delete($cursor.pos - 1, $cursor.pos).scrollIntoView());\n        }, 50);\n    }\n};\n// Make sure all handlers get registered\nfor (let prop in editHandlers)\n    handlers[prop] = editHandlers[prop];\n\nfunction compareObjs(a, b) {\n    if (a == b)\n        return true;\n    for (let p in a)\n        if (a[p] !== b[p])\n            return false;\n    for (let p in b)\n        if (!(p in a))\n            return false;\n    return true;\n}\nclass WidgetType {\n    constructor(toDOM, spec) {\n        this.toDOM = toDOM;\n        this.spec = spec || noSpec;\n        this.side = this.spec.side || 0;\n    }\n    map(mapping, span, offset, oldOffset) {\n        let { pos, deleted } = mapping.mapResult(span.from + oldOffset, this.side < 0 ? -1 : 1);\n        return deleted ? null : new Decoration(pos - offset, pos - offset, this);\n    }\n    valid() { return true; }\n    eq(other) {\n        return this == other ||\n            (other instanceof WidgetType &&\n                (this.spec.key && this.spec.key == other.spec.key ||\n                    this.toDOM == other.toDOM && compareObjs(this.spec, other.spec)));\n    }\n    destroy(node) {\n        if (this.spec.destroy)\n            this.spec.destroy(node);\n    }\n}\nclass InlineType {\n    constructor(attrs, spec) {\n        this.attrs = attrs;\n        this.spec = spec || noSpec;\n    }\n    map(mapping, span, offset, oldOffset) {\n        let from = mapping.map(span.from + oldOffset, this.spec.inclusiveStart ? -1 : 1) - offset;\n        let to = mapping.map(span.to + oldOffset, this.spec.inclusiveEnd ? 1 : -1) - offset;\n        return from >= to ? null : new Decoration(from, to, this);\n    }\n    valid(_, span) { return span.from < span.to; }\n    eq(other) {\n        return this == other ||\n            (other instanceof InlineType && compareObjs(this.attrs, other.attrs) &&\n                compareObjs(this.spec, other.spec));\n    }\n    static is(span) { return span.type instanceof InlineType; }\n    destroy() { }\n}\nclass NodeType {\n    constructor(attrs, spec) {\n        this.attrs = attrs;\n        this.spec = spec || noSpec;\n    }\n    map(mapping, span, offset, oldOffset) {\n        let from = mapping.mapResult(span.from + oldOffset, 1);\n        if (from.deleted)\n            return null;\n        let to = mapping.mapResult(span.to + oldOffset, -1);\n        if (to.deleted || to.pos <= from.pos)\n            return null;\n        return new Decoration(from.pos - offset, to.pos - offset, this);\n    }\n    valid(node, span) {\n        let { index, offset } = node.content.findIndex(span.from), child;\n        return offset == span.from && !(child = node.child(index)).isText && offset + child.nodeSize == span.to;\n    }\n    eq(other) {\n        return this == other ||\n            (other instanceof NodeType && compareObjs(this.attrs, other.attrs) &&\n                compareObjs(this.spec, other.spec));\n    }\n    destroy() { }\n}\n/**\nDecoration objects can be provided to the view through the\n[`decorations` prop](https://prosemirror.net/docs/ref/#view.EditorProps.decorations). They come in\nseveral variantssee the static members of this class for details.\n*/\nclass Decoration {\n    /**\n    @internal\n    */\n    constructor(\n    /**\n    The start position of the decoration.\n    */\n    from, \n    /**\n    The end position. Will be the same as `from` for [widget\n    decorations](https://prosemirror.net/docs/ref/#view.Decoration^widget).\n    */\n    to, \n    /**\n    @internal\n    */\n    type) {\n        this.from = from;\n        this.to = to;\n        this.type = type;\n    }\n    /**\n    @internal\n    */\n    copy(from, to) {\n        return new Decoration(from, to, this.type);\n    }\n    /**\n    @internal\n    */\n    eq(other, offset = 0) {\n        return this.type.eq(other.type) && this.from + offset == other.from && this.to + offset == other.to;\n    }\n    /**\n    @internal\n    */\n    map(mapping, offset, oldOffset) {\n        return this.type.map(mapping, this, offset, oldOffset);\n    }\n    /**\n    Creates a widget decoration, which is a DOM node that's shown in\n    the document at the given position. It is recommended that you\n    delay rendering the widget by passing a function that will be\n    called when the widget is actually drawn in a view, but you can\n    also directly pass a DOM node. `getPos` can be used to find the\n    widget's current document position.\n    */\n    static widget(pos, toDOM, spec) {\n        return new Decoration(pos, pos, new WidgetType(toDOM, spec));\n    }\n    /**\n    Creates an inline decoration, which adds the given attributes to\n    each inline node between `from` and `to`.\n    */\n    static inline(from, to, attrs, spec) {\n        return new Decoration(from, to, new InlineType(attrs, spec));\n    }\n    /**\n    Creates a node decoration. `from` and `to` should point precisely\n    before and after a node in the document. That node, and only that\n    node, will receive the given attributes.\n    */\n    static node(from, to, attrs, spec) {\n        return new Decoration(from, to, new NodeType(attrs, spec));\n    }\n    /**\n    The spec provided when creating this decoration. Can be useful\n    if you've stored extra information in that object.\n    */\n    get spec() { return this.type.spec; }\n    /**\n    @internal\n    */\n    get inline() { return this.type instanceof InlineType; }\n}\nconst none = [], noSpec = {};\n/**\nA collection of [decorations](https://prosemirror.net/docs/ref/#view.Decoration), organized in such\na way that the drawing algorithm can efficiently use and compare\nthem. This is a persistent data structureit is not modified,\nupdates create a new value.\n*/\nclass DecorationSet {\n    /**\n    @internal\n    */\n    constructor(local, children) {\n        this.local = local.length ? local : none;\n        this.children = children.length ? children : none;\n    }\n    /**\n    Create a set of decorations, using the structure of the given\n    document.\n    */\n    static create(doc, decorations) {\n        return decorations.length ? buildTree(decorations, doc, 0, noSpec) : empty;\n    }\n    /**\n    Find all decorations in this set which touch the given range\n    (including decorations that start or end directly at the\n    boundaries) and match the given predicate on their spec. When\n    `start` and `end` are omitted, all decorations in the set are\n    considered. When `predicate` isn't given, all decorations are\n    assumed to match.\n    */\n    find(start, end, predicate) {\n        let result = [];\n        this.findInner(start == null ? 0 : start, end == null ? 1e9 : end, result, 0, predicate);\n        return result;\n    }\n    findInner(start, end, result, offset, predicate) {\n        for (let i = 0; i < this.local.length; i++) {\n            let span = this.local[i];\n            if (span.from <= end && span.to >= start && (!predicate || predicate(span.spec)))\n                result.push(span.copy(span.from + offset, span.to + offset));\n        }\n        for (let i = 0; i < this.children.length; i += 3) {\n            if (this.children[i] < end && this.children[i + 1] > start) {\n                let childOff = this.children[i] + 1;\n                this.children[i + 2].findInner(start - childOff, end - childOff, result, offset + childOff, predicate);\n            }\n        }\n    }\n    /**\n    Map the set of decorations in response to a change in the\n    document.\n    */\n    map(mapping, doc, options) {\n        if (this == empty || mapping.maps.length == 0)\n            return this;\n        return this.mapInner(mapping, doc, 0, 0, options || noSpec);\n    }\n    /**\n    @internal\n    */\n    mapInner(mapping, node, offset, oldOffset, options) {\n        let newLocal;\n        for (let i = 0; i < this.local.length; i++) {\n            let mapped = this.local[i].map(mapping, offset, oldOffset);\n            if (mapped && mapped.type.valid(node, mapped))\n                (newLocal || (newLocal = [])).push(mapped);\n            else if (options.onRemove)\n                options.onRemove(this.local[i].spec);\n        }\n        if (this.children.length)\n            return mapChildren(this.children, newLocal || [], mapping, node, offset, oldOffset, options);\n        else\n            return newLocal ? new DecorationSet(newLocal.sort(byPos), none) : empty;\n    }\n    /**\n    Add the given array of decorations to the ones in the set,\n    producing a new set. Needs access to the current document to\n    create the appropriate tree structure.\n    */\n    add(doc, decorations) {\n        if (!decorations.length)\n            return this;\n        if (this == empty)\n            return DecorationSet.create(doc, decorations);\n        return this.addInner(doc, decorations, 0);\n    }\n    addInner(doc, decorations, offset) {\n        let children, childIndex = 0;\n        doc.forEach((childNode, childOffset) => {\n            let baseOffset = childOffset + offset, found;\n            if (!(found = takeSpansForNode(decorations, childNode, baseOffset)))\n                return;\n            if (!children)\n                children = this.children.slice();\n            while (childIndex < children.length && children[childIndex] < childOffset)\n                childIndex += 3;\n            if (children[childIndex] == childOffset)\n                children[childIndex + 2] = children[childIndex + 2].addInner(childNode, found, baseOffset + 1);\n            else\n                children.splice(childIndex, 0, childOffset, childOffset + childNode.nodeSize, buildTree(found, childNode, baseOffset + 1, noSpec));\n            childIndex += 3;\n        });\n        let local = moveSpans(childIndex ? withoutNulls(decorations) : decorations, -offset);\n        for (let i = 0; i < local.length; i++)\n            if (!local[i].type.valid(doc, local[i]))\n                local.splice(i--, 1);\n        return new DecorationSet(local.length ? this.local.concat(local).sort(byPos) : this.local, children || this.children);\n    }\n    /**\n    Create a new set that contains the decorations in this set, minus\n    the ones in the given array.\n    */\n    remove(decorations) {\n        if (decorations.length == 0 || this == empty)\n            return this;\n        return this.removeInner(decorations, 0);\n    }\n    removeInner(decorations, offset) {\n        let children = this.children, local = this.local;\n        for (let i = 0; i < children.length; i += 3) {\n            let found;\n            let from = children[i] + offset, to = children[i + 1] + offset;\n            for (let j = 0, span; j < decorations.length; j++)\n                if (span = decorations[j]) {\n                    if (span.from > from && span.to < to) {\n                        decorations[j] = null;\n                        (found || (found = [])).push(span);\n                    }\n                }\n            if (!found)\n                continue;\n            if (children == this.children)\n                children = this.children.slice();\n            let removed = children[i + 2].removeInner(found, from + 1);\n            if (removed != empty) {\n                children[i + 2] = removed;\n            }\n            else {\n                children.splice(i, 3);\n                i -= 3;\n            }\n        }\n        if (local.length)\n            for (let i = 0, span; i < decorations.length; i++)\n                if (span = decorations[i]) {\n                    for (let j = 0; j < local.length; j++)\n                        if (local[j].eq(span, offset)) {\n                            if (local == this.local)\n                                local = this.local.slice();\n                            local.splice(j--, 1);\n                        }\n                }\n        if (children == this.children && local == this.local)\n            return this;\n        return local.length || children.length ? new DecorationSet(local, children) : empty;\n    }\n    /**\n    @internal\n    */\n    forChild(offset, node) {\n        if (this == empty)\n            return this;\n        if (node.isLeaf)\n            return DecorationSet.empty;\n        let child, local;\n        for (let i = 0; i < this.children.length; i += 3)\n            if (this.children[i] >= offset) {\n                if (this.children[i] == offset)\n                    child = this.children[i + 2];\n                break;\n            }\n        let start = offset + 1, end = start + node.content.size;\n        for (let i = 0; i < this.local.length; i++) {\n            let dec = this.local[i];\n            if (dec.from < end && dec.to > start && (dec.type instanceof InlineType)) {\n                let from = Math.max(start, dec.from) - start, to = Math.min(end, dec.to) - start;\n                if (from < to)\n                    (local || (local = [])).push(dec.copy(from, to));\n            }\n        }\n        if (local) {\n            let localSet = new DecorationSet(local.sort(byPos), none);\n            return child ? new DecorationGroup([localSet, child]) : localSet;\n        }\n        return child || empty;\n    }\n    /**\n    @internal\n    */\n    eq(other) {\n        if (this == other)\n            return true;\n        if (!(other instanceof DecorationSet) ||\n            this.local.length != other.local.length ||\n            this.children.length != other.children.length)\n            return false;\n        for (let i = 0; i < this.local.length; i++)\n            if (!this.local[i].eq(other.local[i]))\n                return false;\n        for (let i = 0; i < this.children.length; i += 3)\n            if (this.children[i] != other.children[i] ||\n                this.children[i + 1] != other.children[i + 1] ||\n                !this.children[i + 2].eq(other.children[i + 2]))\n                return false;\n        return true;\n    }\n    /**\n    @internal\n    */\n    locals(node) {\n        return removeOverlap(this.localsInner(node));\n    }\n    /**\n    @internal\n    */\n    localsInner(node) {\n        if (this == empty)\n            return none;\n        if (node.inlineContent || !this.local.some(InlineType.is))\n            return this.local;\n        let result = [];\n        for (let i = 0; i < this.local.length; i++) {\n            if (!(this.local[i].type instanceof InlineType))\n                result.push(this.local[i]);\n        }\n        return result;\n    }\n}\n/**\nThe empty set of decorations.\n*/\nDecorationSet.empty = new DecorationSet([], []);\n/**\n@internal\n*/\nDecorationSet.removeOverlap = removeOverlap;\nconst empty = DecorationSet.empty;\n// An abstraction that allows the code dealing with decorations to\n// treat multiple DecorationSet objects as if it were a single object\n// with (a subset of) the same interface.\nclass DecorationGroup {\n    constructor(members) {\n        this.members = members;\n    }\n    map(mapping, doc) {\n        const mappedDecos = this.members.map(member => member.map(mapping, doc, noSpec));\n        return DecorationGroup.from(mappedDecos);\n    }\n    forChild(offset, child) {\n        if (child.isLeaf)\n            return DecorationSet.empty;\n        let found = [];\n        for (let i = 0; i < this.members.length; i++) {\n            let result = this.members[i].forChild(offset, child);\n            if (result == empty)\n                continue;\n            if (result instanceof DecorationGroup)\n                found = found.concat(result.members);\n            else\n                found.push(result);\n        }\n        return DecorationGroup.from(found);\n    }\n    eq(other) {\n        if (!(other instanceof DecorationGroup) ||\n            other.members.length != this.members.length)\n            return false;\n        for (let i = 0; i < this.members.length; i++)\n            if (!this.members[i].eq(other.members[i]))\n                return false;\n        return true;\n    }\n    locals(node) {\n        let result, sorted = true;\n        for (let i = 0; i < this.members.length; i++) {\n            let locals = this.members[i].localsInner(node);\n            if (!locals.length)\n                continue;\n            if (!result) {\n                result = locals;\n            }\n            else {\n                if (sorted) {\n                    result = result.slice();\n                    sorted = false;\n                }\n                for (let j = 0; j < locals.length; j++)\n                    result.push(locals[j]);\n            }\n        }\n        return result ? removeOverlap(sorted ? result : result.sort(byPos)) : none;\n    }\n    // Create a group for the given array of decoration sets, or return\n    // a single set when possible.\n    static from(members) {\n        switch (members.length) {\n            case 0: return empty;\n            case 1: return members[0];\n            default: return new DecorationGroup(members);\n        }\n    }\n}\nfunction mapChildren(oldChildren, newLocal, mapping, node, offset, oldOffset, options) {\n    let children = oldChildren.slice();\n    // Mark the children that are directly touched by changes, and\n    // move those that are after the changes.\n    let shift = (oldStart, oldEnd, newStart, newEnd) => {\n        for (let i = 0; i < children.length; i += 3) {\n            let end = children[i + 1], dSize;\n            if (end < 0 || oldStart > end + oldOffset)\n                continue;\n            let start = children[i] + oldOffset;\n            if (oldEnd >= start) {\n                children[i + 1] = oldStart <= start ? -2 : -1;\n            }\n            else if (newStart >= offset && (dSize = (newEnd - newStart) - (oldEnd - oldStart))) {\n                children[i] += dSize;\n                children[i + 1] += dSize;\n            }\n        }\n    };\n    for (let i = 0; i < mapping.maps.length; i++)\n        mapping.maps[i].forEach(shift);\n    // Find the child nodes that still correspond to a single node,\n    // recursively call mapInner on them and update their positions.\n    let mustRebuild = false;\n    for (let i = 0; i < children.length; i += 3)\n        if (children[i + 1] < 0) { // Touched nodes\n            if (children[i + 1] == -2) {\n                mustRebuild = true;\n                children[i + 1] = -1;\n                continue;\n            }\n            let from = mapping.map(oldChildren[i] + oldOffset), fromLocal = from - offset;\n            if (fromLocal < 0 || fromLocal >= node.content.size) {\n                mustRebuild = true;\n                continue;\n            }\n            // Must read oldChildren because children was tagged with -1\n            let to = mapping.map(oldChildren[i + 1] + oldOffset, -1), toLocal = to - offset;\n            let { index, offset: childOffset } = node.content.findIndex(fromLocal);\n            let childNode = node.maybeChild(index);\n            if (childNode && childOffset == fromLocal && childOffset + childNode.nodeSize == toLocal) {\n                let mapped = children[i + 2]\n                    .mapInner(mapping, childNode, from + 1, oldChildren[i] + oldOffset + 1, options);\n                if (mapped != empty) {\n                    children[i] = fromLocal;\n                    children[i + 1] = toLocal;\n                    children[i + 2] = mapped;\n                }\n                else {\n                    children[i + 1] = -2;\n                    mustRebuild = true;\n                }\n            }\n            else {\n                mustRebuild = true;\n            }\n        }\n    // Remaining children must be collected and rebuilt into the appropriate structure\n    if (mustRebuild) {\n        let decorations = mapAndGatherRemainingDecorations(children, oldChildren, newLocal, mapping, offset, oldOffset, options);\n        let built = buildTree(decorations, node, 0, options);\n        newLocal = built.local;\n        for (let i = 0; i < children.length; i += 3)\n            if (children[i + 1] < 0) {\n                children.splice(i, 3);\n                i -= 3;\n            }\n        for (let i = 0, j = 0; i < built.children.length; i += 3) {\n            let from = built.children[i];\n            while (j < children.length && children[j] < from)\n                j += 3;\n            children.splice(j, 0, built.children[i], built.children[i + 1], built.children[i + 2]);\n        }\n    }\n    return new DecorationSet(newLocal.sort(byPos), children);\n}\nfunction moveSpans(spans, offset) {\n    if (!offset || !spans.length)\n        return spans;\n    let result = [];\n    for (let i = 0; i < spans.length; i++) {\n        let span = spans[i];\n        result.push(new Decoration(span.from + offset, span.to + offset, span.type));\n    }\n    return result;\n}\nfunction mapAndGatherRemainingDecorations(children, oldChildren, decorations, mapping, offset, oldOffset, options) {\n    // Gather all decorations from the remaining marked children\n    function gather(set, oldOffset) {\n        for (let i = 0; i < set.local.length; i++) {\n            let mapped = set.local[i].map(mapping, offset, oldOffset);\n            if (mapped)\n                decorations.push(mapped);\n            else if (options.onRemove)\n                options.onRemove(set.local[i].spec);\n        }\n        for (let i = 0; i < set.children.length; i += 3)\n            gather(set.children[i + 2], set.children[i] + oldOffset + 1);\n    }\n    for (let i = 0; i < children.length; i += 3)\n        if (children[i + 1] == -1)\n            gather(children[i + 2], oldChildren[i] + oldOffset + 1);\n    return decorations;\n}\nfunction takeSpansForNode(spans, node, offset) {\n    if (node.isLeaf)\n        return null;\n    let end = offset + node.nodeSize, found = null;\n    for (let i = 0, span; i < spans.length; i++) {\n        if ((span = spans[i]) && span.from > offset && span.to < end) {\n            (found || (found = [])).push(span);\n            spans[i] = null;\n        }\n    }\n    return found;\n}\nfunction withoutNulls(array) {\n    let result = [];\n    for (let i = 0; i < array.length; i++)\n        if (array[i] != null)\n            result.push(array[i]);\n    return result;\n}\n// Build up a tree that corresponds to a set of decorations. `offset`\n// is a base offset that should be subtracted from the `from` and `to`\n// positions in the spans (so that we don't have to allocate new spans\n// for recursive calls).\nfunction buildTree(spans, node, offset, options) {\n    let children = [], hasNulls = false;\n    node.forEach((childNode, localStart) => {\n        let found = takeSpansForNode(spans, childNode, localStart + offset);\n        if (found) {\n            hasNulls = true;\n            let subtree = buildTree(found, childNode, offset + localStart + 1, options);\n            if (subtree != empty)\n                children.push(localStart, localStart + childNode.nodeSize, subtree);\n        }\n    });\n    let locals = moveSpans(hasNulls ? withoutNulls(spans) : spans, -offset).sort(byPos);\n    for (let i = 0; i < locals.length; i++)\n        if (!locals[i].type.valid(node, locals[i])) {\n            if (options.onRemove)\n                options.onRemove(locals[i].spec);\n            locals.splice(i--, 1);\n        }\n    return locals.length || children.length ? new DecorationSet(locals, children) : empty;\n}\n// Used to sort decorations so that ones with a low start position\n// come first, and within a set with the same start position, those\n// with an smaller end position come first.\nfunction byPos(a, b) {\n    return a.from - b.from || a.to - b.to;\n}\n// Scan a sorted array of decorations for partially overlapping spans,\n// and split those so that only fully overlapping spans are left (to\n// make subsequent rendering easier). Will return the input array if\n// no partially overlapping spans are found (the common case).\nfunction removeOverlap(spans) {\n    let working = spans;\n    for (let i = 0; i < working.length - 1; i++) {\n        let span = working[i];\n        if (span.from != span.to)\n            for (let j = i + 1; j < working.length; j++) {\n                let next = working[j];\n                if (next.from == span.from) {\n                    if (next.to != span.to) {\n                        if (working == spans)\n                            working = spans.slice();\n                        // Followed by a partially overlapping larger span. Split that\n                        // span.\n                        working[j] = next.copy(next.from, span.to);\n                        insertAhead(working, j + 1, next.copy(span.to, next.to));\n                    }\n                    continue;\n                }\n                else {\n                    if (next.from < span.to) {\n                        if (working == spans)\n                            working = spans.slice();\n                        // The end of this one overlaps with a subsequent span. Split\n                        // this one.\n                        working[i] = span.copy(span.from, next.from);\n                        insertAhead(working, j, span.copy(next.from, span.to));\n                    }\n                    break;\n                }\n            }\n    }\n    return working;\n}\nfunction insertAhead(array, i, deco) {\n    while (i < array.length && byPos(deco, array[i]) > 0)\n        i++;\n    array.splice(i, 0, deco);\n}\n// Get the decorations associated with the current props of a view.\nfunction viewDecorations(view) {\n    let found = [];\n    view.someProp(\"decorations\", f => {\n        let result = f(view.state);\n        if (result && result != empty)\n            found.push(result);\n    });\n    if (view.cursorWrapper)\n        found.push(DecorationSet.create(view.state.doc, [view.cursorWrapper.deco]));\n    return DecorationGroup.from(found);\n}\n\nconst observeOptions = {\n    childList: true,\n    characterData: true,\n    characterDataOldValue: true,\n    attributes: true,\n    attributeOldValue: true,\n    subtree: true\n};\n// IE11 has very broken mutation observers, so we also listen to DOMCharacterDataModified\nconst useCharData = ie && ie_version <= 11;\nclass SelectionState {\n    constructor() {\n        this.anchorNode = null;\n        this.anchorOffset = 0;\n        this.focusNode = null;\n        this.focusOffset = 0;\n    }\n    set(sel) {\n        this.anchorNode = sel.anchorNode;\n        this.anchorOffset = sel.anchorOffset;\n        this.focusNode = sel.focusNode;\n        this.focusOffset = sel.focusOffset;\n    }\n    clear() {\n        this.anchorNode = this.focusNode = null;\n    }\n    eq(sel) {\n        return sel.anchorNode == this.anchorNode && sel.anchorOffset == this.anchorOffset &&\n            sel.focusNode == this.focusNode && sel.focusOffset == this.focusOffset;\n    }\n}\nclass DOMObserver {\n    constructor(view, handleDOMChange) {\n        this.view = view;\n        this.handleDOMChange = handleDOMChange;\n        this.queue = [];\n        this.flushingSoon = -1;\n        this.observer = null;\n        this.currentSelection = new SelectionState;\n        this.onCharData = null;\n        this.suppressingSelectionUpdates = false;\n        this.observer = window.MutationObserver &&\n            new window.MutationObserver(mutations => {\n                for (let i = 0; i < mutations.length; i++)\n                    this.queue.push(mutations[i]);\n                // IE11 will sometimes (on backspacing out a single character\n                // text node after a BR node) call the observer callback\n                // before actually updating the DOM, which will cause\n                // ProseMirror to miss the change (see #930)\n                if (ie && ie_version <= 11 && mutations.some(m => m.type == \"childList\" && m.removedNodes.length ||\n                    m.type == \"characterData\" && m.oldValue.length > m.target.nodeValue.length))\n                    this.flushSoon();\n                else\n                    this.flush();\n            });\n        if (useCharData) {\n            this.onCharData = e => {\n                this.queue.push({ target: e.target, type: \"characterData\", oldValue: e.prevValue });\n                this.flushSoon();\n            };\n        }\n        this.onSelectionChange = this.onSelectionChange.bind(this);\n    }\n    flushSoon() {\n        if (this.flushingSoon < 0)\n            this.flushingSoon = window.setTimeout(() => { this.flushingSoon = -1; this.flush(); }, 20);\n    }\n    forceFlush() {\n        if (this.flushingSoon > -1) {\n            window.clearTimeout(this.flushingSoon);\n            this.flushingSoon = -1;\n            this.flush();\n        }\n    }\n    start() {\n        if (this.observer) {\n            this.observer.takeRecords();\n            this.observer.observe(this.view.dom, observeOptions);\n        }\n        if (this.onCharData)\n            this.view.dom.addEventListener(\"DOMCharacterDataModified\", this.onCharData);\n        this.connectSelection();\n    }\n    stop() {\n        if (this.observer) {\n            let take = this.observer.takeRecords();\n            if (take.length) {\n                for (let i = 0; i < take.length; i++)\n                    this.queue.push(take[i]);\n                window.setTimeout(() => this.flush(), 20);\n            }\n            this.observer.disconnect();\n        }\n        if (this.onCharData)\n            this.view.dom.removeEventListener(\"DOMCharacterDataModified\", this.onCharData);\n        this.disconnectSelection();\n    }\n    connectSelection() {\n        this.view.dom.ownerDocument.addEventListener(\"selectionchange\", this.onSelectionChange);\n    }\n    disconnectSelection() {\n        this.view.dom.ownerDocument.removeEventListener(\"selectionchange\", this.onSelectionChange);\n    }\n    suppressSelectionUpdates() {\n        this.suppressingSelectionUpdates = true;\n        setTimeout(() => this.suppressingSelectionUpdates = false, 50);\n    }\n    onSelectionChange() {\n        if (!hasFocusAndSelection(this.view))\n            return;\n        if (this.suppressingSelectionUpdates)\n            return selectionToDOM(this.view);\n        // Deletions on IE11 fire their events in the wrong order, giving\n        // us a selection change event before the DOM changes are\n        // reported.\n        if (ie && ie_version <= 11 && !this.view.state.selection.empty) {\n            let sel = this.view.domSelection();\n            // Selection.isCollapsed isn't reliable on IE\n            if (sel.focusNode && isEquivalentPosition(sel.focusNode, sel.focusOffset, sel.anchorNode, sel.anchorOffset))\n                return this.flushSoon();\n        }\n        this.flush();\n    }\n    setCurSelection() {\n        this.currentSelection.set(this.view.domSelection());\n    }\n    ignoreSelectionChange(sel) {\n        if (sel.rangeCount == 0)\n            return true;\n        let container = sel.getRangeAt(0).commonAncestorContainer;\n        let desc = this.view.docView.nearestDesc(container);\n        if (desc && desc.ignoreMutation({\n            type: \"selection\",\n            target: container.nodeType == 3 ? container.parentNode : container\n        })) {\n            this.setCurSelection();\n            return true;\n        }\n    }\n    flush() {\n        if (!this.view.docView || this.flushingSoon > -1)\n            return;\n        let mutations = this.observer ? this.observer.takeRecords() : [];\n        if (this.queue.length) {\n            mutations = this.queue.concat(mutations);\n            this.queue.length = 0;\n        }\n        let sel = this.view.domSelection();\n        let newSel = !this.suppressingSelectionUpdates && !this.currentSelection.eq(sel) && hasFocusAndSelection(this.view) && !this.ignoreSelectionChange(sel);\n        let from = -1, to = -1, typeOver = false, added = [];\n        if (this.view.editable) {\n            for (let i = 0; i < mutations.length; i++) {\n                let result = this.registerMutation(mutations[i], added);\n                if (result) {\n                    from = from < 0 ? result.from : Math.min(result.from, from);\n                    to = to < 0 ? result.to : Math.max(result.to, to);\n                    if (result.typeOver)\n                        typeOver = true;\n                }\n            }\n        }\n        if (gecko && added.length > 1) {\n            let brs = added.filter(n => n.nodeName == \"BR\");\n            if (brs.length == 2) {\n                let a = brs[0], b = brs[1];\n                if (a.parentNode && a.parentNode.parentNode == b.parentNode)\n                    b.remove();\n                else\n                    a.remove();\n            }\n        }\n        if (from > -1 || newSel) {\n            if (from > -1) {\n                this.view.docView.markDirty(from, to);\n                checkCSS(this.view);\n            }\n            this.handleDOMChange(from, to, typeOver, added);\n            if (this.view.docView && this.view.docView.dirty)\n                this.view.updateState(this.view.state);\n            else if (!this.currentSelection.eq(sel))\n                selectionToDOM(this.view);\n            this.currentSelection.set(sel);\n        }\n    }\n    registerMutation(mut, added) {\n        // Ignore mutations inside nodes that were already noted as inserted\n        if (added.indexOf(mut.target) > -1)\n            return null;\n        let desc = this.view.docView.nearestDesc(mut.target);\n        if (mut.type == \"attributes\" &&\n            (desc == this.view.docView || mut.attributeName == \"contenteditable\" ||\n                // Firefox sometimes fires spurious events for null/empty styles\n                (mut.attributeName == \"style\" && !mut.oldValue && !mut.target.getAttribute(\"style\"))))\n            return null;\n        if (!desc || desc.ignoreMutation(mut))\n            return null;\n        if (mut.type == \"childList\") {\n            for (let i = 0; i < mut.addedNodes.length; i++)\n                added.push(mut.addedNodes[i]);\n            if (desc.contentDOM && desc.contentDOM != desc.dom && !desc.contentDOM.contains(mut.target))\n                return { from: desc.posBefore, to: desc.posAfter };\n            let prev = mut.previousSibling, next = mut.nextSibling;\n            if (ie && ie_version <= 11 && mut.addedNodes.length) {\n                // IE11 gives us incorrect next/prev siblings for some\n                // insertions, so if there are added nodes, recompute those\n                for (let i = 0; i < mut.addedNodes.length; i++) {\n                    let { previousSibling, nextSibling } = mut.addedNodes[i];\n                    if (!previousSibling || Array.prototype.indexOf.call(mut.addedNodes, previousSibling) < 0)\n                        prev = previousSibling;\n                    if (!nextSibling || Array.prototype.indexOf.call(mut.addedNodes, nextSibling) < 0)\n                        next = nextSibling;\n                }\n            }\n            let fromOffset = prev && prev.parentNode == mut.target\n                ? domIndex(prev) + 1 : 0;\n            let from = desc.localPosFromDOM(mut.target, fromOffset, -1);\n            let toOffset = next && next.parentNode == mut.target\n                ? domIndex(next) : mut.target.childNodes.length;\n            let to = desc.localPosFromDOM(mut.target, toOffset, 1);\n            return { from, to };\n        }\n        else if (mut.type == \"attributes\") {\n            return { from: desc.posAtStart - desc.border, to: desc.posAtEnd + desc.border };\n        }\n        else { // \"characterData\"\n            return {\n                from: desc.posAtStart,\n                to: desc.posAtEnd,\n                // An event was generated for a text change that didn't change\n                // any text. Mark the dom change to fall back to assuming the\n                // selection was typed over with an identical value if it can't\n                // find another change.\n                typeOver: mut.target.nodeValue == mut.oldValue\n            };\n        }\n    }\n}\nlet cssChecked = false;\nfunction checkCSS(view) {\n    if (cssChecked)\n        return;\n    cssChecked = true;\n    if (getComputedStyle(view.dom).whiteSpace == \"normal\")\n        console[\"warn\"](\"ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.\");\n}\n\n// Note that all referencing and parsing is done with the\n// start-of-operation selection and document, since that's the one\n// that the DOM represents. If any changes came in in the meantime,\n// the modification is mapped over those before it is applied, in\n// readDOMChange.\nfunction parseBetween(view, from_, to_) {\n    let { node: parent, fromOffset, toOffset, from, to } = view.docView.parseRange(from_, to_);\n    let domSel = view.domSelection();\n    let find;\n    let anchor = domSel.anchorNode;\n    if (anchor && view.dom.contains(anchor.nodeType == 1 ? anchor : anchor.parentNode)) {\n        find = [{ node: anchor, offset: domSel.anchorOffset }];\n        if (!selectionCollapsed(domSel))\n            find.push({ node: domSel.focusNode, offset: domSel.focusOffset });\n    }\n    // Work around issue in Chrome where backspacing sometimes replaces\n    // the deleted content with a random BR node (issues #799, #831)\n    if (chrome && view.input.lastKeyCode === 8) {\n        for (let off = toOffset; off > fromOffset; off--) {\n            let node = parent.childNodes[off - 1], desc = node.pmViewDesc;\n            if (node.nodeName == \"BR\" && !desc) {\n                toOffset = off;\n                break;\n            }\n            if (!desc || desc.size)\n                break;\n        }\n    }\n    let startDoc = view.state.doc;\n    let parser = view.someProp(\"domParser\") || DOMParser.fromSchema(view.state.schema);\n    let $from = startDoc.resolve(from);\n    let sel = null, doc = parser.parse(parent, {\n        topNode: $from.parent,\n        topMatch: $from.parent.contentMatchAt($from.index()),\n        topOpen: true,\n        from: fromOffset,\n        to: toOffset,\n        preserveWhitespace: $from.parent.type.whitespace == \"pre\" ? \"full\" : true,\n        findPositions: find,\n        ruleFromNode,\n        context: $from\n    });\n    if (find && find[0].pos != null) {\n        let anchor = find[0].pos, head = find[1] && find[1].pos;\n        if (head == null)\n            head = anchor;\n        sel = { anchor: anchor + from, head: head + from };\n    }\n    return { doc, sel, from, to };\n}\nfunction ruleFromNode(dom) {\n    let desc = dom.pmViewDesc;\n    if (desc) {\n        return desc.parseRule();\n    }\n    else if (dom.nodeName == \"BR\" && dom.parentNode) {\n        // Safari replaces the list item or table cell with a BR\n        // directly in the list node (?!) if you delete the last\n        // character in a list item or table cell (#708, #862)\n        if (safari && /^(ul|ol)$/i.test(dom.parentNode.nodeName)) {\n            let skip = document.createElement(\"div\");\n            skip.appendChild(document.createElement(\"li\"));\n            return { skip };\n        }\n        else if (dom.parentNode.lastChild == dom || safari && /^(tr|table)$/i.test(dom.parentNode.nodeName)) {\n            return { ignore: true };\n        }\n    }\n    else if (dom.nodeName == \"IMG\" && dom.getAttribute(\"mark-placeholder\")) {\n        return { ignore: true };\n    }\n    return null;\n}\nfunction readDOMChange(view, from, to, typeOver, addedNodes) {\n    if (from < 0) {\n        let origin = view.input.lastSelectionTime > Date.now() - 50 ? view.input.lastSelectionOrigin : null;\n        let newSel = selectionFromDOM(view, origin);\n        if (newSel && !view.state.selection.eq(newSel)) {\n            let tr = view.state.tr.setSelection(newSel);\n            if (origin == \"pointer\")\n                tr.setMeta(\"pointer\", true);\n            else if (origin == \"key\")\n                tr.scrollIntoView();\n            view.dispatch(tr);\n        }\n        return;\n    }\n    let $before = view.state.doc.resolve(from);\n    let shared = $before.sharedDepth(to);\n    from = $before.before(shared + 1);\n    to = view.state.doc.resolve(to).after(shared + 1);\n    let sel = view.state.selection;\n    let parse = parseBetween(view, from, to);\n    // Chrome sometimes leaves the cursor before the inserted text when\n    // composing after a cursor wrapper. This moves it forward.\n    if (chrome && view.cursorWrapper && parse.sel && parse.sel.anchor == view.cursorWrapper.deco.from) {\n        let text = view.cursorWrapper.deco.type.toDOM.nextSibling;\n        let size = text && text.nodeValue ? text.nodeValue.length : 1;\n        parse.sel = { anchor: parse.sel.anchor + size, head: parse.sel.anchor + size };\n    }\n    let doc = view.state.doc, compare = doc.slice(parse.from, parse.to);\n    let preferredPos, preferredSide;\n    // Prefer anchoring to end when Backspace is pressed\n    if (view.input.lastKeyCode === 8 && Date.now() - 100 < view.input.lastKeyCodeTime) {\n        preferredPos = view.state.selection.to;\n        preferredSide = \"end\";\n    }\n    else {\n        preferredPos = view.state.selection.from;\n        preferredSide = \"start\";\n    }\n    view.input.lastKeyCode = null;\n    let change = findDiff(compare.content, parse.doc.content, parse.from, preferredPos, preferredSide);\n    if ((ios && view.input.lastIOSEnter > Date.now() - 225 || android) &&\n        addedNodes.some(n => n.nodeName == \"DIV\" || n.nodeName == \"P\") &&\n        (!change || change.endA >= change.endB) &&\n        view.someProp(\"handleKeyDown\", f => f(view, keyEvent(13, \"Enter\")))) {\n        view.input.lastIOSEnter = 0;\n        return;\n    }\n    if (!change) {\n        if (typeOver && sel instanceof TextSelection && !sel.empty && sel.$head.sameParent(sel.$anchor) &&\n            !view.composing && !(parse.sel && parse.sel.anchor != parse.sel.head)) {\n            change = { start: sel.from, endA: sel.to, endB: sel.to };\n        }\n        else {\n            if (parse.sel) {\n                let sel = resolveSelection(view, view.state.doc, parse.sel);\n                if (sel && !sel.eq(view.state.selection))\n                    view.dispatch(view.state.tr.setSelection(sel));\n            }\n            return;\n        }\n    }\n    view.input.domChangeCount++;\n    // Handle the case where overwriting a selection by typing matches\n    // the start or end of the selected content, creating a change\n    // that's smaller than what was actually overwritten.\n    if (view.state.selection.from < view.state.selection.to &&\n        change.start == change.endB &&\n        view.state.selection instanceof TextSelection) {\n        if (change.start > view.state.selection.from && change.start <= view.state.selection.from + 2 &&\n            view.state.selection.from >= parse.from) {\n            change.start = view.state.selection.from;\n        }\n        else if (change.endA < view.state.selection.to && change.endA >= view.state.selection.to - 2 &&\n            view.state.selection.to <= parse.to) {\n            change.endB += (view.state.selection.to - change.endA);\n            change.endA = view.state.selection.to;\n        }\n    }\n    // IE11 will insert a non-breaking space _ahead_ of the space after\n    // the cursor space when adding a space before another space. When\n    // that happened, adjust the change to cover the space instead.\n    if (ie && ie_version <= 11 && change.endB == change.start + 1 &&\n        change.endA == change.start && change.start > parse.from &&\n        parse.doc.textBetween(change.start - parse.from - 1, change.start - parse.from + 1) == \" \\u00a0\") {\n        change.start--;\n        change.endA--;\n        change.endB--;\n    }\n    let $from = parse.doc.resolveNoCache(change.start - parse.from);\n    let $to = parse.doc.resolveNoCache(change.endB - parse.from);\n    let $fromA = doc.resolve(change.start);\n    let inlineChange = $from.sameParent($to) && $from.parent.inlineContent && $fromA.end() >= change.endA;\n    let nextSel;\n    // If this looks like the effect of pressing Enter (or was recorded\n    // as being an iOS enter press), just dispatch an Enter key instead.\n    if (((ios && view.input.lastIOSEnter > Date.now() - 225 &&\n        (!inlineChange || addedNodes.some(n => n.nodeName == \"DIV\" || n.nodeName == \"P\"))) ||\n        (!inlineChange && $from.pos < parse.doc.content.size &&\n            (nextSel = Selection.findFrom(parse.doc.resolve($from.pos + 1), 1, true)) &&\n            nextSel.head == $to.pos)) &&\n        view.someProp(\"handleKeyDown\", f => f(view, keyEvent(13, \"Enter\")))) {\n        view.input.lastIOSEnter = 0;\n        return;\n    }\n    // Same for backspace\n    if (view.state.selection.anchor > change.start &&\n        looksLikeJoin(doc, change.start, change.endA, $from, $to) &&\n        view.someProp(\"handleKeyDown\", f => f(view, keyEvent(8, \"Backspace\")))) {\n        if (android && chrome)\n            view.domObserver.suppressSelectionUpdates(); // #820\n        return;\n    }\n    // Chrome Android will occasionally, during composition, delete the\n    // entire composition and then immediately insert it again. This is\n    // used to detect that situation.\n    if (chrome && android && change.endB == change.start)\n        view.input.lastAndroidDelete = Date.now();\n    // This tries to detect Android virtual keyboard\n    // enter-and-pick-suggestion action. That sometimes (see issue\n    // #1059) first fires a DOM mutation, before moving the selection to\n    // the newly created block. And then, because ProseMirror cleans up\n    // the DOM selection, it gives up moving the selection entirely,\n    // leaving the cursor in the wrong place. When that happens, we drop\n    // the new paragraph from the initial change, and fire a simulated\n    // enter key afterwards.\n    if (android && !inlineChange && $from.start() != $to.start() && $to.parentOffset == 0 && $from.depth == $to.depth &&\n        parse.sel && parse.sel.anchor == parse.sel.head && parse.sel.head == change.endA) {\n        change.endB -= 2;\n        $to = parse.doc.resolveNoCache(change.endB - parse.from);\n        setTimeout(() => {\n            view.someProp(\"handleKeyDown\", function (f) { return f(view, keyEvent(13, \"Enter\")); });\n        }, 20);\n    }\n    let chFrom = change.start, chTo = change.endA;\n    let tr, storedMarks, markChange;\n    if (inlineChange) {\n        if ($from.pos == $to.pos) { // Deletion\n            // IE11 sometimes weirdly moves the DOM selection around after\n            // backspacing out the first element in a textblock\n            if (ie && ie_version <= 11 && $from.parentOffset == 0) {\n                view.domObserver.suppressSelectionUpdates();\n                setTimeout(() => selectionToDOM(view), 20);\n            }\n            tr = view.state.tr.delete(chFrom, chTo);\n            storedMarks = doc.resolve(change.start).marksAcross(doc.resolve(change.endA));\n        }\n        else if ( // Adding or removing a mark\n        change.endA == change.endB &&\n            (markChange = isMarkChange($from.parent.content.cut($from.parentOffset, $to.parentOffset), $fromA.parent.content.cut($fromA.parentOffset, change.endA - $fromA.start())))) {\n            tr = view.state.tr;\n            if (markChange.type == \"add\")\n                tr.addMark(chFrom, chTo, markChange.mark);\n            else\n                tr.removeMark(chFrom, chTo, markChange.mark);\n        }\n        else if ($from.parent.child($from.index()).isText && $from.index() == $to.index() - ($to.textOffset ? 0 : 1)) {\n            // Both positions in the same text node -- simply insert text\n            let text = $from.parent.textBetween($from.parentOffset, $to.parentOffset);\n            if (view.someProp(\"handleTextInput\", f => f(view, chFrom, chTo, text)))\n                return;\n            tr = view.state.tr.insertText(text, chFrom, chTo);\n        }\n    }\n    if (!tr)\n        tr = view.state.tr.replace(chFrom, chTo, parse.doc.slice(change.start - parse.from, change.endB - parse.from));\n    if (parse.sel) {\n        let sel = resolveSelection(view, tr.doc, parse.sel);\n        // Chrome Android will sometimes, during composition, report the\n        // selection in the wrong place. If it looks like that is\n        // happening, don't update the selection.\n        // Edge just doesn't move the cursor forward when you start typing\n        // in an empty block or between br nodes.\n        if (sel && !(chrome && android && view.composing && sel.empty &&\n            (change.start != change.endB || view.input.lastAndroidDelete < Date.now() - 100) &&\n            (sel.head == chFrom || sel.head == tr.mapping.map(chTo) - 1) ||\n            ie && sel.empty && sel.head == chFrom))\n            tr.setSelection(sel);\n    }\n    if (storedMarks)\n        tr.ensureMarks(storedMarks);\n    view.dispatch(tr.scrollIntoView());\n}\nfunction resolveSelection(view, doc, parsedSel) {\n    if (Math.max(parsedSel.anchor, parsedSel.head) > doc.content.size)\n        return null;\n    return selectionBetween(view, doc.resolve(parsedSel.anchor), doc.resolve(parsedSel.head));\n}\n// Given two same-length, non-empty fragments of inline content,\n// determine whether the first could be created from the second by\n// removing or adding a single mark type.\nfunction isMarkChange(cur, prev) {\n    let curMarks = cur.firstChild.marks, prevMarks = prev.firstChild.marks;\n    let added = curMarks, removed = prevMarks, type, mark, update;\n    for (let i = 0; i < prevMarks.length; i++)\n        added = prevMarks[i].removeFromSet(added);\n    for (let i = 0; i < curMarks.length; i++)\n        removed = curMarks[i].removeFromSet(removed);\n    if (added.length == 1 && removed.length == 0) {\n        mark = added[0];\n        type = \"add\";\n        update = (node) => node.mark(mark.addToSet(node.marks));\n    }\n    else if (added.length == 0 && removed.length == 1) {\n        mark = removed[0];\n        type = \"remove\";\n        update = (node) => node.mark(mark.removeFromSet(node.marks));\n    }\n    else {\n        return null;\n    }\n    let updated = [];\n    for (let i = 0; i < prev.childCount; i++)\n        updated.push(update(prev.child(i)));\n    if (Fragment.from(updated).eq(cur))\n        return { mark, type };\n}\nfunction looksLikeJoin(old, start, end, $newStart, $newEnd) {\n    if (!$newStart.parent.isTextblock ||\n        // The content must have shrunk\n        end - start <= $newEnd.pos - $newStart.pos ||\n        // newEnd must point directly at or after the end of the block that newStart points into\n        skipClosingAndOpening($newStart, true, false) < $newEnd.pos)\n        return false;\n    let $start = old.resolve(start);\n    // Start must be at the end of a block\n    if ($start.parentOffset < $start.parent.content.size || !$start.parent.isTextblock)\n        return false;\n    let $next = old.resolve(skipClosingAndOpening($start, true, true));\n    // The next textblock must start before end and end near it\n    if (!$next.parent.isTextblock || $next.pos > end ||\n        skipClosingAndOpening($next, true, false) < end)\n        return false;\n    // The fragments after the join point must match\n    return $newStart.parent.content.cut($newStart.parentOffset).eq($next.parent.content);\n}\nfunction skipClosingAndOpening($pos, fromEnd, mayOpen) {\n    let depth = $pos.depth, end = fromEnd ? $pos.end() : $pos.pos;\n    while (depth > 0 && (fromEnd || $pos.indexAfter(depth) == $pos.node(depth).childCount)) {\n        depth--;\n        end++;\n        fromEnd = false;\n    }\n    if (mayOpen) {\n        let next = $pos.node(depth).maybeChild($pos.indexAfter(depth));\n        while (next && !next.isLeaf) {\n            next = next.firstChild;\n            end++;\n        }\n    }\n    return end;\n}\nfunction findDiff(a, b, pos, preferredPos, preferredSide) {\n    let start = a.findDiffStart(b, pos);\n    if (start == null)\n        return null;\n    let { a: endA, b: endB } = a.findDiffEnd(b, pos + a.size, pos + b.size);\n    if (preferredSide == \"end\") {\n        let adjust = Math.max(0, start - Math.min(endA, endB));\n        preferredPos -= endA + adjust - start;\n    }\n    if (endA < start && a.size < b.size) {\n        let move = preferredPos <= start && preferredPos >= endA ? start - preferredPos : 0;\n        start -= move;\n        endB = start + (endB - endA);\n        endA = start;\n    }\n    else if (endB < start) {\n        let move = preferredPos <= start && preferredPos >= endB ? start - preferredPos : 0;\n        start -= move;\n        endA = start + (endA - endB);\n        endB = start;\n    }\n    return { start, endA, endB };\n}\n\n/**\n@internal\n*/\nconst __serializeForClipboard = serializeForClipboard;\n/**\n@internal\n*/\nconst __parseFromClipboard = parseFromClipboard;\n/**\n@internal\n*/\nconst __endComposition = endComposition;\n/**\nAn editor view manages the DOM structure that represents an\neditable document. Its state and behavior are determined by its\n[props](https://prosemirror.net/docs/ref/#view.DirectEditorProps).\n*/\nclass EditorView {\n    /**\n    Create a view. `place` may be a DOM node that the editor should\n    be appended to, a function that will place it into the document,\n    or an object whose `mount` property holds the node to use as the\n    document container. If it is `null`, the editor will not be\n    added to the document.\n    */\n    constructor(place, props) {\n        this._root = null;\n        /**\n        @internal\n        */\n        this.focused = false;\n        /**\n        Kludge used to work around a Chrome bug @internal\n        */\n        this.trackWrites = null;\n        this.mounted = false;\n        /**\n        @internal\n        */\n        this.markCursor = null;\n        /**\n        @internal\n        */\n        this.cursorWrapper = null;\n        /**\n        @internal\n        */\n        this.lastSelectedViewDesc = undefined;\n        /**\n        @internal\n        */\n        this.input = new InputState;\n        this.prevDirectPlugins = [];\n        this.pluginViews = [];\n        /**\n        When editor content is being dragged, this object contains\n        information about the dragged slice and whether it is being\n        copied or moved. At any other time, it is null.\n        */\n        this.dragging = null;\n        this._props = props;\n        this.state = props.state;\n        this.directPlugins = props.plugins || [];\n        this.directPlugins.forEach(checkStateComponent);\n        this.dispatch = this.dispatch.bind(this);\n        this.dom = (place && place.mount) || document.createElement(\"div\");\n        if (place) {\n            if (place.appendChild)\n                place.appendChild(this.dom);\n            else if (typeof place == \"function\")\n                place(this.dom);\n            else if (place.mount)\n                this.mounted = true;\n        }\n        this.editable = getEditable(this);\n        updateCursorWrapper(this);\n        this.nodeViews = buildNodeViews(this);\n        this.docView = docViewDesc(this.state.doc, computeDocDeco(this), viewDecorations(this), this.dom, this);\n        this.domObserver = new DOMObserver(this, (from, to, typeOver, added) => readDOMChange(this, from, to, typeOver, added));\n        this.domObserver.start();\n        initInput(this);\n        this.updatePluginViews();\n    }\n    /**\n    Holds `true` when a\n    [composition](https://w3c.github.io/uievents/#events-compositionevents)\n    is active.\n    */\n    get composing() { return this.input.composing; }\n    /**\n    The view's current [props](https://prosemirror.net/docs/ref/#view.EditorProps).\n    */\n    get props() {\n        if (this._props.state != this.state) {\n            let prev = this._props;\n            this._props = {};\n            for (let name in prev)\n                this._props[name] = prev[name];\n            this._props.state = this.state;\n        }\n        return this._props;\n    }\n    /**\n    Update the view's props. Will immediately cause an update to\n    the DOM.\n    */\n    update(props) {\n        if (props.handleDOMEvents != this._props.handleDOMEvents)\n            ensureListeners(this);\n        this._props = props;\n        if (props.plugins) {\n            props.plugins.forEach(checkStateComponent);\n            this.directPlugins = props.plugins;\n        }\n        this.updateStateInner(props.state, true);\n    }\n    /**\n    Update the view by updating existing props object with the object\n    given as argument. Equivalent to `view.update(Object.assign({},\n    view.props, props))`.\n    */\n    setProps(props) {\n        let updated = {};\n        for (let name in this._props)\n            updated[name] = this._props[name];\n        updated.state = this.state;\n        for (let name in props)\n            updated[name] = props[name];\n        this.update(updated);\n    }\n    /**\n    Update the editor's `state` prop, without touching any of the\n    other props.\n    */\n    updateState(state) {\n        this.updateStateInner(state, this.state.plugins != state.plugins);\n    }\n    updateStateInner(state, reconfigured) {\n        let prev = this.state, redraw = false, updateSel = false;\n        // When stored marks are added, stop composition, so that they can\n        // be displayed.\n        if (state.storedMarks && this.composing) {\n            clearComposition(this);\n            updateSel = true;\n        }\n        this.state = state;\n        if (reconfigured) {\n            let nodeViews = buildNodeViews(this);\n            if (changedNodeViews(nodeViews, this.nodeViews)) {\n                this.nodeViews = nodeViews;\n                redraw = true;\n            }\n            ensureListeners(this);\n        }\n        this.editable = getEditable(this);\n        updateCursorWrapper(this);\n        let innerDeco = viewDecorations(this), outerDeco = computeDocDeco(this);\n        let scroll = reconfigured ? \"reset\"\n            : state.scrollToSelection > prev.scrollToSelection ? \"to selection\" : \"preserve\";\n        let updateDoc = redraw || !this.docView.matchesNode(state.doc, outerDeco, innerDeco);\n        if (updateDoc || !state.selection.eq(prev.selection))\n            updateSel = true;\n        let oldScrollPos = scroll == \"preserve\" && updateSel && this.dom.style.overflowAnchor == null && storeScrollPos(this);\n        if (updateSel) {\n            this.domObserver.stop();\n            // Work around an issue in Chrome, IE, and Edge where changing\n            // the DOM around an active selection puts it into a broken\n            // state where the thing the user sees differs from the\n            // selection reported by the Selection object (#710, #973,\n            // #1011, #1013, #1035).\n            let forceSelUpdate = updateDoc && (ie || chrome) && !this.composing &&\n                !prev.selection.empty && !state.selection.empty && selectionContextChanged(prev.selection, state.selection);\n            if (updateDoc) {\n                // If the node that the selection points into is written to,\n                // Chrome sometimes starts misreporting the selection, so this\n                // tracks that and forces a selection reset when our update\n                // did write to the node.\n                let chromeKludge = chrome ? (this.trackWrites = this.domSelection().focusNode) : null;\n                if (redraw || !this.docView.update(state.doc, outerDeco, innerDeco, this)) {\n                    this.docView.updateOuterDeco([]);\n                    this.docView.destroy();\n                    this.docView = docViewDesc(state.doc, outerDeco, innerDeco, this.dom, this);\n                }\n                if (chromeKludge && !this.trackWrites)\n                    forceSelUpdate = true;\n            }\n            // Work around for an issue where an update arriving right between\n            // a DOM selection change and the \"selectionchange\" event for it\n            // can cause a spurious DOM selection update, disrupting mouse\n            // drag selection.\n            if (forceSelUpdate ||\n                !(this.input.mouseDown && this.domObserver.currentSelection.eq(this.domSelection()) && anchorInRightPlace(this))) {\n                selectionToDOM(this, forceSelUpdate);\n            }\n            else {\n                syncNodeSelection(this, state.selection);\n                this.domObserver.setCurSelection();\n            }\n            this.domObserver.start();\n        }\n        this.updatePluginViews(prev);\n        if (scroll == \"reset\") {\n            this.dom.scrollTop = 0;\n        }\n        else if (scroll == \"to selection\") {\n            let startDOM = this.domSelection().focusNode;\n            if (this.someProp(\"handleScrollToSelection\", f => f(this))) ;\n            else if (state.selection instanceof NodeSelection) {\n                let target = this.docView.domAfterPos(state.selection.from);\n                if (target.nodeType == 1)\n                    scrollRectIntoView(this, target.getBoundingClientRect(), startDOM);\n            }\n            else {\n                scrollRectIntoView(this, this.coordsAtPos(state.selection.head, 1), startDOM);\n            }\n        }\n        else if (oldScrollPos) {\n            resetScrollPos(oldScrollPos);\n        }\n    }\n    destroyPluginViews() {\n        let view;\n        while (view = this.pluginViews.pop())\n            if (view.destroy)\n                view.destroy();\n    }\n    updatePluginViews(prevState) {\n        if (!prevState || prevState.plugins != this.state.plugins || this.directPlugins != this.prevDirectPlugins) {\n            this.prevDirectPlugins = this.directPlugins;\n            this.destroyPluginViews();\n            for (let i = 0; i < this.directPlugins.length; i++) {\n                let plugin = this.directPlugins[i];\n                if (plugin.spec.view)\n                    this.pluginViews.push(plugin.spec.view(this));\n            }\n            for (let i = 0; i < this.state.plugins.length; i++) {\n                let plugin = this.state.plugins[i];\n                if (plugin.spec.view)\n                    this.pluginViews.push(plugin.spec.view(this));\n            }\n        }\n        else {\n            for (let i = 0; i < this.pluginViews.length; i++) {\n                let pluginView = this.pluginViews[i];\n                if (pluginView.update)\n                    pluginView.update(this, prevState);\n            }\n        }\n    }\n    someProp(propName, f) {\n        let prop = this._props && this._props[propName], value;\n        if (prop != null && (value = f ? f(prop) : prop))\n            return value;\n        for (let i = 0; i < this.directPlugins.length; i++) {\n            let prop = this.directPlugins[i].props[propName];\n            if (prop != null && (value = f ? f(prop) : prop))\n                return value;\n        }\n        let plugins = this.state.plugins;\n        if (plugins)\n            for (let i = 0; i < plugins.length; i++) {\n                let prop = plugins[i].props[propName];\n                if (prop != null && (value = f ? f(prop) : prop))\n                    return value;\n            }\n    }\n    /**\n    Query whether the view has focus.\n    */\n    hasFocus() {\n        return this.root.activeElement == this.dom;\n    }\n    /**\n    Focus the editor.\n    */\n    focus() {\n        this.domObserver.stop();\n        if (this.editable)\n            focusPreventScroll(this.dom);\n        selectionToDOM(this);\n        this.domObserver.start();\n    }\n    /**\n    Get the document root in which the editor exists. This will\n    usually be the top-level `document`, but might be a [shadow\n    DOM](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Shadow_DOM)\n    root if the editor is inside one.\n    */\n    get root() {\n        let cached = this._root;\n        if (cached == null)\n            for (let search = this.dom.parentNode; search; search = search.parentNode) {\n                if (search.nodeType == 9 || (search.nodeType == 11 && search.host)) {\n                    if (!search.getSelection)\n                        Object.getPrototypeOf(search).getSelection = () => search.ownerDocument.getSelection();\n                    return this._root = search;\n                }\n            }\n        return cached || document;\n    }\n    /**\n    Given a pair of viewport coordinates, return the document\n    position that corresponds to them. May return null if the given\n    coordinates aren't inside of the editor. When an object is\n    returned, its `pos` property is the position nearest to the\n    coordinates, and its `inside` property holds the position of the\n    inner node that the position falls inside of, or -1 if it is at\n    the top level, not in any node.\n    */\n    posAtCoords(coords) {\n        return posAtCoords(this, coords);\n    }\n    /**\n    Returns the viewport rectangle at a given document position.\n    `left` and `right` will be the same number, as this returns a\n    flat cursor-ish rectangle. If the position is between two things\n    that aren't directly adjacent, `side` determines which element\n    is used. When < 0, the element before the position is used,\n    otherwise the element after.\n    */\n    coordsAtPos(pos, side = 1) {\n        return coordsAtPos(this, pos, side);\n    }\n    /**\n    Find the DOM position that corresponds to the given document\n    position. When `side` is negative, find the position as close as\n    possible to the content before the position. When positive,\n    prefer positions close to the content after the position. When\n    zero, prefer as shallow a position as possible.\n    \n    Note that you should **not** mutate the editor's internal DOM,\n    only inspect it (and even that is usually not necessary).\n    */\n    domAtPos(pos, side = 0) {\n        return this.docView.domFromPos(pos, side);\n    }\n    /**\n    Find the DOM node that represents the document node after the\n    given position. May return `null` when the position doesn't point\n    in front of a node or if the node is inside an opaque node view.\n    \n    This is intended to be able to call things like\n    `getBoundingClientRect` on that DOM node. Do **not** mutate the\n    editor DOM directly, or add styling this way, since that will be\n    immediately overriden by the editor as it redraws the node.\n    */\n    nodeDOM(pos) {\n        let desc = this.docView.descAt(pos);\n        return desc ? desc.nodeDOM : null;\n    }\n    /**\n    Find the document position that corresponds to a given DOM\n    position. (Whenever possible, it is preferable to inspect the\n    document structure directly, rather than poking around in the\n    DOM, but sometimesfor example when interpreting an event\n    targetyou don't have a choice.)\n    \n    The `bias` parameter can be used to influence which side of a DOM\n    node to use when the position is inside a leaf node.\n    */\n    posAtDOM(node, offset, bias = -1) {\n        let pos = this.docView.posFromDOM(node, offset, bias);\n        if (pos == null)\n            throw new RangeError(\"DOM position not inside the editor\");\n        return pos;\n    }\n    /**\n    Find out whether the selection is at the end of a textblock when\n    moving in a given direction. When, for example, given `\"left\"`,\n    it will return true if moving left from the current cursor\n    position would leave that position's parent textblock. Will apply\n    to the view's current state by default, but it is possible to\n    pass a different state.\n    */\n    endOfTextblock(dir, state) {\n        return endOfTextblock(this, state || this.state, dir);\n    }\n    /**\n    Removes the editor from the DOM and destroys all [node\n    views](https://prosemirror.net/docs/ref/#view.NodeView).\n    */\n    destroy() {\n        if (!this.docView)\n            return;\n        destroyInput(this);\n        this.destroyPluginViews();\n        if (this.mounted) {\n            this.docView.update(this.state.doc, [], viewDecorations(this), this);\n            this.dom.textContent = \"\";\n        }\n        else if (this.dom.parentNode) {\n            this.dom.parentNode.removeChild(this.dom);\n        }\n        this.docView.destroy();\n        this.docView = null;\n    }\n    /**\n    This is true when the view has been\n    [destroyed](https://prosemirror.net/docs/ref/#view.EditorView.destroy) (and thus should not be\n    used anymore).\n    */\n    get isDestroyed() {\n        return this.docView == null;\n    }\n    /**\n    Used for testing.\n    */\n    dispatchEvent(event) {\n        return dispatchEvent(this, event);\n    }\n    /**\n    Dispatch a transaction. Will call\n    [`dispatchTransaction`](https://prosemirror.net/docs/ref/#view.DirectEditorProps.dispatchTransaction)\n    when given, and otherwise defaults to applying the transaction to\n    the current state and calling\n    [`updateState`](https://prosemirror.net/docs/ref/#view.EditorView.updateState) with the result.\n    This method is bound to the view instance, so that it can be\n    easily passed around.\n    */\n    dispatch(tr) {\n        let dispatchTransaction = this._props.dispatchTransaction;\n        if (dispatchTransaction)\n            dispatchTransaction.call(this, tr);\n        else\n            this.updateState(this.state.apply(tr));\n    }\n    /**\n    @internal\n    */\n    domSelection() {\n        return this.root.getSelection();\n    }\n}\nfunction computeDocDeco(view) {\n    let attrs = Object.create(null);\n    attrs.class = \"ProseMirror\";\n    attrs.contenteditable = String(view.editable);\n    attrs.translate = \"no\";\n    view.someProp(\"attributes\", value => {\n        if (typeof value == \"function\")\n            value = value(view.state);\n        if (value)\n            for (let attr in value) {\n                if (attr == \"class\")\n                    attrs.class += \" \" + value[attr];\n                if (attr == \"style\") {\n                    attrs.style = (attrs.style ? attrs.style + \";\" : \"\") + value[attr];\n                }\n                else if (!attrs[attr] && attr != \"contenteditable\" && attr != \"nodeName\")\n                    attrs[attr] = String(value[attr]);\n            }\n    });\n    return [Decoration.node(0, view.state.doc.content.size, attrs)];\n}\nfunction updateCursorWrapper(view) {\n    if (view.markCursor) {\n        let dom = document.createElement(\"img\");\n        dom.className = \"ProseMirror-separator\";\n        dom.setAttribute(\"mark-placeholder\", \"true\");\n        dom.setAttribute(\"alt\", \"\");\n        view.cursorWrapper = { dom, deco: Decoration.widget(view.state.selection.head, dom, { raw: true, marks: view.markCursor }) };\n    }\n    else {\n        view.cursorWrapper = null;\n    }\n}\nfunction getEditable(view) {\n    return !view.someProp(\"editable\", value => value(view.state) === false);\n}\nfunction selectionContextChanged(sel1, sel2) {\n    let depth = Math.min(sel1.$anchor.sharedDepth(sel1.head), sel2.$anchor.sharedDepth(sel2.head));\n    return sel1.$anchor.start(depth) != sel2.$anchor.start(depth);\n}\nfunction buildNodeViews(view) {\n    let result = Object.create(null);\n    function add(obj) {\n        for (let prop in obj)\n            if (!Object.prototype.hasOwnProperty.call(result, prop))\n                result[prop] = obj[prop];\n    }\n    view.someProp(\"nodeViews\", add);\n    view.someProp(\"markViews\", add);\n    return result;\n}\nfunction changedNodeViews(a, b) {\n    let nA = 0, nB = 0;\n    for (let prop in a) {\n        if (a[prop] != b[prop])\n            return true;\n        nA++;\n    }\n    for (let _ in b)\n        nB++;\n    return nA != nB;\n}\nfunction checkStateComponent(plugin) {\n    if (plugin.spec.state || plugin.spec.filterTransaction || plugin.spec.appendTransaction)\n        throw new RangeError(\"Plugins passed directly to the view must not have a state component\");\n}\n\nexport { Decoration, DecorationSet, EditorView, __endComposition, __parseFromClipboard, __serializeForClipboard };\n","import { keydownHandler } from 'prosemirror-keymap';\nimport { Selection, NodeSelection, TextSelection, Plugin } from 'prosemirror-state';\nimport { Slice, Fragment } from 'prosemirror-model';\nimport { DecorationSet, Decoration } from 'prosemirror-view';\n\n/**\nGap cursor selections are represented using this class. Its\n`$anchor` and `$head` properties both point at the cursor position.\n*/\nclass GapCursor extends Selection {\n    /**\n    Create a gap cursor.\n    */\n    constructor($pos) {\n        super($pos, $pos);\n    }\n    map(doc, mapping) {\n        let $pos = doc.resolve(mapping.map(this.head));\n        return GapCursor.valid($pos) ? new GapCursor($pos) : Selection.near($pos);\n    }\n    content() { return Slice.empty; }\n    eq(other) {\n        return other instanceof GapCursor && other.head == this.head;\n    }\n    toJSON() {\n        return { type: \"gapcursor\", pos: this.head };\n    }\n    /**\n    @internal\n    */\n    static fromJSON(doc, json) {\n        if (typeof json.pos != \"number\")\n            throw new RangeError(\"Invalid input for GapCursor.fromJSON\");\n        return new GapCursor(doc.resolve(json.pos));\n    }\n    /**\n    @internal\n    */\n    getBookmark() { return new GapBookmark(this.anchor); }\n    /**\n    @internal\n    */\n    static valid($pos) {\n        let parent = $pos.parent;\n        if (parent.isTextblock || !closedBefore($pos) || !closedAfter($pos))\n            return false;\n        let override = parent.type.spec.allowGapCursor;\n        if (override != null)\n            return override;\n        let deflt = parent.contentMatchAt($pos.index()).defaultType;\n        return deflt && deflt.isTextblock;\n    }\n    /**\n    @internal\n    */\n    static findGapCursorFrom($pos, dir, mustMove = false) {\n        search: for (;;) {\n            if (!mustMove && GapCursor.valid($pos))\n                return $pos;\n            let pos = $pos.pos, next = null;\n            // Scan up from this position\n            for (let d = $pos.depth;; d--) {\n                let parent = $pos.node(d);\n                if (dir > 0 ? $pos.indexAfter(d) < parent.childCount : $pos.index(d) > 0) {\n                    next = parent.child(dir > 0 ? $pos.indexAfter(d) : $pos.index(d) - 1);\n                    break;\n                }\n                else if (d == 0) {\n                    return null;\n                }\n                pos += dir;\n                let $cur = $pos.doc.resolve(pos);\n                if (GapCursor.valid($cur))\n                    return $cur;\n            }\n            // And then down into the next node\n            for (;;) {\n                let inside = dir > 0 ? next.firstChild : next.lastChild;\n                if (!inside) {\n                    if (next.isAtom && !next.isText && !NodeSelection.isSelectable(next)) {\n                        $pos = $pos.doc.resolve(pos + next.nodeSize * dir);\n                        mustMove = false;\n                        continue search;\n                    }\n                    break;\n                }\n                next = inside;\n                pos += dir;\n                let $cur = $pos.doc.resolve(pos);\n                if (GapCursor.valid($cur))\n                    return $cur;\n            }\n            return null;\n        }\n    }\n}\nGapCursor.prototype.visible = false;\nGapCursor.findFrom = GapCursor.findGapCursorFrom;\nSelection.jsonID(\"gapcursor\", GapCursor);\nclass GapBookmark {\n    constructor(pos) {\n        this.pos = pos;\n    }\n    map(mapping) {\n        return new GapBookmark(mapping.map(this.pos));\n    }\n    resolve(doc) {\n        let $pos = doc.resolve(this.pos);\n        return GapCursor.valid($pos) ? new GapCursor($pos) : Selection.near($pos);\n    }\n}\nfunction closedBefore($pos) {\n    for (let d = $pos.depth; d >= 0; d--) {\n        let index = $pos.index(d), parent = $pos.node(d);\n        // At the start of this parent, look at next one\n        if (index == 0) {\n            if (parent.type.spec.isolating)\n                return true;\n            continue;\n        }\n        // See if the node before (or its first ancestor) is closed\n        for (let before = parent.child(index - 1);; before = before.lastChild) {\n            if ((before.childCount == 0 && !before.inlineContent) || before.isAtom || before.type.spec.isolating)\n                return true;\n            if (before.inlineContent)\n                return false;\n        }\n    }\n    // Hit start of document\n    return true;\n}\nfunction closedAfter($pos) {\n    for (let d = $pos.depth; d >= 0; d--) {\n        let index = $pos.indexAfter(d), parent = $pos.node(d);\n        if (index == parent.childCount) {\n            if (parent.type.spec.isolating)\n                return true;\n            continue;\n        }\n        for (let after = parent.child(index);; after = after.firstChild) {\n            if ((after.childCount == 0 && !after.inlineContent) || after.isAtom || after.type.spec.isolating)\n                return true;\n            if (after.inlineContent)\n                return false;\n        }\n    }\n    return true;\n}\n\n/**\nCreate a gap cursor plugin. When enabled, this will capture clicks\nnear and arrow-key-motion past places that don't have a normally\nselectable position nearby, and create a gap cursor selection for\nthem. The cursor is drawn as an element with class\n`ProseMirror-gapcursor`. You can either include\n`style/gapcursor.css` from the package's directory or add your own\nstyles to make it visible.\n*/\nfunction gapCursor() {\n    return new Plugin({\n        props: {\n            decorations: drawGapCursor,\n            createSelectionBetween(_view, $anchor, $head) {\n                return $anchor.pos == $head.pos && GapCursor.valid($head) ? new GapCursor($head) : null;\n            },\n            handleClick,\n            handleKeyDown,\n            handleDOMEvents: { beforeinput: beforeinput }\n        }\n    });\n}\nconst handleKeyDown = keydownHandler({\n    \"ArrowLeft\": arrow(\"horiz\", -1),\n    \"ArrowRight\": arrow(\"horiz\", 1),\n    \"ArrowUp\": arrow(\"vert\", -1),\n    \"ArrowDown\": arrow(\"vert\", 1)\n});\nfunction arrow(axis, dir) {\n    const dirStr = axis == \"vert\" ? (dir > 0 ? \"down\" : \"up\") : (dir > 0 ? \"right\" : \"left\");\n    return function (state, dispatch, view) {\n        let sel = state.selection;\n        let $start = dir > 0 ? sel.$to : sel.$from, mustMove = sel.empty;\n        if (sel instanceof TextSelection) {\n            if (!view.endOfTextblock(dirStr) || $start.depth == 0)\n                return false;\n            mustMove = false;\n            $start = state.doc.resolve(dir > 0 ? $start.after() : $start.before());\n        }\n        let $found = GapCursor.findGapCursorFrom($start, dir, mustMove);\n        if (!$found)\n            return false;\n        if (dispatch)\n            dispatch(state.tr.setSelection(new GapCursor($found)));\n        return true;\n    };\n}\nfunction handleClick(view, pos, event) {\n    if (!view || !view.editable)\n        return false;\n    let $pos = view.state.doc.resolve(pos);\n    if (!GapCursor.valid($pos))\n        return false;\n    let clickPos = view.posAtCoords({ left: event.clientX, top: event.clientY });\n    if (clickPos && clickPos.inside > -1 && NodeSelection.isSelectable(view.state.doc.nodeAt(clickPos.inside)))\n        return false;\n    view.dispatch(view.state.tr.setSelection(new GapCursor($pos)));\n    return true;\n}\n// This is a hack that, when a composition starts while a gap cursor\n// is active, quickly creates an inline context for the composition to\n// happen in, to avoid it being aborted by the DOM selection being\n// moved into a valid position.\nfunction beforeinput(view, event) {\n    if (event.inputType != \"insertCompositionText\" || !(view.state.selection instanceof GapCursor))\n        return false;\n    let { $from } = view.state.selection;\n    let insert = $from.parent.contentMatchAt($from.index()).findWrapping(view.state.schema.nodes.text);\n    if (!insert)\n        return false;\n    let frag = Fragment.empty;\n    for (let i = insert.length - 1; i >= 0; i--)\n        frag = Fragment.from(insert[i].createAndFill(null, frag));\n    let tr = view.state.tr.replace($from.pos, $from.pos, new Slice(frag, 0, 0));\n    tr.setSelection(TextSelection.near(tr.doc.resolve($from.pos + 1)));\n    view.dispatch(tr);\n    return false;\n}\nfunction drawGapCursor(state) {\n    if (!(state.selection instanceof GapCursor))\n        return null;\n    let node = document.createElement(\"div\");\n    node.className = \"ProseMirror-gapcursor\";\n    return DecorationSet.create(state.doc, [Decoration.widget(state.selection.head, node, { key: \"gapcursor\" })]);\n}\n\nexport { GapCursor, gapCursor };\n","import { Extension, callOrReturn, getExtensionField } from '@tiptap/core';\nimport { gapCursor } from 'prosemirror-gapcursor';\n\nconst Gapcursor = Extension.create({\r\n    name: 'gapCursor',\r\n    addProseMirrorPlugins() {\r\n        return [\r\n            gapCursor(),\r\n        ];\r\n    },\r\n    extendNodeSchema(extension) {\r\n        var _a;\r\n        const context = {\r\n            name: extension.name,\r\n            options: extension.options,\r\n            storage: extension.storage,\r\n        };\r\n        return {\r\n            allowGapCursor: (_a = callOrReturn(getExtensionField(extension, 'allowGapCursor', context))) !== null && _a !== void 0 ? _a : null,\r\n        };\r\n    },\r\n});\n\nexport { Gapcursor, Gapcursor as default };\n//# sourceMappingURL=tiptap-extension-gapcursor.esm.js.map\n","import { Node, mergeAttributes } from '@tiptap/core';\n\nconst HardBreak = Node.create({\r\n    name: 'hardBreak',\r\n    addOptions() {\r\n        return {\r\n            keepMarks: true,\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    inline: true,\r\n    group: 'inline',\r\n    selectable: false,\r\n    parseHTML() {\r\n        return [\r\n            { tag: 'br' },\r\n        ];\r\n    },\r\n    renderHTML({ HTMLAttributes }) {\r\n        return ['br', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)];\r\n    },\r\n    renderText() {\r\n        return '\\n';\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setHardBreak: () => ({ commands, chain, state, editor, }) => {\r\n                return commands.first([\r\n                    () => commands.exitCode(),\r\n                    () => commands.command(() => {\r\n                        const { selection, storedMarks } = state;\r\n                        if (selection.$from.parent.type.spec.isolating) {\r\n                            return false;\r\n                        }\r\n                        const { keepMarks } = this.options;\r\n                        const { splittableMarks } = editor.extensionManager;\r\n                        const marks = storedMarks\r\n                            || (selection.$to.parentOffset && selection.$from.marks());\r\n                        return chain()\r\n                            .insertContent({ type: this.name })\r\n                            .command(({ tr, dispatch }) => {\r\n                            if (dispatch && marks && keepMarks) {\r\n                                const filteredMarks = marks\r\n                                    .filter(mark => splittableMarks.includes(mark.type.name));\r\n                                tr.ensureMarks(filteredMarks);\r\n                            }\r\n                            return true;\r\n                        })\r\n                            .run();\r\n                    }),\r\n                ]);\r\n            },\r\n        };\r\n    },\r\n    addKeyboardShortcuts() {\r\n        return {\r\n            'Mod-Enter': () => this.editor.commands.setHardBreak(),\r\n            'Shift-Enter': () => this.editor.commands.setHardBreak(),\r\n        };\r\n    },\r\n});\n\nexport { HardBreak, HardBreak as default };\n//# sourceMappingURL=tiptap-extension-hard-break.esm.js.map\n","import { Node, mergeAttributes, textblockTypeInputRule } from '@tiptap/core';\n\nconst Heading = Node.create({\r\n    name: 'heading',\r\n    addOptions() {\r\n        return {\r\n            levels: [1, 2, 3, 4, 5, 6],\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    content: 'inline*',\r\n    group: 'block',\r\n    defining: true,\r\n    addAttributes() {\r\n        return {\r\n            level: {\r\n                default: 1,\r\n                rendered: false,\r\n            },\r\n        };\r\n    },\r\n    parseHTML() {\r\n        return this.options.levels\r\n            .map((level) => ({\r\n            tag: `h${level}`,\r\n            attrs: { level },\r\n        }));\r\n    },\r\n    renderHTML({ node, HTMLAttributes }) {\r\n        const hasLevel = this.options.levels.includes(node.attrs.level);\r\n        const level = hasLevel\r\n            ? node.attrs.level\r\n            : this.options.levels[0];\r\n        return [`h${level}`, mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setHeading: attributes => ({ commands }) => {\r\n                if (!this.options.levels.includes(attributes.level)) {\r\n                    return false;\r\n                }\r\n                return commands.setNode(this.name, attributes);\r\n            },\r\n            toggleHeading: attributes => ({ commands }) => {\r\n                if (!this.options.levels.includes(attributes.level)) {\r\n                    return false;\r\n                }\r\n                return commands.toggleNode(this.name, 'paragraph', attributes);\r\n            },\r\n        };\r\n    },\r\n    addKeyboardShortcuts() {\r\n        return this.options.levels.reduce((items, level) => ({\r\n            ...items,\r\n            ...{\r\n                [`Mod-Alt-${level}`]: () => this.editor.commands.toggleHeading({ level }),\r\n            },\r\n        }), {});\r\n    },\r\n    addInputRules() {\r\n        return this.options.levels.map(level => {\r\n            return textblockTypeInputRule({\r\n                find: new RegExp(`^(#{1,${level}})\\\\s$`),\r\n                type: this.type,\r\n                getAttributes: {\r\n                    level,\r\n                },\r\n            });\r\n        });\r\n    },\r\n});\n\nexport { Heading, Heading as default };\n//# sourceMappingURL=tiptap-extension-heading.esm.js.map\n","var GOOD_LEAF_SIZE = 200;\n\n// :: class<T> A rope sequence is a persistent sequence data structure\n// that supports appending, prepending, and slicing without doing a\n// full copy. It is represented as a mostly-balanced tree.\nvar RopeSequence = function RopeSequence () {};\n\nRopeSequence.prototype.append = function append (other) {\n  if (!other.length) { return this }\n  other = RopeSequence.from(other);\n\n  return (!this.length && other) ||\n    (other.length < GOOD_LEAF_SIZE && this.leafAppend(other)) ||\n    (this.length < GOOD_LEAF_SIZE && other.leafPrepend(this)) ||\n    this.appendInner(other)\n};\n\n// :: (union<[T], RopeSequence<T>>)  RopeSequence<T>\n// Prepend an array or other rope to this one, returning a new rope.\nRopeSequence.prototype.prepend = function prepend (other) {\n  if (!other.length) { return this }\n  return RopeSequence.from(other).append(this)\n};\n\nRopeSequence.prototype.appendInner = function appendInner (other) {\n  return new Append(this, other)\n};\n\n// :: (?number, ?number)  RopeSequence<T>\n// Create a rope repesenting a sub-sequence of this rope.\nRopeSequence.prototype.slice = function slice (from, to) {\n    if ( from === void 0 ) from = 0;\n    if ( to === void 0 ) to = this.length;\n\n  if (from >= to) { return RopeSequence.empty }\n  return this.sliceInner(Math.max(0, from), Math.min(this.length, to))\n};\n\n// :: (number)  T\n// Retrieve the element at the given position from this rope.\nRopeSequence.prototype.get = function get (i) {\n  if (i < 0 || i >= this.length) { return undefined }\n  return this.getInner(i)\n};\n\n// :: ((element: T, index: number)  ?bool, ?number, ?number)\n// Call the given function for each element between the given\n// indices. This tends to be more efficient than looping over the\n// indices and calling `get`, because it doesn't have to descend the\n// tree for every element.\nRopeSequence.prototype.forEach = function forEach (f, from, to) {\n    if ( from === void 0 ) from = 0;\n    if ( to === void 0 ) to = this.length;\n\n  if (from <= to)\n    { this.forEachInner(f, from, to, 0); }\n  else\n    { this.forEachInvertedInner(f, from, to, 0); }\n};\n\n// :: ((element: T, index: number)  U, ?number, ?number)  [U]\n// Map the given functions over the elements of the rope, producing\n// a flat array.\nRopeSequence.prototype.map = function map (f, from, to) {\n    if ( from === void 0 ) from = 0;\n    if ( to === void 0 ) to = this.length;\n\n  var result = [];\n  this.forEach(function (elt, i) { return result.push(f(elt, i)); }, from, to);\n  return result\n};\n\n// :: (?union<[T], RopeSequence<T>>)  RopeSequence<T>\n// Create a rope representing the given array, or return the rope\n// itself if a rope was given.\nRopeSequence.from = function from (values) {\n  if (values instanceof RopeSequence) { return values }\n  return values && values.length ? new Leaf(values) : RopeSequence.empty\n};\n\nvar Leaf = /*@__PURE__*/(function (RopeSequence) {\n  function Leaf(values) {\n    RopeSequence.call(this);\n    this.values = values;\n  }\n\n  if ( RopeSequence ) Leaf.__proto__ = RopeSequence;\n  Leaf.prototype = Object.create( RopeSequence && RopeSequence.prototype );\n  Leaf.prototype.constructor = Leaf;\n\n  var prototypeAccessors = { length: { configurable: true },depth: { configurable: true } };\n\n  Leaf.prototype.flatten = function flatten () {\n    return this.values\n  };\n\n  Leaf.prototype.sliceInner = function sliceInner (from, to) {\n    if (from == 0 && to == this.length) { return this }\n    return new Leaf(this.values.slice(from, to))\n  };\n\n  Leaf.prototype.getInner = function getInner (i) {\n    return this.values[i]\n  };\n\n  Leaf.prototype.forEachInner = function forEachInner (f, from, to, start) {\n    for (var i = from; i < to; i++)\n      { if (f(this.values[i], start + i) === false) { return false } }\n  };\n\n  Leaf.prototype.forEachInvertedInner = function forEachInvertedInner (f, from, to, start) {\n    for (var i = from - 1; i >= to; i--)\n      { if (f(this.values[i], start + i) === false) { return false } }\n  };\n\n  Leaf.prototype.leafAppend = function leafAppend (other) {\n    if (this.length + other.length <= GOOD_LEAF_SIZE)\n      { return new Leaf(this.values.concat(other.flatten())) }\n  };\n\n  Leaf.prototype.leafPrepend = function leafPrepend (other) {\n    if (this.length + other.length <= GOOD_LEAF_SIZE)\n      { return new Leaf(other.flatten().concat(this.values)) }\n  };\n\n  prototypeAccessors.length.get = function () { return this.values.length };\n\n  prototypeAccessors.depth.get = function () { return 0 };\n\n  Object.defineProperties( Leaf.prototype, prototypeAccessors );\n\n  return Leaf;\n}(RopeSequence));\n\n// :: RopeSequence\n// The empty rope sequence.\nRopeSequence.empty = new Leaf([]);\n\nvar Append = /*@__PURE__*/(function (RopeSequence) {\n  function Append(left, right) {\n    RopeSequence.call(this);\n    this.left = left;\n    this.right = right;\n    this.length = left.length + right.length;\n    this.depth = Math.max(left.depth, right.depth) + 1;\n  }\n\n  if ( RopeSequence ) Append.__proto__ = RopeSequence;\n  Append.prototype = Object.create( RopeSequence && RopeSequence.prototype );\n  Append.prototype.constructor = Append;\n\n  Append.prototype.flatten = function flatten () {\n    return this.left.flatten().concat(this.right.flatten())\n  };\n\n  Append.prototype.getInner = function getInner (i) {\n    return i < this.left.length ? this.left.get(i) : this.right.get(i - this.left.length)\n  };\n\n  Append.prototype.forEachInner = function forEachInner (f, from, to, start) {\n    var leftLen = this.left.length;\n    if (from < leftLen &&\n        this.left.forEachInner(f, from, Math.min(to, leftLen), start) === false)\n      { return false }\n    if (to > leftLen &&\n        this.right.forEachInner(f, Math.max(from - leftLen, 0), Math.min(this.length, to) - leftLen, start + leftLen) === false)\n      { return false }\n  };\n\n  Append.prototype.forEachInvertedInner = function forEachInvertedInner (f, from, to, start) {\n    var leftLen = this.left.length;\n    if (from > leftLen &&\n        this.right.forEachInvertedInner(f, from - leftLen, Math.max(to, leftLen) - leftLen, start + leftLen) === false)\n      { return false }\n    if (to < leftLen &&\n        this.left.forEachInvertedInner(f, Math.min(from, leftLen), to, start) === false)\n      { return false }\n  };\n\n  Append.prototype.sliceInner = function sliceInner (from, to) {\n    if (from == 0 && to == this.length) { return this }\n    var leftLen = this.left.length;\n    if (to <= leftLen) { return this.left.slice(from, to) }\n    if (from >= leftLen) { return this.right.slice(from - leftLen, to - leftLen) }\n    return this.left.slice(from, leftLen).append(this.right.slice(0, to - leftLen))\n  };\n\n  Append.prototype.leafAppend = function leafAppend (other) {\n    var inner = this.right.leafAppend(other);\n    if (inner) { return new Append(this.left, inner) }\n  };\n\n  Append.prototype.leafPrepend = function leafPrepend (other) {\n    var inner = this.left.leafPrepend(other);\n    if (inner) { return new Append(inner, this.right) }\n  };\n\n  Append.prototype.appendInner = function appendInner (other) {\n    if (this.left.depth >= Math.max(this.right.depth, other.depth) + 1)\n      { return new Append(this.left, new Append(this.right, other)) }\n    return new Append(this, other)\n  };\n\n  return Append;\n}(RopeSequence));\n\nvar ropeSequence = RopeSequence;\n\nexport default ropeSequence;\n","import RopeSequence from 'rope-sequence';\nimport { Mapping } from 'prosemirror-transform';\nimport { PluginKey, Plugin } from 'prosemirror-state';\n\n// ProseMirror's history isn't simply a way to roll back to a previous\n// state, because ProseMirror supports applying changes without adding\n// them to the history (for example during collaboration).\n//\n// To this end, each 'Branch' (one for the undo history and one for\n// the redo history) keeps an array of 'Items', which can optionally\n// hold a step (an actual undoable change), and always hold a position\n// map (which is needed to move changes below them to apply to the\n// current document).\n//\n// An item that has both a step and a selection bookmark is the start\n// of an 'event'  a group of changes that will be undone or redone at\n// once. (It stores only the bookmark, since that way we don't have to\n// provide a document until the selection is actually applied, which\n// is useful when compressing.)\n// Used to schedule history compression\nconst max_empty_items = 500;\nclass Branch {\n    constructor(items, eventCount) {\n        this.items = items;\n        this.eventCount = eventCount;\n    }\n    // Pop the latest event off the branch's history and apply it\n    // to a document transform.\n    popEvent(state, preserveItems) {\n        if (this.eventCount == 0)\n            return null;\n        let end = this.items.length;\n        for (;; end--) {\n            let next = this.items.get(end - 1);\n            if (next.selection) {\n                --end;\n                break;\n            }\n        }\n        let remap, mapFrom;\n        if (preserveItems) {\n            remap = this.remapping(end, this.items.length);\n            mapFrom = remap.maps.length;\n        }\n        let transform = state.tr;\n        let selection, remaining;\n        let addAfter = [], addBefore = [];\n        this.items.forEach((item, i) => {\n            if (!item.step) {\n                if (!remap) {\n                    remap = this.remapping(end, i + 1);\n                    mapFrom = remap.maps.length;\n                }\n                mapFrom--;\n                addBefore.push(item);\n                return;\n            }\n            if (remap) {\n                addBefore.push(new Item(item.map));\n                let step = item.step.map(remap.slice(mapFrom)), map;\n                if (step && transform.maybeStep(step).doc) {\n                    map = transform.mapping.maps[transform.mapping.maps.length - 1];\n                    addAfter.push(new Item(map, undefined, undefined, addAfter.length + addBefore.length));\n                }\n                mapFrom--;\n                if (map)\n                    remap.appendMap(map, mapFrom);\n            }\n            else {\n                transform.maybeStep(item.step);\n            }\n            if (item.selection) {\n                selection = remap ? item.selection.map(remap.slice(mapFrom)) : item.selection;\n                remaining = new Branch(this.items.slice(0, end).append(addBefore.reverse().concat(addAfter)), this.eventCount - 1);\n                return false;\n            }\n        }, this.items.length, 0);\n        return { remaining: remaining, transform, selection: selection };\n    }\n    // Create a new branch with the given transform added.\n    addTransform(transform, selection, histOptions, preserveItems) {\n        let newItems = [], eventCount = this.eventCount;\n        let oldItems = this.items, lastItem = !preserveItems && oldItems.length ? oldItems.get(oldItems.length - 1) : null;\n        for (let i = 0; i < transform.steps.length; i++) {\n            let step = transform.steps[i].invert(transform.docs[i]);\n            let item = new Item(transform.mapping.maps[i], step, selection), merged;\n            if (merged = lastItem && lastItem.merge(item)) {\n                item = merged;\n                if (i)\n                    newItems.pop();\n                else\n                    oldItems = oldItems.slice(0, oldItems.length - 1);\n            }\n            newItems.push(item);\n            if (selection) {\n                eventCount++;\n                selection = undefined;\n            }\n            if (!preserveItems)\n                lastItem = item;\n        }\n        let overflow = eventCount - histOptions.depth;\n        if (overflow > DEPTH_OVERFLOW) {\n            oldItems = cutOffEvents(oldItems, overflow);\n            eventCount -= overflow;\n        }\n        return new Branch(oldItems.append(newItems), eventCount);\n    }\n    remapping(from, to) {\n        let maps = new Mapping;\n        this.items.forEach((item, i) => {\n            let mirrorPos = item.mirrorOffset != null && i - item.mirrorOffset >= from\n                ? maps.maps.length - item.mirrorOffset : undefined;\n            maps.appendMap(item.map, mirrorPos);\n        }, from, to);\n        return maps;\n    }\n    addMaps(array) {\n        if (this.eventCount == 0)\n            return this;\n        return new Branch(this.items.append(array.map(map => new Item(map))), this.eventCount);\n    }\n    // When the collab module receives remote changes, the history has\n    // to know about those, so that it can adjust the steps that were\n    // rebased on top of the remote changes, and include the position\n    // maps for the remote changes in its array of items.\n    rebased(rebasedTransform, rebasedCount) {\n        if (!this.eventCount)\n            return this;\n        let rebasedItems = [], start = Math.max(0, this.items.length - rebasedCount);\n        let mapping = rebasedTransform.mapping;\n        let newUntil = rebasedTransform.steps.length;\n        let eventCount = this.eventCount;\n        this.items.forEach(item => { if (item.selection)\n            eventCount--; }, start);\n        let iRebased = rebasedCount;\n        this.items.forEach(item => {\n            let pos = mapping.getMirror(--iRebased);\n            if (pos == null)\n                return;\n            newUntil = Math.min(newUntil, pos);\n            let map = mapping.maps[pos];\n            if (item.step) {\n                let step = rebasedTransform.steps[pos].invert(rebasedTransform.docs[pos]);\n                let selection = item.selection && item.selection.map(mapping.slice(iRebased + 1, pos));\n                if (selection)\n                    eventCount++;\n                rebasedItems.push(new Item(map, step, selection));\n            }\n            else {\n                rebasedItems.push(new Item(map));\n            }\n        }, start);\n        let newMaps = [];\n        for (let i = rebasedCount; i < newUntil; i++)\n            newMaps.push(new Item(mapping.maps[i]));\n        let items = this.items.slice(0, start).append(newMaps).append(rebasedItems);\n        let branch = new Branch(items, eventCount);\n        if (branch.emptyItemCount() > max_empty_items)\n            branch = branch.compress(this.items.length - rebasedItems.length);\n        return branch;\n    }\n    emptyItemCount() {\n        let count = 0;\n        this.items.forEach(item => { if (!item.step)\n            count++; });\n        return count;\n    }\n    // Compressing a branch means rewriting it to push the air (map-only\n    // items) out. During collaboration, these naturally accumulate\n    // because each remote change adds one. The `upto` argument is used\n    // to ensure that only the items below a given level are compressed,\n    // because `rebased` relies on a clean, untouched set of items in\n    // order to associate old items with rebased steps.\n    compress(upto = this.items.length) {\n        let remap = this.remapping(0, upto), mapFrom = remap.maps.length;\n        let items = [], events = 0;\n        this.items.forEach((item, i) => {\n            if (i >= upto) {\n                items.push(item);\n                if (item.selection)\n                    events++;\n            }\n            else if (item.step) {\n                let step = item.step.map(remap.slice(mapFrom)), map = step && step.getMap();\n                mapFrom--;\n                if (map)\n                    remap.appendMap(map, mapFrom);\n                if (step) {\n                    let selection = item.selection && item.selection.map(remap.slice(mapFrom));\n                    if (selection)\n                        events++;\n                    let newItem = new Item(map.invert(), step, selection), merged, last = items.length - 1;\n                    if (merged = items.length && items[last].merge(newItem))\n                        items[last] = merged;\n                    else\n                        items.push(newItem);\n                }\n            }\n            else if (item.map) {\n                mapFrom--;\n            }\n        }, this.items.length, 0);\n        return new Branch(RopeSequence.from(items.reverse()), events);\n    }\n}\nBranch.empty = new Branch(RopeSequence.empty, 0);\nfunction cutOffEvents(items, n) {\n    let cutPoint;\n    items.forEach((item, i) => {\n        if (item.selection && (n-- == 0)) {\n            cutPoint = i;\n            return false;\n        }\n    });\n    return items.slice(cutPoint);\n}\nclass Item {\n    constructor(\n    // The (forward) step map for this item.\n    map, \n    // The inverted step\n    step, \n    // If this is non-null, this item is the start of a group, and\n    // this selection is the starting selection for the group (the one\n    // that was active before the first step was applied)\n    selection, \n    // If this item is the inverse of a previous mapping on the stack,\n    // this points at the inverse's offset\n    mirrorOffset) {\n        this.map = map;\n        this.step = step;\n        this.selection = selection;\n        this.mirrorOffset = mirrorOffset;\n    }\n    merge(other) {\n        if (this.step && other.step && !other.selection) {\n            let step = other.step.merge(this.step);\n            if (step)\n                return new Item(step.getMap().invert(), step, this.selection);\n        }\n    }\n}\n// The value of the state field that tracks undo/redo history for that\n// state. Will be stored in the plugin state when the history plugin\n// is active.\nclass HistoryState {\n    constructor(done, undone, prevRanges, prevTime) {\n        this.done = done;\n        this.undone = undone;\n        this.prevRanges = prevRanges;\n        this.prevTime = prevTime;\n    }\n}\nconst DEPTH_OVERFLOW = 20;\n// Record a transformation in undo history.\nfunction applyTransaction(history, state, tr, options) {\n    let historyTr = tr.getMeta(historyKey), rebased;\n    if (historyTr)\n        return historyTr.historyState;\n    if (tr.getMeta(closeHistoryKey))\n        history = new HistoryState(history.done, history.undone, null, 0);\n    let appended = tr.getMeta(\"appendedTransaction\");\n    if (tr.steps.length == 0) {\n        return history;\n    }\n    else if (appended && appended.getMeta(historyKey)) {\n        if (appended.getMeta(historyKey).redo)\n            return new HistoryState(history.done.addTransform(tr, undefined, options, mustPreserveItems(state)), history.undone, rangesFor(tr.mapping.maps[tr.steps.length - 1]), history.prevTime);\n        else\n            return new HistoryState(history.done, history.undone.addTransform(tr, undefined, options, mustPreserveItems(state)), null, history.prevTime);\n    }\n    else if (tr.getMeta(\"addToHistory\") !== false && !(appended && appended.getMeta(\"addToHistory\") === false)) {\n        // Group transforms that occur in quick succession into one event.\n        let newGroup = history.prevTime == 0 || !appended && (history.prevTime < (tr.time || 0) - options.newGroupDelay ||\n            !isAdjacentTo(tr, history.prevRanges));\n        let prevRanges = appended ? mapRanges(history.prevRanges, tr.mapping) : rangesFor(tr.mapping.maps[tr.steps.length - 1]);\n        return new HistoryState(history.done.addTransform(tr, newGroup ? state.selection.getBookmark() : undefined, options, mustPreserveItems(state)), Branch.empty, prevRanges, tr.time);\n    }\n    else if (rebased = tr.getMeta(\"rebased\")) {\n        // Used by the collab module to tell the history that some of its\n        // content has been rebased.\n        return new HistoryState(history.done.rebased(tr, rebased), history.undone.rebased(tr, rebased), mapRanges(history.prevRanges, tr.mapping), history.prevTime);\n    }\n    else {\n        return new HistoryState(history.done.addMaps(tr.mapping.maps), history.undone.addMaps(tr.mapping.maps), mapRanges(history.prevRanges, tr.mapping), history.prevTime);\n    }\n}\nfunction isAdjacentTo(transform, prevRanges) {\n    if (!prevRanges)\n        return false;\n    if (!transform.docChanged)\n        return true;\n    let adjacent = false;\n    transform.mapping.maps[0].forEach((start, end) => {\n        for (let i = 0; i < prevRanges.length; i += 2)\n            if (start <= prevRanges[i + 1] && end >= prevRanges[i])\n                adjacent = true;\n    });\n    return adjacent;\n}\nfunction rangesFor(map) {\n    let result = [];\n    map.forEach((_from, _to, from, to) => result.push(from, to));\n    return result;\n}\nfunction mapRanges(ranges, mapping) {\n    if (!ranges)\n        return null;\n    let result = [];\n    for (let i = 0; i < ranges.length; i += 2) {\n        let from = mapping.map(ranges[i], 1), to = mapping.map(ranges[i + 1], -1);\n        if (from <= to)\n            result.push(from, to);\n    }\n    return result;\n}\n// Apply the latest event from one branch to the document and shift the event\n// onto the other branch.\nfunction histTransaction(history, state, dispatch, redo) {\n    let preserveItems = mustPreserveItems(state);\n    let histOptions = historyKey.get(state).spec.config;\n    let pop = (redo ? history.undone : history.done).popEvent(state, preserveItems);\n    if (!pop)\n        return;\n    let selection = pop.selection.resolve(pop.transform.doc);\n    let added = (redo ? history.done : history.undone).addTransform(pop.transform, state.selection.getBookmark(), histOptions, preserveItems);\n    let newHist = new HistoryState(redo ? added : pop.remaining, redo ? pop.remaining : added, null, 0);\n    dispatch(pop.transform.setSelection(selection).setMeta(historyKey, { redo, historyState: newHist }).scrollIntoView());\n}\nlet cachedPreserveItems = false, cachedPreserveItemsPlugins = null;\n// Check whether any plugin in the given state has a\n// `historyPreserveItems` property in its spec, in which case we must\n// preserve steps exactly as they came in, so that they can be\n// rebased.\nfunction mustPreserveItems(state) {\n    let plugins = state.plugins;\n    if (cachedPreserveItemsPlugins != plugins) {\n        cachedPreserveItems = false;\n        cachedPreserveItemsPlugins = plugins;\n        for (let i = 0; i < plugins.length; i++)\n            if (plugins[i].spec.historyPreserveItems) {\n                cachedPreserveItems = true;\n                break;\n            }\n    }\n    return cachedPreserveItems;\n}\n/**\nSet a flag on the given transaction that will prevent further steps\nfrom being appended to an existing history event (so that they\nrequire a separate undo command to undo).\n*/\nfunction closeHistory(tr) {\n    return tr.setMeta(closeHistoryKey, true);\n}\nconst historyKey = new PluginKey(\"history\");\nconst closeHistoryKey = new PluginKey(\"closeHistory\");\n/**\nReturns a plugin that enables the undo history for an editor. The\nplugin will track undo and redo stacks, which can be used with the\n[`undo`](https://prosemirror.net/docs/ref/#history.undo) and [`redo`](https://prosemirror.net/docs/ref/#history.redo) commands.\n\nYou can set an `\"addToHistory\"` [metadata\nproperty](https://prosemirror.net/docs/ref/#state.Transaction.setMeta) of `false` on a transaction\nto prevent it from being rolled back by undo.\n*/\nfunction history(config = {}) {\n    config = { depth: config.depth || 100,\n        newGroupDelay: config.newGroupDelay || 500 };\n    return new Plugin({\n        key: historyKey,\n        state: {\n            init() {\n                return new HistoryState(Branch.empty, Branch.empty, null, 0);\n            },\n            apply(tr, hist, state) {\n                return applyTransaction(hist, state, tr, config);\n            }\n        },\n        config,\n        props: {\n            handleDOMEvents: {\n                beforeinput(view, e) {\n                    let inputType = e.inputType;\n                    let command = inputType == \"historyUndo\" ? undo : inputType == \"historyRedo\" ? redo : null;\n                    if (!command)\n                        return false;\n                    e.preventDefault();\n                    return command(view.state, view.dispatch);\n                }\n            }\n        }\n    });\n}\n/**\nA command function that undoes the last change, if any.\n*/\nconst undo = (state, dispatch) => {\n    let hist = historyKey.getState(state);\n    if (!hist || hist.done.eventCount == 0)\n        return false;\n    if (dispatch)\n        histTransaction(hist, state, dispatch, false);\n    return true;\n};\n/**\nA command function that redoes the last undone change, if any.\n*/\nconst redo = (state, dispatch) => {\n    let hist = historyKey.getState(state);\n    if (!hist || hist.undone.eventCount == 0)\n        return false;\n    if (dispatch)\n        histTransaction(hist, state, dispatch, true);\n    return true;\n};\n/**\nThe amount of undoable events available in a given state.\n*/\nfunction undoDepth(state) {\n    let hist = historyKey.getState(state);\n    return hist ? hist.done.eventCount : 0;\n}\n/**\nThe amount of redoable events available in a given editor state.\n*/\nfunction redoDepth(state) {\n    let hist = historyKey.getState(state);\n    return hist ? hist.undone.eventCount : 0;\n}\n\nexport { closeHistory, history, redo, redoDepth, undo, undoDepth };\n","import { Extension } from '@tiptap/core';\nimport { undo, redo, history } from 'prosemirror-history';\n\nconst History = Extension.create({\r\n    name: 'history',\r\n    addOptions() {\r\n        return {\r\n            depth: 100,\r\n            newGroupDelay: 500,\r\n        };\r\n    },\r\n    addCommands() {\r\n        return {\r\n            undo: () => ({ state, dispatch }) => {\r\n                return undo(state, dispatch);\r\n            },\r\n            redo: () => ({ state, dispatch }) => {\r\n                return redo(state, dispatch);\r\n            },\r\n        };\r\n    },\r\n    addProseMirrorPlugins() {\r\n        return [\r\n            history(this.options),\r\n        ];\r\n    },\r\n    addKeyboardShortcuts() {\r\n        return {\r\n            'Mod-z': () => this.editor.commands.undo(),\r\n            'Mod-y': () => this.editor.commands.redo(),\r\n            'Shift-Mod-z': () => this.editor.commands.redo(),\r\n            // Russian keyboard layouts\r\n            'Mod-': () => this.editor.commands.undo(),\r\n            'Shift-Mod-': () => this.editor.commands.redo(),\r\n        };\r\n    },\r\n});\n\nexport { History, History as default };\n//# sourceMappingURL=tiptap-extension-history.esm.js.map\n","import { Node, mergeAttributes, nodeInputRule } from '@tiptap/core';\nimport { TextSelection } from 'prosemirror-state';\n\nconst HorizontalRule = Node.create({\r\n    name: 'horizontalRule',\r\n    addOptions() {\r\n        return {\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    group: 'block',\r\n    parseHTML() {\r\n        return [\r\n            { tag: 'hr' },\r\n        ];\r\n    },\r\n    renderHTML({ HTMLAttributes }) {\r\n        return ['hr', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setHorizontalRule: () => ({ chain }) => {\r\n                return chain()\r\n                    .insertContent({ type: this.name })\r\n                    // set cursor after horizontal rule\r\n                    .command(({ tr, dispatch }) => {\r\n                    var _a;\r\n                    if (dispatch) {\r\n                        const { $to } = tr.selection;\r\n                        const posAfter = $to.end();\r\n                        if ($to.nodeAfter) {\r\n                            tr.setSelection(TextSelection.create(tr.doc, $to.pos));\r\n                        }\r\n                        else {\r\n                            // add node after horizontal rule if its the end of the document\r\n                            const node = (_a = $to.parent.type.contentMatch.defaultType) === null || _a === void 0 ? void 0 : _a.create();\r\n                            if (node) {\r\n                                tr.insert(posAfter, node);\r\n                                tr.setSelection(TextSelection.create(tr.doc, posAfter));\r\n                            }\r\n                        }\r\n                        tr.scrollIntoView();\r\n                    }\r\n                    return true;\r\n                })\r\n                    .run();\r\n            },\r\n        };\r\n    },\r\n    addInputRules() {\r\n        return [\r\n            nodeInputRule({\r\n                find: /^(?:---|-|___\\s|\\*\\*\\*\\s)$/,\r\n                type: this.type,\r\n            }),\r\n        ];\r\n    },\r\n});\n\nexport { HorizontalRule, HorizontalRule as default };\n//# sourceMappingURL=tiptap-extension-horizontal-rule.esm.js.map\n","import { Mark, mergeAttributes, markInputRule, markPasteRule } from '@tiptap/core';\n\nconst starInputRegex = /(?:^|\\s)((?:\\*)((?:[^*]+))(?:\\*))$/;\r\nconst starPasteRegex = /(?:^|\\s)((?:\\*)((?:[^*]+))(?:\\*))/g;\r\nconst underscoreInputRegex = /(?:^|\\s)((?:_)((?:[^_]+))(?:_))$/;\r\nconst underscorePasteRegex = /(?:^|\\s)((?:_)((?:[^_]+))(?:_))/g;\r\nconst Italic = Mark.create({\r\n    name: 'italic',\r\n    addOptions() {\r\n        return {\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    parseHTML() {\r\n        return [\r\n            {\r\n                tag: 'em',\r\n            },\r\n            {\r\n                tag: 'i',\r\n                getAttrs: node => node.style.fontStyle !== 'normal' && null,\r\n            },\r\n            {\r\n                style: 'font-style=italic',\r\n            },\r\n        ];\r\n    },\r\n    renderHTML({ HTMLAttributes }) {\r\n        return ['em', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setItalic: () => ({ commands }) => {\r\n                return commands.setMark(this.name);\r\n            },\r\n            toggleItalic: () => ({ commands }) => {\r\n                return commands.toggleMark(this.name);\r\n            },\r\n            unsetItalic: () => ({ commands }) => {\r\n                return commands.unsetMark(this.name);\r\n            },\r\n        };\r\n    },\r\n    addKeyboardShortcuts() {\r\n        return {\r\n            'Mod-i': () => this.editor.commands.toggleItalic(),\r\n            'Mod-I': () => this.editor.commands.toggleItalic(),\r\n        };\r\n    },\r\n    addInputRules() {\r\n        return [\r\n            markInputRule({\r\n                find: starInputRegex,\r\n                type: this.type,\r\n            }),\r\n            markInputRule({\r\n                find: underscoreInputRegex,\r\n                type: this.type,\r\n            }),\r\n        ];\r\n    },\r\n    addPasteRules() {\r\n        return [\r\n            markPasteRule({\r\n                find: starPasteRegex,\r\n                type: this.type,\r\n            }),\r\n            markPasteRule({\r\n                find: underscorePasteRegex,\r\n                type: this.type,\r\n            }),\r\n        ];\r\n    },\r\n});\n\nexport { Italic, Italic as default, starInputRegex, starPasteRegex, underscoreInputRegex, underscorePasteRegex };\n//# sourceMappingURL=tiptap-extension-italic.esm.js.map\n","import { Node, mergeAttributes } from '@tiptap/core';\n\nconst ListItem = Node.create({\r\n    name: 'listItem',\r\n    addOptions() {\r\n        return {\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    content: 'paragraph block*',\r\n    defining: true,\r\n    parseHTML() {\r\n        return [\r\n            {\r\n                tag: 'li',\r\n            },\r\n        ];\r\n    },\r\n    renderHTML({ HTMLAttributes }) {\r\n        return ['li', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\r\n    },\r\n    addKeyboardShortcuts() {\r\n        return {\r\n            Enter: () => this.editor.commands.splitListItem(this.name),\r\n            Tab: () => this.editor.commands.sinkListItem(this.name),\r\n            'Shift-Tab': () => this.editor.commands.liftListItem(this.name),\r\n        };\r\n    },\r\n});\n\nexport { ListItem, ListItem as default };\n//# sourceMappingURL=tiptap-extension-list-item.esm.js.map\n","import { Node, mergeAttributes, wrappingInputRule } from '@tiptap/core';\n\nconst inputRegex = /^(\\d+)\\.\\s$/;\r\nconst OrderedList = Node.create({\r\n    name: 'orderedList',\r\n    addOptions() {\r\n        return {\r\n            itemTypeName: 'listItem',\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    group: 'block list',\r\n    content() {\r\n        return `${this.options.itemTypeName}+`;\r\n    },\r\n    addAttributes() {\r\n        return {\r\n            start: {\r\n                default: 1,\r\n                parseHTML: element => {\r\n                    return element.hasAttribute('start')\r\n                        ? parseInt(element.getAttribute('start') || '', 10)\r\n                        : 1;\r\n                },\r\n            },\r\n        };\r\n    },\r\n    parseHTML() {\r\n        return [\r\n            {\r\n                tag: 'ol',\r\n            },\r\n        ];\r\n    },\r\n    renderHTML({ HTMLAttributes }) {\r\n        const { start, ...attributesWithoutStart } = HTMLAttributes;\r\n        return start === 1\r\n            ? ['ol', mergeAttributes(this.options.HTMLAttributes, attributesWithoutStart), 0]\r\n            : ['ol', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            toggleOrderedList: () => ({ commands }) => {\r\n                return commands.toggleList(this.name, this.options.itemTypeName);\r\n            },\r\n        };\r\n    },\r\n    addKeyboardShortcuts() {\r\n        return {\r\n            'Mod-Shift-7': () => this.editor.commands.toggleOrderedList(),\r\n        };\r\n    },\r\n    addInputRules() {\r\n        return [\r\n            wrappingInputRule({\r\n                find: inputRegex,\r\n                type: this.type,\r\n                getAttributes: match => ({ start: +match[1] }),\r\n                joinPredicate: (match, node) => node.childCount + node.attrs.start === +match[1],\r\n            }),\r\n        ];\r\n    },\r\n});\n\nexport { OrderedList, OrderedList as default, inputRegex };\n//# sourceMappingURL=tiptap-extension-ordered-list.esm.js.map\n","import { Node, mergeAttributes } from '@tiptap/core';\n\nconst Paragraph = Node.create({\r\n    name: 'paragraph',\r\n    priority: 1000,\r\n    addOptions() {\r\n        return {\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    group: 'block',\r\n    content: 'inline*',\r\n    parseHTML() {\r\n        return [\r\n            { tag: 'p' },\r\n        ];\r\n    },\r\n    renderHTML({ HTMLAttributes }) {\r\n        return ['p', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setParagraph: () => ({ commands }) => {\r\n                return commands.setNode(this.name);\r\n            },\r\n        };\r\n    },\r\n    addKeyboardShortcuts() {\r\n        return {\r\n            'Mod-Alt-0': () => this.editor.commands.setParagraph(),\r\n        };\r\n    },\r\n});\n\nexport { Paragraph, Paragraph as default };\n//# sourceMappingURL=tiptap-extension-paragraph.esm.js.map\n","import { Mark, mergeAttributes, markInputRule, markPasteRule } from '@tiptap/core';\n\nconst inputRegex = /(?:^|\\s)((?:~~)((?:[^~]+))(?:~~))$/;\r\nconst pasteRegex = /(?:^|\\s)((?:~~)((?:[^~]+))(?:~~))/g;\r\nconst Strike = Mark.create({\r\n    name: 'strike',\r\n    addOptions() {\r\n        return {\r\n            HTMLAttributes: {},\r\n        };\r\n    },\r\n    parseHTML() {\r\n        return [\r\n            {\r\n                tag: 's',\r\n            },\r\n            {\r\n                tag: 'del',\r\n            },\r\n            {\r\n                tag: 'strike',\r\n            },\r\n            {\r\n                style: 'text-decoration',\r\n                consuming: false,\r\n                getAttrs: style => (style.includes('line-through') ? {} : false),\r\n            },\r\n        ];\r\n    },\r\n    renderHTML({ HTMLAttributes }) {\r\n        return ['s', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setStrike: () => ({ commands }) => {\r\n                return commands.setMark(this.name);\r\n            },\r\n            toggleStrike: () => ({ commands }) => {\r\n                return commands.toggleMark(this.name);\r\n            },\r\n            unsetStrike: () => ({ commands }) => {\r\n                return commands.unsetMark(this.name);\r\n            },\r\n        };\r\n    },\r\n    addKeyboardShortcuts() {\r\n        return {\r\n            'Mod-Shift-x': () => this.editor.commands.toggleStrike(),\r\n        };\r\n    },\r\n    addInputRules() {\r\n        return [\r\n            markInputRule({\r\n                find: inputRegex,\r\n                type: this.type,\r\n            }),\r\n        ];\r\n    },\r\n    addPasteRules() {\r\n        return [\r\n            markPasteRule({\r\n                find: pasteRegex,\r\n                type: this.type,\r\n            }),\r\n        ];\r\n    },\r\n});\n\nexport { Strike, Strike as default, inputRegex, pasteRegex };\n//# sourceMappingURL=tiptap-extension-strike.esm.js.map\n","import { Node } from '@tiptap/core';\n\nconst Text = Node.create({\r\n    name: 'text',\r\n    group: 'inline',\r\n});\n\nexport { Text, Text as default };\n//# sourceMappingURL=tiptap-extension-text.esm.js.map\n","import { Extension } from '@tiptap/core';\nimport Blockquote from '@tiptap/extension-blockquote';\nimport Bold from '@tiptap/extension-bold';\nimport BulletList from '@tiptap/extension-bullet-list';\nimport Code from '@tiptap/extension-code';\nimport CodeBlock from '@tiptap/extension-code-block';\nimport Document from '@tiptap/extension-document';\nimport Dropcursor from '@tiptap/extension-dropcursor';\nimport Gapcursor from '@tiptap/extension-gapcursor';\nimport HardBreak from '@tiptap/extension-hard-break';\nimport Heading from '@tiptap/extension-heading';\nimport History from '@tiptap/extension-history';\nimport HorizontalRule from '@tiptap/extension-horizontal-rule';\nimport Italic from '@tiptap/extension-italic';\nimport ListItem from '@tiptap/extension-list-item';\nimport OrderedList from '@tiptap/extension-ordered-list';\nimport Paragraph from '@tiptap/extension-paragraph';\nimport Strike from '@tiptap/extension-strike';\nimport Text from '@tiptap/extension-text';\n\nconst StarterKit = Extension.create({\r\n    name: 'starterKit',\r\n    addExtensions() {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t;\r\n        const extensions = [];\r\n        if (this.options.blockquote !== false) {\r\n            extensions.push(Blockquote.configure((_a = this.options) === null || _a === void 0 ? void 0 : _a.blockquote));\r\n        }\r\n        if (this.options.bold !== false) {\r\n            extensions.push(Bold.configure((_b = this.options) === null || _b === void 0 ? void 0 : _b.bold));\r\n        }\r\n        if (this.options.bulletList !== false) {\r\n            extensions.push(BulletList.configure((_c = this.options) === null || _c === void 0 ? void 0 : _c.bulletList));\r\n        }\r\n        if (this.options.code !== false) {\r\n            extensions.push(Code.configure((_d = this.options) === null || _d === void 0 ? void 0 : _d.code));\r\n        }\r\n        if (this.options.codeBlock !== false) {\r\n            extensions.push(CodeBlock.configure((_e = this.options) === null || _e === void 0 ? void 0 : _e.codeBlock));\r\n        }\r\n        if (this.options.document !== false) {\r\n            extensions.push(Document.configure((_f = this.options) === null || _f === void 0 ? void 0 : _f.document));\r\n        }\r\n        if (this.options.dropcursor !== false) {\r\n            extensions.push(Dropcursor.configure((_g = this.options) === null || _g === void 0 ? void 0 : _g.dropcursor));\r\n        }\r\n        if (this.options.gapcursor !== false) {\r\n            extensions.push(Gapcursor.configure((_h = this.options) === null || _h === void 0 ? void 0 : _h.gapcursor));\r\n        }\r\n        if (this.options.hardBreak !== false) {\r\n            extensions.push(HardBreak.configure((_j = this.options) === null || _j === void 0 ? void 0 : _j.hardBreak));\r\n        }\r\n        if (this.options.heading !== false) {\r\n            extensions.push(Heading.configure((_k = this.options) === null || _k === void 0 ? void 0 : _k.heading));\r\n        }\r\n        if (this.options.history !== false) {\r\n            extensions.push(History.configure((_l = this.options) === null || _l === void 0 ? void 0 : _l.history));\r\n        }\r\n        if (this.options.horizontalRule !== false) {\r\n            extensions.push(HorizontalRule.configure((_m = this.options) === null || _m === void 0 ? void 0 : _m.horizontalRule));\r\n        }\r\n        if (this.options.italic !== false) {\r\n            extensions.push(Italic.configure((_o = this.options) === null || _o === void 0 ? void 0 : _o.italic));\r\n        }\r\n        if (this.options.listItem !== false) {\r\n            extensions.push(ListItem.configure((_p = this.options) === null || _p === void 0 ? void 0 : _p.listItem));\r\n        }\r\n        if (this.options.orderedList !== false) {\r\n            extensions.push(OrderedList.configure((_q = this.options) === null || _q === void 0 ? void 0 : _q.orderedList));\r\n        }\r\n        if (this.options.paragraph !== false) {\r\n            extensions.push(Paragraph.configure((_r = this.options) === null || _r === void 0 ? void 0 : _r.paragraph));\r\n        }\r\n        if (this.options.strike !== false) {\r\n            extensions.push(Strike.configure((_s = this.options) === null || _s === void 0 ? void 0 : _s.strike));\r\n        }\r\n        if (this.options.text !== false) {\r\n            extensions.push(Text.configure((_t = this.options) === null || _t === void 0 ? void 0 : _t.text));\r\n        }\r\n        return extensions;\r\n    },\r\n});\n\nexport { StarterKit as default };\n//# sourceMappingURL=tiptap-starter-kit.esm.js.map\n","/**\n * Finite State Machine generation utilities\n */\n\n/**\n * Define a basic state machine state. j is the list of character transitions,\n * jr is the list of regex-match transitions, jd is the default state to\n * transition to t is the accepting token type, if any. If this is the terminal\n * state, then it does not emit a token.\n * @param {string|class} token to emit\n */\nfunction State(token) {\n  this.j = {}; // IMPLEMENTATION 1\n  // this.j = []; // IMPLEMENTATION 2\n\n  this.jr = [];\n  this.jd = null;\n  this.t = token;\n}\n/**\n * Take the transition from this state to the next one on the given input.\n * If this state does not exist deterministically, will create it.\n *\n * @param {string} input character or token to transition on\n * @param {string|class} [token] token or multi-token to emit when reaching\n * this state\n */\n\nState.prototype = {\n  /**\n   * @param {State} state\n   */\n  accepts: function accepts() {\n    return !!this.t;\n  },\n\n  /**\n   * Short for \"take transition\", this is a method for building/working with\n   * state machines.\n   *\n   * If a state already exists for the given input, returns it.\n   *\n   * If a token is specified, that state will emit that token when reached by\n   * the linkify engine.\n   *\n   * If no state exists, it will be initialized with some default transitions\n   * that resemble existing default transitions.\n   *\n   * If a state is given for the second argument, that state will be\n   * transitioned to on the given input regardless of what that input\n   * previously did.\n   *\n   * @param {string} input character or token to transition on\n   * @param {Token|State} tokenOrState transition to a matching state\n   * @returns State taken after the given input\n   */\n  tt: function tt(input, tokenOrState) {\n    if (tokenOrState && tokenOrState.j) {\n      // State, default a basic transition\n      this.j[input] = tokenOrState;\n      return tokenOrState;\n    } // See if there's a direct state transition (not regex or default)\n\n\n    var token = tokenOrState;\n    var nextState = this.j[input];\n\n    if (nextState) {\n      if (token) {\n        nextState.t = token;\n      } // overrwites previous token\n\n\n      return nextState;\n    } // Create a new state for this input\n\n\n    nextState = makeState(); // Take the transition using the usual default mechanisms\n\n    var templateState = takeT(this, input);\n\n    if (templateState) {\n      // Some default state transition, make a prime state based on this one\n      Object.assign(nextState.j, templateState.j);\n      nextState.jr.append(templateState.jr);\n      nextState.jr = templateState.jd;\n      nextState.t = token || templateState.t;\n    } else {\n      nextState.t = token;\n    }\n\n    this.j[input] = nextState;\n    return nextState;\n  }\n};\n/**\n * Utility function to create state without using new keyword (reduced file size\n * when minified)\n */\n\nvar makeState = function makeState() {\n  return new State();\n};\n/**\n * Similar to previous except it is an accepting state that emits a token\n * @param {Token} token\n */\n\nvar makeAcceptingState = function makeAcceptingState(token) {\n  return new State(token);\n};\n/**\n * Create a transition from startState to nextState via the given character\n * @param {State} startState transition from thie starting state\n * @param {Token} input via this input character or other concrete token type\n * @param {State} nextState to this next state\n */\n\nvar makeT = function makeT(startState, input, nextState) {\n  // IMPLEMENTATION 1: Add to object (fast)\n  if (!startState.j[input]) {\n    startState.j[input] = nextState;\n  } // IMPLEMENTATION 2: Add to array (slower)\n  // startState.j.push([input, nextState]);\n\n};\n/**\n *\n * @param {State} startState stransition from this starting state\n * @param {RegExp} regex Regular expression to match on input\n * @param {State} nextState transition to this next state if there's are regex match\n */\n\nvar makeRegexT = function makeRegexT(startState, regex, nextState) {\n  startState.jr.push([regex, nextState]);\n};\n/**\n * Follow the transition from the given character to the next state\n * @param {State} state\n * @param {Token} input character or other concrete token type to transition\n * @returns {?State} the next state, if any\n */\n\nvar takeT = function takeT(state, input) {\n  // IMPLEMENTATION 1: Object key lookup (faster)\n  var nextState = state.j[input];\n\n  if (nextState) {\n    return nextState;\n  } // IMPLEMENTATION 2: List lookup (slower)\n  // Loop through all the state transitions and see if there's a match\n  // for (let i = 0; i < state.j.length; i++) {\n  //\tconst val = state.j[i][0];\n  //\tconst nextState = state.j[i][1];\n  // \tif (input === val) { return nextState; }\n  // }\n\n\n  for (var i = 0; i < state.jr.length; i++) {\n    var regex = state.jr[i][0];\n    var _nextState = state.jr[i][1];\n\n    if (regex.test(input)) {\n      return _nextState;\n    }\n  } // Nowhere left to jump! Return default, if any\n\n\n  return state.jd;\n};\n/**\n * Similar to makeT, but takes a list of characters that all transition to the\n * same nextState startState\n * @param {State} startState\n * @param {Array} chars\n * @param {State} nextState\n */\n\nvar makeMultiT = function makeMultiT(startState, chars, nextState) {\n  for (var i = 0; i < chars.length; i++) {\n    makeT(startState, chars[i], nextState);\n  }\n};\n/**\n * Set up a list of multiple transitions at once. transitions is a list of\n * tuples, where the first element is the transitions character and the second\n * is the state to transition to\n * @param {State} startState\n * @param {Array} transitions\n */\n\nvar makeBatchT = function makeBatchT(startState, transitions) {\n  for (var i = 0; i < transitions.length; i++) {\n    var input = transitions[i][0];\n    var nextState = transitions[i][1];\n    makeT(startState, input, nextState);\n  }\n};\n/**\n * For state machines that transition on characters only; given a non-empty\n * target string, generates states (if required) for each consecutive substring\n * of characters starting from the beginning of the string. The final state will\n * have a special value, as specified in options. All other \"in between\"\n * substrings will have a default end state.\n *\n * This turns the state machine into a Trie-like data structure (rather than a\n * intelligently-designed DFA).\n * @param {State} state\n * @param {string} str\n * @param {Token} endStateFactory\n * @param {Token} defaultStateFactory\n */\n\nvar makeChainT = function makeChainT(state, str, endState, defaultStateFactory) {\n  var i = 0,\n      len = str.length,\n      nextState; // Find the next state without a jump to the next character\n\n  while (i < len && (nextState = state.j[str[i]])) {\n    state = nextState;\n    i++;\n  }\n\n  if (i >= len) {\n    return [];\n  } // no new tokens were added\n\n\n  while (i < len - 1) {\n    nextState = defaultStateFactory();\n    makeT(state, str[i], nextState);\n    state = nextState;\n    i++;\n  }\n\n  makeT(state, str[len - 1], endState);\n};\n\n/******************************************************************************\n\tText Tokens\n\tTokens composed of strings\n******************************************************************************/\n// A valid web domain token\nvar DOMAIN = 'DOMAIN';\nvar LOCALHOST = 'LOCALHOST'; // special case of domain\n// Valid top-level domain (see tlds.js)\n\nvar TLD = 'TLD'; // Any sequence of digits 0-9\n\nvar NUM = 'NUM'; // A web URL protocol. Supported types include\n// - `http:`\n// - `https:`\n// - `ftp:`\n// - `ftps:`\n// - user-defined custom protocols\n\nvar PROTOCOL = 'PROTOCOL'; // Start of the email URI protocol\n\nvar MAILTO = 'MAILTO'; // mailto:\n// Any number of consecutive whitespace characters that are not newline\n\nvar WS = 'WS'; // New line (unix style)\n\nvar NL = 'NL'; // \\n\n// Opening/closing bracket classes\n\nvar OPENBRACE = 'OPENBRACE'; // {\n\nvar OPENBRACKET = 'OPENBRACKET'; // [\n\nvar OPENANGLEBRACKET = 'OPENANGLEBRACKET'; // <\n\nvar OPENPAREN = 'OPENPAREN'; // (\n\nvar CLOSEBRACE = 'CLOSEBRACE'; // }\n\nvar CLOSEBRACKET = 'CLOSEBRACKET'; // ]\n\nvar CLOSEANGLEBRACKET = 'CLOSEANGLEBRACKET'; // >\n\nvar CLOSEPAREN = 'CLOSEPAREN'; // )\n// Various symbols\n\nvar AMPERSAND = 'AMPERSAND'; // &\n\nvar APOSTROPHE = 'APOSTROPHE'; // '\n\nvar ASTERISK = 'ASTERISK'; // *\n\nvar AT = 'AT'; // @\n\nvar BACKSLASH = 'BACKSLASH'; // \\\n\nvar BACKTICK = 'BACKTICK'; // `\n\nvar CARET = 'CARET'; // ^\n\nvar COLON = 'COLON'; // :\n\nvar COMMA = 'COMMA'; // ,\n\nvar DOLLAR = 'DOLLAR'; // $\n\nvar DOT = 'DOT'; // .\n\nvar EQUALS = 'EQUALS'; // =\n\nvar EXCLAMATION = 'EXCLAMATION'; // !\n\nvar HYPHEN = 'HYPHEN'; // -\n\nvar PERCENT = 'PERCENT'; // %\n\nvar PIPE = 'PIPE'; // |\n\nvar PLUS = 'PLUS'; // +\n\nvar POUND = 'POUND'; // #\n\nvar QUERY = 'QUERY'; // ?\n\nvar QUOTE = 'QUOTE'; // \"\n\nvar SEMI = 'SEMI'; // ;\n\nvar SLASH = 'SLASH'; // /\n\nvar TILDE = 'TILDE'; // ~\n\nvar UNDERSCORE = 'UNDERSCORE'; // _\n// Default token - anything that is not one of the above\n\nvar SYM = 'SYM';\n\nvar text = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tDOMAIN: DOMAIN,\n\tLOCALHOST: LOCALHOST,\n\tTLD: TLD,\n\tNUM: NUM,\n\tPROTOCOL: PROTOCOL,\n\tMAILTO: MAILTO,\n\tWS: WS,\n\tNL: NL,\n\tOPENBRACE: OPENBRACE,\n\tOPENBRACKET: OPENBRACKET,\n\tOPENANGLEBRACKET: OPENANGLEBRACKET,\n\tOPENPAREN: OPENPAREN,\n\tCLOSEBRACE: CLOSEBRACE,\n\tCLOSEBRACKET: CLOSEBRACKET,\n\tCLOSEANGLEBRACKET: CLOSEANGLEBRACKET,\n\tCLOSEPAREN: CLOSEPAREN,\n\tAMPERSAND: AMPERSAND,\n\tAPOSTROPHE: APOSTROPHE,\n\tASTERISK: ASTERISK,\n\tAT: AT,\n\tBACKSLASH: BACKSLASH,\n\tBACKTICK: BACKTICK,\n\tCARET: CARET,\n\tCOLON: COLON,\n\tCOMMA: COMMA,\n\tDOLLAR: DOLLAR,\n\tDOT: DOT,\n\tEQUALS: EQUALS,\n\tEXCLAMATION: EXCLAMATION,\n\tHYPHEN: HYPHEN,\n\tPERCENT: PERCENT,\n\tPIPE: PIPE,\n\tPLUS: PLUS,\n\tPOUND: POUND,\n\tQUERY: QUERY,\n\tQUOTE: QUOTE,\n\tSEMI: SEMI,\n\tSLASH: SLASH,\n\tTILDE: TILDE,\n\tUNDERSCORE: UNDERSCORE,\n\tSYM: SYM\n});\n\n// NOTE: punycode versions of IDNs are not included here because these will not\n// be as commonly used without the http prefix anyway and linkify will already\n// force-encode those.\n// To be updated with the values in this list\n// http://data.iana.org/TLD/tlds-alpha-by-domain.txt\n// Version 2021022800, Last Updated Sun Feb 28 07:07:01 2021 UTC\nvar tlds = 'aaa \\\naarp \\\nabarth \\\nabb \\\nabbott \\\nabbvie \\\nabc \\\nable \\\nabogado \\\nabudhabi \\\nac \\\nacademy \\\naccenture \\\naccountant \\\naccountants \\\naco \\\nactor \\\nad \\\nadac \\\nads \\\nadult \\\nae \\\naeg \\\naero \\\naetna \\\naf \\\nafamilycompany \\\nafl \\\nafrica \\\nag \\\nagakhan \\\nagency \\\nai \\\naig \\\nairbus \\\nairforce \\\nairtel \\\nakdn \\\nal \\\nalfaromeo \\\nalibaba \\\nalipay \\\nallfinanz \\\nallstate \\\nally \\\nalsace \\\nalstom \\\nam \\\namazon \\\namericanexpress \\\namericanfamily \\\namex \\\namfam \\\namica \\\namsterdam \\\nanalytics \\\nandroid \\\nanquan \\\nanz \\\nao \\\naol \\\napartments \\\napp \\\napple \\\naq \\\naquarelle \\\nar \\\narab \\\naramco \\\narchi \\\narmy \\\narpa \\\nart \\\narte \\\nas \\\nasda \\\nasia \\\nassociates \\\nat \\\nathleta \\\nattorney \\\nau \\\nauction \\\naudi \\\naudible \\\naudio \\\nauspost \\\nauthor \\\nauto \\\nautos \\\navianca \\\naw \\\naws \\\nax \\\naxa \\\naz \\\nazure \\\nba \\\nbaby \\\nbaidu \\\nbanamex \\\nbananarepublic \\\nband \\\nbank \\\nbar \\\nbarcelona \\\nbarclaycard \\\nbarclays \\\nbarefoot \\\nbargains \\\nbaseball \\\nbasketball \\\nbauhaus \\\nbayern \\\nbb \\\nbbc \\\nbbt \\\nbbva \\\nbcg \\\nbcn \\\nbd \\\nbe \\\nbeats \\\nbeauty \\\nbeer \\\nbentley \\\nberlin \\\nbest \\\nbestbuy \\\nbet \\\nbf \\\nbg \\\nbh \\\nbharti \\\nbi \\\nbible \\\nbid \\\nbike \\\nbing \\\nbingo \\\nbio \\\nbiz \\\nbj \\\nblack \\\nblackfriday \\\nblockbuster \\\nblog \\\nbloomberg \\\nblue \\\nbm \\\nbms \\\nbmw \\\nbn \\\nbnpparibas \\\nbo \\\nboats \\\nboehringer \\\nbofa \\\nbom \\\nbond \\\nboo \\\nbook \\\nbooking \\\nbosch \\\nbostik \\\nboston \\\nbot \\\nboutique \\\nbox \\\nbr \\\nbradesco \\\nbridgestone \\\nbroadway \\\nbroker \\\nbrother \\\nbrussels \\\nbs \\\nbt \\\nbudapest \\\nbugatti \\\nbuild \\\nbuilders \\\nbusiness \\\nbuy \\\nbuzz \\\nbv \\\nbw \\\nby \\\nbz \\\nbzh \\\nca \\\ncab \\\ncafe \\\ncal \\\ncall \\\ncalvinklein \\\ncam \\\ncamera \\\ncamp \\\ncancerresearch \\\ncanon \\\ncapetown \\\ncapital \\\ncapitalone \\\ncar \\\ncaravan \\\ncards \\\ncare \\\ncareer \\\ncareers \\\ncars \\\ncasa \\\ncase \\\ncash \\\ncasino \\\ncat \\\ncatering \\\ncatholic \\\ncba \\\ncbn \\\ncbre \\\ncbs \\\ncc \\\ncd \\\ncenter \\\nceo \\\ncern \\\ncf \\\ncfa \\\ncfd \\\ncg \\\nch \\\nchanel \\\nchannel \\\ncharity \\\nchase \\\nchat \\\ncheap \\\nchintai \\\nchristmas \\\nchrome \\\nchurch \\\nci \\\ncipriani \\\ncircle \\\ncisco \\\ncitadel \\\nciti \\\ncitic \\\ncity \\\ncityeats \\\nck \\\ncl \\\nclaims \\\ncleaning \\\nclick \\\nclinic \\\nclinique \\\nclothing \\\ncloud \\\nclub \\\nclubmed \\\ncm \\\ncn \\\nco \\\ncoach \\\ncodes \\\ncoffee \\\ncollege \\\ncologne \\\ncom \\\ncomcast \\\ncommbank \\\ncommunity \\\ncompany \\\ncompare \\\ncomputer \\\ncomsec \\\ncondos \\\nconstruction \\\nconsulting \\\ncontact \\\ncontractors \\\ncooking \\\ncookingchannel \\\ncool \\\ncoop \\\ncorsica \\\ncountry \\\ncoupon \\\ncoupons \\\ncourses \\\ncpa \\\ncr \\\ncredit \\\ncreditcard \\\ncreditunion \\\ncricket \\\ncrown \\\ncrs \\\ncruise \\\ncruises \\\ncsc \\\ncu \\\ncuisinella \\\ncv \\\ncw \\\ncx \\\ncy \\\ncymru \\\ncyou \\\ncz \\\ndabur \\\ndad \\\ndance \\\ndata \\\ndate \\\ndating \\\ndatsun \\\nday \\\ndclk \\\ndds \\\nde \\\ndeal \\\ndealer \\\ndeals \\\ndegree \\\ndelivery \\\ndell \\\ndeloitte \\\ndelta \\\ndemocrat \\\ndental \\\ndentist \\\ndesi \\\ndesign \\\ndev \\\ndhl \\\ndiamonds \\\ndiet \\\ndigital \\\ndirect \\\ndirectory \\\ndiscount \\\ndiscover \\\ndish \\\ndiy \\\ndj \\\ndk \\\ndm \\\ndnp \\\ndo \\\ndocs \\\ndoctor \\\ndog \\\ndomains \\\ndot \\\ndownload \\\ndrive \\\ndtv \\\ndubai \\\nduck \\\ndunlop \\\ndupont \\\ndurban \\\ndvag \\\ndvr \\\ndz \\\nearth \\\neat \\\nec \\\neco \\\nedeka \\\nedu \\\neducation \\\nee \\\neg \\\nemail \\\nemerck \\\nenergy \\\nengineer \\\nengineering \\\nenterprises \\\nepson \\\nequipment \\\ner \\\nericsson \\\nerni \\\nes \\\nesq \\\nestate \\\net \\\netisalat \\\neu \\\neurovision \\\neus \\\nevents \\\nexchange \\\nexpert \\\nexposed \\\nexpress \\\nextraspace \\\nfage \\\nfail \\\nfairwinds \\\nfaith \\\nfamily \\\nfan \\\nfans \\\nfarm \\\nfarmers \\\nfashion \\\nfast \\\nfedex \\\nfeedback \\\nferrari \\\nferrero \\\nfi \\\nfiat \\\nfidelity \\\nfido \\\nfilm \\\nfinal \\\nfinance \\\nfinancial \\\nfire \\\nfirestone \\\nfirmdale \\\nfish \\\nfishing \\\nfit \\\nfitness \\\nfj \\\nfk \\\nflickr \\\nflights \\\nflir \\\nflorist \\\nflowers \\\nfly \\\nfm \\\nfo \\\nfoo \\\nfood \\\nfoodnetwork \\\nfootball \\\nford \\\nforex \\\nforsale \\\nforum \\\nfoundation \\\nfox \\\nfr \\\nfree \\\nfresenius \\\nfrl \\\nfrogans \\\nfrontdoor \\\nfrontier \\\nftr \\\nfujitsu \\\nfujixerox \\\nfun \\\nfund \\\nfurniture \\\nfutbol \\\nfyi \\\nga \\\ngal \\\ngallery \\\ngallo \\\ngallup \\\ngame \\\ngames \\\ngap \\\ngarden \\\ngay \\\ngb \\\ngbiz \\\ngd \\\ngdn \\\nge \\\ngea \\\ngent \\\ngenting \\\ngeorge \\\ngf \\\ngg \\\nggee \\\ngh \\\ngi \\\ngift \\\ngifts \\\ngives \\\ngiving \\\ngl \\\nglade \\\nglass \\\ngle \\\nglobal \\\nglobo \\\ngm \\\ngmail \\\ngmbh \\\ngmo \\\ngmx \\\ngn \\\ngodaddy \\\ngold \\\ngoldpoint \\\ngolf \\\ngoo \\\ngoodyear \\\ngoog \\\ngoogle \\\ngop \\\ngot \\\ngov \\\ngp \\\ngq \\\ngr \\\ngrainger \\\ngraphics \\\ngratis \\\ngreen \\\ngripe \\\ngrocery \\\ngroup \\\ngs \\\ngt \\\ngu \\\nguardian \\\ngucci \\\nguge \\\nguide \\\nguitars \\\nguru \\\ngw \\\ngy \\\nhair \\\nhamburg \\\nhangout \\\nhaus \\\nhbo \\\nhdfc \\\nhdfcbank \\\nhealth \\\nhealthcare \\\nhelp \\\nhelsinki \\\nhere \\\nhermes \\\nhgtv \\\nhiphop \\\nhisamitsu \\\nhitachi \\\nhiv \\\nhk \\\nhkt \\\nhm \\\nhn \\\nhockey \\\nholdings \\\nholiday \\\nhomedepot \\\nhomegoods \\\nhomes \\\nhomesense \\\nhonda \\\nhorse \\\nhospital \\\nhost \\\nhosting \\\nhot \\\nhoteles \\\nhotels \\\nhotmail \\\nhouse \\\nhow \\\nhr \\\nhsbc \\\nht \\\nhu \\\nhughes \\\nhyatt \\\nhyundai \\\nibm \\\nicbc \\\nice \\\nicu \\\nid \\\nie \\\nieee \\\nifm \\\nikano \\\nil \\\nim \\\nimamat \\\nimdb \\\nimmo \\\nimmobilien \\\nin \\\ninc \\\nindustries \\\ninfiniti \\\ninfo \\\ning \\\nink \\\ninstitute \\\ninsurance \\\ninsure \\\nint \\\ninternational \\\nintuit \\\ninvestments \\\nio \\\nipiranga \\\niq \\\nir \\\nirish \\\nis \\\nismaili \\\nist \\\nistanbul \\\nit \\\nitau \\\nitv \\\niveco \\\njaguar \\\njava \\\njcb \\\nje \\\njeep \\\njetzt \\\njewelry \\\njio \\\njll \\\njm \\\njmp \\\njnj \\\njo \\\njobs \\\njoburg \\\njot \\\njoy \\\njp \\\njpmorgan \\\njprs \\\njuegos \\\njuniper \\\nkaufen \\\nkddi \\\nke \\\nkerryhotels \\\nkerrylogistics \\\nkerryproperties \\\nkfh \\\nkg \\\nkh \\\nki \\\nkia \\\nkim \\\nkinder \\\nkindle \\\nkitchen \\\nkiwi \\\nkm \\\nkn \\\nkoeln \\\nkomatsu \\\nkosher \\\nkp \\\nkpmg \\\nkpn \\\nkr \\\nkrd \\\nkred \\\nkuokgroup \\\nkw \\\nky \\\nkyoto \\\nkz \\\nla \\\nlacaixa \\\nlamborghini \\\nlamer \\\nlancaster \\\nlancia \\\nland \\\nlandrover \\\nlanxess \\\nlasalle \\\nlat \\\nlatino \\\nlatrobe \\\nlaw \\\nlawyer \\\nlb \\\nlc \\\nlds \\\nlease \\\nleclerc \\\nlefrak \\\nlegal \\\nlego \\\nlexus \\\nlgbt \\\nli \\\nlidl \\\nlife \\\nlifeinsurance \\\nlifestyle \\\nlighting \\\nlike \\\nlilly \\\nlimited \\\nlimo \\\nlincoln \\\nlinde \\\nlink \\\nlipsy \\\nlive \\\nliving \\\nlixil \\\nlk \\\nllc \\\nllp \\\nloan \\\nloans \\\nlocker \\\nlocus \\\nloft \\\nlol \\\nlondon \\\nlotte \\\nlotto \\\nlove \\\nlpl \\\nlplfinancial \\\nlr \\\nls \\\nlt \\\nltd \\\nltda \\\nlu \\\nlundbeck \\\nluxe \\\nluxury \\\nlv \\\nly \\\nma \\\nmacys \\\nmadrid \\\nmaif \\\nmaison \\\nmakeup \\\nman \\\nmanagement \\\nmango \\\nmap \\\nmarket \\\nmarketing \\\nmarkets \\\nmarriott \\\nmarshalls \\\nmaserati \\\nmattel \\\nmba \\\nmc \\\nmckinsey \\\nmd \\\nme \\\nmed \\\nmedia \\\nmeet \\\nmelbourne \\\nmeme \\\nmemorial \\\nmen \\\nmenu \\\nmerckmsd \\\nmg \\\nmh \\\nmiami \\\nmicrosoft \\\nmil \\\nmini \\\nmint \\\nmit \\\nmitsubishi \\\nmk \\\nml \\\nmlb \\\nmls \\\nmm \\\nmma \\\nmn \\\nmo \\\nmobi \\\nmobile \\\nmoda \\\nmoe \\\nmoi \\\nmom \\\nmonash \\\nmoney \\\nmonster \\\nmormon \\\nmortgage \\\nmoscow \\\nmoto \\\nmotorcycles \\\nmov \\\nmovie \\\nmp \\\nmq \\\nmr \\\nms \\\nmsd \\\nmt \\\nmtn \\\nmtr \\\nmu \\\nmuseum \\\nmutual \\\nmv \\\nmw \\\nmx \\\nmy \\\nmz \\\nna \\\nnab \\\nnagoya \\\nname \\\nnationwide \\\nnatura \\\nnavy \\\nnba \\\nnc \\\nne \\\nnec \\\nnet \\\nnetbank \\\nnetflix \\\nnetwork \\\nneustar \\\nnew \\\nnews \\\nnext \\\nnextdirect \\\nnexus \\\nnf \\\nnfl \\\nng \\\nngo \\\nnhk \\\nni \\\nnico \\\nnike \\\nnikon \\\nninja \\\nnissan \\\nnissay \\\nnl \\\nno \\\nnokia \\\nnorthwesternmutual \\\nnorton \\\nnow \\\nnowruz \\\nnowtv \\\nnp \\\nnr \\\nnra \\\nnrw \\\nntt \\\nnu \\\nnyc \\\nnz \\\nobi \\\nobserver \\\noff \\\noffice \\\nokinawa \\\nolayan \\\nolayangroup \\\noldnavy \\\nollo \\\nom \\\nomega \\\none \\\nong \\\nonl \\\nonline \\\nonyourside \\\nooo \\\nopen \\\noracle \\\norange \\\norg \\\norganic \\\norigins \\\nosaka \\\notsuka \\\nott \\\novh \\\npa \\\npage \\\npanasonic \\\nparis \\\npars \\\npartners \\\nparts \\\nparty \\\npassagens \\\npay \\\npccw \\\npe \\\npet \\\npf \\\npfizer \\\npg \\\nph \\\npharmacy \\\nphd \\\nphilips \\\nphone \\\nphoto \\\nphotography \\\nphotos \\\nphysio \\\npics \\\npictet \\\npictures \\\npid \\\npin \\\nping \\\npink \\\npioneer \\\npizza \\\npk \\\npl \\\nplace \\\nplay \\\nplaystation \\\nplumbing \\\nplus \\\npm \\\npn \\\npnc \\\npohl \\\npoker \\\npolitie \\\nporn \\\npost \\\npr \\\npramerica \\\npraxi \\\npress \\\nprime \\\npro \\\nprod \\\nproductions \\\nprof \\\nprogressive \\\npromo \\\nproperties \\\nproperty \\\nprotection \\\npru \\\nprudential \\\nps \\\npt \\\npub \\\npw \\\npwc \\\npy \\\nqa \\\nqpon \\\nquebec \\\nquest \\\nqvc \\\nracing \\\nradio \\\nraid \\\nre \\\nread \\\nrealestate \\\nrealtor \\\nrealty \\\nrecipes \\\nred \\\nredstone \\\nredumbrella \\\nrehab \\\nreise \\\nreisen \\\nreit \\\nreliance \\\nren \\\nrent \\\nrentals \\\nrepair \\\nreport \\\nrepublican \\\nrest \\\nrestaurant \\\nreview \\\nreviews \\\nrexroth \\\nrich \\\nrichardli \\\nricoh \\\nril \\\nrio \\\nrip \\\nrmit \\\nro \\\nrocher \\\nrocks \\\nrodeo \\\nrogers \\\nroom \\\nrs \\\nrsvp \\\nru \\\nrugby \\\nruhr \\\nrun \\\nrw \\\nrwe \\\nryukyu \\\nsa \\\nsaarland \\\nsafe \\\nsafety \\\nsakura \\\nsale \\\nsalon \\\nsamsclub \\\nsamsung \\\nsandvik \\\nsandvikcoromant \\\nsanofi \\\nsap \\\nsarl \\\nsas \\\nsave \\\nsaxo \\\nsb \\\nsbi \\\nsbs \\\nsc \\\nsca \\\nscb \\\nschaeffler \\\nschmidt \\\nscholarships \\\nschool \\\nschule \\\nschwarz \\\nscience \\\nscjohnson \\\nscot \\\nsd \\\nse \\\nsearch \\\nseat \\\nsecure \\\nsecurity \\\nseek \\\nselect \\\nsener \\\nservices \\\nses \\\nseven \\\nsew \\\nsex \\\nsexy \\\nsfr \\\nsg \\\nsh \\\nshangrila \\\nsharp \\\nshaw \\\nshell \\\nshia \\\nshiksha \\\nshoes \\\nshop \\\nshopping \\\nshouji \\\nshow \\\nshowtime \\\nsi \\\nsilk \\\nsina \\\nsingles \\\nsite \\\nsj \\\nsk \\\nski \\\nskin \\\nsky \\\nskype \\\nsl \\\nsling \\\nsm \\\nsmart \\\nsmile \\\nsn \\\nsncf \\\nso \\\nsoccer \\\nsocial \\\nsoftbank \\\nsoftware \\\nsohu \\\nsolar \\\nsolutions \\\nsong \\\nsony \\\nsoy \\\nspa \\\nspace \\\nsport \\\nspot \\\nspreadbetting \\\nsr \\\nsrl \\\nss \\\nst \\\nstada \\\nstaples \\\nstar \\\nstatebank \\\nstatefarm \\\nstc \\\nstcgroup \\\nstockholm \\\nstorage \\\nstore \\\nstream \\\nstudio \\\nstudy \\\nstyle \\\nsu \\\nsucks \\\nsupplies \\\nsupply \\\nsupport \\\nsurf \\\nsurgery \\\nsuzuki \\\nsv \\\nswatch \\\nswiftcover \\\nswiss \\\nsx \\\nsy \\\nsydney \\\nsystems \\\nsz \\\ntab \\\ntaipei \\\ntalk \\\ntaobao \\\ntarget \\\ntatamotors \\\ntatar \\\ntattoo \\\ntax \\\ntaxi \\\ntc \\\ntci \\\ntd \\\ntdk \\\nteam \\\ntech \\\ntechnology \\\ntel \\\ntemasek \\\ntennis \\\nteva \\\ntf \\\ntg \\\nth \\\nthd \\\ntheater \\\ntheatre \\\ntiaa \\\ntickets \\\ntienda \\\ntiffany \\\ntips \\\ntires \\\ntirol \\\ntj \\\ntjmaxx \\\ntjx \\\ntk \\\ntkmaxx \\\ntl \\\ntm \\\ntmall \\\ntn \\\nto \\\ntoday \\\ntokyo \\\ntools \\\ntop \\\ntoray \\\ntoshiba \\\ntotal \\\ntours \\\ntown \\\ntoyota \\\ntoys \\\ntr \\\ntrade \\\ntrading \\\ntraining \\\ntravel \\\ntravelchannel \\\ntravelers \\\ntravelersinsurance \\\ntrust \\\ntrv \\\ntt \\\ntube \\\ntui \\\ntunes \\\ntushu \\\ntv \\\ntvs \\\ntw \\\ntz \\\nua \\\nubank \\\nubs \\\nug \\\nuk \\\nunicom \\\nuniversity \\\nuno \\\nuol \\\nups \\\nus \\\nuy \\\nuz \\\nva \\\nvacations \\\nvana \\\nvanguard \\\nvc \\\nve \\\nvegas \\\nventures \\\nverisign \\\nversicherung \\\nvet \\\nvg \\\nvi \\\nviajes \\\nvideo \\\nvig \\\nviking \\\nvillas \\\nvin \\\nvip \\\nvirgin \\\nvisa \\\nvision \\\nviva \\\nvivo \\\nvlaanderen \\\nvn \\\nvodka \\\nvolkswagen \\\nvolvo \\\nvote \\\nvoting \\\nvoto \\\nvoyage \\\nvu \\\nvuelos \\\nwales \\\nwalmart \\\nwalter \\\nwang \\\nwanggou \\\nwatch \\\nwatches \\\nweather \\\nweatherchannel \\\nwebcam \\\nweber \\\nwebsite \\\nwed \\\nwedding \\\nweibo \\\nweir \\\nwf \\\nwhoswho \\\nwien \\\nwiki \\\nwilliamhill \\\nwin \\\nwindows \\\nwine \\\nwinners \\\nwme \\\nwolterskluwer \\\nwoodside \\\nwork \\\nworks \\\nworld \\\nwow \\\nws \\\nwtc \\\nwtf \\\nxbox \\\nxerox \\\nxfinity \\\nxihuan \\\nxin \\\nxxx \\\nxyz \\\nyachts \\\nyahoo \\\nyamaxun \\\nyandex \\\nye \\\nyodobashi \\\nyoga \\\nyokohama \\\nyou \\\nyoutube \\\nyt \\\nyun \\\nza \\\nzappos \\\nzara \\\nzero \\\nzip \\\nzm \\\nzone \\\nzuerich \\\nzw \\\nvermgensberater-ctb \\\nvermgensberatung-pwb \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n \\\n'.split(' ');\n\n/**\n\tThe scanner provides an interface that takes a string of text as input, and\n\toutputs an array of tokens instances that can be used for easy URL parsing.\n\n\t@module linkify\n\t@submodule scanner\n\t@main scanner\n*/\n\nvar LETTER = /(?:[A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0560-\\u0588\\u05D0-\\u05EA\\u05EF-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u0860-\\u086A\\u0870-\\u0887\\u0889-\\u088E\\u08A0-\\u08C9\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u09FC\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C5D\\u0C60\\u0C61\\u0C80\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D04-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D54-\\u0D56\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E86-\\u0E8A\\u0E8C-\\u0EA3\\u0EA5\\u0EA7-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16F1-\\u16F8\\u1700-\\u1711\\u171F-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1878\\u1880-\\u1884\\u1887-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4C\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1C80-\\u1C88\\u1C90-\\u1CBA\\u1CBD-\\u1CBF\\u1CE9-\\u1CEC\\u1CEE-\\u1CF3\\u1CF5\\u1CF6\\u1CFA\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312F\\u3131-\\u318E\\u31A0-\\u31BF\\u31F0-\\u31FF\\u3400-\\u4DBF\\u4E00-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7CA\\uA7D0\\uA7D1\\uA7D3\\uA7D5-\\uA7D9\\uA7F2-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA8FE\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB69\\uAB70-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]|\\uD800[\\uDC00-\\uDC0B\\uDC0D-\\uDC26\\uDC28-\\uDC3A\\uDC3C\\uDC3D\\uDC3F-\\uDC4D\\uDC50-\\uDC5D\\uDC80-\\uDCFA\\uDE80-\\uDE9C\\uDEA0-\\uDED0\\uDF00-\\uDF1F\\uDF2D-\\uDF40\\uDF42-\\uDF49\\uDF50-\\uDF75\\uDF80-\\uDF9D\\uDFA0-\\uDFC3\\uDFC8-\\uDFCF]|\\uD801[\\uDC00-\\uDC9D\\uDCB0-\\uDCD3\\uDCD8-\\uDCFB\\uDD00-\\uDD27\\uDD30-\\uDD63\\uDD70-\\uDD7A\\uDD7C-\\uDD8A\\uDD8C-\\uDD92\\uDD94\\uDD95\\uDD97-\\uDDA1\\uDDA3-\\uDDB1\\uDDB3-\\uDDB9\\uDDBB\\uDDBC\\uDE00-\\uDF36\\uDF40-\\uDF55\\uDF60-\\uDF67\\uDF80-\\uDF85\\uDF87-\\uDFB0\\uDFB2-\\uDFBA]|\\uD802[\\uDC00-\\uDC05\\uDC08\\uDC0A-\\uDC35\\uDC37\\uDC38\\uDC3C\\uDC3F-\\uDC55\\uDC60-\\uDC76\\uDC80-\\uDC9E\\uDCE0-\\uDCF2\\uDCF4\\uDCF5\\uDD00-\\uDD15\\uDD20-\\uDD39\\uDD80-\\uDDB7\\uDDBE\\uDDBF\\uDE00\\uDE10-\\uDE13\\uDE15-\\uDE17\\uDE19-\\uDE35\\uDE60-\\uDE7C\\uDE80-\\uDE9C\\uDEC0-\\uDEC7\\uDEC9-\\uDEE4\\uDF00-\\uDF35\\uDF40-\\uDF55\\uDF60-\\uDF72\\uDF80-\\uDF91]|\\uD803[\\uDC00-\\uDC48\\uDC80-\\uDCB2\\uDCC0-\\uDCF2\\uDD00-\\uDD23\\uDE80-\\uDEA9\\uDEB0\\uDEB1\\uDF00-\\uDF1C\\uDF27\\uDF30-\\uDF45\\uDF70-\\uDF81\\uDFB0-\\uDFC4\\uDFE0-\\uDFF6]|\\uD804[\\uDC03-\\uDC37\\uDC71\\uDC72\\uDC75\\uDC83-\\uDCAF\\uDCD0-\\uDCE8\\uDD03-\\uDD26\\uDD44\\uDD47\\uDD50-\\uDD72\\uDD76\\uDD83-\\uDDB2\\uDDC1-\\uDDC4\\uDDDA\\uDDDC\\uDE00-\\uDE11\\uDE13-\\uDE2B\\uDE80-\\uDE86\\uDE88\\uDE8A-\\uDE8D\\uDE8F-\\uDE9D\\uDE9F-\\uDEA8\\uDEB0-\\uDEDE\\uDF05-\\uDF0C\\uDF0F\\uDF10\\uDF13-\\uDF28\\uDF2A-\\uDF30\\uDF32\\uDF33\\uDF35-\\uDF39\\uDF3D\\uDF50\\uDF5D-\\uDF61]|\\uD805[\\uDC00-\\uDC34\\uDC47-\\uDC4A\\uDC5F-\\uDC61\\uDC80-\\uDCAF\\uDCC4\\uDCC5\\uDCC7\\uDD80-\\uDDAE\\uDDD8-\\uDDDB\\uDE00-\\uDE2F\\uDE44\\uDE80-\\uDEAA\\uDEB8\\uDF00-\\uDF1A\\uDF40-\\uDF46]|\\uD806[\\uDC00-\\uDC2B\\uDCA0-\\uDCDF\\uDCFF-\\uDD06\\uDD09\\uDD0C-\\uDD13\\uDD15\\uDD16\\uDD18-\\uDD2F\\uDD3F\\uDD41\\uDDA0-\\uDDA7\\uDDAA-\\uDDD0\\uDDE1\\uDDE3\\uDE00\\uDE0B-\\uDE32\\uDE3A\\uDE50\\uDE5C-\\uDE89\\uDE9D\\uDEB0-\\uDEF8]|\\uD807[\\uDC00-\\uDC08\\uDC0A-\\uDC2E\\uDC40\\uDC72-\\uDC8F\\uDD00-\\uDD06\\uDD08\\uDD09\\uDD0B-\\uDD30\\uDD46\\uDD60-\\uDD65\\uDD67\\uDD68\\uDD6A-\\uDD89\\uDD98\\uDEE0-\\uDEF2\\uDFB0]|\\uD808[\\uDC00-\\uDF99]|\\uD809[\\uDC80-\\uDD43]|\\uD80B[\\uDF90-\\uDFF0]|[\\uD80C\\uD81C-\\uD820\\uD822\\uD840-\\uD868\\uD86A-\\uD86C\\uD86F-\\uD872\\uD874-\\uD879\\uD880-\\uD883][\\uDC00-\\uDFFF]|\\uD80D[\\uDC00-\\uDC2E]|\\uD811[\\uDC00-\\uDE46]|\\uD81A[\\uDC00-\\uDE38\\uDE40-\\uDE5E\\uDE70-\\uDEBE\\uDED0-\\uDEED\\uDF00-\\uDF2F\\uDF40-\\uDF43\\uDF63-\\uDF77\\uDF7D-\\uDF8F]|\\uD81B[\\uDE40-\\uDE7F\\uDF00-\\uDF4A\\uDF50\\uDF93-\\uDF9F\\uDFE0\\uDFE1\\uDFE3]|\\uD821[\\uDC00-\\uDFF7]|\\uD823[\\uDC00-\\uDCD5\\uDD00-\\uDD08]|\\uD82B[\\uDFF0-\\uDFF3\\uDFF5-\\uDFFB\\uDFFD\\uDFFE]|\\uD82C[\\uDC00-\\uDD22\\uDD50-\\uDD52\\uDD64-\\uDD67\\uDD70-\\uDEFB]|\\uD82F[\\uDC00-\\uDC6A\\uDC70-\\uDC7C\\uDC80-\\uDC88\\uDC90-\\uDC99]|\\uD835[\\uDC00-\\uDC54\\uDC56-\\uDC9C\\uDC9E\\uDC9F\\uDCA2\\uDCA5\\uDCA6\\uDCA9-\\uDCAC\\uDCAE-\\uDCB9\\uDCBB\\uDCBD-\\uDCC3\\uDCC5-\\uDD05\\uDD07-\\uDD0A\\uDD0D-\\uDD14\\uDD16-\\uDD1C\\uDD1E-\\uDD39\\uDD3B-\\uDD3E\\uDD40-\\uDD44\\uDD46\\uDD4A-\\uDD50\\uDD52-\\uDEA5\\uDEA8-\\uDEC0\\uDEC2-\\uDEDA\\uDEDC-\\uDEFA\\uDEFC-\\uDF14\\uDF16-\\uDF34\\uDF36-\\uDF4E\\uDF50-\\uDF6E\\uDF70-\\uDF88\\uDF8A-\\uDFA8\\uDFAA-\\uDFC2\\uDFC4-\\uDFCB]|\\uD837[\\uDF00-\\uDF1E]|\\uD838[\\uDD00-\\uDD2C\\uDD37-\\uDD3D\\uDD4E\\uDE90-\\uDEAD\\uDEC0-\\uDEEB]|\\uD839[\\uDFE0-\\uDFE6\\uDFE8-\\uDFEB\\uDFED\\uDFEE\\uDFF0-\\uDFFE]|\\uD83A[\\uDC00-\\uDCC4\\uDD00-\\uDD43\\uDD4B]|\\uD83B[\\uDE00-\\uDE03\\uDE05-\\uDE1F\\uDE21\\uDE22\\uDE24\\uDE27\\uDE29-\\uDE32\\uDE34-\\uDE37\\uDE39\\uDE3B\\uDE42\\uDE47\\uDE49\\uDE4B\\uDE4D-\\uDE4F\\uDE51\\uDE52\\uDE54\\uDE57\\uDE59\\uDE5B\\uDE5D\\uDE5F\\uDE61\\uDE62\\uDE64\\uDE67-\\uDE6A\\uDE6C-\\uDE72\\uDE74-\\uDE77\\uDE79-\\uDE7C\\uDE7E\\uDE80-\\uDE89\\uDE8B-\\uDE9B\\uDEA1-\\uDEA3\\uDEA5-\\uDEA9\\uDEAB-\\uDEBB]|\\uD869[\\uDC00-\\uDEDF\\uDF00-\\uDFFF]|\\uD86D[\\uDC00-\\uDF38\\uDF40-\\uDFFF]|\\uD86E[\\uDC00-\\uDC1D\\uDC20-\\uDFFF]|\\uD873[\\uDC00-\\uDEA1\\uDEB0-\\uDFFF]|\\uD87A[\\uDC00-\\uDFE0]|\\uD87E[\\uDC00-\\uDE1D]|\\uD884[\\uDC00-\\uDF4A])/; // Any Unicode character with letter data type\n\nvar EMOJI = /(?:[#\\*0-9\\xA9\\xAE\\u203C\\u2049\\u2122\\u2139\\u2194-\\u2199\\u21A9\\u21AA\\u231A\\u231B\\u2328\\u23CF\\u23E9-\\u23F3\\u23F8-\\u23FA\\u24C2\\u25AA\\u25AB\\u25B6\\u25C0\\u25FB-\\u25FE\\u2600-\\u2604\\u260E\\u2611\\u2614\\u2615\\u2618\\u261D\\u2620\\u2622\\u2623\\u2626\\u262A\\u262E\\u262F\\u2638-\\u263A\\u2640\\u2642\\u2648-\\u2653\\u265F\\u2660\\u2663\\u2665\\u2666\\u2668\\u267B\\u267E\\u267F\\u2692-\\u2697\\u2699\\u269B\\u269C\\u26A0\\u26A1\\u26A7\\u26AA\\u26AB\\u26B0\\u26B1\\u26BD\\u26BE\\u26C4\\u26C5\\u26C8\\u26CE\\u26CF\\u26D1\\u26D3\\u26D4\\u26E9\\u26EA\\u26F0-\\u26F5\\u26F7-\\u26FA\\u26FD\\u2702\\u2705\\u2708-\\u270D\\u270F\\u2712\\u2714\\u2716\\u271D\\u2721\\u2728\\u2733\\u2734\\u2744\\u2747\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2763\\u2764\\u2795-\\u2797\\u27A1\\u27B0\\u27BF\\u2934\\u2935\\u2B05-\\u2B07\\u2B1B\\u2B1C\\u2B50\\u2B55\\u3030\\u303D\\u3297\\u3299]|\\uD83C[\\uDC04\\uDCCF\\uDD70\\uDD71\\uDD7E\\uDD7F\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE02\\uDE1A\\uDE2F\\uDE32-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF21\\uDF24-\\uDF93\\uDF96\\uDF97\\uDF99-\\uDF9B\\uDF9E-\\uDFF0\\uDFF3-\\uDFF5\\uDFF7-\\uDFFF]|\\uD83D[\\uDC00-\\uDCFD\\uDCFF-\\uDD3D\\uDD49-\\uDD4E\\uDD50-\\uDD67\\uDD6F\\uDD70\\uDD73-\\uDD7A\\uDD87\\uDD8A-\\uDD8D\\uDD90\\uDD95\\uDD96\\uDDA4\\uDDA5\\uDDA8\\uDDB1\\uDDB2\\uDDBC\\uDDC2-\\uDDC4\\uDDD1-\\uDDD3\\uDDDC-\\uDDDE\\uDDE1\\uDDE3\\uDDE8\\uDDEF\\uDDF3\\uDDFA-\\uDE4F\\uDE80-\\uDEC5\\uDECB-\\uDED2\\uDED5-\\uDED7\\uDEDD-\\uDEE5\\uDEE9\\uDEEB\\uDEEC\\uDEF0\\uDEF3-\\uDEFC\\uDFE0-\\uDFEB\\uDFF0]|\\uD83E[\\uDD0C-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDDFF\\uDE70-\\uDE74\\uDE78-\\uDE7C\\uDE80-\\uDE86\\uDE90-\\uDEAC\\uDEB0-\\uDEBA\\uDEC0-\\uDEC5\\uDED0-\\uDED9\\uDEE0-\\uDEE7\\uDEF0-\\uDEF6])/; // Any Unicode emoji character\n\nvar EMOJI_VARIATION = /\\uFE0F/; // Variation selector, follows heart and others\n\nvar DIGIT = /\\d/;\nvar SPACE = /\\s/;\n/**\n * Initialize the scanner character-based state machine for the given start state\n * @return {State} scanner starting state\n */\n\nfunction init$2() {\n  var customProtocols = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  // Frequently used states\n  var S_START = makeState();\n  var S_NUM = makeAcceptingState(NUM);\n  var S_DOMAIN = makeAcceptingState(DOMAIN);\n  var S_DOMAIN_HYPHEN = makeState(); // domain followed by 1 or more hyphen characters\n\n  var S_WS = makeAcceptingState(WS);\n  var DOMAIN_REGEX_TRANSITIONS = [[DIGIT, S_DOMAIN], [LETTER, S_DOMAIN], [EMOJI, S_DOMAIN], [EMOJI_VARIATION, S_DOMAIN]]; // Create a state which emits a domain token\n\n  var makeDomainState = function makeDomainState() {\n    var state = makeAcceptingState(DOMAIN);\n    state.j = {\n      '-': S_DOMAIN_HYPHEN\n    };\n    state.jr = [].concat(DOMAIN_REGEX_TRANSITIONS);\n    return state;\n  }; // Create a state which does not emit a domain state but the usual alphanumeric\n  // transitions are domains\n\n\n  var makeNearDomainState = function makeNearDomainState(token) {\n    var state = makeDomainState();\n    state.t = token;\n    return state;\n  }; // States for special URL symbols that accept immediately after start\n\n\n  makeBatchT(S_START, [[\"'\", makeAcceptingState(APOSTROPHE)], ['{', makeAcceptingState(OPENBRACE)], ['[', makeAcceptingState(OPENBRACKET)], ['<', makeAcceptingState(OPENANGLEBRACKET)], ['(', makeAcceptingState(OPENPAREN)], ['}', makeAcceptingState(CLOSEBRACE)], [']', makeAcceptingState(CLOSEBRACKET)], ['>', makeAcceptingState(CLOSEANGLEBRACKET)], [')', makeAcceptingState(CLOSEPAREN)], ['&', makeAcceptingState(AMPERSAND)], ['*', makeAcceptingState(ASTERISK)], ['@', makeAcceptingState(AT)], ['`', makeAcceptingState(BACKTICK)], ['^', makeAcceptingState(CARET)], [':', makeAcceptingState(COLON)], [',', makeAcceptingState(COMMA)], ['$', makeAcceptingState(DOLLAR)], ['.', makeAcceptingState(DOT)], ['=', makeAcceptingState(EQUALS)], ['!', makeAcceptingState(EXCLAMATION)], ['-', makeAcceptingState(HYPHEN)], ['%', makeAcceptingState(PERCENT)], ['|', makeAcceptingState(PIPE)], ['+', makeAcceptingState(PLUS)], ['#', makeAcceptingState(POUND)], ['?', makeAcceptingState(QUERY)], ['\"', makeAcceptingState(QUOTE)], ['/', makeAcceptingState(SLASH)], [';', makeAcceptingState(SEMI)], ['~', makeAcceptingState(TILDE)], ['_', makeAcceptingState(UNDERSCORE)], ['\\\\', makeAcceptingState(BACKSLASH)]]); // Whitespace jumps\n  // Tokens of only non-newline whitespace are arbitrarily long\n\n  makeT(S_START, '\\n', makeAcceptingState(NL));\n  makeRegexT(S_START, SPACE, S_WS); // If any whitespace except newline, more whitespace!\n\n  makeT(S_WS, '\\n', makeState()); // non-accepting state\n\n  makeRegexT(S_WS, SPACE, S_WS); // Generates states for top-level domains\n  // Note that this is most accurate when tlds are in alphabetical order\n\n  for (var i = 0; i < tlds.length; i++) {\n    makeChainT(S_START, tlds[i], makeNearDomainState(TLD), makeDomainState);\n  } // Collect the states generated by different protocls\n\n\n  var S_PROTOCOL_FILE = makeDomainState();\n  var S_PROTOCOL_FTP = makeDomainState();\n  var S_PROTOCOL_HTTP = makeDomainState();\n  var S_MAILTO = makeDomainState();\n  makeChainT(S_START, 'file', S_PROTOCOL_FILE, makeDomainState);\n  makeChainT(S_START, 'ftp', S_PROTOCOL_FTP, makeDomainState);\n  makeChainT(S_START, 'http', S_PROTOCOL_HTTP, makeDomainState);\n  makeChainT(S_START, 'mailto', S_MAILTO, makeDomainState); // Protocol states\n\n  var S_PROTOCOL_SECURE = makeDomainState();\n  var S_FULL_PROTOCOL = makeAcceptingState(PROTOCOL); // Full protocol ends with COLON\n\n  var S_FULL_MAILTO = makeAcceptingState(MAILTO); // Mailto ends with COLON\n  // Secure protocols (end with 's')\n\n  makeT(S_PROTOCOL_FTP, 's', S_PROTOCOL_SECURE);\n  makeT(S_PROTOCOL_FTP, ':', S_FULL_PROTOCOL);\n  makeT(S_PROTOCOL_HTTP, 's', S_PROTOCOL_SECURE);\n  makeT(S_PROTOCOL_HTTP, ':', S_FULL_PROTOCOL); // Become protocol tokens after a COLON\n\n  makeT(S_PROTOCOL_FILE, ':', S_FULL_PROTOCOL);\n  makeT(S_PROTOCOL_SECURE, ':', S_FULL_PROTOCOL);\n  makeT(S_MAILTO, ':', S_FULL_MAILTO); // Register custom protocols\n\n  var S_CUSTOM_PROTOCOL = makeDomainState();\n\n  for (var _i = 0; _i < customProtocols.length; _i++) {\n    makeChainT(S_START, customProtocols[_i], S_CUSTOM_PROTOCOL, makeDomainState);\n  }\n\n  makeT(S_CUSTOM_PROTOCOL, ':', S_FULL_PROTOCOL); // Localhost\n\n  makeChainT(S_START, 'localhost', makeNearDomainState(LOCALHOST), makeDomainState); // Everything else\n  // DOMAINs make more DOMAINs\n  // Number and character transitions\n\n  makeRegexT(S_START, DIGIT, S_NUM);\n  makeRegexT(S_START, LETTER, S_DOMAIN);\n  makeRegexT(S_START, EMOJI, S_DOMAIN);\n  makeRegexT(S_START, EMOJI_VARIATION, S_DOMAIN);\n  makeRegexT(S_NUM, DIGIT, S_NUM);\n  makeRegexT(S_NUM, LETTER, S_DOMAIN); // number becomes DOMAIN\n\n  makeRegexT(S_NUM, EMOJI, S_DOMAIN); // number becomes DOMAIN\n\n  makeRegexT(S_NUM, EMOJI_VARIATION, S_DOMAIN); // number becomes DOMAIN\n\n  makeT(S_NUM, '-', S_DOMAIN_HYPHEN); // Default domain transitions\n\n  makeT(S_DOMAIN, '-', S_DOMAIN_HYPHEN);\n  makeT(S_DOMAIN_HYPHEN, '-', S_DOMAIN_HYPHEN);\n  makeRegexT(S_DOMAIN, DIGIT, S_DOMAIN);\n  makeRegexT(S_DOMAIN, LETTER, S_DOMAIN);\n  makeRegexT(S_DOMAIN, EMOJI, S_DOMAIN);\n  makeRegexT(S_DOMAIN, EMOJI_VARIATION, S_DOMAIN);\n  makeRegexT(S_DOMAIN_HYPHEN, DIGIT, S_DOMAIN);\n  makeRegexT(S_DOMAIN_HYPHEN, LETTER, S_DOMAIN);\n  makeRegexT(S_DOMAIN_HYPHEN, EMOJI, S_DOMAIN);\n  makeRegexT(S_DOMAIN_HYPHEN, EMOJI_VARIATION, S_DOMAIN); // Set default transition for start state (some symbol)\n\n  S_START.jd = makeAcceptingState(SYM);\n  return S_START;\n}\n/**\n\tGiven a string, returns an array of TOKEN instances representing the\n\tcomposition of that string.\n\n\t@method run\n\t@param {State} start scanner starting state\n\t@param {string} str input string to scan\n\t@return {{t: string, v: string, s: number, l: number}[]} list of tokens, each with a type and value\n*/\n\nfunction run$1(start, str) {\n  // State machine is not case sensitive, so input is tokenized in lowercased\n  // form (still returns the regular case though) Uses selective `toLowerCase`\n  // is used because lowercasing the entire string causes the length and\n  // character position to vary in some non-English strings with V8-based\n  // runtimes.\n  var iterable = stringToArray(str.replace(/[A-Z]/g, function (c) {\n    return c.toLowerCase();\n  }));\n  var charCount = iterable.length; // <= len if there are emojis, etc\n\n  var tokens = []; // return value\n  // cursor through the string itself, accounting for characters that have\n  // width with length 2 such as emojis\n\n  var cursor = 0; // Cursor through the array-representation of the string\n\n  var charCursor = 0; // Tokenize the string\n\n  while (charCursor < charCount) {\n    var state = start;\n    var nextState = null;\n    var tokenLength = 0;\n    var latestAccepting = null;\n    var sinceAccepts = -1;\n    var charsSinceAccepts = -1;\n\n    while (charCursor < charCount && (nextState = takeT(state, iterable[charCursor]))) {\n      state = nextState; // Keep track of the latest accepting state\n\n      if (state.accepts()) {\n        sinceAccepts = 0;\n        charsSinceAccepts = 0;\n        latestAccepting = state;\n      } else if (sinceAccepts >= 0) {\n        sinceAccepts += iterable[charCursor].length;\n        charsSinceAccepts++;\n      }\n\n      tokenLength += iterable[charCursor].length;\n      cursor += iterable[charCursor].length;\n      charCursor++;\n    } // Roll back to the latest accepting state\n\n\n    cursor -= sinceAccepts;\n    charCursor -= charsSinceAccepts;\n    tokenLength -= sinceAccepts; // No more jumps, just make a new token from the last accepting one\n    // TODO: If possible, don't output v, instead output range where values ocur\n\n    tokens.push({\n      t: latestAccepting.t,\n      // token type/name\n      v: str.substr(cursor - tokenLength, tokenLength),\n      // string value\n      s: cursor - tokenLength,\n      // start index\n      e: cursor // end index (excluding)\n\n    });\n  }\n\n  return tokens;\n}\n/**\n * Convert a String to an Array of characters, taking into account that some\n * characters like emojis take up two string indexes.\n *\n * Adapted from core-js (MIT license)\n * https://github.com/zloirock/core-js/blob/2d69cf5f99ab3ea3463c395df81e5a15b68f49d9/packages/core-js/internals/string-multibyte.js\n *\n * @function stringToArray\n * @param {string} str\n * @returns {string[]}\n */\n\nfunction stringToArray(str) {\n  var result = [];\n  var len = str.length;\n  var index = 0;\n\n  while (index < len) {\n    var first = str.charCodeAt(index);\n    var second = void 0;\n    var char = first < 0xd800 || first > 0xdbff || index + 1 === len || (second = str.charCodeAt(index + 1)) < 0xdc00 || second > 0xdfff ? str[index] // single character\n    : str.slice(index, index + 2); // two-index characters\n\n    result.push(char);\n    index += char.length;\n  }\n\n  return result;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\n/**\n * @property {string} defaultProtocol\n * @property {{[string]: (event) => void}]} [events]\n */\nvar defaults = {\n  defaultProtocol: 'http',\n  events: null,\n  format: noop,\n  formatHref: noop,\n  nl2br: false,\n  tagName: 'a',\n  target: null,\n  rel: null,\n  validate: true,\n  truncate: 0,\n  className: null,\n  attributes: null,\n  ignoreTags: []\n};\n/**\n * @class Options\n * @param {Object} [opts] Set option properties besides the defaults\n */\n\nfunction Options(opts) {\n  opts = opts || {};\n  this.defaultProtocol = 'defaultProtocol' in opts ? opts.defaultProtocol : defaults.defaultProtocol;\n  this.events = 'events' in opts ? opts.events : defaults.events;\n  this.format = 'format' in opts ? opts.format : defaults.format;\n  this.formatHref = 'formatHref' in opts ? opts.formatHref : defaults.formatHref;\n  this.nl2br = 'nl2br' in opts ? opts.nl2br : defaults.nl2br;\n  this.tagName = 'tagName' in opts ? opts.tagName : defaults.tagName;\n  this.target = 'target' in opts ? opts.target : defaults.target;\n  this.rel = 'rel' in opts ? opts.rel : defaults.rel;\n  this.validate = 'validate' in opts ? opts.validate : defaults.validate;\n  this.truncate = 'truncate' in opts ? opts.truncate : defaults.truncate;\n  this.className = 'className' in opts ? opts.className : defaults.className;\n  this.attributes = opts.attributes || defaults.attributes;\n  this.ignoreTags = []; // Make all tags names upper case\n\n  var ignoredTags = 'ignoreTags' in opts ? opts.ignoreTags : defaults.ignoreTags;\n\n  for (var i = 0; i < ignoredTags.length; i++) {\n    this.ignoreTags.push(ignoredTags[i].toUpperCase());\n  }\n}\nOptions.prototype = {\n  /**\n   * Given the token, return all options for how it should be displayed\n   */\n  resolve: function resolve(token) {\n    var href = token.toHref(this.defaultProtocol);\n    return {\n      formatted: this.get('format', token.toString(), token),\n      formattedHref: this.get('formatHref', href, token),\n      tagName: this.get('tagName', href, token),\n      className: this.get('className', href, token),\n      target: this.get('target', href, token),\n      rel: this.get('rel', href, token),\n      events: this.getObject('events', href, token),\n      attributes: this.getObject('attributes', href, token),\n      truncate: this.get('truncate', href, token)\n    };\n  },\n\n  /**\n   * Returns true or false based on whether a token should be displayed as a\n   * link based on the user options. By default,\n   */\n  check: function check(token) {\n    return this.get('validate', token.toString(), token);\n  },\n  // Private methods\n\n  /**\n   * Resolve an option's value based on the value of the option and the given\n   * params.\n   * @param {string} key Name of option to use\n   * @param operator will be passed to the target option if it's method\n   * @param {MultiToken} token The token from linkify.tokenize\n   */\n  get: function get(key, operator, token) {\n    var option = this[key];\n\n    if (!option) {\n      return option;\n    }\n\n    var optionValue;\n\n    switch (_typeof(option)) {\n      case 'function':\n        return option(operator, token.t);\n\n      case 'object':\n        optionValue = token.t in option ? option[token.t] : defaults[key];\n        return typeof optionValue === 'function' ? optionValue(operator, token.t) : optionValue;\n    }\n\n    return option;\n  },\n  getObject: function getObject(key, operator, token) {\n    var option = this[key];\n    return typeof option === 'function' ? option(operator, token.t) : option;\n  }\n};\n\nfunction noop(val) {\n  return val;\n}\n\nvar options = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tdefaults: defaults,\n\tOptions: Options\n});\n\n/******************************************************************************\n\tMulti-Tokens\n\tTokens composed of arrays of TextTokens\n******************************************************************************/\n\nfunction inherits(parent, child) {\n  var props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var extended = Object.create(parent.prototype);\n\n  for (var p in props) {\n    extended[p] = props[p];\n  }\n\n  extended.constructor = child;\n  child.prototype = extended;\n  return child;\n}\n/**\n\tAbstract class used for manufacturing tokens of text tokens. That is rather\n\tthan the value for a token being a small string of text, it's value an array\n\tof text tokens.\n\n\tUsed for grouping together URLs, emails, hashtags, and other potential\n\tcreations.\n\n\t@class MultiToken\n\t@param {string} value\n\t@param {{t: string, v: string, s: number, e: number}[]} tokens\n\t@abstract\n*/\n\n\nfunction MultiToken() {}\nMultiToken.prototype = {\n  /**\n  \tString representing the type for this token\n  \t@property t\n  \t@default 'token'\n  */\n  t: 'token',\n\n  /**\n  \tIs this multitoken a link?\n  \t@property isLink\n  \t@default false\n  */\n  isLink: false,\n\n  /**\n  \tReturn the string this token represents.\n  \t@method toString\n  \t@return {string}\n  */\n  toString: function toString() {\n    return this.v;\n  },\n\n  /**\n  \tWhat should the value for this token be in the `href` HTML attribute?\n  \tReturns the `.toString` value by default.\n  \t\t@method toHref\n  \t@return {string}\n  */\n  toHref: function toHref() {\n    return this.toString();\n  },\n\n  /**\n   * The start index of this token in the original input string\n   * @returns {number}\n   */\n  startIndex: function startIndex() {\n    return this.tk[0].s;\n  },\n\n  /**\n   * The end index of this token in the original input string (up to this\n   * index but not including it)\n   * @returns {number}\n   */\n  endIndex: function endIndex() {\n    return this.tk[this.tk.length - 1].e;\n  },\n\n  /**\n  \tReturns a hash of relevant values for this token, which includes keys\n  \t* type - Kind of token ('url', 'email', etc.)\n  \t* value - Original text\n  \t* href - The value that should be added to the anchor tag's href\n  \t\tattribute\n  \t\t@method toObject\n  \t@param {string} [protocol] `'http'` by default\n  */\n  toObject: function toObject() {\n    var protocol = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaults.defaultProtocol;\n    return {\n      type: this.t,\n      value: this.v,\n      isLink: this.isLink,\n      href: this.toHref(protocol),\n      start: this.startIndex(),\n      end: this.endIndex()\n    };\n  }\n}; // Base token\n/**\n * Create a new token that can be emitted by the parser state machine\n * @param {string} type readable type of the token\n * @param {object} props properties to assign or override, including isLink = true or false\n * @returns {(value: string, tokens: {t: string, v: string, s: number, e: number}) => MultiToken} new token class\n */\n\nfunction createTokenClass(type, props) {\n  function Token(value, tokens) {\n    this.t = type;\n    this.v = value;\n    this.tk = tokens;\n  }\n\n  inherits(MultiToken, Token, props);\n  return Token;\n}\n/**\n\tRepresents an arbitrarily mailto email address with the prefix included\n\t@class MailtoEmail\n\t@extends MultiToken\n*/\n\nvar MailtoEmail = createTokenClass('email', {\n  isLink: true\n});\n/**\n\tRepresents a list of tokens making up a valid email address\n\t@class Email\n\t@extends MultiToken\n*/\n\nvar Email = createTokenClass('email', {\n  isLink: true,\n  toHref: function toHref() {\n    return 'mailto:' + this.toString();\n  }\n});\n/**\n\tRepresents some plain text\n\t@class Text\n\t@extends MultiToken\n*/\n\nvar Text = createTokenClass('text');\n/**\n\tMulti-linebreak token - represents a line break\n\t@class Nl\n\t@extends MultiToken\n*/\n\nvar Nl = createTokenClass('nl');\n/**\n\tRepresents a list of text tokens making up a valid URL\n\t@class Url\n\t@extends MultiToken\n*/\n\nvar Url = createTokenClass('url', {\n  isLink: true,\n\n  /**\n  \tLowercases relevant parts of the domain and adds the protocol if\n  \trequired. Note that this will not escape unsafe HTML characters in the\n  \tURL.\n  \t\t@method href\n  \t@param {string} protocol\n  \t@return {string}\n  */\n  toHref: function toHref() {\n    var protocol = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaults.defaultProtocol;\n    var tokens = this.tk;\n    var hasProtocol = false;\n    var hasSlashSlash = false;\n    var result = [];\n    var i = 0; // Make the first part of the domain lowercase\n    // Lowercase protocol\n\n    while (tokens[i].t === PROTOCOL) {\n      hasProtocol = true;\n      result.push(tokens[i].v);\n      i++;\n    } // Skip slash-slash\n\n\n    while (tokens[i].t === SLASH) {\n      hasSlashSlash = true;\n      result.push(tokens[i].v);\n      i++;\n    } // Continue pushing characters\n\n\n    for (; i < tokens.length; i++) {\n      result.push(tokens[i].v);\n    }\n\n    result = result.join('');\n\n    if (!(hasProtocol || hasSlashSlash)) {\n      result = \"\".concat(protocol, \"://\").concat(result);\n    }\n\n    return result;\n  },\n  hasProtocol: function hasProtocol() {\n    return this.tk[0].t === PROTOCOL;\n  }\n});\n\nvar multi = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tMultiToken: MultiToken,\n\tBase: MultiToken,\n\tcreateTokenClass: createTokenClass,\n\tMailtoEmail: MailtoEmail,\n\tEmail: Email,\n\tText: Text,\n\tNl: Nl,\n\tUrl: Url\n});\n\n/**\n\tNot exactly parser, more like the second-stage scanner (although we can\n\ttheoretically hotswap the code here with a real parser in the future... but\n\tfor a little URL-finding utility abstract syntax trees may be a little\n\toverkill).\n\n\tURL format: http://en.wikipedia.org/wiki/URI_scheme\n\tEmail format: http://en.wikipedia.org/wiki/Email_address (links to RFC in\n\treference)\n\n\t@module linkify\n\t@submodule parser\n\t@main run\n*/\n/**\n * Generate the parser multi token-based state machine\n * @returns {State} the starting state\n */\n\nfunction init$1() {\n  // The universal starting state.\n  var S_START = makeState(); // Intermediate states for URLs. Note that domains that begin with a protocol\n  // are treated slighly differently from those that don't.\n\n  var S_PROTOCOL = makeState(); // e.g., 'http:'\n\n  var S_MAILTO = makeState(); // 'mailto:'\n\n  var S_PROTOCOL_SLASH = makeState(); // e.g., 'http:/''\n\n  var S_PROTOCOL_SLASH_SLASH = makeState(); // e.g.,'http://'\n\n  var S_DOMAIN = makeState(); // parsed string ends with a potential domain name (A)\n\n  var S_DOMAIN_DOT = makeState(); // (A) domain followed by DOT\n\n  var S_TLD = makeAcceptingState(Url); // (A) Simplest possible URL with no query string\n\n  var S_TLD_COLON = makeState(); // (A) URL followed by colon (potential port number here)\n\n  var S_TLD_PORT = makeAcceptingState(Url); // TLD followed by a port number\n\n  var S_URL = makeAcceptingState(Url); // Long URL with optional port and maybe query string\n\n  var S_URL_NON_ACCEPTING = makeState(); // URL followed by some symbols (will not be part of the final URL)\n\n  var S_URL_OPENBRACE = makeState(); // URL followed by {\n\n  var S_URL_OPENBRACKET = makeState(); // URL followed by [\n\n  var S_URL_OPENANGLEBRACKET = makeState(); // URL followed by <\n\n  var S_URL_OPENPAREN = makeState(); // URL followed by (\n\n  var S_URL_OPENBRACE_Q = makeAcceptingState(Url); // URL followed by { and some symbols that the URL can end it\n\n  var S_URL_OPENBRACKET_Q = makeAcceptingState(Url); // URL followed by [ and some symbols that the URL can end it\n\n  var S_URL_OPENANGLEBRACKET_Q = makeAcceptingState(Url); // URL followed by < and some symbols that the URL can end it\n\n  var S_URL_OPENPAREN_Q = makeAcceptingState(Url); // URL followed by ( and some symbols that the URL can end it\n\n  var S_URL_OPENBRACE_SYMS = makeState(); // S_URL_OPENBRACE_Q followed by some symbols it cannot end it\n\n  var S_URL_OPENBRACKET_SYMS = makeState(); // S_URL_OPENBRACKET_Q followed by some symbols it cannot end it\n\n  var S_URL_OPENANGLEBRACKET_SYMS = makeState(); // S_URL_OPENANGLEBRACKET_Q followed by some symbols it cannot end it\n\n  var S_URL_OPENPAREN_SYMS = makeState(); // S_URL_OPENPAREN_Q followed by some symbols it cannot end it\n\n  var S_EMAIL_DOMAIN = makeState(); // parsed string starts with local email info + @ with a potential domain name (C)\n\n  var S_EMAIL_DOMAIN_DOT = makeState(); // (C) domain followed by DOT\n\n  var S_EMAIL = makeAcceptingState(Email); // (C) Possible email address (could have more tlds)\n\n  var S_EMAIL_COLON = makeState(); // (C) URL followed by colon (potential port number here)\n\n  var S_EMAIL_PORT = makeAcceptingState(Email); // (C) Email address with a port\n\n  var S_MAILTO_EMAIL = makeAcceptingState(MailtoEmail); // Email that begins with the mailto prefix (D)\n\n  var S_MAILTO_EMAIL_NON_ACCEPTING = makeState(); // (D) Followed by some non-query string chars\n\n  var S_LOCALPART = makeState(); // Local part of the email address\n\n  var S_LOCALPART_AT = makeState(); // Local part of the email address plus @\n\n  var S_LOCALPART_DOT = makeState(); // Local part of the email address plus '.' (localpart cannot end in .)\n\n  var S_NL = makeAcceptingState(Nl); // single new line\n  // Make path from start to protocol (with '//')\n\n  makeT(S_START, NL, S_NL);\n  makeT(S_START, PROTOCOL, S_PROTOCOL);\n  makeT(S_START, MAILTO, S_MAILTO);\n  makeT(S_PROTOCOL, SLASH, S_PROTOCOL_SLASH);\n  makeT(S_PROTOCOL_SLASH, SLASH, S_PROTOCOL_SLASH_SLASH); // The very first potential domain name\n\n  makeT(S_START, TLD, S_DOMAIN);\n  makeT(S_START, DOMAIN, S_DOMAIN);\n  makeT(S_START, LOCALHOST, S_TLD);\n  makeT(S_START, NUM, S_DOMAIN); // Force URL for protocol followed by anything sane\n\n  makeT(S_PROTOCOL_SLASH_SLASH, TLD, S_URL);\n  makeT(S_PROTOCOL_SLASH_SLASH, DOMAIN, S_URL);\n  makeT(S_PROTOCOL_SLASH_SLASH, NUM, S_URL);\n  makeT(S_PROTOCOL_SLASH_SLASH, LOCALHOST, S_URL); // Account for dots and hyphens\n  // hyphens are usually parts of domain names\n\n  makeT(S_DOMAIN, DOT, S_DOMAIN_DOT);\n  makeT(S_EMAIL_DOMAIN, DOT, S_EMAIL_DOMAIN_DOT); // Hyphen can jump back to a domain name\n  // After the first domain and a dot, we can find either a URL or another domain\n\n  makeT(S_DOMAIN_DOT, TLD, S_TLD);\n  makeT(S_DOMAIN_DOT, DOMAIN, S_DOMAIN);\n  makeT(S_DOMAIN_DOT, NUM, S_DOMAIN);\n  makeT(S_DOMAIN_DOT, LOCALHOST, S_DOMAIN);\n  makeT(S_EMAIL_DOMAIN_DOT, TLD, S_EMAIL);\n  makeT(S_EMAIL_DOMAIN_DOT, DOMAIN, S_EMAIL_DOMAIN);\n  makeT(S_EMAIL_DOMAIN_DOT, NUM, S_EMAIL_DOMAIN);\n  makeT(S_EMAIL_DOMAIN_DOT, LOCALHOST, S_EMAIL_DOMAIN); // S_TLD accepts! But the URL could be longer, try to find a match greedily\n  // The `run` function should be able to \"rollback\" to the accepting state\n\n  makeT(S_TLD, DOT, S_DOMAIN_DOT);\n  makeT(S_EMAIL, DOT, S_EMAIL_DOMAIN_DOT); // Become real URLs after `SLASH` or `COLON NUM SLASH`\n  // Here PSS and non-PSS converge\n\n  makeT(S_TLD, COLON, S_TLD_COLON);\n  makeT(S_TLD, SLASH, S_URL);\n  makeT(S_TLD_COLON, NUM, S_TLD_PORT);\n  makeT(S_TLD_PORT, SLASH, S_URL);\n  makeT(S_EMAIL, COLON, S_EMAIL_COLON);\n  makeT(S_EMAIL_COLON, NUM, S_EMAIL_PORT); // Types of characters the URL can definitely end in\n\n  var qsAccepting = [AMPERSAND, ASTERISK, AT, BACKSLASH, BACKTICK, CARET, DOLLAR, DOMAIN, EQUALS, HYPHEN, LOCALHOST, NUM, PERCENT, PIPE, PLUS, POUND, PROTOCOL, SLASH, SYM, TILDE, TLD, UNDERSCORE]; // Types of tokens that can follow a URL and be part of the query string\n  // but cannot be the very last characters\n  // Characters that cannot appear in the URL at all should be excluded\n\n  var qsNonAccepting = [APOSTROPHE, CLOSEANGLEBRACKET, CLOSEBRACE, CLOSEBRACKET, CLOSEPAREN, COLON, COMMA, DOT, EXCLAMATION, OPENANGLEBRACKET, OPENBRACE, OPENBRACKET, OPENPAREN, QUERY, QUOTE, SEMI]; // These states are responsible primarily for determining whether or not to\n  // include the final round bracket.\n  // URL, followed by an opening bracket\n\n  makeT(S_URL, OPENBRACE, S_URL_OPENBRACE);\n  makeT(S_URL, OPENBRACKET, S_URL_OPENBRACKET);\n  makeT(S_URL, OPENANGLEBRACKET, S_URL_OPENANGLEBRACKET);\n  makeT(S_URL, OPENPAREN, S_URL_OPENPAREN); // URL with extra symbols at the end, followed by an opening bracket\n\n  makeT(S_URL_NON_ACCEPTING, OPENBRACE, S_URL_OPENBRACE);\n  makeT(S_URL_NON_ACCEPTING, OPENBRACKET, S_URL_OPENBRACKET);\n  makeT(S_URL_NON_ACCEPTING, OPENANGLEBRACKET, S_URL_OPENANGLEBRACKET);\n  makeT(S_URL_NON_ACCEPTING, OPENPAREN, S_URL_OPENPAREN); // Closing bracket component. This character WILL be included in the URL\n\n  makeT(S_URL_OPENBRACE, CLOSEBRACE, S_URL);\n  makeT(S_URL_OPENBRACKET, CLOSEBRACKET, S_URL);\n  makeT(S_URL_OPENANGLEBRACKET, CLOSEANGLEBRACKET, S_URL);\n  makeT(S_URL_OPENPAREN, CLOSEPAREN, S_URL);\n  makeT(S_URL_OPENBRACE_Q, CLOSEBRACE, S_URL);\n  makeT(S_URL_OPENBRACKET_Q, CLOSEBRACKET, S_URL);\n  makeT(S_URL_OPENANGLEBRACKET_Q, CLOSEANGLEBRACKET, S_URL);\n  makeT(S_URL_OPENPAREN_Q, CLOSEPAREN, S_URL);\n  makeT(S_URL_OPENBRACE_SYMS, CLOSEBRACE, S_URL);\n  makeT(S_URL_OPENBRACKET_SYMS, CLOSEBRACKET, S_URL);\n  makeT(S_URL_OPENANGLEBRACKET_SYMS, CLOSEANGLEBRACKET, S_URL);\n  makeT(S_URL_OPENPAREN_SYMS, CLOSEPAREN, S_URL); // URL that beings with an opening bracket, followed by a symbols.\n  // Note that the final state can still be `S_URL_OPENBRACE_Q` (if the URL only\n  // has a single opening bracket for some reason).\n\n  makeMultiT(S_URL_OPENBRACE, qsAccepting, S_URL_OPENBRACE_Q);\n  makeMultiT(S_URL_OPENBRACKET, qsAccepting, S_URL_OPENBRACKET_Q);\n  makeMultiT(S_URL_OPENANGLEBRACKET, qsAccepting, S_URL_OPENANGLEBRACKET_Q);\n  makeMultiT(S_URL_OPENPAREN, qsAccepting, S_URL_OPENPAREN_Q);\n  makeMultiT(S_URL_OPENBRACE, qsNonAccepting, S_URL_OPENBRACE_SYMS);\n  makeMultiT(S_URL_OPENBRACKET, qsNonAccepting, S_URL_OPENBRACKET_SYMS);\n  makeMultiT(S_URL_OPENANGLEBRACKET, qsNonAccepting, S_URL_OPENANGLEBRACKET_SYMS);\n  makeMultiT(S_URL_OPENPAREN, qsNonAccepting, S_URL_OPENPAREN_SYMS); // URL that begins with an opening bracket, followed by some symbols\n\n  makeMultiT(S_URL_OPENBRACE_Q, qsAccepting, S_URL_OPENBRACE_Q);\n  makeMultiT(S_URL_OPENBRACKET_Q, qsAccepting, S_URL_OPENBRACKET_Q);\n  makeMultiT(S_URL_OPENANGLEBRACKET_Q, qsAccepting, S_URL_OPENANGLEBRACKET_Q);\n  makeMultiT(S_URL_OPENPAREN_Q, qsAccepting, S_URL_OPENPAREN_Q);\n  makeMultiT(S_URL_OPENBRACE_Q, qsNonAccepting, S_URL_OPENBRACE_Q);\n  makeMultiT(S_URL_OPENBRACKET_Q, qsNonAccepting, S_URL_OPENBRACKET_Q);\n  makeMultiT(S_URL_OPENANGLEBRACKET_Q, qsNonAccepting, S_URL_OPENANGLEBRACKET_Q);\n  makeMultiT(S_URL_OPENPAREN_Q, qsNonAccepting, S_URL_OPENPAREN_Q);\n  makeMultiT(S_URL_OPENBRACE_SYMS, qsAccepting, S_URL_OPENBRACE_Q);\n  makeMultiT(S_URL_OPENBRACKET_SYMS, qsAccepting, S_URL_OPENBRACKET_Q);\n  makeMultiT(S_URL_OPENANGLEBRACKET_SYMS, qsAccepting, S_URL_OPENANGLEBRACKET_Q);\n  makeMultiT(S_URL_OPENPAREN_SYMS, qsAccepting, S_URL_OPENPAREN_Q);\n  makeMultiT(S_URL_OPENBRACE_SYMS, qsNonAccepting, S_URL_OPENBRACE_SYMS);\n  makeMultiT(S_URL_OPENBRACKET_SYMS, qsNonAccepting, S_URL_OPENBRACKET_SYMS);\n  makeMultiT(S_URL_OPENANGLEBRACKET_SYMS, qsNonAccepting, S_URL_OPENANGLEBRACKET_SYMS);\n  makeMultiT(S_URL_OPENPAREN_SYMS, qsNonAccepting, S_URL_OPENPAREN_SYMS); // Account for the query string\n\n  makeMultiT(S_URL, qsAccepting, S_URL);\n  makeMultiT(S_URL_NON_ACCEPTING, qsAccepting, S_URL);\n  makeMultiT(S_URL, qsNonAccepting, S_URL_NON_ACCEPTING);\n  makeMultiT(S_URL_NON_ACCEPTING, qsNonAccepting, S_URL_NON_ACCEPTING); // Email address-specific state definitions\n  // Note: We are not allowing '/' in email addresses since this would interfere\n  // with real URLs\n  // For addresses with the mailto prefix\n  // 'mailto:' followed by anything sane is a valid email\n\n  makeT(S_MAILTO, TLD, S_MAILTO_EMAIL);\n  makeT(S_MAILTO, DOMAIN, S_MAILTO_EMAIL);\n  makeT(S_MAILTO, NUM, S_MAILTO_EMAIL);\n  makeT(S_MAILTO, LOCALHOST, S_MAILTO_EMAIL); // Greedily get more potential valid email values\n\n  makeMultiT(S_MAILTO_EMAIL, qsAccepting, S_MAILTO_EMAIL);\n  makeMultiT(S_MAILTO_EMAIL, qsNonAccepting, S_MAILTO_EMAIL_NON_ACCEPTING);\n  makeMultiT(S_MAILTO_EMAIL_NON_ACCEPTING, qsAccepting, S_MAILTO_EMAIL);\n  makeMultiT(S_MAILTO_EMAIL_NON_ACCEPTING, qsNonAccepting, S_MAILTO_EMAIL_NON_ACCEPTING); // For addresses without the mailto prefix\n  // Tokens allowed in the localpart of the email\n\n  var localpartAccepting = [AMPERSAND, APOSTROPHE, ASTERISK, BACKSLASH, BACKTICK, CARET, CLOSEBRACE, DOLLAR, DOMAIN, EQUALS, HYPHEN, NUM, OPENBRACE, PERCENT, PIPE, PLUS, POUND, QUERY, SLASH, SYM, TILDE, TLD, UNDERSCORE]; // Some of the tokens in `localpartAccepting` are already accounted for here and\n  // will not be overwritten (don't worry)\n\n  makeMultiT(S_DOMAIN, localpartAccepting, S_LOCALPART);\n  makeT(S_DOMAIN, AT, S_LOCALPART_AT);\n  makeMultiT(S_TLD, localpartAccepting, S_LOCALPART);\n  makeT(S_TLD, AT, S_LOCALPART_AT);\n  makeMultiT(S_DOMAIN_DOT, localpartAccepting, S_LOCALPART); // Now in localpart of address\n  // TODO: IP addresses and what if the email starts with numbers?\n\n  makeMultiT(S_LOCALPART, localpartAccepting, S_LOCALPART);\n  makeT(S_LOCALPART, AT, S_LOCALPART_AT); // close to an email address now\n\n  makeT(S_LOCALPART, DOT, S_LOCALPART_DOT);\n  makeMultiT(S_LOCALPART_DOT, localpartAccepting, S_LOCALPART);\n  makeT(S_LOCALPART_AT, TLD, S_EMAIL_DOMAIN);\n  makeT(S_LOCALPART_AT, DOMAIN, S_EMAIL_DOMAIN);\n  makeT(S_LOCALPART_AT, NUM, S_EMAIL_DOMAIN);\n  makeT(S_LOCALPART_AT, LOCALHOST, S_EMAIL); // States following `@` defined above\n\n  return S_START;\n}\n/**\n * Run the parser state machine on a list of scanned string-based tokens to\n * create a list of multi tokens, each of which represents a URL, email address,\n * plain text, etc.\n *\n * @param {State} start parser start state\n * @param {string} input the original input used to generate the given tokens\n * @param {{t: string, v: string, s: number, e: number}[]} tokens list of scanned tokens\n * @returns {MultiToken[]}\n */\n\nfunction run(start, input, tokens) {\n  var len = tokens.length;\n  var cursor = 0;\n  var multis = [];\n  var textTokens = [];\n\n  while (cursor < len) {\n    var state = start;\n    var secondState = null;\n    var nextState = null;\n    var multiLength = 0;\n    var latestAccepting = null;\n    var sinceAccepts = -1;\n\n    while (cursor < len && !(secondState = takeT(state, tokens[cursor].t))) {\n      // Starting tokens with nowhere to jump to.\n      // Consider these to be just plain text\n      textTokens.push(tokens[cursor++]);\n    }\n\n    while (cursor < len && (nextState = secondState || takeT(state, tokens[cursor].t))) {\n      // Get the next state\n      secondState = null;\n      state = nextState; // Keep track of the latest accepting state\n\n      if (state.accepts()) {\n        sinceAccepts = 0;\n        latestAccepting = state;\n      } else if (sinceAccepts >= 0) {\n        sinceAccepts++;\n      }\n\n      cursor++;\n      multiLength++;\n    }\n\n    if (sinceAccepts < 0) {\n      // No accepting state was found, part of a regular text token\n      // Add all the tokens we looked at to the text tokens array\n      for (var i = cursor - multiLength; i < cursor; i++) {\n        textTokens.push(tokens[i]);\n      }\n    } else {\n      // Accepting state!\n      // First close off the textTokens (if available)\n      if (textTokens.length > 0) {\n        multis.push(parserCreateMultiToken(Text, input, textTokens));\n        textTokens = [];\n      } // Roll back to the latest accepting state\n\n\n      cursor -= sinceAccepts;\n      multiLength -= sinceAccepts; // Create a new multitoken\n\n      var Multi = latestAccepting.t;\n      var subtokens = tokens.slice(cursor - multiLength, cursor);\n      multis.push(parserCreateMultiToken(Multi, input, subtokens));\n    }\n  } // Finally close off the textTokens (if available)\n\n\n  if (textTokens.length > 0) {\n    multis.push(parserCreateMultiToken(Text, input, textTokens));\n  }\n\n  return multis;\n}\n/**\n * Utility function for instantiating a new multitoken with all the relevant\n * fields during parsing.\n * @param {Class<MultiToken>} Multi class to instantiate\n * @param {string} input original input string\n * @param {{t: string, v: string, s: number, e: number}[]} tokens consecutive tokens scanned from input string\n * @returns {MultiToken}\n */\n\nfunction parserCreateMultiToken(Multi, input, tokens) {\n  var startIdx = tokens[0].s;\n  var endIdx = tokens[tokens.length - 1].e;\n  var value = input.substr(startIdx, endIdx - startIdx);\n  return new Multi(value, tokens);\n}\n\nvar warn = typeof console !== 'undefined' && console && console.warn || function () {}; // Side-effect initialization state\n\n\nvar INIT = {\n  scanner: null,\n  parser: null,\n  pluginQueue: [],\n  customProtocols: [],\n  initialized: false\n};\n/**\n * De-register all plugins and reset the internal state-machine. Used for\n * testing; not required in practice.\n * @private\n */\n\nfunction reset() {\n  INIT.scanner = null;\n  INIT.parser = null;\n  INIT.pluginQueue = [];\n  INIT.customProtocols = [];\n  INIT.initialized = false;\n}\n/**\n * Register a linkify extension plugin\n * @param {string} name of plugin to register\n * @param {Function} plugin function that accepts mutable linkify state\n */\n\nfunction registerPlugin(name, plugin) {\n  for (var i = 0; i < INIT.pluginQueue.length; i++) {\n    if (name === INIT.pluginQueue[i][0]) {\n      warn(\"linkifyjs: plugin \\\"\".concat(name, \"\\\" already registered - will be overwritten\"));\n      INIT.pluginQueue[i] = [name, plugin];\n      return;\n    }\n  }\n\n  INIT.pluginQueue.push([name, plugin]);\n\n  if (INIT.initialized) {\n    warn(\"linkifyjs: already initialized - will not register plugin \\\"\".concat(name, \"\\\" until you manually call linkify.init(). To avoid this warning, please register all plugins before invoking linkify the first time.\"));\n  }\n}\n/**\n * Detect URLs with the following additional protocol. Anything following\n * \"protocol:\" will be considered a link.\n * @param {string} protocol\n */\n\nfunction registerCustomProtocol(protocol) {\n  if (INIT.initialized) {\n    warn(\"linkifyjs: already initialized - will not register custom protocol \\\"\".concat(protocol, \"\\\" until you manually call linkify.init(). To avoid this warning, please register all custom protocols before invoking linkify the first time.\"));\n  }\n\n  if (!/^[a-z-]+$/.test(protocol)) {\n    throw Error('linkifyjs: protocols containing characters other than a-z or - (hyphen) are not supported');\n  }\n\n  INIT.customProtocols.push(protocol);\n}\n/**\n * Initialize the linkify state machine. Called automatically the first time\n * linkify is called on a string, but may be called manually as well.\n */\n\nfunction init() {\n  // Initialize state machines\n  INIT.scanner = {\n    start: init$2(INIT.customProtocols),\n    tokens: text\n  };\n  INIT.parser = {\n    start: init$1(),\n    tokens: multi\n  };\n  var utils = {\n    createTokenClass: createTokenClass\n  }; // Initialize plugins\n\n  for (var i = 0; i < INIT.pluginQueue.length; i++) {\n    INIT.pluginQueue[i][1]({\n      scanner: INIT.scanner,\n      parser: INIT.parser,\n      utils: utils\n    });\n  }\n\n  INIT.initialized = true;\n}\n/**\n\tParse a string into tokens that represent linkable and non-linkable sub-components\n\t@param {string} str\n\t@return {MultiToken[]} tokens\n*/\n\nfunction tokenize(str) {\n  if (!INIT.initialized) {\n    init();\n  }\n\n  return run(INIT.parser.start, str, run$1(INIT.scanner.start, str));\n}\n/**\n\tFind a list of linkable items in the given string.\n\t@param {string} str string to find links in\n\t@param {string} [type] (optional) only find links of a specific type, e.g.,\n\t'url' or 'email'\n*/\n\nfunction find(str) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var tokens = tokenize(str);\n  var filtered = [];\n\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n\n    if (token.isLink && (!type || token.t === type)) {\n      filtered.push(token.toObject());\n    }\n  }\n\n  return filtered;\n}\n/**\n * Is the given string valid linkable text of some sort. Note that this does not\n * trim the text for you.\n *\n * Optionally pass in a second `type` param, which is the type of link to test\n * for.\n *\n * For example,\n *\n *     linkify.test(str, 'email');\n *\n * Returns `true` if str is a valid email.\n * @param {string} str string to test for links\n * @param {string} [type] optional specific link type to look for\n * @returns boolean true/false\n */\n\nfunction test(str) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var tokens = tokenize(str);\n  return tokens.length === 1 && tokens[0].isLink && (!type || tokens[0].t === type);\n}\n\nexport { Options, find, init, options, registerCustomProtocol, registerPlugin, reset, test, tokenize };\n","import { combineTransactionSteps, getChangedRanges, getMarksBetween, findChildrenInRange, getAttributes, Mark, mergeAttributes, markPasteRule } from '@tiptap/core';\nimport { test, find, registerCustomProtocol } from 'linkifyjs';\nimport { Plugin, PluginKey } from 'prosemirror-state';\n\nfunction autolink(options) {\r\n    return new Plugin({\r\n        key: new PluginKey('autolink'),\r\n        appendTransaction: (transactions, oldState, newState) => {\r\n            const docChanges = transactions.some(transaction => transaction.docChanged)\r\n                && !oldState.doc.eq(newState.doc);\r\n            const preventAutolink = transactions.some(transaction => transaction.getMeta('preventAutolink'));\r\n            if (!docChanges || preventAutolink) {\r\n                return;\r\n            }\r\n            const { tr } = newState;\r\n            const transform = combineTransactionSteps(oldState.doc, [...transactions]);\r\n            const { mapping } = transform;\r\n            const changes = getChangedRanges(transform);\r\n            changes.forEach(({ oldRange, newRange }) => {\r\n                // at first we check if we have to remove links\r\n                getMarksBetween(oldRange.from, oldRange.to, oldState.doc)\r\n                    .filter(item => item.mark.type === options.type)\r\n                    .forEach(oldMark => {\r\n                    const newFrom = mapping.map(oldMark.from);\r\n                    const newTo = mapping.map(oldMark.to);\r\n                    const newMarks = getMarksBetween(newFrom, newTo, newState.doc)\r\n                        .filter(item => item.mark.type === options.type);\r\n                    if (!newMarks.length) {\r\n                        return;\r\n                    }\r\n                    const newMark = newMarks[0];\r\n                    const oldLinkText = oldState.doc.textBetween(oldMark.from, oldMark.to, undefined, ' ');\r\n                    const newLinkText = newState.doc.textBetween(newMark.from, newMark.to, undefined, ' ');\r\n                    const wasLink = test(oldLinkText);\r\n                    const isLink = test(newLinkText);\r\n                    // remove only the link, if it was a link before too\r\n                    // because we dont want to remove links that were set manually\r\n                    if (wasLink && !isLink) {\r\n                        tr.removeMark(newMark.from, newMark.to, options.type);\r\n                    }\r\n                });\r\n                // now lets see if we can add new links\r\n                findChildrenInRange(newState.doc, newRange, node => node.isTextblock)\r\n                    .forEach(textBlock => {\r\n                    // we need to define a placeholder for leaf nodes\r\n                    // so that the link position can be calculated correctly\r\n                    const text = newState.doc.textBetween(textBlock.pos, textBlock.pos + textBlock.node.nodeSize, undefined, ' ');\r\n                    find(text)\r\n                        .filter(link => link.isLink)\r\n                        .filter(link => {\r\n                        if (options.validate) {\r\n                            return options.validate(link.value);\r\n                        }\r\n                        return true;\r\n                    })\r\n                        // calculate link position\r\n                        .map(link => ({\r\n                        ...link,\r\n                        from: textBlock.pos + link.start + 1,\r\n                        to: textBlock.pos + link.end + 1,\r\n                    }))\r\n                        // check if link is within the changed range\r\n                        .filter(link => {\r\n                        const fromIsInRange = newRange.from >= link.from && newRange.from <= link.to;\r\n                        const toIsInRange = newRange.to >= link.from && newRange.to <= link.to;\r\n                        return fromIsInRange || toIsInRange;\r\n                    })\r\n                        // add link mark\r\n                        .forEach(link => {\r\n                        tr.addMark(link.from, link.to, options.type.create({\r\n                            href: link.href,\r\n                        }));\r\n                    });\r\n                });\r\n            });\r\n            if (!tr.steps.length) {\r\n                return;\r\n            }\r\n            return tr;\r\n        },\r\n    });\r\n}\n\nfunction clickHandler(options) {\r\n    return new Plugin({\r\n        key: new PluginKey('handleClickLink'),\r\n        props: {\r\n            handleClick: (view, pos, event) => {\r\n                var _a;\r\n                const attrs = getAttributes(view.state, options.type.name);\r\n                const link = (_a = event.target) === null || _a === void 0 ? void 0 : _a.closest('a');\r\n                if (link && attrs.href) {\r\n                    window.open(attrs.href, attrs.target);\r\n                    return true;\r\n                }\r\n                return false;\r\n            },\r\n        },\r\n    });\r\n}\n\nfunction pasteHandler(options) {\r\n    return new Plugin({\r\n        key: new PluginKey('handlePasteLink'),\r\n        props: {\r\n            handlePaste: (view, event, slice) => {\r\n                const { state } = view;\r\n                const { selection } = state;\r\n                const { empty } = selection;\r\n                if (empty) {\r\n                    return false;\r\n                }\r\n                let textContent = '';\r\n                slice.content.forEach(node => {\r\n                    textContent += node.textContent;\r\n                });\r\n                const link = find(textContent).find(item => item.isLink && item.value === textContent);\r\n                if (!textContent || !link) {\r\n                    return false;\r\n                }\r\n                options.editor.commands.setMark(options.type, {\r\n                    href: link.href,\r\n                });\r\n                return true;\r\n            },\r\n        },\r\n    });\r\n}\n\nconst Link = Mark.create({\r\n    name: 'link',\r\n    priority: 1000,\r\n    keepOnSplit: false,\r\n    onCreate() {\r\n        this.options.protocols.forEach(registerCustomProtocol);\r\n    },\r\n    inclusive() {\r\n        return this.options.autolink;\r\n    },\r\n    addOptions() {\r\n        return {\r\n            openOnClick: true,\r\n            linkOnPaste: true,\r\n            autolink: true,\r\n            protocols: [],\r\n            HTMLAttributes: {\r\n                target: '_blank',\r\n                rel: 'noopener noreferrer nofollow',\r\n                class: null,\r\n            },\r\n            validate: undefined,\r\n        };\r\n    },\r\n    addAttributes() {\r\n        return {\r\n            href: {\r\n                default: null,\r\n            },\r\n            target: {\r\n                default: this.options.HTMLAttributes.target,\r\n            },\r\n            class: {\r\n                default: this.options.HTMLAttributes.class,\r\n            },\r\n        };\r\n    },\r\n    parseHTML() {\r\n        return [\r\n            { tag: 'a[href]:not([href *= \"javascript:\" i])' },\r\n        ];\r\n    },\r\n    renderHTML({ HTMLAttributes }) {\r\n        return [\r\n            'a',\r\n            mergeAttributes(this.options.HTMLAttributes, HTMLAttributes),\r\n            0,\r\n        ];\r\n    },\r\n    addCommands() {\r\n        return {\r\n            setLink: attributes => ({ chain }) => {\r\n                return chain()\r\n                    .setMark(this.name, attributes)\r\n                    .setMeta('preventAutolink', true)\r\n                    .run();\r\n            },\r\n            toggleLink: attributes => ({ chain }) => {\r\n                return chain()\r\n                    .toggleMark(this.name, attributes, { extendEmptyMarkRange: true })\r\n                    .setMeta('preventAutolink', true)\r\n                    .run();\r\n            },\r\n            unsetLink: () => ({ chain }) => {\r\n                return chain()\r\n                    .unsetMark(this.name, { extendEmptyMarkRange: true })\r\n                    .setMeta('preventAutolink', true)\r\n                    .run();\r\n            },\r\n        };\r\n    },\r\n    addPasteRules() {\r\n        return [\r\n            markPasteRule({\r\n                find: text => find(text)\r\n                    .filter(link => {\r\n                    if (this.options.validate) {\r\n                        return this.options.validate(link.value);\r\n                    }\r\n                    return true;\r\n                })\r\n                    .filter(link => link.isLink)\r\n                    .map(link => ({\r\n                    text: link.value,\r\n                    index: link.start,\r\n                    data: link,\r\n                })),\r\n                type: this.type,\r\n                getAttributes: match => {\r\n                    var _a;\r\n                    return ({\r\n                        href: (_a = match.data) === null || _a === void 0 ? void 0 : _a.href,\r\n                    });\r\n                },\r\n            }),\r\n        ];\r\n    },\r\n    addProseMirrorPlugins() {\r\n        const plugins = [];\r\n        if (this.options.autolink) {\r\n            plugins.push(autolink({\r\n                type: this.type,\r\n                validate: this.options.validate,\r\n            }));\r\n        }\r\n        if (this.options.openOnClick) {\r\n            plugins.push(clickHandler({\r\n                type: this.type,\r\n            }));\r\n        }\r\n        if (this.options.linkOnPaste) {\r\n            plugins.push(pasteHandler({\r\n                editor: this.editor,\r\n                type: this.type,\r\n            }));\r\n        }\r\n        return plugins;\r\n    },\r\n});\n\nexport { Link, Link as default };\n//# sourceMappingURL=tiptap-extension-link.esm.js.map\n","import { Editor } from '@tiptap/core';\nimport StarterKit from '@tiptap/starter-kit';\nimport Link from '@tiptap/extension-link';\nimport { html, css, LitElement } from 'lit'\nimport { customElement, property } from 'lit/decorators.js'\nimport { makeEvent } from '../helpers';\n\n/**\n * An example element.\n *\n * @slot - This element has a slot\n * @csspart editor - The tiptap editor\n */\n@customElement('tiptap-editor')\nexport class TiptapEditor extends LitElement {\n  static styles = css`\n    :host {\n        --tte-bg-color: transparent;\n        --tte-border-color: #50546c;\n        --tte-min-height: 100px;\n        --tte-link-color: #36a3f7;\n    }\n\n    .link {\n        color: var(--tte-link-color);\n        cursor: pointer;\n    }\n\n    .tiptap-editor .ProseMirror {\n        background-color: var(--tte-bg-color);\n        border: 1px solid var(--tte-border-color);\n        border-radius: 3px;\n        padding: 0 1em;\n        min-height: var(--tte-min-height);\n    }\n  `\n\n  @property({ type: String })\n  value: string = ''\n\n  editor: any;\n\n  firstUpdated() {\n    this.setupEditor();\n  }\n\n  setupEditor() {\n    this.editor = new Editor({\n      element: this.renderRoot.querySelector('.tiptap-editor') as HTMLElement,\n      extensions: [\n        StarterKit,\n        Link.configure({\n          autolink: true,\n          openOnClick: true,\n          linkOnPaste: true,\n          HTMLAttributes: {\n            class: 'link',\n          },\n        }),\n      ],\n      content: this.value,\n      onBeforeCreate: () => {\n      // Before the view is created.\n      },\n      onCreate: ({ editor }) => {\n        this._onCreated(editor);\n      },\n      onUpdate: ({ editor }) => {\n        const value = editor.getHTML();\n        this._onChange(value);\n      },\n      onSelectionUpdate: () => {\n      // The selection has changed.\n      },\n      onTransaction: () => {\n      // The editor state has changed.\n      },\n      onFocus: () => {\n        this._onFocus();\n      },\n      onBlur: () => {\n        this._onBlur();\n      },\n      onDestroy: () => {\n      // The editor is being destroyed.\n      },\n    });\n  }\n\n  // Render the UI as a function of component state\n  render() {\n    return html`<div class=\"tiptap-editor\"></div>`;\n  }\n\n  _onChange(value: string) {\n    if (this.value !== value) {\n      this.dispatchEvent(makeEvent('onChange', { detail: { value } }));\n    }\n  }\n\n  _onFocus() {\n    this.dispatchEvent(makeEvent('onFocus'));\n  }\n\n  _onBlur() {\n    this.dispatchEvent(makeEvent('onBlur'));\n  }\n\n  _onCreated(editor: Editor) {\n    if (editor) {\n      const editorEl: Element = editor.view.dom;\n      this.dispatchEvent(makeEvent('onCreated', { detail: { editor, editorEl } }));\n    }\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'tiptap-editor': TiptapEditor\n  }\n}\n","import * as story_0 from '/@fs//Users/naz/Documents/Projects/node/marathon-webcomponents/src/components/full-calendar.stories.ts'\nimport * as story_1 from '/@fs//Users/naz/Documents/Projects/node/marathon-webcomponents/src/components/tiptap-editor.stories.ts'\n\n    function loadable(key) {\n      return {\"/Users/naz/Documents/Projects/node/marathon-webcomponents/src/components/full-calendar.stories.ts\": story_0,\"/Users/naz/Documents/Projects/node/marathon-webcomponents/src/components/tiptap-editor.stories.ts\": story_1}[key];\n    }\n    \n    Object.assign(loadable, {\n      keys: () => ([\"/Users/naz/Documents/Projects/node/marathon-webcomponents/src/components/full-calendar.stories.ts\",\"/Users/naz/Documents/Projects/node/marathon-webcomponents/src/components/tiptap-editor.stories.ts\"]),\n      resolve: (key) => ({\"/Users/naz/Documents/Projects/node/marathon-webcomponents/src/components/full-calendar.stories.ts\":\"./src/components/full-calendar.stories.ts\",\"/Users/naz/Documents/Projects/node/marathon-webcomponents/src/components/tiptap-editor.stories.ts\":\"./src/components/tiptap-editor.stories.ts\"}[key])\n    });\n\n    export function configStories(configure) {\n      configure(loadable, { hot: import.meta.hot }, false);\n    }","// Ensure that the client API is initialized by the framework before any other iframe code\n    // is loaded. That way our client-apis can assume the existence of the API+store\n    import { configure } from '@storybook/web-components';\n\n    import * as clientApi from \"@storybook/client-api\";\n    import { logger } from '@storybook/client-logger';\n    import * as config_0 from '@storybook/web-components/dist/esm/client/preview/config'\nimport * as config_1 from '@storybook/web-components/dist/esm/client/docs/config'\nimport * as config_2 from '@storybook/addon-links/preview.js'\nimport * as config_3 from '@storybook/addon-docs/preview.js'\nimport * as config_4 from '@storybook/addon-actions/preview.js'\nimport * as config_5 from '@storybook/addon-backgrounds/preview.js'\nimport * as config_6 from '@storybook/addon-measure/preview.js'\nimport * as config_7 from '@storybook/addon-outline/preview.js'\n    import * as preview from '/virtual:/@storybook/builder-vite/preview-entry.js';\n    import { configStories } from '/virtual:/@storybook/builder-vite/storybook-stories.js';\n\n    const {\n      addDecorator,\n      addParameters,\n      addLoader,\n      addArgTypesEnhancer,\n      addArgsEnhancer,\n      setGlobalRender,\n    } = clientApi;\n\n    const configs = [config_0,config_1,config_2,config_3,config_4,config_5,config_6,config_7,preview.default].filter(Boolean)\n\n    configs.forEach(config => {\n      Object.keys(config).forEach((key) => {\n        const value = config[key];\n        switch (key) {\n          case 'args': {\n            if (typeof clientApi.addArgs !== \"undefined\") {\n              return clientApi.addArgs(value);\n            } else {\n              return logger.warn(\n                \"Could not add global args. Please open an issue in storybookjs/builder-vite.\"\n              );\n            }\n          }\n          case 'argTypes': {\n            if (typeof clientApi.addArgTypes !== \"undefined\") {\n              return clientApi.addArgTypes(value);\n            } else {\n              return logger.warn(\n                \"Could not add global argTypes. Please open an issue in storybookjs/builder-vite.\"\n              );\n            }\n          }\n          case 'decorators': {\n            return value.forEach((decorator) => addDecorator(decorator, false));\n          }\n          case 'loaders': {\n            return value.forEach((loader) => addLoader(loader, false));\n          }\n          case 'parameters': {\n            return addParameters({ ...value }, false);\n          }\n          case 'argTypesEnhancers': {\n            return value.forEach((enhancer) => addArgTypesEnhancer(enhancer));\n          }\n          case 'argsEnhancers': {\n            return value.forEach((enhancer) => addArgsEnhancer(enhancer))\n          }\n          case 'render': {\n            return setGlobalRender(value)\n          }\n          case 'globals':\n          case 'globalTypes': {\n            const v = {};\n            v[key] = value;\n            return addParameters(v, false);\n          }\n          case 'decorateStory':\n          case 'renderToDOM': {\n            return null; // This key is not handled directly in v6 mode.\n          }\n          default: {\n            // eslint-disable-next-line prefer-template\n            return console.log(key + ' was not supported :( !');\n          }\n        }\n      });\n    })\n    \n    /* TODO: not quite sure what to do with this, to fix HMR\n    if (import.meta.hot) {\n        import.meta.hot.accept();    \n    }\n    */\n\n    configStories(configure);"],"file":"assets/iframe.eafa5bc4.js"}